bizagi.workportal=void 0!==bizagi.workportal?bizagi.workportal:{},bizagi.workportal.services=void 0!==bizagi.workportal.services?bizagi.workportal.services:{},bizagi.workportal.services.endPoints=[],bizagi.workportal.services.getEndPoints=function(e){return"workportal"==e.context?(bizagi="undefined"!=typeof bizagi?bizagi:{},bizagi.localization=void 0!==bizagi.localization?bizagi.localization:{},bizagi.localization.language=void 0!==bizagi.localization.language?bizagi.localization.language:bizagi.language,{"user-handler":e.proxyPrefix+"RestServices/UserHandler.ashx","process-handler":e.proxyPrefix+"RestServices/ProcessHandler.ashx","query-handler":e.proxyPrefix+"Rest/Handlers/Query","case-handler":e.proxyPrefix+"RestServices/CaseHandler.ashx","query-form":e.proxyPrefix+"App/ListaDetalle/QueryForm.aspx","query-form-edit":e.proxyPrefix+"App/ListaDetalle/SaveQuery.aspx","query-form-delete":e.proxyPrefix+"App/ListaDetalle/QueryForm.aspx","query-form-delete-cube":e.proxyPrefix+"Rest/Queries/Cubes/{idCube}","favorites-handler":e.proxyPrefix+"RestServices/FavoritesHandler.ashx","file-handler":e.proxyPrefix+"RestServices/EntityHandler.ashx","login-handler":e.proxyPrefix+"Rest/Users/UserAuthentication","login-handlerv10":e.proxyPrefix+"RestServices/UserHandler.ashx?action=authenticateUser&userName={0}&password={1}&domain={2}","logoff-handler":e.proxyPrefix+"RestServices/UserHandler.ashx?action=logOff","logoff-handlerv1":e.proxyPrefix+"Rest/Users/LogOff",overrides:e.proxyPrefix+"Rest/Util/Overrides","authorization-handler-getMenuAuthorization":e.proxyPrefix+"Rest/Authorization/MenuAuthorization","authorization-handler-isCaseCreationAuthorized":e.proxyPrefix+"Rest/Authorization/Processes/{0}/IsCaseCreationAuthorized","case-handler-getCaseSummary":e.proxyPrefix+"Rest/Cases/{idCase}/SummaryGuid","case-handler-getCaseSummaryByGuid":e.proxyPrefix+"Rest/Cases/{guid}/SummaryByGuid","case-handler-releaseActivity":e.proxyPrefix+"Rest/Cases/{idCase}/ReleaseActivity","case-handler-takeOwnershipActivity":e.proxyPrefix+"Rest/Cases/TakeOwnership","case-handler-getCasesList":e.proxyPrefix+"Rest/Processes/GetCases","offline-getProcessTree":e.proxyPrefix+"Rest/Processes/OfflineProcessTree","offline-getForms":e.proxyPrefix+"Rest/RenderForm/offlineForms","offline-sendForm":e.proxyPrefix+"Rest/Cases/SaveAsynchWorkItemOffLine","case-handler-getCaseTasks":e.proxyPrefix+"Rest/Cases/{idCase}/Tasks","case-handler-getCaseEvents":e.proxyPrefix+"Rest/Cases/{idCase}/Events","case-handler-getCaseSubprocesses":e.proxyPrefix+"Rest/Cases/{idCase}/Subprocesses","case-handler-getTaskAssignees":e.proxyPrefix+"Rest/Cases/{idCase}/Tasks/{idTask}/AssigneesGuid","case-handler-getCaseAssignees":e.proxyPrefix+"Rest/Cases/{idCase}/AssigneesGuid","case-handler-getCaseAssigneesPreview":e.proxyPrefix+"Rest/Cases/{idCase}/AssigneesPreview","case-handler-getWorkItems":e.proxyPrefix+"Rest/Cases/{idCase}/WorkItems","case-handler-getWorkItemsByGuid":e.proxyPrefix+"Rest/Cases/{guid}/WorkItemsByGuid","case-handler-getAsynchExecutionState":e.proxyPrefix+"Rest/Cases/{idCase}/AsynchExecutionState","case-handler-addNewCase":e.proxyPrefix+"Rest/Cases","case-handler-startProcess":e.proxyPrefix+"Rest/Processes/StartProcess/{idProcess}","case-handler-supportedLogTypes":e.proxyPrefix+"Rest/Cases/SupportedLogsTypes","case-handler-getActivityLog":e.proxyPrefix+"Rest/Cases/{idCase}/ActivityLog","case-handler-getActivityDetailLog":e.proxyPrefix+"Rest/Cases/{idCase}/Workitem/{idWorkItemFrom}/ActivityDetailLog","case-handler-getEntityLog":e.proxyPrefix+"Rest/Cases/{idCase}/EntityLog","case-handler-getEntityDetailLog":e.proxyPrefix+"Rest/Cases/{idCase}/EntityDetailLog","case-handler-getUserLog":e.proxyPrefix+"Rest/Cases/{idCase}/UserLog","case-handler-getUserDetailLog":e.proxyPrefix+"Rest/Cases/{idCase}/{idUser}/UserDetailLog","case-handler-getAdminLog":e.proxyPrefix+"Rest/Cases/{idCase}/AdminLog","case-handler-getCaseFormsRenderVersion":e.proxyPrefix+"Rest/Cases/{idCase}/FormsRenderVersion","case-handler-getCaseFormsRenderVersionByGuid":e.proxyPrefix+"Rest/Cases/{guid}/FormsRenderVersionByGuid","favorites-handler-saveFavorite":e.proxyPrefix+"Rest/Favorites","favorites-handler-deleteFavorite":e.proxyPrefix+"Rest/Favorites/{guidFavorite}","bamAnalytics-handler-getAnalisysQueries":e.proxyPrefix+"Rest/BAMAnalytics/AnalisysQueries","bamAnalytics-handler-updateQuery":e.proxyPrefix+"Rest/BAMAnalytics/Reports/Ids/{idQuery}","inbox-handler-getInboxSummary":e.proxyPrefix+"Rest/Inbox/Summary","MessageHandler-NewComment":e.proxyPrefix+"Rest/Cases/Comments","MessageHandler-GetComments":e.proxyPrefix+"Rest/Cases/Comments","MessageHandler-SetCategoryToComment":e.proxyPrefix+"Rest/Cases/Comments/{idComment}","MessageHandler-RemoveComment":e.proxyPrefix+"Rest/Cases/Comments/{idComment}","MessageHandler-ReplyComment":e.proxyPrefix+"Rest/Cases/Comments/{idComment}/Replies","MessageHandler-RemoveReply":e.proxyPrefix+"Rest/Cases/Comments/{idComment}/Replies/{idReply}","MessageHandler-GetCategoryColors":e.proxyPrefix+"Rest/Cases/Comments/CategoryColors","MessageHandler-RenameCategoryColor":e.proxyPrefix+"Rest/Cases/Comments/CategoryColors/{idColorCategory}","MessageHandler-CountNewComments":e.proxyPrefix+"Rest/Cases/Comments/{idComment}/NewComments/Count","process-handler-getAllProcesses":e.proxyPrefix+"Rest/Processes","process-handler-getFavourites":e.proxyPrefix+"Rest/Home/MyFavorites/Count","process-handler-getMyStuff":e.proxyPrefix+"Rest/Home/MyStuff","process-handler-getFavouriteCases":e.proxyPrefix+"Rest/Home/MyFavorites","process-handler-getActions":e.proxyPrefix+"Rest/Home/Actions","process-handler-getCustomizedColumnsData":e.proxyPrefix+"Rest/Processes/CustomizedColumnsData","process-handler-getCategory":e.proxyPrefix+"Rest/Processes/Categories","process-handler-getRecentProcesses":e.proxyPrefix+"Rest/Processes/RecentProcesses","process-handler-getCustomizedColumnsDataInfo":e.proxyPrefix+"Rest/Processes/CustomizedColumnsDataInfo","process-handler-getOrganizations":e.proxyPrefix+"Rest/Profile/Organizations","process-handler-getOrganizationsByUser":e.proxyPrefix+"Rest/Profile/OrganizationsByUser","process-handler-getActivitiesData":e.proxyPrefix+"Api/Processes/CasesData/MyActivities","process-handler-getPendingsData":e.proxyPrefix+"Api/Processes/CasesData/MyPendings","process-handler-getUsersCases":e.proxyPrefix+"Api/Cases/{caseId}/UsersGuid","process-handler-getActionsEvents":e.proxyPrefix+"Api/Cases/{caseId}/CurrentEvents","query-handler-getqueries":e.proxyPrefix+"Rest/Queries","query-handler-getqueries-definitions":e.proxyPrefix+"Rest/Queries/Definitions","query-handler-getQueryFormResponse":e.proxyPrefix+"Rest/Queries/Search","query-handler-getQueryFormExportExcel":e.proxyPrefix+"Rest/Queries/ExportToExcel","query-handler-getQueryForm":e.proxyPrefix+"Rest/Handlers/Render","query-handler-storedQueryForm":e.proxyPrefix+"Rest/StoredQueryForms","query-handler-storedQueryForm-id":e.proxyPrefix+"Rest/StoredQueryForms/{idStoredQueryForm}","preferences-handler-getPreferencesForm":e.proxyPrefix+"Rest/Handlers/Render","user-handler-getCurrentUser":e.proxyPrefix+"Rest/Users/CurrentUserGuid","old-render":e.proxyPrefix+"App/ListaDetalle/Detalle.aspx",Reports:e.proxyPrefix+"RestServices/BAMAnalyticsHandler.ashx","reports-handler-deleteQueries":e.proxyPrefix+"Rest/BAMAnalytics/Reports/{QueryId}","folders-handler-getUserQueries":e.proxyPrefix+"Rest/SmartFolders","folders-associate-deleteSmartFolder":e.proxyPrefix+"Rest/SmartFolders/{idSmartFolder}","folders-handler":e.proxyPrefix+"RestServices/SmartFoldersHandler.ashx","folders-associate":e.proxyPrefix+"App/Ajax/AJAXGateway.aspx","smartfolders-integration":e.proxyPrefix+"App/WorkPortal/ConfigureFilteredFolder.aspx",AlarmAdmin:e.proxyPrefix+"App/Admin/AlarmsAdmin.aspx",AnalyticsProcess:e.proxyPrefix+"App/Cockpit/AnalyticsProcess.aspx",AnalyticsSensor:e.proxyPrefix+"App/Cockpit/AnalyticsSensor.aspx",AnalyticsTask:e.proxyPrefix+"App/Cockpit/AnalyticsTask.aspx",AsynchronousWorkitemRetries:e.proxyPrefix+"App/Admin/AsynchDisabledWorkitems.aspx",AuthenticationLogQuery:e.proxyPrefix+"App/Admin/AuthLogQuery.aspx",BAMProcess:e.proxyPrefix+"App/Cockpit/BAMProcess.aspx",BAMTask:e.proxyPrefix+"App/Cockpit/BAMTask.aspx",BusinessPolicies:e.proxyPrefix+"App/Admin/BusinessPolicies/BusinessPoliciesSelector.aspx",CaseAdmin:e.proxyPrefix+"App/Admin/CaseSearch.aspx",adminReassignCases:"CaseAdmin",asyncECMUpload:"asyncECMUpload",CasesMonitor:e.proxyPrefix+"App/Admin/CasesMonitor.aspx",Closed:e.proxyPrefix+"App/ListaDetalle/listaitems.aspx?h_Location=Cerrados&I_ProcessState=Completed",CurrentUser:e.proxyPrefix+"App/Admin/CurrentUser.aspx",EncryptionAdmin:e.proxyPrefix+"App/Admin/Encrypt.aspx",MobileUpdatesAdmin:e.proxyPrefix+"App/MobileUpdates/default.aspx",EntityAdmin:e.proxyPrefix+"App/Admin/Entity.aspx",LocationResources:e.proxyPrefix+"App/Admin/AdminLocResources.aspx",NewCase:e.proxyPrefix+"App/Radicar/application.aspx",Pending:e.proxyPrefix+"App/ListaDetalle/listaitems.aspx?h_Location=Pendientes&I_processState=Running",Profiles:e.proxyPrefix+"App/Admin/ProfilesAdminSearch.aspx",Search:e.proxyPrefix+"App/ListaDetalle/Search.aspx",UserAdmin:e.proxyPrefix+"App/Admin/ListUsers.aspx",UserDefaultAssignation:e.proxyPrefix+"App/Admin/DefaultAssignationUser.aspx?h_AdminDefaultAssign=1",UserPendingRequests:e.proxyPrefix+"App/Admin/UserPendingRequests.aspx",ListPreferences:""!=bizagi.UserPreferencesUrl?e.proxyPrefix+bizagi.UserPreferencesUrl:e.proxyPrefix+"App/Admin/CurrentUser.aspx",GRDimensionAdmin:e.proxyPrefix+"App/Cockpit/DimensionEdit.aspx",Licenses:e.proxyPrefix+"App/Admin/Licenses.aspx",AnalysisQueries:e.proxyPrefix+"App/Inicio/WPAnalysisQuery.aspx",DocumentTemplates:e.proxyPrefix+"App/Admin/AdminDocumentTemplates.aspx",ProcessAdmin:e.proxyPrefix+"App/Admin/AdminProcess.aspx",ResourceBAM:e.proxyPrefix+"App/Cockpit/BAMResourceMonitor.aspx",WorkPortalVersion:e.proxyPrefix+"Rest/Util/Version",PreferenceFormOld:e.proxyPrefix+"App/Admin/CurrentUserByForm.aspx","entities-administration":"RestServices/EntityHandler.ashx",logout:e.proxyPrefix+"Rest/Authentication/logout",logoutDotNet:e.proxyPrefix+"App/Inicio/LogOff.aspx",authenticationConfig:e.proxyPrefix+"Api/Authentication/BizagiConfig","logout-oauth2":e.proxyPrefix+"Api/Authentication/OAuth2/IdentityProvider/Server/Logout",FederateLogoffUrl:e.proxyPrefix+"Api/Authentication/FederateLogoffUrl",oauth2AuthenticationConfig:e.proxyPrefix+"Api/Authentication/OAuth2/OAuth2AuthenticationConfig","massive-activity-assignments-getOrganizationInfo":e.proxyPrefix+"Rest/Users/OrganizationInfo","massive-activity-assignments-getCasesByOrganization":e.proxyPrefix+"Rest/Queries/GetCasesByOrganization","massive-activity-assignments-reassignCases":e.proxyPrefix+"Rest/Cases/ReassignCases","massive-activity-assignments-searchUsers":e.proxyPrefix+"Rest/Users","massive-activity-assignments-searchUsersById":e.proxyPrefix+"Rest/Users/ByIds","async-ecm-upload-baseService":e.proxyPrefix+"Rest/Handlers/Metadata",domains:e.proxyPrefix+"Rest/Authentication/Domains",ThemeBuilder:e.proxyPrefix+"ThemeBuilder/index.html?language="+bizagi.localization.language,getCurrentTheme:e.proxyPrefix+"Api/Theme/Current","admin-getAuthenticationLog":e.proxyPrefix+"Rest/Users/AuthLog","admin-getAuthenticationDomains":e.proxyPrefix+"Rest/Users/Domains","admin-getAuthenticationEventsTypes":e.proxyPrefix+"Rest/Users/EventTypes","admin-getAuthenticationEventSubTypes":e.proxyPrefix+"Rest/Users/EventSubTypes","admin-EncryptString":e.proxyPrefix+"Rest/Util/EncryptString","admin-UserPendingRequests":e.proxyPrefix+"Rest/Users/UserPendingRequests","admin-UserAuthenticationInfo":e.proxyPrefix+"Rest/Users/UserAuthenticationInfo","admin-updateUserAuthenticationInfo":e.proxyPrefix+"Rest/Users/UpdateUserAuthenticationInfo","admin-generateRandomPassword":e.proxyPrefix+"Rest/Util/GenerateRandomPassword","admin-GenerateDataToSendByEmail":e.proxyPrefix+"Rest/Users/GenerateDataToSendByEmail","admin-sendEmail":e.proxyPrefix+"Rest/Util/SendEmail/","admin-sendUserEmail":e.proxyPrefix+"Rest/Users/SendUserEmail","admin-getApplicationList":e.proxyPrefix+"Rest/Application","admin-getCaseSecurityApplicationList":e.proxyPrefix+"Api/CaseSecurity/Applications?idUser={userId}","admin-getApplicationProcesses":e.proxyPrefix+"Rest/Application/{idApp}/Process","admin-getProcessVersion":e.proxyPrefix+"Rest/Processes/Version","admin-getProcessTasks":e.proxyPrefix+"Rest/Processes/Version/{version}/Tasks","admin-userGetPositions":e.proxyPrefix+"Rest/Users/GetPositions","admin-usersform":e.proxyPrefix+"Rest/Handlers/Render","admin-getTaskAlarms":e.proxyPrefix+"Rest/Alarm/TaskAlarms","admin-getLapseMode":e.proxyPrefix+"Rest/Alarm/LapseMode","admin-getRecurrMode":e.proxyPrefix+"Rest/Alarm/RecurrMode","admin-getScheduleType":e.proxyPrefix+"Rest/Alarm/ScheduleType","admin-getBossList":e.proxyPrefix+"Rest/Alarm/Boss","admin-addAlarm":e.proxyPrefix+"Rest/Alarm","admin-editAlarm":e.proxyPrefix+"Rest/Alarm/{idAlarm}","admin-deleteAlarm":e.proxyPrefix+"Rest/Alarm","admin-alarmRecipients":e.proxyPrefix+"Rest/Alarm/{idAlarm}/Recipient","admin-deleteAlarmRecipients":e.proxyPrefix+"Rest/Alarm/Recipient","admin-recipientToAlarm":e.proxyPrefix+"Rest/Alarm/{idAlarm}/Recipient/{idRecipient}","admin-enableAlarm":e.proxyPrefix+"Rest/Alarm/Task/{idTask}/ToggleAlarm","admin-getUsersForAssignation":e.proxyPrefix+"Rest/Users/UsersForAssignation","admin-getUsersList":e.proxyPrefix+"Rest/Users/SearchUsers","admin-getUsersListForPlans":e.proxyPrefix+"Rest/Users/SearchUsersForPlansGuid","admin-getCategoriesList":e.proxyPrefix+"Rest/Application/Category","admin-getCaseSecurityCategoriesList":e.proxyPrefix+"Api/CaseSecurity/Applications/{idApp}/Categories?idUser={userId}","admin-getCasesList":e.proxyPrefix+"Rest/Queries/SearchCases","admin-invalidateCases":e.proxyPrefix+"Rest/Cases/Invalidate","admin-getProcessRunningInvalidateCases":e.proxyPrefix+"Rest/Util/operationStatus?opType=InvalidateCases","admin-abortItems":e.proxyPrefix+"Rest/Cases/Abort","admin-reassignItems":e.proxyPrefix+"Rest/Cases/Reassign","admin-reassignCurrent":e.proxyPrefix+"Rest/Cases/ReassignCurrent","admin-getDefaultAssignationUserToAllProcess":e.proxyPrefix+"Rest/Users/{serviceAction}/","admin-getDefaultAssignationUserToProcess":e.proxyPrefix+"Rest/Users/Process/{process}/AssignationUser","admin-setDefaultAssignationUserToProcess":e.proxyPrefix+"Rest/Users/Process/{process}/AssignationUser","admin-transferAllCaseSecuritypermissions":e.proxyPrefix+"Api/CaseSecurity/Processes/Permissions/Transfer","admin-transferCaseSecuritypermissions":e.proxyPrefix+"Api/CaseSecurity/Processes/{idProcess}/Permissions/Transfer","admin-revokeAllCaseSecuritypermissions":e.proxyPrefix+"Api/CaseSecurity/Processes/Permissions/Revoke","admin-revokeCaseSecuritypermissions":e.proxyPrefix+"Api/CaseSecurity/Processes/{idProcess}/Permissions/Revoke","admin-statusTransferCaseSecuritypermissions":e.proxyPrefix+"Rest/Cases/StatusTransferCaseSecuritypermissions","admin-getProfilesTypes":e.proxyPrefix+"Rest/Profile/Types","admin-searchProfiles":e.proxyPrefix+"Rest/Profile","admin-getUsersByProfile":e.proxyPrefix+"Rest/Users/Profile/{type}/{id}","admin-getUsersByProfile-report":e.proxyPrefix+"Rest/Users/Profile/{filterType}/{guidValueFilter}/Report","admin-removeUserFromProfile":e.proxyPrefix+"Rest/Profile/{type}/{id}/User/{idUser}/","admin-addUserToProfile":e.proxyPrefix+"Rest/Profile/{type}/{id}/User/{idUser}/","admin-async-activities-get-activities":e.proxyPrefix+"Rest/Cases/Asynchronous/Activities","admin-async-activities-get-retry-now":e.proxyPrefix+"Rest/Cases/{idCase}/Workitem/{idworkItem}/{idAsynchWorkitem}/RetryNow","admin-async-activities-get-activities-by-task":e.proxyPrefix+"Rest/Cases/Asynchronous/Activities/Task","admin-async-activities-enable-execution":e.proxyPrefix+"Rest/Cases/Asynchronous/Enable","admin-async-activities-enable-multiple":e.proxyPrefix+"Rest/Cases/Asynchronous/EnableMultiple","admin-async-activities-async-execution":e.proxyPrefix+"Rest/Cases/{idCase}/Workitem/{idWorkitem}/AsynchExecution","admin-async-activities-async-execution-log":e.proxyPrefix+"Rest/Cases/{idCase}/Workitem/{idworkItem}/{idAsynchWorkitem}/AsynchExecutionLog","admin-Licenses":e.proxyPrefix+"Rest/Licenses","admin-audit-license":e.proxyPrefix+"Rest/Licenses/auditLicense","admin-GetDimensions":e.proxyPrefix+"Rest/Dimensions","admin-EditDimension":e.proxyPrefix+"Rest/Dimensions/{id}","admin-CreateAdministrableDimension":e.proxyPrefix+"Rest/Dimensions/Administrable","admin-DeleteDimension":e.proxyPrefix+"Rest/Dimensions/{id}?isAdministrable={administrable}","admin-EntityPathChildNodesAction":e.proxyPrefix+"Rest/Dimensions/EntityChildNodes","admin-GetActiveWFClasses":e.proxyPrefix+"Rest/Dimensions/ActiveProcess","admin-document-templates-storeDocumentTemplates":e.proxyPrefix+"Rest/DocumentTemplates/StoreDocumentTemplates","admin-document-templates-restoreDocumentTemplates":e.proxyPrefix+"Rest/DocumentTemplates/RestoreDocumentTemplate","admin-document-templates-uploadDocumentTemplate":e.proxyPrefix+"Rest/DocumentTemplates/UploadDocumentTemplate","admin-processes-workflowClasses":e.proxyPrefix+"Rest/Processes/WorkflowClasses","admin-processes-tasksByWorkflow":e.proxyPrefix+"Rest/Processes/TasksByWorkflow","admin-processes-modifyProcessDuration":e.proxyPrefix+"Rest/Processes/{idWorkflow}/Duration/","admin-processes-modifyTaskDuration":e.proxyPrefix+"Rest/Processes/Task/{idTask}/Duration/","admin-entities-list":e.proxyPrefix+"Api/Entities/Parametrics","admin-stakeholders-list":e.proxyPrefix+"Api/Entities/Stakeholders","admin-entities-row-data":e.proxyPrefix+"Api/Entities/{guidEntity}/Data","admin-user-stakeholders":e.proxyPrefix+"Api/Users/{idUser}/Stakeholders","admin-entities-migrated-entity":e.proxyPrefix+"Rest/Entities/migratedEntity","admin-entities-get-form":e.proxyPrefix+"Rest/Handlers/Render","render-multiaction":e.proxyPrefix+"Rest/Handlers/MultiAction","admin-entity-simpleData":e.proxyPrefix+"Rest/Entities/{idEntity}/Instances/{idAttribute}/Brief","admin-language-bizagi-objects":e.proxyPrefix+"Rest/Multilanguage/BizagiObjects","admin-language-entities":e.proxyPrefix+"Rest/Multilanguage/Entities?xsrf="+bizagi.cookie(".BIZCSRF"),"admin-language-resource":e.proxyPrefix+"Rest/Multilanguage/Resource?xsrf="+bizagi.cookie(".BIZCSRF"),"admin-language-resource-download":e.proxyPrefix+"Rest/Multilanguage/LanguageExcel","admin-language-entities-download":e.proxyPrefix+"Rest/Multilanguage/EntitiesExcel","admin-language-languages":e.proxyPrefix+"Rest/Multilanguage/Languages","admin-language-reset":e.proxyPrefix+"Rest/Multilanguage/ResetPersonalization","admin-holidays-schemas":e.proxyPrefix+"Api/WorkingTimeSchema/Holidays","admin-holidays-schema":e.proxyPrefix+"Api/WorkingTimeSchema/Holidays/{schema}","admin-projectname":e.proxyPrefix+"Api/Project/Name","bam-resourcemonitor-myteam":e.proxyPrefix+"Rest/Reports/BAM/Resources/MyTeam","reports-analysisquery":e.proxyPrefix+"Rest/Reports/AnalysisQueries","reports-analysisquery-update":e.proxyPrefix+"Rest/Reports/AnalysisQueries","reports-analysisquery-delete":e.proxyPrefix+"Rest/Reports/AnalysisQueries","processviewer-processdefinition":e.proxyPrefix+"Rest/Reports/Components/ProcessDefinition","processviewer-processgraphicinfo":e.proxyPrefix+"Rest/Reports/Components/ProcessGraphicInfo","processviewer-paths":e.proxyPrefix+"Rest/Reports/Analytics/Process/FrequentPaths","mobile-getLastUpdate":e.proxyPrefix+"Rest/Util/mobileUpdates","admin-userslog":e.proxyPrefix+"Rest/Users/UserAdminLog","admin-userslicenses":e.proxyPrefix+"Rest/Licenses/CanAddNewUser","admin-createuserform":e.proxyPrefix+"Rest/Users/CreateUserAdminForm","graphicquery-trailusers":e.proxyPrefix+"Rest/Cases/TrailUsersGuid","admin-userpreferenceform-isnew":e.proxyPrefix+"Rest/Authorization/UserPreferenceForm","time-schemas-effectiveduration":e.proxyPrefix+"Api/WorkingTimeSchema/EffectiveDurationGuid?idUser={idUser}&fromDate={fromDate}&toDate={toDate}","time-schemas-end-hour-working-by-date":e.proxyPrefix+"Api/WorkingTimeSchema/EndHourWorkingByDateGuid?idUser={idUser}&date={date}","project-resource-action":e.proxyPrefix+"Api/CaseResource/{typeResource}","project-resource-get":e.proxyPrefix+"Api/CaseResource/{typeResource}?globalParent={globalParent}","project-resource-delete":e.proxyPrefix+"Api/CaseResource/{typeResource}/{idResource}","project-users-get":e.proxyPrefix+"Rest/Users/UserPicturesGuid","project-comments-get":e.proxyPrefix+"Api/CaseResource/{idParent}/CommentGuid?dateTime={dateTime}&count={count}","project-comments-count-by-parent":e.proxyPrefix+"Api/CaseResource/{idParent}/Comment/Count","project-util-current-time":e.proxyPrefix+"Api/CaseResource/Util/CurrentTime","project-comments-uploadfiles":e.proxyPrefix+"Api/CaseResource/Attachment","project-attachment-download":e.proxyPrefix+"Api/CaseResource/Attachment/{Attachment}?xsrf="+bizagi.cookie(".BIZCSRF"),"project-files-upload":e.proxyPrefix+"Api/CaseResource/FileGuid","project-files-list":e.proxyPrefix+"Api/CaseResource/FileGuid?globalParent={globalParent}","project-files-thumbnails":e.proxyPrefix+"Api/CaseResource/File/Thumbnails","project-plan-createactivity":e.proxyPrefix+"Api/Plans/{idPlan}/ActivitiesGuid","project-plan-get":e.proxyPrefix+"Api/Plans/Guid/{idPlan}","project-plan-get-case":e.proxyPrefix+"Api/Plans/{idPlan}/IdCase","project-plan-get-by-parent":e.proxyPrefix+"Api/Plans/Guid?parentWorkItem={parentWorkItem}","project-plan-execute":e.proxyPrefix+"Api/Plans/Execute","project-plan-close":e.proxyPrefix+"Api/Plans/Close","project-plan-delete":e.proxyPrefix+"Api/Plans/{idPlan}","project-plan-activities":e.proxyPrefix+"Api/Plans/{idPlan}/ActivitiesGuid","project-plan-workitems":e.proxyPrefix+"Api/Plans/{idPlan}/WorkItemsGuid","project-plan-parent":e.proxyPrefix+"Api/Plans/{idPlan}/ParentCase","project-plan-first-parent-plan":e.proxyPrefix+"Api/Plans/{idPlan}/FirstParentPlanGuid","project-plan-first-parent":e.proxyPrefix+"Api/Plans/{idPlan}/FirstParentCase","project-activity-update-progress":e.proxyPrefix+"Api/Plans/Activity/{idActivity}/Progress","project-plan-update":e.proxyPrefix+"Api/Plans/Guid/{idPlan}","project-plan-activity-tasks-get":e.proxyPrefix+"Api/Plans/{idPlan}/Activities/{idActivity}/Items","project-plan-activity-get":e.proxyPrefix+"Api/Plans/{idPlan}/ActivitiesGuid/{idActivity}","project-plan-activity-delete":e.proxyPrefix+"Api/Plans/{idPlan}/Activities/{id}","project-plan-activity-edit":e.proxyPrefix+"Api/Plans/{idPlan}/ActivitiesGuid/{id}","project-plan-transitions-get":e.proxyPrefix+"Api/Plans/{idPlan}/Activities/Transitions","project-plan-transitions-put":e.proxyPrefix+"Api/Plans/{idPlan}/Activities/Transitions","project-plan-template-create-by-plan":e.proxyPrefix+"Api/Plans/Templates","project-plan-template-get":e.proxyPrefix+"Api/Templates","project-timeline-events-get":e.proxyPrefix+"Api/CaseResource/TimeLineGuid?{idCaseParamValue}","project-workitem-assignees":e.proxyPrefix+"Api/CaseResource/{idWorkitem}/Assignees","project-workitem-assignees-items":e.proxyPrefix+"Api/CaseResource/{idWorkitem}/ItemAssigneeWorkItem","project-plan-create":e.proxyPrefix+"Api/Plans/Guid","project-plan-create-by-template":e.proxyPrefix+"Api/Templates/{idTemplate}/PlansGuid","project-plan-get-all":e.proxyPrefix+"Api/Plans/Templates/get",plans:e.proxyPrefix+"Api/Plans/Guid","stuff-handler-getUserStuff":e.proxyPrefix+"Api/CurrentUser/Collections","get-current-theme":e.proxyPrefix+"Api/CurrentUser/GetCurrentTheme","process-handler-getIdCasesOfProcessEntities":e.proxyPrefix+"Api/Entities/Cases","handler-get-myShortcuts":e.proxyPrefix+"Api/CurrentUser/Shortcuts","handler-execute-action-start":e.proxyPrefix+"Api/Cases/{processId}/Start","handler-validate-action-has-start-form":e.proxyPrefix+"Api/Processes/{processId}/StartContext","process-getIcon":e.proxyPrefix+"Api/Processes/{processId}/Icon","collections-getIcon":e.proxyPrefix+"Api/CurrentUser/Collections/{collectionId}/Icon","data-navigation-handler-collection":e.proxyPrefix+"Api/CurrentUser/Collections/{reference}/Data/{surrogateKey}","data-navigation-handler-entity":e.proxyPrefix+"Api/CurrentUser/Entities/{reference}/Data/{surrogateKey}/{xpath}","data-navigation-handler-entity-filters":e.proxyPrefix+"Api/CurrentUser/Entities/{reference}/Filters/{surrogateKey}/{xpath}","action-handler-getProcessAddAction":e.proxyPrefix+"Api/CurrentUser/Collections/{reference}/{surrogateKey}/Actions","entities-handler-getMapping":e.proxyPrefix+"Rest/Entities/Mapping","entities-handler-getActions":e.proxyPrefix+"Api/Entities/{guidEntity}/{surrogateKey}/actions","actions-handler-getDataForm":e.proxyPrefix+"Rest/Handlers/Render","actions-handler-hasStartForm":e.proxyPrefix+"Rest/Processes/HasStartForm","actions-handler-executeRule-simple":e.proxyPrefix+"Api/Rules/{ruleId}/Execute","actions-handler-executeRule-multiple":e.proxyPrefix+"Api/Rules/{ruleId}/ExecuteMultiple","sort-bar-getMultipleInstancesActions":e.proxyPrefix+"Rest/Entities/multipleInstancesActions","sort-bar-getMapping":e.proxyPrefix+"Rest/Entities/Mapping","sort-bar-execute":e.proxyPrefix+"Api/Action/Execute","activity-map":e.proxyPrefix+"Rest/Processes/ActivityMap/","activity-map-getActivitySummary":e.proxyPrefix+"Rest/Processes/ActivitySummary","subprocess-map":e.proxyPrefix+"Rest/Processes/SubProcessMap","shorcuts-getStakeHolderShorcuts":e.proxyPrefix+"/Api/Stakeholder/Shortcuts","my-search-getSearchLists":e.proxyPrefix+"Api/CurrentUser/Searches","my-search-getFilters":e.proxyPrefix+"Api/CurrentUser/Searches/{guidSearch}/Filters","my-search-getFiltersData":e.proxyPrefix+"Api/CurrentUser/Searches/{guidSearch}/FilterData","my-search-getData":e.proxyPrefix+"Api/CurrentUser/Searches/{guidSearch}/Data","admin-getAdhocProcessesList":e.proxyPrefix+"Api/AdhocProcesses/Search","admin-createAdhocProcess":e.proxyPrefix+"Api/AdhocProcesses/Create","admin-updateAdhocProcess":e.proxyPrefix+"Api/AdhocProcesses/Update","admin-updateAdhocTask":e.proxyPrefix+"Api/AdhocProcesses/{processId}/Activity","admin-deleteAdhocTask":e.proxyPrefix+"Api/AdhocProcesses/{processId}/Activity/{taskId}","admin-deleteAdhocProcess":e.proxyPrefix+"Api/AdhocProcesses/{processId}","admin-publishAdhocProcess":e.proxyPrefix+"Api/AdhocProcesses/Publish","admin-cloneAdhocProcess":e.proxyPrefix+"Api/AdhocProcesses/Clone","admin-getAdhocTask":e.proxyPrefix+"Api/AdhocProcesses/{processId}/Task/{taskId}","admin-getAllEntities":e.proxyPrefix+"Api/AdhocProcesses/Entities","admin-getAllCategories":e.proxyPrefix+"Api/AdhocProcesses/Categories","admin-createNewAdhocProcess":e.proxyPrefix+"Api/LiveProcesses","admin-getAdhocDataSchema":e.proxyPrefix+"Api/LiveProcesses/{processId}/DataSchema","admin-getAdhocProcessDiagram":e.proxyPrefix+"Api/LiveProcesses/{processId}/Diagram","admin-saveAdhocProcessDiagram":e.proxyPrefix+"Api/LiveProcesses/{processId}/Diagram","admin-adhoc-entities-list":e.proxyPrefix+"Api/AdhocProcesses/AdhocEntity/All","admin-saveAdhocEntity":e.proxyPrefix+"Api/AdhocProcesses/AdhocEntity/Save","admin-saveAdhocEntityInstance":e.proxyPrefix+"Api/AdhocProcesses/AdhocEntity/{entityId}/Instance/{isNew}","admin-adhoc-entity-instances":e.proxyPrefix+"Api/AdhocProcesses/AdhocEntity/{entityId}/Instances","admin-entity-values":e.proxyPrefix+"Api/AdhocProcesses/{context}/{entityId}/Values","admin-adhoc-user-group-list":e.proxyPrefix+"Api/LiveProcesses/UserGroups","admin-adhoc-user-group-save":e.proxyPrefix+"Api/LiveProcesses/UserGroups","admin-adhoc-user-group-delete":e.proxyPrefix+"Api/LiveProcesses/UserGroups/{groupId}","admin-adhoc-user-group-data-get":e.proxyPrefix+"Api/LiveProcesses/UserGroups/{groupId}/Users","admin-adhoc-user-group-data-add":e.proxyPrefix+"Api/LiveProcesses/UserGroups/{groupId}/Users/{userId}","admin-adhoc-user-group-data-remove":e.proxyPrefix+"Api/LiveProcesses/UserGroups/{groupId}/Users/{userId}","admin-adhoc-authorization-data-get":e.proxyPrefix+"Api/AdhocProcesses/Authorization","admin-adhoc-authorization-data-save":e.proxyPrefix+"Api/AdhocProcesses/{processId}/{isAdhocTask}/Authorization/Save","oauth2-getApplications":e.proxyPrefix+"oauth2/server/application","oauth2-getApplication":e.proxyPrefix+"oauth2/server/application/id/{applicationId}","oauth2-createApplication":e.proxyPrefix+"oauth2/server/application","oauth2-deleteApplication":e.proxyPrefix+"oauth2/server/application/{applicationId}","oauth2-updateApplication":e.proxyPrefix+"oauth2/server/application/{applicationId}","oauth2-updateClientSecretKeysApplication":e.proxyPrefix+"oauth2/server/application/{applicationId}/updateClientSecretKeys","login-qr-image64":e.proxyPrefix+"Api/Authentication/AccessQRCode","user-gdpr-downloadReportUser":e.proxyPrefix+"rest/users/{idUser}/Report?xsrf="+bizagi.cookie(".BIZCSRF"),"user-gdpr-anonymizeUser":e.proxyPrefix+"rest/users/{idUser}/Report",userDelegation:e.proxyPrefix+"rest/UserDelegate",userFilterOptions:e.proxyPrefix+"rest/UserFilters",catalogQL:e.proxyPrefix+"rest/CatalogQL/Query",currentUser:e.proxyPrefix+"rest/Users/CurrentUserGuid",getUsersForDelegation:e.proxyPrefix+"rest/UserFilters",downloadBPUsReport:e.proxyPrefix+"rest/Reports/BPU"}):"sharepoint"==e.context||"portal"==e.context?(void 0===e.sharepointProxyPrefix&&alert("sharepointProxyPrefix param is requiered to build endpoints when context is 'sharepoint'"),{"user-handler":e.sharepointProxyPrefix+"RestServices/UserHandler.ashx","process-handler":e.sharepointProxyPrefix+"RestServices/ProcessHandler.ashx","query-handler":e.sharepointProxyPrefix+"Rest/Handlers/Query","case-handler":e.sharepointProxyPrefix+"RestServices/CaseHandler.ashx","query-form":e.sharepointProxyPrefix+"App/ListaDetalle/QueryForm.aspx","query-form-edit":e.sharepointProxyPrefix+"App/ListaDetalle/SaveQuery.aspx","query-form-delete":e.sharepointProxyPrefix+"App/ListaDetalle/QueryForm.aspx","query-form-delete-cube":e.sharepointProxyPrefix+"Rest/Queries/Cubes/{idCube}","favorites-handler":e.sharepointProxyPrefix+"RestServices/FavoritesHandler.ashx","file-handler":e.sharepointProxyPrefix+"RestServices/EntityHandler.ashx","login-handler":e.sharepointProxyPrefix+"RestServices/UserHandler.ashx?action=authenticateUser&userName={0}&password={1}&domain={2}","logoff-handler":e.sharepointProxyPrefix+"RestServices/UserHandler.ashx?action=logOff",overrides:e.sharepointProxyPrefix+"Rest/Util/Overrides","authorization-handler-getMenuAuthorization":e.sharepointProxyPrefix+"Rest/Authorization/MenuAuthorization","authorization-handler-isCaseCreationAuthorized":e.sharepointProxyPrefix+"Rest/Authorization/Processes/{0}/IsCaseCreationAuthorized","case-handler-getCaseSummary":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Summary","case-handler-getCaseSummaryByGuid":e.sharepointProxyPrefix+"Rest/Cases/{guid}/SummaryByGuid","case-handler-releaseActivity":e.proxyPrefix+"Rest/Cases/{idCase}/ReleaseActivity","case-handler-getCaseTasks":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Tasks","case-handler-getCaseEvents":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Events","case-handler-getCaseSubprocesses":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Subprocesses","case-handler-getTaskAssignees":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Tasks/{idTask}/AssigneesGuid","case-handler-getCaseAssignees":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Assignees","case-handler-getWorkItems":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/WorkItems","case-handler-getWorkItemsByGuid":e.sharepointProxyPrefix+"Rest/Cases/{guid}/WorkItemsByGuid","case-handler-getAsynchExecutionState":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/AsynchExecutionState","case-handler-addNewCase":e.sharepointProxyPrefix+"Rest/Cases","case-handler-startProcess":e.sharepointProxyPrefix+"Rest/Processes/StartProcess/{idProcess}","case-handler-getActivityLog":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/ActivityLog","case-handler-getActivityDetailLog":e.sharepointProxyPrefix+"Rest/Cases/{idWorkItemFrom}/ActivityDetailLog","case-handler-getEntityLog":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/EntityLog","case-handler-getEntityDetailLog":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/EntityDetailLog","case-handler-getUserLog":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/UserLog","case-handler-getUserDetailLog":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/UserDetailLog","case-handler-getCaseFormsRenderVersion":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/FormsRenderVersion","case-handler-getCaseFormsRenderVersionByGuid":e.sharepointProxyPrefix+"Rest/Cases/{guid}/FormsRenderVersionByGuid","offline-getProcessTree":e.proxyPrefix+"Rest/Processes/OfflineProcessTree","offline-getForms":e.proxyPrefix+"Rest/RenderForm/offlineForms","offline-sendForm":e.proxyPrefix+"Rest/Cases/SaveAsynchWorkItemOffLine","case-handler-getCasesList":e.proxyPrefix+"Rest/Processes/GetCases","favorites-handler-saveFavorite":e.sharepointProxyPrefix+"Rest/Favorites","favorites-handler-deleteFavorite":e.sharepointProxyPrefix+"Rest/Favorites/{guidFavorite}","bamAnalytics-handler-getAnalisysQueries":e.sharepointProxyPrefix+"Rest/BAMAnalytics/AnalisysQueries","bamAnalytics-handler-updateQuery":e.sharepointProxyPrefix+"Rest/BAMAnalytics/Reports/Ids/{idQuery}","inbox-handler-getInboxSummary":e.sharepointProxyPrefix+"Rest/Inbox/Summary","MessageHandler-NewComment":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Comments","MessageHandler-GetComments":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Comments","MessageHandler-SetCategoryToComment":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Comments/{idComment}","MessageHandler-RemoveComment":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Comments/{idComment}","MessageHandler-ReplyComment":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Comments/{idComment}/Replies","MessageHandler-RemoveReply":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Comments/{idComment}/Replies/{idReply}","MessageHandler-GetCategoryColors":e.sharepointProxyPrefix+"Rest/Cases/Comments/CategoryColors","MessageHandler-RenameCategoryColor":e.sharepointProxyPrefix+"Rest/Cases/Comments/CategoryColors/{idColorCategory}","MessageHandler-CountNewComments":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Comments/{idLastComment}","process-handler-getAllProcesses":e.sharepointProxyPrefix+"Rest/Processes","process-handler-getCustomizedColumnsData":e.sharepointProxyPrefix+"Rest/Processes/CustomizedColumnsData","process-handler-getCategory":e.sharepointProxyPrefix+"Rest/Processes/Categories","process-handler-getRecentProcesses":e.sharepointProxyPrefix+"Rest/Processes/RecentProcesses","process-handler-getCustomizedColumnsDataInfo":e.sharepointProxyPrefix+"Rest/Processes/CustomizedColumnsDataInfo","process-handler-getActivitiesData":e.sharepointProxyPrefix+"Rest/Processes/CasesData/MyActivities","process-handler-getPendingsData":e.proxyPrefix+"Rest/Processes/CasesData/MyPendings","query-handler-getqueries":e.sharepointProxyPrefix+"Rest/Queries","user-handler-getCurrentUser":e.sharepointProxyPrefix+"Rest/Users/CurrentUser","old-render":e.sharepointProxyPrefix+"App/ListaDetalle/Detalle.aspx",Reports:e.sharepointProxyPrefix+"RestServices/BAMAnalyticsHandler.ashx","reports-handler-deleteQueries":e.sharepointProxyPrefix+"Rest/BAMAnalytics/Reports/{QueryId}","folders-handler-getUserQueries":e.sharepointProxyPrefix+"Rest/SmartFolders","folders-associate-deleteSmartFolder":e.sharepointProxyPrefix+"Rest/SmartFolders/{idSmartFolder}","folders-handler":e.sharepointProxyPrefix+"RestServices/SmartFoldersHandler.ashx","folders-associate":e.sharepointProxyPrefix+"App/Ajax/AJAXGateway.aspx","smartfolders-integration":e.sharepointProxyPrefix+"App/WorkPortal/ConfigureFilteredFolder.aspx",AlarmAdmin:e.sharepointProxyPrefix+"App/Admin/AlarmsAdmin.aspx",AnalyticsProcess:e.sharepointProxyPrefix+"App/Cockpit/AnalyticsProcess.aspx",AnalyticsSensor:e.sharepointProxyPrefix+"App/Cockpit/AnalyticsSensor.aspx",AnalyticsTask:e.sharepointProxyPrefix+"App/Cockpit/AnalyticsTask.aspx",AsynchronousWorkitemRetries:e.sharepointProxyPrefix+"App/Admin/AsynchDisabledWorkitems.aspx",AuthenticationLogQuery:e.sharepointProxyPrefix+"App/Admin/AuthLogQuery.aspx",BAMProcess:e.sharepointProxyPrefix+"App/Cockpit/BAMProcess.aspx",BAMTask:e.sharepointProxyPrefix+"App/Cockpit/BAMTask.aspx",BusinessPolicies:e.sharepointProxyPrefix+"App/Admin/BusinessPolicies/BusinessPoliciesSelector.aspx",CaseAdmin:e.sharepointProxyPrefix+"App/Admin/CaseSearch.aspx",CasesMonitor:e.sharepointProxyPrefix+"App/Admin/CasesMonitor.aspx",Closed:e.sharepointProxyPrefix+"App/ListaDetalle/listaitems.aspx?h_Location=Cerrados&I_ProcessState=Completed",CurrentUser:e.sharepointProxyPrefix+"App/Admin/CurrentUser.aspx",EncryptionAdmin:e.sharepointProxyPrefix+"App/Admin/Encrypt.aspx",MobileUpdatesAdmin:e.sharepointProxyPrefix+"App/MobileUpdates/default.aspx",EntityAdmin:e.sharepointProxyPrefix+"App/Admin/Entity.aspx",LocationResources:e.sharepointProxyPrefix+"App/Admin/AdminLocResources.aspx",NewCase:e.sharepointProxyPrefix+"App/Radicar/application.aspx",Pending:e.sharepointProxyPrefix+"App/ListaDetalle/listaitems.aspx?h_Location=Pendientes&I_processState=Running",Profiles:e.sharepointProxyPrefix+"App/Admin/ProfilesAdminSearch.aspx",Search:e.sharepointProxyPrefix+"App/ListaDetalle/Search.aspx",UserAdmin:e.sharepointProxyPrefix+"App/Admin/ListUsers.aspx",UserDefaultAssignation:e.sharepointProxyPrefix+"App/Admin/DefaultAssignationUser.aspx?h_AdminDefaultAssign=1",UserPendingRequests:e.sharepointProxyPrefix+"App/Admin/UserPendingRequests.aspx",ListPreferences:e.sharepointProxyPrefix+"App/Admin/CurrentUser.aspx",GRDimensionAdmin:e.sharepointProxyPrefix+"App/Cockpit/DimensionEdit.aspx",Licenses:e.sharepointProxyPrefix+"App/Admin/Licenses.aspx",AnalysisQueries:e.sharepointProxyPrefix+"App/Inicio/WPAnalysisQuery.aspx",ProcessAdmin:e.sharepointProxyPrefix+"App/Admin/AdminProcess.aspx",ResourceBAM:e.sharepointProxyPrefix+"App/Cockpit/BAMResourceMonitor.aspx",WorkPortalVersion:e.sharepointProxyPrefix+"Rest/Util/Version","entities-administration":"RestServices/EntityHandler.ashx",getCurrentTheme:e.sharepointProxyPrefix+"Api/Theme/Current","process-handler-getFavourites":e.proxyPrefix+"Rest/Home/MyFavorites/Count","process-handler-getFavouriteCases":e.proxyPrefix+"Rest/Home/MyFavorites","stuff-handler-getUserStuff":e.sharepointProxyPrefix+"Rest/Stakeholder/Collections","stuff-handler-getUserStuff-v2":e.sharepointProxyPrefix+"Rest/Stakeholder/Collections/v2","templates-handler-getCollectionData":e.proxyPrefix+"Api/Collection/{idFact}/Data","templates-handler-getVirtualCollectionData":e.proxyPrefix+"Api/Collection/{guidVirtualCollection}/VirtualData","entities-handler-getMapping":e.sharepointProxyPrefix+"Rest/Entities/Mapping","entities-handler-getActions":e.sharepointProxyPrefix+"Rest/Entities/Actions","actions-handler-getDataForm":e.sharepointProxyPrefix+"Rest/Handlers/Render","actions-handler-hasStartForm":e.sharepointProxyPrefix+"Rest/Processes/HasStartForm","actions-handler-executeRule":e.sharepointProxyPrefix+"Rest/Action/Rule","process-handler-getUsersAndEvents":e.sharepointProxyPrefix+"Rest/Processes/CasesData/UsersAndEvents"}):{}},$.Class.extend("bizagi.workportal.services.context",{},{init:function(e){this.context=e.context,this.endPoints=bizagi.workportal.services.getEndPoints(e),this.proxyPrefix=bizagi.util.isEmpty(e.proxyPrefix)?"":e.proxyPrefix},getUrl:function(e){return null==this.endPoints[e]&&bizagi.log("Url not found","No endpoint defined for: "+e),this.endPoints[e]}}),$.Class.extend("bizagi.workportal.services.service",{BA_CONTEXT_PARAMETER_PREFIX:"h_",ENTITIES_QUERY_PAGE_SIZE:10},{init:function(e){(e="object"==typeof e?e:{}).context=bizagi.util.isEmpty(e.context)?"workportal":e.context,e.proxyPrefix=bizagi.util.isEmpty(e.proxyPrefix)?"":e.proxyPrefix,e.proxyPrefix=this.normalizeUrl(e.proxyPrefix),bizagi.RPproxyPrefix=e.proxyPrefix,e.sharepointProxyPrefix=bizagi.util.isEmpty(e.sharepointProxyPrefix)?"":e.sharepointProxyPrefix,e.sharepointProxyPrefix=this.normalizeUrl(e.sharepointProxyPrefix),this.serviceLocator=new bizagi.workportal.services.context(e),this.multiactionService=new bizagi.workportal.services.multiactionservice(this),this.pageSize=10,"undefined"!=typeof BIZAGI_INBOX_ROWS_PER_PAGE&&(this.pageSize=$.isNumeric(BIZAGI_INBOX_ROWS_PER_PAGE)?BIZAGI_INBOX_ROWS_PER_PAGE:this.pageSize),bizagi.injector.registerInstance("dataService",this)},multiaction:function(){return this.multiactionService},getUrl:function(e){return this.serviceLocator.getUrl(e.endPoint)},normalizeUrl:function(e){return""!=e&&("/"!=e[e.length-1]&&(e=e.concat("/")),-1==e.indexOf("http://")&&-1==e.indexOf("https://")&&(e="http://"+e)),e},getCurrentTheme:function(){var e=this.serviceLocator.getUrl("getCurrentTheme");return $.read(e)},getOverrides:function(){return $.ajax({url:this.serviceLocator.getUrl("overrides")}).pipe(function(e){return e=e||{},$.each(e,function(t,i){var r=i.toUpperCase();"TRUE"!=r&&"FALSE"!=r||(e[t]=bizagi.util.parseBoolean(i))}),e})},authenticatedUser:function(e){var t=this,i=t.serviceLocator.getUrl("login-handler");return $.read({url:i,data:{userName:BIZAGI_USER,password:BIZAGI_PASSWORD,domain:BIZAGI_DOMAIN}}).pipe(function(e){return e},function(e){return i=(i=(i=(i=t.serviceLocator.getUrl("login-handlerv10")).replace("{0}",BIZAGI_USER||"")).replace("{1}",BIZAGI_PASSWORD||"")).replace("{2}",BIZAGI_DOMAIN||""),$.ajax({url:i,type:"GET",dataType:"json"})})},logoutUser:function(e){var t=this.serviceLocator.getUrl("logoff-handlerv1");return $.read({url:t})},logOffUser:function(e){var t=this.serviceLocator.getUrl("logoff-handler");return $.read({url:t})},getCurrentUser:function(e){return $.read(this.serviceLocator.getUrl("user-handler-getCurrentUser"))},getInboxSummary:function(e){return $.read(this.serviceLocator.getUrl("inbox-handler-getInboxSummary")).pipe(function(e){return e.inboxSummary})},getAllProcesses:function(e){e=e||{};var t={},i=this.serviceLocator.getUrl("process-handler-getAllProcesses");return null!=e.taskState&&(t.taskState=e.taskState),null!=e.onlyFavorites&&""!=e.onlyFavorites&&(t.onlyFavorites=e.onlyFavorites),null!=e.myActivities&&""!=e.myActivities&&(t.myActivities=e.myActivities),null!=e.myPendings&&""!=e.myPendings&&(t.myPendings=e.myPendings),e.smartfoldersParameters&&(i=i+"?"+e.smartfoldersParameters),bizagi.isMobile()&&(t.mobileDevice=!0),$.read(i,t).pipe(function(t){if(e.skipAggrupate)return t;var i={},r={},a=bizagi.localization.getResource("workportal-widget-inbox-all-processes"),s={name:bizagi.localization.getResource("workportal-widget-inbox-all-cases"),path:"",category:a,isFavorite:e.onlyFavorites||!1,guidFavorite:"",idworkflow:"",guidWFClass:"",count:0};for(key in r[a]=[],r[a].workflows=[],r[a].workflows.push(s),t.workflows&&$.each(t.workflows.workflow,function(e,t){r[t.category]||(r[t.category]=[],r[t.category].workflows=[]),r[t.category].workflows.push(t),s.count+=Number(t.count)}),i.categories=[],r)i.categories.push({name:key,workflows:r[key].workflows});return i})},getProcessIcon:function(e){var t={processId:e.processId};return $.read({url:this.serviceLocator.getUrl("process-getIcon"),data:t,batchRequest:!0})},getCollectionIcon:function(e){var t={collectionId:e.collectionId};return $.read({url:this.serviceLocator.getUrl("collections-getIcon"),data:t,batchRequest:!0})},getFavourites:function(){var e=this.serviceLocator.getUrl("process-handler-getFavourites");return $.read(e,{}).pipe(function(e){return e})},getMyStuff:function(){var e=this.serviceLocator.getUrl("process-handler-getMyStuff");return $.read(e,{}).pipe(function(e){return e})},getFavouriteCases:function(e){var t={},i=this.serviceLocator.getUrl("process-handler-getFavouriteCases");return e=e||{},t.pageSize=e.pageSize||this.pageSize,t.page=e.page||1,bizagi.isMobile()&&(t.mobileDevice=!0),$.read(i,t).pipe(function(e){return e})},getActions:function(e){e=e||{};var t={},i=this.serviceLocator.getUrl("process-handler-getActions");return bizagi.isMobile()&&(t.mobileDevice=!0),$.read(i,t).pipe(function(e){return e})},getCasesList:function(e){e=e||{};var t={},i=this.serviceLocator.getUrl("case-handler-getCasesList");return t.pageSize=e.pageSize||10,t.page=e.page||1,t.numberOfFields=e.numberOfFields||"-1",t.idWfClass=e.idWfClass||"-1",$.read(i,t).pipe(function(e){for(var t={overdue:[],today:[],tomorrow:[],upcoming:[],page:e.page,totalPages:e.totalPages},i=new Date,r=i.getMonth(),a=i.getDate(),s=i.getYear(),o=0;e.elements.length>o;o++){var n=e.elements[o],d=new Date(n[3]),l=d.getDate(),c=d.getMonth(),p=d.getYear();a>l||r>c&&s>=p?(n[3]=bizagi.util.dateFormatter.formatDate(new Date(n[3]),"dd MMM"),t.overdue.push(n)):a==l?(n[3]=bizagi.util.dateFormatter.formatDate(new Date(n[3]),"hh:mm"),t.today.push(n)):a+1==l?(n[3]=bizagi.util.dateFormatter.formatDate(new Date(n[3]),"hh:mm"),t.tomorrow.push(n)):(n[3]=bizagi.util.dateFormatter.formatDate(new Date(n[3]),"dd MMM"),t.upcoming.push(n))}return t})},getAllAdministrableEntities:function(e){e=e||{};var t={action:"entitiesList",kind:"administrable"};return $.ajax({url:this.serviceLocator.getUrl("entities-administration"),data:t,type:"POST",dataType:"json"}).pipe(function(e){var t={entities:[]};return $.each(e,function(e,i){t.entities.push(i)}),t})},getEntitiesList:function(e){return(e=e||{}).action="entitiesList",e.kind="entitiesData",$.ajax({url:this.serviceLocator.getUrl("entities-administration"),data:e,type:"POST",dataType:"json"})},getCasesByWorkflow:function(e){e=e||{};var t={},i=this.serviceLocator.getUrl("process-handler-getCustomizedColumnsDataInfo");if(bizagi.util.isEmpty(e.taskState)||(t.taskState=e.taskState),bizagi.util.isEmpty(e.idWorkflow)||(t.idWorkflow=e.idWorkflow),1==e.onlyFavorites&&(t.onlyFavorites=!0,t.taskState="all"),t.pageSize=e.pageSize||this.pageSize,t.page=e.page||1,bizagi.isMobile()&&(t.mobileDevice=!0),e.smartfoldersParameters){var r=e.smartfoldersParameters.split("&");$.each(r,function(e,i){var r=i.split("=");t[r[0]]=r[1]})}return $.read(i,t).pipe(function(e){return $.each(e.cases.rows,function(t,i){var r=[];e.cases.rows[t].radnumber=i.id,$.each(i.fields,function(i,a){if(null!=a)try{null!=a.isRadNumber&&"true"==a.isRadNumber?e.cases.rows[t].radnumber=a.Value:null!=a.workitems?e.cases.rows[t].workitems=a.workitems:r.push(a)}catch(e){}}),e.cases.rows[t].fields=r}),e.cases})},getOrganizationsList:function(){var e=this.serviceLocator.getUrl("process-handler-getOrganizations"),t={type:12,name:""};return $.read(e,t)},getOrganizationsByUserList:function(){var e=this.serviceLocator.getUrl("process-handler-getOrganizationsByUser"),t={type:12,name:""};return $.read(e,t)},getCustomizedColumnsData:function(e){e=e||{};var t={},i=this.serviceLocator.getUrl("process-handler-getCustomizedColumnsData");t.pageSize=e.pageSize||this.pageSize,t.pageSize=t.pageSize<1?10:t.pageSize,t.page=e.page||1,t.orderFieldName=e.orderFieldName||"",t.orderType=e.orderType||"0",t.order=e.order||"",bizagi.isMobile()&&(t.mobileDevice=!0),e.taskState=e.taskState||"all";var r=e.taskState.toString().toLowerCase();if(""==r&&(e.taskState="all"),"red"==r&&(e.taskState="Red"),"yellow"==r&&(e.taskState="Yellow"),"green"==r&&(e.taskState="Green"),t.taskState=e.taskState,bizagi.util.isEmpty(e.idWorkflow)||(t.idWorkflow=e.idWorkflow),bizagi.util.isEmpty(e.idTask)||(t.idTask=e.idTask),bizagi.util.isEmpty(e.radNumber)||(t.radNumber=e.radNumber),1==e.onlyFavorites&&(t.onlyFavorites=!0,t.taskState="all"),e.smartfoldersParameters){var a=e.smartfoldersParameters.split("&");$.each(a,function(e,i){var r=i.split("=");t[r[0]]=r[1]})}return e.group&&(t.group=e.group),$.read(i,t)},getCategories:function(e){var t={};return(e=e||{}).idCategory&&(t.idCategory=e.idCategory),e.idApp&&(t.idApp=e.idApp),bizagi.isMobile()&&(t.mobileDevice=!0),t.groupByApp=e.groupByApp||!1,$.read(this.serviceLocator.getUrl("process-handler-getCategory"),t)},getRecentProcesses:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("process-handler-getRecentProcesses"),e)},getCaseSummary:function(e){return void 0!==(e=e||{}).idCase?$.read({url:this.serviceLocator.getUrl("case-handler-getCaseSummary"),data:{idCase:e.idCase,eventAsTasks:e.eventAsTasks||"false",onlyUserWorkItems:e.onlyUserWorkItems||"true",mobileDevice:bizagi.isMobile()||"false"},serviceType:"GETSUMMARY"}).pipe(function(e){return e.isAborted&&(e.isAborted=bizagi.util.parseBoolean(e.isAborted)),e}):void 0!==e.guid?$.read({url:this.serviceLocator.getUrl("case-handler-getCaseSummaryByGuid"),data:{guid:e.guid,eventAsTasks:e.eventAsTasks||"false",onlyUserWorkItems:e.onlyUserWorkItems||"true",mobileDevice:bizagi.isMobile()||"false"},serviceType:"GETSUMMARY"}).pipe(function(e){return e}):void 0},getCaseAssignees:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getCaseAssignees"),{idCase:e.idCase}).pipe(function(e){return e})},getCaseTasks:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getCaseTasks"),{idCase:e.idCase})},getCaseEvents:function(e){return e=e||{},$.read({url:this.serviceLocator.getUrl("case-handler-getCaseEvents"),data:{idCase:e.idCase},serviceType:"GETEVENTS"}).pipe(function(e){return e})},getCaseSubprocesses:function(e){return e=e||{},$.read({url:this.serviceLocator.getUrl("case-handler-getCaseSubprocesses"),data:{idCase:e.idCase},serviceType:"GETSUBPROCESSES"}).pipe(function(e){return e})},getCaseFormsRenderVersion:function(e){return void 0!==(e=e||{}).guid?$.read(this.serviceLocator.getUrl("case-handler-getCaseFormsRenderVersionByGuid"),{guid:e.guid}):$.read(this.serviceLocator.getUrl("case-handler-getCaseFormsRenderVersion"),{idCase:e.idCase})},getCaseFormsRenderVersionDataContent:function(e){var t=new $.Deferred;return $.when(this.getCaseFormsRenderVersion(e)).done(function(e){t.resolve(e)}),t.promise()},getTaskAssignees:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getTaskAssignees"),{idCase:e.idCase,idTask:e.idTask})},getWorkitems:function(e){var t={};void 0!==(e=e||{}).guid&&(t.guid=e.guid),t.idCase=e.idCase,"0"!=e.fromTask&&(t.fromTask=e.fromTask),""!=e.fromWorkItemId&&(t.fromWorkItemId=e.fromWorkItemId),t.mobileDevice=bizagi.isMobile(),e.eventAsTasks&&(t.eventAsTasks=e.eventAsTasks),void 0!==e.onlyUserWorkItems&&(t.onlyUserWorkItems=e.onlyUserWorkItems);var i=this.serviceLocator.getUrl("case-handler-getWorkItems");return void 0!==e.guid&&void 0===e.idCase&&(i=this.serviceLocator.getUrl("case-handler-getWorkItemsByGuid").replace("{guid}",e.guid)),$.read({url:i,data:t,serviceType:"GETWORKITEMS"})},getQueriesDefinitions:function(e){var t=this;if(t.hashQueriesDef&&e.idNode){if(bizagi.override.enableQueriesClassicMenu)return t.hashQueriesDef[e.idNode];if(-1==e.idNode||1!=t.hashQueriesDef[e.idNode].length||"00000000-0000-0000-0000-000000000000"!=t.hashQueriesDef[e.idNode][0].guidForm||t.hashQueriesDef[e.idNode][0].notMigratedUrl){if(-1!=e.idNode&&t.hashQueriesDef[e.idNode].length>1){var i=[];return $.each(t.hashQueriesDef[e.idNode],function(e,r){if(r.nodes.length>0){var a=t.getQueriesDefinitions({idNode:r.idNode});$.merge(i,a)}else i.push(r)}),i}return t.hashQueriesDef[e.idNode]}return t.getQueriesDefinitions({idNode:t.hashQueriesDef[e.idNode][0].idNode})}var r=new $.Deferred;return $.read(t.serviceLocator.getUrl("query-handler-getqueries-definitions")).done(function(e){t.hashQueriesDef={},t.hashQueriesDef[0]={},t.processQueriesDefinitions("-1",e.query),r.resolve(t.hashQueriesDef[-1])}),r.promise()},processQueriesDefinitions:function(e,t){var i=this;$.each(t,function(t,r){i.hashQueriesDef[e]||(i.hashQueriesDef[e]=[]),i.hashQueriesDef[e].push(r),r.nodes?i.processQueriesDefinitions(r.idNode,r.nodes):r.nodes={}})},getQueries:function(e){var t=this;if(t.hashQueries&&e.idElement)return t.hashQueries[e.idElement];var i=new $.Deferred;return $.read(t.serviceLocator.getUrl("query-handler-getqueries")).done(function(e){t.hashQueries={},t.hashQueries[0]={},t.processQueries(e.query),i.resolve(t.hashQueries[-1])}),i.promise()},processQueries:function(e){var t=this;$.each(e,function(e,i){t.hashQueries[i.idParent]||(t.hashQueries[i.idParent]=[]),t.hashQueries[i.idParent].push(i),i.nodes?t.processQueries(i.nodes):i.nodes={}})},createNewCase:function(e){var t={};return(e=e||{}).caseData&&(e.caseData=JSON.stringify(e.caseData)),e.idWfClass&&(t.idWfClass=e.idWfClass),e.idOrganization&&(t.idOrganization=e.idOrganization),$.create({url:this.serviceLocator.getUrl("case-handler-addNewCase"),data:t,serviceType:"NEWCASE"})},startProcess:function(e){var t;e=e||{},t=this.serviceLocator.getUrl("case-handler-startProcess");var i={};return e.idProcess&&(i.idProcess=e.idProcess),e.entityMapping&&(i.entityMapping=e.entityMapping),e.isAdhocProcess&&(i.isAdhocProcess=e.isAdhocProcess),e.idOrganization&&(i.idOrganization=e.idOrganization),$.create({url:t,data:i,serviceType:"STARTPROCESS"})},searchCases:function(e){e=e||{};var t={h_action:"SEARCHCASES",onlyUserCases:!1,active:!1};return t.page=e.page||1,e.radNumber&&(t.radNumber=$.trim(e.radNumber)),t.pageSize=e.pageSize||this.pageSize,$.ajax({url:this.serviceLocator.getUrl("query-handler"),data:t,type:"POST",dataType:"json"})},queryCases:function(e){e=e||{};var t={h_action:"QUERYCASES"};return t.onlyUserCases=e.onlyUserCases||!1,t.active=e.active&&!0,t.page=e.page||1,e.radNumber&&(t.radNumber=$.trim(e.radNumber)),t.pageSize=e.pageSize||this.pageSize,t.filter=e.filter,t.outputxpath=e.outputxpath,t.orderFieldName=e.orderFieldName||"",t.orderType="asc"==e.orderType||1==e.orderType?1:0,t.order=e.order||"",$.ajax({url:this.serviceLocator.getUrl("query-handler"),data:t,type:"POST",dataType:"json"})},queryEntities:function(e){e=e||{};var t={h_action:"QUERYENTITIES"};return t.page=e.page||1,t.pageSize=this.Class.ENTITIES_QUERY_PAGE_SIZE,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"idEnt"]=e.idEntity,t.filter=e.filter,t.outputxpath=e.outputxpath,t.orderFieldName=e.orderFieldName||"",t.orderType=e.orderType||"",t.order=e.order||"",$.ajax({url:this.serviceLocator.getUrl("query-handler"),data:t,type:"POST",dataType:"json"})},getMenuAuthorization:function(){return $.read(this.serviceLocator.getUrl("authorization-handler-getMenuAuthorization"))},isCaseCreationAuthorized:function(e){var t=this.serviceLocator.getUrl("authorization-handler-isCaseCreationAuthorized");return t=t.replace("{0}",e.idWfClass||""),$.read({url:t})},getAsynchExecutionState:function(e){return(e=e||{}).idCase,$.read({url:this.serviceLocator.getUrl("case-handler-getAsynchExecutionState"),data:{idCase:e.idCase,idAsynchWorkitem:e.idAsynchWorkitem},serviceType:"ASYNCHEXECUTION"})},supportedLogTypes:function(){return $.read(this.serviceLocator.getUrl("case-handler-supportedLogTypes"))},getActivityLog:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getActivityLog"),{idCase:e.idCase,orden:e.sort||0,idActualPage:e.idActualPage||1,pageSize:e.pageSize||10}).pipe(function(e){var t=0;e.rows&&e.rows.length&&(t=e.rows.length);for(var i,r=0;r<t;r++)i=new Date(e.rows[r][4]),e.rows[r][4]="Invalid Date"==i?e.rows[r][4]:bizagi.util.dateFormatter.formatDate(i,bizagi.localization.getResource("dateFormat")+" "+bizagi.localization.getResource("timeFormat"));return e})},getActivityDetailLog:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getActivityDetailLog"),{idCase:e.idCase,idWorkItemFrom:e.idWorkItemFrom,idActualPage:e.idActualPage||1,pageSize:e.pageSize||10}).pipe(function(e){return e})},getEntityLog:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getEntityLog"),{idCase:e.idCase,orden:e.sort||0,idActualPage:e.idActualPage||1,pageSize:e.pageSize||10}).pipe(function(e){return e})},getEntityDetailLog:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getEntityDetailLog"),{idCase:e.idCase,idEntity:e.idEntity||-1,userFullName:e.userFullName||"",attribDisplayName:e.attribDisplayName||"",idActualPage:e.idActualPage||1,pageSize:e.pageSize||10}).pipe(function(e){return e})},getUserLog:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getUserLog"),{idCase:e.idCase,orden:e.sort||0,idActualPage:e.idActualPage||1,pageSize:e.pageSize||10}).pipe(function(e){return e})},getUserDetailLog:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getUserDetailLog"),{idCase:e.idCase,idUser:e.idUser,entDisplayName:e.entDisplayName||"",attribDisplayName:e.attribDisplayName||"",idActualPage:e.idActualPage||1,pageSize:e.pageSize||10}).pipe(function(e){return e})},getAdminLog:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getAdminLog"),{idCase:e.idCase,orden:e.sort||0,idActualPage:e.idActualPage||1,pageSize:e.pageSize||10}).pipe(function(e){return e})},addFavorite:function(e){return e=e||{},$.create(this.serviceLocator.getUrl("favorites-handler-saveFavorite"),{idObject:e.idObject,favoriteType:e.favoriteType}).pipe(function(e){return e})},delFavorite:function(e){return e=e||{},$.destroy(this.serviceLocator.getUrl("favorites-handler-deleteFavorite"),{guidFavorite:e.idObject}).pipe(function(e){return e})},summaryAssigness:function(e){var t=new $.Deferred,i={idCase:e.idCase||""},r=e.preview?this.getCaseAssigneesPreview(i):this.getCaseAssignees(i);return $.when(r).done(function(e){for(var i=e.assignees||[],r=i.length,a={showAssignees:!!(bizagi.override.showAssignees&&i.length>0),assignees:{},events:"",activities:""},s="",o="",n=[],d=[],l=0;l<r;l++)bizagi.util.parseBoolean(i[l].isEvent)?-1==n.indexOf(i[l].idUser)&&(n.push(i[l].idUser),s+=i[l].Name+", "):-1==d.indexOf(i[l].idUser)&&(d.push(i[l].idUser),o+=i[l].Name+", ");a.events=s.substring(0,s.length-2),a.activities=o.substring(0,o.length-2),t.resolve(a)}),t.promise()},summarySubProcess:function(e){var t=$.Deferred(),i=e.idCase||"";return $.when(this.getCaseSubprocesses({idCase:i})).done(function(e){if(e.showSubProcess=e.subProcesses.length>=1,e.showSubProcesColumns=void 0!==e.CustFields[0]&&e.CustFields[0][0].length>=1,e.showSubProcesColumns){var i;e.subProcPersonalized={};for(var r=0;r<e.CustFields.length;r++){i=0;for(var a=0;a<e.subProcesses.length;a++)e.subProcesses[a].idCustData==r&&(e.subProcPersonalized[r]=e.subProcPersonalized[r]||{},e.subProcPersonalized[r].subProcesses=e.subProcPersonalized[r].subProcesses||{},e.subProcPersonalized[r].subProcesses[i++]=e.subProcesses[a]);-1!=e.subProcesses[r].idCustData&&null!=e.subProcPersonalized[r]&&(e.subProcPersonalized[r].CustFields={0:e.CustFields[r][r]},e.subProcPersonalized[r].idCase=e.idCase)}}t.resolve(e)}),t.promise()},summaryCaseEvents:function(e){var t=$.Deferred(),i=e.idCase||"";return $.when(this.getCaseEvents({idCase:i})).done(function(e){e.showEvents=e.events.length>=1,t.resolve(e)}),t.promise()},summaryCaseDetails:function(e){var t=new $.Deferred,r=e.idWorkitem||0;return $.when(this.getCaseSummaryDataContent(e)).done(function(e){e.currentState=e.currentState||[];var a=e.currentState.length;for(e.showEvents=e.countEvents>=1,e.showParentProcess=e.idParentCase>=1,e.parentProcess={displayName:e.parentDisplayName,idCase:e.idParentCase},e.isClosedForAllUsers=bizagi.util.parseBoolean(e.isClosed),e.isClosed=!bizagi.util.parseBoolean(e.isOpen),e.showAssignees=!!(bizagi.override.showAssignees&&e.countAssigness>0),e.showSubProcess=e.countSubProcesses>0,e.showForm=!!bizagi.util.parseBoolean(e.hasGlobalForm),e.allowsReassign="false",i=0;i<a;i++)e.currentState[i].idWorkItem==r&&(e.allowsReassign=e.currentState[i].allowsReassign);var s=[],o=0;for(i=0;i<a;i++)!bizagi.util.parseBoolean(e.currentState[i].isEvent)&&bizagi.util.parseBoolean(e.currentState[i].assignToCurrentUser)&&e.currentState[i].idWorkItem!=r&&(s[o++]=e.currentState[i]);e.currentStateTypes=s,e.showActivities=s.length>0,t.resolve(e)}).fail(function(e){t.reject(e)}),t.promise()},releaseActivity:function(e){var t=this.serviceLocator.getUrl("case-handler-releaseActivity");t=t.replace("{idCase}",e.idCase);var i={};return e&&(i.idCase=e.idCase,i.idWorkItem=e.idWorkItem),$.ajax({url:t,data:i,type:"POST",dataType:"json"})},takeOwnershipActivity:function(e){var t=this.serviceLocator.getUrl("case-handler-takeOwnershipActivity"),i={};return e&&(i.idCase=e.idCase,i.idWorkItem=e.idWorkItem),$.ajax({url:t,data:i,type:"POST",dataType:"json"})},summaryActivities:function(e){var t={},i=e.data||{},r=r||e.idWorkitem||0;try{t.showActivities=i.currentStateTypes.length>=1,t.currentState=i.currentStateTypes,t.globalIdWorkitem=r,t.creationDate=i.creationDate}catch(e){}return t},getCaseSummaryDataContent:function(e){var t=this,i=new $.Deferred;return $.when(t.getCaseSummary(e)).done(function(e){e.taskState=t.icoTaskState,e.createdBy&&(e.createdByName=e.createdBy.Name,e.createdByUserName=e.createdBy.userName,e.caseDescription=""==e.caseDescription?"":e.caseDescription,e.processPath=e.processPath.replace(/\//g," > ")+e.process,e.showWorkOnIt=!0),i.resolve(e)}).fail(function(e){i.reject(e)}),i.promise()},getSmartFolders:function(e){var t=this,i={};return i.idFolder=e||"",$.read(t.serviceLocator.getUrl("folders-handler-getUserQueries"),i).pipe(function(i){return-1==e||""==e?i:t.searchFolders(e,i)||[]})},deleteSmartFolder:function(e){var t={action:"6"};return e=e||{},t.idSmartFolder=e.idSmartFolder||"",t.idUser=e.idUser||"",$.destroy(this.serviceLocator.getUrl("folders-associate-deleteSmartFolder"),t)},getFolders:function(e){var t=this,i={action:"getUserFolder"};return i.idFolder=e||"",$.ajax({url:t.serviceLocator.getUrl("folders-handler"),type:"POST",data:i,dataType:"json"}).pipe(function(i){return""==e?{folders:[{name:bizagi.localization.getResource("workportal-widget-folders"),id:"-1",idParent:0,childs:i}]}:-1==e?i:t.searchFolders(e,i)||[]})},searchFolders:function(e,t){for(var i=0;i<t.folders.length;i++){if(t.folders[i].id==e)return t.folders[i].childs}},getCasesByFolder:function(e){return e=e||"",$.ajax({cache:!0,url:"RestServices/"+e,type:"GET",dataType:"json"})},makeFolder:function(e){var t={action:"CreateUpdateFolder"};return t.folderName=e.folderName||"No Name",null!=e.idParentFolder&&e.idParentFolder>1&&(t.idParentFolder=e.idParentFolder),$.ajax({url:this.serviceLocator.getUrl("folders-handler"),data:t,type:"POST",dataType:"json"})},updateFolder:function(e){var t={};return e=e||{},t.action="CreateUpdateFolder",t.idFolder=e.idFolder||"",e.folderName&&(t.folderName=e.folderName),e.idParentFolder&&(t.idParentFolder=e.idParentFolder),$.ajax({url:this.serviceLocator.getUrl("folders-handler"),data:t,type:"POST",dataType:"json"})},associateCaseToFolder:function(e){var t={action:"4"};return e=e||{},t.idCase=e.idCase||"",t.idCustomFolder=e.idCustomFolder,$.ajax({url:this.serviceLocator.getUrl("folders-associate"),data:t,type:"POST",dataType:"json"})},dissasociateCaseFromFolder:function(e){var t={action:"DeleteCaseFromFolder"};return e=e||{},t.idFolder=e.idFolder,t.idCase=e.idCase,$.ajax({url:this.serviceLocator.getUrl("folders-handler"),data:t,type:"POST",dataType:"json"})},deleteFolder:function(e){var t={action:"5"};return e=e||{},t.idCustomFolder=e.idCustomFolder||"",$.ajax({url:this.serviceLocator.getUrl("folders-associate"),data:t,type:"POST",dataType:"json"})},getFile:function(e){var t={},i=this.serviceLocator.getUrl("file-handler");return e=e||{},t.action="getFileContent",t.uploadId=e.uploadId||"",t.entityId=e.entityId||"",t.entityKey=e.entityKey||"",bizagi.services.ajax.pathToBase+i+"?"+jQuery.param(t)},getComments:function(e){var t=this;return e=e||{},$.read(encodeURI(t.serviceLocator.getUrl("MessageHandler-GetComments")),{idCase:e.idCase||"",idColorCategory:"number"==typeof e.idColorCategory?e.idColorCategory:"",pag:e.pag||1,pagSize:e.pagSize||10}).pipe(function(e){var i=new $.Deferred,r="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";return e.comments?$.each(e.comments,function(t,i){e.comments[t].hasOwnProperty("CategoryColor")||(e.comments[t].CategoryColor="")}):e.comments=[],e.users?$.each(e.users,function(t,i){e.users[t].Picture=""===e.users[t].Picture?r:e.users[t].Picture}):$.when(t.getCurrentUser()).done(function(t){e.users=[],e.users.push({Id:t.idUser,Name:t.user,DisplayName:t.userName,Picture:r})}),i.resolve(e),i.promise()})},makeNewComment:function(e){return $.create(this.serviceLocator.getUrl("MessageHandler-NewComment"),{idCase:e.idCase||"",comment:e.comment.replace(/\n/g,"<br>")||""}).pipe(function(e){if(e.comments){var t=[e.comments];$.each(t,function(e,i){t[e].CategoryColor=""}),e.comments=t}if(e.users){var i=[e.users];$.each(i,function(e,t){i[e].Picture=""==i[e].Picture?"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":i[e].Picture}),e.users=i}return e})},makeNewReply:function(e){return e=e||{},$.create(this.serviceLocator.getUrl("MessageHandler-ReplyComment"),{idCase:e.idCase||"",idComment:e.idComment||"",comment:e.comment.replace(/\n/g,"<br>")||""}).pipe(function(e){if(e.comments&&(e.Replies=[e.comments]),e.users){var t=[e.users];$.each(t,function(e,i){t[e].Picture=""==t[e].Picture?"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":t[e].Picture}),e.users=t}return e})},removeComment:function(e){return e=e||{},$.destroy(this.serviceLocator.getUrl("MessageHandler-RemoveComment"),{idCase:e.idCase||"",idComment:e.idComment||""})},removeReply:function(e){return e=e||{},$.destroy(this.serviceLocator.getUrl("MessageHandler-RemoveReply"),{idCase:e.idCase||"",idComment:e.idComment||"",idReply:e.idReply||""})},renameCommentCategory:function(e){return e=e||{},$.update(this.serviceLocator.getUrl("MessageHandler-RenameCategoryColor"),{idColorCategory:e.idColorCategory>=0?e.idColorCategory:"",colorName:e.colorName||""})},setCommentCategory:function(e){return e=e||{},$.update(this.serviceLocator.getUrl("MessageHandler-SetCategoryToComment"),{idCase:e.idCase||"",idComment:e.idComment||"",idColorCategory:"number"==typeof e.idColorCategory?e.idColorCategory:""})},getCommentsCategories:function(){return $.read(this.serviceLocator.getUrl("MessageHandler-GetCategoryColors")).pipe(function(e){return e.length>1&&e[0].categories?e[0]:e})},getNewComments:function(e){var t={idCase:(e=e||{}).idCase||0,idComment:e.idComment||0};return $.read(this.serviceLocator.getUrl("MessageHandler-CountNewComments"),t)},getAnalisysQueries:function(){return $.read(this.serviceLocator.getUrl("bamAnalytics-handler-getAnalisysQueries"))},updateQueries:function(e){return $.update(this.serviceLocator.getUrl("bamAnalytics-handler-updateQuery"),{idQuery:e.idQuery>=0?e.idQuery:"",queryName:e.queryName||"",queryDescription:e.queryDescription||""})},deleteQueries:function(e){var t={action:"1612"};return t.QueryId=e||"",$.destroy(this.serviceLocator.getUrl("reports-handler-deleteQueries"),t)},getConfiguration:function(){var e=this.serviceLocator.getUrl("authenticationConfig");return $.read(e)},logout:function(e){var t=this,i={sourceLogout:"user"};sessionStorage.removeItem("bizagiAuthentication");try{$.when(t.getConfiguration()).done(function(r){if(r.redirectErrorPage)window.location.href=r.redirectErrorPage;else{var a=r.authenticationType,s=r.authenticationSubType;switch(a){case"Federate":var o=r.logOffURL,n=r.federationLogoutBindingProtocol;if("WSFederated"===s)$.when($.create(t.serviceLocator.getUrl("logout"),i)).done(function(){e&&""!=e&&(o=o.replace(/wreply=[^&]*/,"wreply="+e)),location.href=o}).fail(function(){bizagi.log("Error logging out")}).always(function(){location.href=r.logOffURL});else if("Saml"===s){$.when($.read(t.serviceLocator.getUrl("FederateLogoffUrl"),{})).done(function(e){e.federateLogoffUrl&&(o=e.federateLogoffUrl),$.when($.create(t.serviceLocator.getUrl("logout"),i)).done(function(){"POST"===n?(window.document.open("text/html"),window.document.write(o),window.document.close()):window.location.href=o}).fail(function(){bizagi.log("Error logging out")}).always(function(){})}).fail(function(){bizagi.log("Error logging out")}).always(function(){})}break;case"SAML":loader.nativeAjax(loader.getPathUrl(t.serviceLocator.getUrl("logout"),i),function(e){var t=JSON.parse(e.responseText);if(!0===t.logout)if(void 0!==t.samlUrlRedirect){var i=decodeURI(t.samlUrlRedirect),r=document.createElement("iframe");document.getElementsByTagName("body")[0].appendChild(r),$(r).on("load",function(){(bizagi.util.isIE8()?$(this.contentWindow.document.body):$(this.contentWindow.eval("document.body"))).text();location.reload()}),r.src=i}else location.reload();else bizagi.log("Error logging out")});break;case"OAuth2":$.when($.create(t.serviceLocator.getUrl("logout"),i)).done(function(i){$.when($.read(t.serviceLocator.getUrl("oauth2AuthenticationConfig"))).done(function(t){if(t.logoutUrl&&""!=t.logoutUrl){var r=t.logoutUrl;e&&(e.endsWith("/")||(e+="/"),r=r.replace(/post_logout_redirect_uri=[^&]*/,"post_logout_redirect_uri="+e)),i.invalidateAccessToken&&(r=r.replace(/invalidateAccessToken=[^&]*/,"invalidateAccessToken="+i.invalidateAccessToken)),i.idTokenHint&&r.indexOf("id_token_hint")>=0&&(r+=i.idTokenHint),location.href=r}else location.reload()}).fail(function(){bizagi.log("Error logging out")})}).fail(function(){bizagi.log("Error logging out")});break;default:$.when($.create(t.serviceLocator.getUrl("logout"),i)).done(function(){e?location.href=e:window.location=bizagi.services.ajax.loginPage}).fail(function(){bizagi.log("Error logging out")})}}}).fail(function(e){console.log(e)})}catch(e){console.log(e)}},logoutMobile:function(){sessionStorage.removeItem("bizagiAuthentication");var e=this.serviceLocator.getUrl("logout");return $.read(e)},logoutBeforeUnload:function(){sessionStorage.removeItem("bizagiAuthentication"),$.ajax({type:"POST",async:!1,data:{sourceLogout:"browser"},url:this.serviceLocator.getUrl("logout")})},getOrganizationInfo:function(e){var t={};return t.objectType=e,$.ajax({url:this.serviceLocator.getUrl("massive-activity-assignments-getOrganizationInfo"),data:t,type:"GET",dataType:"json"})},getCasesByOrganization:function(e){var t={};return t.roles=e.roles?"["+e.roles.toString()+"]":"[]",t.skills=e.skills?"["+e.skills.toString()+"]":"[]",t.locations=e.locations?"["+e.locations.toString()+"]":"[]",$.ajax({url:this.serviceLocator.getUrl("massive-activity-assignments-getCasesByOrganization"),data:t,type:"GET",dataType:"json"})},reassignCases:function(e){var t={};return t.users=e.user?"["+e.user.toString()+"]":"[]",t.roles=e.roles?"["+e.roles.toString()+"]":"[]",t.skills=e.skills?"["+e.skills.toString()+"]":"[]",t.locations=e.locations?"["+e.locations.toString()+"]":"[]",$.ajax({url:this.serviceLocator.getUrl("massive-activity-assignments-reassignCases"),data:t,type:"POST",dataType:"json"})},searchUsers:function(e){var t={};return t.userName=e.userName||"",t.fullName=e.fullName||"",t.domain=e.domain||"",$.ajax({url:this.serviceLocator.getUrl("massive-activity-assignments-searchUsers"),data:t,type:"GET",dataType:"json"})},searchUsersByID:function(e){var t={ids:"["+e.toString()+"]"};return $.ajax({url:this.serviceLocator.getUrl("massive-activity-assignments-searchUsersById"),data:t,type:"POST",dataType:"json"})},getUsersList:function(e){return $.read(this.serviceLocator.getUrl("admin-getUsersList"),e)},getUsersForAssignation:function(e){return $.read(this.serviceLocator.getUrl("admin-getUsersForAssignation"),e)},getOAuth2Applications:function(e){return $.read(this.serviceLocator.getUrl("admin-getUsersForAssignation"),e)},getAdhocProcessesList:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-getAdhocProcessesList"),data:e,type:"POST",dataType:"json"})},createAdhocProcess:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-createAdhocProcess"),data:e,type:"POST",dataType:"json"})},createNewAdhocProcess:function(e){return $.create({url:this.serviceLocator.getUrl("admin-createNewAdhocProcess"),data:JSON.stringify(e),dataType:"json",contentType:"application/json"})},updateAdhocProcess:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-updateAdhocProcess"),data:e,type:"POST",dataType:"json"})},publishAdhocProcess:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-publishAdhocProcess"),data:e,type:"POST",dataType:"json"})},deleteAdhocProcess:function(e){var t=this.serviceLocator.getUrl("admin-deleteAdhocProcess");return $.ajax({url:t.replace("{processId}",e),type:"DELETE",dataType:"json"})},cloneAdhocProcess:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-cloneAdhocProcess"),data:e,type:"POST",dataType:"json"})},deleteAdhocTask:function(e){var t=this.serviceLocator.getUrl("admin-deleteAdhocTask");return $.ajax({url:t.replace("{processId}",e.idProcess).replace("{taskId}",e.idTask),type:"DELETE",dataType:"json"})},updateAdhocTask:function(e){var t=this.serviceLocator.getUrl("admin-updateAdhocTask");return $.ajax({url:t.replace("{processId}",e.idProcess),data:e.task,type:"POST",dataType:"json"})},getAdhocDataSchema:function(e){var t=this.serviceLocator.getUrl("admin-getAdhocDataSchema");return $.ajax({url:t.replace("{processId}",e),type:"GET",dataType:"json"})},getAdhocProcessDiagram:function(e){var t=this.serviceLocator.getUrl("admin-getAdhocProcessDiagram");return $.ajax({url:t.replace("{processId}",e),type:"GET",dataType:"json"})},getAdhocTask:function(e,t){var i=this.serviceLocator.getUrl("admin-getAdhocTask");return $.ajax({url:i.replace("{processId}",e).replace("{taskId}",t),type:"GET",dataType:"json"})},saveAdhocProcessDiagram:function(e,t){var i=this.serviceLocator.getUrl("admin-saveAdhocProcessDiagram");return $.ajax({url:i.replace("{processId}",e),data:t,type:"POST",dataType:"json"})},getAdhocEntitiesList:function(){var e=this.serviceLocator.getUrl("admin-adhoc-entities-list");return $.read(e,{})},getAdhocUserGroupList:function(){var e=this.serviceLocator.getUrl("admin-adhoc-user-group-list");return $.read(e,{})},loadUsersByGroup:function(e){var t=this.serviceLocator.getUrl("admin-adhoc-user-group-data-get");return $.ajax({url:t.replace("{groupId}",e),type:"GET",dataType:"json"})},loadAuthItemInfoByInstance:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-adhoc-authorization-data-get"),data:e,type:"POST",dataType:"json"})},saveAdhocAuthorizationInfo:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-adhoc-authorization-data-save").replace("{processId}",e.processId).replace("{isAdhocTask}",e.isAdhocTask),data:e.auth,type:"POST",dataType:"json"})},deleteAdhocGroup:function(e){var t=this.serviceLocator.getUrl("admin-adhoc-user-group-delete");return $.ajax({url:t.replace("{groupId}",e),type:"DELETE",dataType:"json"})},saveAdhocGroup:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-adhoc-user-group-save"),data:e,type:"POST",dataType:"json"})},addUserToGroup:function(e){var t=this.serviceLocator.getUrl("admin-adhoc-user-group-data-add");return $.ajax({url:t.replace("{groupId}",e.groupId).replace("{userId}",e.userId),type:"POST",dataType:"json"})},removeUserFromGroup:function(e,t){var i=this.serviceLocator.getUrl("admin-adhoc-user-group-data-remove");return $.ajax({url:i.replace("{groupId}",e).replace("{userId}",t),type:"DELETE",dataType:"json"})},getAdhocEntityInstances:function(e){var t=this.serviceLocator.getUrl("admin-adhoc-entity-instances");return $.ajax({url:t.replace("{entityId}",e),type:"GET",dataType:"json"})},getEntityValues:function(e,t){var i=this.serviceLocator.getUrl("admin-entity-values");return $.ajax({url:i.replace("{context}",e).replace("{entityId}",t),type:"GET",dataType:"json"})},saveAdhocEntity:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-saveAdhocEntity"),data:e,type:"POST",dataType:"json"})},saveAdhocEntityInstance:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-saveAdhocEntityInstance").replace("{entityId}",e.entityId).replace("{isNew}",e.isNew),data:e.instance,type:"POST",dataType:"json"})},getAllEntities:function(){return $.ajax({url:this.serviceLocator.getUrl("admin-getAllEntities"),type:"GET",dataType:"json"})},getAllCategories:function(){return $.ajax({url:this.serviceLocator.getUrl("admin-getAllCategories"),type:"GET",dataType:"json"})},getDomainList:function(){var e=this.serviceLocator.getUrl("domains");return $.read(e)},getEcmAllScheduledJobs:function(){var e={action:"getEcmAllScheduledJobs"};return $.read(this.serviceLocator.getUrl("async-ecm-upload-baseService"),e)},retryECMPendingScheduledJob:function(e){var t={action:"retryECMPendingScheduledJob"};return t.idJob=e,$.read(this.serviceLocator.getUrl("async-ecm-upload-baseService"),t)},getWorkPortalVersion:function(){return $.ajax({url:this.serviceLocator.getUrl("WorkPortalVersion"),type:"GET",dataType:"json"}).always(function(e){return""==(e=e||{}).version&&(e.version=bizagi.loader.productBuild||""),e})},getAuthenticationLogData:function(e){var t="";return t="domains"==e.dataType?"admin-getAuthenticationDomains":"events"==e.dataType?"admin-getAuthenticationEventsTypes":"admin-getAuthenticationEventSubTypes",$.ajax({url:this.serviceLocator.getUrl(t),data:{},type:"GET",dataType:"json"})},getAuthenticationLogResult:function(e){var t={};return t.action=e.action,t.domain=e.domain,t.userName=e.userName,t.dtFrom=e.dtFrom,t.dtTo=e.dtTo,t.eventSubType=e.eventSubType,t.eventType=e.eventType,t.pag=e.pag,t.pagSize=e.pagSize,$.ajax({url:this.serviceLocator.getUrl("admin-getAuthenticationLog"),data:t,type:"GET",dataType:"json"}).pipe(function(e){for(var t=e.rows.length,i=0;i<t;i++){var r=e.rows[i][0],a=new Date(r),s=bizagi.util.dateFormatter.formatDate(a,bizagi.localization.getResource("dateFormat")+" "+bizagi.localization.getResource("timeFormat"));e.rows[i][0]="Invalid Date"==a?r:s}return e})},encryptString:function(e){var t={};return e=e||{},t.entry=e.entry,$.ajax({url:this.serviceLocator.getUrl("admin-EncryptString"),data:t,type:"POST",dataType:"json"})},userPendingRequests:function(e){var t={pag:e.pag,pagSize:e.pagSize};return $.read(this.serviceLocator.getUrl("admin-UserPendingRequests"),t)},userAuthenticationInfo:function(e){return $.read(this.serviceLocator.getUrl("admin-UserAuthenticationInfo"),{idUser:e.idUser})},updateUserAuthenticationInfo:function(e){return $.create(this.serviceLocator.getUrl("admin-updateUserAuthenticationInfo"),{idUser:e.idUser,password:e.password,enabled:e.enabled,expired:e.expired,locked:e.locked})},generateRandomPassword:function(e){return(e=e||{}).action="generateRandomPassword",$.ajax({url:this.serviceLocator.getUrl("admin-generateRandomPassword"),data:e,type:"POST",dataType:"json"})},generateDataToSendByEmail:function(e){e=e||{};var t={action:"GenerateDataToSendByEmail"};return t.idUser=e.idUser,t.password=e.password,$.ajax({url:this.serviceLocator.getUrl("admin-GenerateDataToSendByEmail"),data:e,type:"POST",dataType:"json"})},sendEmail:function(e){e=e||{};var t={action:"sendEmail"};return t.emailTo=e.emailTo,t.subject=e.subject,t.body=e.body,$.ajax({url:this.serviceLocator.getUrl("admin-sendEmail"),data:e,type:"POST",dataType:"json"})},sendUserEmail:function(e){e=e||{};var t={action:"SendUserEmail"};return t.emailTo=e.emailTo,t.subject=e.subject,t.body=e.body,$.ajax({url:this.serviceLocator.getUrl("admin-sendUserEmail"),data:e,type:"POST",dataType:"json"})},getApplicationCategoriesList:function(e){var t={},i="";if(e.userId&&(t.userId=e.userId),"Applications"==e.action&&e.userId){i=this.serviceLocator.getUrl("admin-getCaseSecurityApplicationList");return $.read(i,t)}if("Applications"==e.action&&!e.userId)return i="admin-getApplicationList",$.ajax({url:this.serviceLocator.getUrl(i),data:t,type:"GET",dataType:"json"});if("getCategories"==e.action&&e.userId){i=this.serviceLocator.getUrl("admin-getCaseSecurityCategoriesList");return t.idApp=e.idApp,t.idCategory=e.idCategory,e.authorizationContext&&(t.authorizationContext=e.authorizationContext),""==t.idCategory&&(t.idCategory=-1),void 0!==e.filterStartEvent&&(t.filterStartEvent=e.filterStartEvent),$.read(i,t)}return"getCategories"!=e.action||e.userId?void 0:(i="admin-getCategoriesList",t.idApp=e.idApp,t.idCategory=e.idCategory,e.authorizationContext&&(t.authorizationContext=e.authorizationContext),""==t.idCategory&&(t.idCategory=-1),void 0!==e.filterStartEvent&&(t.filterStartEvent=e.filterStartEvent),$.ajax({url:this.serviceLocator.getUrl(i),data:t,type:"GET",dataType:"json"}))},getAdminCasesList:function(e){var t=e||{};return $.ajax({cache:!0,url:this.serviceLocator.getUrl("admin-getCasesList"),data:t,type:"GET",dataType:"json"})},postAdminInvalidateCase:function(e){var t=e||{};return $.ajax({cache:!0,url:this.serviceLocator.getUrl("admin-invalidateCases"),data:t,type:"POST",dataType:"json"})},getResponseProcessRunningInvalidateCases:function(e){var t=e||{};return $.ajax({cache:!0,url:this.serviceLocator.getUrl("admin-getProcessRunningInvalidateCases"),data:t,type:"GET",dataType:"json"})},getApplicationProcesses:function(e){var t=this.serviceLocator.getUrl("admin-getApplicationProcesses"),i={};return i.idApp=e.idApp?e.idApp:-1,$.read(t,i)},getProcessVersion:function(e){var t=this.serviceLocator.getUrl("admin-getProcessVersion"),i={};return i.idWfClass=e.idWFClass,$.read(t,i)},getProcessTasks:function(e){var t=this.serviceLocator.getUrl("admin-getProcessTasks"),i={};return i.idWfClass=e.idWFClass,i.version=e.version?e.version:void 0,$.read(t,i)},getTaskAlarms:function(e){var t=this.serviceLocator.getUrl("admin-getTaskAlarms"),i={};return i.idTask=e.idTask,$.read(t,i)},getLapseMode:function(){var e=this.serviceLocator.getUrl("admin-getLapseMode");return $.read(e)},getRecurrMode:function(){var e=this.serviceLocator.getUrl("admin-getRecurrMode");return $.read(e)},getScheduleType:function(){var e=this.serviceLocator.getUrl("admin-getScheduleType");return $.read(e)},getBossList:function(e){var t=this.serviceLocator.getUrl("admin-getBossList");return $.read(t)},addAlarm:function(e){var t=this.serviceLocator.getUrl("admin-addAlarm"),i={};return i.idTask=e.idTask,i.idRecurrMode=e.idRecurrMode,i.idLapseMode=e.idLapseMode,i.scheduleType=e.scheduleType,i.alarmTime=e.alarmTime,i.alarmRecurrTime=e.alarmRecurrTime,i.sendToCurrentAssignee=e.sendToCurrentAssignee,$.update(t,i)},editAlarm:function(e){var t=this.serviceLocator.getUrl("admin-editAlarm"),i={};return i.idTask=e.idTask,i.idAlarm=e.idAlarm,i.idRecurrMode=e.idRecurrMode,i.idLapseMode=e.idLapseMode,i.scheduleType=e.scheduleType,i.alarmTime=e.alarmTime,i.alarmRecurrTime=e.alarmRecurrTime,i.sendToCurrentAssignee=e.sendToCurrentAssignee,$.update(t,i)},deleteAlarm:function(e){var t=this.serviceLocator.getUrl("admin-deleteAlarm");return e.idAlarm,$.destroy(t,e)},getAlarmRecipients:function(e){var t=this.serviceLocator.getUrl("admin-alarmRecipients"),i={};return i.idAlarm=e.idAlarm,$.read(t,i)},addRecipientToAlarm:function(e){var t=this.serviceLocator.getUrl("admin-recipientToAlarm"),i={};return i.idAlarm=e.idAlarm,i.idRecipient=e.idRecipient,$.update(t,i)},deleteRecipientsFromAlarm:function(e){var t=this.serviceLocator.getUrl("admin-deleteAlarmRecipients"),i={};return i.idRecipients=e.idRecipients,$.destroy(t,i)},enableAlarm:function(e){var t=this.serviceLocator.getUrl("admin-enableAlarm"),i={};return i.idTask=e.idTask,$.create(t,i)},abortReassignItems:function(e){var t=e||{},i="abort"==e.action?"admin-abortItems":"admin-reassignItems";return $.ajax({url:this.serviceLocator.getUrl(i),data:t,type:"POST",dataType:"json"})},reassignCurrent:function(e){var t=e||{};return $.ajax({url:this.serviceLocator.getUrl("admin-reassignCurrent"),data:t,type:"POST",dataType:"json"})},asyncActivitiesServices:function(e){var t=this,i=e,r="",a="GET";return"getActivities"==e.action?r=t.serviceLocator.getUrl("admin-async-activities-get-activities"):"retryNow"==e.action?(a="POST",r=(r=(r=(r=t.serviceLocator.getUrl("admin-async-activities-get-retry-now")).replace("{idCase}",e.idCase)).replace("{idworkItem}",e.idWorkitem)).replace("{idAsynchWorkitem}",e.idAsynchWorkitem)):"getActivitiesByTask"==e.action?r=t.serviceLocator.getUrl("admin-async-activities-get-activities-by-task"):"enableExecution"==e.action?(a="POST",r=t.serviceLocator.getUrl("admin-async-activities-enable-execution")):"enableMultiple"==e.action?(r=t.serviceLocator.getUrl("admin-async-activities-enable-multiple"),a="POST"):"asyncExecution"==e.action?r=t.serviceLocator.getUrl("admin-async-activities-async-execution"):"asyncExecutionLog"==e.action?r=(r=(r=(r=t.serviceLocator.getUrl("admin-async-activities-async-execution-log")).replace("{idCase}",e.idCase)).replace("{idworkItem}",e.idWorkItem)).replace("{idAsynchWorkitem}",e.idAsynchWorkitem):"getAsyncExecution"==e.action&&(r=t.serviceLocator.getUrl("admin-async-activities-async-get-current-execution-log")),$.ajax({url:r,data:i,type:a,dataType:"json"})},getDefaultAssignationUserToAllProcess:function(e){return $.read(this.serviceLocator.getUrl("admin-getDefaultAssignationUserToAllProcess"),{serviceAction:"getDefaultAssignationUserToAllProcess"})},getDefaultAssignationUserToProcess:function(e){var t;return t=""==e.idWFClass?-1:e.idWfClass,$.read(this.serviceLocator.getUrl("admin-getDefaultAssignationUserToProcess"),{serviceAction:"getDefaultAssignationUserToProcess",process:t})},setDefaultAssignationUserToProcess:function(e){return""==e.idWFClass?process=-1:process=e.idWfClass,$.create(this.serviceLocator.getUrl("admin-setDefaultAssignationUserToProcess"),{serviceAction:"setDefaultAssignationUserToProcess",process:process,idUser:e.idUser})},transferCaseSecuritypermissions:function(e){return e.allProcess?$.create(this.serviceLocator.getUrl("admin-transferAllCaseSecuritypermissions"),{serviceAction:"transferAllCaseSecuritypermissions",idUserSource:e.idUserSource,idUserTarget:e.idUserTarget}):$.create(this.serviceLocator.getUrl("admin-transferCaseSecuritypermissions"),{serviceAction:"transferCaseSecuritypermissions",idUserSource:e.idUserSource,idUserTarget:e.idUserTarget,idProcess:e.idProcess})},revokeCaseSecuritypermissions:function(e){return e.allProcess?$.create(this.serviceLocator.getUrl("admin-revokeAllCaseSecuritypermissions"),{serviceAction:"revokeAllCaseSecuritypermissions",idUserSource:e.idUserSource}):$.create(this.serviceLocator.getUrl("admin-revokeCaseSecuritypermissions"),{serviceAction:"revokeCaseSecuritypermissions",idUserSource:e.idUserSource,idProcess:e.idProcess})},statusTransferCaseSecuritypermissions:function(e){return $.create(this.serviceLocator.getUrl("admin-statusTransferCaseSecuritypermissions"),{serviceAction:"statusTransferCaseSecuritypermissions"})},getProfilesTypes:function(e){return $.read(this.serviceLocator.getUrl("admin-getProfilesTypes"))},searchProfiles:function(e){var t=this.serviceLocator.getUrl("admin-searchProfiles"),i={};return i.type=e.profileType,i.name=e.profileName,i.orgId=e.orgId?e.orgId:null,$.read(t,i)},getUsersByProfile:function(e){var t=this.serviceLocator.getUrl("admin-getUsersByProfile"),i={};return i.type=e.profileType,i.id=e.idProfile,$.read(t,i)},removeUserFromProfile:function(e){var t=this.serviceLocator.getUrl("admin-removeUserFromProfile"),i={};return i.type=e.profileType,i.id=e.idProfile,i.idUser=e.idUser,$.destroy(t,i)},addUserToProfile:function(e){var t=this.serviceLocator.getUrl("admin-addUserToProfile"),i={};return i.type=e.profileType,i.id=e.idProfile,i.idUser=e.idUser,$.update(t,i)},licenses:function(){var e=this.serviceLocator.getUrl("admin-Licenses");return $.read(e)},getDimensions:function(){var e=this.serviceLocator.getUrl("admin-GetDimensions");return $.read(e)},editDimension:function(e){e=e||{};var t={};t.id=e.id,t.displayName=e.displayName,t.name=e.name,t.idWfClass=e.idWfClass,t.entityPath=e.entityPath,t.description=e.description;var i=this.serviceLocator.getUrl("admin-EditDimension");return $.create(i,t)},createAdministrableDimension:function(e){e=e||{};var t={};return t.displayName=e.displayName,t.name=e.name,t.idWfClass=e.idWfClass,t.entityPath=e.entityPath,t.Description=e.description,$.ajax({url:this.serviceLocator.getUrl("admin-CreateAdministrableDimension"),data:e,type:"PUT",dataType:"json"})},deleteDimension:function(e){var t=this.serviceLocator.getUrl("admin-DeleteDimension");e=e||{};var i={};return i.id=e.id,i.idDimension=e.id,i.administrable=e.administrable,$.destroy(t,i)},entityPathChildNodesAction:function(e){e=e||{};var t={};return t.pathNodeType=e.nodeType,t.idNode=e.idNode,t.nodeDisplayPath=e.nodeDisplayPath,t.nodePath=e.nodePath,t.idWfClass=e.idWfClass,$.ajax({url:this.serviceLocator.getUrl("admin-EntityPathChildNodesAction"),data:e,type:"GET",dataType:"json"})},getActiveWFClasses:function(e){var t=e||{};return $.ajax({cache:!0,url:this.serviceLocator.getUrl("admin-GetActiveWFClasses"),data:t,type:"GET",dataType:"json"})},storeDocumentTemplates:function(){var e=this.serviceLocator.getUrl("admin-document-templates-storeDocumentTemplates");return $.read(e)},restoreDocumentTemplates:function(e){var t=this.serviceLocator.getUrl("admin-document-templates-restoreDocumentTemplates");return t+="?Guid="+e.Guid,$.read(t)},getWorkFlowClasses:function(){var e=this.serviceLocator.getUrl("admin-processes-workflowClasses");return $.read(e)},getTaskByWorkFlow:function(e){var t=this.serviceLocator.getUrl("admin-processes-tasksByWorkflow"),i={};return i.idWorkflow=e.idWorkflow,$.read(t,i)},modifyProcessDuration:function(e){var t=this.serviceLocator.getUrl("admin-processes-modifyProcessDuration"),i={};return i.idWorkflow=e.idWorkflow,i.duration=e.duration,$.create(t,i)},modifyTaskDuration:function(e){var t=this.serviceLocator.getUrl("admin-processes-modifyTaskDuration"),i={};return i.idTask=e.idTask,i.duration=e.duration,$.create(t,i)},processesHierarchy:function(){var e={removeOnlineItems:"true"};return $.ajax({url:this.serviceLocator.getUrl("offline-getProcessTree"),data:e,dataType:"json",type:"GET"})},syncOfflineCases:function(e){return $.ajax({url:this.serviceLocator.getUrl("offline-sendForm"),data:{idCase:e.idCase,idWFClass:e.idWfClass,awCaseCreationContext:JSON.stringify(e.objToSend),idWorkflow:e.idWfClass},type:"POST",dataType:"json",serviceType:"LOAD"})},processesHierarchyTofetchForms:function(e){var t={};return t.idChangeSet=e.changeSet,$.ajax({url:this.serviceLocator.getUrl("offline-getForms"),data:t,dataType:"json"})},getDataForMyTeam:function(){return $.ajax({url:this.serviceLocator.getUrl("bam-resourcemonitor-myteam"),type:"GET",dataType:"json"})},getReporstAnalysisQuery:function(){return $.read(this.serviceLocator.getUrl("reports-analysisquery"))},updateReportData:function(e){return $.update(this.serviceLocator.getUrl("reports-analysisquery-update"),e)},deleteReportData:function(e){return $.destroy(this.serviceLocator.getUrl("reports-analysisquery-delete")+"?"+e)},getAdminEntitiesList:function(){var e=this.serviceLocator.getUrl("admin-entities-list");return $.read(e,{})},getAdminStakeholdersList:function(){var e=this.serviceLocator.getUrl("admin-stakeholders-list");return $.read(e,{})},getAdminEntitiesRowData:function(e){var t=this.serviceLocator.getUrl("admin-entities-row-data"),i={guidEntity:e.guidEntity,pag:e.pag||1,pagSize:e.pagSize||10};return void 0!==e.orderField&&(i.orderField=e.orderField),void 0!==e.orderType&&(i.orderType=e.orderType),void 0!==e.filters&&$.isArray(e.filters)&&e.filters.length>0&&(i.filters=JSON.stringify(e.filters)),$.read(t,i)},getUserStakeholders:function(e){var t=this.serviceLocator.getUrl("admin-user-stakeholders"),i={idUser:e.idUser};return $.read(t,i)},getAdminEntityData:function(e){var t=this.serviceLocator.getUrl("admin-entity-simpleData"),i={};return i.idEntity=e.idEntity,i.idAttribute=e.idAttribute,$.read(t,i)},getAdminEntityMigrated:function(e){var t=this.serviceLocator.getUrl("admin-entities-migrated-entity"),i={};return i.guidEntity=e,$.read(t,i)},getAdminEntitiesForm:function(e){var t=this.serviceLocator.getUrl("admin-entities-get-form"),i={h_action:"LOADENTITYFORM",h_contexttype:"entity"};return void 0!==e.guid&&(i.h_guidEntity=e.guid),void 0!==e.guidForm&&(i.h_guidForm=e.guidForm),void 0!==e.idRow&&(i.h_surrogateKey=e.idRow),void 0!==e.idPageCache&&(i.h_pageCacheId=e.idPageCache,i.h_isRefresh=!0),void 0!==e.isStakeholder&&e.isStakeholder&&(i.h_showDisabled=!1,i.h_showAssociateUser=!0),e.prepare?i:$.ajax({url:t,data:i,type:"POST",dataType:"json"})},getBizagiObjects:function(){var e=this.serviceLocator.getUrl("admin-language-bizagi-objects");return $.read(e,{})},getEntitiesList:function(){var e=this.serviceLocator.getUrl("admin-language-entities");return $.read(e,{})},getStoreLanguageTemplates:function(){var e=this.serviceLocator.getUrl("admin-language-languages");return $.read(e,{})},setLanguages:function(e){var t=this.serviceLocator.getUrl("admin-language-languages"),i=e;return $.ajax({url:t,data:{languages:i},type:"POST",dataType:"json"})},resetPersonalization:function(){return $.ajax({url:this.serviceLocator.getUrl("admin-language-reset"),data:{},type:"DELETE",dataType:"json"})},getLanguageTemplate:function(e){var t,i="";e.elements?(t="admin-language-resource-download",i="&elements="+e.elements):e.entities?(t="admin-language-entities-download",i="&entities="+e.entities):t="admin-language-resource-download";var r="tablet_android"===this.device?"_system":"_self",a=encodeURI(this.serviceLocator.getUrl(t)+"?cultureName="+e.cultureName+i+"&xsrf="+bizagi.cookie(".BIZCSRF"));window.open(a,r,"location=yes")},getHolidaysSchemas:function(e){return $.read(this.serviceLocator.getUrl("admin-holidays-schemas"),e)},getHolidaysBySchema:function(e){return $.read(this.serviceLocator.getUrl("admin-holidays-schema"),e).pipe(function(e){e=e||{};return $.each(e,function(t,i){e[t].date=(i.date||"").split("T")[0]+"T00:00:00"}),e})},saveHolidaysBySchema:function(e){var t=this.serviceLocator.getUrl("admin-holidays-schema").replace("{schema}",e.schema);$.ajax({method:"POST",url:t,data:e.data,contentType:"application/json"})},getProjectName:function(){var e=this.serviceLocator.getUrl("admin-projectname");return $.read(e)},setProjectName:function(e){var t=this.serviceLocator.getUrl("admin-projectname"),i={projectName:e};return $.create(t,i)},downloadReportUser:function(e){var t=this,i=t.serviceLocator.getUrl("user-gdpr-downloadReportUser");bizagi.showErrorAlertDialog=!1,$.when(t.getDownloadReport(e,i)).done(function(t){0===$("#iframe-download").length?$("<iframe/>").attr({src:i.replace("{idUser}",e),style:"visibility:hidden;display:none",id:"iframe-download"}).appendTo("body"):$("#iframe-download").attr("src",i.replace("{idUser}",e))}).fail(function(e,i,r){var a=JSON.parse(e.responseText);t.notifier=bizagi.injector.get("notifier"),t.notifier.showErrorMessage(a.message)})},getDownloadReport:function(e,t){var i={idUser:e};return $.read(t,i)},anonymizeUser:function(e){var t=this.serviceLocator.getUrl("user-gdpr-anonymizeUser"),i={idUser:e};return $.destroy(t,i)},getAuditLicense:function(e){var t=$.Deferred(),i=this.serviceLocator.getUrl("admin-audit-license")+"?xsrf="+bizagi.cookie(".BIZCSRF");return t.resolve("OK"),document.location=i,t.promise()},processDefinition:function(e){return $.read(this.serviceLocator.getUrl("processviewer-processdefinition"),e)},graphicInfo:function(e){return $.read(this.serviceLocator.getUrl("processviewer-processgraphicinfo"),e)},getQueryFormResponse:function(e){return $.create(this.serviceLocator.getUrl("query-handler-getQueryFormResponse"),e)},exportToExcelProfiles:function(e){var t=encodeURI(this.serviceLocator.getUrl("admin-getUsersByProfile-report").replace("{filterType}",e.filterType).replace("{guidValueFilter}",e.guidValueFilter)+"?orgId="+e.orgId);window.location.assign(t)},getQueryFormExportExcel:function(e){var t=$.Deferred(),i="",r="_self";bizagi.util.isIE()&&(r="iframeExcel");var a=$("<form>",{action:this.serviceLocator.getUrl("query-handler-getQueryFormExportExcel")+"?xsrf="+bizagi.cookie(".BIZCSRF"),target:r,id:"formExportExcel",method:"POST",style:"display:none"});$(a).attr("enctype","application/x-www-form-urlencoded"),$(a).attr("accept-charset","UTF-8");var s=$("<iframe>",{name:"iframeExcel",id:"iframeExcel",style:"display:none"});return $.each(e,function(e,t){i=$("<input>",{name:e,value:t,type:"hidden"}),$(a).append(i)}),$("body").append(a),$("body").append(s),a.submit().remove(),s.submit().remove(),t.resolve("OK"),t.promise()},getQueryForm:function(e){return e=e||{},$.ajax({url:this.serviceLocator.getUrl("query-handler-getQueryForm"),data:e,type:"POST",dataType:e.dataType||"json"})},getPreferencesForm:function(e){return $.ajax({url:this.serviceLocator.getUrl("preferences-handler-getPreferencesForm"),data:e,type:"POST",dataType:"json"})},saveStoredQueryForm:function(e){return $.ajax({url:this.serviceLocator.getUrl("query-handler-storedQueryForm"),data:e,type:"POST",dataType:"json"})},updateStoredQueryForm:function(e){return $.ajax({url:this.serviceLocator.getUrl("query-handler-storedQueryForm"),data:e,type:"PUT",dataType:"json"})},deleteStoredQueryForm:function(e){var t=this.serviceLocator.getUrl("query-handler-storedQueryForm-id");return $.destroy(t,e)},getStoredQueryFormList:function(e){return $.ajax({url:this.serviceLocator.getUrl("query-handler-storedQueryForm"),data:e,type:"GET",dataType:"json"})},getStoredQueryFormResponse:function(e){var t=this.serviceLocator.getUrl("query-handler-storedQueryForm-id"),i={};return i.idStoredQueryForm=e,$.read(t,i)},getGraphicQueryInfo:function(e){return $.read("Rest/Cases/WorkitemsGuid",e)},getCasePath:function(e){return $.read("Rest/Cases/TransitionLog",e)},getUsersForm:function(e){return $.create(this.serviceLocator.getUrl("admin-usersform"),e)},getLastUpdateByMobile:function(){return $.read({url:this.serviceLocator.getUrl("mobile-getLastUpdate")})},getUsersAdministrationLog:function(e){return $.read({url:this.serviceLocator.getUrl("admin-userslog"),data:e})},queryUsersLicenses:function(){return $.read({url:this.serviceLocator.getUrl("admin-userslicenses")})},createUserAdministrationForm:function(){return $.get(this.serviceLocator.getUrl("admin-createuserform"))},getPreferenceFormParams:function(){return $.read(this.serviceLocator.getUrl("admin-userpreferenceform-isnew"))},getUserPositions:function(){return $.read(this.serviceLocator.getUrl("admin-userGetPositions"))},getAssignationQueues:function(){return $.read(this.serviceLocator.getUrl("admin-assignation-queues"))},getSegmentationQueues:function(){return $.read(this.serviceLocator.getUrl("admin-assignation-queues-segmentation"))},getQueueSuscribers:function(e){return $.read(this.serviceLocator.getUrl("admin-assignation-queues-suscribers"))},unsuscribeQueueUser:function(e){return $.destroy(this.serviceLocator.getUrl("admin-assignation-queues-unsuscribe"),{userId:e,segmentation:"x"})},getUserInfoByTask:function(e,t){var i={idCase:e,guidTask:t};return $.read(this.serviceLocator.getUrl("graphicquery-trailusers"),i)},getSearchLists:function(){return $.read(this.serviceLocator.getUrl("my-search-getSearchLists"),{})},defineFilterObject:function(e,t,i){var r=e.properties,a=r.xpath.split("@")[0],s=t.find(function(e){return e.xpath==a});if(s){if("from"==r.rangeQuery)s.value=s.value||{},s.searchType="range",s.value.min=e.value;else if("to"==r.rangeQuery)s.value=s.value||{},s.searchType="range",s.value.max=e.value;else{e.properties.typeSearch=s.searchType;var o=d(e);$.extend(s,o)}r.orderType&&(s.orderType=r.orderType),i&&i(bizagi.clone(s))}else{var n=r.defaultFilter||!1;s=d(e),r.orderType&&(s.orderType=r.orderType),"range"===s.searchType&&void 0===s.value&&(s.searchType="none"),(void 0!==s.value&&null!=s.value||s.orderType||n)&&(t.push(s),i&&i(bizagi.clone(s)))}function d(e){var t=e.properties,i=t.typeSearch,r=e.value;if("boolean"==t.type&&(void 0===r||"null"==typeof r?(r=null,i="Nullable"):(r=bizagi.util.parseBoolean(r),i="exact")),"number"!=t.type&&"money"!=t.type&&"date"!=t.type||(i="exact"),"object"==typeof e.value&&null!=e.value){if(r=[],Array.isArray(e.value))for(var s=0,o=e.value.length;s<o;s++){var n=parseInt(e.value[s].id);isNaN(n)||r.push(n)}else{n=parseInt(e.value.id);isNaN(n)||r.push(n)}i="exact",r=r.length>0?r:void 0}t.rangeQuery&&"none"!==t.rangeQuery&&(r={min:e.value,max:e.value},i="range");var d={xpath:a,searchType:i=i||"approx"};return"hidden"===t.type&&(d.isHidden=!0),void 0!==r&&(d.value=r),d}},serializeEntityData:function(e){var t=e;function i(e,t){var i={data:{},guid:t.guidEntity,timestamp:e.timestamp},r=e.columns,a=t.row;for(name in t)t.hasOwnProperty(name)&&"row"!==name.toString()&&"id"!==name.toString()&&(i[name]=t[name]);for(var s=0,o=r.length;s<o;s+=1)i.data[r[s]]=a[s];return i}t.entities=[];for(var r,a=-1;r=e.rows[++a];)for(var s,o=-1;s=e.cells[++o];)if(s.id===r.id){var n=i(s,r);t.entities.push(n);break}return t},getOAuth2Applications:function(){return $.ajax({url:this.serviceLocator.getUrl("oauth2-getApplications"),type:"GET",dataType:"json"})},getOAuth2Application:function(e){var t=this.serviceLocator.getUrl("oauth2-getApplication");return $.ajax({url:t.replace("{applicationId}",e),type:"GET",dataType:"json"})},createOAuth2Application:function(e){return $.ajax({url:this.serviceLocator.getUrl("oauth2-createApplication"),type:"POST",dataType:"json",data:e})},deleteOAuth2Application:function(e){var t=this.serviceLocator.getUrl("oauth2-deleteApplication");return $.ajax({url:t.replace("{applicationId}",e),type:"DELETE",dataType:"json"})},updateOAuth2Application:function(e,t){var i=this.serviceLocator.getUrl("oauth2-updateApplication");return $.ajax({url:i.replace("{applicationId}",t),data:e,type:"PUT",dataType:"json"})},updateClientSecretKeysOAuth2Application:function(e,t){var i=this.serviceLocator.getUrl("oauth2-updateClientSecretKeysApplication");return $.ajax({url:i.replace("{applicationId}",t),data:e,type:"PUT",dataType:"json"})},queryDelegations:function(e){var t=this.serviceLocator.getUrl("userDelegation")+"/"+e.idUser+"/delegates";return $.ajax({url:t,data:e,type:"GET",dataType:"json"})},saveDelegation:function(e){var t=this.serviceLocator.getUrl("userDelegation")+"/MultipleProcess";return $.ajax({url:t,data:e,type:"POST",dataType:"json",global:!1})},updateDelegation:function(e){var t=this.serviceLocator.getUrl("userDelegation")+"/"+e.idDelegation;return $.ajax({url:t,data:e,type:"PUT",dataType:"json",global:!1})},deleteDelegation:function(e){var t=this.serviceLocator.getUrl("userDelegation")+"/"+e.idDelegation;return $.ajax({url:t,data:e,type:"DELETE",dataType:"json"})},getUserFilterOptions:function(e){var t=this.serviceLocator.getUrl("userFilterOptions");return $.ajax({url:t,data:e,type:"GET",dataType:"json"})},getValuesFromCQL:function(e){var t=this.serviceLocator.getUrl("catalogQL");return $.ajax({url:t,data:JSON.stringify(e),processData:!1,type:"POST",contentType:"application/json"})},getPreferencesCurrentUser:function(){var e=this.serviceLocator.getUrl("currentUser");return $.ajax({url:e,type:"GET"})},getUsersForDelegation:function(e){var t=this.serviceLocator.getUrl("userFilterOptions")+"/SearchUser";return $.ajax({url:t,data:e,type:"GET",dataType:"json"})},getProcessToDelegate:function(e){var t=this.serviceLocator.getUrl("userFilterOptions")+"/"+e.idUser+"/process";return $.ajax({url:t,data:e,type:"GET",dataType:"json"})}}),$.Class.extend("bizagi.workportal.services.multiactionservice",{BA_CONTEXT_PARAMETER_PREFIX:"h_"},{init:function(e){this.service=e,this.batch={},this.batchTimer=50,this.replicateServiceMethods()},getService:function(){return this.service},replicateServiceMethods:function(){var self=this;self.getAdminEntitiesForm=eval("var tmp = function(){ return this.proxyMethod(this.getService().getAdminEntitiesForm, arguments);};tmp")},proxyMethod:function(e,arguments){var t=this.service;if(!arguments||1!=arguments.length)return e.apply(t,arguments);if("object"!=typeof arguments[0])return e.apply(t,arguments);var i=arguments[0];if(1==i.prepare)return e.apply(t,arguments);i.prepare=!0;var r=e.apply(t,arguments);return this.add(r)},add:function(e){var t=this,i=new $.Deferred;e.h_action;clearTimeout(t.batchTimeout);var r=e.tag=Math.guid(),a={action:e,deferred:i};return t.batch[r]=a,t.batchTimeout=setTimeout(function(){t.fire()},t.batchTimer),i.promise()},fire:function(){var e={},t=[];$.each(this.batch,function(i,r){t.push(r.action),e[i]=r}),this.batch={},$.when(this.execute({actions:t,rejectDeferreds:!1})).done(function(t){$.each(t,function(t,i){var r=i.tag;i.error?e[r].deferred.reject(i.error,i,i.error.message):e[r].deferred.resolve(i.result),delete e[r]}),$.each(e,function(e,t){t.deferred.reject({type:"not-processed",message:"Operation didn't executed"},"","Operation didn't executed")})}).fail(function(t,i,r){var a=void 0!==r?r.message:r||"Operation didn't executed";$.each(e,function(e,t){t.deferred.reject({type:"not-processed",message:a},"","Operation didn't executed")})})},execute:function(e){var t=this,r={},a=void 0===e.rejectDeferreds||e.rejectDeferreds;r[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="multiaction",$.each(e.actions,function(e,i){i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"tag"]=i.tag||e,delete i.tag}),(e=e||{}).actions&&(r[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"actions"]=JSON.encode(e.actions));var s=new $.Deferred;return $.ajax({url:t.getService().serviceLocator.getUrl("render-multiaction"),data:r,type:"POST",dataType:"json",serviceType:"MULTIACTION"}).done(function(e){for(i in e)if("function"!=typeof e[i]){var t=e[i];if(t.error&&a)return void s.reject(this,"servererror",t)}s.resolve(e)}).fail(function(e){var t,i=e.responseText||e;try{t=JSON.parse(i)}catch(e){}s.reject(e,"servererror",t)}),s.promise()}}),$.Class.extend("bizagi.workportal.services.routing",{},{init:function(e){var t=this;e=e||{},t.params=e.params||{},t.dataService=e.dataService||{},t.modules={projectDashboard:bizagi.util.isMobileDevice()?"activityform":"projectDashboard",oldRender:"oldrenderintegration",async:"async",activitySelector:"routing"},t.renderVersion=2,t.resetRouteInformation()},resetRouteInformation:function(){this.route={module:"",moduleParams:{}}},setRenderParams:function(e){this.params=this.getRenderParams(e)},getRenderParams:function(e){var t={idCase:parseInt(e.idCase||0),guid:e.guid,idWorkflow:parseInt(e.idWorkflow||0),idWorkitem:1==e.isOfflineForm?0:parseInt(e.idWorkItem||0),idTask:parseInt(e.idTask||0),eventAsTasks:e.eventAsTasks||!1,onlyUserWorkItems:e.onlyUserWorkItems||"true",formsRenderVersion:e.formsRenderVersion||0,referrer:e.referrer||"",isComplex:void 0!==e.isComplex,formsRenderVersion:2,onClose:e.onClose||"",isOfflineForm:e.isOfflineForm||!1,caseLink:e.caseLink};void 0!==t.guid&&0==t.idCase&&delete t.idCase;var i=!0;try{i=BIZAGI_SETTINGS.skipSubprocessGlobalForm||!0}catch(e){}return this.skipSubprocessGlobalForm="true"==i,t},getRoute:function(e){var t=this,i=new $.Deferred;if(t.params=e||t.params,e.data&&e.data.hasStartForm)i.resolve({module:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_START_FORM,moduleParams:{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_START_FORM,data:e.data}});else{var r=e.fromTask||e.idTask||"",a=e.fromWorkItemId||e.idWorkItem||"";$.when(t.getRenderVersion(t.params)).done(function(e){t.renderVersion=e,t.route.moduleParams=t.getRenderParams(t.params);var s={};s=void 0!==t.params.guid?{guid:t.params.guid,onlyUserWorkItems:t.params.onlyUserWorkItems,isOfflineForm:t.params.isOfflineForm,fromTask:r,fromWorkItemId:a}:{idCase:t.params.idCase,onlyUserWorkItems:t.params.onlyUserWorkItems,isOfflineForm:t.params.isOfflineForm,fromTask:r,fromWorkItemId:a},$.when(t.dataService.getWorkitems(s)).done(function(r){if(t.route.moduleParams.assignationEveryone={currentUserIsCurrentAsignee:r.currentUserIsCurrentAsignee||!1,enabledReadOnlyForAsigneeToEveryone:r.enabledReadOnlyForAsigneeToEveryone||!1,isAssignationMethodEveryone:r.isAssignationMethodEveryone||!1,canWorkOnThisTask:r.canWorkOnThisTask||!1},t.route.moduleParams.hasWorkItems=!!r.workItems.length,t.route.moduleParams.hasGlobalForm=bizagi.util.parseBoolean(r.hasGlobalForm),t.route.moduleParams.idWorkitem>0)t.setRenderModuleName(t.getRenderModuleName(e)),0==t.route.moduleParams.idTask&&(t.route.moduleParams.idTask=t.searchIdTask(t.route.moduleParams.idWorkitem)),t.route.moduleParams.radNumber=r.radNumber||"",t.route.moduleParams.idWorkflow=r.idWorkFlow||"",i.resolve(t.route),t.resetRouteInformation();else{var a=t.checkAsyncWorkItems(r);if(0==r.workItems.length)t.route.moduleParams.idWorkflow=r.idWorkFlow||"",t.route.moduleParams.radNumber=r.radNumber||"",""!==$.trim(r.msgTask)?i.resolve(t.routeToMessageForm(r.msgTask)):bizagi.util.parseBoolean(r.hasGlobalForm)?i.resolve(t.routeToGlobalForm(r)):i.resolve(t.routeToGlobalFormWithoutData());else if(1==r.workItems.length||a.length>0){var s=0;if(a.length>0)for(var o=0;o<r.workItems.length;o++)if("true"==r.workItems[o].isAsynch){s=o;break}t.route.moduleParams.guid,void 0!==r.workItems[s].guid?t.route.moduleParams.guid=r.workItems[s].guid:(t.route.moduleParams.idCase,t.route.moduleParams.idCase=r.workItems[s].idCase),t.route.moduleParams.idTask=r.workItems[s].idTask,t.route.moduleParams.fromTask=r.workItems[s].idTask,t.route.moduleParams.idWorkitem=r.workItems[s].idWorkItem,t.route.moduleParams.idWorkflow=r.workItems[s].idWorkFlow,t.route.moduleParams.displayName=r.workItems[s].displayName?r.workItems[s].displayName:"",t.route.moduleParams.radNumber=r.radNumber||"",a.length>0?t.setRenderModuleName(t.modules.async):t.setRenderModuleName(t.getRenderModuleName(e)),i.resolve(t.route),t.resetRouteInformation()}else r.checkProcess=!!(r.subProcesses.length>0&&t.skipSubprocessGlobalForm),r.checkWorkItems=r.workItems.length>1,r.fromSearchWidget="search"==t.params.referrer,t.setRenderModuleName(t.modules.activitySelector),t.route.moduleParams.data=r,i.resolve(t.route),t.resetRouteInformation()}}).fail(function(e){var r=bizagi.localization.getResource("workportal-menu-search-found-no-cases");i.resolve(t.routeToMessageForm(r))})})}return i.promise()},setRenderModuleName:function(e){this.route.module=e,this.route.moduleParams.widgetName=e},getRenderModuleName:function(e){return 1==e?this.modules.oldRender:this.modules.projectDashboard},searchIdTask:function(e,t){var i=0;e=e||[];for(var r=0;r<e.length;r++)if(parseInt(e[r].idWorkItem)==parseInt(t)){i=parseInt(e[r].idTask);break}return i},checkAsyncWorkItems:function(e){var t=[];return $.each(e.workItems,function(i){"true"==e.workItems[i].isAsynch&&t.push({idCase:e.idCase,idWorkitem:e.workItems[i].idWorkItem,idTask:e.workItems[i].idTask})}),t},routeToGlobalForm:function(e){var t=this;if(t.route.moduleParams.idCaseForGraphicQuery=t.route.moduleParams.idCase,t.route.moduleParams.idCase=$.isNumeric(e.idCaseForGlobalForm)&&e.idCaseForGlobalForm>0?e.idCaseForGlobalForm:t.route.moduleParams.idCase,t.route.moduleParams.idWorkflow=parseInt(e.idWorkFlow||0),1==t.renderVersion){var i=t.dataService.serviceLocator.getUrl("old-render")+"?PostBack=1&idCase=%s&idWorkitem=%s&idTask=%s",r=t.route.moduleParams.idCase||"",a=t.route.moduleParams.idWorkitem||"",s=t.route.moduleParams.idTask||"",o=printf(i,r,a,s);t.route.moduleParams.onlyUserWorkItems=t.route.moduleParams.idCase||"",t.setRenderModuleName(t.modules.oldRender),t.route.moduleParams.url=o}else t.setRenderModuleName(t.modules.projectDashboard);return t.route},routeToGlobalFormWithoutData:function(){return this.setRenderModuleName(this.modules.projectDashboard),this.route.moduleParams.withOutGlobalForm=!0,this.route},routeToMessageForm:function(e){var t=this;return e=e||"",t.setRenderModuleName(t.modules.projectDashboard),t.route.moduleParams.withOutGlobalForm=!0,t.route.moduleParams.messageForm=e,t.route},getRenderVersion:function(e){var t=new $.Deferred,i=e.formsRenderVersion||0;return 0!=i?t.resolve(i):$.when(this.dataService.getCaseFormsRenderVersion({idCase:e.idCase,guid:e.guid})).done(function(e){i=parseInt(e.formsRenderVersion),t.resolve(i)}),t.promise()}}),$.Class.extend("bizagi.workportal.controllers.controller",{},{init:function(e,t){this.workportalFacade=e,this.dataService=t,this.resources=bizagi.localization,this.componentContainers={},this.subscribers=[],this.disposed=!1,this.tmpl={},this.templatesDeferred=null},getWorkportal:function(){return this.workportalFacade.workportal},publish:function(e,t){return this.disposed?null:$(document).triggerHandler(e,t)},subscribe:function(e,t){if(this.disposed)return null;$(document).bind(e,t),this.subscribers.push({event:e})},subscribeOneTime:function(e,t){if(this.disposed)return null;$(document).one(e,t),this.subscribers.push({event:e})},unsubscribe:function(e,t){if(this.disposed)return null;t?$(document).unbind(e,t):$(document).unbind(e)},render:function(){var e=this,t=new $.Deferred;return e.renderingDeferred=new $.Deferred,$.when(e.areTemplatedLoaded()).pipe(function(){return e.renderContent()}).done(function(){e.postRender(),t.resolve(e.getContent()),e.renderingDeferred.resolve()}),t.promise()},getContent:function(){return this.content},getResource:function(e){return this.resources.getResource(e)},renderContent:function(){return""},postRender:function(){},getComponentSelector:function(e){return"[data-bizagi-component="+e+"]"},getComponentContainer:function(e){var t=this.getContent();return t&&0!=t.length?$(this.getComponentSelector(e),t):null},resizeLayout:function(){this.publish("resizeLayout")},performResizeLayout:function(){},dispose:function(){var e=this;null!=e.subscribers&&$.each(e.subscribers,function(t,i){e.unsubscribe(i.event)}),setTimeout(function(){bizagi.util.dispose(e),e.disposed=!0},bizagi.override.disposeTime||50)},loadTemplates:function(e){var t=this.templatesDeferred=new $.Deferred,i=[],r=null==e.useNewEngine||e.useNewEngine;for(var a in e)"useNewEngine"!=a&&i.push(this.loadTemplate({name:a,path:e[a],useNewEngine:r}));return $.when.apply($,i).done(function(){t.resolve()}),t.promise()},loadTemplate:function(e){var t=this;return t.tmpl[e.name]?t.tmpl[e.name]:e.useNewEngine?bizagi.templateService.getTemplateWidget(e.path).done(function(i){t.tmpl[e.name]=i}):bizagi.templateService.getTemplate(e.path).done(function(i){t.tmpl[e.name]=i})},getTemplate:function(e){return this.tmpl.hasOwnProperty(e)?this.tmpl[e]:null},isRendered:function(){return!!this.renderingDeferred&&this.renderingDeferred.promise()},areTemplatedLoaded:function(){return this.templatesDeferred}}),bizagi.workportal.controllers.controller.extend("bizagi.workportal.controllers.main",{},{init:function(e,t){var i=this;i.componentRegex=/{{component (\w+)}}/g,this._super(e,t),this.subscribe("changeWidget",function(e,t){bizagi.currentWidget=t.widgetName;var r=new $.Deferred;return i.subscribeOneTime("onWidgetIncludedInDOM",function(e,t){r.resolve()}),$.when(bizagi.util.liveSave(t.widgetName),bizagi.util.autoSave()).done(function(){$(document).data("auto-save",""),bizagi.util.liveProcessesEvents.saveEvent.saveLivePromise=null,t.widgetName!=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID&&t.widgetName!=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX||bizagi.cookie("bizagiDefaultWidget",t.widgetName,{expires:30}),bizagi.util.setContext({widget:t.widgetName}),i.setWidget(t)}),r.promise()}),this.subscribe("addDialogToDialogStack",function(e,t){i.addDialogToDialogStack(t)}),this.subscribe("showDialogWidget",function(e,t){i.showDialogWidget(t)}),this.subscribe("closeCurrentDialog",function(e,t){return i.closeCurrentDialog(t)}),this.subscribe("closeAllDialogs",function(e,t){i.closeAllDialogs()}),this.subscribe("popupWidget",function(e,t){i.popupWidget(t)}),this.subscribe("popWidget",function(e,t){i.popWidget(t)}),this.subscribe("pushWidget",function(e,t){i.pushWidget(t)}),this.subscribe("executeAction",function(e,t){i.executeAction(t)}),this.subscribe("resizeLayout",function(){i.performResizeLayout()}),this.subscribe("disposeWidget",function(){i.disposeWidget()}),this.subscribe("appendWidgetTo",function(e,t){return i.appendWidgetTo(t)}),this.subscribe("notification",function(e,t){NotificationDispatcher.dispatch(t.notification,t.type)}),this.subscribe("refreshQueryFormShortCut",function(e,t){return i.refreshQueryFormShortCut(t)})},renderContent:function(){var e=this,t=e.workportalFacade.getTemplate("workportal"),i=e.content=$.tmpl(t,{});e.workarea=e.workportalFacade.getWorkareaController();var r=e.menu=e.workportalFacade.getMenuController();return $.when(r.render()).done(function(){r.getContent().appendTo(e.getComponentContainer("menu"))}),$(window).resize(function(){e.resizeLayout()}),i},setWidget:function(e){this.currentWidget=e.widgetName,this.currentWidgetParams=$.extend({},e,{menu:this.getMenu()}),bizagi.assert(!bizagi.util.isEmpty(e.widgetName),"No widget name defined for changeWidget call"),this.renderWorkarea()},executeAction:function(e){var t=this;e.action==bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING?bizagi.loader.start("activity").then(function(){t.workportalFacade.getAction(e.action).execute(e)}):e.action==bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH&&bizagi.loader.start("inbox").then(function(){t.workportalFacade.getAction(e.action).execute(e)})},renderWorkarea:function(){var e=this,t=e.workarea;if(t){var i=e.getComponentContainer("workarea");e.cleanWidgets(),i.empty(),bizagi.util.isEmpty(e.currentWidget)||"none"==e.currentWidget||(e.currentWidgetParams=$.extend({},e.currentWidgetParams,{menu:e.getMenu()}),e.currentWidget===bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID||e.currentWidget===bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX?bizagi.loader.start("inbox").then(function(){e.loadWidgetFromFacade(t,i)}):e.loadWidgetFromFacade(t,i))}},loadWidgetFromFacade:function(e,t){var i=this;$.when(i.workportalFacade.getWidget(i.currentWidget,i.currentWidgetParams)).pipe(function(t){return e.setWidget(t),e.render()}).done(function(){var r=e.getContent();r&&(r.appendTo(t),i.resizeLayout(),i.publish("onWidgetIncludedInDOM"))})},showDialogWidget:function(e){},closeCurrentDialog:function(e){},popupWidget:function(e){},addDialogToDialogStack:function(e){},closeAllDialogs:function(){},pushWidget:function(e){this.currentWidget=e.widgetName,this.currentWidgetParams=$.extend({},e,{menu:this.getMenu()}),bizagi.assert(!bizagi.util.isEmpty(e.widgetName),"No widget name defined for pushWidget call")},popWidget:function(e){this.currentWidget=e.widgetName,this.currentWidgetParams=$.extend({},e,{menu:this.getMenu()}),bizagi.assert(!bizagi.util.isEmpty(e.widgetName),"No widget name defined for popupWidget call")},disposeWidget:function(e){this.currentWidget=e.widgetName,this.currentWidgetParams=$.extend({},e,{menu:this.getMenu()}),bizagi.assert(!bizagi.util.isEmpty(e.widgetName),"No widget name defined for disposeWidget call")},appendWidgetTo:function(e){},performResizeLayout:function(){var e=this,t=e.getContent();e.resizeContainer(t,$(window).height()),e.menu&&e.menu.performResizeLayout(),e.workarea&&e.workarea.performResizeLayout()},resizeContainer:function(e,t){var i=this,r=e.children(".ui-bizagi-component-adjustable"),a=t;if(r.length>0){var s=0;$.each(e.children(),function(e,t){$(t).hasClass("ui-bizagi-component-adjustable")||"none"===$(t).css("display")||(s+=$(t).height())}),a=t-s;var o="";$.each(r,function(e,t){"visible"==(o=""!=$(t).css("overflow-y")?$(t).css("overflow-y"):"hidden")&&(o="hidden"),$(t).addClass("ui-bizagi-adjustable");var i="auto"===$(t).css("margin-top")?0:Number($(t).css("margin-top").replace("px","")),r=a-i;$(t).css({height:r,"overflow-y":o})})}$.each(e.children(),function(e,t){$(t).find(".ui-bizagi-component-adjustable").length>0&&($(t).addClass("ui-bizagi-component-adjustable"),i.resizeContainer($(t),a))})},getMenu:function(){return this.menu},refreshQueryFormShortCut:function(e){}}),$.Class.extend("bizagi.workportal.webpart.helper",{},{init:function(e){this.dataService=e.dataService,this.resources=e.resources,this.workportalFacade=e.workportalFacade,this.templates={}},hideCasesColumn:function(e,t){for(i=0;i<e.columns.length;i++)if(e.columns[i].name==t){e.columns[i].visible=!1;break}return e},hideCasesColumn:function(e,t){for(i=0;i<e.columns.length;i++)if(e.columns[i].name==t){e.columns[i].visible=!1;break}return e},transformCasesInfo:function(e){var t=e.data,i=e.imageColumn,r={transformed:!0};if(t.transformed)return t;var a;r.columns=[{name:"id",displayName:"id",visible:!1}];for(var s=0;s<t.cases.columnTitle.length;s++){var o=t.cases.columnTitle[s];r.columns.push({name:o.fieldName,displayName:o.displayName,dataType:(a=o,a.fieldName==i?"upload":"I_idTask"==a.fieldName?"workitems":a.type)}),1==bizagi.util.parseBoolean(o.isOrdered)&&(r.orderBy=o.fieldName,r.orderType=0==o.orderType?"asc":"desc")}for(r.columns.push({name:"workitems",displayName:"workitems",visible:!1,dataType:"workitems"}),r.columns.push({name:"permissions",displayName:"permissions",visible:!1,dataType:"permissions"}),r.rows=[],s=0;s<t.cases.rows.length;s++){var n=t.cases.rows[s],d=[];d.push(n.id);for(var l=0;l<n.fields.length;l++)d.push(n.fields[l]);r.rows.push(d)}return r.totalPages=t.cases.totalPages,r.page=t.cases.page,r},drawGridView:function(e){var t=e.template,i=e.data;for(a=0;a<i.columns.length;a++)i.columns[a].visible=void 0===i.columns[a].visible||bizagi.util.parseBoolean(i.columns[a].visible),"upload"==i.columns[a].dataType&&(i.columns[a].visible=!1),"workitems"==i.columns[a].dataType&&(i.columns[a].visible=!1),"permissions"==i.columns[a].dataType&&(i.columns[a].visible=!1);0==i.orderType&&(i.orderType="asc"),1==i.orderType&&(i.orderType="desc"),i.orderBy=bizagi.util.isEmpty(i.orderBy)?"":i.orderBy,i.orderType=bizagi.util.isEmpty(i.orderType)?"asc":i.orderType,i.totalPages=bizagi.util.isEmpty(i.totalPages)?0:i.totalPages;for(var r=[],a=1;a<=i.totalPages;a++)r.push({number:a,active:a==i.page});return $.tmpl(t,$.extend(i,{pages:r,actions:e.actions,filters:e.filters,title:e.title,getCaseId:function(e){return e[0]},getEntityId:function(e){return e[0]},splitHeaderName:function(e){var t=e,i=e.split("_");return i.length>1&&(t=i[1]),t},getWorkItems:function(e){var t="[",i=e[e.length-2].workitems;if(i&&i.length>0)for(var r in i){r>0&&(t+=",");var a='{"idWorkItem":';a+=i[r].idWorkItem,a+=',"idTask":',a+=i[r].idTask,t+=a+="}"}return t+="]"}}))},drawThumbnailsView:function(e){var t=this,i=e.template,r=e.data;for(s=0;s<r.columns.length;s++)r.columns[s].visible=void 0===r.columns[s].visible||bizagi.util.parseBoolean(r.columns[s].visible),r.columns[s].name==e.imageLabelColumn&&(r.columns[s].dataType="imageLabel"),"workitems"==r.columns[s].dataType&&(r.columns[s].visible=!1);r.orderBy=bizagi.util.isEmpty(r.orderBy)?"":r.orderBy,r.orderType=bizagi.util.isEmpty(r.orderType)?"asc":r.orderType,r.totalPages=bizagi.util.isEmpty(r.totalPages)?0:r.totalPages;for(var a=[],s=1;s<=r.totalPages;s++)a.push({number:s,active:s==r.page});return $.tmpl(i,$.extend(r,{pages:a,getImage:function(e){return t.getFileImage(e)},actions:e.actions,getCaseId:function(e){return e[0]},getEntityId:function(e){return e[0]},getWorkItems:function(e){var t="[",i=e[e.length-1].workitems;if(i&&i.length>0)for(var r in i){r>0&&(t+=",");var a='{"idWorkItem":';a+=i[r].idWorkItem,a+=',"idTask":',a+=i[r].idTask,t+=a+="}"}return t+="]"}}))},getEmptyFile:function(){return"/_layouts/Proxy/jquery/overrides/css/desktop/images/EmptyAsset.png"},getFileImage:function(e){return e&&0!=e.length?e:this.getEmptyFile()},getFile:function(e){return e&&0!=e.length?this.dataService.getFile(e[0]):this.getEmptyFile()},removeWaitContainer:function(e){$(e)&&$(e).addClass("ui-bizagi-sharepoint-loading-container-hidden")},addWaitContainer:function(e){$(e)&&$(e).removeClass("ui-bizagi-sharepoint-loading-container-hidden")},loadTemplate:function(e,t){var i=this;return bizagi.templateService.getTemplate(t).done(function(t){i.templates[e]=t})},getFailServerErrorDeferred:function(e,t){var i,r=this,a=e.message,s="";-1!=e.sharepointProxyPrefix.indexOf("URL")?(s=e.sharepointProxyPrefix.substr(e.sharepointProxyPrefix.indexOf("URL")+4,e.sharepointProxyPrefix.length),i="bizagi.workportal.desktop.error-message-sharepoint"):i="bizagi.workportal.desktop.error-message-portal",a=s+": "+a,r.loadTemplate("error-message",bizagi.getTemplate(i)).done(function(i){var s=r.content=$.tmpl(i,{message:a,address:e.helpAddress});t.resolve(s)}).fail(function(e){t.resolve("<div>Unhandled error</div>")})},getPaginationTemplate:function(){return self.loadTemplate("pagination-template",bizagi.getTemplate("inbox-common-pagination-inbox"))},publishShowRenderEvent:function(e,t,i){e||alert("Event param cannot be undefined");var r=t.publish("ui-bizagi-can-change-activityform");r?r.done(function(){t.publish(e,i)}):console.log("autosave verification send error")},isWebpartInIFrame:function(){try{return window.self!==window.top}catch(e){return!0}},displayWebPartPopUpExternalIframe:function(e,t,i,r){t.workportal=null,t.canvas=null,t.postMessageEventName="postmessage-bizagi-openParentPopUp",t.webPartToDraw=e,t.iframeidentifier=r.iframeidentifier,r.send(JSON.stringify(t))},displayWebPartPopUpinIFrame:function(webpartName,params,callback){var webpartObject,mask=document.createElement("div");mask.className="containerPopUp",mask.style.height="100%";var popUpParams=params;function preClosePopUp(e,t){2===e.eventPhase&&closePopUp(e,t)}mask.addEventListener?mask.addEventListener("click",preClosePopUp,!1):mask.attachEvent("onclick",preClosePopUp);var canvas=document.createElement("div");canvas.className="activitiFormContainer";var closeCanvas=document.createElement("div");closeCanvas.className="closeCanvas",closeCanvas.addEventListener?closeCanvas.addEventListener("click",function(e,t){closePopUp(e,t)},!1):closeCanvas.attachEvent("onclick",function(e,t){closePopUp(e,t)}),canvas.appendChild(closeCanvas),mask.appendChild(canvas);var webpartCanvasDiv=document.createElement("div");webpartCanvasDiv.className="webpartCanvasDiv",webpartCanvasDiv.id="webpartCanvasPopUp",canvas.appendChild(webpartCanvasDiv);var pathiFrame="";pathiFrame=params.pathiFrame?params.pathiFrame:window.location.href.substring(0,window.location.href.indexOf("jquery"));var queryStringParams=window.location.toString().split("?")[1];pathiFrame+="jquery/webparts/desktop/portal/pages/webpart.htm",pathiFrame=pathiFrame+"?type="+webpartName,params.idCase&&(pathiFrame=pathiFrame+"&idCase="+params.idCase),params.idWorkitem&&(pathiFrame=pathiFrame+"&idWorkitem="+params.idWorkitem),params.idWfClass&&(pathiFrame=pathiFrame+"&idWfClass="+params.idWfClass),queryStringParams&&(pathiFrame=pathiFrame+"&"+queryStringParams),pathiFrame=pathiFrame+"&remoteServer="+window.location.toString();var iframe=document.createElement("iframe");function closePopUp(ev,params){var postmessageSocket=new bizagi.postmessage({remoteServer:pathiFrame,destination:iframe.contentWindow,origin:window});postmessageSocket.receive=function(msg){var params=eval("("+msg.data+")");"postmessage-bizagi-closeIFramePopUp"==params.postMessageEventName&&mask.parentNode&&(iframe.src=void 0,mask.parentNode.removeChild(mask),callback&&callback(this,popUpParams))};var iframeclosemsg={postMessageEventName:"postmessage-bizagi-canCloseIFramePopUp"};postmessageSocket.send(JSON.stringify(iframeclosemsg))}iframe.className="csswebpartIframePopUp",iframe.id="iframePopUp",iframe.src=pathiFrame,iframe.resizeInPopUp=function(e){var t=$(".activitiFormContainer").height()||0;$(iframe).height(t)},webpartCanvasDiv.appendChild(iframe),document.body.appendChild(mask),iframe.resizeInPopUp(params),$(window).resize(function(){iframe.resizeInPopUp(params)})},displayWebPartPopUp:function(e,t,i){var r,a=document.createElement("div");a.className="containerPopUp",a.style.height="100%";var s=t;function o(e,t){2===e.eventPhase&&n(e,t)}function n(e,t){r.canHide?$.when(r.canHide()).done(function(){a.parentNode.removeChild(a),i&&i(this,s),r.destroy()}).fail(function(){a.parentNode.removeChild(a),i&&i(this,s),r.destroy()}):(a.parentNode.removeChild(a),i&&i(this,s),r.destroy())}a.addEventListener?a.addEventListener("click",o,!1):a.attachEvent("onclick",o);var d=document.createElement("div");d.className="activitiFormContainer";var l=document.createElement("div");l.className="closeCanvas",l.addEventListener?l.addEventListener("click",function(e,t){n()},!1):l.attachEvent("onclick",function(e,t){n()}),d.appendChild(l),a.appendChild(d);var c=document.createElement("div");c.className="webpartCanvasDiv",c.id="webpartCanvasPopUp",d.appendChild(c);var p=$.extend({},t,{webpart:e,canvas:$(c),namespace:"PopUp",data:null,adjustButtonsToContent:!0});document.body.appendChild(a),bizagi.startWaiting(c),t.workportal.executeWebpart(p).done(function(e){r=e.webpart,l.onclick=function(e,t){}})},displayWebPartDialog:function(e,t,i){var r,a=t.dialogParams,s=document.createElement("div");s.className="activitiFormContainer";var o=document.createElement("div");o.className="webpartCanvasDiv",o.id="webpartCanvasPopUp",s.appendChild(o);var n=$.extend({},t,{webpart:e,canvas:$(o),namespace:"PopUp",data:null,adjustButtonsToContent:!0});t.workportal.executeWebpart(n).done(function(e){r=e.webpart,a.showCloseButton&&a.buttons.push({text:bizagi.localization.getResource("workportal-widget-dialog-box-close"),click:function(e,t){r.content.dialog("close")}}),r.content.dialog(a)})}}),bizagi="undefined"!=typeof bizagi?bizagi:{},bizagi.webparts=void 0!==bizagi.webparts?bizagi.webparts:{},bizagi.webparts.addConfigurationMessage=function(e,t){var i=this.ownerDocument,r=$("body",i),a=e.canvas||$("<div/>").appendTo(r),s=bizagi.getTemplate("bizagi.sharepoint.configurationerror");$.when(bizagi.templateService.getTemplate(s)).then(function(e){$.tmpl(e,{message:bizagi.localization.getResource(t)}).appendTo(a)})},bizagi="undefined"!=typeof bizagi?bizagi:{},bizagi.webpart=void 0!==bizagi.webpart?bizagi.webpart:{},bizagi.webpart.subscribe=function(e,t){$(document).bind(e,t)},bizagi.webpart.publish=function(e,t){return $(document).triggerHandler(e,t)},bizagi.webpart.whenCreated=function(e,t){bizagi.webpart.subscribe("bizagi-webpart-created",function(i){i.webpart.Class.fullname=="bizagi.workportal.webparts."+e&&t&&t(i)})},bizagi.webpart.whenExecuted=function(e,t){bizagi.webpart.subscribe("bizagi-webpart-executed",function(i){i.webpart.Class.fullname=="bizagi.workportal.webparts."+e&&t&&t(i)})},bizagi.workportal.controllers.controller.extend("bizagi.workportal.webparts.webpart",{},{init:function(workportalFacade,dataService,params){var self=this;this._super(workportalFacade,dataService,params),this.helper=new bizagi.workportal.webpart.helper(this),this.canvas=params.canvas,this.project=params.project,this.sharepointProxyPrefix=params.sharepointProxyPrefix,this.namespace=params.namespace,this.isVisible=!0,this.isWebpartInIFrame=void 0!==params.isWebpartInIFrame?params.isWebpartInIFrame:self.helper.isWebpartInIFrame(),this.adjustButtonsToContent=params.adjustButtonsToContent,this.remoteServer=params.remoteServer,this.remoteServer&&(self.postmessageSocket=new bizagi.postmessage({remoteServer:this.remoteServer,destination:window.parent,origin:window}),self.postmessageSocket.iframeidentifier=BIZAGI_IFRAME_IDENTIFIER,self.postmessageSocket.receive=function(msg){var params=eval("("+msg.data+")");if((!params.parameters||params.parameters.iframeidentifier!=BIZAGI_IFRAME_IDENTIFIER)&&params.postMessageEventName)switch(params.postMessageEventName){case"postmessage-bizagi-canCloseIFramePopUp":self.canHide&&self.Class.shortName==params.webPartDestine&&$.when(self.canHide()).done(function(){var e={postMessageEventName:"postmessage-bizagi-closeIFramePopUp",parameters:{}};e.parameters.iframeidentifier=BIZAGI_IFRAME_IDENTIFIER,self.postmessageSocket.send(JSON.stringify(e));var t={postMessageEventName:"ui-bizagi-reload-cases"};t.parameters=self.params||{},self.postmessageSocket.send(JSON.stringify(t))});break;case"postmessage-bizagi-openParentPopUp":break;default:self.publish(params.postMessageEventName,params.parameters,!0)}},self.sendDimensionsiFrame())},sendDimensionsiFrame:function(e){var t=this;if(t.remoteServer&&!t.adjustButtonsToContent&&(!t.namespace||e)&&t.isWebpartInIFrame&&t.canvas[0]){var i=t.canvas[0];i.attachEvent?i.onresize=function(){t.sendDimensionsiFramePostMessage()}:bizagi.addResizeListener(i,function(e){t.sendDimensionsiFramePostMessage()})}},sendDimensionsiFramePostMessage:function(){var e={};e.iframeName=BIZAGI_IFRAME_IDENTIFIER,e.iframeHeight=$("body").height(),"newcaselist"==this.Class.shortName?e.iframeWidth=$(document).width():e.iframeWidth=void 0,this.postmessageSocket.send(JSON.stringify(e))},publish:function(e,t,i){if(e=this.namespace?this.namespace+"."+e:e,!i&&-1==e.indexOf("bizagi-webpart-created")&&-1==e.indexOf("bizagi-webpart-executed")&&this.postmessageSocket){var r={};r.postMessageEventName=e,t&&(t.canvas=null,t.workportal=null),r.parameters=$.extend(t,{project:this.project,iframeidentifier:BIZAGI_IFRAME_IDENTIFIER}),this.postmessageSocket.send(JSON.stringify(r))}return this._super(e,$.extend(t,{project:this.project}))},subscribe:function(e,t){var i=this;e=this.namespace?this.namespace+"."+e:e,this._super(e,function(e,r){if(i.project==r.project&&i.isVisible)return t(e,r)})},unsubscribe:function(e,t){e=this.namespace?this.namespace+"."+e:e,this._super(e,t)},refresh:function(e){var t=this.getContent();t.empty(),this.prepareForRefresh(),$.when(this.render(e)).done(function(e){$.contains(window.document,t[0])?bizagi.util.replaceSelector($("body",window.document),t,e):($("#"+t.attr("id"),window.document).empty(),bizagi.util.replaceSelector($("body",window.document),"#"+t.attr("id"),e))})},render:function(e){var t=this;return t.params=e,e.creating?(t.content=t.empty(),t.publish("bizagi-webpart-created",{webpart:t}),t.content):$.when(t.renderContent(e)).pipe(function(i){return"string"==typeof i&&(i=$(i)),t.content=i,t.postRender(e),t.publish("bizagi-webpart-executed",{webpart:t}),t.sendDimensionsiFrame(),t.getContent()})},renderContent:function(e){},postRender:function(e){},getContent:function(){return this.content},empty:function(){return $("<div/>")},getTemplate:function(e){return this.workportalFacade.getTemplate(e)},createWebpart:function(e){return this.workportalFacade.workportal.createWebpart(e)},executeWebpart:function(e){return this.workportalFacade.workportal.executeWebpart(e)},manageError:function(e,t,i){var r=this,a="";if(-1==(a=e.responseText?e.responseText:e).indexOf("AUTHENTICATION_ERROR"))r.helper.getFailServerErrorDeferred({message:a,sharepointProxyPrefix:r.sharepointProxyPrefix},t),r.endWaiting(),i&&t.done(function(e){i.append(e),r.endWaiting()});else{var s=r.content="<div class='ui-bizagi-webpart-error-message'>The current user does not exist as a registered user in the bizagi project</div>";i&&i.append(s),r.endWaiting(),t.resolve(s)}},onWaiting:function(){bizagi.startWaiting(document.getElementById(this.canvas[0].id))},endWaiting:function(){this.canvas.children(".ui-bizagi-sharepoint-loading-container").remove()},hide:function(e){this.canvas.hide(),e&&this.canvas.parent().hide(),this.isVisible=!1},show:function(){this.canvas.show(),this.canvas.parent().show(),this.isVisible=!0},isVisible:function(){return this.isVisible},destroy:function(){},prepareForRefresh:function(){}}),$.Class.extend("bizagi.workportal.desktop.facade",{getWidgetImplementation:function(e){return void 0===bizagi.workportal.widgets||void 0===bizagi.workportal.widgets.widget?"":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INTEGRATION?"bizagi.workportal.widgets.integration":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX?"bizagi.workportal.widgets.inbox":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOME?"bizagi.workportal.widgets.home":e.toUpperCase()==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL.toUpperCase()?"bizagi.workportal.widgets.homeportal":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ACTIVITY?"bizagi.workportal.widgets.project.activity":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROJECT_DASHBOARD?"bizagi.workportal.widgets.homeportal":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADVANCE_SEARCH?"bizagi.workportal.widgets.advanceSearch":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID?"bizagi.workportal.widgets.inboxGrid":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ROUTING?"bizagi.workportal.widgets.routing":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDER?bizagi.override.enableProjectDashboard?"bizagi.workportal.widgets.project.activity":"bizagi.workportal.widgets.render":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_START_FORM?"bizagi.workportal.widgets.startForm":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_NEWCASE?"bizagi.workportal.widgets.newCase":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SUBMENU?"bizagi.workportal.widgets.subMenu":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ASYNC?"bizagi.workportal.widgets.async":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERIES?"bizagi.workportal.widgets.queries":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERIES_DEFINITION?"bizagi.workportal.widgets.queries.definition":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERIES_SHORTCUT?"bizagi.workportal.widgets.queries.shortcut":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM?"bizagi.workportal.widgets.queryform":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME?"bizagi.workportal.widgets.genericiframe":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH?"bizagi.workportal.widgets.search":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_FOLDERS?"bizagi.workportal.widgets.folders":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PRINT?"bizagi.workportal.widgets.print":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_FONTSIZE?"bizagi.workportal.widgets.fontsize":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION?"bizagi.workportal.widgets.oldrenderintegration":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PAGE?"bizagi.workportal.widgets.page":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ENTITIES?"bizagi.workportal.widgets.entities":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDERFORM?"bizagi.workportal.widgets.renderform":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS?"bizagi.workportal.widgets.reports":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS_MENU?"bizagi.workportal.widgets.reportsMenu":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS_CHART?"bizagi.workportal.widgets.reportsChart":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SMARTFOLDERS?"bizagi.workportal.widgets.smartfolders":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASES?"bizagi.workportal.widgets.admin.cases":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ASYNCECM_UPLOAD?"bizagi.workportal.widgets.asyncecm.upload":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ACTIVITY_LOG?"bizagi.workportal.widgets.activity.log":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_AUTHENTICATION_LOG?"bizagi.workportal.widgets.authentication.log":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENCRYPT_PASSWORDS?"bizagi.workportal.widgets.admin.encrypt.passwords":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_REQUESTS?"bizagi.workportal.widgets.admin.users.requests":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASE_SEARCH?"bizagi.workportal.widgets.admin.caseSearch":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_HOLIDAYS?"bizagi.workportal.widgets.admin.holidays":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROJECTNAME?"bizagi.workportal.widgets.admin.projectName":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_OAUTH2APPLICATIONS?"bizagi.workportal.widgets.admin.oauth2Applications":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROCESS_TREE?"bizagi.workportal.widgets.processtree":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ENTITIES_TREE?"bizagi.workportal.widgets.entitiestree":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_USERS_TABLE?"bizagi.workportal.widgets.userstable":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_DEFAULTS_ASSIGNATION_USER?"bizagi.workportal.widgets.admin.defaults.assignation.user":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_USERS_MODAL?"bizagi.workportal.widgets.users.modal":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PROFILES?"bizagi.workportal.widgets.admin.user.profiles":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ASYNC_ACTIVITIES?"bizagi.workportal.widgets.admin.async.activities":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ALARMS?"bizagi.workportal.widgets.admin.alarms":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_LICENSES?"bizagi.workportal.widgets.admin.user.licenses":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_DIMENSIONS?"bizagi.workportal.widgets.admin.dimensions":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_DOCUMENT_TEMPLATES?"bizagi.workportal.widgets.admin.document.templates":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROCESSES?"bizagi.workportal.widgets.admin.processes":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES?"bizagi.workportal.widgets.admin.business.policies":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_DECISION_TABLE?"bizagi.workportal.widgets.admin.business.policies.decision.table":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_RULES?"bizagi.workportal.widgets.admin.business.policies.rules":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_TABS?"bizagi.workportal.widgets.admin.business.policies.tabs":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_POLITICS?"bizagi.workportal.widgets.admin.business.policies.politics":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_VOCABULARIES?"bizagi.workportal.widgets.admin.business.policies.vocabularies":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_TREE?"bizagi.workportal.widgets.tree":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_LANGUAGE?"bizagi.workportal.widgets.admin.language":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENTITIES?"bizagi.workportal.widgets.admin.entities":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GRAPHIC_QUERY?"bizagi.workportal.widgets.graphicquery":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REASSIGN_CASE?"bizagi.workportal.widgets.reassigncase":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_ADMINISTRATION?"bizagi.workportal.widgets.admin.usersAdministration":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION?"bizagi.workportal.widgets.admin.usersDelegation":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION_SEARCH_USER?"bizagi.workportal.widgets.admin.usersDelegation.searchUser":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_STAKEHOLDERS?"bizagi.workportal.widgets.admin.stakeholders":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_PREFERENCES?"bizagi.workportal.widgets.admin.preferences":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_DISPLAY_OPTIONS?"bizagi.workportal.widgets.admin.displayOptions":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_START_PROCESS?"bizagi.workportal.widgets.createcase":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROJECT_PROCESS_MAP?"bizagi.workportal.widgets.project.processMap":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROJECT_PROCESS_DIAGRAM_HELPER?"bizagi.workportal.widgets.project.processDiagram.helper":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROJECT_ACTIVITY_MAP_TOOLTIP?"bizagi.workportal.widgets.project.activityMap.tooltip":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROJECT_USERSUMMARY?"bizagi.workportal.widgets.usersummary":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_MYSEARCHLIST?"bizagi.workportal.widgets.mySearchList":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_LOADFORM?"bizagi.workportal.widgets.loadForm":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_TEMPLATE_ENGINE?"bizagi.workportal.widgets.templates":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_DIALOGNAV?"bizagi.workportal.widgets.dialognav":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROCESS_MODELER_VIEW?"bizagi.workportal.widgets.processmodeler":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_TIMELINE?"bizagi.workportal.widgets.project.timeline":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_PROCESSES?"bizagi.workportal.widgets.admin.adhoc.processes":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_ENTITIES?"bizagi.workportal.widgets.admin.adhoc.entities":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_USER_GROUPS?"bizagi.workportal.widgets.admin.adhoc.usergroup":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_BOOLEAN_EXP?"bizagi.workportal.widgets.admin.adhoc.booleanexp":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADHOC_CREATE_PROCESS?"bizagi.workportal.widgets.adhoc.create.process":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROFLY?"bizagi.workportal.widgets.profly":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SESSION_TIMEOUT?"bizagi.workportal.widgets.sessionTimeout":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SESSION_TIMEOUT_EXPIRED?"bizagi.workportal.widgets.sessionTimeoutExpired":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_USER_PRIVACY?"bizagi.workportal.widgets.user.privacy":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ACCESS_DENIED?"bizagi.workportal.widgets.accessDenied":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICES?"bizagi.workportal.widgets.admin.business.polices":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_TRANSFER_CASE_SECURITY_PERMISSIONS?"bizagi.workportal.widgets.admin.transfer.case.security.permissions":null}},{init:function(e,t){this.templates={},this.workportal=e,this.dataService=t,this.getWorkPortalVersion(),bizagi.injector.registerInstance("workportalFacade",this)},getWorkportal:function(){return this.workportal},initAsyncStuff:function(e){var t=this;if(bizagi.enableCustomizations){return $.when(bizagi.templateService.loadCustomTemplates().pipe(function(i){return e?t.loadTemplates():i}),this.loadPersonalizedTheme(),bizagi.util.loadFile({src:bizagi.getJavaScript("bizagi.workportal.desktop.overrides"),type:"js"})).done(function(e,t,i){bizagi.util.loadFile({src:bizagi.getStyleSheet("bizagi.overrides.desktop.custom.styles"),type:"css"})})}return e?$.when(t.loadTemplates()):null},loadTemplates:function(){var e=this,t=new $.Deferred;return $.when(e.loadTemplate("workportal",bizagi.getTemplate("bizagi.workportal.desktop")),e.loadTemplate("workportal.notCompatibleIE",bizagi.getTemplate("bizagi.workportal.desktop.notCompatibleIE")),e.loadTemplate("menu",bizagi.getTemplate("bizagi.workportal.desktop.menu")+"#ui-bizagi-workportal-widget-menu"),e.loadTemplate("menu.custom-button",bizagi.getTemplate("bizagi.workportal.desktop.menu")+"#ui-bizagi-workportal-widget-menu-custom-button"),e.loadTemplate("menu.security",bizagi.getTemplate("bizagi.workportal.desktop.menu")+"#ui-bizagi-workportal-widget-menu-permissions"),e.loadTemplate("menu.submenu",bizagi.getTemplate("bizagi.workportal.desktop.menu")+"#ui-bizagi-workportal-widget-menu-submenu"),e.loadTemplate("menu.submenu.container",bizagi.getTemplate("bizagi.workportal.desktop.menu")+"#ui-bizagi-workportal-widget-menu-submenu"),e.loadTemplate("menu.submenu.list",bizagi.getTemplate("bizagi.workportal.desktop.menu")+"#ui-bizagi-workportal-widget-menu-submenu-list"),e.loadTemplate("popup",bizagi.getTemplate("bizagi.workportal.desktop.popup")),e.loadTemplate("menu.modal.widgets",bizagi.getTemplate("bizagi.workportal.desktop.menu.modal.widgets")),e.loadTemplate("menu.modal.user",bizagi.getTemplate("bizagi.workportal.desktop.menu.modal.user")),e.loadTemplate("menu.modal.about",bizagi.getTemplate("bizagi.workportal.desktop.menu.modal.about")),e.loadTemplate("menu.modal.qr",bizagi.getTemplate("bizagi.workportal.desktop.menu.modal.qr")),e.loadTemplate("inbox-common-pagination-grid",bizagi.getTemplate("bizagi.workportal.desktop.widget.inbox.common")+"#ui-bizagi-workportal-widget-inbox-common-pagination-grid"),e.loadTemplate("inbox-common-pagination-inbox",bizagi.getTemplate("bizagi.workportal.desktop.widget.inbox.common")+"#ui-bizagi-workportal-widget-inbox-common-pagination-inbox"),e.loadTemplate("inbox-common-header",bizagi.getTemplate("bizagi.workportal.desktop.widget.inbox.common")+"#ui-bizagi-workportal-widget-inbox-common-header"),e.loadTemplate("inbox-common-header-folders",bizagi.getTemplate("bizagi.workportal.desktop.widget.inbox.common")+"#ui-bizagi-workportal-widget-inbox-folders"),e.loadTemplate("inbox-common-case-summary-oldrender",bizagi.getTemplate("bizagi.workportal.desktop.widget.inbox.common")+"#ui-bizagi-workportal-widget-inbox-common-oldrender"),e.loadTemplate("loadForm",bizagi.getTemplate("bizagi.workportal.desktop.widget.loadForm")+"#ui-bizagi-workportal-widget-loadForm"),e.loadTemplate("print-frame",bizagi.getTemplate("bizagi.workportal.desktop.widget.print")+"#bz-wp-widget-print-frame"),e.loadTemplate("print-frame-header",bizagi.getTemplate("bizagi.workportal.desktop.widget.print")+"#bz-wp-widget-print-frame-header"),e.loadTemplate("render",bizagi.getTemplate("bizagi.workportal.desktop.widget.render")+"#ui-bizagi-workportal-widget-render"),e.loadTemplate("search",bizagi.getTemplate("bizagi.workportal.desktop.widget.search")+"#ui-bizagi-workportal-widget-search"),e.loadTemplate("info-message",bizagi.getTemplate("common.bizagi.desktop.info-message")),e.loadTemplate("bizagi.workportal.desktop.upload.dialog",bizagi.getTemplate("bizagi.workportal.desktop.upload.dialog")),e.loadTemplate("bizagi.workportal.desktop.fileupload.form",bizagi.getTemplate("bizagi.workportal.desktop.fileupload.form"))).done(function(){t.resolve()}),t.promise()},loadTemplate:function(e,t){var i=this;return bizagi.templateService.getTemplate(t).done(function(t){i.templates[e]=t})},loadTemplateWebpart:function(e,t){var i=this;return bizagi.templateService.getTemplateWebpart(t).done(function(t){i.templates[e]=t})},getTemplate:function(e){return this.templates[e]},getMainController:function(){return new bizagi.workportal.controllers.main(this,this.dataService)},getMenuController:function(){return new bizagi.workportal.controllers.menu(this,this.dataService)},getWorkareaController:function(){return new bizagi.workportal.controllers.workarea(this,this.dataService)},getWidget:function(widget,params){var self=this,widgetImplementation=this.Class.getWidgetImplementation(widget);if(widgetImplementation)try{var dynamicFunction="var baDynamicFn = function(facade, dataService, params){ \r\n";return dynamicFunction+="return new "+widgetImplementation+"(facade, dataService, params);\r\n",dynamicFunction+="}\r\n",dynamicFunction+="baDynamicFn",dynamicFunction=eval(dynamicFunction),dynamicFunction(this,this.dataService,params)}catch(e){}else{var defer=new $.Deferred,webpart=bizagi.getWebpart(widget);if(webpart){var loadTheme=function(){return void 0!==bizagi.theme?self.loadPersonalizedTheme():""};return $.when(loadTheme(),bizagi.util.initWebpart(webpart)).done(function(){defer.resolve(new bizagi.workportal.widgets.webpart(self,self.dataService,$.extend(params,{webpart:widget})))}),defer.promise()}}return bizagi.log(widget+" widget not supported",params,"error"),null},getAction:function(e,t){return e==bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING?new bizagi.workportal.actions.routing(this,this.dataService,t):e==bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH?new bizagi.workportal.actions.search(this,this.dataService,t):(bizagi.log(e+" action not supported",t,"error"),null)},loadWebpart:function(e){var t=this,i=new $.Deferred,r=e.webpart,a=bizagi.getWebpart(r);return a||bizagi.webparts.addConfigurationMessage(e,"bizagi-sharepoint-loading-webpart-error"),$.when(bizagi.util.initWebpart(a)).done(function(){$.when.apply(this,$.map(a.tmpl,function(e){return t.loadTemplateWebpart(e.originalAlias,bizagi.getTemplate(e.alias,!0))})).done(function(){i.resolve()})}),i.promise()},getWebpart:function(webpartName,params){var webpart=bizagi.getWebpart(webpartName),webpartImplementation=webpart.class;if(webpartImplementation)try{var dynamicFunction="var baDynamicFn = function(facade, dataService, params){ \r\n";return dynamicFunction+="return new "+webpartImplementation+"(facade, dataService, params);\r\n",dynamicFunction+="}\r\n",dynamicFunction+="baDynamicFn",dynamicFunction=eval(dynamicFunction),dynamicFunction(this,this.dataService,params)}catch(e){bizagi.log(e)}return bizagi.log(webpartName+" webpart not supported",params,"error"),null},getLogo:function(e){var t="";try{var i=JSON.parse(e);t=i.inbox}catch(i){t=e}return t},loadPersonalizedTheme:function(){var e=this;if("undefined"==typeof Windows){var t=$.Deferred();return $.when(e.dataService.getCurrentTheme()).done(function(i){if(i=i||[],bizagi.themeLogo=e.getLogo(i.logo)||"img/img/barra/logo-bizagi.svg",$("#ui-bizagi-wp-app-menu-logo-client img").attr("src",bizagi.themeLogo),i.css){if(bizagi.theme=i,bizagi.theme.value)try{bizagi.theme.value=JSON.parse(bizagi.theme.value)}catch(e){}for(var r,a=$('head link [rel="stylesheet"]'),s=0;s<a.length;s++){if(-1!=$(a[s]).attr("href").indexOf("bizagi.custom.styles.css")){r=$(a[s]);break}}r?$('<style id="bizagi-theme">'+i.css+"</style>").insertBefore(r):$("head").append('<style id="bizagi-theme">'+i.css+"</style>")}t.resolve()}),t.promise()}},getWorkPortalVersion:function(){bizagi.setWorkPortalVersion(bizagi.loader.version),sessionStorage.setItem("bizVersion",bizagi.loader.version),sessionStorage.setItem("bizBasePath",bizagi.loader.basePath)}}),bizagi="undefined"!=typeof bizagi?bizagi:{},bizagi.override=void 0!==bizagi.override?bizagi.override:{},bizagi.override.customWorkportalHandlers={},bizagi.override.customizeWorkportalHandler=function(e,t){bizagi.override.customWorkportalHandlers[e]=t},bizagi.workportal.services.context&&(bizagi.workportal.services.context.original=$.extend(!0,{},bizagi.workportal.services.context.prototype),$.extend(bizagi.workportal.services.context.prototype,{getUrl:function(e){return"workportal"==this.context&&bizagi.override.customWorkportalHandlers[e]?bizagi.override.customWorkportalHandlers[e]:bizagi.workportal.services.context.original.getUrl.apply(this,arguments)}})),bizagi.override.customizeWorkportalWidget=function(widget,extensionMethod){var widgetImplementation=bizagi.workportal.desktop.facade.getWidgetImplementation(widget);widgetImplementation&&eval(widgetImplementation).extend(widgetImplementation,{},{postRender:function(){this._super();var e=this.getContent();extensionMethod&&extensionMethod(this,e)}})},bizagi.override.customButtons=[],bizagi.override.addCustomMenuButton=function(e){bizagi.override.customButtons.push(e)},bizagi.workportal.controllers.menu&&(bizagi.workportal.controllers.menu.original=$.extend(!0,{},bizagi.workportal.controllers.menu.prototype),$.extend(bizagi.workportal.controllers.menu.prototype,{postRender:function(){var e=this,t=e.workportalFacade.getTemplate("menu.custom-button");return $.when(bizagi.workportal.controllers.menu.original.postRender.apply(this,arguments)).pipe(function(i){var r=$("[data-bizagi-component=menuItems]",i);return $.each(bizagi.override.customButtons,function(i,a){if("function"!=typeof a.isAvailable||a.isAvailable()){var s=$.tmpl(t,a);null==a.submenu?s.click(function(){a.click&&a.click(e)}):s.click(function(){e.renderSubMenu(s,a.submenu,a.click)}),r.append(s)}}),i})}})),bizagi.override.addDataService=function(e,t){if(bizagi.workportal.services.service){bizagi.workportal.services.service.original=$.extend(!0,{},bizagi.workportal.services.service.prototype);var i={};i[e]=t,$.extend(bizagi.workportal.services.service.prototype,i)}},$.Class.extend("bizagi.workportal.device.factory",{},{init:function(e){this.device=bizagi.util.detectDevice(),this.workportal=e,this.cachedFacade=null},getWorkportalFacade:function(e,t){var i=this,r=new $.Deferred;return t=void 0===t||t,null!=i.cachedFacade?r.resolve(i.cachedFacade):"desktop"==this.device?$.when(i.getDesktopWorkportalFacade(e,t)).done(function(e){i.cachedFacade=e,r.resolve(e)}):"tablet"==this.device||"tablet_ios"==this.device||"tablet_android"==this.device?$.when(i.getTabletWorkportalFacade(e,t)).done(function(e){i.cachedFacade=e,r.resolve(e)}):"smartphone_ios"==this.device||"smartphone_android"==this.device?$.when(i.getSmartphoneWorkportalFacade(e,t)).done(function(e){i.cachedFacade=e,r.resolve(e)}):(alert("Not supported device: "+this.device),r.resolve("")),r.promise()},getDesktopWorkportalFacade:function(e,t){var i=$.Deferred(),r=new bizagi.workportal.desktop.facade(this.workportal,e);return $.when(r.initAsyncStuff(t)).done(function(){i.resolve(r)}),i.promise()},getTabletWorkportalFacade:function(e){var t=new $.Deferred,i=new bizagi.workportal.tablet.facade(this.workportal,e);return i.initAsyncStuff().done(function(){t.resolve(i)}),t.promise()},getSmartphoneWorkportalFacade:function(e){var t=new $.Deferred,i=new bizagi.workportal.smartphone.facade(e);return i.initAsyncStuff().done(function(){t.resolve(i)}),t.promise()},getDataService:function(){return this.dataService}}),bizagi.workportal=bizagi.workportal||{},bizagi.workportal.currentInboxView||(bizagi.workportal.currentInboxView="inbox"),bizagi.workportal.state=bizagi.workportal.state||{},$.Class.extend("bizagi.workportal.facade",{},{init:function(e){this.deviceFactory=new bizagi.workportal.device.factory(this),this.dataService=new bizagi.workportal.services.service(e),this.dataService.routing=new bizagi.workportal.services.routing({dataService:this.dataService}),this.defaultParams=e||{},this.timeoutID},loadDefaultWidget:function(){if(!this.defaultWidget&&!bizagi.util.isEmpty(window.location.hash)){var e=bizagi.util.getHashParams();"/"!=e[0]&&(this.defaultWidget=e[0])}if(!this.defaultWidget&&!bizagi.util.isEmpty(window.location.search)){var t=bizagi.util.getQueryString();"activityform"!==t.widget&&"activityform"!==this.defaultParams.widget||bizagi.util.isMobileDevice()?this.defaultWidget=t.widget:(this.defaultWidget="projectDashboard",this.defaultParams.caseLink=!0)}this.defaultWidget||bizagi.util.isEmpty(this.defaultParams.widget)||(this.defaultWidget=this.defaultParams.widget),this.defaultWidget||"undefined"==typeof BIZAGI_DEFAULT_WIDGET||bizagi.util.isEmpty(BIZAGI_DEFAULT_WIDGET)||(this.defaultWidget=BIZAGI_DEFAULT_WIDGET),!this.defaultWidget&&bizagi.cookie("bizagiDefaultWidget")&&(this.defaultWidget=bizagi.cookie("bizagiDefaultWidget")),this.defaultWidget||(this.defaultWidget="smartphone_ios"==bizagi.util.detectDevice()||"smartphone_android"==bizagi.util.detectDevice()?bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID),"projectDashboard"!==this.defaultWidget&&"homeportal"!==this.defaultWidget&&bizagi.cookie("bizagiDefaultWidget",this.defaultWidget,{expires:30}),"homeportal"===this.defaultWidget&&bizagi.cookie("bizagiDefaultWidget",bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID,{expires:30}),this.dataService&&!this.dataService.online&&bizagi.util.isTabletDevice()&&bizagi.cookie("bizagiDefaultWidget",bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX,{expires:30})},execute:function(e){var t=this,i=this.ownerDocument,r=$("body",i);return e=e||$("<div/>").appendTo(r),t.loadDefaultWidget(),t.executionDeferred=new $.Deferred,t.process().done(function(i){bizagi.util.replaceSelector(r,e,i),t.executionDeferred.resolve()})},createWebpart:function(e){return this.executeWebpart($.extend(e,{creating:!0}))},testWebpartConfiguration:function(e){var t=e.webpartConfiguration,i=this.ownerDocument,r=$("body",i);e.canvas||$("<div/>").appendTo(r);return!(!t.url||""==t.url)||(bizagi.webparts.addConfigurationMessage(e,"bizagi-sharepoint-configuration-error"),!1)},executeWebpart:function(e){var t=this.ownerDocument,i=$("body",t),r=e.canvas||$("<div/>").appendTo(i),a=!0;if(e.webpartConfiguration&&(a=this.testWebpartConfiguration(e)),a)return this.processWebpart(e).done(function(e){r.append(e.content)})},ready:function(){return this.executionDeferred.promise()},process:function(){var e=this,t=new $.Deferred,i=this.deviceFactory.getWorkportalFacade(e.dataService);return e.processOfflineData(),$.when(i).pipe(function(t){return e.processWorkportal(t)}).done(function(e){t.resolve(e)}),t.promise()},processOfflineData:function(){var e=this;void 0!==e.dataService.fetchOfflineData&&1==e.dataService.online&&$.when(e.dataService.pushOfflineData()).always(function(){e.dataService.fetchOfflineData()})},processWebpart:function(e){var t,i,r=new $.Deferred;bizagi.detectRealDevice();return t=this.deviceFactory.getWorkportalFacade(this.dataService,!1),$.extend(e,this.defaultParams),$.when(t).pipe(function(t){var i=new $.Deferred;return $.when(t.loadWebpart(e)).done(function(){i.resolve(t)}),i.promise()}).pipe(function(t){return(i=t.getWebpart(e.webpart,e)).render(e)}).done(function(e){r.resolve({webpart:i,content:e})}),r.promise()},processWorkportal:function(e){var t=this,i=this.mainController=e.getMainController();new $.Deferred;return i.render().then(function(e){return $.when(i.menu.isRendered()).then(function(){var e=t.getWidgetByDataUser(t.defaultParams);if("projectDashboard"===e&&t.defaultParams.caseLink){var r={action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:bizagi.util.getQueryString().idCase,guid:bizagi.util.getQueryString().guid,caseLink:!0};void 0!==bizagi.util.getQueryString().idWorkitem&&(r.idWorkItem=bizagi.util.getQueryString().idWorkitem),i.publish("executeAction",r)}else i.setWidget($.extend(t.defaultParams,{widgetName:e},bizagi.util.getQueryString()));i.menu&&(i.menu.performResizeLayout(),e!==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX&&e!==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID||t.mainController.publish("showMainMenu"))}),e})},getWidgetByDataUser:function(){var e=this,t=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID,i="projectDashboard"!==e.defaultWidget?bizagi.cookie("bizagiDefaultWidget"):"projectDashboard",r="",a=JSON.parse(bizagi.cookie("bizagiUserDisplayOptions"));if(a&&a.startPage)r={key:"userstartpage",value:a.startPage};else if(bizagi.currentUser.sUserProperties)for(var s=0,o=bizagi.currentUser.sUserProperties.length;s<o;s++)if("userstartpage"===bizagi.currentUser.sUserProperties[s].key){r=bizagi.currentUser.sUserProperties[s];break}return i!=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX&&i!=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID&&i!=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL?t=i:void 0===r||""===r||""===r.value||"1"===r.value?t=e.getWidgetByCookieAndStakeholders():"2"===r.value&&e.currentUserHaveStakeholderAssociated()?t=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL:"2"!==r.value||e.currentUserHaveStakeholderAssociated()?"3"===r.value&&(t=e.getWidgetByCookie(!0)):t=e.getWidgetByCookie(!0),t},getWidgetByCookieAndStakeholders:function(){return this.getWidgetByCookie(!1)},currentUserHaveStakeholderAssociated:function(){return bizagi.currentUser.associatedStakeholders&&bizagi.currentUser.associatedStakeholders.length>0},getWidgetByCookie:function(e){var t=bizagi.cookie("bizagiDefaultWidget");return e?t===bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX||t===bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID?t:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID:this.currentUserHaveStakeholderAssociated()?bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL:t&&t===bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX||t===bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID?t:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID},getMainController:function(){return this.mainController}}),$.Class.extend("bizagi.workportal.observable",{},{init:function(){this.observableElement=$({})},sub:function(e){var t=$._data(this.observableElement[0],"events");t&&t[e]||this.observableElement.on.apply(this.observableElement,arguments)},unsub:function(){this.observableElement.off.unbind?this.observableElement.off.unbind.apply(this.observableElement,arguments):this.observableElement.off.apply(this.observableElement,arguments)},pub:function(){return this.observableElement.triggerHandler.apply(this.observableElement,arguments)}}),bizagi.workportal.observable.extend("bizagi.workportal.widgets.manager",{createCase:"bizagi.workportal.widgets.createcase",updateForm:"bizagi.workportal.widgets.updateform"},{init:function(e,t,i,r){var a=this;a._super(),a._facade=e||null,a._dataService=t||null,a._notify=i,a._widgets={},a._innerWidgets={},a._mainWidgets={},a._context="none",a._layouts=[],a._supportNav=r&&r.supportNav,a._facade.workportal.mainController.subscribe("changeWidget",$.proxy(a._cleanOnChangeWidget,a))},_notifyChange:function(e,t){if("navigate"!=t.type)return this.pub("notifyChange",t);this.updateView(t.args)},_cleanOnChangeWidget:function(){this.clean()},_showDialogWidget:function(e,t){var i=new $.Deferred,r=this.Class[t.widgetName],a=new bizagi.workportal.desktop.widgets.dialog(this._dataService,this._facade);return t.widgetInstance=this._createWidgetInstance(r,t),t.widgetInstance.sub("closeDialog",function(e,t){a.close(),i.resolve(t)}),a.renderWidget(t),i.promise()},_showNotification:function(e,t){var i=t.type;"message"==i?this._notify.showSucessMessage(t.message,t.title,t.options):"error"==i&&this._notify.showErrorMessage(t.message,t.title,t.options)},_render:function(e,t,i){var r=this,a=r._widgets[e],s=a.widget[t],o=a.canvas,n=new $.Deferred;if(i||!s.isRendered()||!s.getContent().is(":visible"))return o.empty(),$(o).startLoading(),s.clean(),$.when(s.render()).pipe(function(e){return r._renderInnerWidgets(s,e)}).done(function(e){$(o).endLoading(),o.append(e),n.resolve()}),n.promise()},_renderInnerWidgets:function(e,t){var i=new $.Deferred,r=[];for(var a in e.innerWidgets){var s=e.innerWidgets[a];s.clean(),r.push($.when(s.render(),s.canvas).done(function(e,i){var r=t.find('.ui-bizagi-layout[layout="'+i+'"]');0==r.length&&(r=t.closest('.ui-bizagi-layout[layout="'+i+'"]')),r.empty(),r.append(e)}))}return $.when.apply($,r).done(function(){i.resolve(t)}),i.promise()},_createWidgetInstance:function(e,t,i){var r=this,a=i?bizagi.injector.getNewInstance(e,t):bizagi.injector.get(e,t);return a.sub("notify",$.proxy(r._notifyChange,r)),a.sub("showDialogWidget",$.proxy(r._showDialogWidget,r)),a.sub("showNotification",$.proxy(r._showNotification,r)),a},_changeWidget:function(e){var t=this,i=e.layout,r=e.widgetName,a=e.refresh,s=e.args,o=t._widgets[i],n=e.newInstance||!1;if(o.widget[r])t._innerWidgets[i]&&(d=o.widget[r],t._createInnerWidgets(i,d,s));else{var d=t._createWidgetInstance(r,s,n);t._createInnerWidgets(i,d,s),o.widget[r]=d}return o.active=r,t._render(i,r,a)},_createInnerWidgets:function(e,t,i){for(var r=this._innerWidgets[e]||[],a=t.innerWidgets||{},s=0,o=r.length;s<o;s++){var n=r[s],d=a[n.canvas];d?(d.clean(),(d=this._createWidgetInstance(n.widgetName,i,!0)).canvas=n.canvas,a[n.canvas]=d):((d=this._createWidgetInstance(n.widgetName,i)).canvas=n.canvas,a[n.canvas]=d)}t.innerWidgets=a},_supportNavigation:function(){return this._supportNav},_setContext:function(e){this._context=e},_isSameContext:function(e){return this._context==e},necesaryClean:function(){var e=this._widgets.content;if(null!=e){var t=e.widget["bizagi.workportal.widgets.project.content.dashboard"];if(null!=t){var i=t.innerWidgets.contentprincipal;null!=i&&i.clean()}}},emit:function(e){var t=this._widgets,i=[],r=e.context;for(var a in t){var s=t[a];if(!$.isEmptyObject(s.widget)){var o=s.widget[s.active],n=o.pub(r,e);for(var d in void 0!==n&&i.push(n),o.innerWidgets)void 0!==(n=o.innerWidgets[d].pub(r,e))&&i.push(n)}}return i},emitNavigate:function(e){var t=this._widgets.navigator,i=e.args||{};if(t){var r=t.widget[t.active];r&&!i.isRefresh&&$.when(r.isRendered()).done(function(){r.pub("NAVIGATE",e)})}},_searchWidgets:function(e){var t=this;for(var i in delete t._innerWidgets,t._innerWidgets={},delete t._mainWidgets,t._mainWidgets={},e){var r=e[i];if(-1==t._layouts.indexOf(r.layout)){var a=e[r.layout];t._innerWidgets[a.layout]=t._innerWidgets[a.layout]||[],t._innerWidgets[a.layout].push({widgetName:r.name,canvas:r.canvas,refresh:null==r.refresh||r.refresh})}else t._mainWidgets[r.layout]={widgetName:r.name,refresh:null==r.refresh||r.refresh,newInstance:null!=r.newInstance&&r.newInstance}}},updateView:function(e){var t=this,i=e.data,r=e.context,a=e.args||{},s=new $.Deferred,o=i.widgets;if(t._isSameContext(r)&&!a.refreshAllWidgets){e.args.refreshAllWidgets=void 0;var n=t.emit(e);return!a.stopNavigation&&t._supportNavigation()&&t.emitNavigate(e),n}return t._searchWidgets(o),$.when.apply($,$.map(t._mainWidgets,function(e,i){return t._changeWidget({layout:i,widgetName:e.widgetName,refresh:e.refresh,newInstance:e.newInstance,args:a})})).done(function(){t.emit(e),t._supportNavigation()&&t.emitNavigate(e),s.resolve()}),t._setContext(r),s.promise()},setLayout:function(e){var t=this;t._context="none",t._widgets={};for(var i=t.getLayouts(e)||[],r=0,a=i.length;r<a;r++){var s=i[r];t._widgets[s.name]={widget:{},canvas:s.layout,layout:s.name},t._layouts.push(s.name)}},getLayouts:function(e){return $.map($(".ui-bizagi-layout[layout]",e),function(e){return{name:$(e).attr("layout"),layout:$(e)}})},dispose:function(){},clean:function(){for(var e in this._widgets){var t=this._widgets[e].widget;for(var i in t){var r=t[i];for(var a in r.innerWidgets)r.innerWidgets[a].clean();r.clean()}}}}),bizagi.injector.register("widgetManager",["workportalFacade","dataService","notifier",bizagi.workportal.widgets.manager]),function(e){e.fn.bizagiPagination=function(t){t=t||{};var i={limInf:0,totalPages:1,actualPage:1,listElement:e("ul"),first:"&lt;&lt;",firstClass:"first",prev:"&lt;",prevClass:"prev",next:"&gt;",nextClass:"next",last:"&gt;&gt;",lastClass:"last",liClass:"bz-page",arrowClass:"bz-pageArrow",selectedFocus:!0,clickCallBack:function(){}};t.actualPage>t.totalPages&&(t.actualPage=t.totalPages),e.extend(i,i,t);var r={previousPage:Math.max(1,parseInt(i.actualPage)-1),nextPage:parseInt(i.actualPage)+1};function a(t,r){var a;if(t=t||1,(r=r||0)>0)a=t;else{if(!(r<0))return;a=t-2}e.each(e("li."+i.liClass,i.listElement),function(t,r){a++,e(this).data("page",a),e(this).find("span").html(a),e(this).attr("data-page",a),i.actualPage!=a||e(this).hasClass("active")?e(this).removeClass("active"):e(this).addClass("active")}),1==e(i.listElement).find(".active").length?e(i.listElement).parent().find("#tooltipPagination").css("visibility","hidden"):e(i.listElement).parent().find("#tooltipPagination").css("visibility","visible")}!function(){var t,s,o;if(i.totalElements=e("li."+i.liClass,i.listElement[0]).length,i.totalPages>i.totalElements&&i.totalElements>1&&(t=r.previousPage==i.actualPage,s=i.actualPage==i.totalPages,i.listElement.prepend("<li/>").find("li:first").addClass(i.prevClass).addClass(t?"pagination-disabled":"").data("page",r.previousPage).html(i.prev),i.listElement.prepend("<li/>").find("li:first").addClass(i.arrowClass+" "+i.firstClass).addClass(t?"pagination-disabled":"").data("page","1").html(i.first),i.listElement.append("<li/>").find("li:last").addClass(i.nextClass).addClass(s?"pagination-disabled":"").data("page",r.nextPage).html(i.next),i.listElement.append("<li/>").find("li:last").addClass(i.arrowClass+" "+i.lastClass).addClass(s?"pagination-disabled":"").data("page",i.totalPages).html(i.last)),o={},e("li:not(.pagination-disabled)",i.listElement).click(function(){o.page=e(this).hasClass(i.lastClass)?i.totalPages:e.trim(e(this).data("page")+" "),o.parent=e(this).parent(),o.self=e(this),i.clickCallBack(o)}),i.selectedFocus&&i.actualPage>=i.totalElements&&i.totalPages>i.totalElements){var n,d=i.actualPage-Math.round(i.totalElements/2);n=d<1?1:d+i.totalElements>i.totalPages?(n=i.totalPages-i.totalElements)<1?1:n:d,0==i.listElement.find("li.active").length&&a(n,1)}}()}}(jQuery),function($){if($.ui.timepicker=$.ui.timepicker||{},!$.ui.timepicker.version){$.extend($.ui,{timepicker:{version:"1.4"}});var Timepicker=function(){this.regional=[],this.regional[""]={currentText:"Now",closeText:"Done",amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"HH:mm",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",millisecText:"Millisecond",microsecText:"Microsecond",timezoneText:"Time Zone",isRTL:!1},this._defaults={showButtonPanel:!0,timeOnly:!1,showHour:null,showMinute:null,showSecond:null,showMillisec:null,showMicrosec:null,showTimezone:null,showTime:!0,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,stepMicrosec:1,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,microsecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,microsecMax:999,minDateTime:null,maxDateTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,microsecGrid:0,alwaysSetTime:!0,separator:" ",altFieldTimeOnly:!0,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:!0,timezoneList:null,addSliderAccess:!1,sliderAccessArgs:null,controlType:"slider",defaultValue:null,parse:"strict"},$.extend(this._defaults,this.regional[""])};$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,microsec_slider:null,timezone_select:null,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,microsecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,microsecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,units:["hour","minute","second","millisec","microsec"],support:{},control:null,setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_newInst:function($input,opts){var tp_inst=new Timepicker,inlineSettings={},fns={},overrides,i;for(var attrName in this._defaults)if(this._defaults.hasOwnProperty(attrName)){var attrValue=$input.attr("time:"+attrName);if(attrValue)try{inlineSettings[attrName]=eval(attrValue)}catch(e){inlineSettings[attrName]=attrValue}}for(i in overrides={beforeShow:function(e,t){if($.isFunction(tp_inst._defaults.evnts.beforeShow))return tp_inst._defaults.evnts.beforeShow.call($input[0],e,t,tp_inst)},onChangeMonthYear:function(e,t,i){tp_inst._updateDateTime(i),$.isFunction(tp_inst._defaults.evnts.onChangeMonthYear)&&tp_inst._defaults.evnts.onChangeMonthYear.call($input[0],e,t,i,tp_inst)},onClose:function(e,t){!0===tp_inst.timeDefined&&""!==$input.val()&&tp_inst._updateDateTime(t),$.isFunction(tp_inst._defaults.evnts.onClose)&&tp_inst._defaults.evnts.onClose.call($input[0],e,t,tp_inst)}},overrides)overrides.hasOwnProperty(i)&&(fns[i]=opts[i]||null);tp_inst._defaults=$.extend({},this._defaults,inlineSettings,opts,overrides,{evnts:fns,timepicker:tp_inst}),tp_inst.amNames=$.map(tp_inst._defaults.amNames,function(e){return e.toUpperCase()}),tp_inst.pmNames=$.map(tp_inst._defaults.pmNames,function(e){return e.toUpperCase()}),tp_inst.support=detectSupport(tp_inst._defaults.timeFormat+(tp_inst._defaults.pickerTimeFormat?tp_inst._defaults.pickerTimeFormat:"")+(tp_inst._defaults.altTimeFormat?tp_inst._defaults.altTimeFormat:"")),"string"==typeof tp_inst._defaults.controlType?("slider"===tp_inst._defaults.controlType&&void 0===$.ui.slider&&(tp_inst._defaults.controlType="select"),tp_inst.control=tp_inst._controls[tp_inst._defaults.controlType]):tp_inst.control=tp_inst._defaults.controlType;var timezoneList=[-720,-660,-600,-570,-540,-480,-420,-360,-300,-270,-240,-210,-180,-120,-60,0,60,120,180,210,240,270,300,330,345,360,390,420,480,525,540,570,600,630,660,690,720,765,780,840];null!==tp_inst._defaults.timezoneList&&(timezoneList=tp_inst._defaults.timezoneList);var tzl=timezoneList.length,tzi=0,tzv=null;if(tzl>0&&"object"!=typeof timezoneList[0])for(;tzi<tzl;tzi++)tzv=timezoneList[tzi],timezoneList[tzi]={value:tzv,label:$.timepicker.timezoneOffsetString(tzv,tp_inst.support.iso8601)};return tp_inst._defaults.timezoneList=timezoneList,tp_inst.timezone=null!==tp_inst._defaults.timezone?$.timepicker.timezoneOffsetNumber(tp_inst._defaults.timezone):-1*(new Date).getTimezoneOffset(),tp_inst.hour=tp_inst._defaults.hour<tp_inst._defaults.hourMin?tp_inst._defaults.hourMin:tp_inst._defaults.hour>tp_inst._defaults.hourMax?tp_inst._defaults.hourMax:tp_inst._defaults.hour,tp_inst.minute=tp_inst._defaults.minute<tp_inst._defaults.minuteMin?tp_inst._defaults.minuteMin:tp_inst._defaults.minute>tp_inst._defaults.minuteMax?tp_inst._defaults.minuteMax:tp_inst._defaults.minute,tp_inst.second=tp_inst._defaults.second<tp_inst._defaults.secondMin?tp_inst._defaults.secondMin:tp_inst._defaults.second>tp_inst._defaults.secondMax?tp_inst._defaults.secondMax:tp_inst._defaults.second,tp_inst.millisec=tp_inst._defaults.millisec<tp_inst._defaults.millisecMin?tp_inst._defaults.millisecMin:tp_inst._defaults.millisec>tp_inst._defaults.millisecMax?tp_inst._defaults.millisecMax:tp_inst._defaults.millisec,tp_inst.microsec=tp_inst._defaults.microsec<tp_inst._defaults.microsecMin?tp_inst._defaults.microsecMin:tp_inst._defaults.microsec>tp_inst._defaults.microsecMax?tp_inst._defaults.microsecMax:tp_inst._defaults.microsec,tp_inst.ampm="",tp_inst.$input=$input,tp_inst._defaults.altField&&(tp_inst.$altInput=$(tp_inst._defaults.altField).css({cursor:"pointer"}).focus(function(){$input.trigger("focus")})),0!==tp_inst._defaults.minDate&&0!==tp_inst._defaults.minDateTime||(tp_inst._defaults.minDate=new Date),0!==tp_inst._defaults.maxDate&&0!==tp_inst._defaults.maxDateTime||(tp_inst._defaults.maxDate=new Date),void 0!==tp_inst._defaults.minDate&&tp_inst._defaults.minDate instanceof Date&&(tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime())),void 0!==tp_inst._defaults.minDateTime&&tp_inst._defaults.minDateTime instanceof Date&&(tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime())),void 0!==tp_inst._defaults.maxDate&&tp_inst._defaults.maxDate instanceof Date&&(tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime())),void 0!==tp_inst._defaults.maxDateTime&&tp_inst._defaults.maxDateTime instanceof Date&&(tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime())),tp_inst.$input.bind("focus",function(){tp_inst._onFocus()}),tp_inst},_addTimePicker:function(e){var t=this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val();this.timeDefined=this._parseTime(t),this._limitMinMaxDateTime(e,!1),this._injectTimePicker()},_parseTime:function(e,t){if(this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),t||!this._defaults.timeOnly){var i=$.datepicker._get(this.inst,"dateFormat");try{var r=parseDateTimeInternal(i,this._defaults.timeFormat,e,$.datepicker._getFormatConfig(this.inst),this._defaults);if(!r.timeObj)return!1;$.extend(this,r.timeObj)}catch(t){return $.timepicker.log("Error parsing the date/time string: "+t+"\ndate/time string = "+e+"\ntimeFormat = "+this._defaults.timeFormat+"\ndateFormat = "+i),!1}return!0}var a=$.datepicker.parseTime(this._defaults.timeFormat,e,this._defaults);return!!a&&($.extend(this,a),!0)},_injectTimePicker:function(){var e=this.inst.dpDiv,t=this.inst.settings,i=this,r="",a="",s=null,o={},n={},d=null,l=0,c=0;if(0===e.find("div.ui-timepicker-div").length&&t.showTimepicker){var p=' style="display:none;"',u='<div class="ui-timepicker-div'+(t.isRTL?" ui-timepicker-rtl":"")+'"><dl><dt class="ui_tpicker_time_label"'+(t.showTime?"":p)+">"+t.timeText+'</dt><dd class="ui_tpicker_time"'+(t.showTime?"":p)+"></dd>";for(l=0,c=this.units.length;l<c;l++){if(s=null!==t["show"+(a=(r=this.units[l]).substr(0,1).toUpperCase()+r.substr(1))]?t["show"+a]:this.support[r],o[r]=parseInt(t[r+"Max"]-(t[r+"Max"]-t[r+"Min"])%t["step"+a],10),n[r]=0,u+='<dt class="ui_tpicker_'+r+'_label"'+(s?"":p)+">"+t[r+"Text"]+'</dt><dd class="ui_tpicker_'+r+'"><div class="ui_tpicker_'+r+'_slider"'+(s?"":p)+"></div>",s&&t[r+"Grid"]>0){if(u+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>',"hour"===r)for(var m=t[r+"Min"];m<=o[r];m+=parseInt(t[r+"Grid"],10)){n[r]++;var g=$.datepicker.formatTime(this.support.ampm?"hht":"HH",{hour:m},t);u+='<td data-for="'+r+'">'+g+"</td>"}else for(var f=t[r+"Min"];f<=o[r];f+=parseInt(t[r+"Grid"],10))n[r]++,u+='<td data-for="'+r+'">'+(f<10?"0":"")+f+"</td>";u+="</tr></table></div>"}u+="</dd>"}var h=null!==t.showTimezone?t.showTimezone:this.support.timezone;u+='<dt class="ui_tpicker_timezone_label"'+(h?"":p)+">"+t.timezoneText+"</dt>",u+='<dd class="ui_tpicker_timezone" '+(h?"":p)+"></dd>";var y=$(u+="</dl></div>");for(!0===t.timeOnly&&(y.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+t.timeOnlyTitle+"</div></div>"),e.find(".ui-datepicker-header, .ui-datepicker-calendar").hide()),l=0,c=i.units.length;l<c;l++)s=null!==t["show"+(a=(r=i.units[l]).substr(0,1).toUpperCase()+r.substr(1))]?t["show"+a]:this.support[r],i[r+"_slider"]=i.control.create(i,y.find(".ui_tpicker_"+r+"_slider"),r,i[r],t[r+"Min"],o[r],t["step"+a]),s&&t[r+"Grid"]>0&&(d=100*n[r]*t[r+"Grid"]/(o[r]-t[r+"Min"]),y.find(".ui_tpicker_"+r+" table").css({width:d+"%",marginLeft:t.isRTL?"0":d/(-2*n[r])+"%",marginRight:t.isRTL?d/(-2*n[r])+"%":"0",borderCollapse:"collapse"}).find("td").click(function(e){var t=$(this),a=t.html(),s=parseInt(a.replace(/[^0-9]/g),10),o=a.replace(/[^apm]/gi),n=t.data("for");"hour"===n&&(-1!==o.indexOf("p")&&s<12?s+=12:-1!==o.indexOf("a")&&12===s&&(s=0)),i.control.value(i,i[n+"_slider"],r,s),i._onTimeChange(),i._onSelectHandler()}).css({cursor:"pointer",width:100/n[r]+"%",textAlign:"center",overflow:"hidden"}));if(this.timezone_select=y.find(".ui_tpicker_timezone").append("<select></select>").find("select"),$.fn.append.apply(this.timezone_select,$.map(t.timezoneList,function(e,t){return $("<option />").val("object"==typeof e?e.value:e).text("object"==typeof e?e.label:e)})),void 0!==this.timezone&&null!==this.timezone&&""!==this.timezone)-1*new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12).getTimezoneOffset()===this.timezone?selectLocalTimezone(i):this.timezone_select.val(this.timezone);else void 0!==this.hour&&null!==this.hour&&""!==this.hour?this.timezone_select.val(t.timezone):selectLocalTimezone(i);this.timezone_select.change(function(){i._onTimeChange(),i._onSelectHandler()});var v=e.find(".ui-datepicker-buttonpane");if(v.length?v.before(y):e.append(y),this.$timeObj=y.find(".ui_tpicker_time"),null!==this.inst){var x=this.timeDefined;this._onTimeChange(),this.timeDefined=x}if(this._defaults.addSliderAccess){var w=this._defaults.sliderAccessArgs,P=this._defaults.isRTL;w.isRTL=P,setTimeout(function(){if(0===y.find(".ui-slider-access").length){y.find(".ui-slider:visible").sliderAccess(w);var e=y.find(".ui-slider-access:eq(0)").outerWidth(!0);e&&y.find("table:visible").each(function(){var t=$(this),i=t.outerWidth(),r=t.css(P?"marginRight":"marginLeft").toString().replace("%",""),a=i-e,s=r*a/i+"%",o={width:a,marginRight:0,marginLeft:0};o[P?"marginRight":"marginLeft"]=s,t.css(o)})}},10)}i._limitMinMaxDateTime(this.inst,!0)}},_limitMinMaxDateTime:function(e,t){var i=this._defaults,r=new Date(e.selectedYear,e.selectedMonth,e.selectedDay);if(this._defaults.showTimepicker){if(null!==$.datepicker._get(e,"minDateTime")&&void 0!==$.datepicker._get(e,"minDateTime")&&r){var a=$.datepicker._get(e,"minDateTime"),s=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0);null!==this.hourMinOriginal&&null!==this.minuteMinOriginal&&null!==this.secondMinOriginal&&null!==this.millisecMinOriginal&&null!==this.microsecMinOriginal||(this.hourMinOriginal=i.hourMin,this.minuteMinOriginal=i.minuteMin,this.secondMinOriginal=i.secondMin,this.millisecMinOriginal=i.millisecMin,this.microsecMinOriginal=i.microsecMin),e.settings.timeOnly||s.getTime()===r.getTime()?(this._defaults.hourMin=a.getHours(),this.hour<=this._defaults.hourMin?(this.hour=this._defaults.hourMin,this._defaults.minuteMin=a.getMinutes(),this.minute<=this._defaults.minuteMin?(this.minute=this._defaults.minuteMin,this._defaults.secondMin=a.getSeconds(),this.second<=this._defaults.secondMin?(this.second=this._defaults.secondMin,this._defaults.millisecMin=a.getMilliseconds(),this.millisec<=this._defaults.millisecMin?(this.millisec=this._defaults.millisecMin,this._defaults.microsecMin=a.getMicroseconds()):(this.microsec<this._defaults.microsecMin&&(this.microsec=this._defaults.microsecMin),this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)}if(null!==$.datepicker._get(e,"maxDateTime")&&void 0!==$.datepicker._get(e,"maxDateTime")&&r){var o=$.datepicker._get(e,"maxDateTime"),n=new Date(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0,0);null!==this.hourMaxOriginal&&null!==this.minuteMaxOriginal&&null!==this.secondMaxOriginal&&null!==this.millisecMaxOriginal||(this.hourMaxOriginal=i.hourMax,this.minuteMaxOriginal=i.minuteMax,this.secondMaxOriginal=i.secondMax,this.millisecMaxOriginal=i.millisecMax,this.microsecMaxOriginal=i.microsecMax),e.settings.timeOnly||n.getTime()===r.getTime()?(this._defaults.hourMax=o.getHours(),this.hour>=this._defaults.hourMax?(this.hour=this._defaults.hourMax,this._defaults.minuteMax=o.getMinutes(),this.minute>=this._defaults.minuteMax?(this.minute=this._defaults.minuteMax,this._defaults.secondMax=o.getSeconds(),this.second>=this._defaults.secondMax?(this.second=this._defaults.secondMax,this._defaults.millisecMax=o.getMilliseconds(),this.millisec>=this._defaults.millisecMax?(this.millisec=this._defaults.millisecMax,this._defaults.microsecMax=o.getMicroseconds()):(this.microsec>this._defaults.microsecMax&&(this.microsec=this._defaults.microsecMax),this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.hourMax=this.hourMaxOriginal,this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)}if(void 0!==t&&!0===t){var d=parseInt(this._defaults.hourMax-(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10),l=parseInt(this._defaults.minuteMax-(this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute,10),c=parseInt(this._defaults.secondMax-(this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond,10),p=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec,10),u=parseInt(this._defaults.microsecMax-(this._defaults.microsecMax-this._defaults.microsecMin)%this._defaults.stepMicrosec,10);this.hour_slider&&(this.control.options(this,this.hour_slider,"hour",{min:this._defaults.hourMin,max:d}),this.control.value(this,this.hour_slider,"hour",this.hour-this.hour%this._defaults.stepHour)),this.minute_slider&&(this.control.options(this,this.minute_slider,"minute",{min:this._defaults.minuteMin,max:l}),this.control.value(this,this.minute_slider,"minute",this.minute-this.minute%this._defaults.stepMinute)),this.second_slider&&(this.control.options(this,this.second_slider,"second",{min:this._defaults.secondMin,max:c}),this.control.value(this,this.second_slider,"second",this.second-this.second%this._defaults.stepSecond)),this.millisec_slider&&(this.control.options(this,this.millisec_slider,"millisec",{min:this._defaults.millisecMin,max:p}),this.control.value(this,this.millisec_slider,"millisec",this.millisec-this.millisec%this._defaults.stepMillisec)),this.microsec_slider&&(this.control.options(this,this.microsec_slider,"microsec",{min:this._defaults.microsecMin,max:u}),this.control.value(this,this.microsec_slider,"microsec",this.microsec-this.microsec%this._defaults.stepMicrosec))}}},_onTimeChange:function(){if(this._defaults.showTimepicker){var e=!!this.hour_slider&&this.control.value(this,this.hour_slider,"hour"),t=!!this.minute_slider&&this.control.value(this,this.minute_slider,"minute"),i=!!this.second_slider&&this.control.value(this,this.second_slider,"second"),r=!!this.millisec_slider&&this.control.value(this,this.millisec_slider,"millisec"),a=!!this.microsec_slider&&this.control.value(this,this.microsec_slider,"microsec"),s=!!this.timezone_select&&this.timezone_select.val(),o=this._defaults,n=o.pickerTimeFormat||o.timeFormat,d=o.pickerTimeSuffix||o.timeSuffix;"object"==typeof e&&(e=!1),"object"==typeof t&&(t=!1),"object"==typeof i&&(i=!1),"object"==typeof r&&(r=!1),"object"==typeof a&&(a=!1),"object"==typeof s&&(s=!1),!1!==e&&(e=parseInt(e,10)),!1!==t&&(t=parseInt(t,10)),!1!==i&&(i=parseInt(i,10)),!1!==r&&(r=parseInt(r,10)),!1!==a&&(a=parseInt(a,10));var l=o[e<12?"amNames":"pmNames"][0],c=e!==this.hour||t!==this.minute||i!==this.second||r!==this.millisec||a!==this.microsec||this.ampm.length>0&&e<12!=(-1!==$.inArray(this.ampm.toUpperCase(),this.amNames))||null!==this.timezone&&s!==this.timezone;c&&(!1!==e&&(this.hour=e),!1!==t&&(this.minute=t),!1!==i&&(this.second=i),!1!==r&&(this.millisec=r),!1!==a&&(this.microsec=a),!1!==s&&(this.timezone=s),this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),this._limitMinMaxDateTime(this.inst,!0)),this.support.ampm&&(this.ampm=l),this.formattedTime=$.datepicker.formatTime(o.timeFormat,this,o),this.$timeObj&&(n===o.timeFormat?this.$timeObj.text(this.formattedTime+d):this.$timeObj.text($.datepicker.formatTime(n,this,o)+d)),this.timeDefined=!0,c&&this._updateDateTime()}},_onSelectHandler:function(){var e=this._defaults.onSelect||this.inst.settings.onSelect,t=this.$input?this.$input[0]:null;e&&t&&e.apply(t,[this.formattedDateTime,this])},_updateDateTime:function(e){var t=(e=this.inst||e).currentYear>0?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(e.selectedYear,e.selectedMonth,e.selectedDay),i=$.datepicker._daylightSavingAdjust(t),r=$.datepicker._get(e,"dateFormat"),a=$.datepicker._getFormatConfig(e),s=null!==i&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(r,null===i?new Date:i,a);var o=this.formattedDate;if(""===e.lastVa&&(e.currentYear=e.selectedYear,e.currentMonth=e.selectedMonth,e.currentDay=e.selectedDay),!0===this._defaults.timeOnly?o=this.formattedTime:!0!==this._defaults.timeOnly&&(this._defaults.alwaysSetTime||s)&&(o+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix),this.formattedDateTime=o,this._defaults.showTimepicker)if(this.$altInput&&!1===this._defaults.timeOnly&&!0===this._defaults.altFieldTimeOnly)this.$altInput.val(this.formattedTime),this.$input.val(this.formattedDate);else if(this.$altInput){this.$input.val(o);var n="",d=this._defaults.altSeparator?this._defaults.altSeparator:this._defaults.separator,l=this._defaults.altTimeSuffix?this._defaults.altTimeSuffix:this._defaults.timeSuffix;this._defaults.timeOnly||(n=this._defaults.altFormat?$.datepicker.formatDate(this._defaults.altFormat,null===i?new Date:i,a):this.formattedDate)&&(n+=d),this._defaults.altTimeFormat?n+=$.datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+l:n+=this.formattedTime+l,this.$altInput.val(n)}else this.$input.val(o);else this.$input.val(this.formattedDate);this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var e=$.datepicker._getInst(this.$input.get(0)),t=$.datepicker._get(e,"timepicker");if(t&&t._defaults.timeOnly&&e.input.val()!==e.lastVal)try{$.datepicker._updateDatepicker(e)}catch(e){$.timepicker.log(e)}}},_controls:{slider:{create:function(e,t,i,r,a,s,o){var n=e._defaults.isRTL;return t.prop("slide",null).slider({orientation:"horizontal",value:n?-1*r:r,min:n?-1*s:a,max:n?-1*a:s,step:o,slide:function(t,r){e.control.value(e,$(this),i,n?-1*r.value:r.value),e._onTimeChange()},stop:function(t,i){e._onSelectHandler()}})},options:function(e,t,i,r,a){if(e._defaults.isRTL){if("string"==typeof r)return"min"===r||"max"===r?void 0!==a?t.slider(r,-1*a):Math.abs(t.slider(r)):t.slider(r);var s=r.min,o=r.max;return r.min=r.max=null,void 0!==s&&(r.max=-1*s),void 0!==o&&(r.min=-1*o),t.slider(r)}return"string"==typeof r&&void 0!==a?t.slider(r,a):t.slider(r)},value:function(e,t,i,r){return e._defaults.isRTL?void 0!==r?t.slider("value",-1*r):Math.abs(t.slider("value")):void 0!==r?t.slider("value",r):t.slider("value")}},select:{create:function(e,t,i,r,a,s,o){for(var n='<select class="ui-timepicker-select" data-unit="'+i+'" data-min="'+a+'" data-max="'+s+'" data-step="'+o+'">',d=e._defaults.pickerTimeFormat||e._defaults.timeFormat,l=a;l<=s;l+=o)n+='<option value="'+l+'"'+(l===r?" selected":"")+">",n+="hour"===i?$.datepicker.formatTime($.trim(d.replace(/[^ht ]/gi,"")),{hour:l},e._defaults):"millisec"===i||"microsec"===i||l>=10?l:"0"+l.toString(),n+="</option>";return n+="</select>",t.children("select").remove(),$(n).appendTo(t).change(function(t){e._onTimeChange(),e._onSelectHandler()}),t},options:function(e,t,i,r,a){var s={},o=t.children("select");if("string"==typeof r){if(void 0===a)return o.data(r);s[r]=a}else s=r;return e.control.create(e,t,o.data("unit"),o.val(),s.min||o.data("min"),s.max||o.data("max"),s.step||o.data("step"))},value:function(e,t,i,r){var a=t.children("select");return void 0!==r?a.val(r):a.val()}}}}),$.fn.extend({timepicker:function(e){e=e||{};var t=Array.prototype.slice.call(arguments);return"object"==typeof e&&(t[0]=$.extend(e,{timeOnly:!0})),$(this).each(function(){$.fn.datetimepicker.apply($(this),t)})},datetimepicker:function(e){var t=arguments;return"string"==typeof(e=e||{})?"getDate"===e?$.fn.datepicker.apply($(this[0]),t):this.each(function(){var e=$(this);e.datepicker.apply(e,t)}):this.each(function(){var t=$(this);t.datepicker($.timepicker._newInst(t,e)._defaults)})}}),$.datepicker.parseDateTime=function(e,t,i,r,a){var s=parseDateTimeInternal(e,t,i,r,a);if(s.timeObj){var o=s.timeObj;s.date.setHours(o.hour,o.minute,o.second,o.millisec),s.date.setMicroseconds(o.microsec)}return s.date},$.datepicker.parseTime=function(e,t,i){var r=extendRemove(extendRemove({},$.timepicker._defaults),i||{}),a=(e.replace(/\'.*?\'/g,"").indexOf("Z"),function(e,t,i){var r,a="^"+e.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(e){var t,r,a,s=e.length;switch(e.charAt(0).toLowerCase()){case"h":case"m":case"s":return 1===s?"(\\d?\\d)":"(\\d{"+s+"})";case"l":case"c":return"(\\d?\\d?\\d)";case"z":return"(z|[-+]\\d\\d:?\\d\\d|\\S+)?";case"t":return t=i.amNames,r=i.pmNames,a=[],t&&$.merge(a,t),r&&$.merge(a,r),"("+(a=$.map(a,function(e){return e.replace(/[.*+?|()\[\]{}\\]/g,"\\$&")})).join("|")+")?";default:return"("+e.replace(/\'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(e){return"\\"+e})+")?"}}).replace(/\s/g,"\\s?")+i.timeSuffix+"$",s=function(e){var t=e.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g),i={h:-1,m:-1,s:-1,l:-1,c:-1,t:-1,z:-1};if(t)for(var r=0;r<t.length;r++)-1===i[t[r].toString().charAt(0)]&&(i[t[r].toString().charAt(0)]=r+1);return i}(e),o="",n={hour:0,minute:0,second:0,millisec:0,microsec:0};return!!(r=t.match(new RegExp(a,"i")))&&(-1!==s.t&&(void 0===r[s.t]||0===r[s.t].length?(o="",n.ampm=""):(o=-1!==$.inArray(r[s.t].toUpperCase(),i.amNames)?"AM":"PM",n.ampm=i["AM"===o?"amNames":"pmNames"][0])),-1!==s.h&&("AM"===o&&"12"===r[s.h]?n.hour=0:"PM"===o&&"12"!==r[s.h]?n.hour=parseInt(r[s.h],10)+12:n.hour=Number(r[s.h])),-1!==s.m&&(n.minute=Number(r[s.m])),-1!==s.s&&(n.second=Number(r[s.s])),-1!==s.l&&(n.millisec=Number(r[s.l])),-1!==s.c&&(n.microsec=Number(r[s.c])),-1!==s.z&&void 0!==r[s.z]&&(n.timezone=$.timepicker.timezoneOffsetNumber(r[s.z])),n)});return"function"==typeof r.parse?r.parse(e,t,r):"loose"===r.parse?function(e,t,i){try{var r=new Date("2012-01-01 "+t);if(isNaN(r.getTime())&&(r=new Date("2012-01-01T"+t),isNaN(r.getTime())&&(r=new Date("01/01/2012 "+t),isNaN(r.getTime()))))throw"Unable to parse time with native Date: "+t;return{hour:r.getHours(),minute:r.getMinutes(),second:r.getSeconds(),millisec:r.getMilliseconds(),microsec:r.getMicroseconds(),timezone:-1*r.getTimezoneOffset()}}catch(r){try{return a(e,t,i)}catch(i){$.timepicker.log("Unable to parse \ntimeString: "+t+"\ntimeFormat: "+e)}}return!1}(e,t,r):a(e,t,r)},$.datepicker.formatTime=function(e,t,i){i=i||{},i=$.extend({},$.timepicker._defaults,i),t=$.extend({hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null},t);var r=e,a=i.amNames[0],s=parseInt(t.hour,10);return s>11&&(a=i.pmNames[0]),r=r.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(e){switch(e){case"HH":return("0"+s).slice(-2);case"H":return s;case"hh":return("0"+convert24to12(s)).slice(-2);case"h":return convert24to12(s);case"mm":return("0"+t.minute).slice(-2);case"m":return t.minute;case"ss":return("0"+t.second).slice(-2);case"s":return t.second;case"l":return("00"+t.millisec).slice(-3);case"c":return("00"+t.microsec).slice(-3);case"z":return $.timepicker.timezoneOffsetString(null===t.timezone?i.timezone:t.timezone,!1);case"Z":return $.timepicker.timezoneOffsetString(null===t.timezone?i.timezone:t.timezone,!0);case"T":return a.charAt(0).toUpperCase();case"TT":return a.toUpperCase();case"t":return a.charAt(0).toLowerCase();case"tt":return a.toLowerCase();default:return e.replace(/'/g,"")}})},$.datepicker._base_selectDate=$.datepicker._selectDate,$.datepicker._selectDate=function(e,t){var i=this._getInst($(e)[0]),r=this._get(i,"timepicker");r?(r._limitMinMaxDateTime(i,!0),i.inline=i.stay_open=!0,this._base_selectDate(e,t),i.inline=i.stay_open=!1,this._notifyChange(i),this._updateDatepicker(i)):this._base_selectDate(e,t)},$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker,$.datepicker._updateDatepicker=function(e){var t=e.input[0];if(!($.datepicker._curInst&&$.datepicker._curInst!==e&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!==t||"boolean"==typeof e.stay_open&&!1!==e.stay_open)){this._base_updateDatepicker(e);var i=this._get(e,"timepicker");i&&i._addTimePicker(e)}},$.datepicker._base_doKeyPress=$.datepicker._doKeyPress,$.datepicker._doKeyPress=function(e){var t=$.datepicker._getInst(e.target),i=$.datepicker._get(t,"timepicker");if(i&&$.datepicker._get(t,"constrainInput")){var r=i.support.ampm,a=null!==i._defaults.showTimezone?i._defaults.showTimezone:i.support.timezone,s=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),o=i._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,r?"APM":"").replace(/Tt/g,r?"AaPpMm":"").replace(/tT/g,r?"AaPpMm":"").replace(/T/g,r?"AP":"").replace(/tt/g,r?"apm":"").replace(/t/g,r?"ap":"")+" "+i._defaults.separator+i._defaults.timeSuffix+(a?i._defaults.timezoneList.join(""):"")+i._defaults.amNames.join("")+i._defaults.pmNames.join("")+s,n=String.fromCharCode(void 0===e.charCode?e.keyCode:e.charCode);return e.ctrlKey||n<" "||!s||o.indexOf(n)>-1}return $.datepicker._base_doKeyPress(e)},$.datepicker._base_updateAlternate=$.datepicker._updateAlternate,$.datepicker._updateAlternate=function(e){var t=this._get(e,"timepicker");if(t){var i=t._defaults.altField;if(i){t._defaults.altFormat||t._defaults.dateFormat;var r=this._getDate(e),a=$.datepicker._getFormatConfig(e),s="",o=t._defaults.altSeparator?t._defaults.altSeparator:t._defaults.separator,n=t._defaults.altTimeSuffix?t._defaults.altTimeSuffix:t._defaults.timeSuffix,d=null!==t._defaults.altTimeFormat?t._defaults.altTimeFormat:t._defaults.timeFormat;s+=$.datepicker.formatTime(d,t,t._defaults)+n,t._defaults.timeOnly||t._defaults.altFieldTimeOnly||null===r||(s=t._defaults.altFormat?$.datepicker.formatDate(t._defaults.altFormat,r,a)+o+s:t.formattedDate+o+s),$(i).val(s)}}else $.datepicker._base_updateAlternate(e)},$.datepicker._base_doKeyUp=$.datepicker._doKeyUp,$.datepicker._doKeyUp=function(e){var t=$.datepicker._getInst(e.target),i=$.datepicker._get(t,"timepicker");if(i&&i._defaults.timeOnly&&t.input.val()!==t.lastVal)try{$.datepicker._updateDatepicker(t)}catch(e){$.timepicker.log(e)}return $.datepicker._base_doKeyUp(e)},$.datepicker._base_gotoToday=$.datepicker._gotoToday,$.datepicker._gotoToday=function(e){var t=this._getInst($(e)[0]),i=t.dpDiv;this._base_gotoToday(e);var r=this._get(t,"timepicker");selectLocalTimezone(r);var a=new Date;this._setTime(t,a),$(".ui-datepicker-today",i).click()},$.datepicker._disableTimepickerDatepicker=function(e){var t=this._getInst(e);if(t){var i=this._get(t,"timepicker");$(e).datepicker("getDate"),i&&(t.settings.showTimepicker=!1,i._defaults.showTimepicker=!1,i._updateDateTime(t))}},$.datepicker._enableTimepickerDatepicker=function(e){var t=this._getInst(e);if(t){var i=this._get(t,"timepicker");$(e).datepicker("getDate"),i&&(t.settings.showTimepicker=!0,i._defaults.showTimepicker=!0,i._addTimePicker(t),i._updateDateTime(t))}},$.datepicker._setTime=function(e,t){var i=this._get(e,"timepicker");if(i){var r=i._defaults;i.hour=t?t.getHours():r.hour,i.minute=t?t.getMinutes():r.minute,i.second=t?t.getSeconds():r.second,i.millisec=t?t.getMilliseconds():r.millisec,i.microsec=t?t.getMicroseconds():r.microsec,i._limitMinMaxDateTime(e,!0),i._onTimeChange(),i._updateDateTime(e)}},$.datepicker._setTimeDatepicker=function(e,t,i){var r=this._getInst(e);if(r){var a,s=this._get(r,"timepicker");if(s)this._setDateFromField(r),t&&("string"==typeof t?(s._parseTime(t,i),(a=new Date).setHours(s.hour,s.minute,s.second,s.millisec),a.setMicroseconds(s.microsec)):(a=new Date(t.getTime())).setMicroseconds(t.getMicroseconds()),"Invalid Date"===a.toString()&&(a=void 0),this._setTime(r,a))}},$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker,$.datepicker._setDateDatepicker=function(e,t){var i=this._getInst(e);if(i){"string"==typeof t&&((t=new Date(t)).getTime()||$.timepicker.log("Error creating Date object from string."));var r,a=this._get(i,"timepicker");t instanceof Date?(r=new Date(t.getTime())).setMicroseconds(t.getMicroseconds()):r=t,a&&(a.support.timezone||null!==a._defaults.timezone||(a.timezone=-1*r.getTimezoneOffset()),t=$.timepicker.timezoneAdjust(t,a.timezone),r=$.timepicker.timezoneAdjust(r,a.timezone)),this._updateDatepicker(i),this._base_setDateDatepicker.apply(this,arguments),this._setTimeDatepicker(e,r,!0)}},$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker,$.datepicker._getDateDatepicker=function(e,t){var i=this._getInst(e);if(i){var r=this._get(i,"timepicker");if(r){void 0===i.lastVal&&this._setDateFromField(i,t);var a=this._getDate(i);return a&&r._parseTime($(e).val(),r.timeOnly)&&(a.setHours(r.hour,r.minute,r.second,r.millisec),a.setMicroseconds(r.microsec),null!=r.timezone&&(r.support.timezone||null!==r._defaults.timezone||(r.timezone=-1*a.getTimezoneOffset()),a=$.timepicker.timezoneAdjust(a,r.timezone))),a}return this._base_getDateDatepicker(e,t)}},$.datepicker._base_parseDate=$.datepicker.parseDate,$.datepicker.parseDate=function(e,t,i){var r;try{r=this._base_parseDate(e,t,i)}catch(a){if(!(a.indexOf(":")>=0))throw a;r=this._base_parseDate(e,t.substring(0,t.length-(a.length-a.indexOf(":")-2)),i),$.timepicker.log("Error parsing the date string: "+a+"\ndate string = "+t+"\ndate format = "+e)}return r},$.datepicker._base_formatDate=$.datepicker._formatDate,$.datepicker._formatDate=function(e,t,i,r){var a=this._get(e,"timepicker");return a?(a._updateDateTime(e),a.$input.val()):this._base_formatDate(e)},$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker,$.datepicker._optionDatepicker=function(e,t,i){var r,a=this._getInst(e);if(!a)return null;var s=this._get(a,"timepicker");if(s){var o,n=null,d=null,l=null,c=s._defaults.evnts,p={};if("string"==typeof t){if("minDate"===t||"minDateTime"===t)n=i;else if("maxDate"===t||"maxDateTime"===t)d=i;else if("onSelect"===t)l=i;else if(c.hasOwnProperty(t)){if(void 0===i)return c[t];p[t]=i,r={}}}else if("object"==typeof t)for(o in t.minDate?n=t.minDate:t.minDateTime?n=t.minDateTime:t.maxDate?d=t.maxDate:t.maxDateTime&&(d=t.maxDateTime),c)c.hasOwnProperty(o)&&t[o]&&(p[o]=t[o]);for(o in p)p.hasOwnProperty(o)&&(c[o]=p[o],r||(r=$.extend({},t)),delete r[o]);if(r&&isEmptyObject(r))return;n?(n=0===n?new Date:new Date(n),s._defaults.minDate=n,s._defaults.minDateTime=n):d?(d=0===d?new Date:new Date(d),s._defaults.maxDate=d,s._defaults.maxDateTime=d):l&&(s._defaults.onSelect=l)}return void 0===i?this._base_optionDatepicker.call($.datepicker,e,t):this._base_optionDatepicker.call($.datepicker,e,r||t,i)};var isEmptyObject=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0},extendRemove=function(e,t){for(var i in $.extend(e,t),t)null!==t[i]&&void 0!==t[i]||(e[i]=t[i]);return e},detectSupport=function(e){var t=e.replace(/'.*?'/g,"").toLowerCase(),i=function(e,t){return-1!==e.indexOf(t)};return{hour:i(t,"h"),minute:i(t,"m"),second:i(t,"s"),millisec:i(t,"l"),microsec:i(t,"c"),timezone:i(t,"z"),ampm:i(t,"t")&&i(e,"h"),iso8601:i(e,"Z")}},convert24to12=function(e){return 0===(e%=12)&&(e=12),String(e)},computeEffectiveSetting=function(e,t){return e&&e[t]?e[t]:$.timepicker._defaults[t]},splitDateTime=function(e,t){var i=computeEffectiveSetting(t,"separator"),r=computeEffectiveSetting(t,"timeFormat").split(i).length,a=e.split(i),s=a.length;return s>1?{dateString:a.splice(0,s-r).join(i),timeString:a.splice(0,r).join(i)}:{dateString:e,timeString:""}},parseDateTimeInternal=function(e,t,i,r,a){var s,o,n;if(o=splitDateTime(i,a),s=$.datepicker._base_parseDate(e,o.dateString,r),""===o.timeString)return{date:s};if(!(n=$.datepicker.parseTime(t,o.timeString,a)))throw"Wrong time format";return{date:s,timeObj:n}},selectLocalTimezone=function(e,t){if(e&&e.timezone_select){var i=t||new Date;e.timezone_select.val(-i.getTimezoneOffset())}};$.timepicker=new Timepicker,$.timepicker.timezoneOffsetString=function(e,t){if(isNaN(e)||e>840||e<-720)return e;var i=e%60,r=(e-i)/60,a=t?":":"",s=(e>=0?"+":"-")+("0"+Math.abs(r)).slice(-2)+a+("0"+Math.abs(i)).slice(-2);return"+00:00"===s?"Z":s},$.timepicker.timezoneOffsetNumber=function(e){var t=e.toString().replace(":","");return"Z"===t.toUpperCase()?0:/^(\-|\+)\d{4}$/.test(t)?("-"===t.substr(0,1)?-1:1)*(60*parseInt(t.substr(1,2),10)+parseInt(t.substr(3,2),10)):e},$.timepicker.timezoneAdjust=function(e,t){var i=$.timepicker.timezoneOffsetNumber(t);return isNaN(i)||e.setMinutes(e.getMinutes()+-e.getTimezoneOffset()-i),e},$.timepicker.timeRange=function(e,t,i){return $.timepicker.handleRange("timepicker",e,t,i)},$.timepicker.datetimeRange=function(e,t,i){$.timepicker.handleRange("datetimepicker",e,t,i)},$.timepicker.dateRange=function(e,t,i){$.timepicker.handleRange("datepicker",e,t,i)},$.timepicker.handleRange=function(e,t,i,r){function a(a,s){var o=t[e]("getDate"),n=i[e]("getDate"),d=a[e]("getDate");if(null!==o){var l=new Date(o.getTime()),c=new Date(o.getTime());l.setMilliseconds(l.getMilliseconds()+r.minInterval),c.setMilliseconds(c.getMilliseconds()+r.maxInterval),r.minInterval>0&&l>n?i[e]("setDate",l):r.maxInterval>0&&c<n?i[e]("setDate",c):o>n&&s[e]("setDate",d)}}function s(t,i,a){if(t.val()){var s=t[e].call(t,"getDate");null!==s&&r.minInterval>0&&("minDate"===a&&s.setMilliseconds(s.getMilliseconds()+r.minInterval),"maxDate"===a&&s.setMilliseconds(s.getMilliseconds()-r.minInterval)),s.getTime&&i[e].call(i,"option",a,s)}}return r=$.extend({},{minInterval:0,maxInterval:0,start:{},end:{}},r),$.fn[e].call(t,$.extend({onClose:function(e,t){a($(this),i)},onSelect:function(e){s($(this),i,"minDate")}},r,r.start)),$.fn[e].call(i,$.extend({onClose:function(e,i){a($(this),t)},onSelect:function(e){s($(this),t,"maxDate")}},r,r.end)),a(t,i),s(t,i,"minDate"),s(i,t,"maxDate"),$([t.get(0),i.get(0)])},$.timepicker.log=function(e){window.console&&window.console.log(e)},$.timepicker._util={_extendRemove:extendRemove,_isEmptyObject:isEmptyObject,_convert24to12:convert24to12,_detectSupport:detectSupport,_selectLocalTimezone:selectLocalTimezone,_computeEffectiveSetting:computeEffectiveSetting,_splitDateTime:splitDateTime,_parseDateTimeInternal:parseDateTimeInternal},Date.prototype.getMicroseconds||(Date.prototype.microseconds=0,Date.prototype.getMicroseconds=function(){return this.microseconds},Date.prototype.setMicroseconds=function(e){return this.setMilliseconds(this.getMilliseconds()+Math.floor(e/1e3)),this.microseconds=e%1e3,this}),$.timepicker.version="1.4"}}(jQuery),bizagi.workportal.comments={renderComments:function(e){var t=this,i={},r="",a=new $.Deferred,s={},o=-1,n=bizagi.currentUser.idUser,d=e.canvas,l=e.readOnly||!1;t.setStorage("bufferLocalNewComments_"+e.caseNumber,0),t.setStorage("idCase",e.caseNumber),t.comments=t.workportalFacade.getTemplate("comments"),t.commentsList=t.workportalFacade.getTemplate("comments-list"),t.commentsReplies=t.workportalFacade.getTemplate("comments-replies"),t.commentsDropdown=t.workportalFacade.getTemplate("comments-dropdown"),t.commentsConfirm=t.workportalFacade.getTemplate("comments-confirm"),e.showComments=!0;var c=function(i){s=i.comments,t.setStorage("maxIdComment_"+e.caseNumber,i.maxIdComment),t.setStorage("bufferLocalNewComments_"+e.caseNumber,0)};return $.when(t.getComments({idCase:e.caseNumber},c)).done(function(p){var u,m,g=p.users||[],f=function(e){var t="";switch(e){case 0:t="orange";break;case 1:t="red";break;case 2:t="yellow";break;case 3:t="blue";break;case 4:t="purple";break;case 5:t="green";break;default:t="disable"}return t},h=function(e){$(e).children("li:not(:last)").slideUp("fast"),$("span.reply-toggler > span",e.parent()).removeClass("expanded")},y=function(e){var t=$(".reply-list li",e)||[],i=$(".reply-toggler",e);t.length>1?i.removeClass("hidden"):i.addClass("hidden")},v=function(e){return $.timeago(new Date(e))},x=function(e){var t="";return $.each(g,function(i,r){g[i].Id==e&&(t=r.Picture)}),t},w=function(e){var t="";return $.each(g,function(i,r){g[i].Id==e&&(t=r.DisplayName)}),t},P=function(){$(".comments-text-box").removeClass("comments-reply-box"),$(".comments-text-box li:first-child").data("reply-mode",""),$(".comments-text-box li:first-child").data("id","")},A=function(e,i){return s.totalRecords=p.totalRecords,g=i,b({totalPages:e.totalPages,actualPage:e.actualPage}),$.tmpl(t.commentsList,{comments:e.comments,User:g,CurrentUser:n,RelatedElementId:null,getCategoryColor:f,replaceTextToSmiles:t.replaceTextToSmiles,timeAgo:v,getUserPicture:x,getUserName:w,readOnly:l})},b=function(i,r){var a=i.totalPages||1,s=a>1,n=i.actualPage||1,d=$(".comments-pagination")||r,l={};l.pagination=s,l.totalPages=a,l.pages=[],l.page=n,d.empty(),s?d.show():d.hide();for(var c=5>a?a:5,p=1;p<=c;p++)l.pages.push({pageNumber:p});var u=$.tmpl(t.paginationTemplate,l).html();$(d).append(u),$("ul").bizagiPagination({totalPages:l.totalPages,actualPage:l.page,listElement:$("ul",d),clickCallBack:function(i){$.when(t.getComments({idCase:e.caseNumber,idColorCategory:o,pag:i.page})).done(function(e){T(e,e.users,!0)})}})},T=function(e,t){return s.totalRecords=e.totalRecords,$("#comment-list").empty(),(r=A(e,t)).appendTo($("#comment-list")),i.subprocess=$("#comment-list"),R(),r};l||bizagi.util.setInterval({name:"comments",params:{idCase:bizagi.context.idCase},singleton:!0,timeout:3e4,killWhenExitContext:!1,context:'(bizagi.context.widget=="'+t.getWidgetName()+'" && bizagi.context.idCase == "'+e.caseNumber+'" && bizagi.context.commentsFocus)',call:function(e){e=e||{};var i=t.getStorage("maxIdComment_"+e.idCase);$.when(t.dataService.getNewComments({idCase:e.idCase,idLastComment:i})).done(function(i){if(i.newComments>0||i.newReplies>0){var r=i.newComments+i.newReplies,a=t.getStorage("bufferLocalNewComments_"+e.idCase)||r,s=$(".comments-update").data("message").replace(/{totalNewComments}/,r-a);r>a&&($(".comments-update").text(s),$(".comments-update").show().click(function(e){e.isPropagationStopped()||(e.stopPropagation(),$("#filterClear").click())}))}})}}),u=p,m=g,s.totalRecords=u.totalRecords,g=m,r=$.tmpl(t.comments,{comments:u.comments,readOnly:l,User:g,idCase:e.caseNumber,CurrentUser:n,RelatedElementId:null,getCategoryColor:f,replaceTextToSmiles:t.replaceTextToSmiles,timeAgo:v,getUserPicture:x,getUserName:w,getCategoryName:function(e){return t.resources.getResource("workportal-widget-comments-"+e)}}),$(".comment-frame .button-category",r).tooltip(),$(r).find("*").off("click"),$(".button-refresh",r).click(function(){$(".comments-update").hide(),$.when(t.getComments({idCase:e.caseNumber,idColorCategory:o},c)).done(function(e){var t=e.users||[];$("#comment-list").empty(),(r=T(e,t)).appendTo($("#comment-list")),i.subprocess=$("#comment-list"),R()})}),$(".make-new-comments",r).click(function(){P(),$(".comments-text-box li:first-child").slideDown("fast"),$(".comment-box",r).focus().fadeIn(),$(this).hide(),$(".action-buttons").show().slideDown("fast"),$(".text-to-reply").hide()}),$(".comment-box",r).blur(function(){0==$(".comments-text-box textarea").val().length&&($(".comments-text-box textarea").val(""),$(".comments-text-box li:first-child").slideUp("fast"),$(".make-new-comments").fadeIn(),$(".action-buttons").hide(),P())}),$(".send-new-comments",r).click(function(){var i=$(".comments-text-box textarea").val();if(0!=i.length){if("true"==$(".comments-text-box li:first-child").data("reply-mode")){var r=$(".comments-text-box li:first-child").data("id"),a=$("li[data-id='"+r+"']");$.when(t.dataService.makeNewReply({idCase:e.caseNumber,idComment:r,comment:i})).done(function(i){t.incrementStorage("bufferLocalNewComments_"+e.caseNumber,1);var r,o,d=(r=i,o=i.users,s.totalRecords=p.totalRecords,g=o,$.tmpl(t.commentsReplies,{Replies:r.Replies,User:g,CurrentUser:n,RelatedElementId:null,getCategoryColor:f,replaceTextToSmiles:t.replaceTextToSmiles,timeAgo:v,getUserPicture:x,getUserName:w,readOnly:l}));$(".reply-list",a).append(d),$(".reply-list li:last",a).show("highlight","slow"),h($(".reply-list",a)),y($(a))})}else $.when(t.dataService.makeNewComment({idCase:e.caseNumber,comment:i})).done(function(i){t.incrementStorage("bufferLocalNewComments_"+e.caseNumber,1);var r=A(i,i.users);$(".reply-toggler",r).addClass("hidden"),$("#comment-list").prepend(r),$("#comment-list li:first").show("highlight","fast")});$(".comments-text-box li:first-child").slideUp("fast"),$(".make-new-comments").show(),$(".action-buttons").hide(),$(".comments-text-box textarea").val(""),$(".time-ago").timeago(),P()}});function C(){$(".categories-dropdownmenu").empty(),$(".categories-dropdownmenu").data("visible",!1)}$(r).delegate(".editBox","keypress",function(e){13==e.keyCode&&$(this).parent().find(".btnSave").click()}),$(r).delegate(".btnSave","click",function(){var e=$(this).parent(),i=e.attr("data-old-icon"),a=e.attr("data-old-text"),s=$(this).siblings(".editBox").val(),o=e.html(a).find("a span.filter-icon"),n=$("#filterText").attr("class");$("#filterText").hasClass("disable")||i!==n||($("#filterText",r).text(s),$(".filter-dropdown").removeClass("is-visible").addClass("is-hidden")),e.removeAttr("data-old-text").html(a).find("a").empty().append(o,s).removeClass("no-pad"),t.dataService.renameCommentCategory({idColorCategory:e.data("category-id"),colorName:s})}),$(r).delegate(".btnDiscard","click",function(){for(var e,t,i=$(this).parent(),r=i.length,a=0;a<r;a++)e=i[a],t=$(e).attr("data-old-text"),$(e).removeAttr("data-old-text").html(t).removeClass("no-pad")});var k=function(e){var i=$(".categories-dropdownmenu"),r=e.referer||$(),a=e.css||"",s=e.idComment||"",o=e.position||{my:"right top",at:"right top",collision:"fit",of:r.selector||r};i.data("name")!=e.name?(C(),i.data("name",e.name||""),k(e)):i.data("visible")?C():$.when(t.dataService.getCommentsCategories()).done(function(n){var d;i.empty(),i.position(o),(d={categories:n.categories,css:a,idComment:s,referer:r},$.tmpl(t.commentsDropdown,{categories:d.categories,css:d.css,idComment:d.idComment,getCategoryColor:f,readOnly:l})).appendTo(i),i.data("visible",!0),i.data("name",e.name||"")})};$("#buttonFilter",r).bind("click",function(){var e={referer:$("#buttonFilter",r),name:"editCategories",css:"editCategories"};l&&(e.position={my:"left bottom",at:"left bottom",collision:"fit",of:this}),k(e)});var I=function(){return $(".comment-controls").data("idcase")};$(r).delegate(".close","click",C),$(r).delegate(".btnEdit","click",function(){var e=$(this),t=e.parent(),i=t.text().replace(/^\s+|\s+$/g,""),r=e.siblings("a").children("span").attr("class").split(" ")[1],a=t.html(),s='<input type="text" class="editBox" value="'+i+'" /> <span class="filter-icon-ctrl btnSave"></span> <span class="filter-icon-ctrl btnDiscard"></span>';t.attr("data-old-icon",r),t.html(s).attr("data-old-text",a).addClass("no-pad"),$(".editBox").select()}),$(r).delegate(".filter-category","click",function(e){if(!e.isPropagationStopped()){var i=$(this).parent().data("category-id"),r=$(".categories-dropdownmenu").data("name"),a=bizagi.util.trim($(this).text());if("setCategories"==r){var s=$(this).data("idcomment");$.when(t.dataService.setCommentCategory({idCase:I,idColorCategory:i,idComment:s})).done(function(){$("#"+s).removeClass(),$("#"+s).addClass("button-category"),$("#"+s).addClass(f(i)),C()})}else $.when(t.dataService.getComments({idCase:I,idColorCategory:i})).done(function(e){var t=$(".comment-filter > #buttonFilter");i>=0?(o=i,$(".button-refresh").data("category-id",i),$("#filterName").removeClass("is-hidden"),$("#filterText").text(a)):($("#filterName").addClass("is-hidden"),$("#filterText").text(""),o=-1),$("#comment-list").empty(),$("#comment-list").append(A(e,e.users)),t.removeClass(),t.addClass("button-category "+f(i)),C(),$(".button-refresh").data("category-id",i),R(),$(".button-refresh").click()});e.stopPropagation()}}),$(r).delegate("#filterClear","click",function(){$("#filterClear").bind("click",function(e){e.isPropagationStopped()||(e.stopPropagation(),o=-1,$(".comment-filter > #buttonFilter").removeClass(),$(".comment-filter > #buttonFilter").addClass("button-category "+f()),$(".button-refresh").data("category-id",""),$("#filterName").addClass("is-hidden"),$("#filterText").text(""),$(".button-refresh").click())})}),l||($(r).on("click",".button-category[data-own='true']",function(e){if(!l&&!e.isPropagationStopped()){e.stopPropagation();k({referer:this,name:"setCategories",css:"setCategories",idComment:$(this).data("id"),position:{my:"right top",at:"left bottom",collision:"fit",of:this}})}}),$(r).on("click",".button-reply",function(e){if(!e.isPropagationStopped()){var t=$(this).data("id"),i=$("li[data-id='"+t+"'] .comment-text").first().text();$(".comments-text-box li:first-child").data("reply-mode","true"),$(".comments-text-box li:first-child").data("id",t),$(".text-to-reply").text(i),$(".text-to-reply").show(),$(".comments-text-box textarea").focus(),$(".comments-text-box").addClass("comments-reply-box"),$(".comments-text-box li:first-child").show().slideDown("fast"),$(".make-new-comments").hide(),$(".action-buttons").show().slideDown("fast"),e.stopPropagation()}}),$(r).on("click",".button-delete",function(e){var i=$(this).parents("li:first"),r=$(this).data("id"),a=i.parent();$.tmpl(t.commentsConfirm).dialog({resizable:!0,modal:!0,title:t.getResource("workportal-widget-comments-title"),buttons:[{text:t.getResource("workportal-widget-comments-delete"),click:function(){if(a.hasClass("reply-list")){var e=i.parents("li:first").data("id");$.when(t.dataService.removeReply({idCase:I,idComment:e,idReply:r}).done(function(e){s(e)}))}else $.when(t.dataService.removeComment({idCase:I,idComment:r}).done(function(e){s(e)}));var s=function(e){e.action?$.when(i.hide("highlight","fast")).done(function(){i.remove(),a.hasClass("reply-list")&&(a.find("li").hide(),a.find("li:last").show(),y(a.parents("li:first")))}):alert(e.message)};$(this).dialog("close"),bizagi.workportal.desktop.popup.closePopupInstance()}},{text:t.getResource("workportal-widget-comments-cancel"),click:function(){$(this).dialog("close")}}]})}));var R=function(){$.each($(".reply-list",r),function(){var e=$(".reply-toggler",$(this).parents("li:first"));$("li",this).length>1?($(this).children("li:not(:last)").hide(),e.removeClass("hidden")):e.addClass("hidden")})};$(r).on("click",".reply-toggler",function(e){var t;e.isPropagationStopped()||(e.stopPropagation(),"hide"!=$(this).data("toggle-action")?(t=$(this).parent().find("ul"),$(t).children("li:not(:last)").slideDown("fast"),$("span",this).addClass("expanded"),$(this).data("toggle-action","hide")):(h($(this).parent().find("ul")),$("span",this).removeClass("expanded"),$(this).data("toggle-action","show")))}),R(),r.appendTo(d),b({totalPages:p.totalPages,actualPage:p.actualPage},$(".comments-pagination")),a.resolve(d)}),a.promise()},getComments:function(e,t){var i=new $.Deferred;return e=e||{},t=t||function(){},$.when(this.dataService.getComments(e)).done(function(e){t(e),i.resolve(e)}),i.promise()},replaceTextToSmiles:function(e){for(var t=e,i="",r={"<br>":"\n","[<]":"&lt;","[>]":"&gt;"};i!=t;)$.each(r,function(e,r){var a=new RegExp(e,"gm");i=t,t=t.replace(a,r,"gm")});return $.each({":)":"smiley",":!":"sarcastic",":$":"embarrassed",":(":"sad",":'(":"cry",";)":"wink",":|":"disappointed",":D":"happy",":o":"surprise",":p":"tongue",":s":"confused"," Y ":"yes"," N ":"no"},function(e,i){var r=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),a=new RegExp(r),s="<div class='smiles "+i+"'></div>";t=t.replace(a,s,"g")}),t},setStorage:function(e,t){var i="";return e=e||"",sessionStorage&&(i=sessionStorage.setItem(e,t)),i},incrementStorage:function(e,t){var i=!0;if(sessionStorage){var r=parseInt(this.getStorage(e))+parseInt(t);this.setStorage(e,r)}else i=!1;return i},getStorage:function(e){var t=void 0;return e=e||"",sessionStorage&&(t=sessionStorage.getItem(e)),t}};
//# sourceMappingURL=../../../Maps/desktop/portals.production.js.map
