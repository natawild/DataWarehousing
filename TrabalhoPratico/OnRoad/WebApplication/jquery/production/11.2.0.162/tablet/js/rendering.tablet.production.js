var bizagi=bizagi||{};bizagi.injector=function(){var e={},t={},i={},n=function(t,i){var n=e[t];if($.isNumeric(i))var r=i;else if("object"===$.type(i))var a=i;if(r=r||0,n)return n(r,a);throw"Service does not exist. "+t};return{get:n,getNewInstance:function(i,r){return e[i]=t[i],n(i,r)},register:function(r,a,o){if(s=a,"[object Array]"!==Object.prototype.toString.call(s))throw"Must pass array.";var s;if("function"!=typeof a[a.length-1])throw"Must pass function to invoke.";t[r]=e[r]=function(t,s){var l,u,c,d=t||0,p=function(){},h=a[a.length-1],g=1===a.length?a[0].$$deps||[]:a.slice(0,a.length-1);return i[r]&&void 0!==i[r].__proto__&&i[r].__proto__.hasOwnProperty("dispose")&&i[r].dispose(),p.prototype=h.prototype,c=function(e,t,i,r,a){var o=0,s=[],l=r||0;if(l>20)throw"Maximum recursion at "+l;for(;o<t.length;o+=1)s.push(n(t[o],l+1));return a&&s.push(a),e.apply(i,s)}(h,g,u=new p,d+1,s),l=c||u,o||(e[r]=function(){return l}),i[r]=l,l}},registerInstance:function(t,i){e[t]=function(){return i}},isRegistered:function(t){return!!e[t]}}}(),navigator.appName.indexOf("Internet Explorer")>0&&(8==document.documentMode||9==document.documentMode)?function(e,t){var i,n,r=e.document,a=e.location,o=e.navigator,s=e.jQuery,l=e.$,u=Array.prototype.push,c=Array.prototype.slice,d=Array.prototype.indexOf,p=Object.prototype.toString,h=Object.prototype.hasOwnProperty,g=String.prototype.trim,f=function(e,t){return new f.fn.init(e,t,i)},m=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,v=/\S/,b=/\s+/,y=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,x=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,C=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,_=/^[\],:{}\s]*$/,w=/(?:^|:|,)(?:\s*\[)+/g,E=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,T=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,z=/^-ms-/,R=/-([\da-z])/gi,A=function(e,t){return(t+"").toUpperCase()},P=function(){r.addEventListener?(r.removeEventListener("DOMContentLoaded",P,!1),f.ready()):"complete"===r.readyState&&(r.detachEvent("onreadystatechange",P),f.ready())},D={};f.fn=f.prototype={constructor:f,init:function(e,i,n){var a,o,s;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("string"==typeof e){if(!(a="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:x.exec(e))||!a[1]&&i)return!i||i.jquery?(i||n).find(e):this.constructor(i).find(e);if(a[1])return s=(i=i instanceof f?i[0]:i)&&i.nodeType?i.ownerDocument||i:r,e=f.parseHTML(a[1],s,!0),C.test(a[1])&&f.isPlainObject(i)&&this.attr.call(e,i,!0),f.merge(this,e);if((o=r.getElementById(a[2]))&&o.parentNode){if(o.id!==a[2])return n.find(e);this.length=1,this[0]=o}return this.context=r,this.selector=e,this}return f.isFunction(e)?n.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),f.makeArray(e,this))},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return c.call(this)},get:function(e){return null==e?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,i){var n=f.merge(this.constructor(),e);return n.prevObject=this,n.context=this.context,"find"===t?n.selector=this.selector+(this.selector?" ":"")+i:t&&(n.selector=this.selector+"."+t+"("+i+")"),n},each:function(e,t){return f.each(this,e,t)},ready:function(e){return f.ready.promise().done(e),this},eq:function(e){return-1===(e=+e)?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(c.apply(this,arguments),"slice",c.call(arguments).join(","))},map:function(e){return this.pushStack(f.map(this,function(t,i){return e.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:u,sort:[].sort,splice:[].splice},f.fn.init.prototype=f.fn,f.extend=f.fn.extend=function(){var e,i,n,r,a,o,s=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},l=2),"object"==typeof s||f.isFunction(s)||(s={}),u===l&&(s=this,--l);l<u;l++)if(null!=(e=arguments[l]))for(i in e)n=s[i],s!==(r=e[i])&&(c&&r&&(f.isPlainObject(r)||(a=f.isArray(r)))?(a?(a=!1,o=n&&f.isArray(n)?n:[]):o=n&&f.isPlainObject(n)?n:{},s[i]=f.extend(c,o,r)):r!==t&&(s[i]=r));return s},f.extend({noConflict:function(t){return e.$===f&&(e.$=l),t&&e.jQuery===f&&(e.jQuery=s),f},isReady:!1,readyWait:1,holdReady:function(e){e?f.readyWait++:f.ready(!0)},ready:function(e){if(!0===e?!--f.readyWait:!f.isReady){if(!r.body)return setTimeout(f.ready,1);f.isReady=!0,!0!==e&&--f.readyWait>0||(n.resolveWith(r,[f]),f.fn.trigger&&f(r).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===f.type(e)},isArray:Array.isArray||function(e){return"array"===f.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):D[p.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==f.type(e)||e.nodeType||f.isWindow(e))return!1;try{if(e.constructor&&!h.call(e,"constructor")&&!h.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var i;for(i in e);return i===t||h.call(e,i)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,i){var n;return e&&"string"==typeof e?("boolean"==typeof t&&(i=t,t=0),t=t||r,(n=C.exec(e))?[t.createElement(n[1])]:(n=f.buildFragment([e],t,i?null:[]),f.merge([],(n.cacheable?f.clone(n.fragment):n.fragment).childNodes))):null},parseJSON:function(t){return t&&"string"==typeof t?(t=f.trim(t),e.JSON&&e.JSON.parse?e.JSON.parse(t):_.test(t.replace(E,"@").replace(T,"]").replace(w,""))?new Function("return "+t)():void f.error("Invalid JSON: "+t)):null},parseXML:function(i){var n,r;if(!i||"string"!=typeof i)return null;try{e.DOMParser?(r=new DOMParser,n=r.parseFromString(i,"text/xml")):((n=new ActiveXObject("Microsoft.XMLDOM")).async="false",n.loadXML(i))}catch(e){n=t}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||f.error("Invalid XML: "+i),n},noop:function(){},globalEval:function(t){t&&v.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(z,"ms-").replace(R,A)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,i,n){var r,a=0,o=e.length,s=o===t||f.isFunction(e);if(n)if(s){for(r in e)if(!1===i.apply(e[r],n))break}else for(;a<o&&!1!==i.apply(e[a++],n););else if(s){for(r in e)if(!1===i.call(e[r],r,e[r]))break}else for(;a<o&&!1!==i.call(e[a],a,e[a++]););return e},trim:g&&!g.call("\ufeffÂ ")?function(e){return null==e?"":g.call(e)}:function(e){return null==e?"":(e+"").replace(y,"")},makeArray:function(e,t){var i,n=t||[];return null!=e&&(i=f.type(e),null==e.length||"string"===i||"function"===i||"regexp"===i||f.isWindow(e)?u.call(n,e):f.merge(n,e)),n},inArray:function(e,t,i){var n;if(t){if(d)return d.call(t,e,i);for(n=t.length,i=i?i<0?Math.max(0,n+i):i:0;i<n;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,i){var n=i.length,r=e.length,a=0;if("number"==typeof n)for(;a<n;a++)e[r++]=i[a];else for(;i[a]!==t;)e[r++]=i[a++];return e.length=r,e},grep:function(e,t,i){var n=[],r=0,a=e.length;for(i=!!i;r<a;r++)i!==!!t(e[r],r)&&n.push(e[r]);return n},map:function(e,i,n){var r,a,o=[],s=0,l=e.length;if(e instanceof f||l!==t&&"number"==typeof l&&(l>0&&e[0]&&e[l-1]||0===l||f.isArray(e)))for(;s<l;s++)null!=(r=i(e[s],s,n))&&(o[o.length]=r);else for(a in e)null!=(r=i(e[a],a,n))&&(o[o.length]=r);return o.concat.apply([],o)},guid:1,proxy:function(e,i){var n,r,a;return"string"==typeof i&&(n=e[i],i=e,e=n),f.isFunction(e)?(r=c.call(arguments,2),(a=function(){return e.apply(i,r.concat(c.call(arguments)))}).guid=e.guid=e.guid||f.guid++,a):t},access:function(e,i,n,r,a,o,s){var l,u=null==n,c=0,d=e.length;if(n&&"object"==typeof n){for(c in n)f.access(e,i,c,n[c],1,o,r);a=1}else if(r!==t){if(l=s===t&&f.isFunction(r),u&&(l?(l=i,i=function(e,t,i){return l.call(f(e),i)}):(i.call(e,r),i=null)),i)for(;c<d;c++)i(e[c],n,l?r.call(e[c],c,i(e[c],n)):r,s);a=1}return a?e:u?i.call(e):d?i(e[0],n):o},now:function(){return(new Date).getTime()}}),f.ready.promise=function(t){if(!n)if(n=f.Deferred(),"complete"===r.readyState)setTimeout(f.ready,1);else if(r.addEventListener)r.addEventListener("DOMContentLoaded",P,!1),e.addEventListener("load",f.ready,!1);else{r.attachEvent("onreadystatechange",P),e.attachEvent("onload",f.ready);var i=!1;try{i=null==e.frameElement&&r.documentElement}catch(e){}i&&i.doScroll&&function e(){if(!f.isReady){try{i.doScroll("left")}catch(t){return setTimeout(e,50)}f.ready()}}()}return n.promise(t)},f.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){D["[object "+t+"]"]=t.toLowerCase()}),i=f(r);var S={};f.Callbacks=function(e){var i,n;e="string"==typeof e?S[e]||(n=S[i=e]={},f.each(i.split(b),function(e,t){n[t]=!0}),n):f.extend({},e);var r,a,o,s,l,u,c=[],d=!e.once&&[],p=function(t){for(r=e.memory&&t,a=!0,u=s||0,s=0,l=c.length,o=!0;c&&u<l;u++)if(!1===c[u].apply(t[0],t[1])&&e.stopOnFalse){r=!1;break}o=!1,c&&(d?d.length&&p(d.shift()):r?c=[]:h.disable())},h={add:function(){if(c){var t=c.length;!function t(i){f.each(i,function(i,n){var r=f.type(n);"function"===r?e.unique&&h.has(n)||c.push(n):n&&n.length&&"string"!==r&&t(n)})}(arguments),o?l=c.length:r&&(s=t,p(r))}return this},remove:function(){return c&&f.each(arguments,function(e,t){for(var i;(i=f.inArray(t,c,i))>-1;)c.splice(i,1),o&&(i<=l&&l--,i<=u&&u--)}),this},has:function(e){return f.inArray(e,c)>-1},empty:function(){return c=[],this},disable:function(){return c=d=r=t,this},disabled:function(){return!c},lock:function(){return d=t,r||h.disable(),this},locked:function(){return!d},fireWith:function(e,t){return t=[e,(t=t||[]).slice?t.slice():t],!c||a&&!d||(o?d.push(t):p(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!a}};return h},f.extend({Deferred:function(e){var t=[["resolve","done",f.Callbacks("once memory"),"resolved"],["reject","fail",f.Callbacks("once memory"),"rejected"],["notify","progress",f.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return f.Deferred(function(i){f.each(t,function(t,n){var a=n[0],o=e[t];r[n[1]](f.isFunction(o)?function(){var e=o.apply(this,arguments);e&&f.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[a+"With"](this===r?i:this,[e])}:i[a])}),e=null}).promise()},promise:function(e){return null!=e?f.extend(e,n):n}},r={};return n.pipe=n.then,f.each(t,function(e,a){var o=a[2],s=a[3];n[a[1]]=o.add,s&&o.add(function(){i=s},t[1^e][2].disable,t[2][2].lock),r[a[0]]=o.fire,r[a[0]+"With"]=o.fireWith}),n.promise(r),e&&e.call(r,r),r},when:function(e){var t,i,n,r=0,a=c.call(arguments),o=a.length,s=1!==o||e&&f.isFunction(e.promise)?o:0,l=1===s?e:f.Deferred(),u=function(e,i,n){return function(r){i[e]=this,n[e]=arguments.length>1?c.call(arguments):r,n===t?l.notifyWith(i,n):--s||l.resolveWith(i,n)}};if(o>1)for(t=new Array(o),i=new Array(o),n=new Array(o);r<o;r++)a[r]&&f.isFunction(a[r].promise)?a[r].promise().done(u(r,n,a)).fail(l.reject).progress(u(r,i,t)):--s;return s||l.resolveWith(n,a),l.promise()}}),f.support=function(){var t,i,n,a,o,s,l,u,c,d,p,h=r.createElement("div");if(h.setAttribute("className","t"),h.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=h.getElementsByTagName("*"),n=h.getElementsByTagName("a")[0],!i||!n||!i.length)return{};o=(a=r.createElement("select")).appendChild(r.createElement("option")),s=h.getElementsByTagName("input")[0],n.style.cssText="top:1px;float:left;opacity:.5",t={leadingWhitespace:3===h.firstChild.nodeType,tbody:!h.getElementsByTagName("tbody").length,htmlSerialize:!!h.getElementsByTagName("link").length,style:/top/.test(n.getAttribute("style")),hrefNormalized:"/a"===n.getAttribute("href"),opacity:/^0.5/.test(n.style.opacity),cssFloat:!!n.style.cssFloat,checkOn:"on"===s.value,optSelected:o.selected,getSetAttribute:"t"!==h.className,enctype:!!r.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==r.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===r.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},s.checked=!0,t.noCloneChecked=s.cloneNode(!0).checked,a.disabled=!0,t.optDisabled=!o.disabled;try{delete h.test}catch(e){t.deleteExpando=!1}if(!h.addEventListener&&h.attachEvent&&h.fireEvent&&(h.attachEvent("onclick",p=function(){t.noCloneEvent=!1}),h.cloneNode(!0).fireEvent("onclick"),h.detachEvent("onclick",p)),(s=r.createElement("input")).value="t",s.setAttribute("type","radio"),t.radioValue="t"===s.value,s.setAttribute("checked","checked"),s.setAttribute("name","t"),h.appendChild(s),(l=r.createDocumentFragment()).appendChild(h.lastChild),t.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=s.checked,l.removeChild(s),l.appendChild(h),h.attachEvent)for(c in{submit:!0,change:!0,focusin:!0})(d=(u="on"+c)in h)||(h.setAttribute(u,"return;"),d="function"==typeof h[u]),t[c+"Bubbles"]=d;return f(function(){var i,n,a,o,s="padding:0;margin:0;border:0;display:block;overflow:hidden;",l=r.getElementsByTagName("body")[0];l&&((i=r.createElement("div")).style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",l.insertBefore(i,l.firstChild),n=r.createElement("div"),i.appendChild(n),n.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(a=n.getElementsByTagName("td"))[0].style.cssText="padding:0;margin:0;border:0;display:none",d=0===a[0].offsetHeight,a[0].style.display="",a[1].style.display="none",t.reliableHiddenOffsets=d&&0===a[0].offsetHeight,n.innerHTML="",n.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===n.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==l.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(n,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(n,null)||{width:"4px"}).width,(o=r.createElement("div")).style.cssText=n.style.cssText=s,o.style.marginRight=o.style.width="0",n.style.width="1px",n.appendChild(o),t.reliableMarginRight=!parseFloat((e.getComputedStyle(o,null)||{}).marginRight)),void 0!==n.style.zoom&&(n.innerHTML="",n.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===n.offsetWidth,n.style.display="block",n.style.overflow="visible",n.innerHTML="<div></div>",n.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==n.offsetWidth,i.style.zoom=1),l.removeChild(i),i=n=a=o=null)}),l.removeChild(h),i=n=a=o=s=l=h=null,t}();var I=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,F=/([A-Z])/g;function k(e,i,n){if(n===t&&1===e.nodeType){var r="data-"+i.replace(F,"-$1").toLowerCase();if("string"==typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:I.test(n)?f.parseJSON(n):n)}catch(e){}f.data(e,i,n)}else n=t}return n}function N(e){var t;for(t in e)if(("data"!==t||!f.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}f.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return!!(e=e.nodeType?f.cache[e[f.expando]]:e[f.expando])&&!N(e)},data:function(e,i,n,r){if(f.acceptData(e)){var a,o,s=f.expando,l="string"==typeof i,u=e.nodeType,c=u?f.cache:e,d=u?e[s]:e[s]&&s;if(d&&c[d]&&(r||c[d].data)||!l||n!==t)return d||(u?e[s]=d=f.deletedIds.pop()||f.guid++:d=s),c[d]||(c[d]={},u||(c[d].toJSON=f.noop)),"object"!=typeof i&&"function"!=typeof i||(r?c[d]=f.extend(c[d],i):c[d].data=f.extend(c[d].data,i)),a=c[d],r||(a.data||(a.data={}),a=a.data),n!==t&&(a[f.camelCase(i)]=n),l?null==(o=a[i])&&(o=a[f.camelCase(i)]):o=a,o}},removeData:function(e,t,i){if(f.acceptData(e)){var n,r,a,o=e.nodeType,s=o?f.cache:e,l=o?e[f.expando]:f.expando;if(s[l]){if(t&&(n=i?s[l]:s[l].data)){f.isArray(t)||(t=t in n?[t]:(t=f.camelCase(t))in n?[t]:t.split(" "));for(r=0,a=t.length;r<a;r++)delete n[t[r]];if(!(i?N:f.isEmptyObject)(n))return}(i||(delete s[l].data,N(s[l])))&&(o?f.cleanData([e],!0):f.support.deleteExpando||s!=s.window?delete s[l]:s[l]=null)}}},_data:function(e,t,i){return f.data(e,t,i,!0)},acceptData:function(e){var t=e.nodeName&&f.noData[e.nodeName.toLowerCase()];return!t||!0!==t&&e.getAttribute("classid")===t}}),f.fn.extend({data:function(e,i){var n,r,a,o,s,l=this[0],u=0,c=null;if(e===t){if(this.length&&(c=f.data(l),1===l.nodeType&&!f._data(l,"parsedAttrs"))){for(s=(a=l.attributes).length;u<s;u++)(o=a[u].name).indexOf("data-")||(o=f.camelCase(o.substring(5)),k(l,o,c[o]));f._data(l,"parsedAttrs",!0)}return c}return"object"==typeof e?this.each(function(){f.data(this,e)}):((n=e.split(".",2))[1]=n[1]?"."+n[1]:"",r=n[1]+"!",f.access(this,function(i){if(i===t)return(c=this.triggerHandler("getData"+r,[n[0]]))===t&&l&&(c=f.data(l,e),c=k(l,e,c)),c===t&&n[1]?this.data(n[0]):c;n[1]=i,this.each(function(){var t=f(this);t.triggerHandler("setData"+r,n),f.data(this,e,i),t.triggerHandler("changeData"+r,n)})},null,i,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){f.removeData(this,e)})}}),f.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=f._data(e,t),i&&(!n||f.isArray(i)?n=f._data(e,t,f.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=f.queue(e,t),n=i.length,r=i.shift(),a=f._queueHooks(e,t);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete a.stop,r.call(e,function(){f.dequeue(e,t)},a)),!n&&a&&a.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return f._data(e,i)||f._data(e,i,{empty:f.Callbacks("once memory").add(function(){f.removeData(e,t+"queue",!0),f.removeData(e,i,!0)})})}}),f.fn.extend({queue:function(e,i){var n=2;return"string"!=typeof e&&(i=e,e="fx",n--),arguments.length<n?f.queue(this[0],e):i===t?this:this.each(function(){var t=f.queue(this,e,i);f._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&f.dequeue(this,e)})},dequeue:function(e){return this.each(function(){f.dequeue(this,e)})},delay:function(e,t){return e=f.fx&&f.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,i){var n,r=1,a=f.Deferred(),o=this,s=this.length,l=function(){--r||a.resolveWith(o,[o])};for("string"!=typeof e&&(i=e,e=t),e=e||"fx";s--;)(n=f._data(o[s],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(l));return l(),a.promise(i)}});var O,M,B,$=/[\t\r\n]/g,L=/\r/g,j=/^(?:button|input)$/i,H=/^(?:button|input|object|select|textarea)$/i,X=/^a(?:rea|)$/i,V=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,U=f.support.getSetAttribute;f.fn.extend({attr:function(e,t){return f.access(this,f.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){f.removeAttr(this,e)})},prop:function(e,t){return f.access(this,f.prop,e,t,arguments.length>1)},removeProp:function(e){return e=f.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(e){}})},addClass:function(e){var t,i,n,r,a,o,s;if(f.isFunction(e))return this.each(function(t){f(this).addClass(e.call(this,t,this.className))});if(e&&"string"==typeof e)for(t=e.split(b),i=0,n=this.length;i<n;i++)if(1===(r=this[i]).nodeType)if(r.className||1!==t.length){for(a=" "+r.className+" ",o=0,s=t.length;o<s;o++)a.indexOf(" "+t[o]+" ")<0&&(a+=t[o]+" ");r.className=f.trim(a)}else r.className=e;return this},removeClass:function(e){var i,n,r,a,o,s,l;if(f.isFunction(e))return this.each(function(t){f(this).removeClass(e.call(this,t,this.className))});if(e&&"string"==typeof e||e===t)for(i=(e||"").split(b),s=0,l=this.length;s<l;s++)if(1===(r=this[s]).nodeType&&r.className){for(n=(" "+r.className+" ").replace($," "),a=0,o=i.length;a<o;a++)for(;n.indexOf(" "+i[a]+" ")>=0;)n=n.replace(" "+i[a]+" "," ");r.className=e?f.trim(n):""}return this},toggleClass:function(e,t){var i=typeof e,n="boolean"==typeof t;return f.isFunction(e)?this.each(function(i){f(this).toggleClass(e.call(this,i,this.className,t),t)}):this.each(function(){if("string"===i)for(var r,a=0,o=f(this),s=t,l=e.split(b);r=l[a++];)o[(s=n?s:!o.hasClass(r))?"addClass":"removeClass"](r);else"undefined"!==i&&"boolean"!==i||(this.className&&f._data(this,"__className__",this.className),this.className=this.className||!1===e?"":f._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;i<n;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace($," ").indexOf(t)>=0)return!0;return!1},val:function(e){var i,n,r,a=this[0];return arguments.length?(r=f.isFunction(e),this.each(function(n){var a,o=f(this);1===this.nodeType&&(null==(a=r?e.call(this,n,o.val()):e)?a="":"number"==typeof a?a+="":f.isArray(a)&&(a=f.map(a,function(e){return null==e?"":e+""})),(i=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&i.set(this,a,"value")!==t||(this.value=a))})):a?(i=f.valHooks[a.type]||f.valHooks[a.nodeName.toLowerCase()])&&"get"in i&&(n=i.get(a,"value"))!==t?n:"string"==typeof(n=a.value)?n.replace(L,""):null==n?"":n:void 0}}),f.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,i,n=e.options,r=e.selectedIndex,a="select-one"===e.type||r<0,o=a?null:[],s=a?r+1:n.length,l=r<0?s:a?r:0;l<s;l++)if(((i=n[l]).selected||l===r)&&(f.support.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!f.nodeName(i.parentNode,"optgroup"))){if(t=f(i).val(),a)return t;o.push(t)}return o},set:function(e,t){var i=f.makeArray(t);return f(e).find("option").each(function(){this.selected=f.inArray(f(this).val(),i)>=0}),i.length||(e.selectedIndex=-1),i}}},attrFn:{},attr:function(e,i,n,r){var a,o,s,l=e.nodeType;if(e&&3!==l&&8!==l&&2!==l)return r&&f.isFunction(f.fn[i])?f(e)[i](n):void 0===e.getAttribute?f.prop(e,i,n):((s=1!==l||!f.isXMLDoc(e))&&(i=i.toLowerCase(),o=f.attrHooks[i]||(V.test(i)?M:O)),n!==t?null===n?void f.removeAttr(e,i):o&&"set"in o&&s&&(a=o.set(e,n,i))!==t?a:(e.setAttribute(i,n+""),n):o&&"get"in o&&s&&null!==(a=o.get(e,i))?a:null===(a=e.getAttribute(i))?t:a)},removeAttr:function(e,t){var i,n,r,a,o=0;if(t&&1===e.nodeType)for(n=t.split(b);o<n.length;o++)(r=n[o])&&(i=f.propFix[r]||r,(a=V.test(r))||f.attr(e,r,""),e.removeAttribute(U?r:i),a&&i in e&&(e[i]=!1))},attrHooks:{type:{set:function(e,t){if(j.test(e.nodeName)&&e.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&"radio"===t&&f.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}},value:{get:function(e,t){return O&&f.nodeName(e,"button")?O.get(e,t):t in e?e.value:null},set:function(e,t,i){if(O&&f.nodeName(e,"button"))return O.set(e,t,i);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,i,n){var r,a,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return(1!==o||!f.isXMLDoc(e))&&(i=f.propFix[i]||i,a=f.propHooks[i]),n!==t?a&&"set"in a&&(r=a.set(e,n,i))!==t?r:e[i]=n:a&&"get"in a&&null!==(r=a.get(e,i))?r:e[i]},propHooks:{tabIndex:{get:function(e){var i=e.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):H.test(e.nodeName)||X.test(e.nodeName)&&e.href?0:t}}}}),M={get:function(e,i){var n,r=f.prop(e,i);return!0===r||"boolean"!=typeof r&&(n=e.getAttributeNode(i))&&!1!==n.nodeValue?i.toLowerCase():t},set:function(e,t,i){var n;return!1===t?f.removeAttr(e,i):((n=f.propFix[i]||i)in e&&(e[n]=!0),e.setAttribute(i,i.toLowerCase())),i}},U||(B={name:!0,id:!0,coords:!0},O=f.valHooks.button={get:function(e,i){var n;return(n=e.getAttributeNode(i))&&(B[i]?""!==n.value:n.specified)?n.value:t},set:function(e,t,i){var n=e.getAttributeNode(i);return n||(n=r.createAttribute(i),e.setAttributeNode(n)),n.value=t+""}},f.each(["width","height"],function(e,t){f.attrHooks[t]=f.extend(f.attrHooks[t],{set:function(e,i){if(""===i)return e.setAttribute(t,"auto"),i}})}),f.attrHooks.contenteditable={get:O.get,set:function(e,t,i){""===t&&(t="false"),O.set(e,t,i)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(e,i){f.attrHooks[i]=f.extend(f.attrHooks[i],{get:function(e){var n=e.getAttribute(i,2);return null===n?t:n}})}),f.support.style||(f.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(e,t){if(f.isArray(t))return e.checked=f.inArray(f(e).val(),t)>=0}})});var q=/^(?:textarea|input|select)$/i,W=/^([^\.]*|)(?:\.(.+)|)$/,G=/(?:^|\s)hover(\.\S+|)\b/,Y=/^key/,Q=/^(?:mouse|contextmenu)|click/,K=/^(?:focusinfocus|focusoutblur)$/,J=function(e){return f.event.special.hover?e:e.replace(G,"mouseenter$1 mouseleave$1")};function Z(){return!1}function ee(){return!0}f.event={add:function(e,i,n,r,a){var o,s,l,u,c,d,p,h,g,m,v;if(3!==e.nodeType&&8!==e.nodeType&&i&&n&&(o=f._data(e))){for(n.handler&&(n=(g=n).handler,a=g.selector),n.guid||(n.guid=f.guid++),(l=o.events)||(o.events=l={}),(s=o.handle)||(o.handle=s=function(e){return void 0===f||e&&f.event.triggered===e.type?t:f.event.dispatch.apply(s.elem,arguments)},s.elem=e),i=f.trim(J(i)).split(" "),u=0;u<i.length;u++)d=(c=W.exec(i[u])||[])[1],p=(c[2]||"").split(".").sort(),v=f.event.special[d]||{},d=(a?v.delegateType:v.bindType)||d,v=f.event.special[d]||{},h=f.extend({type:d,origType:c[1],data:r,handler:n,guid:n.guid,selector:a,needsContext:a&&f.expr.match.needsContext.test(a),namespace:p.join(".")},g),(m=l[d])||((m=l[d]=[]).delegateCount=0,v.setup&&!1!==v.setup.call(e,r,p,s)||(e.addEventListener?e.addEventListener(d,s,!1):e.attachEvent&&e.attachEvent("on"+d,s))),v.add&&(v.add.call(e,h),h.handler.guid||(h.handler.guid=n.guid)),a?m.splice(m.delegateCount++,0,h):m.push(h),f.event.global[d]=!0;e=null}},global:{},remove:function(e,t,i,n,r){var a,o,s,l,u,c,d,p,h,g,m,v=f.hasData(e)&&f._data(e);if(v&&(p=v.events)){for(t=f.trim(J(t||"")).split(" "),a=0;a<t.length;a++)if(s=l=(o=W.exec(t[a])||[])[1],u=o[2],s){for(h=f.event.special[s]||{},c=(g=p[s=(n?h.delegateType:h.bindType)||s]||[]).length,u=u?new RegExp("(^|\\.)"+u.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,d=0;d<g.length;d++)m=g[d],!r&&l!==m.origType||i&&i.guid!==m.guid||u&&!u.test(m.namespace)||n&&n!==m.selector&&("**"!==n||!m.selector)||(g.splice(d--,1),m.selector&&g.delegateCount--,h.remove&&h.remove.call(e,m));0===g.length&&c!==g.length&&(h.teardown&&!1!==h.teardown.call(e,u,v.handle)||f.removeEvent(e,s,v.handle),delete p[s])}else for(s in p)f.event.remove(e,s+t[a],i,n,!0);f.isEmptyObject(p)&&(delete v.handle,f.removeData(e,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(i,n,a,o){if(!a||3!==a.nodeType&&8!==a.nodeType){var s,l,u,c,d,p,h,g,m,v,b=i.type||i,y=[];if(!K.test(b+f.event.triggered)&&(b.indexOf("!")>=0&&(b=b.slice(0,-1),l=!0),b.indexOf(".")>=0&&(b=(y=b.split(".")).shift(),y.sort()),a&&!f.event.customEvent[b]||f.event.global[b]))if((i="object"==typeof i?i[f.expando]?i:new f.Event(b,i):new f.Event(b)).type=b,i.isTrigger=!0,i.exclusive=l,i.namespace=y.join("."),i.namespace_re=i.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,p=b.indexOf(":")<0?"on"+b:"",a){if(i.result=t,i.target||(i.target=a),(n=null!=n?f.makeArray(n):[]).unshift(i),!(h=f.event.special[b]||{}).trigger||!1!==h.trigger.apply(a,n)){if(m=[[a,h.bindType||b]],!o&&!h.noBubble&&!f.isWindow(a)){for(v=h.delegateType||b,c=K.test(v+b)?a:a.parentNode,d=a;c;c=c.parentNode)m.push([c,v]),d=c;d===(a.ownerDocument||r)&&m.push([d.defaultView||d.parentWindow||e,v])}for(u=0;u<m.length&&!i.isPropagationStopped();u++)c=m[u][0],i.type=m[u][1],(g=(f._data(c,"events")||{})[i.type]&&f._data(c,"handle"))&&g.apply(c,n),(g=p&&c[p])&&f.acceptData(c)&&g.apply&&!1===g.apply(c,n)&&i.preventDefault();return i.type=b,o||i.isDefaultPrevented()||h._default&&!1!==h._default.apply(a.ownerDocument,n)||"click"===b&&f.nodeName(a,"a")||!f.acceptData(a)||p&&a[b]&&("focus"!==b&&"blur"!==b||0!==i.target.offsetWidth)&&!f.isWindow(a)&&((d=a[p])&&(a[p]=null),f.event.triggered=b,a[b](),f.event.triggered=t,d&&(a[p]=d)),i.result}}else for(u in s=f.cache)s[u].events&&s[u].events[b]&&f.event.trigger(i,n,s[u].handle.elem,!0)}},dispatch:function(i){i=f.event.fix(i||e.event);var n,r,a,o,s,l,u,d,p,h=(f._data(this,"events")||{})[i.type]||[],g=h.delegateCount,m=c.call(arguments),v=!i.exclusive&&!i.namespace,b=f.event.special[i.type]||{},y=[];if(m[0]=i,i.delegateTarget=this,!b.preDispatch||!1!==b.preDispatch.call(this,i)){if(g&&(!i.button||"click"!==i.type))for(a=i.target;a!=this;a=a.parentNode||this)if(!0!==a.disabled||"click"!==i.type){for(s={},u=[],n=0;n<g;n++)s[p=(d=h[n]).selector]===t&&(s[p]=d.needsContext?f(p,this).index(a)>=0:f.find(p,this,null,[a]).length),s[p]&&u.push(d);u.length&&y.push({elem:a,matches:u})}for(h.length>g&&y.push({elem:this,matches:h.slice(g)}),n=0;n<y.length&&!i.isPropagationStopped();n++)for(l=y[n],i.currentTarget=l.elem,r=0;r<l.matches.length&&!i.isImmediatePropagationStopped();r++)d=l.matches[r],(v||!i.namespace&&!d.namespace||i.namespace_re&&i.namespace_re.test(d.namespace))&&(i.data=d.data,i.handleObj=d,(o=((f.event.special[d.origType]||{}).handle||d.handler).apply(l.elem,m))!==t&&(i.result=o,!1===o&&(i.preventDefault(),i.stopPropagation())));return b.postDispatch&&b.postDispatch.call(this,i),i.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,i){var n,a,o,s=i.button,l=i.fromElement;return null==e.pageX&&null!=i.clientX&&(a=(n=e.target.ownerDocument||r).documentElement,o=n.body,e.pageX=i.clientX+(a&&a.scrollLeft||o&&o.scrollLeft||0)-(a&&a.clientLeft||o&&o.clientLeft||0),e.pageY=i.clientY+(a&&a.scrollTop||o&&o.scrollTop||0)-(a&&a.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&l&&(e.relatedTarget=l===e.target?i.toElement:l),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[f.expando])return e;var t,i,n=e,a=f.event.fixHooks[e.type]||{},o=a.props?this.props.concat(a.props):this.props;for(e=f.Event(n),t=o.length;t;)e[i=o[--t]]=n[i];return e.target||(e.target=n.srcElement||r),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,n):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,i){f.isWindow(this)&&(this.onbeforeunload=i)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,i,n){var r=f.extend(new f.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?f.event.trigger(r,null,t):f.event.dispatch.call(t,r),r.isDefaultPrevented()&&i.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=r.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){var n="on"+t;e.detachEvent&&(void 0===e[n]&&(e[n]=null),e.detachEvent(n,i))},f.Event=function(e,t){if(!(this instanceof f.Event))return new f.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||!1===e.returnValue||e.getPreventDefault&&e.getPreventDefault()?ee:Z):this.type=e,t&&f.extend(this,t),this.timeStamp=e&&e.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=ee;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=ee;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ee,this.stopPropagation()},isDefaultPrevented:Z,isPropagationStopped:Z,isImmediatePropagationStopped:Z},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){f.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=e.relatedTarget,r=e.handleObj;r.selector;return n&&(n===this||f.contains(this,n))||(e.type=r.origType,i=r.handler.apply(this,arguments),e.type=t),i}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return!1;f.event.add(this,"click._submit keypress._submit",function(e){var i=e.target,n=f.nodeName(i,"input")||f.nodeName(i,"button")?i.form:t;n&&!f._data(n,"_submit_attached")&&(f.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),f._data(n,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&f.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(f.nodeName(this,"form"))return!1;f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(q.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(f.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),f.event.simulate("change",this,e,!0)})),!1;f.event.add(this,"beforeactivate._change",function(e){var t=e.target;q.test(t.nodeName)&&!f._data(t,"_change_attached")&&(f.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||f.event.simulate("change",this.parentNode,e,!0)}),f._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return f.event.remove(this,"._change"),!q.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(e,t){var i=0,n=function(e){f.event.simulate(t,e.target,f.event.fix(e),!0)};f.event.special[t]={setup:function(){0==i++&&r.addEventListener(e,n,!0)},teardown:function(){0==--i&&r.removeEventListener(e,n,!0)}}}),f.fn.extend({on:function(e,i,n,r,a){var o,s;if("object"==typeof e){for(s in"string"!=typeof i&&(n=n||i,i=t),e)this.on(s,i,n,e[s],a);return this}if(null==n&&null==r?(r=i,n=i=t):null==r&&("string"==typeof i?(r=n,n=t):(r=n,n=i,i=t)),!1===r)r=Z;else if(!r)return this;return 1===a&&(o=r,(r=function(e){return f().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=f.guid++)),this.each(function(){f.event.add(this,e,r,n,i)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,i,n){var r,a;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,f(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(a in e)this.off(a,i,e[a]);return this}return!1!==i&&"function"!=typeof i||(n=i,i=t),!1===n&&(n=Z),this.each(function(){f.event.remove(this,e,n,i)})},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,i){return f(this.context).on(e,this.selector,t,i),this},die:function(e,t){return f(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},trigger:function(e,t){return this.each(function(){f.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return f.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,i=e.guid||f.guid++,n=0,r=function(i){var r=(f._data(this,"lastToggle"+e.guid)||0)%n;return f._data(this,"lastToggle"+e.guid,r+1),i.preventDefault(),t[r].apply(this,arguments)||!1};for(r.guid=i;n<t.length;)t[n++].guid=i;return this.click(r)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){f.fn[t]=function(e,i){return null==i&&(i=e,e=null),arguments.length>0?this.on(t,null,e,i):this.trigger(t)},Y.test(t)&&(f.event.fixHooks[t]=f.event.keyHooks),Q.test(t)&&(f.event.fixHooks[t]=f.event.mouseHooks)}),function(e,t){var i,n,r,a,o,s,l,u,c,d,p,h,g,m,v,b,y,x,C="undefined",_=("sizcache"+Math.random()).replace(".",""),w=String,E=e.document,T=E.documentElement,z=0,R=0,A=[].pop,P=[].push,D=[].slice,S=[].indexOf||function(e){for(var t=0,i=this.length;t<i;t++)if(this[t]===e)return t;return-1},I=function(e,t){return e[_]=null==t||t,e},F=function(){var e={},t=[];return I(function(i,n){return t.push(i)>r.cacheLength&&delete e[t.shift()],e[i+" "]=n},e)},k=F(),N=F(),O=F(),M="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",$=B.replace("w","w#"),L="\\["+M+"*("+B+")"+M+"*(?:([*^$|!~]?=)"+M+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+$+")|)|)"+M+"*\\]",j=":("+B+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+L+")|[^:]|\\\\.)*|.*))\\)|)",H=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)",X=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),V=new RegExp("^"+M+"*,"+M+"*"),U=new RegExp("^"+M+"*([\\x20\\t\\r\\n\\f>+~])"+M+"*"),q=new RegExp(j),W=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,G=/[\x20\t\r\n\f]*[+~]/,Y=/h\d/i,Q=/input|select|textarea|button/i,K=/\\(?!\\)/g,J={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),NAME:new RegExp("^\\[name=['\"]?("+B+")['\"]?\\]"),TAG:new RegExp("^("+B.replace("w","w*")+")"),ATTR:new RegExp("^"+L),PSEUDO:new RegExp("^"+j),POS:new RegExp(H,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),needsContext:new RegExp("^"+M+"*[>+~]|"+H,"i")},Z=function(e){var t=E.createElement("div");try{return e(t)}catch(e){return!1}finally{t=null}},ee=Z(function(e){return e.appendChild(E.createComment("")),!e.getElementsByTagName("*").length}),te=Z(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==C&&"#"===e.firstChild.getAttribute("href")}),ie=Z(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),ne=Z(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!(!e.getElementsByClassName||!e.getElementsByClassName("e").length)&&(e.lastChild.className="e",2===e.getElementsByClassName("e").length)}),re=Z(function(e){e.id=_+0,e.innerHTML="<a name='"+_+"'></a><div name='"+_+"'></div>",T.insertBefore(e,T.firstChild);var t=E.getElementsByName&&E.getElementsByName(_).length===2+E.getElementsByName(_+0).length;return n=!E.getElementById(_),T.removeChild(e),t});try{D.call(T.childNodes,0)[0].nodeType}catch(e){D=function(e){for(var t,i=[];t=this[e];e++)i.push(t);return i}}function ae(e,t,i,n){i=i||[];var r,a,l,u,c=(t=t||E).nodeType;if(!e||"string"!=typeof e)return i;if(1!==c&&9!==c)return[];if(!(l=o(t))&&!n&&(r=W.exec(e)))if(u=r[1]){if(9===c){if(!(a=t.getElementById(u))||!a.parentNode)return i;if(a.id===u)return i.push(a),i}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(u))&&s(t,a)&&a.id===u)return i.push(a),i}else{if(r[2])return P.apply(i,D.call(t.getElementsByTagName(e),0)),i;if((u=r[3])&&ne&&t.getElementsByClassName)return P.apply(i,D.call(t.getElementsByClassName(u),0)),i}return me(e.replace(X,"$1"),t,i,n,l)}function oe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function se(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function le(e){return I(function(t){return t=+t,I(function(i,n){for(var r,a=e([],i.length,t),o=a.length;o--;)i[r=a[o]]&&(i[r]=!(n[r]=i[r]))})})}function ue(e,t,i){if(e===t)return i;for(var n=e.nextSibling;n;){if(n===t)return-1;n=n.nextSibling}return 1}function ce(e,t){var i,n,a,o,s,l,u,c=N[_][e+" "];if(c)return t?0:c.slice(0);for(s=e,l=[],u=r.preFilter;s;){for(o in i&&!(n=V.exec(s))||(n&&(s=s.slice(n[0].length)||s),l.push(a=[])),i=!1,(n=U.exec(s))&&(a.push(i=new w(n.shift())),s=s.slice(i.length),i.type=n[0].replace(X," ")),r.filter)!(n=J[o].exec(s))||u[o]&&!(n=u[o](n))||(a.push(i=new w(n.shift())),s=s.slice(i.length),i.type=o,i.matches=n);if(!i)break}return t?s.length:s?ae.error(e):N(e,l).slice(0)}function de(e,t,n){var r=t.dir,a=n&&"parentNode"===t.dir,o=R++;return t.first?function(t,i,n){for(;t=t[r];)if(a||1===t.nodeType)return e(t,i,n)}:function(t,n,s){if(s){for(;t=t[r];)if((a||1===t.nodeType)&&e(t,n,s))return t}else for(var l,u=z+" "+o+" ",c=u+i;t=t[r];)if(a||1===t.nodeType){if((l=t[_])===c)return t.sizset;if("string"==typeof l&&0===l.indexOf(u)){if(t.sizset)return t}else{if(t[_]=c,e(t,n,s))return t.sizset=!0,t;t.sizset=!1}}}}function pe(e){return e.length>1?function(t,i,n){for(var r=e.length;r--;)if(!e[r](t,i,n))return!1;return!0}:e[0]}function he(e,t,i,n,r){for(var a,o=[],s=0,l=e.length,u=null!=t;s<l;s++)(a=e[s])&&(i&&!i(a,n,r)||(o.push(a),u&&t.push(s)));return o}function ge(e,t,i,n,r,a){return n&&!n[_]&&(n=ge(n)),r&&!r[_]&&(r=ge(r,a)),I(function(a,o,s,l){var u,c,d,p=[],h=[],g=o.length,f=a||function(e,t,i){for(var n=0,r=t.length;n<r;n++)ae(e,t[n],i);return i}(t||"*",s.nodeType?[s]:s,[]),m=!e||!a&&t?f:he(f,p,e,s,l),v=i?r||(a?e:g||n)?[]:o:m;if(i&&i(m,v,s,l),n)for(u=he(v,h),n(u,[],s,l),c=u.length;c--;)(d=u[c])&&(v[h[c]]=!(m[h[c]]=d));if(a){if(r||e){if(r){for(u=[],c=v.length;c--;)(d=v[c])&&u.push(m[c]=d);r(null,v=[],u,l)}for(c=v.length;c--;)(d=v[c])&&(u=r?S.call(a,d):p[c])>-1&&(a[u]=!(o[u]=d))}}else v=he(v===o?v.splice(g,v.length):v),r?r(null,o,v,l):P.apply(o,v)})}function fe(e){for(var t,i,n,a=e.length,o=r.relative[e[0].type],s=o||r.relative[" "],l=o?1:0,u=de(function(e){return e===t},s,!0),c=de(function(e){return S.call(t,e)>-1},s,!0),p=[function(e,i,n){return!o&&(n||i!==d)||((t=i).nodeType?u(e,i,n):c(e,i,n))}];l<a;l++)if(i=r.relative[e[l].type])p=[de(pe(p),i)];else{if((i=r.filter[e[l].type].apply(null,e[l].matches))[_]){for(n=++l;n<a&&!r.relative[e[n].type];n++);return ge(l>1&&pe(p),l>1&&e.slice(0,l-1).join("").replace(X,"$1"),i,l<n&&fe(e.slice(l,n)),n<a&&fe(e=e.slice(n)),n<a&&e.join(""))}p.push(i)}return pe(p)}function me(e,t,i,n,a){var o,s,u,c,d,p=ce(e);p.length;if(!n&&1===p.length){if((s=p[0]=p[0].slice(0)).length>2&&"ID"===(u=s[0]).type&&9===t.nodeType&&!a&&r.relative[s[1].type]){if(!(t=r.find.ID(u.matches[0].replace(K,""),t,a)[0]))return i;e=e.slice(s.shift().length)}for(o=J.POS.test(e)?-1:s.length-1;o>=0&&(u=s[o],!r.relative[c=u.type]);o--)if((d=r.find[c])&&(n=d(u.matches[0].replace(K,""),G.test(s[0].type)&&t.parentNode||t,a))){if(s.splice(o,1),!(e=n.length&&s.join("")))return P.apply(i,D.call(n,0)),i;break}}return l(e,p)(n,t,a,i,G.test(e)),i}function ve(){}ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){return ae(t,null,null,[e]).length>0},a=ae.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=a(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n];n++)i+=a(t);return i},o=ae.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},s=ae.contains=T.contains?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!!(n&&1===n.nodeType&&i.contains&&i.contains(n))}:T.compareDocumentPosition?function(e,t){return t&&!!(16&e.compareDocumentPosition(t))}:function(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1},ae.attr=function(e,t){var i,n=o(e);return n||(t=t.toLowerCase()),(i=r.attrHandle[t])?i(e):n||ie?e.getAttribute(t):(i=e.getAttributeNode(t))?"boolean"==typeof e[t]?e[t]?t:null:i.specified?i.value:null:null},r=ae.selectors={cacheLength:50,createPseudo:I,match:J,attrHandle:te?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:n?function(e,t,i){if(typeof t.getElementById!==C&&!i){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}}:function(e,t,i){if(typeof t.getElementById!==C&&!i){var n=t.getElementById(e);return n?n.id===e||typeof n.getAttributeNode!==C&&n.getAttributeNode("id").value===e?[n]:void 0:[]}},TAG:ee?function(e,t){if(typeof t.getElementsByTagName!==C)return t.getElementsByTagName(e)}:function(e,t){var i=t.getElementsByTagName(e);if("*"===e){for(var n,r=[],a=0;n=i[a];a++)1===n.nodeType&&r.push(n);return r}return i},NAME:re&&function(e,t){if(typeof t.getElementsByName!==C)return t.getElementsByName(name)},CLASS:ne&&function(e,t,i){if(typeof t.getElementsByClassName!==C&&!i)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(K,""),e[3]=(e[4]||e[5]||"").replace(K,""),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1]?(e[2]||ae.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*("even"===e[2]||"odd"===e[2])),e[4]=+(e[6]+e[7]||"odd"===e[2])):e[2]&&ae.error(e[0]),e},PSEUDO:function(e){var t,i;return J.CHILD.test(e[0])?null:(e[3]?e[2]=e[3]:(t=e[4])&&(q.test(t)&&(i=ce(t,!0))&&(i=t.indexOf(")",t.length-i)-t.length)&&(t=t.slice(0,i),e[0]=e[0].slice(0,i)),e[2]=t),e.slice(0,3))}},filter:{ID:n?function(e){return e=e.replace(K,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace(K,""),function(t){var i=typeof t.getAttributeNode!==C&&t.getAttributeNode("id");return i&&i.value===e}},TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(K,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[_][e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==C&&e.getAttribute("class")||"")})},ATTR:function(e,t,i){return function(n,r){var a=ae.attr(n,e);return null==a?"!="===t:!t||(a+="","="===t?a===i:"!="===t?a!==i:"^="===t?i&&0===a.indexOf(i):"*="===t?i&&a.indexOf(i)>-1:"$="===t?i&&a.substr(a.length-i.length)===i:"~="===t?(" "+a+" ").indexOf(i)>-1:"|="===t&&(a===i||a.substr(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,n){return"nth"===e?function(e){var t,r,a=e.parentNode;if(1===i&&0===n)return!0;if(a)for(r=0,t=a.firstChild;t&&(1!==t.nodeType||(r++,e!==t));t=t.nextSibling);return(r-=n)===i||r%i==0&&r/i>=0}:function(t){var i=t;switch(e){case"only":case"first":for(;i=i.previousSibling;)if(1===i.nodeType)return!1;if("first"===e)return!0;i=t;case"last":for(;i=i.nextSibling;)if(1===i.nodeType)return!1;return!0}}},PSEUDO:function(e,t){var i,n=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return n[_]?n(t):n.length>1?(i=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?I(function(e,i){for(var r,a=n(e,t),o=a.length;o--;)e[r=S.call(e,a[o])]=!(i[r]=a[o])}):function(e){return n(e,0,i)}):n}},pseudos:{not:I(function(e){var t=[],i=[],n=l(e.replace(X,"$1"));return n[_]?I(function(e,t,i,r){for(var a,o=n(e,null,r,[]),s=e.length;s--;)(a=o[s])&&(e[s]=!(t[s]=a))}):function(e,r,a){return t[0]=e,n(t,null,a,i),!i.pop()}}),has:I(function(e){return function(t){return ae(e,t).length>0}}),contains:I(function(e){return function(t){return(t.textContent||t.innerText||a(t)).indexOf(e)>-1}}),enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},parent:function(e){return!r.pseudos.empty(e)},empty:function(e){var t;for(e=e.firstChild;e;){if(e.nodeName>"@"||3===(t=e.nodeType)||4===t)return!1;e=e.nextSibling}return!0},header:function(e){return Y.test(e.nodeName)},text:function(e){var t,i;return"input"===e.nodeName.toLowerCase()&&"text"===(t=e.type)&&(null==(i=e.getAttribute("type"))||i.toLowerCase()===t)},radio:oe("radio"),checkbox:oe("checkbox"),file:oe("file"),password:oe("password"),image:oe("image"),submit:se("submit"),reset:se("reset"),button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return Q.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},active:function(e){return e===e.ownerDocument.activeElement},first:le(function(){return[0]}),last:le(function(e,t){return[t-1]}),eq:le(function(e,t,i){return[i<0?i+t:i]}),even:le(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:le(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:le(function(e,t,i){for(var n=i<0?i+t:i;--n>=0;)e.push(n);return e}),gt:le(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}},u=T.compareDocumentPosition?function(e,t){return e===t?(c=!0,0):(e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t):e.compareDocumentPosition)?-1:1}:function(e,t){if(e===t)return c=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var i,n,r=[],a=[],o=e.parentNode,s=t.parentNode,l=o;if(o===s)return ue(e,t);if(!o)return-1;if(!s)return 1;for(;l;)r.unshift(l),l=l.parentNode;for(l=s;l;)a.unshift(l),l=l.parentNode;i=r.length,n=a.length;for(var u=0;u<i&&u<n;u++)if(r[u]!==a[u])return ue(r[u],a[u]);return u===i?ue(e,a[u],-1):ue(r[u],t,1)},[0,0].sort(u),p=!c,ae.uniqueSort=function(e){var t,i=[],n=1,r=0;if(c=p,e.sort(u),c){for(;t=e[n];n++)t===e[n-1]&&(r=i.push(n));for(;r--;)e.splice(i[r],1)}return e},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},l=ae.compile=function(e,t){var n,a,o,s,l,u,c=[],p=[],h=O[_][e+" "];if(!h){for(t||(t=ce(e)),n=t.length;n--;)(h=fe(t[n]))[_]?c.push(h):p.push(h);h=O(e,(a=p,s=(o=c).length>0,l=a.length>0,(u=function(e,t,n,c,p){var h,g,f,m=[],v=0,b="0",y=e&&[],x=null!=p,C=d,_=e||l&&r.find.TAG("*",p&&t.parentNode||t),w=z+=null==C?1:Math.E;for(x&&(d=t!==E&&t,i=u.el);null!=(h=_[b]);b++){if(l&&h){for(g=0;f=a[g];g++)if(f(h,t,n)){c.push(h);break}x&&(z=w,i=++u.el)}s&&((h=!f&&h)&&v--,e&&y.push(h))}if(v+=b,s&&b!==v){for(g=0;f=o[g];g++)f(y,m,t,n);if(e){if(v>0)for(;b--;)y[b]||m[b]||(m[b]=A.call(c));m=he(m)}P.apply(c,m),x&&!e&&m.length>0&&v+o.length>1&&ae.uniqueSort(c)}return x&&(z=w,d=C),y}).el=0,s?I(u):u))}return h},E.querySelectorAll&&(g=me,m=/'|\\/g,v=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,b=[":focus"],y=[":active"],x=T.matchesSelector||T.mozMatchesSelector||T.webkitMatchesSelector||T.oMatchesSelector||T.msMatchesSelector,Z(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||b.push("\\["+M+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||b.push(":checked")}),Z(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&b.push("[*^$]="+M+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||b.push(":enabled",":disabled")}),b=new RegExp(b.join("|")),me=function(e,t,i,n,r){if(!n&&!r&&!b.test(e)){var a,o,s=!0,l=_,u=t,c=9===t.nodeType&&e;if(1===t.nodeType&&"object"!==t.nodeName.toLowerCase()){for(a=ce(e),(s=t.getAttribute("id"))?l=s.replace(m,"\\$&"):t.setAttribute("id",l),l="[id='"+l+"'] ",o=a.length;o--;)a[o]=l+a[o].join("");u=G.test(e)&&t.parentNode||t,c=a.join(",")}if(c)try{return P.apply(i,D.call(u.querySelectorAll(c),0)),i}catch(e){}finally{s||t.removeAttribute("id")}}return g(e,t,i,n,r)},x&&(Z(function(e){h=x.call(e,"div");try{x.call(e,"[test!='']:sizzle"),y.push("!=",j)}catch(e){}}),y=new RegExp(y.join("|")),ae.matchesSelector=function(e,t){if(t=t.replace(v,"='$1']"),!o(e)&&!y.test(t)&&!b.test(t))try{var i=x.call(e,t);if(i||h||e.document&&11!==e.document.nodeType)return i}catch(e){}return ae(t,null,null,[e]).length>0})),r.pseudos.nth=r.pseudos.eq,r.filters=ve.prototype=r.pseudos,r.setFilters=new ve,ae.attr=f.attr,f.find=ae,f.expr=ae.selectors,f.expr[":"]=f.expr.pseudos,f.unique=ae.uniqueSort,f.text=ae.getText,f.isXMLDoc=ae.isXML,f.contains=ae.contains}(e);var te=/Until$/,ie=/^(?:parents|prev(?:Until|All))/,ne=/^.[^:#\[\.,]*$/,re=f.expr.match.needsContext,ae={children:!0,contents:!0,next:!0,prev:!0};function oe(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function se(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}function le(e,t,i){if(t=t||0,f.isFunction(t))return f.grep(e,function(e,n){return!!t.call(e,n,e)===i});if(t.nodeType)return f.grep(e,function(e,n){return e===t===i});if("string"==typeof t){var n=f.grep(e,function(e){return 1===e.nodeType});if(ne.test(t))return f.filter(t,n,!i);t=f.filter(t,n)}return f.grep(e,function(e,n){return f.inArray(e,t)>=0===i})}function ue(e){var t=pe.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}f.fn.extend({find:function(e){var t,i,n,r,a,o,s=this;if("string"!=typeof e)return f(e).filter(function(){for(t=0,i=s.length;t<i;t++)if(f.contains(s[t],this))return!0});for(o=this.pushStack("","find",e),t=0,i=this.length;t<i;t++)if(n=o.length,f.find(e,this[t],o),t>0)for(r=n;r<o.length;r++)for(a=0;a<n;a++)if(o[a]===o[r]){o.splice(r--,1);break}return o},has:function(e){var t,i=f(e,this),n=i.length;return this.filter(function(){for(t=0;t<n;t++)if(f.contains(this,i[t]))return!0})},not:function(e){return this.pushStack(le(this,e,!1),"not",e)},filter:function(e){return this.pushStack(le(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?re.test(e)?f(e,this.context).index(this[0])>=0:f.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var i,n=0,r=this.length,a=[],o=re.test(e)||"string"!=typeof e?f(e,t||this.context):0;n<r;n++)for(i=this[n];i&&i.ownerDocument&&i!==t&&11!==i.nodeType;){if(o?o.index(i)>-1:f.find.matchesSelector(i,e)){a.push(i);break}i=i.parentNode}return a=a.length>1?f.unique(a):a,this.pushStack(a,"closest",e)},index:function(e){return e?"string"==typeof e?f.inArray(this[0],f(e)):f.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var i="string"==typeof e?f(e,t):f.makeArray(e&&e.nodeType?[e]:e),n=f.merge(this.get(),i);return this.pushStack(oe(i[0])||oe(n[0])?n:f.unique(n))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),f.fn.andSelf=f.fn.addBack,f.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return f.dir(e,"parentNode")},parentsUntil:function(e,t,i){return f.dir(e,"parentNode",i)},next:function(e){return se(e,"nextSibling")},prev:function(e){return se(e,"previousSibling")},nextAll:function(e){return f.dir(e,"nextSibling")},prevAll:function(e){return f.dir(e,"previousSibling")},nextUntil:function(e,t,i){return f.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return f.dir(e,"previousSibling",i)},siblings:function(e){return f.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return f.sibling(e.firstChild)},contents:function(e){return f.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:f.merge([],e.childNodes)}},function(e,t){f.fn[e]=function(i,n){var r=f.map(this,t,i);return te.test(e)||(n=i),n&&"string"==typeof n&&(r=f.filter(n,r)),r=this.length>1&&!ae[e]?f.unique(r):r,this.length>1&&ie.test(e)&&(r=r.reverse()),this.pushStack(r,e,c.call(arguments).join(","))}}),f.extend({filter:function(e,t,i){return i&&(e=":not("+e+")"),1===t.length?f.find.matchesSelector(t[0],e)?[t[0]]:[]:f.find.matches(e,t)},dir:function(e,i,n){for(var r=[],a=e[i];a&&9!==a.nodeType&&(n===t||1!==a.nodeType||!f(a).is(n));)1===a.nodeType&&r.push(a),a=a[i];return r},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}});var ce,de,pe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",he=/ jQuery\d+="(?:null|\d+)"/g,ge=/^\s+/,fe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,me=/<([\w:]+)/,ve=/<tbody/i,be=/<|&#?\w+;/,ye=/<(?:script|style|link)/i,xe=/<(?:script|object|embed|option|style)/i,Ce=new RegExp("<(?:"+pe+")[\\s/>]","i"),_e=/^(?:checkbox|radio)$/,we=/checked\s*(?:[^=]|=\s*.checked.)/i,Ee=/\/(java|ecma)script/i,Te=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,ze={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Re=ue(r),Ae=Re.appendChild(r.createElement("div"));function Pe(e,t){if(1===t.nodeType&&f.hasData(e)){var i,n,r,a=f._data(e),o=f._data(t,a),s=a.events;if(s)for(i in delete o.handle,o.events={},s)for(n=0,r=s[i].length;n<r;n++)f.event.add(t,i,s[i][n]);o.data&&(o.data=f.extend({},o.data))}}function De(e,t){var i;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),"object"===(i=t.nodeName.toLowerCase())?(t.parentNode&&(t.outerHTML=e.outerHTML),f.support.html5Clone&&e.innerHTML&&!f.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&_e.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.selected=e.defaultSelected:"input"===i||"textarea"===i?t.defaultValue=e.defaultValue:"script"===i&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(f.expando))}function Se(e){return void 0!==e.getElementsByTagName?e.getElementsByTagName("*"):void 0!==e.querySelectorAll?e.querySelectorAll("*"):[]}function Ie(e){_e.test(e.type)&&(e.defaultChecked=e.checked)}ze.optgroup=ze.option,ze.tbody=ze.tfoot=ze.colgroup=ze.caption=ze.thead,ze.th=ze.td,f.support.htmlSerialize||(ze._default=[1,"X<div>","</div>"]),f.fn.extend({text:function(e){return f.access(this,function(e){return e===t?f.text(this):this.empty().append((this[0]&&this[0].ownerDocument||r).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(f.isFunction(e))return this.each(function(t){f(this).wrapAll(e.call(this,t))});if(this[0]){var t=f(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return f.isFunction(e)?this.each(function(t){f(this).wrapInner(e.call(this,t))}):this.each(function(){var t=f(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=f.isFunction(e);return this.each(function(i){f(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){1!==this.nodeType&&11!==this.nodeType||this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){1!==this.nodeType&&11!==this.nodeType||this.insertBefore(e,this.firstChild)})},before:function(){if(!oe(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=f.clean(arguments);return this.pushStack(f.merge(e,this),"before",this.selector)}},after:function(){if(!oe(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=f.clean(arguments);return this.pushStack(f.merge(this,e),"after",this.selector)}},remove:function(e,t){for(var i,n=0;null!=(i=this[n]);n++)e&&!f.filter(e,[i]).length||(t||1!==i.nodeType||(f.cleanData(i.getElementsByTagName("*")),f.cleanData([i])),i.parentNode&&i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&f.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return f.clone(this,e,t)})},html:function(e){return f.access(this,function(e){var i=this[0]||{},n=0,r=this.length;if(e===t)return 1===i.nodeType?i.innerHTML.replace(he,""):t;if("string"==typeof e&&!ye.test(e)&&(f.support.htmlSerialize||!Ce.test(e))&&(f.support.leadingWhitespace||!ge.test(e))&&!ze[(me.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(fe,"<$1></$2>");try{for(;n<r;n++)1===(i=this[n]||{}).nodeType&&(f.cleanData(i.getElementsByTagName("*")),i.innerHTML=e);i=0}catch(e){}}i&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return oe(this[0])?this.length?this.pushStack(f(f.isFunction(e)?e():e),"replaceWith",e):this:f.isFunction(e)?this.each(function(t){var i=f(this),n=i.html();i.replaceWith(e.call(this,t,n))}):("string"!=typeof e&&(e=f(e).detach()),this.each(function(){var t=this.nextSibling,i=this.parentNode;f(this).remove(),t?f(t).before(e):f(i).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,i,n){var r,a,o,s,l,u,c=0,d=(e=[].concat.apply([],e))[0],p=[],h=this.length;if(!f.support.checkClone&&h>1&&"string"==typeof d&&we.test(d))return this.each(function(){f(this).domManip(e,i,n)});if(f.isFunction(d))return this.each(function(r){var a=f(this);e[0]=d.call(this,r,i?a.html():t),a.domManip(e,i,n)});if(this[0]){if(a=(o=(r=f.buildFragment(e,this,p)).fragment).firstChild,1===o.childNodes.length&&(o=a),a)for(i=i&&f.nodeName(a,"tr"),s=r.cacheable||h-1;c<h;c++)n.call(i&&f.nodeName(this[c],"table")?(l=this[c],u="tbody",l.getElementsByTagName(u)[0]||l.appendChild(l.ownerDocument.createElement(u))):this[c],c===s?o:f.clone(o,!0,!0));o=a=null,p.length&&f.each(p,function(e,t){t.src?f.ajax?f.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,throws:!0}):f.error("no ajax"):f.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Te,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),f.buildFragment=function(e,i,n){var a,o,s,l=e[0];return i=(i=!(i=i||r).nodeType&&i[0]||i).ownerDocument||i,!(1===e.length&&"string"==typeof l&&l.length<512&&i===r&&"<"===l.charAt(0))||xe.test(l)||!f.support.checkClone&&we.test(l)||!f.support.html5Clone&&Ce.test(l)||(o=!0,s=(a=f.fragments[l])!==t),a||(a=i.createDocumentFragment(),f.clean(e,i,a,n),o&&(f.fragments[l]=s&&a)),{fragment:a,cacheable:o}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){f.fn[e]=function(i){var n,r=0,a=[],o=f(i),s=o.length,l=1===this.length&&this[0].parentNode;if((null==l||l&&11===l.nodeType&&1===l.childNodes.length)&&1===s)return o[t](this[0]),this;for(;r<s;r++)n=(r>0?this.clone(!0):this).get(),f(o[r])[t](n),a=a.concat(n);return this.pushStack(a,e,o.selector)}}),f.extend({clone:function(e,t,i){var n,r,a,o;if(f.support.html5Clone||f.isXMLDoc(e)||!Ce.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Ae.innerHTML=e.outerHTML,Ae.removeChild(o=Ae.firstChild)),!(f.support.noCloneEvent&&f.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||f.isXMLDoc(e)))for(De(e,o),n=Se(e),r=Se(o),a=0;n[a];++a)r[a]&&De(n[a],r[a]);if(t&&(Pe(e,o),i))for(n=Se(e),r=Se(o),a=0;n[a];++a)Pe(n[a],r[a]);return n=r=null,o},clean:function(e,t,i,n){var a,o,s,l,u,c,d,p,h,g,m,v=t===r&&Re,b=[];for(t&&void 0!==t.createDocumentFragment||(t=r),a=0;null!=(s=e[a]);a++)if("number"==typeof s&&(s+=""),s){if("string"==typeof s)if(be.test(s)){for(v=v||ue(t),d=t.createElement("div"),v.appendChild(d),s=s.replace(fe,"<$1></$2>"),l=(me.exec(s)||["",""])[1].toLowerCase(),c=(u=ze[l]||ze._default)[0],d.innerHTML=u[1]+s+u[2];c--;)d=d.lastChild;if(!f.support.tbody)for(p=ve.test(s),o=(h="table"!==l||p?"<table>"!==u[1]||p?[]:d.childNodes:d.firstChild&&d.firstChild.childNodes).length-1;o>=0;--o)f.nodeName(h[o],"tbody")&&!h[o].childNodes.length&&h[o].parentNode.removeChild(h[o]);!f.support.leadingWhitespace&&ge.test(s)&&d.insertBefore(t.createTextNode(ge.exec(s)[0]),d.firstChild),s=d.childNodes,d.parentNode.removeChild(d)}else s=t.createTextNode(s);s.nodeType?b.push(s):f.merge(b,s)}if(d&&(s=d=v=null),!f.support.appendChecked)for(a=0;null!=(s=b[a]);a++)f.nodeName(s,"input")?Ie(s):void 0!==s.getElementsByTagName&&f.grep(s.getElementsByTagName("input"),Ie);if(i)for(g=function(e){if(!e.type||Ee.test(e.type))return n?n.push(e.parentNode?e.parentNode.removeChild(e):e):i.appendChild(e)},a=0;null!=(s=b[a]);a++)f.nodeName(s,"script")&&g(s)||(i.appendChild(s),void 0!==s.getElementsByTagName&&(m=f.grep(f.merge([],s.getElementsByTagName("script")),g),b.splice.apply(b,[a+1,0].concat(m)),a+=m.length));return b},cleanData:function(e,t){for(var i,n,r,a,o=0,s=f.expando,l=f.cache,u=f.support.deleteExpando,c=f.event.special;null!=(r=e[o]);o++)if((t||f.acceptData(r))&&(i=(n=r[s])&&l[n])){if(i.events)for(a in i.events)c[a]?f.event.remove(r,a):f.removeEvent(r,a,i.handle);l[n]&&(delete l[n],u?delete r[s]:r.removeAttribute?r.removeAttribute(s):r[s]=null,f.deletedIds.push(n))}}}),f.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},de={},(ce=f.uaMatch(o.userAgent)).browser&&(de[ce.browser]=!0,de.version=ce.version),de.chrome?de.webkit=!0:de.webkit&&(de.safari=!0),f.browser=de,f.sub=function(){function e(t,i){return new e.fn.init(t,i)}f.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(i,n){return n&&n instanceof f&&!(n instanceof e)&&(n=e(n)),f.fn.init.call(this,i,n,t)},e.fn.init.prototype=e.fn;var t=e(r);return e};var Fe,ke,Ne,Oe=/alpha\([^)]*\)/i,Me=/opacity=([^)]*)/,Be=/^(top|right|bottom|left)$/,$e=/^(none|table(?!-c[ea]).+)/,Le=/^margin/,je=new RegExp("^("+m+")(.*)$","i"),He=new RegExp("^("+m+")(?!px)[a-z%]+$","i"),Xe=new RegExp("^([-+])=("+m+")","i"),Ve={BODY:"block"},Ue={position:"absolute",visibility:"hidden",display:"block"},qe={letterSpacing:0,fontWeight:400},We=["Top","Right","Bottom","Left"],Ge=["Webkit","O","Moz","ms"],Ye=f.fn.toggle;function Qe(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),n=t,r=Ge.length;r--;)if((t=Ge[r]+i)in e)return t;return n}function Ke(e,t){return e=t||e,"none"===f.css(e,"display")||!f.contains(e.ownerDocument,e)}function Je(e,t){for(var i,n,r=[],a=0,o=e.length;a<o;a++)(i=e[a]).style&&(r[a]=f._data(i,"olddisplay"),t?(r[a]||"none"!==i.style.display||(i.style.display=""),""===i.style.display&&Ke(i)&&(r[a]=f._data(i,"olddisplay",it(i.nodeName)))):(n=Fe(i,"display"),r[a]||"none"===n||f._data(i,"olddisplay",n)));for(a=0;a<o;a++)(i=e[a]).style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?r[a]||"":"none"));return e}function Ze(e,t,i){var n=je.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function et(e,t,i,n){for(var r=i===(n?"border":"content")?4:"width"===t?1:0,a=0;r<4;r+=2)"margin"===i&&(a+=f.css(e,i+We[r],!0)),n?("content"===i&&(a-=parseFloat(Fe(e,"padding"+We[r]))||0),"margin"!==i&&(a-=parseFloat(Fe(e,"border"+We[r]+"Width"))||0)):(a+=parseFloat(Fe(e,"padding"+We[r]))||0,"padding"!==i&&(a+=parseFloat(Fe(e,"border"+We[r]+"Width"))||0));return a}function tt(e,t,i){var n="width"===t?e.offsetWidth:e.offsetHeight,r=!0,a=f.support.boxSizing&&"border-box"===f.css(e,"boxSizing");if(n<=0||null==n){if(((n=Fe(e,t))<0||null==n)&&(n=e.style[t]),He.test(n))return n;r=a&&(f.support.boxSizingReliable||n===e.style[t]),n=parseFloat(n)||0}return n+et(e,t,i||(a?"border":"content"),r)+"px"}function it(e){if(Ve[e])return Ve[e];var t=f("<"+e+">").appendTo(r.body),i=t.css("display");return t.remove(),"none"!==i&&""!==i||(ke=r.body.appendChild(ke||f.extend(r.createElement("iframe"),{frameBorder:0,width:0,height:0})),Ne&&ke.createElement||((Ne=(ke.contentWindow||ke.contentDocument).document).write("<!doctype html><html><body>"),Ne.close()),t=Ne.body.appendChild(Ne.createElement(e)),i=Fe(t,"display"),r.body.removeChild(ke)),Ve[e]=i,i}f.fn.extend({css:function(e,i){return f.access(this,function(e,i,n){return n!==t?f.style(e,i,n):f.css(e,i)},e,i,arguments.length>1)},show:function(){return Je(this,!0)},hide:function(){return Je(this)},toggle:function(e,t){var i="boolean"==typeof e;return f.isFunction(e)&&f.isFunction(t)?Ye.apply(this,arguments):this.each(function(){(i?e:Ke(this))?f(this).show():f(this).hide()})}}),f.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Fe(e,"opacity");return""===i?"1":i}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:f.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,i,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,o,s,l=f.camelCase(i),u=e.style;if(i=f.cssProps[l]||(f.cssProps[l]=Qe(u,l)),s=f.cssHooks[i]||f.cssHooks[l],n===t)return s&&"get"in s&&(a=s.get(e,!1,r))!==t?a:u[i];if(!("string"===(o=typeof n)&&(a=Xe.exec(n))&&(n=(a[1]+1)*a[2]+parseFloat(f.css(e,i)),o="number"),null==n||"number"===o&&isNaN(n)||("number"!==o||f.cssNumber[l]||(n+="px"),s&&"set"in s&&(n=s.set(e,n,r))===t)))try{u[i]=n}catch(e){}}},css:function(e,i,n,r){var a,o,s,l=f.camelCase(i);return i=f.cssProps[l]||(f.cssProps[l]=Qe(e.style,l)),(s=f.cssHooks[i]||f.cssHooks[l])&&"get"in s&&(a=s.get(e,!0,r)),a===t&&(a=Fe(e,i)),"normal"===a&&i in qe&&(a=qe[i]),n||r!==t?(o=parseFloat(a),n||f.isNumeric(o)?o||0:a):a},swap:function(e,t,i){var n,r,a={};for(r in t)a[r]=e.style[r],e.style[r]=t[r];for(r in n=i.call(e),t)e.style[r]=a[r];return n}}),e.getComputedStyle?Fe=function(t,i){var n,r,a,o,s=e.getComputedStyle(t,null),l=t.style;return s&&(""!==(n=s.getPropertyValue(i)||s[i])||f.contains(t.ownerDocument,t)||(n=f.style(t,i)),He.test(n)&&Le.test(i)&&(r=l.width,a=l.minWidth,o=l.maxWidth,l.minWidth=l.maxWidth=l.width=n,n=s.width,l.width=r,l.minWidth=a,l.maxWidth=o)),n}:r.documentElement.currentStyle&&(Fe=function(e,t){var i,n,r=e.currentStyle&&e.currentStyle[t],a=e.style;return null==r&&a&&a[t]&&(r=a[t]),He.test(r)&&!Be.test(t)&&(i=a.left,(n=e.runtimeStyle&&e.runtimeStyle.left)&&(e.runtimeStyle.left=e.currentStyle.left),a.left="fontSize"===t?"1em":r,r=a.pixelLeft+"px",a.left=i,n&&(e.runtimeStyle.left=n)),""===r?"auto":r}),f.each(["height","width"],function(e,t){f.cssHooks[t]={get:function(e,i,n){if(i)return 0===e.offsetWidth&&$e.test(Fe(e,"display"))?f.swap(e,Ue,function(){return tt(e,t,n)}):tt(e,t,n)},set:function(e,i,n){return Ze(0,i,n?et(e,t,n,f.support.boxSizing&&"border-box"===f.css(e,"boxSizing")):0)}}}),f.support.opacity||(f.cssHooks.opacity={get:function(e,t){return Me.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,r=f.isNumeric(t)?"alpha(opacity="+100*t+")":"",a=n&&n.filter||i.filter||"";i.zoom=1,t>=1&&""===f.trim(a.replace(Oe,""))&&i.removeAttribute&&(i.removeAttribute("filter"),n&&!n.filter)||(i.filter=Oe.test(a)?a.replace(Oe,r):a+" "+r)}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(e,t){return f.swap(e,{display:"inline-block"},function(){if(t)return Fe(e,"marginRight")})}}),!f.support.pixelPosition&&f.fn.position&&f.each(["top","left"],function(e,t){f.cssHooks[t]={get:function(e,i){if(i){var n=Fe(e,t);return He.test(n)?f(e).position()[t]+"px":n}}}})}),f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(e){return 0===e.offsetWidth&&0===e.offsetHeight||!f.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||Fe(e,"display"))},f.expr.filters.visible=function(e){return!f.expr.filters.hidden(e)}),f.each({margin:"",padding:"",border:"Width"},function(e,t){f.cssHooks[e+t]={expand:function(i){var n,r="string"==typeof i?i.split(" "):[i],a={};for(n=0;n<4;n++)a[e+We[n]+t]=r[n]||r[n-2]||r[0];return a}},Le.test(e)||(f.cssHooks[e+t].set=Ze)});var nt=/%20/g,rt=/\[\]$/,at=/\r?\n/g,ot=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,st=/^(?:select|textarea)/i;function lt(e,t,i,n){var r;if(f.isArray(t))f.each(t,function(t,r){i||rt.test(e)?n(e,r):lt(e+"["+("object"==typeof r?t:"")+"]",r,i,n)});else if(i||"object"!==f.type(t))n(e,t);else for(r in t)lt(e+"["+r+"]",t[r],i,n)}f.fn.extend({serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||st.test(this.nodeName)||ot.test(this.type))}).map(function(e,t){var i=f(this).val();return null==i?null:f.isArray(i)?f.map(i,function(e,i){return{name:t.name,value:e.replace(at,"\r\n")}}):{name:t.name,value:i.replace(at,"\r\n")}}).get()}}),f.param=function(e,i){var n,r=[],a=function(e,t){t=f.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(i===t&&(i=f.ajaxSettings&&f.ajaxSettings.traditional),f.isArray(e)||e.jquery&&!f.isPlainObject(e))f.each(e,function(){a(this.name,this.value)});else for(n in e)lt(n,e[n],i,a);return r.join("&").replace(nt,"+")};var ut,ct,dt=/#.*$/,pt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,ht=/^(?:GET|HEAD)$/,gt=/^\/\//,ft=/\?/,mt=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,vt=/([?&])_=[^&]*/,bt=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,yt=f.fn.load,xt={},Ct={},_t=["*/"]+["*"];try{ct=a.href}catch(e){(ct=r.createElement("a")).href="",ct=ct.href}function wt(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,r,a=t.toLowerCase().split(b),o=0,s=a.length;if(f.isFunction(i))for(;o<s;o++)n=a[o],(r=/^\+/.test(n))&&(n=n.substr(1)||"*"),(e[n]=e[n]||[])[r?"unshift":"push"](i)}}function Et(e,i,n,r,a,o){(o=o||{})[a=a||i.dataTypes[0]]=!0;for(var s,l=e[a],u=0,c=l?l.length:0,d=e===xt;u<c&&(d||!s);u++)"string"==typeof(s=l[u](i,n,r))&&(!d||o[s]?s=t:(i.dataTypes.unshift(s),s=Et(e,i,n,r,s,o)));return!d&&s||o["*"]||(s=Et(e,i,n,r,"*",o)),s}function Tt(e,i){var n,r,a=f.ajaxSettings.flatOptions||{};for(n in i)i[n]!==t&&((a[n]?e:r||(r={}))[n]=i[n]);r&&f.extend(!0,e,r)}ut=bt.exec(ct.toLowerCase())||[],f.fn.load=function(e,i,n){if("string"!=typeof e&&yt)return yt.apply(this,arguments);if(!this.length)return this;var r,a,o,s=this,l=e.indexOf(" ");return l>=0&&(r=e.slice(l,e.length),e=e.slice(0,l)),f.isFunction(i)?(n=i,i=t):i&&"object"==typeof i&&(a="POST"),f.ajax({url:e,type:a,dataType:"html",data:i,complete:function(e,t){n&&s.each(n,o||[e.responseText,t,e])}}).done(function(e){o=arguments,s.html(r?f("<div>").append(e.replace(mt,"")).find(r):e)}),this},f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){f.fn[t]=function(e){return this.on(t,e)}}),f.each(["get","post"],function(e,i){f[i]=function(e,n,r,a){return f.isFunction(n)&&(a=a||r,r=n,n=t),f.ajax({type:i,url:e,data:n,success:r,dataType:a})}}),f.extend({getScript:function(e,i){return f.get(e,t,i,"script")},getJSON:function(e,t,i){return f.get(e,t,i,"json")},ajaxSetup:function(e,t){return t?Tt(e,f.ajaxSettings):(t=e,e=f.ajaxSettings),Tt(e,t),e},ajaxSettings:{url:ct,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(ut[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":_t},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:wt(xt),ajaxTransport:wt(Ct),ajax:function(e,i){"object"==typeof e&&(i=e,e=t),i=i||{};var n,r,a,o,s,l,u,c,d=f.ajaxSetup({},i),p=d.context||d,h=p!==d&&(p.nodeType||p instanceof f)?f(p):f.event,g=f.Deferred(),m=f.Callbacks("once memory"),v=d.statusCode||{},y={},x={},C=0,_="canceled",w={readyState:0,setRequestHeader:function(e,t){if(!C){var i=e.toLowerCase();e=x[i]=x[i]||e,y[e]=t}return this},getAllResponseHeaders:function(){return 2===C?r:null},getResponseHeader:function(e){var i;if(2===C){if(!a)for(a={};i=pt.exec(r);)a[i[1].toLowerCase()]=i[2];i=a[e.toLowerCase()]}return i===t?null:i},overrideMimeType:function(e){return C||(d.mimeType=e),this},abort:function(e){return e=e||_,o&&o.abort(e),E(0,e),this}};function E(e,i,a,l){var c,b,y,x,_,E=i;2!==C&&(C=2,s&&clearTimeout(s),o=t,r=l||"",w.readyState=e>0?4:0,a&&(x=function(e,i,n){var r,a,o,s,l=e.contents,u=e.dataTypes,c=e.responseFields;for(a in c)a in n&&(i[c[a]]=n[a]);for(;"*"===u[0];)u.shift(),r===t&&(r=e.mimeType||i.getResponseHeader("content-type"));if(r)for(a in l)if(l[a]&&l[a].test(r)){u.unshift(a);break}if(u[0]in n)o=u[0];else{for(a in n){if(!u[0]||e.converters[a+" "+u[0]]){o=a;break}s||(s=a)}o=o||s}if(o)return o!==u[0]&&u.unshift(o),n[o]}(d,w,a)),e>=200&&e<300||304===e?(d.ifModified&&((_=w.getResponseHeader("Last-Modified"))&&(f.lastModified[n]=_),(_=w.getResponseHeader("Etag"))&&(f.etag[n]=_)),304===e?(E="notmodified",c=!0):(E=(c=function(e,t){var i,n,r,a,o=e.dataTypes.slice(),s=o[0],l={},u=0;e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(o[1])for(i in e.converters)l[i.toLowerCase()]=e.converters[i];for(;r=o[++u];)if("*"!==r){if("*"!==s&&s!==r){if(!(i=l[s+" "+r]||l["* "+r]))for(n in l)if((a=n.split(" "))[1]===r&&(i=l[s+" "+a[0]]||l["* "+a[0]])){!0===i?i=l[n]:!0!==l[n]&&(r=a[0],o.splice(u--,0,r));break}if(!0!==i)if(i&&e.throws)t=i(t);else try{t=i(t)}catch(e){return{state:"parsererror",error:i?e:"No conversion from "+s+" to "+r}}}s=r}return{state:"success",data:t}}(d,x)).state,b=c.data,c=!(y=c.error))):(y=E,E&&!e||(E="error",e<0&&(e=0))),w.status=e,w.statusText=(i||E)+"",c?g.resolveWith(p,[b,E,w]):g.rejectWith(p,[w,E,y]),w.statusCode(v),v=t,u&&h.trigger("ajax"+(c?"Success":"Error"),[w,d,c?b:y]),m.fireWith(p,[w,E]),u&&(h.trigger("ajaxComplete",[w,d]),--f.active||f.event.trigger("ajaxStop")))}if(g.promise(w),w.success=w.done,w.error=w.fail,w.complete=m.add,w.statusCode=function(e){var t;if(e)if(C<2)for(t in e)v[t]=[v[t],e[t]];else t=e[w.status],w.always(t);return this},d.url=((e||d.url)+"").replace(dt,"").replace(gt,ut[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(b),null==d.crossDomain&&(l=bt.exec(d.url.toLowerCase()),d.crossDomain=!(!l||l[1]===ut[1]&&l[2]===ut[2]&&(l[3]||("http:"===l[1]?80:443))==(ut[3]||("http:"===ut[1]?80:443)))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=f.param(d.data,d.traditional)),Et(xt,d,i,w),2===C)return w;if(u=d.global,d.type=d.type.toUpperCase(),d.hasContent=!ht.test(d.type),u&&0==f.active++&&f.event.trigger("ajaxStart"),!d.hasContent&&(d.data&&(d.url+=(ft.test(d.url)?"&":"?")+d.data,delete d.data),n=d.url,!1===d.cache)){var T=f.now(),z=d.url.replace(vt,"$1_="+T);d.url=z+(z===d.url?(ft.test(d.url)?"&":"?")+"_="+T:"")}for(c in(d.data&&d.hasContent&&!1!==d.contentType||i.contentType)&&w.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(n=n||d.url,f.lastModified[n]&&w.setRequestHeader("If-Modified-Since",f.lastModified[n]),f.etag[n]&&w.setRequestHeader("If-None-Match",f.etag[n])),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+_t+"; q=0.01":""):d.accepts["*"]),d.headers)w.setRequestHeader(c,d.headers[c]);if(d.beforeSend&&(!1===d.beforeSend.call(p,w,d)||2===C))return w.abort();for(c in _="abort",{success:1,error:1,complete:1})w[c](d[c]);if(o=Et(Ct,d,i,w)){w.readyState=1,u&&h.trigger("ajaxSend",[w,d]),d.async&&d.timeout>0&&(s=setTimeout(function(){w.abort("timeout")},d.timeout));try{C=1,o.send(y,E)}catch(e){if(!(C<2))throw e;E(-1,e)}}else E(-1,"No Transport");return w},active:0,lastModified:{},etag:{}});var zt=[],Rt=/\?/,At=/(=)\?(?=&|$)|\?\?/,Pt=f.now();f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=zt.pop()||f.expando+"_"+Pt++;return this[e]=!0,e}}),f.ajaxPrefilter("json jsonp",function(i,n,r){var a,o,s,l=i.data,u=i.url,c=!1!==i.jsonp,d=c&&At.test(u),p=c&&!d&&"string"==typeof l&&!(i.contentType||"").indexOf("application/x-www-form-urlencoded")&&At.test(l);if("jsonp"===i.dataTypes[0]||d||p)return a=i.jsonpCallback=f.isFunction(i.jsonpCallback)?i.jsonpCallback():i.jsonpCallback,o=e[a],d?i.url=u.replace(At,"$1"+a):p?i.data=l.replace(At,"$1"+a):c&&(i.url+=(Rt.test(u)?"&":"?")+i.jsonp+"="+a),i.converters["script json"]=function(){return s||f.error(a+" was not called"),s[0]},i.dataTypes[0]="json",e[a]=function(){s=arguments},r.always(function(){e[a]=o,i[a]&&(i.jsonpCallback=n.jsonpCallback,zt.push(a)),s&&f.isFunction(o)&&o(s[0]),s=o=t}),"script"}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return f.globalEval(e),e}}}),f.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),f.ajaxTransport("script",function(e){if(e.crossDomain){var i,n=r.head||r.getElementsByTagName("head")[0]||r.documentElement;return{send:function(a,o){(i=r.createElement("script")).async="async",e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(e,r){(r||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,n&&i.parentNode&&n.removeChild(i),i=t,r||o(200,"success"))},n.insertBefore(i,n.firstChild)},abort:function(){i&&i.onload(0,1)}}}});var Dt,St,It=!!e.ActiveXObject&&function(){for(var e in Dt)Dt[e](0,1)},Ft=0;function kt(){try{return new e.XMLHttpRequest}catch(e){}}f.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&kt()||function(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:kt,St=f.ajaxSettings.xhr(),f.extend(f.support,{ajax:!!St,cors:!!St&&"withCredentials"in St}),f.support.ajax&&f.ajaxTransport(function(i){var n;if(!i.crossDomain||f.support.cors)return{send:function(r,a){var o,s,l=i.xhr();if(i.username?l.open(i.type,i.url,i.async,i.username,i.password):l.open(i.type,i.url,i.async),i.xhrFields)for(s in i.xhrFields)l[s]=i.xhrFields[s];i.mimeType&&l.overrideMimeType&&l.overrideMimeType(i.mimeType),i.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");try{for(s in r)l.setRequestHeader(s,r[s])}catch(e){}l.send(i.hasContent&&i.data||null),n=function(e,r){var s,u,c,d,p;try{if(n&&(r||4===l.readyState))if(n=t,o&&(l.onreadystatechange=f.noop,It&&delete Dt[o]),r)4!==l.readyState&&l.abort();else{s=l.status,c=l.getAllResponseHeaders(),d={},(p=l.responseXML)&&p.documentElement&&(d.xml=p);try{d.text=l.responseText}catch(e){}try{u=l.statusText}catch(e){u=""}s||!i.isLocal||i.crossDomain?1223===s&&(s=204):s=d.text?200:404}}catch(e){r||a(-1,e)}d&&a(s,u,d,c)},i.async?4===l.readyState?setTimeout(n,0):(o=++Ft,It&&(Dt||(Dt={},f(e).unload(It)),Dt[o]=n),l.onreadystatechange=n):n()},abort:function(){n&&n(0,1)}}});var Nt,Ot,Mt=/^(?:toggle|show|hide)$/,Bt=new RegExp("^(?:([-+])=|)("+m+")([a-z%]*)$","i"),$t=/queueHooks$/,Lt=[function(e,t,i){var n,r,a,o,s,l,u,c,d,p=this,h=e.style,g={},m=[],v=e.nodeType&&Ke(e);i.queue||(null==(c=f._queueHooks(e,"fx")).unqueued&&(c.unqueued=0,d=c.empty.fire,c.empty.fire=function(){c.unqueued||d()}),c.unqueued++,p.always(function(){p.always(function(){c.unqueued--,f.queue(e,"fx").length||c.empty.fire()})}));1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===f.css(e,"display")&&"none"===f.css(e,"float")&&(f.support.inlineBlockNeedsLayout&&"inline"!==it(e.nodeName)?h.zoom=1:h.display="inline-block"));i.overflow&&(h.overflow="hidden",f.support.shrinkWrapBlocks||p.done(function(){h.overflow=i.overflow[0],h.overflowX=i.overflow[1],h.overflowY=i.overflow[2]}));for(n in t)if(a=t[n],Mt.exec(a)){if(delete t[n],l=l||"toggle"===a,a===(v?"hide":"show"))continue;m.push(n)}if(o=m.length){"hidden"in(s=f._data(e,"fxshow")||f._data(e,"fxshow",{}))&&(v=s.hidden),l&&(s.hidden=!v),v?f(e).show():p.done(function(){f(e).hide()}),p.done(function(){var t;for(t in f.removeData(e,"fxshow",!0),g)f.style(e,t,g[t])});for(n=0;n<o;n++)r=m[n],u=p.createTween(r,v?s[r]:0),g[r]=s[r]||f.style(e,r),r in s||(s[r]=u.start,v&&(u.end=u.start,u.start="width"===r||"height"===r?1:0))}}],jt={"*":[function(e,t){var i,n,r=this.createTween(e,t),a=Bt.exec(t),o=r.cur(),s=+o||0,l=1,u=20;if(a){if(i=+a[2],"px"!==(n=a[3]||(f.cssNumber[e]?"":"px"))&&s){s=f.css(r.elem,e,!0)||i||1;do{s/=l=l||".5",f.style(r.elem,e,s+n)}while(l!==(l=r.cur()/o)&&1!==l&&--u)}r.unit=n,r.start=s,r.end=a[1]?s+(a[1]+1)*i:i}return r}]};function Ht(){return setTimeout(function(){Nt=t},0),Nt=f.now()}function Xt(e,t,i){var n,r,a,o=0,s=Lt.length,l=f.Deferred().always(function(){delete u.elem}),u=function(){for(var t=Nt||Ht(),i=Math.max(0,c.startTime+c.duration-t),n=1-(i/c.duration||0),r=0,a=c.tweens.length;r<a;r++)c.tweens[r].run(n);return l.notifyWith(e,[c,n,i]),n<1&&a?i:(l.resolveWith(e,[c]),!1)},c=l.promise({elem:e,props:f.extend({},t),opts:f.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:Nt||Ht(),duration:i.duration,tweens:[],createTween:function(t,i,n){var r=f.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){for(var i=0,n=t?c.tweens.length:0;i<n;i++)c.tweens[i].run(1);return t?l.resolveWith(e,[c,t]):l.rejectWith(e,[c,t]),this}}),d=c.props;for(!function(e,t){var i,n,r,a,o;for(i in e)if(n=f.camelCase(i),r=t[n],a=e[i],f.isArray(a)&&(r=a[1],a=e[i]=a[0]),i!==n&&(e[n]=a,delete e[i]),(o=f.cssHooks[n])&&"expand"in o)for(i in a=o.expand(a),delete e[n],a)i in e||(e[i]=a[i],t[i]=r);else t[n]=r}(d,c.opts.specialEasing);o<s;o++)if(n=Lt[o].call(c,e,d,c.opts))return n;return r=c,a=d,f.each(a,function(e,t){for(var i=(jt[e]||[]).concat(jt["*"]),n=0,a=i.length;n<a;n++)if(i[n].call(r,e,t))return}),f.isFunction(c.opts.start)&&c.opts.start.call(e,c),f.fx.timer(f.extend(u,{anim:c,queue:c.opts.queue,elem:e})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function Vt(e,t,i,n,r){return new Vt.prototype.init(e,t,i,n,r)}function Ut(e,t){var i,n={height:e},r=0;for(t=t?1:0;r<4;r+=2-t)n["margin"+(i=We[r])]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}f.Animation=f.extend(Xt,{tweener:function(e,t){f.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,r=e.length;n<r;n++)i=e[n],jt[i]=jt[i]||[],jt[i].unshift(t)},prefilter:function(e,t){t?Lt.unshift(e):Lt.push(e)}}),f.Tween=Vt,Vt.prototype={constructor:Vt,init:function(e,t,i,n,r,a){this.elem=e,this.prop=i,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=a||(f.cssNumber[i]?"":"px")},cur:function(){var e=Vt.propHooks[this.prop];return e&&e.get?e.get(this):Vt.propHooks._default.get(this)},run:function(e){var t,i=Vt.propHooks[this.prop];return this.options.duration?this.pos=t=f.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):Vt.propHooks._default.set(this),this}},Vt.prototype.init.prototype=Vt.prototype,Vt.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=f.css(e.elem,e.prop,!1,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){f.fx.step[e.prop]?f.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[f.cssProps[e.prop]]||f.cssHooks[e.prop])?f.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Vt.propHooks.scrollTop=Vt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},f.each(["toggle","show","hide"],function(e,t){var i=f.fn[t];f.fn[t]=function(n,r,a){return null==n||"boolean"==typeof n||!e&&f.isFunction(n)&&f.isFunction(r)?i.apply(this,arguments):this.animate(Ut(t,!0),n,r,a)}}),f.fn.extend({fadeTo:function(e,t,i,n){return this.filter(Ke).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var r=f.isEmptyObject(e),a=f.speed(t,i,n),o=function(){var t=Xt(this,f.extend({},e),a);r&&t.stop(!0)};return r||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(e,i,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=i,i=e,e=t),i&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",a=f.timers,o=f._data(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&$t.test(i)&&r(o[i]);for(i=a.length;i--;)a[i].elem!==this||null!=e&&a[i].queue!==e||(a[i].anim.stop(n),t=!1,a.splice(i,1));!t&&n||f.dequeue(this,e)})}}),f.each({slideDown:Ut("show"),slideUp:Ut("hide"),slideToggle:Ut("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){f.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),f.speed=function(e,t,i){var n=e&&"object"==typeof e?f.extend({},e):{complete:i||!i&&t||f.isFunction(e)&&e,duration:e,easing:i&&t||t&&!f.isFunction(t)&&t};return n.duration=f.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in f.fx.speeds?f.fx.speeds[n.duration]:f.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){f.isFunction(n.old)&&n.old.call(this),n.queue&&f.dequeue(this,n.queue)},n},f.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},f.timers=[],f.fx=Vt.prototype.init,f.fx.tick=function(){var e,i=f.timers,n=0;for(Nt=f.now();n<i.length;n++)(e=i[n])()||i[n]!==e||i.splice(n--,1);i.length||f.fx.stop(),Nt=t},f.fx.timer=function(e){e()&&f.timers.push(e)&&!Ot&&(Ot=setInterval(f.fx.tick,f.fx.interval))},f.fx.interval=13,f.fx.stop=function(){clearInterval(Ot),Ot=null},f.fx.speeds={slow:600,fast:200,_default:400},f.fx.step={},f.expr&&f.expr.filters&&(f.expr.filters.animated=function(e){return f.grep(f.timers,function(t){return e===t.elem}).length});var qt=/^(?:body|html)$/i;function Wt(e){return f.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}f.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){f.offset.setOffset(this,e,t)});var i,n,r,a,o,s,l,u={top:0,left:0},c=this[0],d=c&&c.ownerDocument;return d?(n=d.body)===c?f.offset.bodyOffset(c):(i=d.documentElement,f.contains(i,c)?(void 0!==c.getBoundingClientRect&&(u=c.getBoundingClientRect()),r=Wt(d),a=i.clientTop||n.clientTop||0,o=i.clientLeft||n.clientLeft||0,s=r.pageYOffset||i.scrollTop,l=r.pageXOffset||i.scrollLeft,{top:u.top+s-a,left:u.left+l-o}):u):void 0},f.offset={bodyOffset:function(e){var t=e.offsetTop,i=e.offsetLeft;return f.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(f.css(e,"marginTop"))||0,i+=parseFloat(f.css(e,"marginLeft"))||0),{top:t,left:i}},setOffset:function(e,t,i){var n=f.css(e,"position");"static"===n&&(e.style.position="relative");var r,a,o=f(e),s=o.offset(),l=f.css(e,"top"),u=f.css(e,"left"),c={},d={};("absolute"===n||"fixed"===n)&&f.inArray("auto",[l,u])>-1?(r=(d=o.position()).top,a=d.left):(r=parseFloat(l)||0,a=parseFloat(u)||0),f.isFunction(t)&&(t=t.call(e,i,s)),null!=t.top&&(c.top=t.top-s.top+r),null!=t.left&&(c.left=t.left-s.left+a),"using"in t?t.using.call(e,c):o.css(c)}},f.fn.extend({position:function(){if(this[0]){var e=this[0],t=this.offsetParent(),i=this.offset(),n=qt.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(f.css(e,"marginTop"))||0,i.left-=parseFloat(f.css(e,"marginLeft"))||0,n.top+=parseFloat(f.css(t[0],"borderTopWidth"))||0,n.left+=parseFloat(f.css(t[0],"borderLeftWidth"))||0,{top:i.top-n.top,left:i.left-n.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||r.body;e&&!qt.test(e.nodeName)&&"static"===f.css(e,"position");)e=e.offsetParent;return e||r.body})}}),f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var n=/Y/.test(i);f.fn[e]=function(r){return f.access(this,function(e,r,a){var o=Wt(e);if(a===t)return o?i in o?o[i]:o.document.documentElement[r]:e[r];o?o.scrollTo(n?f(o).scrollLeft():a,n?a:f(o).scrollTop()):e[r]=a},e,r,arguments.length,null)}}),f.each({Height:"height",Width:"width"},function(e,i){f.each({padding:"inner"+e,content:i,"":"outer"+e},function(n,r){f.fn[r]=function(r,a){var o=arguments.length&&(n||"boolean"!=typeof r),s=n||(!0===r||!0===a?"margin":"border");return f.access(this,function(i,n,r){var a;return f.isWindow(i)?i.document.documentElement["client"+e]:9===i.nodeType?(a=i.documentElement,Math.max(i.body["scroll"+e],a["scroll"+e],i.body["offset"+e],a["offset"+e],a["client"+e])):r===t?f.css(i,n,r,s):f.style(i,n,r,s)},i,o?r:t,o,null)}})}),e.jQuery=e.$=f,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})}(window):function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){var i=[],n=i.slice,r=i.concat,a=i.push,o=i.indexOf,s={},l=s.toString,u=s.hasOwnProperty,c="".trim,d={},p=e.document,h=function(e,t){return new h.fn.init(e,t)},g=/^-ms-/,f=/-([\da-z])/gi,m=function(e,t){return t.toUpperCase()};function v(e){var t=e.length,i=h.type(e);return"function"!==i&&!h.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e))}h.fn=h.prototype={jquery:"2.1.0",constructor:h,selector:"",length:0,toArray:function(){return n.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:n.call(this)},pushStack:function(e){var t=h.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return h.each(this,e,t)},map:function(e){return this.pushStack(h.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(n.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:a,sort:i.sort,splice:i.splice},h.extend=h.fn.extend=function(){var e,t,i,n,r,a,o=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[s]||{},s++),"object"==typeof o||h.isFunction(o)||(o={}),s===l&&(o=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)i=o[t],o!==(n=e[t])&&(u&&n&&(h.isPlainObject(n)||(r=h.isArray(n)))?(r?(r=!1,a=i&&h.isArray(i)?i:[]):a=i&&h.isPlainObject(i)?i:{},o[t]=h.extend(u,a,n)):void 0!==n&&(o[t]=n));return o},h.extend({expando:"jQuery"+("2.1.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===h.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return e-parseFloat(e)>=0},isPlainObject:function(e){if("object"!==h.type(e)||e.nodeType||h.isWindow(e))return!1;try{if(e.constructor&&!u.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?s[l.call(e)]||"object":typeof e},globalEval:function(e){var t,i=eval;(e=h.trim(e))&&(1===e.indexOf("use strict")?((t=p.createElement("script")).text=e,p.head.appendChild(t).parentNode.removeChild(t)):i(e))},camelCase:function(e){return e.replace(g,"ms-").replace(f,m)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var n=0,r=e.length,a=v(e);if(i){if(a)for(;n<r&&!1!==t.apply(e[n],i);n++);else for(n in e)if(!1===t.apply(e[n],i))break}else if(a)for(;n<r&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":c.call(e)},makeArray:function(e,t){var i=t||[];return null!=e&&(v(Object(e))?h.merge(i,"string"==typeof e?[e]:e):a.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:o.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;n<i;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,i){for(var n=[],r=0,a=e.length,o=!i;r<a;r++)!t(e[r],r)!==o&&n.push(e[r]);return n},map:function(e,t,i){var n,a=0,o=e.length,s=[];if(v(e))for(;a<o;a++)null!=(n=t(e[a],a,i))&&s.push(n);else for(a in e)null!=(n=t(e[a],a,i))&&s.push(n);return r.apply([],s)},guid:1,proxy:function(e,t){var i,r,a;if("string"==typeof t&&(i=e[t],t=e,e=i),h.isFunction(e))return r=n.call(arguments,2),(a=function(){return e.apply(t||this,r.concat(n.call(arguments)))}).guid=e.guid=e.guid||h.guid++,a},now:Date.now,support:d}),h.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){s["[object "+t+"]"]=t.toLowerCase()});var b=function(e){var t,i,n,r,a,o,s,l,u,c,d,p,h,g,f,m,v,b="sizzle"+-new Date,y=e.document,x=0,C=0,_=ne(),w=ne(),E=ne(),T=function(e,t){return e===t&&(u=!0),0},z="undefined",R=1<<31,A={}.hasOwnProperty,P=[],D=P.pop,S=P.push,I=P.push,F=P.slice,k=P.indexOf||function(e){for(var t=0,i=this.length;t<i;t++)if(this[t]===e)return t;return-1},N="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",O="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",B=M.replace("w","w#"),$="\\["+O+"*("+M+")"+O+"*(?:([*^$|!~]?=)"+O+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+B+")|)|)"+O+"*\\]",L=":("+M+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+$.replace(3,8)+")*)|.*)\\)|)",j=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g"),H=new RegExp("^"+O+"*,"+O+"*"),X=new RegExp("^"+O+"*([>+~]|"+O+")"+O+"*"),V=new RegExp("="+O+"*([^\\]'\"]*?)"+O+"*\\]","g"),U=new RegExp(L),q=new RegExp("^"+B+"$"),W={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+$),PSEUDO:new RegExp("^"+L),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),bool:new RegExp("^(?:"+N+")$","i"),needsContext:new RegExp("^"+O+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)","i")},G=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,Z=/'|\\/g,ee=new RegExp("\\\\([\\da-f]{1,6}"+O+"?|("+O+")|.)","ig"),te=function(e,t,i){var n="0x"+t-65536;return n!=n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{I.apply(P=F.call(y.childNodes),y.childNodes),P[y.childNodes.length].nodeType}catch(e){I={apply:P.length?function(e,t){S.apply(e,F.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function ie(e,t,r,a){var s,l,u,p,f,m,x,C,_,w;if((t?t.ownerDocument||t:y)!==d&&c(t),r=r||[],!e||"string"!=typeof e)return r;if(1!==(p=(t=t||d).nodeType)&&9!==p)return[];if(h&&!a){if(s=K.exec(e))if(u=s[1]){if(9===p){if(!(l=t.getElementById(u))||!l.parentNode)return r;if(l.id===u)return r.push(l),r}else if(t.ownerDocument&&(l=t.ownerDocument.getElementById(u))&&v(t,l)&&l.id===u)return r.push(l),r}else{if(s[2])return I.apply(r,t.getElementsByTagName(e)),r;if((u=s[3])&&i.getElementsByClassName&&t.getElementsByClassName)return I.apply(r,t.getElementsByClassName(u)),r}if(i.qsa&&(!g||!g.test(e))){if(C=x=b,_=t,w=9===p&&e,1===p&&"object"!==t.nodeName.toLowerCase()){for(m=he(e),(x=t.getAttribute("id"))?C=x.replace(Z,"\\$&"):t.setAttribute("id",C),C="[id='"+C+"'] ",f=m.length;f--;)m[f]=C+ge(m[f]);_=J.test(e)&&de(t.parentNode)||t,w=m.join(",")}if(w)try{return I.apply(r,_.querySelectorAll(w)),r}catch(e){}finally{x||t.removeAttribute("id")}}}return function(e,t,r,a){var s,l,u,c,d,p=he(e);if(!a&&1===p.length){if((l=p[0]=p[0].slice(0)).length>2&&"ID"===(u=l[0]).type&&i.getById&&9===t.nodeType&&h&&n.relative[l[1].type]){if(!(t=(n.find.ID(u.matches[0].replace(ee,te),t)||[])[0]))return r;e=e.slice(l.shift().value.length)}for(s=W.needsContext.test(e)?0:l.length;s--&&(u=l[s],!n.relative[c=u.type]);)if((d=n.find[c])&&(a=d(u.matches[0].replace(ee,te),J.test(l[0].type)&&de(t.parentNode)||t))){if(l.splice(s,1),!(e=a.length&&ge(l)))return I.apply(r,a),r;break}}return o(e,p)(a,t,!h,r,J.test(e)&&de(t.parentNode)||t),r}(e.replace(j,"$1"),t,r,a)}function ne(){var e=[];return function t(i,r){return e.push(i+" ")>n.cacheLength&&delete t[e.shift()],t[i+" "]=r}}function re(e){return e[b]=!0,e}function ae(e){var t=d.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function oe(e,t){for(var i=e.split("|"),r=e.length;r--;)n.attrHandle[i[r]]=t}function se(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||R)-(~e.sourceIndex||R);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function le(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function ue(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function ce(e){return re(function(t){return t=+t,re(function(i,n){for(var r,a=e([],i.length,t),o=a.length;o--;)i[r=a[o]]&&(i[r]=!(n[r]=i[r]))})})}function de(e){return e&&typeof e.getElementsByTagName!==z&&e}for(t in i=ie.support={},a=ie.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},c=ie.setDocument=function(e){var t,r=e?e.ownerDocument||e:y,o=r.defaultView;return r!==d&&9===r.nodeType&&r.documentElement?(d=r,p=r.documentElement,h=!a(r),o&&o!==o.top&&(o.addEventListener?o.addEventListener("unload",function(){c()},!1):o.attachEvent&&o.attachEvent("onunload",function(){c()})),i.attributes=ae(function(e){return e.className="i",!e.getAttribute("className")}),i.getElementsByTagName=ae(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),i.getElementsByClassName=Q.test(r.getElementsByClassName)&&ae(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),i.getById=ae(function(e){return p.appendChild(e).id=b,!r.getElementsByName||!r.getElementsByName(b).length}),i.getById?(n.find.ID=function(e,t){if(typeof t.getElementById!==z&&h){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},n.filter.ID=function(e){var t=e.replace(ee,te);return function(e){return e.getAttribute("id")===t}}):(delete n.find.ID,n.filter.ID=function(e){var t=e.replace(ee,te);return function(e){var i=typeof e.getAttributeNode!==z&&e.getAttributeNode("id");return i&&i.value===t}}),n.find.TAG=i.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==z)return t.getElementsByTagName(e)}:function(e,t){var i,n=[],r=0,a=t.getElementsByTagName(e);if("*"===e){for(;i=a[r++];)1===i.nodeType&&n.push(i);return n}return a},n.find.CLASS=i.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!==z&&h)return t.getElementsByClassName(e)},f=[],g=[],(i.qsa=Q.test(r.querySelectorAll))&&(ae(function(e){e.innerHTML="<select t=''><option selected=''></option></select>",e.querySelectorAll("[t^='']").length&&g.push("[*^$]="+O+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+O+"*(?:value|"+N+")"),e.querySelectorAll(":checked").length||g.push(":checked")}),ae(function(e){var t=r.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+O+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(i.matchesSelector=Q.test(m=p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ae(function(e){i.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),f.push("!=",L)}),g=g.length&&new RegExp(g.join("|")),f=f.length&&new RegExp(f.join("|")),t=Q.test(p.compareDocumentPosition),v=t||Q.test(p.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},T=t?function(e,t){if(e===t)return u=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!i.sortDetached&&t.compareDocumentPosition(e)===n?e===r||e.ownerDocument===y&&v(y,e)?-1:t===r||t.ownerDocument===y&&v(y,t)?1:l?k.call(l,e)-k.call(l,t):0:4&n?-1:1)}:function(e,t){if(e===t)return u=!0,0;var i,n=0,a=e.parentNode,o=t.parentNode,s=[e],c=[t];if(!a||!o)return e===r?-1:t===r?1:a?-1:o?1:l?k.call(l,e)-k.call(l,t):0;if(a===o)return se(e,t);for(i=e;i=i.parentNode;)s.unshift(i);for(i=t;i=i.parentNode;)c.unshift(i);for(;s[n]===c[n];)n++;return n?se(s[n],c[n]):s[n]===y?-1:c[n]===y?1:0},r):d},ie.matches=function(e,t){return ie(e,null,null,t)},ie.matchesSelector=function(e,t){if((e.ownerDocument||e)!==d&&c(e),t=t.replace(V,"='$1']"),i.matchesSelector&&h&&(!f||!f.test(t))&&(!g||!g.test(t)))try{var n=m.call(e,t);if(n||i.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return ie(t,d,null,[e]).length>0},ie.contains=function(e,t){return(e.ownerDocument||e)!==d&&c(e),v(e,t)},ie.attr=function(e,t){(e.ownerDocument||e)!==d&&c(e);var r=n.attrHandle[t.toLowerCase()],a=r&&A.call(n.attrHandle,t.toLowerCase())?r(e,t,!h):void 0;return void 0!==a?a:i.attributes||!h?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},ie.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ie.uniqueSort=function(e){var t,n=[],r=0,a=0;if(u=!i.detectDuplicates,l=!i.sortStable&&e.slice(0),e.sort(T),u){for(;t=e[a++];)t===e[a]&&(r=n.push(a));for(;r--;)e.splice(n[r],1)}return l=null,e},r=ie.getText=function(e){var t,i="",n=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=r(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[n++];)i+=r(t);return i},(n=ie.selectors={cacheLength:50,createPseudo:re,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ee,te),e[3]=(e[4]||e[5]||"").replace(ee,te),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ie.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ie.error(e[0]),e},PSEUDO:function(e){var t,i=!e[5]&&e[2];return W.CHILD.test(e[0])?null:(e[3]&&void 0!==e[4]?e[2]=e[4]:i&&U.test(i)&&(t=he(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ee,te).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=_[e+" "];return t||(t=new RegExp("(^|"+O+")"+e+"("+O+"|$)"))&&_(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==z&&e.getAttribute("class")||"")})},ATTR:function(e,t,i){return function(n){var r=ie.attr(n,e);return null==r?"!="===t:!t||(r+="","="===t?r===i:"!="===t?r!==i:"^="===t?i&&0===r.indexOf(i):"*="===t?i&&r.indexOf(i)>-1:"$="===t?i&&r.slice(-i.length)===i:"~="===t?(" "+r+" ").indexOf(i)>-1:"|="===t&&(r===i||r.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,n,r){var a="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===n&&0===r?function(e){return!!e.parentNode}:function(t,i,l){var u,c,d,p,h,g,f=a!==o?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s;if(m){if(a){for(;f;){for(d=t;d=d[f];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;g=f="only"===e&&!g&&"nextSibling"}return!0}if(g=[o?m.firstChild:m.lastChild],o&&y){for(h=(u=(c=m[b]||(m[b]={}))[e]||[])[0]===x&&u[1],p=u[0]===x&&u[2],d=h&&m.childNodes[h];d=++h&&d&&d[f]||(p=h=0)||g.pop();)if(1===d.nodeType&&++p&&d===t){c[e]=[x,h,p];break}}else if(y&&(u=(t[b]||(t[b]={}))[e])&&u[0]===x)p=u[1];else for(;(d=++h&&d&&d[f]||(p=h=0)||g.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++p||(y&&((d[b]||(d[b]={}))[e]=[x,p]),d!==t)););return(p-=r)===n||p%n==0&&p/n>=0}}},PSEUDO:function(e,t){var i,r=n.pseudos[e]||n.setFilters[e.toLowerCase()]||ie.error("unsupported pseudo: "+e);return r[b]?r(t):r.length>1?(i=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?re(function(e,i){for(var n,a=r(e,t),o=a.length;o--;)e[n=k.call(e,a[o])]=!(i[n]=a[o])}):function(e){return r(e,0,i)}):r}},pseudos:{not:re(function(e){var t=[],i=[],n=o(e.replace(j,"$1"));return n[b]?re(function(e,t,i,r){for(var a,o=n(e,null,r,[]),s=e.length;s--;)(a=o[s])&&(e[s]=!(t[s]=a))}):function(e,r,a){return t[0]=e,n(t,null,a,i),!i.pop()}}),has:re(function(e){return function(t){return ie(e,t).length>0}}),contains:re(function(e){return function(t){return(t.textContent||t.innerText||r(t)).indexOf(e)>-1}}),lang:re(function(e){return q.test(e||"")||ie.error("unsupported lang: "+e),e=e.replace(ee,te).toLowerCase(),function(t){var i;do{if(i=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return Y.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ce(function(){return[0]}),last:ce(function(e,t){return[t-1]}),eq:ce(function(e,t,i){return[i<0?i+t:i]}),even:ce(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:ce(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:ce(function(e,t,i){for(var n=i<0?i+t:i;--n>=0;)e.push(n);return e}),gt:ce(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=le(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=ue(t);function pe(){}function he(e,t){var i,r,a,o,s,l,u,c=w[e+" "];if(c)return t?0:c.slice(0);for(s=e,l=[],u=n.preFilter;s;){for(o in i&&!(r=H.exec(s))||(r&&(s=s.slice(r[0].length)||s),l.push(a=[])),i=!1,(r=X.exec(s))&&(i=r.shift(),a.push({value:i,type:r[0].replace(j," ")}),s=s.slice(i.length)),n.filter)!(r=W[o].exec(s))||u[o]&&!(r=u[o](r))||(i=r.shift(),a.push({value:i,type:o,matches:r}),s=s.slice(i.length));if(!i)break}return t?s.length:s?ie.error(e):w(e,l).slice(0)}function ge(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function fe(e,t,i){var n=t.dir,r=i&&"parentNode"===n,a=C++;return t.first?function(t,i,a){for(;t=t[n];)if(1===t.nodeType||r)return e(t,i,a)}:function(t,i,o){var s,l,u=[x,a];if(o){for(;t=t[n];)if((1===t.nodeType||r)&&e(t,i,o))return!0}else for(;t=t[n];)if(1===t.nodeType||r){if((s=(l=t[b]||(t[b]={}))[n])&&s[0]===x&&s[1]===a)return u[2]=s[2];if(l[n]=u,u[2]=e(t,i,o))return!0}}}function me(e){return e.length>1?function(t,i,n){for(var r=e.length;r--;)if(!e[r](t,i,n))return!1;return!0}:e[0]}function ve(e,t,i,n,r){for(var a,o=[],s=0,l=e.length,u=null!=t;s<l;s++)(a=e[s])&&(i&&!i(a,n,r)||(o.push(a),u&&t.push(s)));return o}function be(e,t,i,n,r,a){return n&&!n[b]&&(n=be(n)),r&&!r[b]&&(r=be(r,a)),re(function(a,o,s,l){var u,c,d,p=[],h=[],g=o.length,f=a||function(e,t,i){for(var n=0,r=t.length;n<r;n++)ie(e,t[n],i);return i}(t||"*",s.nodeType?[s]:s,[]),m=!e||!a&&t?f:ve(f,p,e,s,l),v=i?r||(a?e:g||n)?[]:o:m;if(i&&i(m,v,s,l),n)for(u=ve(v,h),n(u,[],s,l),c=u.length;c--;)(d=u[c])&&(v[h[c]]=!(m[h[c]]=d));if(a){if(r||e){if(r){for(u=[],c=v.length;c--;)(d=v[c])&&u.push(m[c]=d);r(null,v=[],u,l)}for(c=v.length;c--;)(d=v[c])&&(u=r?k.call(a,d):p[c])>-1&&(a[u]=!(o[u]=d))}}else v=ve(v===o?v.splice(g,v.length):v),r?r(null,o,v,l):I.apply(o,v)})}function ye(e){for(var t,i,r,a=e.length,o=n.relative[e[0].type],l=o||n.relative[" "],u=o?1:0,c=fe(function(e){return e===t},l,!0),d=fe(function(e){return k.call(t,e)>-1},l,!0),p=[function(e,i,n){return!o&&(n||i!==s)||((t=i).nodeType?c(e,i,n):d(e,i,n))}];u<a;u++)if(i=n.relative[e[u].type])p=[fe(me(p),i)];else{if((i=n.filter[e[u].type].apply(null,e[u].matches))[b]){for(r=++u;r<a&&!n.relative[e[r].type];r++);return be(u>1&&me(p),u>1&&ge(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(j,"$1"),i,u<r&&ye(e.slice(u,r)),r<a&&ye(e=e.slice(r)),r<a&&ge(e))}p.push(i)}return me(p)}return pe.prototype=n.filters=n.pseudos,n.setFilters=new pe,o=ie.compile=function(e,t){var i,r,a,o,l,u,c=[],p=[],h=E[e+" "];if(!h){for(t||(t=he(e)),i=t.length;i--;)(h=ye(t[i]))[b]?c.push(h):p.push(h);h=E(e,(r=p,o=(a=c).length>0,l=r.length>0,u=function(e,t,i,u,c){var p,h,g,f=0,m="0",v=e&&[],b=[],y=s,C=e||l&&n.find.TAG("*",c),_=x+=null==y?1:Math.random()||.1,w=C.length;for(c&&(s=t!==d&&t);m!==w&&null!=(p=C[m]);m++){if(l&&p){for(h=0;g=r[h++];)if(g(p,t,i)){u.push(p);break}c&&(x=_)}o&&((p=!g&&p)&&f--,e&&v.push(p))}if(f+=m,o&&m!==f){for(h=0;g=a[h++];)g(v,b,t,i);if(e){if(f>0)for(;m--;)v[m]||b[m]||(b[m]=D.call(u));b=ve(b)}I.apply(u,b),c&&!e&&b.length>0&&f+a.length>1&&ie.uniqueSort(u)}return c&&(x=_,s=y),v},o?re(u):u))}return h},i.sortStable=b.split("").sort(T).join("")===b,i.detectDuplicates=!!u,c(),i.sortDetached=ae(function(e){return 1&e.compareDocumentPosition(d.createElement("div"))}),ae(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||oe("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),i.attributes&&ae(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||oe("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ae(function(e){return null==e.getAttribute("disabled")})||oe(N,function(e,t,i){var n;if(!i)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),ie}(e);h.find=b,h.expr=b.selectors,h.expr[":"]=h.expr.pseudos,h.unique=b.uniqueSort,h.text=b.getText,h.isXMLDoc=b.isXML,h.contains=b.contains;var y=h.expr.match.needsContext,x=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,C=/^.[^:#\[\.,]*$/;function _(e,t,i){if(h.isFunction(t))return h.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return h.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(C.test(t))return h.filter(t,e,i);t=h.filter(t,e)}return h.grep(e,function(e){return o.call(t,e)>=0!==i})}h.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?h.find.matchesSelector(n,e)?[n]:[]:h.find.matches(e,h.grep(t,function(e){return 1===e.nodeType}))},h.fn.extend({find:function(e){var t,i=this.length,n=[],r=this;if("string"!=typeof e)return this.pushStack(h(e).filter(function(){for(t=0;t<i;t++)if(h.contains(r[t],this))return!0}));for(t=0;t<i;t++)h.find(e,r[t],n);return(n=this.pushStack(i>1?h.unique(n):n)).selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(_(this,e||[],!1))},not:function(e){return this.pushStack(_(this,e||[],!0))},is:function(e){return!!_(this,"string"==typeof e&&y.test(e)?h(e):e||[],!1).length}});var w,E=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(h.fn.init=function(e,t){var i,n;if(!e)return this;if("string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:E.exec(e))||!i[1]&&t)return!t||t.jquery?(t||w).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof h?t[0]:t,h.merge(this,h.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:p,!0)),x.test(i[1])&&h.isPlainObject(t))for(i in t)h.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(n=p.getElementById(i[2]))&&n.parentNode&&(this.length=1,this[0]=n),this.context=p,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):h.isFunction(e)?void 0!==w.ready?w.ready(e):e(h):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),h.makeArray(e,this))}).prototype=h.fn,w=h(p);var T=/^(?:parents|prev(?:Until|All))/,z={children:!0,contents:!0,next:!0,prev:!0};function R(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}h.extend({dir:function(e,t,i){for(var n=[],r=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&h(e).is(i))break;n.push(e)}return n},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}}),h.fn.extend({has:function(e){var t=h(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(h.contains(this,t[e]))return!0})},closest:function(e,t){for(var i,n=0,r=this.length,a=[],o=y.test(e)||"string"!=typeof e?h(e,t||this.context):0;n<r;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(o?o.index(i)>-1:1===i.nodeType&&h.find.matchesSelector(i,e))){a.push(i);break}return this.pushStack(a.length>1?h.unique(a):a)},index:function(e){return e?"string"==typeof e?o.call(h(e),this[0]):o.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(h.unique(h.merge(this.get(),h(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),h.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h.dir(e,"parentNode")},parentsUntil:function(e,t,i){return h.dir(e,"parentNode",i)},next:function(e){return R(e,"nextSibling")},prev:function(e){return R(e,"previousSibling")},nextAll:function(e){return h.dir(e,"nextSibling")},prevAll:function(e){return h.dir(e,"previousSibling")},nextUntil:function(e,t,i){return h.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return h.dir(e,"previousSibling",i)},siblings:function(e){return h.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return h.sibling(e.firstChild)},contents:function(e){return e.contentDocument||h.merge([],e.childNodes)}},function(e,t){h.fn[e]=function(i,n){var r=h.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=h.filter(n,r)),this.length>1&&(z[e]||h.unique(r),T.test(e)&&r.reverse()),this.pushStack(r)}});var A,P=/\S+/g,D={};function S(){p.removeEventListener("DOMContentLoaded",S,!1),e.removeEventListener("load",S,!1),h.ready()}h.Callbacks=function(e){var t,i;e="string"==typeof e?D[e]||(i=D[t=e]={},h.each(t.match(P)||[],function(e,t){i[t]=!0}),i):h.extend({},e);var n,r,a,o,s,l,u=[],c=!e.once&&[],d=function(t){for(n=e.memory&&t,r=!0,l=o||0,o=0,s=u.length,a=!0;u&&l<s;l++)if(!1===u[l].apply(t[0],t[1])&&e.stopOnFalse){n=!1;break}a=!1,u&&(c?c.length&&d(c.shift()):n?u=[]:p.disable())},p={add:function(){if(u){var t=u.length;!function t(i){h.each(i,function(i,n){var r=h.type(n);"function"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==r&&t(n)})}(arguments),a?s=u.length:n&&(o=t,d(n))}return this},remove:function(){return u&&h.each(arguments,function(e,t){for(var i;(i=h.inArray(t,u,i))>-1;)u.splice(i,1),a&&(i<=s&&s--,i<=l&&l--)}),this},has:function(e){return e?h.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],s=0,this},disable:function(){return u=c=n=void 0,this},disabled:function(){return!u},lock:function(){return c=void 0,n||p.disable(),this},locked:function(){return!c},fireWith:function(e,t){return!u||r&&!c||(t=[e,(t=t||[]).slice?t.slice():t],a?c.push(t):d(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!r}};return p},h.extend({Deferred:function(e){var t=[["resolve","done",h.Callbacks("once memory"),"resolved"],["reject","fail",h.Callbacks("once memory"),"rejected"],["notify","progress",h.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return h.Deferred(function(i){h.each(t,function(t,a){var o=h.isFunction(e[t])&&e[t];r[a[1]](function(){var e=o&&o.apply(this,arguments);e&&h.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[a[0]+"With"](this===n?i.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?h.extend(e,n):n}},r={};return n.pipe=n.then,h.each(t,function(e,a){var o=a[2],s=a[3];n[a[1]]=o.add,s&&o.add(function(){i=s},t[1^e][2].disable,t[2][2].lock),r[a[0]]=function(){return r[a[0]+"With"](this===r?n:this,arguments),this},r[a[0]+"With"]=o.fireWith}),n.promise(r),e&&e.call(r,r),r},when:function(e){var t,i,r,a=0,o=n.call(arguments),s=o.length,l=1!==s||e&&h.isFunction(e.promise)?s:0,u=1===l?e:h.Deferred(),c=function(e,i,r){return function(a){i[e]=this,r[e]=arguments.length>1?n.call(arguments):a,r===t?u.notifyWith(i,r):--l||u.resolveWith(i,r)}};if(s>1)for(t=new Array(s),i=new Array(s),r=new Array(s);a<s;a++)o[a]&&h.isFunction(o[a].promise)?o[a].promise().done(c(a,r,o)).fail(u.reject).progress(c(a,i,t)):--l;return l||u.resolveWith(r,o),u.promise()}}),h.fn.ready=function(e){return h.ready.promise().done(e),this},h.extend({isReady:!1,readyWait:1,holdReady:function(e){e?h.readyWait++:h.ready(!0)},ready:function(e){(!0===e?--h.readyWait:h.isReady)||(h.isReady=!0,!0!==e&&--h.readyWait>0||(A.resolveWith(p,[h]),h.fn.trigger&&h(p).trigger("ready").off("ready")))}}),h.ready.promise=function(t){return A||(A=h.Deferred(),"complete"===p.readyState?setTimeout(h.ready):(p.addEventListener("DOMContentLoaded",S,!1),e.addEventListener("load",S,!1))),A.promise(t)},h.ready.promise();var I=h.access=function(e,t,i,n,r,a,o){var s=0,l=e.length,u=null==i;if("object"===h.type(i))for(s in r=!0,i)h.access(e,t,s,i[s],!0,a,o);else if(void 0!==n&&(r=!0,h.isFunction(n)||(o=!0),u&&(o?(t.call(e,n),t=null):(u=t,t=function(e,t,i){return u.call(h(e),i)})),t))for(;s<l;s++)t(e[s],i,o?n:n.call(e[s],s,t(e[s],i)));return r?e:u?t.call(e):l?t(e[0],i):a};function F(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=h.expando+Math.random()}h.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},F.uid=1,F.accepts=h.acceptData,F.prototype={key:function(e){if(!F.accepts(e))return 0;var t={},i=e[this.expando];if(!i){i=F.uid++;try{t[this.expando]={value:i},Object.defineProperties(e,t)}catch(n){t[this.expando]=i,h.extend(e,t)}}return this.cache[i]||(this.cache[i]={}),i},set:function(e,t,i){var n,r=this.key(e),a=this.cache[r];if("string"==typeof t)a[t]=i;else if(h.isEmptyObject(a))h.extend(this.cache[r],t);else for(n in t)a[n]=t[n];return a},get:function(e,t){var i=this.cache[this.key(e)];return void 0===t?i:i[t]},access:function(e,t,i){var n;return void 0===t||t&&"string"==typeof t&&void 0===i?void 0!==(n=this.get(e,t))?n:this.get(e,h.camelCase(t)):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n,r,a=this.key(e),o=this.cache[a];if(void 0===t)this.cache[a]={};else{h.isArray(t)?n=t.concat(t.map(h.camelCase)):(r=h.camelCase(t),n=t in o?[t,r]:(n=r)in o?[n]:n.match(P)||[]),i=n.length;for(;i--;)delete o[n[i]]}},hasData:function(e){return!h.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var k=new F,N=new F,O=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,M=/([A-Z])/g;function B(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(M,"-$1").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:O.test(i)?h.parseJSON(i):i)}catch(e){}N.set(e,t,i)}else i=void 0;return i}h.extend({hasData:function(e){return N.hasData(e)||k.hasData(e)},data:function(e,t,i){return N.access(e,t,i)},removeData:function(e,t){N.remove(e,t)},_data:function(e,t,i){return k.access(e,t,i)},_removeData:function(e,t){k.remove(e,t)}}),h.fn.extend({data:function(e,t){var i,n,r,a=this[0],o=a&&a.attributes;if(void 0===e){if(this.length&&(r=N.get(a),1===a.nodeType&&!k.get(a,"hasDataAttrs"))){for(i=o.length;i--;)0===(n=o[i].name).indexOf("data-")&&(n=h.camelCase(n.slice(5)),B(a,n,r[n]));k.set(a,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){N.set(this,e)}):I(this,function(t){var i,n=h.camelCase(e);if(a&&void 0===t)return void 0!==(i=N.get(a,e))?i:void 0!==(i=N.get(a,n))?i:void 0!==(i=B(a,n,void 0))?i:void 0;this.each(function(){var i=N.get(this,n);N.set(this,n,t),-1!==e.indexOf("-")&&void 0!==i&&N.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){N.remove(this,e)})}}),h.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=k.get(e,t),i&&(!n||h.isArray(i)?n=k.access(e,t,h.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=h.queue(e,t),n=i.length,r=i.shift(),a=h._queueHooks(e,t);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete a.stop,r.call(e,function(){h.dequeue(e,t)},a)),!n&&a&&a.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return k.get(e,i)||k.access(e,i,{empty:h.Callbacks("once memory").add(function(){k.remove(e,[t+"queue",i])})})}}),h.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?h.queue(this[0],e):void 0===t?this:this.each(function(){var i=h.queue(this,e,t);h._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&h.dequeue(this,e)})},dequeue:function(e){return this.each(function(){h.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=h.Deferred(),a=this,o=this.length,s=function(){--n||r.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(i=k.get(a[o],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(s));return s(),r.promise(t)}});var $,L=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,j=["Top","Right","Bottom","Left"],H=function(e,t){return e=t||e,"none"===h.css(e,"display")||!h.contains(e.ownerDocument,e)},X=/^(?:checkbox|radio)$/i;($=p.createDocumentFragment().appendChild(p.createElement("div"))).innerHTML="<input type='radio' checked='checked' name='t'/>",d.checkClone=$.cloneNode(!0).cloneNode(!0).lastChild.checked,$.innerHTML="<textarea>x</textarea>",d.noCloneChecked=!!$.cloneNode(!0).lastChild.defaultValue;var V="undefined";d.focusinBubbles="onfocusin"in e;var U=/^key/,q=/^(?:mouse|contextmenu)|click/,W=/^(?:focusinfocus|focusoutblur)$/,G=/^([^.]*)(?:\.(.+)|)$/;function Y(){return!0}function Q(){return!1}function K(){try{return p.activeElement}catch(e){}}h.event={global:{},add:function(e,t,i,n,r){var a,o,s,l,u,c,d,p,g,f,m,v=k.get(e);if(v)for(i.handler&&(i=(a=i).handler,r=a.selector),i.guid||(i.guid=h.guid++),(l=v.events)||(l=v.events={}),(o=v.handle)||(o=v.handle=function(t){return typeof h!==V&&h.event.triggered!==t.type?h.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(P)||[""]).length;u--;)g=m=(s=G.exec(t[u])||[])[1],f=(s[2]||"").split(".").sort(),g&&(d=h.event.special[g]||{},g=(r?d.delegateType:d.bindType)||g,d=h.event.special[g]||{},c=h.extend({type:g,origType:m,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&h.expr.match.needsContext.test(r),namespace:f.join(".")},a),(p=l[g])||((p=l[g]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,n,f,o)||e.addEventListener&&e.addEventListener(g,o,!1)),d.add&&(d.add.call(e,c),c.handler.guid||(c.handler.guid=i.guid)),r?p.splice(p.delegateCount++,0,c):p.push(c),h.event.global[g]=!0)},remove:function(e,t,i,n,r){var a,o,s,l,u,c,d,p,g,f,m,v=k.hasData(e)&&k.get(e);if(v&&(l=v.events)){for(u=(t=(t||"").match(P)||[""]).length;u--;)if(g=m=(s=G.exec(t[u])||[])[1],f=(s[2]||"").split(".").sort(),g){for(d=h.event.special[g]||{},p=l[g=(n?d.delegateType:d.bindType)||g]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=p.length;a--;)c=p[a],!r&&m!==c.origType||i&&i.guid!==c.guid||s&&!s.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(p.splice(a,1),c.selector&&p.delegateCount--,d.remove&&d.remove.call(e,c));o&&!p.length&&(d.teardown&&!1!==d.teardown.call(e,f,v.handle)||h.removeEvent(e,g,v.handle),delete l[g])}else for(g in l)h.event.remove(e,g+t[u],i,n,!0);h.isEmptyObject(l)&&(delete v.handle,k.remove(e,"events"))}},trigger:function(t,i,n,r){var a,o,s,l,c,d,g,f=[n||p],m=u.call(t,"type")?t.type:t,v=u.call(t,"namespace")?t.namespace.split("."):[];if(o=s=n=n||p,3!==n.nodeType&&8!==n.nodeType&&!W.test(m+h.event.triggered)&&(m.indexOf(".")>=0&&(m=(v=m.split(".")).shift(),v.sort()),c=m.indexOf(":")<0&&"on"+m,(t=t[h.expando]?t:new h.Event(m,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=v.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),i=null==i?[t]:h.makeArray(i,[t]),g=h.event.special[m]||{},r||!g.trigger||!1!==g.trigger.apply(n,i))){if(!r&&!g.noBubble&&!h.isWindow(n)){for(l=g.delegateType||m,W.test(l+m)||(o=o.parentNode);o;o=o.parentNode)f.push(o),s=o;s===(n.ownerDocument||p)&&f.push(s.defaultView||s.parentWindow||e)}for(a=0;(o=f[a++])&&!t.isPropagationStopped();)t.type=a>1?l:g.bindType||m,(d=(k.get(o,"events")||{})[t.type]&&k.get(o,"handle"))&&d.apply(o,i),(d=c&&o[c])&&d.apply&&h.acceptData(o)&&(t.result=d.apply(o,i),!1===t.result&&t.preventDefault());return t.type=m,r||t.isDefaultPrevented()||g._default&&!1!==g._default.apply(f.pop(),i)||!h.acceptData(n)||c&&h.isFunction(n[m])&&!h.isWindow(n)&&((s=n[c])&&(n[c]=null),h.event.triggered=m,n[m](),h.event.triggered=void 0,s&&(n[c]=s)),t.result}},dispatch:function(e){e=h.event.fix(e);var t,i,r,a,o,s,l=n.call(arguments),u=(k.get(this,"events")||{})[e.type]||[],c=h.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(s=h.event.handlers.call(this,e,u),t=0;(a=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=a.elem,i=0;(o=a.handlers[i++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(o.namespace)||(e.handleObj=o,e.data=o.data,void 0!==(r=((h.event.special[o.origType]||{}).handle||o.handler).apply(a.elem,l))&&!1===(e.result=r)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,n,r,a,o=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(!0!==l.disabled||"click"!==e.type){for(n=[],i=0;i<s;i++)void 0===n[r=(a=t[i]).selector+" "]&&(n[r]=a.needsContext?h(r,this).index(l)>=0:h.find(r,this,null,[l]).length),n[r]&&n.push(a);n.length&&o.push({elem:l,handlers:n})}return s<t.length&&o.push({elem:this,handlers:t.slice(s)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,n,r,a=t.button;return null==e.pageX&&null!=t.clientX&&(n=(i=e.target.ownerDocument||p).documentElement,r=i.body,e.pageX=t.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(e){if(e[h.expando])return e;var t,i,n,r=e.type,a=e,o=this.fixHooks[r];for(o||(this.fixHooks[r]=o=q.test(r)?this.mouseHooks:U.test(r)?this.keyHooks:{}),n=o.props?this.props.concat(o.props):this.props,e=new h.Event(a),t=n.length;t--;)e[i=n[t]]=a[i];return e.target||(e.target=p),3===e.target.nodeType&&(e.target=e.target.parentNode),o.filter?o.filter(e,a):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==K()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===K()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&h.nodeName(this,"input"))return this.click(),!1},_default:function(e){return h.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,n){var r=h.extend(new h.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?h.event.trigger(r,null,t):h.event.dispatch.call(t,r),r.isDefaultPrevented()&&i.preventDefault()}},h.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)},h.Event=function(e,t){if(!(this instanceof h.Event))return new h.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.getPreventDefault&&e.getPreventDefault()?Y:Q):this.type=e,t&&h.extend(this,t),this.timeStamp=e&&e.timeStamp||h.now(),this[h.expando]=!0},h.Event.prototype={isDefaultPrevented:Q,isPropagationStopped:Q,isImmediatePropagationStopped:Q,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Y,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Y,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Y,this.stopPropagation()}},h.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){h.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||h.contains(this,n))||(e.type=r.origType,i=r.handler.apply(this,arguments),e.type=t),i}}}),d.focusinBubbles||h.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){h.event.simulate(t,e.target,h.event.fix(e),!0)};h.event.special[t]={setup:function(){var n=this.ownerDocument||this,r=k.access(n,t);r||n.addEventListener(e,i,!0),k.access(n,t,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=k.access(n,t)-1;r?k.access(n,t,r):(n.removeEventListener(e,i,!0),k.remove(n,t))}}}),h.fn.extend({on:function(e,t,i,n,r){var a,o;if("object"==typeof e){for(o in"string"!=typeof t&&(i=i||t,t=void 0),e)this.on(o,t,i,e[o],r);return this}if(null==i&&null==n?(n=t,i=t=void 0):null==n&&("string"==typeof t?(n=i,i=void 0):(n=i,i=t,t=void 0)),!1===n)n=Q;else if(!n)return this;return 1===r&&(a=n,(n=function(e){return h().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=h.guid++)),this.each(function(){h.event.add(this,e,n,i,t)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,h(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=Q),this.each(function(){h.event.remove(this,e,i,t)})},trigger:function(e,t){return this.each(function(){h.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return h.event.trigger(e,t,i,!0)}});var J=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Z=/<([\w:]+)/,ee=/<|&#?\w+;/,te=/<(?:script|style|link)/i,ie=/checked\s*(?:[^=]|=\s*.checked.)/i,ne=/^$|\/(?:java|ecma)script/i,re=/^true\/(.*)/,ae=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,oe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function se(e,t){return h.nodeName(e,"table")&&h.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function le(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function ue(e){var t=re.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function ce(e,t){for(var i=0,n=e.length;i<n;i++)k.set(e[i],"globalEval",!t||k.get(t[i],"globalEval"))}function de(e,t){var i,n,r,a,o,s,l,u;if(1===t.nodeType){if(k.hasData(e)&&(a=k.access(e),o=k.set(t,a),u=a.events))for(r in delete o.handle,o.events={},u)for(i=0,n=u[r].length;i<n;i++)h.event.add(t,r,u[r][i]);N.hasData(e)&&(s=N.access(e),l=h.extend({},s),N.set(t,l))}}function pe(e,t){var i=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&h.nodeName(e,t)?h.merge([e],i):i}oe.optgroup=oe.option,oe.tbody=oe.tfoot=oe.colgroup=oe.caption=oe.thead,oe.th=oe.td,h.extend({clone:function(e,t,i){var n,r,a,o,s,l,u,c=e.cloneNode(!0),p=h.contains(e.ownerDocument,e);if(!(d.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||h.isXMLDoc(e)))for(o=pe(c),n=0,r=(a=pe(e)).length;n<r;n++)s=a[n],l=o[n],void 0,"input"===(u=l.nodeName.toLowerCase())&&X.test(s.type)?l.checked=s.checked:"input"!==u&&"textarea"!==u||(l.defaultValue=s.defaultValue);if(t)if(i)for(a=a||pe(e),o=o||pe(c),n=0,r=a.length;n<r;n++)de(a[n],o[n]);else de(e,c);return(o=pe(c,"script")).length>0&&ce(o,!p&&pe(e,"script")),c},buildFragment:function(e,t,i,n){for(var r,a,o,s,l,u,c=t.createDocumentFragment(),d=[],p=0,g=e.length;p<g;p++)if((r=e[p])||0===r)if("object"===h.type(r))h.merge(d,r.nodeType?[r]:r);else if(ee.test(r)){for(a=a||c.appendChild(t.createElement("div")),o=(Z.exec(r)||["",""])[1].toLowerCase(),s=oe[o]||oe._default,a.innerHTML=s[1]+r.replace(J,"<$1></$2>")+s[2],u=s[0];u--;)a=a.lastChild;h.merge(d,a.childNodes),(a=c.firstChild).textContent=""}else d.push(t.createTextNode(r));for(c.textContent="",p=0;r=d[p++];)if((!n||-1===h.inArray(r,n))&&(l=h.contains(r.ownerDocument,r),a=pe(c.appendChild(r),"script"),l&&ce(a),i))for(u=0;r=a[u++];)ne.test(r.type||"")&&i.push(r);return c},cleanData:function(e){for(var t,i,n,r,a,o,s=h.event.special,l=0;void 0!==(i=e[l]);l++){if(h.acceptData(i)&&(a=i[k.expando])&&(t=k.cache[a])){if((n=Object.keys(t.events||{})).length)for(o=0;void 0!==(r=n[o]);o++)s[r]?h.event.remove(i,r):h.removeEvent(i,r,t.handle);k.cache[a]&&delete k.cache[a]}delete N.cache[i[N.expando]]}}}),h.fn.extend({text:function(e){return I(this,function(e){return void 0===e?h.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||se(this,e).appendChild(e)})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=se(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,n=e?h.filter(e,this):this,r=0;null!=(i=n[r]);r++)t||1!==i.nodeType||h.cleanData(pe(i)),i.parentNode&&(t&&h.contains(i.ownerDocument,i)&&ce(pe(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(h.cleanData(pe(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return h.clone(this,e,t)})},html:function(e){return I(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!te.test(e)&&!oe[(Z.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(J,"<$1></$2>");try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(h.cleanData(pe(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,h.cleanData(pe(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=r.apply([],e);var i,n,a,o,s,l,u=0,c=this.length,p=this,g=c-1,f=e[0],m=h.isFunction(f);if(m||c>1&&"string"==typeof f&&!d.checkClone&&ie.test(f))return this.each(function(i){var n=p.eq(i);m&&(e[0]=f.call(this,i,n.html())),n.domManip(e,t)});if(c&&(n=(i=h.buildFragment(e,this[0].ownerDocument,!1,this)).firstChild,1===i.childNodes.length&&(i=n),n)){for(o=(a=h.map(pe(i,"script"),le)).length;u<c;u++)s=i,u!==g&&(s=h.clone(s,!0,!0),o&&h.merge(a,pe(s,"script"))),t.call(this[u],s,u);if(o)for(l=a[a.length-1].ownerDocument,h.map(a,ue),u=0;u<o;u++)s=a[u],ne.test(s.type||"")&&!k.access(s,"globalEval")&&h.contains(l,s)&&(s.src?h._evalUrl&&h._evalUrl(s.src):h.globalEval(s.textContent.replace(ae,"")))}return this}}),h.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){h.fn[e]=function(e){for(var i,n=[],r=h(e),o=r.length-1,s=0;s<=o;s++)i=s===o?this:this.clone(!0),h(r[s])[t](i),a.apply(n,i.get());return this.pushStack(n)}});var he,ge={};function fe(t,i){var n=h(i.createElement(t)).appendTo(i.body),r=e.getDefaultComputedStyle?e.getDefaultComputedStyle(n[0]).display:h.css(n[0],"display");return n.detach(),r}function me(e){var t=p,i=ge[e];return i||("none"!==(i=fe(e,t))&&i||((t=(he=(he||h("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(),t.close(),i=fe(e,t),he.detach()),ge[e]=i),i}var ve=/^margin/,be=new RegExp("^("+L+")(?!px)[a-z%]+$","i"),ye=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};function xe(e,t,i){var n,r,a,o,s=e.style;return(i=i||ye(e))&&(o=i.getPropertyValue(t)||i[t]),i&&(""!==o||h.contains(e.ownerDocument,e)||(o=h.style(e,t)),be.test(o)&&ve.test(t)&&(n=s.width,r=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=i.width,s.width=n,s.minWidth=r,s.maxWidth=a)),void 0!==o?o+"":o}function Ce(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){var t,i,n=p.documentElement,r=p.createElement("div"),a=p.createElement("div");function o(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",n.appendChild(r);var o=e.getComputedStyle(a,null);t="1%"!==o.top,i="4px"===o.width,n.removeChild(r)}a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",d.clearCloneStyle="content-box"===a.style.backgroundClip,r.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",r.appendChild(a),e.getComputedStyle&&h.extend(d,{pixelPosition:function(){return o(),t},boxSizingReliable:function(){return null==i&&o(),i},reliableMarginRight:function(){var t,i=a.appendChild(p.createElement("div"));return i.style.cssText=a.style.cssText="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",i.style.marginRight=i.style.width="0",a.style.width="1px",n.appendChild(r),t=!parseFloat(e.getComputedStyle(i,null).marginRight),n.removeChild(r),a.innerHTML="",t}})}(),h.swap=function(e,t,i,n){var r,a,o={};for(a in t)o[a]=e.style[a],e.style[a]=t[a];for(a in r=i.apply(e,n||[]),t)e.style[a]=o[a];return r};var _e=/^(none|table(?!-c[ea]).+)/,we=new RegExp("^("+L+")(.*)$","i"),Ee=new RegExp("^([+-])=("+L+")","i"),Te={position:"absolute",visibility:"hidden",display:"block"},ze={letterSpacing:0,fontWeight:400},Re=["Webkit","O","Moz","ms"];function Ae(e,t){if(t in e)return t;for(var i=t[0].toUpperCase()+t.slice(1),n=t,r=Re.length;r--;)if((t=Re[r]+i)in e)return t;return n}function Pe(e,t,i){var n=we.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function De(e,t,i,n,r){for(var a=i===(n?"border":"content")?4:"width"===t?1:0,o=0;a<4;a+=2)"margin"===i&&(o+=h.css(e,i+j[a],!0,r)),n?("content"===i&&(o-=h.css(e,"padding"+j[a],!0,r)),"margin"!==i&&(o-=h.css(e,"border"+j[a]+"Width",!0,r))):(o+=h.css(e,"padding"+j[a],!0,r),"padding"!==i&&(o+=h.css(e,"border"+j[a]+"Width",!0,r)));return o}function Se(e,t,i){var n=!0,r="width"===t?e.offsetWidth:e.offsetHeight,a=ye(e),o="border-box"===h.css(e,"boxSizing",!1,a);if(r<=0||null==r){if(((r=xe(e,t,a))<0||null==r)&&(r=e.style[t]),be.test(r))return r;n=o&&(d.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+De(e,t,i||(o?"border":"content"),n,a)+"px"}function Ie(e,t){for(var i,n,r,a=[],o=0,s=e.length;o<s;o++)(n=e[o]).style&&(a[o]=k.get(n,"olddisplay"),i=n.style.display,t?(a[o]||"none"!==i||(n.style.display=""),""===n.style.display&&H(n)&&(a[o]=k.access(n,"olddisplay",me(n.nodeName)))):a[o]||(r=H(n),(i&&"none"!==i||!r)&&k.set(n,"olddisplay",r?i:h.css(n,"display"))));for(o=0;o<s;o++)(n=e[o]).style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?a[o]||"":"none"));return e}function Fe(e,t,i,n,r){return new Fe.prototype.init(e,t,i,n,r)}h.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=xe(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,a,o,s=h.camelCase(t),l=e.style;if(t=h.cssProps[s]||(h.cssProps[s]=Ae(l,s)),o=h.cssHooks[t]||h.cssHooks[s],void 0===i)return o&&"get"in o&&void 0!==(r=o.get(e,!1,n))?r:l[t];"string"===(a=typeof i)&&(r=Ee.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(h.css(e,t)),a="number"),null!=i&&i==i&&("number"!==a||h.cssNumber[s]||(i+="px"),d.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),o&&"set"in o&&void 0===(i=o.set(e,i,n))||(l[t]="",l[t]=i))}},css:function(e,t,i,n){var r,a,o,s=h.camelCase(t);return t=h.cssProps[s]||(h.cssProps[s]=Ae(e.style,s)),(o=h.cssHooks[t]||h.cssHooks[s])&&"get"in o&&(r=o.get(e,!0,i)),void 0===r&&(r=xe(e,t,n)),"normal"===r&&t in ze&&(r=ze[t]),""===i||i?(a=parseFloat(r),!0===i||h.isNumeric(a)?a||0:r):r}}),h.each(["height","width"],function(e,t){h.cssHooks[t]={get:function(e,i,n){if(i)return 0===e.offsetWidth&&_e.test(h.css(e,"display"))?h.swap(e,Te,function(){return Se(e,t,n)}):Se(e,t,n)},set:function(e,i,n){var r=n&&ye(e);return Pe(0,i,n?De(e,t,n,"border-box"===h.css(e,"boxSizing",!1,r),r):0)}}}),h.cssHooks.marginRight=Ce(d.reliableMarginRight,function(e,t){if(t)return h.swap(e,{display:"inline-block"},xe,[e,"marginRight"])}),h.each({margin:"",padding:"",border:"Width"},function(e,t){h.cssHooks[e+t]={expand:function(i){for(var n=0,r={},a="string"==typeof i?i.split(" "):[i];n<4;n++)r[e+j[n]+t]=a[n]||a[n-2]||a[0];return r}},ve.test(e)||(h.cssHooks[e+t].set=Pe)}),h.fn.extend({css:function(e,t){return I(this,function(e,t,i){var n,r,a={},o=0;if(h.isArray(t)){for(n=ye(e),r=t.length;o<r;o++)a[t[o]]=h.css(e,t[o],!1,n);return a}return void 0!==i?h.style(e,t,i):h.css(e,t)},e,t,arguments.length>1)},show:function(){return Ie(this,!0)},hide:function(){return Ie(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){H(this)?h(this).show():h(this).hide()})}}),h.Tween=Fe,Fe.prototype={constructor:Fe,init:function(e,t,i,n,r,a){this.elem=e,this.prop=i,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=a||(h.cssNumber[i]?"":"px")},cur:function(){var e=Fe.propHooks[this.prop];return e&&e.get?e.get(this):Fe.propHooks._default.get(this)},run:function(e){var t,i=Fe.propHooks[this.prop];return this.options.duration?this.pos=t=h.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):Fe.propHooks._default.set(this),this}},Fe.prototype.init.prototype=Fe.prototype,Fe.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=h.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){h.fx.step[e.prop]?h.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[h.cssProps[e.prop]]||h.cssHooks[e.prop])?h.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Fe.propHooks.scrollTop=Fe.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},h.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},h.fx=Fe.prototype.init,h.fx.step={};var ke,Ne,Oe,Me,Be,$e=/^(?:toggle|show|hide)$/,Le=new RegExp("^(?:([+-])=|)("+L+")([a-z%]*)$","i"),je=/queueHooks$/,He=[function(e,t,i){var n,r,a,o,s,l,u,c=this,d={},p=e.style,g=e.nodeType&&H(e),f=k.get(e,"fxshow");i.queue||(null==(s=h._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,h.queue(e,"fx").length||s.empty.fire()})}));1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],"none"===(u=h.css(e,"display"))&&(u=me(e.nodeName)),"inline"===u&&"none"===h.css(e,"float")&&(p.display="inline-block"));i.overflow&&(p.overflow="hidden",c.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in t)if(r=t[n],$e.exec(r)){if(delete t[n],a=a||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!f||void 0===f[n])continue;g=!0}d[n]=f&&f[n]||h.style(e,n)}if(!h.isEmptyObject(d))for(n in f?"hidden"in f&&(g=f.hidden):f=k.access(e,"fxshow",{}),a&&(f.hidden=!g),g?h(e).show():c.done(function(){h(e).hide()}),c.done(function(){var t;for(t in k.remove(e,"fxshow"),d)h.style(e,t,d[t])}),d)o=qe(g?f[n]:0,n,c),n in f||(f[n]=o.start,g&&(o.end=o.start,o.start="width"===n||"height"===n?1:0))}],Xe={"*":[function(e,t){var i=this.createTween(e,t),n=i.cur(),r=Le.exec(t),a=r&&r[3]||(h.cssNumber[e]?"":"px"),o=(h.cssNumber[e]||"px"!==a&&+n)&&Le.exec(h.css(i.elem,e)),s=1,l=20;if(o&&o[3]!==a){a=a||o[3],r=r||[],o=+n||1;do{o/=s=s||".5",h.style(i.elem,e,o+a)}while(s!==(s=i.cur()/n)&&1!==s&&--l)}return r&&(o=i.start=+o||+n||0,i.unit=a,i.end=r[1]?o+(r[1]+1)*r[2]:+r[2]),i}]};function Ve(){return setTimeout(function(){ke=void 0}),ke=h.now()}function Ue(e,t){var i,n=0,r={height:e};for(t=t?1:0;n<4;n+=2-t)r["margin"+(i=j[n])]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function qe(e,t,i){for(var n,r=(Xe[t]||[]).concat(Xe["*"]),a=0,o=r.length;a<o;a++)if(n=r[a].call(i,t,e))return n}function We(e,t,i){var n,r,a=0,o=He.length,s=h.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=ke||Ve(),i=Math.max(0,u.startTime+u.duration-t),n=1-(i/u.duration||0),a=0,o=u.tweens.length;a<o;a++)u.tweens[a].run(n);return s.notifyWith(e,[u,n,i]),n<1&&o?i:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:h.extend({},t),opts:h.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:ke||Ve(),duration:i.duration,tweens:[],createTween:function(t,i){var n=h.Tween(e,u.opts,t,i,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(n),n},stop:function(t){var i=0,n=t?u.tweens.length:0;if(r)return this;for(r=!0;i<n;i++)u.tweens[i].run(1);return t?s.resolveWith(e,[u,t]):s.rejectWith(e,[u,t]),this}}),c=u.props;for(!function(e,t){var i,n,r,a,o;for(i in e)if(r=t[n=h.camelCase(i)],a=e[i],h.isArray(a)&&(r=a[1],a=e[i]=a[0]),i!==n&&(e[n]=a,delete e[i]),(o=h.cssHooks[n])&&"expand"in o)for(i in a=o.expand(a),delete e[n],a)i in e||(e[i]=a[i],t[i]=r);else t[n]=r}(c,u.opts.specialEasing);a<o;a++)if(n=He[a].call(u,e,c,u.opts))return n;return h.map(c,qe,u),h.isFunction(u.opts.start)&&u.opts.start.call(e,u),h.fx.timer(h.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}h.Animation=h.extend(We,{tweener:function(e,t){h.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,r=e.length;n<r;n++)i=e[n],Xe[i]=Xe[i]||[],Xe[i].unshift(t)},prefilter:function(e,t){t?He.unshift(e):He.push(e)}}),h.speed=function(e,t,i){var n=e&&"object"==typeof e?h.extend({},e):{complete:i||!i&&t||h.isFunction(e)&&e,duration:e,easing:i&&t||t&&!h.isFunction(t)&&t};return n.duration=h.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in h.fx.speeds?h.fx.speeds[n.duration]:h.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){h.isFunction(n.old)&&n.old.call(this),n.queue&&h.dequeue(this,n.queue)},n},h.fn.extend({fadeTo:function(e,t,i,n){return this.filter(H).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var r=h.isEmptyObject(e),a=h.speed(t,i,n),o=function(){var t=We(this,h.extend({},e),a);(r||k.get(this,"finish"))&&t.stop(!0)};return o.finish=o,r||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",a=h.timers,o=k.get(this);if(r)o[r]&&o[r].stop&&n(o[r]);else for(r in o)o[r]&&o[r].stop&&je.test(r)&&n(o[r]);for(r=a.length;r--;)a[r].elem!==this||null!=e&&a[r].queue!==e||(a[r].anim.stop(i),t=!1,a.splice(r,1));!t&&i||h.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,i=k.get(this),n=i[e+"queue"],r=i[e+"queueHooks"],a=h.timers,o=n?n.length:0;for(i.finish=!0,h.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<o;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),h.each(["toggle","show","hide"],function(e,t){var i=h.fn[t];h.fn[t]=function(e,n,r){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(Ue(t,!0),e,n,r)}}),h.each({slideDown:Ue("show"),slideUp:Ue("hide"),slideToggle:Ue("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){h.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),h.timers=[],h.fx.tick=function(){var e,t=0,i=h.timers;for(ke=h.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||h.fx.stop(),ke=void 0},h.fx.timer=function(e){h.timers.push(e),e()?h.fx.start():h.timers.pop()},h.fx.interval=13,h.fx.start=function(){Ne||(Ne=setInterval(h.fx.tick,h.fx.interval))},h.fx.stop=function(){clearInterval(Ne),Ne=null},h.fx.speeds={slow:600,fast:200,_default:400},h.fn.delay=function(e,t){return e=h.fx&&h.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},Oe=p.createElement("input"),Me=p.createElement("select"),Be=Me.appendChild(p.createElement("option")),Oe.type="checkbox",d.checkOn=""!==Oe.value,d.optSelected=Be.selected,Me.disabled=!0,d.optDisabled=!Be.disabled,(Oe=p.createElement("input")).value="t",Oe.type="radio",d.radioValue="t"===Oe.value;var Ge,Ye=h.expr.attrHandle;h.fn.extend({attr:function(e,t){return I(this,h.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){h.removeAttr(this,e)})}}),h.extend({attr:function(e,t,i){var n,r,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===V?h.prop(e,t,i):(1===a&&h.isXMLDoc(e)||(t=t.toLowerCase(),n=h.attrHooks[t]||(h.expr.match.bool.test(t)?Ge:void 0)),void 0===i?n&&"get"in n&&null!==(r=n.get(e,t))?r:null==(r=h.find.attr(e,t))?void 0:r:null!==i?n&&"set"in n&&void 0!==(r=n.set(e,i,t))?r:(e.setAttribute(t,i+""),i):void h.removeAttr(e,t))},removeAttr:function(e,t){var i,n,r=0,a=t&&t.match(P);if(a&&1===e.nodeType)for(;i=a[r++];)n=h.propFix[i]||i,h.expr.match.bool.test(i)&&(e[n]=!1),e.removeAttribute(i)},attrHooks:{type:{set:function(e,t){if(!d.radioValue&&"radio"===t&&h.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}}}),Ge={set:function(e,t,i){return!1===t?h.removeAttr(e,i):e.setAttribute(i,i),i}},h.each(h.expr.match.bool.source.match(/\w+/g),function(e,t){var i=Ye[t]||h.find.attr;Ye[t]=function(e,t,n){var r,a;return n||(a=Ye[t],Ye[t]=r,r=null!=i(e,t,n)?t.toLowerCase():null,Ye[t]=a),r}});var Qe=/^(?:input|select|textarea|button)$/i;h.fn.extend({prop:function(e,t){return I(this,h.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[h.propFix[e]||e]})}}),h.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,i){var n,r,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return(1!==a||!h.isXMLDoc(e))&&(t=h.propFix[t]||t,r=h.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||Qe.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),d.optSelected||(h.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),h.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){h.propFix[this.toLowerCase()]=this});var Ke=/[\t\r\n\f]/g;h.fn.extend({addClass:function(e){var t,i,n,r,a,o,s="string"==typeof e&&e,l=0,u=this.length;if(h.isFunction(e))return this.each(function(t){h(this).addClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(P)||[];l<u;l++)if(n=1===(i=this[l]).nodeType&&(i.className?(" "+i.className+" ").replace(Ke," "):" ")){for(a=0;r=t[a++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");o=h.trim(n),i.className!==o&&(i.className=o)}return this},removeClass:function(e){var t,i,n,r,a,o,s=0===arguments.length||"string"==typeof e&&e,l=0,u=this.length;if(h.isFunction(e))return this.each(function(t){h(this).removeClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(P)||[];l<u;l++)if(n=1===(i=this[l]).nodeType&&(i.className?(" "+i.className+" ").replace(Ke," "):"")){for(a=0;r=t[a++];)for(;n.indexOf(" "+r+" ")>=0;)n=n.replace(" "+r+" "," ");o=e?h.trim(n):"",i.className!==o&&(i.className=o)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):h.isFunction(e)?this.each(function(i){h(this).toggleClass(e.call(this,i,this.className,t),t)}):this.each(function(){if("string"===i)for(var t,n=0,r=h(this),a=e.match(P)||[];t=a[n++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else i!==V&&"boolean"!==i||(this.className&&k.set(this,"__className__",this.className),this.className=this.className||!1===e?"":k.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;i<n;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Ke," ").indexOf(t)>=0)return!0;return!1}});var Je=/\r/g;h.fn.extend({val:function(e){var t,i,n,r=this[0];return arguments.length?(n=h.isFunction(e),this.each(function(i){var r;1===this.nodeType&&(null==(r=n?e.call(this,i,h(this).val()):e)?r="":"number"==typeof r?r+="":h.isArray(r)&&(r=h.map(r,function(e){return null==e?"":e+""})),(t=h.valHooks[this.type]||h.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=h.valHooks[r.type]||h.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(r,"value"))?i:"string"==typeof(i=r.value)?i.replace(Je,""):null==i?"":i:void 0}}),h.extend({valHooks:{select:{get:function(e){for(var t,i,n=e.options,r=e.selectedIndex,a="select-one"===e.type||r<0,o=a?null:[],s=a?r+1:n.length,l=r<0?s:a?r:0;l<s;l++)if(((i=n[l]).selected||l===r)&&(d.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!h.nodeName(i.parentNode,"optgroup"))){if(t=h(i).val(),a)return t;o.push(t)}return o},set:function(e,t){for(var i,n,r=e.options,a=h.makeArray(t),o=r.length;o--;)((n=r[o]).selected=h.inArray(h(n).val(),a)>=0)&&(i=!0);return i||(e.selectedIndex=-1),a}}}}),h.each(["radio","checkbox"],function(){h.valHooks[this]={set:function(e,t){if(h.isArray(t))return e.checked=h.inArray(h(e).val(),t)>=0}},d.checkOn||(h.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),h.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){h.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),h.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var Ze=h.now(),et=/\?/;h.parseJSON=function(e){return JSON.parse(e+"")},h.parseXML=function(e){var t,i;if(!e||"string"!=typeof e)return null;try{i=new DOMParser,t=i.parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||h.error("Invalid XML: "+e),t};var tt,it,nt=/#.*$/,rt=/([?&])_=[^&]*/,at=/^(.*?):[ \t]*([^\r\n]*)$/gm,ot=/^(?:GET|HEAD)$/,st=/^\/\//,lt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ut={},ct={},dt="*/".concat("*");try{it=location.href}catch(e){(it=p.createElement("a")).href="",it=it.href}function pt(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,r=0,a=t.toLowerCase().match(P)||[];if(h.isFunction(i))for(;n=a[r++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function ht(e,t,i,n){var r={},a=e===ct;function o(s){var l;return r[s]=!0,h.each(e[s]||[],function(e,s){var u=s(t,i,n);return"string"!=typeof u||a||r[u]?a?!(l=u):void 0:(t.dataTypes.unshift(u),o(u),!1)}),l}return o(t.dataTypes[0])||!r["*"]&&o("*")}function gt(e,t){var i,n,r=h.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&h.extend(!0,e,n),e}tt=lt.exec(it.toLowerCase())||[],h.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:it,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(tt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":dt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":h.parseJSON,"text xml":h.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?gt(gt(e,h.ajaxSettings),t):gt(h.ajaxSettings,e)},ajaxPrefilter:pt(ut),ajaxTransport:pt(ct),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,n,r,a,o,s,l,u,c=h.ajaxSetup({},t),d=c.context||c,p=c.context&&(d.nodeType||d.jquery)?h(d):h.event,g=h.Deferred(),f=h.Callbacks("once memory"),m=c.statusCode||{},v={},b={},y=0,x="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!a)for(a={};t=at.exec(r);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?r:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return y||(e=b[i]=b[i]||e,v[e]=t),this},overrideMimeType:function(e){return y||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(y<2)for(t in e)m[t]=[m[t],e[t]];else C.always(e[C.status]);return this},abort:function(e){var t=e||x;return i&&i.abort(t),_(0,t),this}};if(g.promise(C).complete=f.add,C.success=C.done,C.error=C.fail,c.url=((e||c.url||it)+"").replace(nt,"").replace(st,tt[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=h.trim(c.dataType||"*").toLowerCase().match(P)||[""],null==c.crossDomain&&(s=lt.exec(c.url.toLowerCase()),c.crossDomain=!(!s||s[1]===tt[1]&&s[2]===tt[2]&&(s[3]||("http:"===s[1]?"80":"443"))===(tt[3]||("http:"===tt[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=h.param(c.data,c.traditional)),ht(ut,c,t,C),2===y)return C;for(u in(l=c.global)&&0==h.active++&&h.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!ot.test(c.type),n=c.url,c.hasContent||(c.data&&(n=c.url+=(et.test(n)?"&":"?")+c.data,delete c.data),!1===c.cache&&(c.url=rt.test(n)?n.replace(rt,"$1_="+Ze++):n+(et.test(n)?"&":"?")+"_="+Ze++)),c.ifModified&&(h.lastModified[n]&&C.setRequestHeader("If-Modified-Since",h.lastModified[n]),h.etag[n]&&C.setRequestHeader("If-None-Match",h.etag[n])),(c.data&&c.hasContent&&!1!==c.contentType||t.contentType)&&C.setRequestHeader("Content-Type",c.contentType),C.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+dt+"; q=0.01":""):c.accepts["*"]),c.headers)C.setRequestHeader(u,c.headers[u]);if(c.beforeSend&&(!1===c.beforeSend.call(d,C,c)||2===y))return C.abort();for(u in x="abort",{success:1,error:1,complete:1})C[u](c[u]);if(i=ht(ct,c,t,C)){C.readyState=1,l&&p.trigger("ajaxSend",[C,c]),c.async&&c.timeout>0&&(o=setTimeout(function(){C.abort("timeout")},c.timeout));try{y=1,i.send(v,_)}catch(e){if(!(y<2))throw e;_(-1,e)}}else _(-1,"No Transport");function _(e,t,a,s){var u,v,b,x,_,w=t;2!==y&&(y=2,o&&clearTimeout(o),i=void 0,r=s||"",C.readyState=e>0?4:0,u=e>=200&&e<300||304===e,a&&(x=function(e,t,i){for(var n,r,a,o,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in s)if(s[r]&&s[r].test(n)){l.unshift(r);break}if(l[0]in i)a=l[0];else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){a=r;break}o||(o=r)}a=a||o}if(a)return a!==l[0]&&l.unshift(a),i[a]}(c,C,a)),x=function(e,t,i,n){var r,a,o,s,l,u={},c=e.dataTypes.slice();if(c[1])for(o in e.converters)u[o.toLowerCase()]=e.converters[o];for(a=c.shift();a;)if(e.responseFields[a]&&(i[e.responseFields[a]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=c.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(o=u[l+" "+a]||u["* "+a]))for(r in u)if((s=r.split(" "))[1]===a&&(o=u[l+" "+s[0]]||u["* "+s[0]])){!0===o?o=u[r]:!0!==u[r]&&(a=s[0],c.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}(c,x,C,u),u?(c.ifModified&&((_=C.getResponseHeader("Last-Modified"))&&(h.lastModified[n]=_),(_=C.getResponseHeader("etag"))&&(h.etag[n]=_)),204===e||"HEAD"===c.type?w="nocontent":304===e?w="notmodified":(w=x.state,v=x.data,u=!(b=x.error))):(b=w,!e&&w||(w="error",e<0&&(e=0))),C.status=e,C.statusText=(t||w)+"",u?g.resolveWith(d,[v,w,C]):g.rejectWith(d,[C,w,b]),C.statusCode(m),m=void 0,l&&p.trigger(u?"ajaxSuccess":"ajaxError",[C,c,u?v:b]),f.fireWith(d,[C,w]),l&&(p.trigger("ajaxComplete",[C,c]),--h.active||h.event.trigger("ajaxStop")))}return C},getJSON:function(e,t,i){return h.get(e,t,i,"json")},getScript:function(e,t){return h.get(e,void 0,t,"script")}}),h.each(["get","post"],function(e,t){h[t]=function(e,i,n,r){return h.isFunction(i)&&(r=r||n,n=i,i=void 0),h.ajax({url:e,type:t,dataType:r,data:i,success:n})}}),h.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){h.fn[t]=function(e){return this.on(t,e)}}),h._evalUrl=function(e){return h.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},h.fn.extend({wrapAll:function(e){var t;return h.isFunction(e)?this.each(function(t){h(this).wrapAll(e.call(this,t))}):(this[0]&&(t=h(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return h.isFunction(e)?this.each(function(t){h(this).wrapInner(e.call(this,t))}):this.each(function(){var t=h(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=h.isFunction(e);return this.each(function(i){h(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){h.nodeName(this,"body")||h(this).replaceWith(this.childNodes)}).end()}}),h.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},h.expr.filters.visible=function(e){return!h.expr.filters.hidden(e)};var ft=/%20/g,mt=/\[\]$/,vt=/\r?\n/g,bt=/^(?:submit|button|image|reset|file)$/i,yt=/^(?:input|select|textarea|keygen)/i;function xt(e,t,i,n){var r;if(h.isArray(t))h.each(t,function(t,r){i||mt.test(e)?n(e,r):xt(e+"["+("object"==typeof r?t:"")+"]",r,i,n)});else if(i||"object"!==h.type(t))n(e,t);else for(r in t)xt(e+"["+r+"]",t[r],i,n)}h.param=function(e,t){var i,n=[],r=function(e,t){t=h.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=h.ajaxSettings&&h.ajaxSettings.traditional),h.isArray(e)||e.jquery&&!h.isPlainObject(e))h.each(e,function(){r(this.name,this.value)});else for(i in e)xt(i,e[i],t,r);return n.join("&").replace(ft,"+")},h.fn.extend({serialize:function(){return h.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=h.prop(this,"elements");return e?h.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!h(this).is(":disabled")&&yt.test(this.nodeName)&&!bt.test(e)&&(this.checked||!X.test(e))}).map(function(e,t){var i=h(this).val();return null==i?null:h.isArray(i)?h.map(i,function(e){return{name:t.name,value:e.replace(vt,"\r\n")}}):{name:t.name,value:i.replace(vt,"\r\n")}}).get()}}),h.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Ct=0,_t={},wt={0:200,1223:204},Et=h.ajaxSettings.xhr();e.ActiveXObject&&h(e).on("unload",function(){for(var e in _t)_t[e]()}),d.cors=!!Et&&"withCredentials"in Et,d.ajax=Et=!!Et,h.ajaxTransport(function(e){var t;if(d.cors||Et&&!e.crossDomain)return{send:function(i,n){var r,a=e.xhr(),o=++Ct;if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)a[r]=e.xhrFields[r];for(r in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)a.setRequestHeader(r,i[r]);t=function(e){return function(){t&&(delete _t[o],t=a.onload=a.onerror=null,"abort"===e?a.abort():"error"===e?n(a.status,a.statusText):n(wt[a.status]||a.status,a.statusText,"string"==typeof a.responseText?{text:a.responseText}:void 0,a.getAllResponseHeaders()))}},a.onload=t(),a.onerror=t("error"),t=_t[o]=t("abort"),a.send(e.hasContent&&e.data||null)},abort:function(){t&&t()}}}),h.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return h.globalEval(e),e}}}),h.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),h.ajaxTransport("script",function(e){var t,i;if(e.crossDomain)return{send:function(n,r){t=h("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&r("error"===e.type?404:200,e.type)}),p.head.appendChild(t[0])},abort:function(){i&&i()}}});var Tt=[],zt=/(=)\?(?=&|$)|\?\?/;h.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Tt.pop()||h.expando+"_"+Ze++;return this[e]=!0,e}}),h.ajaxPrefilter("json jsonp",function(t,i,n){var r,a,o,s=!1!==t.jsonp&&(zt.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&zt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=h.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(zt,"$1"+r):!1!==t.jsonp&&(t.url+=(et.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return o||h.error(r+" was not called"),o[0]},t.dataTypes[0]="json",a=e[r],e[r]=function(){o=arguments},n.always(function(){e[r]=a,t[r]&&(t.jsonpCallback=i.jsonpCallback,Tt.push(r)),o&&h.isFunction(a)&&a(o[0]),o=a=void 0}),"script"}),h.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||p;var n=x.exec(e),r=!i&&[];return n?[t.createElement(n[1])]:(n=h.buildFragment([e],t,r),r&&r.length&&h(r).remove(),h.merge([],n.childNodes))};var Rt=h.fn.load;h.fn.load=function(e,t,i){if("string"!=typeof e&&Rt)return Rt.apply(this,arguments);var n,r,a,o=this,s=e.indexOf(" ");return s>=0&&(n=e.slice(s),e=e.slice(0,s)),h.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),o.length>0&&h.ajax({url:e,type:r,dataType:"html",data:t}).done(function(e){a=arguments,o.html(n?h("<div>").append(h.parseHTML(e)).find(n):e)}).complete(i&&function(e,t){o.each(i,a||[e.responseText,t,e])}),this},h.expr.filters.animated=function(e){return h.grep(h.timers,function(t){return e===t.elem}).length};var At=e.document.documentElement;function Pt(e){return h.isWindow(e)?e:9===e.nodeType&&e.defaultView}h.offset={setOffset:function(e,t,i){var n,r,a,o,s,l,u=h.css(e,"position"),c=h(e),d={};"static"===u&&(e.style.position="relative"),s=c.offset(),a=h.css(e,"top"),l=h.css(e,"left"),("absolute"===u||"fixed"===u)&&(a+l).indexOf("auto")>-1?(o=(n=c.position()).top,r=n.left):(o=parseFloat(a)||0,r=parseFloat(l)||0),h.isFunction(t)&&(t=t.call(e,i,s)),null!=t.top&&(d.top=t.top-s.top+o),null!=t.left&&(d.left=t.left-s.left+r),"using"in t?t.using.call(e,d):c.css(d)}},h.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){h.offset.setOffset(this,e,t)});var t,i,n=this[0],r={top:0,left:0},a=n&&n.ownerDocument;return a?(t=a.documentElement,h.contains(t,n)?(typeof n.getBoundingClientRect!==V&&(r=n.getBoundingClientRect()),i=Pt(a),{top:r.top+i.pageYOffset-t.clientTop,left:r.left+i.pageXOffset-t.clientLeft}):r):void 0},position:function(){if(this[0]){var e,t,i=this[0],n={top:0,left:0};return"fixed"===h.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),h.nodeName(e[0],"html")||(n=e.offset()),n.top+=h.css(e[0],"borderTopWidth",!0),n.left+=h.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-h.css(i,"marginTop",!0),left:t.left-n.left-h.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||At;e&&!h.nodeName(e,"html")&&"static"===h.css(e,"position");)e=e.offsetParent;return e||At})}}),h.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var n="pageYOffset"===i;h.fn[t]=function(r){return I(this,function(t,r,a){var o=Pt(t);if(void 0===a)return o?o[i]:t[r];o?o.scrollTo(n?e.pageXOffset:a,n?a:e.pageYOffset):t[r]=a},t,r,arguments.length,null)}}),h.each(["top","left"],function(e,t){h.cssHooks[t]=Ce(d.pixelPosition,function(e,i){if(i)return i=xe(e,t),be.test(i)?h(e).position()[t]+"px":i})}),h.each({Height:"height",Width:"width"},function(e,t){h.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){h.fn[n]=function(n,r){var a=arguments.length&&(i||"boolean"!=typeof n),o=i||(!0===n||!0===r?"margin":"border");return I(this,function(t,i,n){var r;return h.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===n?h.css(t,i,o):h.style(t,i,n,o)},t,a?n:void 0,a,null)}})}),h.fn.size=function(){return this.length},h.fn.andSelf=h.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return h});var Dt,St,It=e.jQuery,Ft=e.$;return h.noConflict=function(t){return e.$===h&&(e.$=Ft),t&&e.jQuery===h&&(e.jQuery=It),h},h.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},h.browser||(St={},(Dt=h.uaMatch(navigator.userAgent)).browser&&(St[Dt.browser]=!0,St.version=Dt.version),St.chrome?St.webkit=!0:St.webkit&&(St.safari=!0),h.browser=St),typeof t===V&&(e.jQuery=e.$=h),h}),function(e,t,i){e.migrateTrace=!1,e.migrateVersion="1.4.1";var n={};function r(i){var r=t.console;n[i]||(n[i]=!0,e.migrateWarnings.push(i),r&&r.warn&&!e.migrateMute&&(r.warn("JQMIGRATE: "+i),e.migrateTrace&&r.trace&&r.trace()))}function a(t,i,n,a){if(Object.defineProperty)try{return void Object.defineProperty(t,i,{configurable:!0,enumerable:!0,get:function(){return r(a),n},set:function(e){r(a),n=e}})}catch(e){}e._definePropertyBroken=!0,t[i]=n}e.migrateWarnings=[],t.console&&t.console.log&&t.console.log("JQMIGRATE: Migrate is installed"+(e.migrateMute?"":" with logging active")+", version "+e.migrateVersion),e.migrateTrace===i&&(e.migrateTrace=!0),e.migrateReset=function(){n={},e.migrateWarnings.length=0},"BackCompat"===document.compatMode&&r("jQuery is not compatible with Quirks Mode");var o=e("<input/>",{size:1}).attr("size")&&e.attrFn,s=e.attr,l=e.attrHooks.value&&e.attrHooks.value.get||function(){return null},u=e.attrHooks.value&&e.attrHooks.value.set||function(){return i},c=/^(?:input|button)$/i,d=/^[238]$/,p=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,h=/^(?:checked|selected)$/i;a(e,"attrFn",o||{},"jQuery.attrFn is deprecated"),e.attr=function(t,n,a,l){var u=n.toLowerCase(),g=t&&t.nodeType;return l&&(s.length<4&&r("jQuery.fn.attr( props, pass ) is deprecated"),t&&!d.test(g)&&(o?n in o:e.isFunction(e.fn[n])))?e(t)[n](a):("type"===n&&a!==i&&c.test(t.nodeName)&&t.parentNode&&r("Can't change the 'type' of an input or button in IE 6/7/8"),!e.attrHooks[u]&&p.test(u)&&(e.attrHooks[u]={get:function(t,n){var r,a=e.prop(t,n);return!0===a||"boolean"!=typeof a&&(r=t.getAttributeNode(n))&&!1!==r.nodeValue?n.toLowerCase():i},set:function(t,i,n){var r;return!1===i?e.removeAttr(t,n):((r=e.propFix[n]||n)in t&&(t[r]=!0),t.setAttribute(n,n.toLowerCase())),n}},h.test(u)&&r("jQuery.fn.attr('"+u+"') might use property instead of attribute")),s.call(e,t,n,a))},e.attrHooks.value={get:function(e,t){var i=(e.nodeName||"").toLowerCase();return"button"===i?l.apply(this,arguments):("input"!==i&&"option"!==i&&r("jQuery.fn.attr('value') no longer gets properties"),t in e?e.value:null)},set:function(e,t){var i=(e.nodeName||"").toLowerCase();if("button"===i)return u.apply(this,arguments);"input"!==i&&"option"!==i&&r("jQuery.fn.attr('value', val) no longer sets properties"),e.value=t}};var g,f,m,v=e.fn.init,b=e.find,y=e.parseJSON,x=/^\s*</,C=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,_=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g,w=/^([^<]*)(<[\w\W]+>)([^>]*)$/;for(m in e.fn.init=function(t,n,a){var o,s;return t&&"string"==typeof t&&!e.isPlainObject(n)&&(o=w.exec(e.trim(t)))&&o[0]&&(x.test(t)||r("$(html) HTML strings must start with '<' character"),o[3]&&r("$(html) HTML text after last tag is ignored"),"#"===o[0].charAt(0)&&(r("HTML string cannot start with a '#' character"),e.error("JQMIGRATE: Invalid selector string (XSS)")),n&&n.context&&n.context.nodeType&&(n=n.context),e.parseHTML)?v.call(this,e.parseHTML(o[2],n&&n.ownerDocument||n||document,!0),n,a):(s=v.apply(this,arguments),t&&t.selector!==i?(s.selector=t.selector,s.context=t.context):(s.selector="string"==typeof t?t:"",t&&(s.context=t.nodeType?t:n||document)),s)},e.fn.init.prototype=e.fn,e.find=function(e){var t=Array.prototype.slice.call(arguments);if("string"==typeof e&&C.test(e))try{document.querySelector(e)}catch(i){e=e.replace(_,function(e,t,i,n){return"["+t+i+'"'+n+'"]'});try{document.querySelector(e),r("Attribute selector with '#' must be quoted: "+t[0]),t[0]=e}catch(e){r("Attribute selector with '#' was not fixed: "+t[0])}}return b.apply(this,t)},b)Object.prototype.hasOwnProperty.call(b,m)&&(e.find[m]=b[m]);e.parseJSON=function(e){return e?y.apply(this,arguments):(r("jQuery.parseJSON requires a valid JSON string"),null)},e.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e.browser||(f={},(g=e.uaMatch(navigator.userAgent)).browser&&(f[g.browser]=!0,f.version=g.version),f.chrome?f.webkit=!0:f.webkit&&(f.safari=!0),e.browser=f),a(e,"browser",e.browser,"jQuery.browser is deprecated"),e.boxModel=e.support.boxModel="CSS1Compat"===document.compatMode,a(e,"boxModel",e.boxModel,"jQuery.boxModel is deprecated"),a(e.support,"boxModel",e.support.boxModel,"jQuery.support.boxModel is deprecated"),e.sub=function(){function t(e,i){return new t.fn.init(e,i)}e.extend(!0,t,this),t.superclass=this,t.fn=t.prototype=this(),t.fn.constructor=t,t.sub=this.sub,t.fn.init=function(n,r){var a=e.fn.init.call(this,n,r,i);return a instanceof t?a:t(a)},t.fn.init.prototype=t.fn;var i=t(document);return r("jQuery.sub() is deprecated"),t},e.fn.size=function(){return r("jQuery.fn.size() is deprecated; use the .length property"),this.length};var E=!1;e.swap&&e.each(["height","width","reliableMarginRight"],function(t,i){var n=e.cssHooks[i]&&e.cssHooks[i].get;n&&(e.cssHooks[i].get=function(){var e;return E=!0,e=n.apply(this,arguments),E=!1,e})}),e.swap=function(e,t,i,n){var a,o,s={};for(o in E||r("jQuery.swap() is undocumented and deprecated"),t)s[o]=e.style[o],e.style[o]=t[o];for(o in a=i.apply(e,n||[]),t)e.style[o]=s[o];return a},e.ajaxSetup({converters:{"text json":e.parseJSON}});var T=e.fn.data;e.fn.data=function(t){var n,a,o=this[0];return!o||"events"!==t||1!==arguments.length||(n=e.data(o,t),a=e._data(o,t),n!==i&&n!==a||a===i)?T.apply(this,arguments):(r("Use of jQuery.fn.data('events') is deprecated"),a)};var z=/\/(java|ecma)script/i;e.clean||(e.clean=function(t,i,n,a){i=(i=!(i=i||document).nodeType&&i[0]||i).ownerDocument||i,r("jQuery.clean() is deprecated");var o,s,l,u,c=[];if(e.merge(c,e.buildFragment(t,i).childNodes),n)for(l=function(e){if(!e.type||z.test(e.type))return a?a.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)},o=0;null!=(s=c[o]);o++)e.nodeName(s,"script")&&l(s)||(n.appendChild(s),void 0!==s.getElementsByTagName&&(u=e.grep(e.merge([],s.getElementsByTagName("script")),l),c.splice.apply(c,[o+1,0].concat(u)),o+=u.length));return c});var R=e.event.add,A=e.event.remove,P=e.event.trigger,D=e.fn.toggle,S=e.fn.live,I=e.fn.die,F=e.fn.load,k="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",N=new RegExp("\\b(?:"+k+")\\b"),O=/(?:^|\s)hover(\.\S+|)\b/,M=function(t){return"string"!=typeof t||e.event.special.hover?t:(O.test(t)&&r("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),t&&t.replace(O,"mouseenter$1 mouseleave$1"))};e.event.props&&"attrChange"!==e.event.props[0]&&e.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),e.event.dispatch&&a(e.event,"handle",e.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),e.event.add=function(e,t,i,n,a){e!==document&&N.test(t)&&r("AJAX events should be attached to document: "+t),R.call(this,e,M(t||""),i,n,a)},e.event.remove=function(e,t,i,n,r){A.call(this,e,M(t)||"",i,n,r)},e.each(["load","unload","error"],function(t,i){e.fn[i]=function(){var e=Array.prototype.slice.call(arguments,0);return"load"===i&&"string"==typeof e[0]?F.apply(this,e):(r("jQuery.fn."+i+"() is deprecated"),e.splice(0,0,i),arguments.length?this.bind.apply(this,e):(this.triggerHandler.apply(this,e),this))}}),e.fn.toggle=function(t,i){if(!e.isFunction(t)||!e.isFunction(i))return D.apply(this,arguments);r("jQuery.fn.toggle(handler, handler...) is deprecated");var n=arguments,a=t.guid||e.guid++,o=0,s=function(i){var r=(e._data(this,"lastToggle"+t.guid)||0)%o;return e._data(this,"lastToggle"+t.guid,r+1),i.preventDefault(),n[r].apply(this,arguments)||!1};for(s.guid=a;o<n.length;)n[o++].guid=a;return this.click(s)},e.fn.live=function(t,i,n){return r("jQuery.fn.live() is deprecated"),S?S.apply(this,arguments):(e(this.context).on(t,this.selector,i,n),this)},e.fn.die=function(t,i){return r("jQuery.fn.die() is deprecated"),I?I.apply(this,arguments):(e(this.context).off(t,this.selector||"**",i),this)},e.event.trigger=function(e,t,i,n){return i||N.test(e)||r("Global events are undocumented and deprecated"),P.call(this,e,t,i||document,n)},e.each(k.split("|"),function(t,i){e.event.special[i]={setup:function(){var t=this;return t!==document&&(e.event.add(document,i+"."+e.guid,function(){e.event.trigger(i,Array.prototype.slice.call(arguments,1),t,!0)}),e._data(this,i,e.guid++)),!1},teardown:function(){return this!==document&&e.event.remove(document,i+"."+e._data(this,i)),!1}}}),e.event.special.ready={setup:function(){this===document&&r("'ready' event is deprecated")}};var B=e.fn.andSelf||e.fn.addBack,$=e.fn.find;if(e.fn.andSelf=function(){return r("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),B.apply(this,arguments)},e.fn.find=function(e){var t=$.apply(this,arguments);return t.context=this.context,t.selector=this.selector?this.selector+" "+e:e,t},e.Callbacks){var L=e.Deferred,j=[["resolve","done",e.Callbacks("once memory"),e.Callbacks("once memory"),"resolved"],["reject","fail",e.Callbacks("once memory"),e.Callbacks("once memory"),"rejected"],["notify","progress",e.Callbacks("memory"),e.Callbacks("memory")]];e.Deferred=function(t){var i=L(),n=i.promise();return i.pipe=n.pipe=function(){var t=arguments;return r("deferred.pipe() is deprecated"),e.Deferred(function(r){e.each(j,function(a,o){var s=e.isFunction(t[a])&&t[a];i[o[1]](function(){var t=s&&s.apply(this,arguments);t&&e.isFunction(t.promise)?t.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[o[0]+"With"](this===n?r.promise():this,s?[t]:arguments)})}),t=null}).promise()},i.isResolved=function(){return r("deferred.isResolved is deprecated"),"resolved"===i.state()},i.isRejected=function(){return r("deferred.isRejected is deprecated"),"rejected"===i.state()},t&&t.call(i,i),i}}}(jQuery,window),window.Prototype&&(delete Object.prototype.toJSON,delete Array.prototype.toJSON,delete Hash.prototype.toJSON,delete String.prototype.toJSON),this.JSON||(this.JSON={}),function(){function f(e){return e<10?"0"+e:e}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var i,n,r,a,o,s=gap,l=t[e];switch("function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(l)){for(a=l.length,i=0;i<a;i+=1)o[i]=str(i,l)||"null";return r=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+s+"]":"["+o.join(",")+"]",gap=s,r}if(rep&&"object"==typeof rep)for(a=rep.length,i=0;i<a;i+=1)"string"==typeof(n=rep[i])&&(r=str(n,l))&&o.push(quote(n)+(gap?": ":":")+r);else for(n in l)Object.hasOwnProperty.call(l,n)&&(r=str(n,l))&&o.push(quote(n)+(gap?": ":":")+r);return r=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+s+"}":"{"+o.join(",")+"}",gap=s,r}}"function"!=typeof JSON.encode&&(JSON.encode=function(e,t,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;n<i;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.encode");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var i,n,r=e[t];if(r&&"object"==typeof r)for(i in r)Object.hasOwnProperty.call(r,i)&&(void 0!==(n=walk(r,i))?r[i]=n:delete r[i]);return reviver.call(e,t,r)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e){var t=/_|-/,n=/::/,r=/([A-Z]+)([A-Z][a-z])/g,a=/([a-z\d])([A-Z])/g,o=/([a-z\d])([A-Z])/g,s=/\{([^\}]+)\}/g,l=/\./,u=function(e,t,i){return e[t]||i&&(e[t]={})},c=function(e){var t=typeof e;return t&&("function"==t||"object"==t)},d=function(t,i,n){var r,a,o,s=t?t.split(l):[],d=s.length,p=e.isArray(i)?i:[i||window],h=0;if(0==d)return p[0];for(;r=p[h++];){for(o=0;o<d-1&&c(r);o++)r=u(r,s[o],n);if(c(r)&&void 0!==(a=u(r,s[o],n)))return!1===n&&delete r[s[o]],a}},p=e.String=e.extend(e.String||{},{getObject:d,capitalize:function(e,t){return e.charAt(0).toUpperCase()+e.substr(1)},camelize:function(e){return(e=p.classize(e)).charAt(0).toLowerCase()+e.substr(1)},classize:function(e,i){for(var n=e.split(t),r=0;r<n.length;r++)n[r]=p.capitalize(n[r]);return n.join(i||"")},niceName:function(e){p.classize(parts[i]," ")},underscore:function(e){return e.replace(n,"/").replace(r,"$1_$2").replace(a,"$1_$2").replace(o,"_").toLowerCase()},sub:function(e,t,i){var n=[];return n.push(e.replace(s,function(e,r){var a=d(r,t,"boolean"==typeof i?!i:i),o=typeof a;return"object"!==o&&"function"!==o||null===o?""+a:(n.push(a),"")})),n.length<=1?n[0]:n}})}(jQuery),function(e){var t=!1,i=e.makeArray,n=e.isFunction,r=e.isArray,a=e.extend,o=function(e,t){return e.concat(i(t))},s=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,l=function(e,t,i){for(var r in i=i||e,e)i[r]=n(e[r])&&n(t[r])&&s.test(e[r])?function(e,i){return function(){var n,r=this._super;return this._super=t[e],n=i.apply(this,arguments),this._super=r,n}}(r,e[r]):e[r]},u=e.Class=function(){arguments.length&&u.extend.apply(u,arguments)};a(u,{callback:function(e){var t,n=i(arguments);return e=n.shift(),r(e)||(e=[e]),t=this,function(){for(var i,a,s=o(n,arguments),l=e.length,u=0;u<l;u++)(a=e[u])&&((i="string"==typeof a)&&t._set_called&&(t.called=a),s=(i?t[a]:a).apply(t,s||[]),u<l-1&&(s=!r(s)||s._use_call?[s]:s));return s}},getObject:e.String.getObject,newInstance:function(){var e,t=this.rawInstance();return t.setup&&(e=t.setup.apply(t,arguments)),t.init&&t.init.apply(t,r(e)?e:arguments),t},setup:function(e,t){return this.defaults=a(!0,{},e.defaults,this.defaults),arguments},rawInstance:function(){t=!0;var e=new this;return t=!1,e},extend:function(e,i,n){"string"!=typeof e&&(n=i,i=e,e=null),n||(n=i,i=null),n=n||{};var r,s,c=this.prototype;function d(){if(!t)return this.constructor!==d&&arguments.length?arguments.callee.extend.apply(arguments.callee,arguments):this.Class.newInstance.apply(this.Class,arguments)}for(r in t=!0,s=new this,t=!1,l(n,c,s),this)this.hasOwnProperty(r)&&(d[r]=this[r]);if(l(i,this,d),e){var p=e.split(/\./),h=p.pop(),g=u.getObject(p.join("."),window,!0),f=g;g[h]=d}a(d,{prototype:s,namespace:f,shortName:h,constructor:d,fullName:e}),d.prototype.Class=d.prototype.constructor=d;var m=d.setup.apply(d,o([this],arguments));return d.init&&d.init.apply(d,m||[]),d}}),u.prototype.callback=u.callback}(jQuery),function(e,t){var i,n=e.fn.domManip,r="_tmplitem",a=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,o={},s={},l={key:0,data:{}},u=0,c=0,d=[];function p(t,i,n,r){var a={data:r||(i?i.data:{}),_wrap:i?i._wrap:null,tmpl:null,parent:i||null,nodes:[],calls:C,nest:_,wrap:w,html:E,update:T};return t&&e.extend(a,t,{nodes:[],parent:i}),n&&(a.tmpl=n,a._ctnt=a._ctnt||a.tmpl(e,a),a.key=++u,(d.length?s:o)[u]=a),a}e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,n){e.fn[t]=function(r){var a,s,l,u,d=[],p=e(r),h=1===this.length&&this[0].parentNode;if(i=o||{},h&&11===h.nodeType&&1===h.childNodes.length&&1===p.length)p[n](this[0]),d=this;else{for(s=0,l=p.length;s<l;s++)c=s,a=(s>0?this.clone(!0):this).get(),e.fn[n].apply(e(p[s]),a),d=d.concat(a);c=0,d=this.pushStack(d,t,p.selector)}return u=i,i=null,e.tmpl.complete(u),d}}),e.fn.extend({tmpl:function(t,i,n){return e.tmpl(this[0],t,i,n)},tmplItem:function(){return e.tmplItem(this[0])},template:function(t){return e.template(t,this[0])},domManip:function(t,r,a,s){if(t[0]&&t[0].nodeType){for(var l,u=e.makeArray(arguments),d=t.length,p=0;p<d&&!(l=e.data(t[p++],"tmplItem")););d>1&&(u[0]=[e.makeArray(t)]),l&&c&&(u[2]=function(t){e.tmpl.afterManip(this,t,a)}),n.apply(this,u)}else n.apply(this,arguments);return c=0,i||e.tmpl.complete(o),this}}),e.extend({fasttmpl:function(t,i,n,r){n=n||{},$.extend(n,{fast:!0}),bizagi.chrono.start("fasttmpl");var a=e.tmpl(t,i,n,r);return bizagi.chrono.stop("fasttmpl"),a},tmpl:function(t,i,n,r){n&&n.nestedExecution||(h=[]);var a,u,c=!r,d=n&&n.fast;if(c)r=l,t=e.template[t]||e.template(null,t),s={};else if(!t)return t=r.tmpl,o[r.key]=r,r.nodes=[],r.wrapped&&b(r,r.wrapped),u=f(r,null,r.tmpl(e,r),d),n&&n.nestedExecution||g(),d?u:e(u);return t?("function"==typeof i&&(i=i.call(r||{})),n&&n.wrapped&&b(n,n.wrapped),a=e.isArray(i)?e.map(i,function(e){return e?p(n,r,t,e):null}):[p(n,r,t,i)],c?(u=f(r,null,a,d),n&&n.nestedExecution||g(),d?u:e(u)):(n&&n.nestedExecution||g(),a)):[]},tmplItem:function(t){var i;for(t instanceof e&&(t=t[0]);t&&1===t.nodeType&&!(i=e.data(t,"tmplItem"))&&(t=t.parentNode););return i||l},template:function(t,i){return i?("string"==typeof i?i=v(i):i instanceof e&&(i=i[0]||{}),i.nodeType&&(i=e.data(i,"tmpl")||e.data(i,"tmpl",v(i.innerHTML))),"string"==typeof t?e.template[t]=i:i):t?"string"!=typeof t?e.template(null,t):e.template[t]||e.template(null,a.test(t)?t:e(t)):null},encode:function(e){return(""+e).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),e.extend(e.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){_=_.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_=[];",close:"call=$item.calls();_=call._.concat($item.wrap(call,_));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},if:{open:"if(($notnull_1) && $1a){",close:"}"},else:{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){_.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode($1a));}"},"!":{open:""}},complete:function(e){o={}},afterManip:function(t,i,n){var r=11===i.nodeType?e.makeArray(i.childNodes):1===i.nodeType?[i]:[];n.call(t,i),x(r),c++}});var h=[];function g(){if(h)for(var e=0;e<h.length;e++){$(h[e]).removeData("tmplItem")}h=null}function f(t,i,n,a){var o,s;return s=a?n?e.map(n,function(e){return"string"==typeof e?e:f(e,t,e._ctnt,!0)}):t:n?e.map(n,function(e){return"string"==typeof e?t.key?e.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+r+'="'+t.key+'" $2'):e:f(e,t,e._ctnt)}):t,i?s:(s=s.join(""),a?s:(s.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(t,i,n,r){x(o=e(n).get()),i&&(o=m(i).concat(o)),r&&(o=o.concat(m(r)))}),o||m(s)))}function m(t){var i=document.createElement("div");return i.innerHTML=t,e.makeArray(i.childNodes)}function v(t){var i="var $=jQuery,call,_=[],$data=$item.data;with($data){_.push('"+e.trim(t).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(t,i,n,r,a,o,s){var l,u,c,d=e.tmpl.tag[n];if(!d)throw"Template command not found: "+n;return l=d._default||[],o&&!/\w$/.test(a)&&(a+=o,o=""),a?(a=y(a),s=s?","+y(s)+")":o?")":"",u=o?a.indexOf(".")>-1?a+o:"("+a+").call($item"+s:a,c=o?u:"(typeof("+a+")==='function'?("+a+").call($item):("+a+"))"):c=u=l.$1||"null",r=y(r),"');"+d[i?"close":"open"].split("$notnull_1").join(a?"typeof("+a+")!=='undefined' && ("+a+")!=null":"true").split("$1a").join(c).split("$1").join(u).split("$2").join(r?r.replace(/\s*([^\(]+)\s*(\((.*?)\))?/g,function(e,t,i,n){return(n=n?","+n+")":i?")":"")?"("+t+").call($item"+n:e}):l.$2||"")+"_.push('"})+"');}return _;";return new Function("jQuery","$item",i)}function b(t,i){t._wrap=f(t,!0,e.isArray(i)?i:[a.test(i)?i:e(i).html()]).join("")}function y(e){return e?e.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function x(t){var i,n,a,l,d,h="_"+c,g={};for(a=0,l=t.length;a<l;a++)if(1===(i=t[a]).nodeType){for(d=(n=i.getElementsByTagName("*")).length-1;d>=0;d--)f(n[d]);f(i)}function f(t){var i,n,a,l,d=t;if(l=t.getAttribute(r)){for(;d.parentNode&&1===(d=d.parentNode).nodeType&&!(i=d.getAttribute(r)););i!==l&&(d=d.parentNode?11===d.nodeType?0:d.getAttribute(r)||0:0,(a=o[l])||((a=p(a=s[l],o[d]||s[d],null,!0)).key=++u,o[u]=a),c&&f(l)),t.removeAttribute(r)}else c&&(a=e.data(t,"tmplItem"))&&(f(a.key),o[a.key]=a,d=(d=e.data(t.parentNode,"tmplItem"))?d.key:0);if(a){for(n=a;n&&n.key!=d;)n.nodes.push(t),n=n.parent;delete a._ctnt,delete a._wrap,e.data(t,"tmplItem",a)}function f(e){a=g[e+=h]=g[e]||p(a,o[a.parent.key+h]||a.parent,null,!0)}}}function C(e,t,i,n){if(!e)return d.pop();d.push({_:e,tmpl:t,item:this,data:i,options:n})}function _(t,i,n){return n||(n={}),n.nestedExecution=!0,e.tmpl(e.template(t),i,n,this)}function w(t,i){var n=t.options||{};return n.wrapped=i,e.tmpl(e.template(t.tmpl),t.data,n,t.item)}function E(t,i){var n=this._wrap;return e.map(e(e.isArray(n)?n.join(""):n).filter(t||"*"),function(e){return i?e.innerText||e.textContent:e.outerHTML||(t=e,(n=document.createElement("div")).appendChild(t.cloneNode(!0)),n.innerHTML);var t,n})}function T(){var t=this.nodes;e.tmpl(null,null,null,this).insertBefore(t[0]),e(t).remove()}}(jQuery),function(e,t){var i,n,r=0,a=/^ui-id-\d+$/;function o(t,i){var n,r,a,o=t.nodeName.toLowerCase();return"area"===o?(r=(n=t.parentNode).name,!(!t.href||!r||"map"!==n.nodeName.toLowerCase())&&(!!(a=e("img[usemap=#"+r+"]")[0])&&s(a))):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o&&t.href||i)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:(i=e.fn.focus,function(t,n){return"number"==typeof t?this.each(function(){var i=this;setTimeout(function(){e(i).focus(),n&&n.call(i)},t)}):i.apply(this,arguments)}),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,n,r=e(this[0]);r.length&&r[0]!==document;){if(("absolute"===(i=r.css("position"))||"relative"===i||"fixed"===i)&&(n=parseInt(r.css("zIndex"),10),!isNaN(n)&&0!==n))return n;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++r)})},removeUniqueId:function(){return this.each(function(){a.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return o(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),n=isNaN(i);return(n||i>=0)&&o(t,!n)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){var n="Width"===i?["Left","Right"]:["Top","Bottom"],r=i.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};function o(t,i,r,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,r&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}e.fn["inner"+i]=function(t){return void 0===t?a["inner"+i].call(this):this.each(function(){e(this).css(r,o(this,t)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?a["outer"+i].call(this,t):this.each(function(){e(this).css(r,o(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=(n=e.fn.removeData,function(t){return arguments.length?n.call(this,e.camelCase(t)):n.call(this)})),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var r,a=e.ui[t].prototype;for(r in n)a.plugins[r]=a.plugins[r]||[],a.plugins[r].push([i,n[r]])},call:function(e,t,i){var n,r=e.plugins[t];if(r&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;n<r.length;n++)e.options[r[n][0]]&&r[n][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n,r=i&&"left"===i?"scrollLeft":"scrollTop";return t[r]>0||(t[r]=1,n=t[r]>0,t[r]=0,n)}})}(jQuery),function(e,t){var i=0,n=Array.prototype.slice,r=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(e){}r(t)},e.widget=function(t,i,n){var r,a,o,s,l={},u=t.split(".")[0];t=t.split(".")[1],r=u+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[u]=e[u]||{},a=e[u][t],o=e[u][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,a,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),(s=new i).options=e.widget.extend({},s.options),e.each(n,function(t,n){var r,a;e.isFunction(n)?l[t]=(r=function(){return i.prototype[t].apply(this,arguments)},a=function(e){return i.prototype[t].apply(this,e)},function(){var e,t=this._super,i=this._superApply;return this._super=r,this._superApply=a,e=n.apply(this,arguments),this._super=t,this._superApply=i,e}):l[t]=n}),o.prototype=e.widget.extend(s,{widgetEventPrefix:a?s.widgetEventPrefix:t},l,{constructor:o,namespace:u,widgetName:t,widgetFullName:r}),a?(e.each(a._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,o,i._proto)}),delete a._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(i){for(var r,a,o=n.call(arguments,1),s=0,l=o.length;s<l;s++)for(r in o[s])a=o[s][r],o[s].hasOwnProperty(r)&&a!==t&&(e.isPlainObject(a)?i[r]=e.isPlainObject(i[r])?e.widget.extend({},i[r],a):e.widget.extend({},a):i[r]=a);return i},e.widget.bridge=function(i,r){var a=r.prototype.widgetFullName||i;e.fn[i]=function(o){var s="string"==typeof o,l=n.call(arguments,1),u=this;return o=!s&&l.length?e.widget.extend.apply(null,[o].concat(l)):o,s?this.each(function(){var n,r=e.data(this,a);return r?e.isFunction(r[o])&&"_"!==o.charAt(0)?(n=r[o].apply(r,l))!==r&&n!==t?(u=n&&n.jquery?u.pushStack(n.get()):n,!1):void 0:e.error("no such method '"+o+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+o+"'")}):this.each(function(){var t=e.data(this,a);t?t.option(o||{})._init():e.data(this,a,new r(o,this))}),u}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,n){var r,a,o,s=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(s={},i=(r=i.split(".")).shift(),r.length){for(a=s[i]=e.widget.extend({},this.options[i]),o=0;o<r.length-1;o++)a[r[o]]=a[r[o]]||{},a=a[r[o]];if(i=r.pop(),n===t)return a[i]===t?null:a[i];a[i]=n}else{if(n===t)return this.options[i]===t?null:this.options[i];s[i]=n}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,n){var r,a=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=r=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,r=this.widget()),e.each(n,function(n,o){function s(){if(t||!0!==a.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof o?a[o]:o).apply(a,arguments)}"string"!=typeof o&&(s.guid=o.guid=o.guid||s.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),u=l[1]+a.eventNamespace,c=l[2];c?r.delegate(c,u,s):i.bind(u,s)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){var i=this;return setTimeout(function(){return("string"==typeof e?i[e]:e).apply(i,arguments)},t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var r,a,o=this.options[t];if(n=n||{},(i=e.Event(i)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(r in a)r in i||(i[r]=a[r]);return this.element.trigger(i,n),!(e.isFunction(o)&&!1===o.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,r,a){"string"==typeof r&&(r={effect:r});var o,s=r?!0===r||"number"==typeof r?i:r.effect||i:t;"number"==typeof(r=r||{})&&(r={duration:r}),o=!e.isEmptyObject(r),r.complete=a,r.delay&&n.delay(r.delay),o&&e.effects&&e.effects.effect[s]?n[t](r):s!==t&&n[s]?n[s](r.duration,r.easing,a):n.queue(function(i){e(this)[t](),a&&a.call(n[0]),i()})}})}(jQuery),function(e,t){var i=!1;e(document).mouseup(function(){i=!1}),e.widget("ui.mouse",{version:"1.10.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){if(!0===e.data(i.target,t.widgetName+".preventClickEvent"))return e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!i){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,r=1===t.which,a=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(r&&!a&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),i=!0,!0))}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return!(this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(e(!0===i.iframeFix?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0))},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(!1===this._trigger("drag",t,n))return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i,n=this,r=!1,a=!1;for(e.ui.ddmanager&&!this.options.dropBehaviour&&(a=e.ui.ddmanager.drop(this,t)),this.dropped&&(a=this.dropped,this.dropped=!1),i=this.element[0];i&&(i=i.parentNode);)i===document&&(r=!0);return!(!r&&"original"===this.options.helper)&&("invalid"===this.options.revert&&!a||"valid"===this.options.revert&&a||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,a)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==n._trigger("stop",t)&&n._clear()}):!1!==this._trigger("stop",t)&&this._clear(),!1)},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,r=this.options;if("parent"===r.containment&&(r.containment=this.helper[0].parentNode),"document"!==r.containment&&"window"!==r.containment||(this.containment=["document"===r.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"===r.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"===r.containment?0:e(window).scrollLeft())+e("document"===r.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"===r.containment?0:e(window).scrollTop())+(e("document"===r.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||r.containment.constructor===Array)r.containment.constructor===Array&&(this.containment=r.containment);else{if(!(n=(i=e(r.containment))[0]))return;t="hidden"!==e(n).css("overflow"),this.containment=[(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0),(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderRightWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderBottomWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i}},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(r[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:r.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:r.scrollLeft())*n}},_generatePosition:function(t){var i,n,r,a,o=this.options,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(s[0].tagName),u=t.pageX,c=t.pageY;return this.originalPosition&&(this.containment&&(this.relative_container?(n=this.relative_container.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(u=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(u=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),o.grid&&(r=o.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,c=i?r-this.offset.click.top>=i[1]||r-this.offset.click.top>i[3]?r:r-this.offset.click.top>=i[1]?r-o.grid[1]:r+o.grid[1]:r,a=o.grid[0]?this.originalPageX+Math.round((u-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,u=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:s.scrollTop()),left:u-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:s.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("ui-draggable"),r=n.options,a=e.extend({},i,{item:n.element});n.sortables=[],e(r.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,a))})},stop:function(t,i){var n=e(this).data("ui-draggable"),r=e.extend({},i,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,r))})},drag:function(t,i){var n=e(this).data("ui-draggable"),r=this;e.each(n.sortables,function(){var a=!1,o=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(a=!0,e.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(o.instance.element[0],this.instance.element[0])&&(a=!1),a})),a?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(r).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),r=e(this).data("ui-draggable").options;n.css("opacity")&&(r._opacity=n.css("opacity")),n.css("opacity",r.opacity)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),n=i.options,r=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=r=i.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=r=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=r=i.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=r=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(document).scrollTop()<n.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(document).scrollLeft()<n.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed)))),!1!==r&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),n=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(t,i){var n,r,a,o,s,l,u,c,d,p,h=e(this).data("ui-draggable"),g=h.options,f=g.snapTolerance,m=i.offset.left,v=m+h.helperProportions.width,b=i.offset.top,y=b+h.helperProportions.height;for(d=h.snapElements.length-1;d>=0;d--)l=(s=h.snapElements[d].left)+h.snapElements[d].width,c=(u=h.snapElements[d].top)+h.snapElements[d].height,s-f<m&&m<l+f&&u-f<b&&b<c+f||s-f<m&&m<l+f&&u-f<y&&y<c+f||s-f<v&&v<l+f&&u-f<b&&b<c+f||s-f<v&&v<l+f&&u-f<y&&y<c+f?("inner"!==g.snapMode&&(n=Math.abs(u-y)<=f,r=Math.abs(c-b)<=f,a=Math.abs(s-v)<=f,o=Math.abs(l-m)<=f,n&&(i.position.top=h._convertPositionTo("relative",{top:u-h.helperProportions.height,left:0}).top-h.margins.top),r&&(i.position.top=h._convertPositionTo("relative",{top:c,left:0}).top-h.margins.top),a&&(i.position.left=h._convertPositionTo("relative",{top:0,left:s-h.helperProportions.width}).left-h.margins.left),o&&(i.position.left=h._convertPositionTo("relative",{top:0,left:l}).left-h.margins.left)),p=n||r||a||o,"outer"!==g.snapMode&&(n=Math.abs(u-b)<=f,r=Math.abs(c-y)<=f,a=Math.abs(s-m)<=f,o=Math.abs(l-v)<=f,n&&(i.position.top=h._convertPositionTo("relative",{top:u,left:0}).top-h.margins.top),r&&(i.position.top=h._convertPositionTo("relative",{top:c-h.helperProportions.height,left:0}).top-h.margins.top),a&&(i.position.left=h._convertPositionTo("relative",{top:0,left:s}).left-h.margins.left),o&&(i.position.left=h._convertPositionTo("relative",{top:0,left:l-h.helperProportions.width}).left-h.margins.left)),!h.snapElements[d].snapping&&(n||r||a||o||p)&&h.options.snap.snap&&h.options.snap.snap.call(h.element,t,e.extend(h._uiHash(),{snapItem:h.snapElements[d].item})),h.snapElements[d].snapping=n||r||a||o||p):(h.snapElements[d].snapping&&h.options.snap.release&&h.options.snap.release.call(h.element,t,e.extend(h._uiHash(),{snapItem:h.snapElements[d].item})),h.snapElements[d].snapping=!1)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,n=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});n.length&&(t=parseInt(e(n[0]).css("zIndex"),10)||0,e(n).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+n.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),r=e(this).data("ui-draggable").options;n.css("zIndex")&&(r._zIndex=n.css("zIndex")),n.css("zIndex",r.zIndex)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}})}(jQuery),function(e,t){function i(e,t,i){return e>t&&e<t+i}e.widget("ui.droppable",{version:"1.10.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,i=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,i=e.ui.ddmanager.droppables[this.options.scope];t<i.length;t++)i[t]===this&&i.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){"accept"===t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var n=i||e.ui.ddmanager.current,r=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope===n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&e.ui.intersect(n,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return r=!0,!1}),!r&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(n)),this.element)))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,t,n){if(!t.offset)return!1;var r,a=(e.positionAbs||e.position.absolute).left,o=a+e.helperProportions.width,s=(e.positionAbs||e.position.absolute).top,l=s+e.helperProportions.height,u=t.offset.left,c=u+t.proportions.width,d=t.offset.top,p=d+t.proportions.height;switch(n){case"fit":return u<=a&&o<=c&&d<=s&&l<=p;case"intersect":return u<a+e.helperProportions.width/2&&o-e.helperProportions.width/2<c&&d<s+e.helperProportions.height/2&&l-e.helperProportions.height/2<p;case"pointer":return r=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,i((e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,d,t.proportions.height)&&i(r,u,t.proportions.width);case"touch":return(s>=d&&s<=p||l>=d&&l<=p||s<d&&l>p)&&(a>=u&&a<=c||o>=u&&o<=c||a<u&&o>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,i){var n,r,a=e.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,s=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(n=0;n<a.length;n++)if(!(a[n].options.disabled||t&&!a[n].accept.call(a[n].element[0],t.currentItem||t.element))){for(r=0;r<s.length;r++)if(s[r]===a[n].element[0]){a[n].proportions.height=0;continue e}a[n].visible="none"!==a[n].element.css("display"),a[n].visible&&("mousedown"===o&&a[n]._activate.call(a[n],i),a[n].offset=a[n].element.offset(),a[n].proportions={width:a[n].element[0].offsetWidth,height:a[n].element[0].offsetHeight})}},drop:function(t,i){var n=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),n},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,r,a,o=e.ui.intersect(t,this,this.options.tolerance),s=!o&&this.isover?"isout":o&&!this.isover?"isover":null;s&&(this.options.greedy&&(r=this.options.scope,(a=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===r})).length&&((n=e.data(a[0],"ui-droppable")).greedyChild="isover"===s)),n&&"isover"===s&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[s]=!0,this["isout"===s?"isover":"isout"]=!1,this["isover"===s?"_over":"_out"].call(this,i),n&&"isout"===s&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery),function(e,t){function i(e){return parseInt(e,10)||0}function n(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,i,n,r,a=this,o=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!o.aspectRatio,aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=o.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;i<t.length;i++)n=e.trim(t[i]),(r=e("<div class='ui-resizable-handle "+("ui-resizable-"+n)+"'></div>")).css({zIndex:o.zIndex}),"se"===n&&r.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(r);this._renderAxis=function(t){var i,n,r,a;for(i in t=t||this.element,this.handles)this.handles[i].constructor===String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(n=e(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),r=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(r,a),this._proportionallyResize()),e(this.handles[i]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){a.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=r&&r[1]?r[1]:"se")}),o.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){o.disabled||(e(this).removeClass("ui-resizable-autohide"),a._handles.show())}).mouseleave(function(){o.disabled||a.resizing||(e(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,n,r=!1;for(i in this.handles)((n=e(this.handles[i])[0])===t.target||e.contains(n,t.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(t){var n,r,a,o=this.options,s=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:s.top,left:s.left}),this._renderProxy(),n=i(this.helper.css("left")),r=i(this.helper.css("top")),o.containment&&(n+=e(o.containment).scrollLeft()||0,r+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:r},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:n,top:r},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,a=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===a?this.axis+"-resize":a),l.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,n=this.helper,r={},a=this.originalMousePosition,o=this.axis,s=this.position.top,l=this.position.left,u=this.size.width,c=this.size.height,d=t.pageX-a.left||0,p=t.pageY-a.top||0,h=this._change[o];return!!h&&(i=h.apply(this,[t,d,p]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),this.position.top!==s&&(r.top=this.position.top+"px"),this.position.left!==l&&(r.left=this.position.left+"px"),this.size.width!==u&&(r.width=this.size.width+"px"),this.size.height!==c&&(r.height=this.size.height+"px"),n.css(r),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(r)||this._trigger("resize",t,this.ui()),!1)},_mouseStop:function(t){this.resizing=!1;var i,n,r,a,o,s,l,u=this.options,c=this;return this._helper&&(r=(n=(i=this._proportionallyResizeElements).length&&/textarea/i.test(i[0].nodeName))&&e.ui.hasScroll(i[0],"left")?0:c.sizeDiff.height,a=n?0:c.sizeDiff.width,o={width:c.helper.width()-a,height:c.helper.height()-r},s=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,l=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null,u.animate||this.element.css(e.extend(o,{top:l,left:s})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!u.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,i,r,a,o,s=this.options;o={minWidth:n(s.minWidth)?s.minWidth:0,maxWidth:n(s.maxWidth)?s.maxWidth:1/0,minHeight:n(s.minHeight)?s.minHeight:0,maxHeight:n(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,r=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,a=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),r>o.minHeight&&(o.minHeight=r),i<o.maxWidth&&(o.maxWidth=i),a<o.maxHeight&&(o.maxHeight=a)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),n(e.left)&&(this.position.left=e.left),n(e.top)&&(this.position.top=e.top),n(e.height)&&(this.size.height=e.height),n(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,r=this.axis;return n(e.height)?e.width=e.height*this.aspectRatio:n(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===r&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===r&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,r=n(e.width)&&t.maxWidth&&t.maxWidth<e.width,a=n(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=n(e.width)&&t.minWidth&&t.minWidth>e.width,s=n(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,u=this.position.top+this.size.height,c=/sw|nw|w/.test(i),d=/nw|ne|n/.test(i);return o&&(e.width=t.minWidth),s&&(e.height=t.minHeight),r&&(e.width=t.maxWidth),a&&(e.height=t.maxHeight),o&&c&&(e.left=l-t.minWidth),r&&c&&(e.left=l-t.maxWidth),s&&d&&(e.top=u-t.minHeight),a&&d&&(e.top=u-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,n,r,a=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){if(r=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[r.css("borderTopWidth"),r.css("borderRightWidth"),r.css("borderBottomWidth"),r.css("borderLeftWidth")],n=[r.css("paddingTop"),r.css("paddingRight"),r.css("paddingBottom"),r.css("paddingLeft")],t=0;t<i.length;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(n[t],10)||0);r.css({height:a.height()-this.borderDif[0]-this.borderDif[2]||0,width:a.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize;return{left:this.originalPosition.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("ui-resizable"),n=i.options,r=i._proportionallyResizeElements,a=r.length&&/textarea/i.test(r[0].nodeName),o=a&&e.ui.hasScroll(r[0],"left")?0:i.sizeDiff.height,s=a?0:i.sizeDiff.width,l={width:i.size.width-s,height:i.size.height-o},u=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,c&&u?{top:c,left:u}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};r&&r.length&&e(r[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,r,a,o,s,l,u=e(this).data("ui-resizable"),c=u.options,d=u.element,p=c.containment,h=p instanceof e?p.get(0):/parent/.test(p)?d.parent().get(0):p;h&&(u.containerElement=e(h),/document/.test(p)||p===document?(u.containerOffset={left:0,top:0},u.containerPosition={left:0,top:0},u.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(h),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,r){n[e]=i(t.css("padding"+r))}),u.containerOffset=t.offset(),u.containerPosition=t.position(),u.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},r=u.containerOffset,a=u.containerSize.height,o=u.containerSize.width,s=e.ui.hasScroll(h,"left")?h.scrollWidth:o,l=e.ui.hasScroll(h)?h.scrollHeight:a,u.parentData={element:h,left:r.left,top:r.top,width:s,height:l}))},resize:function(t){var i,n,r,a,o=e(this).data("ui-resizable"),s=o.options,l=o.containerOffset,u=o.position,c=o._aspectRatio||t.shiftKey,d={top:0,left:0},p=o.containerElement;p[0]!==document&&/static/.test(p.css("position"))&&(d=l),u.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-d.left),c&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=s.helper?l.left:0),u.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),c&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?l.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,i=Math.abs((o._helper,o.offset.left-d.left+o.sizeDiff.width)),n=Math.abs((o._helper?o.offset.top-d.top:o.offset.top-l.top)+o.sizeDiff.height),r=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),r&&a&&(i-=o.parentData.left),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,c&&(o.size.height=o.size.width/o.aspectRatio)),n+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-n,c&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.containerOffset,r=t.containerPosition,a=t.containerElement,o=e(t.helper),s=o.offset(),l=o.outerWidth()-t.sizeDiff.width,u=o.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:s.left-r.left-n.left,width:l,height:u}),t._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:s.left-r.left-n.left,width:l,height:u})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable").options,i=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof t.alsoResize||t.alsoResize.parentNode?i(t.alsoResize):t.alsoResize.length?(t.alsoResize=t.alsoResize[0],i(t.alsoResize)):e.each(t.alsoResize,function(e){i(e)})},resize:function(t,i){var n=e(this).data("ui-resizable"),r=n.options,a=n.originalSize,o=n.originalPosition,s={height:n.size.height-a.height||0,width:n.size.width-a.width||0,top:n.position.top-o.top||0,left:n.position.left-o.left||0},l=function(t,n){e(t).each(function(){var t=e(this),r=e(this).data("ui-resizable-alsoresize"),a={},o=n&&n.length?n:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var i=(r[t]||0)+(s[t]||0);i&&i>=0&&(a[t]=i||null)}),t.css(a)})};"object"!=typeof r.alsoResize||r.alsoResize.nodeType?l(r.alsoResize):e.each(r.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size,r=t.originalSize,a=t.originalPosition,o=t.axis,s="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=s[0]||1,u=s[1]||1,c=Math.round((n.width-r.width)/l)*l,d=Math.round((n.height-r.height)/u)*u,p=r.width+c,h=r.height+d,g=i.maxWidth&&i.maxWidth<p,f=i.maxHeight&&i.maxHeight<h,m=i.minWidth&&i.minWidth>p,v=i.minHeight&&i.minHeight>h;i.grid=s,m&&(p+=l),v&&(h+=u),g&&(p-=l),f&&(h-=u),/^(se|s|e)$/.test(o)?(t.size.width=p,t.size.height=h):/^(ne)$/.test(o)?(t.size.width=p,t.size.height=h,t.position.top=a.top-d):/^(sw)$/.test(o)?(t.size.width=p,t.size.height=h,t.position.left=a.left-c):(t.size.width=p,t.size.height=h,t.position.top=a.top-d,t.position.left=a.left-c)}})}(jQuery),function(e,t){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){(t=e(i.options.filter,i.element[0])).addClass("ui-selectee"),t.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this,n=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(n.filter,this.element[0]),this._trigger("start",t),e(n.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=e.data(this,"selectable-item");n.startselected=!0,t.metaKey||t.ctrlKey||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element}))}),e(t.target).parents().addBack().each(function(){var n,r=e.data(this,"selectable-item");if(r)return n=!t.metaKey&&!t.ctrlKey||!r.$element.hasClass("ui-selected"),r.$element.removeClass(n?"ui-unselecting":"ui-selected").addClass(n?"ui-selecting":"ui-unselecting"),r.unselecting=!n,r.selecting=n,r.selected=n,n?i._trigger("selecting",t,{selecting:r.element}):i._trigger("unselecting",t,{unselecting:r.element}),!1}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,n=this,r=this.options,a=this.opos[0],o=this.opos[1],s=t.pageX,l=t.pageY;return a>s&&(i=s,s=a,a=i),o>l&&(i=l,l=o,o=i),this.helper.css({left:a,top:o,width:s-a,height:l-o}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),u=!1;i&&i.element!==n.element[0]&&("touch"===r.tolerance?u=!(i.left>s||i.right<a||i.top>l||i.bottom<o):"fit"===r.tolerance&&(u=i.left>a&&i.right<s&&i.top>o&&i.bottom<l),u?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,n._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",t,{unselected:n.element})}),e(".ui-selecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",t,{selected:n.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e,t){function i(e,t,i){return e>t&&e<t+i}function n(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===e.axis||n(this.items[0].item)),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var n=null,r=!1,a=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,a.widgetName+"-item")===a)return n=e(this),!1}),e.data(t.target,a.widgetName+"-item")===a&&(n=e(t.target)),!!n&&(!(this.options.handle&&!i&&(e(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(r=!0)}),!r))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,i,n){var r,a,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,n,r,a,o=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),!1!==s&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(r=(n=this.items[i]).item[0],(a=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&!(r===this.currentItem[0]||this.placeholder[1===a?"next":"prev"]()[0]===r||e.contains(this.placeholder[0],r)||"semi-dynamic"===this.options.type&&e.contains(this.element[0],r))){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,r=this.placeholder.offset(),a=this.options.axis,o={};a&&"x"!==a||(o.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(o.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,r=n+this.helperProportions.height,a=e.left,o=a+e.width,s=e.top,l=s+e.height,u=this.offset.click.top,c=this.offset.click.left,d=n+u>s&&n+u<l&&t+c>a&&t+c<o;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?d:a<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<o&&s<n+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t="x"===this.options.axis||i(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||i(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=t&&n,a=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return!!r&&(this.floating?o&&"right"===o||"down"===a?2:1:a&&("down"===a?2:1))},_intersectsWithSides:function(e){var t=i(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=i(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return this.floating&&a?"right"===a&&n||"left"===a&&!n:r&&("down"===r&&t||"up"===r&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i,n,r,a,o=[],s=[],l=this._connectWith();if(l&&t)for(i=l.length-1;i>=0;i--)for(n=(r=e(l[i])).length-1;n>=0;n--)(a=e.data(r[n],this.widgetFullName))&&a!==this&&!a.options.disabled&&s.push([e.isFunction(a.options.items)?a.options.items.call(a.element):e(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(s.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=s.length-1;i>=0;i--)s[i][0].each(function(){o.push(this)});return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;i<t.length;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,n,r,a,o,s,l,u,c=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],p=this._connectWith();if(p&&this.ready)for(i=p.length-1;i>=0;i--)for(n=(r=e(p[i])).length-1;n>=0;n--)(a=e.data(r[n],this.widgetFullName))&&a!==this&&!a.options.disabled&&(d.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a));for(i=d.length-1;i>=0;i--)for(o=d[i][1],n=0,u=(s=d[i][0]).length;n<u;n++)(l=e(s[n])).data(this.widgetName+"-item",o),c.push({item:l,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var i,n,r,a;for(this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),i=this.items.length-1;i>=0;i--)(n=this.items[i]).instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item,t||(n.width=r.outerWidth(),n.height=r.outerHeight()),a=r.offset(),n.left=a.left,n.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)a=this.containers[i].element.offset(),this.containers[i].containerCache.left=a.left,this.containers[i].containerCache.top=a.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){var i,n=(t=t||this).options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=t.currentItem[0].nodeName.toLowerCase(),r=e(t.document[0].createElement(n)).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===n?r.append("<td colspan='99'>&#160;</td>"):"img"===n&&r.attr("src",t.currentItem.attr("src")),i||r.css("visibility","hidden"),r},update:function(e,r){i&&!n.forcePlaceholderSize||(r.height()||r.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var r,a,o,s,l,u,c,d,p,h,g=null,f=null;for(r=this.containers.length-1;r>=0;r--)if(!e.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(g&&e.contains(this.containers[r].element[0],g.element[0]))continue;g=this.containers[r],f=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",t,this._uiHash(this)),this.containers[r].containerCache.over=0);if(g)if(1===this.containers.length)this.containers[f].containerCache.over||(this.containers[f]._trigger("over",t,this._uiHash(this)),this.containers[f].containerCache.over=1);else{for(o=1e4,s=null,l=(h=g.floating||n(this.currentItem))?"left":"top",u=h?"width":"height",c=this.positionAbs[l]+this.offset.click[l],a=this.items.length-1;a>=0;a--)e.contains(this.containers[f].element[0],this.items[a].item[0])&&this.items[a].item[0]!==this.currentItem[0]&&(h&&!i(this.positionAbs.top+this.offset.click.top,this.items[a].top,this.items[a].height)||(d=this.items[a].item.offset()[l],p=!1,Math.abs(d-c)>Math.abs(d+this.items[a][u]-c)&&(p=!0,d+=this.items[a][u]),Math.abs(d-c)<o&&(o=Math.abs(d-c),s=this.items[a],this.direction=p?"up":"down")));if(!s&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[f])return;s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[f].element,!0),this._trigger("change",t,this._uiHash()),this.containers[f]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[f],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[f]._trigger("over",t,this._uiHash(this)),this.containers[f].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),n[0].style.width&&!i.forceHelperSize||n.width(this.currentItem.width()),n[0].style.height&&!i.forceHelperSize||n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),"document"!==r.containment&&"window"!==r.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===r.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===r.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(t=e(r.containment)[0],i=e(r.containment).offset(),n="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(r[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:r.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:r.scrollLeft())*n}},_generatePosition:function(t){var i,n,r=this.options,a=t.pageX,o=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),r.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/r.grid[1])*r.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-r.grid[1]:i+r.grid[1]:i,n=this.originalPageX+Math.round((a-this.originalPageX)/r.grid[0])*r.grid[0],a=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-r.grid[0]:n+r.grid[0]:n)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:s.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:s.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!n)})},_clear:function(e,t){this.reverting=!1;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||n.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(n.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),i=0;i<n.length;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(i=0;i<n.length;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(jQuery),function(e,t){var i,n="ui-effects-";e.effects={effect:{}},function(e,t){var i,n=/^([\-+])=\s*(\d+\.?\d*)/,r=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],a=e.Color=function(t,i,n,r){return new e.Color.fn.parse(t,i,n,r)},o={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},s={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},l=a.support={},u=e("<p>")[0],c=e.each;function d(e,t,i){var n=s[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:0>e?0:n.max<e?n.max:e)}function p(t){var n=a(),s=n._rgba=[];return t=t.toLowerCase(),c(r,function(e,i){var r,a=i.re.exec(t),l=a&&i.parse(a),u=i.space||"rgba";if(l)return r=n[u](l),n[o[u].cache]=r[o[u].cache],s=n._rgba=r._rgba,!1}),s.length?("0,0,0,0"===s.join()&&e.extend(s,i.transparent),n):i[t]}function h(e,t,i){return 6*(i=(i+1)%1)<1?e+(t-e)*i*6:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}u.style.cssText="background-color:rgba(1,1,1,.5)",l.rgba=u.style.backgroundColor.indexOf("rgba")>-1,c(o,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),a.fn=e.extend(a.prototype,{parse:function(n,r,s,l){if(n===t)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=e(n).css(r),r=t);var u=this,h=e.type(n),g=this._rgba=[];return r!==t&&(n=[n,r,s,l],h="array"),"string"===h?this.parse(p(n)||i._default):"array"===h?(c(o.rgba.props,function(e,t){g[t.idx]=d(n[t.idx],t)}),this):"object"===h?(c(o,n instanceof a?function(e,t){n[t.cache]&&(u[t.cache]=n[t.cache].slice())}:function(t,i){var r=i.cache;c(i.props,function(e,t){if(!u[r]&&i.to){if("alpha"===e||null==n[e])return;u[r]=i.to(u._rgba)}u[r][t.idx]=d(n[e],t,!0)}),u[r]&&e.inArray(null,u[r].slice(0,3))<0&&(u[r][3]=1,i.from&&(u._rgba=i.from(u[r])))}),this):void 0},is:function(e){var t=a(e),i=!0,n=this;return c(o,function(e,r){var a,o=t[r.cache];return o&&(a=n[r.cache]||r.to&&r.to(n._rgba)||[],c(r.props,function(e,t){if(null!=o[t.idx])return i=o[t.idx]===a[t.idx]})),i}),i},_space:function(){var e=[],t=this;return c(o,function(i,n){t[n.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var i=a(e),n=i._space(),r=o[n],l=0===this.alpha()?a("transparent"):this,u=l[r.cache]||r.to(l._rgba),p=u.slice();return i=i[r.cache],c(r.props,function(e,n){var r=n.idx,a=u[r],o=i[r],l=s[n.type]||{};null!==o&&(null===a?p[r]=o:(l.mod&&(o-a>l.mod/2?a+=l.mod:a-o>l.mod/2&&(a-=l.mod)),p[r]=d((o-a)*t+a,n)))}),this[n](p)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),r=a(t)._rgba;return a(e.map(i,function(e,t){return(1-n)*r[t]+n*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&t<3&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,function(e){return 1===(e=(e||0).toString(16)).length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),a.fn.parse.prototype=a.fn,o.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,r=e[1]/255,a=e[2]/255,o=e[3],s=Math.max(n,r,a),l=Math.min(n,r,a),u=s-l,c=s+l,d=.5*c;return t=l===s?0:n===s?60*(r-a)/u+360:r===s?60*(a-n)/u+120:60*(n-r)/u+240,i=0===u?0:d<=.5?u/c:u/(2-c),[Math.round(t)%360,i,d,null==o?1:o]},o.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],r=e[3],a=n<=.5?n*(1+i):n+i-n*i,o=2*n-a;return[Math.round(255*h(o,a,t+1/3)),Math.round(255*h(o,a,t)),Math.round(255*h(o,a,t-1/3)),r]},c(o,function(i,r){var o=r.props,s=r.cache,l=r.to,u=r.from;a.fn[i]=function(i){if(l&&!this[s]&&(this[s]=l(this._rgba)),i===t)return this[s].slice();var n,r=e.type(i),p="array"===r||"object"===r?i:arguments,h=this[s].slice();return c(o,function(e,t){var i=p["object"===r?e:t.idx];null==i&&(i=h[t.idx]),h[t.idx]=d(i,t)}),u?((n=a(u(h)))[s]=h,n):a(h)},c(o,function(t,r){a.fn[t]||(a.fn[t]=function(a){var o,s=e.type(a),l="alpha"===t?this._hsla?"hsla":"rgba":i,u=this[l](),c=u[r.idx];return"undefined"===s?c:("function"===s&&(a=a.call(this,c),s=e.type(a)),null==a&&r.empty?this:("string"===s&&(o=n.exec(a))&&(a=c+parseFloat(o[2])*("+"===o[1]?1:-1)),u[r.idx]=a,this[l](u)))})})}),a.hook=function(t){var i=t.split(" ");c(i,function(t,i){e.cssHooks[i]={set:function(t,n){var r,o,s="";if("transparent"!==n&&("string"!==e.type(n)||(r=p(n)))){if(n=a(r||n),!l.rgba&&1!==n._rgba[3]){for(o="backgroundColor"===i?t.parentNode:t;(""===s||"transparent"===s)&&o&&o.style;)try{s=e.css(o,"backgroundColor"),o=o.parentNode}catch(e){}n=n.blend(s&&"transparent"!==s?s:"_default")}n=n.toRgbaString()}try{t.style[i]=n}catch(e){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=a(t.elem,i),t.end=a(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},a.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),e.cssHooks.borderColor={expand:function(e){var t={};return c(["Top","Right","Bottom","Left"],function(i,n){t["border"+n+"Color"]=e}),t}},i=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){var t,i,n,r=["add","remove","toggle"],a={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function o(t){var i,n,r=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,a={};if(r&&r.length&&r[0]&&r[r[0]])for(n=r.length;n--;)"string"==typeof r[i=r[n]]&&(a[e.camelCase(i)]=r[i]);else for(i in r)"string"==typeof r[i]&&(a[i]=r[i]);return a}e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,i,n,s){var l=e.speed(i,n,s);return this.queue(function(){var i,n=e(this),s=n.attr("class")||"",u=l.children?n.find("*").addBack():n;u=u.map(function(){return{el:e(this),start:o(this)}}),(i=function(){e.each(r,function(e,i){t[i]&&n[i+"Class"](t[i])})})(),u=u.map(function(){return this.end=o(this.el[0]),this.diff=function(t,i){var n,r,o={};for(n in i)r=i[n],t[n]!==r&&(a[n]||!e.fx.step[n]&&isNaN(parseFloat(r))||(o[n]=r));return o}(this.start,this.end),this}),n.attr("class",s),u=u.map(function(){var t=this,i=e.Deferred(),n=e.extend({},l,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,n),i.promise()}),e.when.apply(e,u.get()).done(function(){i(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(n[0])})})},e.fn.extend({addClass:(n=e.fn.addClass,function(t,i,r,a){return i?e.effects.animateClass.call(this,{add:t},i,r,a):n.apply(this,arguments)}),removeClass:(i=e.fn.removeClass,function(t,n,r,a){return arguments.length>1?e.effects.animateClass.call(this,{remove:t},n,r,a):i.apply(this,arguments)}),toggleClass:(t=e.fn.toggleClass,function(i,n,r,a,o){return"boolean"==typeof n||void 0===n?r?e.effects.animateClass.call(this,n?{add:i}:{remove:i},r,a,o):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},n,r,a)}),switchClass:function(t,i,n,r,a){return e.effects.animateClass.call(this,{add:i,remove:t},n,r,a)}})}(),function(){function t(t,i,n,r){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(r=i,n=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(r=n,n=i,i={}),e.isFunction(n)&&(r=n,n=null),i&&e.extend(t,i),n=n||i.duration,t.duration=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,t.complete=r||i.complete,t}function i(t){return!(t&&"number"!=typeof t&&!e.fx.speeds[t])||("string"==typeof t&&!e.effects.effect[t]||(!!e.isFunction(t)||"object"==typeof t&&!t.effect))}var r,a,o;e.extend(e.effects,{version:"1.10.2",save:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.data(n+t[i],e[0].style[t[i]])},restore:function(e,t){var i,r;for(r=0;r<t.length;r++)null!==t[r]&&(void 0===(i=e.data(n+t[r]))&&(i=""),e.css(t[r],i))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r={width:t.width(),height:t.height()},a=document.activeElement;try{a.id}catch(e){a=document.body}return t.wrap(n),(t[0]===a||e.contains(t[0],a))&&e(a).focus(),n=t.parent(),"static"===t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(r),n.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,n,r){return r=r||{},e.each(i,function(e,i){var a=t.cssUnit(i);a[0]>0&&(r[i]=a[0]*n+a[1])}),r}}),e.fn.extend({effect:function(){var i=t.apply(this,arguments),n=i.mode,r=i.queue,a=e.effects.effect[i.effect];if(e.fx.off||!a)return n?this[n](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)});function o(t){var n=e(this),r=i.complete,o=i.mode;function s(){e.isFunction(r)&&r.call(n[0]),e.isFunction(t)&&t()}(n.is(":hidden")?"hide"===o:"show"===o)?(n[o](),s()):a.call(n[0],i,s)}return!1===r?this.each(o):this.queue(r||"fx",o)},show:(o=e.fn.show,function(e){if(i(e))return o.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}),hide:(a=e.fn.hide,function(e){if(i(e))return a.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}),toggle:(r=e.fn.toggle,function(e){if(i(e)||"boolean"==typeof e)return r.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}),cssUnit:function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])}),n}})}(),i={},e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,t){i[t]=function(t){return Math.pow(t,e+2)}}),e.extend(i,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;e<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(i,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?i(2*e)/2:1-i(-2*e+2)/2}})}(jQuery),function(e,t){var i=0,n={},r={};n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="hide",r.height=r.paddingTop=r.paddingBottom=r.borderTopWidth=r.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||!1!==t.active&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e(),content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){"active"!==e?("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||!1!==this.options.active||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)):this._activate(t)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,n=this.headers.length,r=this.headers.index(t.target),a=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:a=this.headers[(r+1)%n];break;case i.LEFT:case i.UP:a=this.headers[(r-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:a=this.headers[0];break;case i.END:a=this.headers[n-1]}a&&(e(t.target).attr("tabIndex",-1),e(a).attr("tabIndex",0),a.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),(!1===t.active&&!0===t.collapsible||!this.headers.length)&&(t.active=!1,this.active=e()),!1===t.active?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var t,n=this.options,r=n.heightStyle,a=this.element.parent(),o=this.accordionId="ui-accordion-"+(this.element.attr("id")||++i);this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var i=e(this),n=i.attr("id"),r=i.next(),a=r.attr("id");n||(n=o+"-header-"+t,i.attr("id",n)),a||(a=o+"-panel-"+t,r.attr("id",a)),i.attr("aria-controls",a),r.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===r?(t=a.height(),this.element.siblings(":visible").each(function(){var i=e(this),n=i.css("position");"absolute"!==n&&"fixed"!==n&&(t-=i.outerHeight(!0))}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===r&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,n=this.active,r=e(t.currentTarget),a=r[0]===n[0],o=a&&i.collapsible,s=o?e():r.next(),l={oldHeader:n,oldPanel:n.next(),newHeader:o?e():r,newPanel:s};t.preventDefault(),a&&!i.collapsible||!1===this._trigger("beforeActivate",t,l)||(i.active=!o&&this.headers.index(r),this.active=a?e():r,this._toggle(l),n.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),a||(r.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&r.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),r.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,t):(n.hide(),i.show(),this._toggleComplete(t)),n.attr({"aria-expanded":"false","aria-hidden":"true"}),n.prev().attr("aria-selected","false"),i.length&&n.length?n.prev().attr("tabIndex",-1):i.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,i){var a,o,s,l=this,u=0,c=e.length&&(!t.length||e.index()<t.index()),d=this.options.animate||{},p=c&&d.down||d,h=function(){l._toggleComplete(i)};return"number"==typeof p&&(s=p),"string"==typeof p&&(o=p),o=o||p.easing||d.easing,s=s||p.duration||d.duration,t.length?e.length?(a=e.show().outerHeight(),t.animate(n,{duration:s,easing:o,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(r,{duration:s,easing:o,complete:h,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?u+=i.now:"content"!==l.options.heightStyle&&(i.now=Math.round(a-t.outerHeight()-u),u=0)}})):t.animate(n,s,o,h):e.animate(r,s,o,h)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})}(jQuery),function(e,t){var i=0;e.widget("ui.autocomplete",{version:"1.10.2",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,i,n,r=this.element[0].nodeName.toLowerCase(),a="textarea"===r,o="input"===r;this.isMultiLine=!!a||!o&&this.element.prop("isContentEditable"),this.valueMethod=this.element[a||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(r){if(this.element.prop("readOnly"))return t=!0,n=!0,void(i=!0);t=!1,n=!1,i=!1;var a=e.ui.keyCode;switch(r.keyCode){case a.PAGE_UP:t=!0,this._move("previousPage",r);break;case a.PAGE_DOWN:t=!0,this._move("nextPage",r);break;case a.UP:t=!0,this._keyEvent("previous",r);break;case a.DOWN:t=!0,this._keyEvent("next",r);break;case a.ENTER:case a.NUMPAD_ENTER:this.menu.active&&(t=!0,r.preventDefault(),this.menu.select(r));break;case a.TAB:this.menu.active&&this.menu.select(r);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(r),r.preventDefault());break;default:i=!0,this._searchTimeout(r)}},keypress:function(n){if(t)return t=!1,void n.preventDefault();if(!i){var r=e.ui.keyCode;switch(n.keyCode){case r.PAGE_UP:this._move("previousPage",n);break;case r.PAGE_DOWN:this._move("nextPage",n);break;case r.UP:this._keyEvent("previous",n);break;case r.DOWN:this._keyEvent("next",n)}}},input:function(e){if(n)return n=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({input:e(),role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(n){n.target===t.element[0]||n.target===i||e.contains(i,n.target)||t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});var n=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:n})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,r){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){r(e)},error:function(){r([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++i;return function(n){t===i&&e.__response(n),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,function(e,i){n._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<a>").text(i.label)).appendTo(t)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),function(e,t){var i,n,r,a,o="ui-button ui-widget ui-state-default ui-corner-all",s="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},u=function(t){var i=t.name,n=t.form,r=e([]);return i&&(i=i.replace(/'/g,"\\'"),r=n?e(n).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),r};e.widget("ui.button",{version:"1.10.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,s=this.options,c="checkbox"===this.type||"radio"===this.type,d=c?"":"ui-state-active",p="ui-state-focus";null===s.label&&(s.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){s.disabled||this===i&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){s.disabled||e(this).removeClass(d)}).bind("click"+this.eventNamespace,function(e){s.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){t.buttonElement.addClass(p)}).bind("blur"+this.eventNamespace,function(){t.buttonElement.removeClass(p)}),c&&(this.element.bind("change"+this.eventNamespace,function(){a||t.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){s.disabled||(a=!1,n=e.pageX,r=e.pageY)}).bind("mouseup"+this.eventNamespace,function(e){s.disabled||n===e.pageX&&r===e.pageY||(a=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(s.disabled||a)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(s.disabled||a)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var i=t.element[0];u(i).not(i).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(s.disabled)return!1;e(this).addClass("ui-state-active"),i=this,t.document.one("mouseup",function(){i=null})}).bind("mouseup"+this.eventNamespace,function(){if(s.disabled)return!1;e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){if(s.disabled)return!1;t.keyCode!==e.ui.keyCode.SPACE&&t.keyCode!==e.ui.keyCode.ENTER||e(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",s.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),(i=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" ui-state-hover ui-state-active  "+s).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){this._super(e,t),"disabled"!==e?this._resetButton():t?this.element.prop("disabled",!0):this.element.prop("disabled",!1)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?u(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"!==this.type){var t=this.buttonElement.removeClass(s),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),n=this.options.icons,r=n.primary&&n.secondary,a=[];n.primary||n.secondary?(this.options.text&&a.push("ui-button-text-icon"+(r?"s":n.primary?"-primary":"-secondary")),n.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(a.push(r?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):a.push("ui-button-text-only"),t.addClass(a.join(" "))}else this.options.label&&this.element.val(this.options.label)}}),e.widget("ui.buttonset",{version:"1.10.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(e,t){e.extend(e.ui,{datepicker:{version:"1.10.2"}});var i,n="datepicker",r=(new Date).getTime();function a(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=o(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function o(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(n,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",function(){e.datepicker._isDisabledDatepicker(i.inline?t.parent()[0]:i.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))})}function s(t,i){for(var n in e.extend(t,i),i)null==i[n]&&(t[n]=i[n]);return t}e.extend(a.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return s(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var n,r,a;r="div"===(n=t.nodeName.toLowerCase())||"span"===n,t.id||(this.uuid+=1,t.id="dp"+this.uuid),(a=this._newInst(e(t),r)).settings=e.extend({},i||{}),"input"===n?this._connectDatepicker(t,a):r&&this._inlineDatepicker(t,a)},_newInst:function(t,i){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?o(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var r=e(t);i.append=e([]),i.trigger=e([]),r.hasClass(this.markerClassName)||(this._attachments(r,i),r.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,n,i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var n,r,a,o=this._get(i,"appendText"),s=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[s?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),"focus"!==(n=this._get(i,"showOn"))&&"both"!==n||t.focus(this._showDatepicker),"button"!==n&&"both"!==n||(r=this._get(i,"buttonText"),a=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:a,alt:r,title:r}):e("<button type='button'></button>").addClass(this._triggerClass).html(a?e("<img/>").attr({src:a,alt:r,title:r}):r)),t[s?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,n,r,a=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(i=0,n=0,r=0;r<e.length;r++)e[r].length>i&&(i=e[r].length,n=r);return n},a.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),e.input.attr("size",this._formatDate(e,a).length)}},_inlineDatepicker:function(t,i){var r=e(t);r.hasClass(this.markerClassName)||(r.addClass(this.markerClassName).append(i.dpDiv),e.data(t,n,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,r,a,o){var l,u,c,d,p,h=this._dialogInst;return h||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),(h=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},e.data(this._dialogInput[0],n,h)),s(h.settings,a||{}),i=i&&i.constructor===Date?this._formatDate(h,i):i,this._dialogInput.val(i),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(u=document.documentElement.clientWidth,c=document.documentElement.clientHeight,d=document.documentElement.scrollLeft||document.body.scrollLeft,p=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[u/2-100+d,c/2-150+p]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),h.settings.onSelect=r,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],n,h),this},_destroyDatepicker:function(t){var i,r=e(t),a=e.data(t,n);r.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,n),"input"===i?(a.append.remove(),a.trigger.remove(),r.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!==i&&"span"!==i||r.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i,r,a=e(t),o=e.data(t,n);a.hasClass(this.markerClassName)&&("input"===(i=t.nodeName.toLowerCase())?(t.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==i&&"span"!==i||((r=a.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,r,a=e(t),o=e.data(t,n);a.hasClass(this.markerClassName)&&("input"===(i=t.nodeName.toLowerCase())?(t.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==i&&"span"!==i||((r=a.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,n)}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,n,r){var a,o,l,u,c=this._getInst(i);if(2===arguments.length&&"string"==typeof n)return"defaults"===n?e.extend({},e.datepicker._defaults):c?"all"===n?e.extend({},c.settings):this._get(c,n):null;a=n||{},"string"==typeof n&&((a={})[n]=r),c&&(this._curInst===c&&this._hideDatepicker(),o=this._getDateDatepicker(i,!0),l=this._getMinMaxDate(c,"min"),u=this._getMinMaxDate(c,"max"),s(c.settings,a),null!==l&&a.dateFormat!==t&&a.minDate===t&&(c.settings.minDate=this._formatDate(c,l)),null!==u&&a.dateFormat!==t&&a.maxDate===t&&(c.settings.maxDate=this._formatDate(c,u)),"disabled"in a&&(a.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(e(i),c),this._autoSize(c),this._setDate(c,o),this._updateAlternate(c),this._updateDatepicker(c))},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,n,r,a=e.datepicker._getInst(t.target),o=!0,s=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return(r=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",a.dpDiv))[0]&&e.datepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,r[0]),(i=e.datepicker._get(a,"onSelect"))?(n=e.datepicker._formatDate(a),i.apply(a.input?a.input[0]:null,[n,a])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,s?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,s?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,n,r=e.datepicker._getInst(t.target);if(e.datepicker._get(r,"constrainInput"))return i=e.datepicker._possibleChars(e.datepicker._get(r,"dateFormat")),n=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||n<" "||!i||i.indexOf(n)>-1},_doKeyUp:function(t){var i=e.datepicker._getInst(t.target);if(i.input.val()!==i.lastVal)try{e.datepicker.parseDate(e.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,e.datepicker._getFormatConfig(i))&&(e.datepicker._setDateFromField(i),e.datepicker._updateAlternate(i),e.datepicker._updateDatepicker(i))}catch(e){}return!0},_showDatepicker:function(t){var i,n,r,a,o,l,u;("input"!==(t=t.target||t).nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t)||(i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),!1!==(r=(n=e.datepicker._get(i,"beforeShow"))?n.apply(t,[t,i]):{})&&(s(i.settings,r),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),a=!1,e(t).parents().each(function(){return!(a|="fixed"===e(this).css("position"))}),o={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),o=e.datepicker._checkOffset(i,o,a),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":a?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),u=e.datepicker._get(i,"duration"),i.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),u):i.dpDiv[l||"show"](l?u:null),i.input.is(":visible")&&!i.input.is(":disabled")&&i.input.focus(),e.datepicker._curInst=i)))},_updateDatepicker:function(t){this.maxRows=4,i=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n,r=this._getNumberOfMonths(t),a=r[1];t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),a>1&&t.dpDiv.addClass("ui-datepicker-multi-"+a).css("width",17*a+"em"),t.dpDiv[(1!==r[0]||1!==r[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&t.input[0]!==document.activeElement&&t.input.focus(),t.yearshtml&&(n=t.yearshtml,setTimeout(function(){n===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),n=t.yearshtml=null},0))},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(t,i,n){var r=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,s=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:e(document).scrollLeft()),u=document.documentElement.clientHeight+(n?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?r-o:0,i.left-=n&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=n&&i.top===t.input.offset().top+s?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+r>l&&l>r?Math.abs(i.left+r-l):0),i.top-=Math.min(i.top,i.top+a>u&&u>a?Math.abs(a+s):0),i},_findPos:function(t){for(var i,n=this._getInst(t),r=this._get(n,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[r?"previousSibling":"nextSibling"];return[(i=e(t).offset()).left,i.top]},_hideDatepicker:function(t){var i,r,a,o,s=this._curInst;!s||t&&s!==e.data(t,n)||this._datepickerShowing&&(i=this._get(s,"showAnim"),r=this._get(s,"duration"),a=function(){e.datepicker._tidyDialog(s)},e.effects&&(e.effects.effect[i]||e.effects[i])?s.dpDiv.hide(i,e.datepicker._get(s,"showOptions"),r,a):s.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?r:null,a),i||a(),this._datepickerShowing=!1,(o=this._get(s,"onClose"))&&o.apply(s.input?s.input[0]:null,[s.input?s.input.val():"",s]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),n=e.datepicker._getInst(i[0]);(i[0].id===e.datepicker._mainDivId||0!==i.parents("#"+e.datepicker._mainDivId).length||i.hasClass(e.datepicker.markerClassName)||i.closest("."+e.datepicker._triggerClass).length||!e.datepicker._datepickerShowing||e.datepicker._inDialog&&e.blockUI)&&(!i.hasClass(e.datepicker.markerClassName)||e.datepicker._curInst===n)||e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,n){var r=e(t),a=this._getInst(r[0]);this._isDisabledDatepicker(r[0])||(this._adjustInstDate(a,i+("M"===n?this._get(a,"showCurrentAtPos"):0),n),this._updateDatepicker(a))},_gotoToday:function(t){var i,n=e(t),r=this._getInst(n[0]);this._get(r,"gotoCurrent")&&r.currentDay?(r.selectedDay=r.currentDay,r.drawMonth=r.selectedMonth=r.currentMonth,r.drawYear=r.selectedYear=r.currentYear):(i=new Date,r.selectedDay=i.getDate(),r.drawMonth=r.selectedMonth=i.getMonth(),r.drawYear=r.selectedYear=i.getFullYear()),this._notifyChange(r),this._adjustDate(n)},_selectMonthYear:function(t,i,n){var r=e(t),a=this._getInst(r[0]);a["selected"+("M"===n?"Month":"Year")]=a["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(r)},_selectDay:function(t,i,n,r){var a,o=e(t);e(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||((a=this._getInst(o[0])).selectedDay=a.currentDay=e("a",r).html(),a.selectedMonth=a.currentMonth=i,a.selectedYear=a.currentYear=n,this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var n,r=e(t),a=this._getInst(r[0]);i=null!=i?i:this._formatDate(a),a.input&&a.input.val(i),this._updateAlternate(a),(n=this._get(a,"onSelect"))?n.apply(a.input?a.input[0]:null,[i,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,n,r,a=this._get(t,"altField");a&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),n=this._getDate(t),r=this.formatDate(i,n,this._getFormatConfig(t)),e(a).each(function(){e(this).val(r)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,n){if(null==t||null==i)throw"Invalid arguments";if(""===(i="object"==typeof i?i.toString():i+""))return null;var r,a,o,s,l=0,u=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof u?u:(new Date).getFullYear()%100+parseInt(u,10),d=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,p=(n?n.dayNames:null)||this._defaults.dayNames,h=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,g=(n?n.monthNames:null)||this._defaults.monthNames,f=-1,m=-1,v=-1,b=-1,y=!1,x=function(e){var i=r+1<t.length&&t.charAt(r+1)===e;return i&&r++,i},C=function(e){var t=x(e),n=new RegExp("^\\d{1,"+("@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2)+"}"),r=i.substring(l).match(n);if(!r)throw"Missing number at position "+l;return l+=r[0].length,parseInt(r[0],10)},_=function(t,n,r){var a=-1,o=e.map(x(t)?r:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,t){var n=t[1];if(i.substr(l,n.length).toLowerCase()===n.toLowerCase())return a=t[0],l+=n.length,!1}),-1!==a)return a+1;throw"Unknown name at position "+l},w=function(){if(i.charAt(l)!==t.charAt(r))throw"Unexpected literal at position "+l;l++};for(r=0;r<t.length;r++)if(y)"'"!==t.charAt(r)||x("'")?w():y=!1;else switch(t.charAt(r)){case"d":v=C("d");break;case"D":_("D",d,p);break;case"o":b=C("o");break;case"m":m=C("m");break;case"M":m=_("M",h,g);break;case"y":f=C("y");break;case"@":f=(s=new Date(C("@"))).getFullYear(),m=s.getMonth()+1,v=s.getDate();break;case"!":f=(s=new Date((C("!")-this._ticksTo1970)/1e4)).getFullYear(),m=s.getMonth()+1,v=s.getDate();break;case"'":x("'")?w():y=!0;break;default:w()}if(l<i.length&&(o=i.substr(l),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===f?f=(new Date).getFullYear():f<100&&(f+=(new Date).getFullYear()-(new Date).getFullYear()%100+(f<=c?0:-100)),b>-1)for(m=1,v=b;;){if(v<=(a=this._getDaysInMonth(f,m-1)))break;m++,v-=a}if((s=this._daylightSavingAdjust(new Date(f,m-1,v))).getFullYear()!==f||s.getMonth()+1!==m||s.getDate()!==v)throw"Invalid date";return s},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,i){if(!t)return"";var n,r=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,s=(i?i.monthNames:null)||this._defaults.monthNames,l=function(t){var i=n+1<e.length&&e.charAt(n+1)===t;return i&&n++,i},u=function(e,t,i){var n=""+t;if(l(e))for(;n.length<i;)n="0"+n;return n},c=function(e,t,i,n){return l(e)?n[t]:i[t]},d="",p=!1;if(t)for(n=0;n<e.length;n++)if(p)"'"!==e.charAt(n)||l("'")?d+=e.charAt(n):p=!1;else switch(e.charAt(n)){case"d":d+=u("d",t.getDate(),2);break;case"D":d+=c("D",t.getDay(),r,a);break;case"o":d+=u("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=u("m",t.getMonth()+1,2);break;case"M":d+=c("M",t.getMonth(),o,s);break;case"y":d+=l("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?d+="'":p=!0;break;default:d+=e.charAt(n)}return d},_possibleChars:function(e){var t,i="",n=!1,r=function(i){var n=t+1<e.length&&e.charAt(t+1)===i;return n&&t++,n};for(t=0;t<e.length;t++)if(n)"'"!==e.charAt(t)||r("'")?i+=e.charAt(t):n=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":r("'")?i+="'":n=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,i){return e.settings[i]!==t?e.settings[i]:this._defaults[i]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,r=this._getDefaultDate(e),a=r,o=this._getFormatConfig(e);try{a=this.parseDate(i,n,o)||r}catch(e){n=t?"":n}e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),e.currentDay=n?a.getDate():0,e.currentMonth=n?a.getMonth():0,e.currentYear=n?a.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,n){var r,a,o=null==i||""===i?n:"string"==typeof i?function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(e){}for(var n=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,r=n.getFullYear(),a=n.getMonth(),o=n.getDate(),s=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=s.exec(i);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":a+=parseInt(l[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(r,a));break;case"y":case"Y":r+=parseInt(l[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(r,a))}l=s.exec(i)}return new Date(r,a,o)}(i):"number"==typeof i?isNaN(i)?n:(r=i,(a=new Date).setDate(a.getDate()+r),a):new Date(i.getTime());return(o=o&&"Invalid Date"===o.toString()?n:o)&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,r=e.selectedMonth,a=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),r===e.selectedMonth&&a===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){window["DP_jQuery_"+r].datepicker._adjustDate(n,-i,"M")},next:function(){window["DP_jQuery_"+r].datepicker._adjustDate(n,+i,"M")},hide:function(){window["DP_jQuery_"+r].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+r].datepicker._gotoToday(n)},selectDay:function(){return window["DP_jQuery_"+r].datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+r].datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+r].datepicker._selectMonthYear(n,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,n,r,a,o,s,l,u,c,d,p,h,g,f,m,v,b,y,x,C,_,w,E,T,z,R,A,P,D,S,I,F,k,N,O,M,B,$,L=new Date,j=this._daylightSavingAdjust(new Date(L.getFullYear(),L.getMonth(),L.getDate())),H=this._get(e,"isRTL"),X=this._get(e,"showButtonPanel"),V=this._get(e,"hideIfNoPrevNext"),U=this._get(e,"navigationAsDateFormat"),q=this._getNumberOfMonths(e),W=this._get(e,"showCurrentAtPos"),G=this._get(e,"stepMonths"),Y=1!==q[0]||1!==q[1],Q=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),K=this._getMinMaxDate(e,"min"),J=this._getMinMaxDate(e,"max"),Z=e.drawMonth-W,ee=e.drawYear;if(Z<0&&(Z+=12,ee--),J)for(t=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-q[0]*q[1]+1,J.getDate())),t=K&&t<K?K:t;this._daylightSavingAdjust(new Date(ee,Z,1))>t;)--Z<0&&(Z=11,ee--);for(e.drawMonth=Z,e.drawYear=ee,i=this._get(e,"prevText"),i=U?this.formatDate(i,this._daylightSavingAdjust(new Date(ee,Z-G,1)),this._getFormatConfig(e)):i,n=this._canAdjustMonth(e,-1,ee,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(H?"e":"w")+"'>"+i+"</span></a>":V?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(H?"e":"w")+"'>"+i+"</span></a>",r=this._get(e,"nextText"),r=U?this.formatDate(r,this._daylightSavingAdjust(new Date(ee,Z+G,1)),this._getFormatConfig(e)):r,a=this._canAdjustMonth(e,1,ee,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(H?"w":"e")+"'>"+r+"</span></a>":V?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(H?"w":"e")+"'>"+r+"</span></a>",o=this._get(e,"currentText"),s=this._get(e,"gotoCurrent")&&e.currentDay?Q:j,o=U?this.formatDate(o,s,this._getFormatConfig(e)):o,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",u=X?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(H?l:"")+(this._isInRange(e,s)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(H?"":l)+"</div>":"",c=parseInt(this._get(e,"firstDay"),10),c=isNaN(c)?0:c,d=this._get(e,"showWeek"),p=this._get(e,"dayNames"),h=this._get(e,"dayNamesMin"),g=this._get(e,"monthNames"),f=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),b=this._get(e,"selectOtherMonths"),y=this._getDefaultDate(e),x="",_=0;_<q[0];_++){for(w="",this.maxRows=4,E=0;E<q[1];E++){if(T=this._daylightSavingAdjust(new Date(ee,Z,e.selectedDay)),z=" ui-corner-all",R="",Y){if(R+="<div class='ui-datepicker-group",q[1]>1)switch(E){case 0:R+=" ui-datepicker-group-first",z=" ui-corner-"+(H?"right":"left");break;case q[1]-1:R+=" ui-datepicker-group-last",z=" ui-corner-"+(H?"left":"right");break;default:R+=" ui-datepicker-group-middle",z=""}R+="'>"}for(R+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+z+"'>"+(/all|left/.test(z)&&0===_?H?a:n:"")+(/all|right/.test(z)&&0===_?H?n:a:"")+this._generateMonthYearHeader(e,Z,ee,K,J,_>0||E>0,g,f)+"</div><table class='ui-datepicker-calendar'><thead><tr>",A=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",C=0;C<7;C++)A+="<th"+((C+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+p[P=(C+c)%7]+"'>"+h[P]+"</span></th>";for(R+=A+"</tr></thead><tbody>",D=this._getDaysInMonth(ee,Z),ee===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,D)),S=(this._getFirstDayOfMonth(ee,Z)-c+7)%7,I=Math.ceil((S+D)/7),F=Y&&this.maxRows>I?this.maxRows:I,this.maxRows=F,k=this._daylightSavingAdjust(new Date(ee,Z,1-S)),N=0;N<F;N++){for(R+="<tr>",O=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(k)+"</td>":"",C=0;C<7;C++)M=m?m.apply(e.input?e.input[0]:null,[k]):[!0,""],$=(B=k.getMonth()!==Z)&&!b||!M[0]||K&&k<K||J&&k>J,O+="<td class='"+((C+c+6)%7>=5?" ui-datepicker-week-end":"")+(B?" ui-datepicker-other-month":"")+(k.getTime()===T.getTime()&&Z===e.selectedMonth&&e._keyEvent||y.getTime()===k.getTime()&&y.getTime()===T.getTime()?" "+this._dayOverClass:"")+($?" "+this._unselectableClass+" ui-state-disabled":"")+(B&&!v?"":" "+M[1]+(k.getTime()===Q.getTime()?" "+this._currentClass:"")+(k.getTime()===j.getTime()?" ui-datepicker-today":""))+"'"+(B&&!v||!M[2]?"":" title='"+M[2].replace(/'/g,"&#39;")+"'")+($?"":" data-handler='selectDay' data-event='click' data-month='"+k.getMonth()+"' data-year='"+k.getFullYear()+"'")+">"+(B&&!v?"&#xa0;":$?"<span class='ui-state-default'>"+k.getDate()+"</span>":"<a class='ui-state-default"+(k.getTime()===j.getTime()?" ui-state-highlight":"")+(k.getTime()===Q.getTime()?" ui-state-active":"")+(B?" ui-priority-secondary":"")+"' href='#'>"+k.getDate()+"</a>")+"</td>",k.setDate(k.getDate()+1),k=this._daylightSavingAdjust(k);R+=O+"</tr>"}++Z>11&&(Z=0,ee++),w+=R+="</tbody></table>"+(Y?"</div>"+(q[0]>0&&E===q[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}x+=w}return x+=u,e._keyEvent=!1,x},_generateMonthYearHeader:function(e,t,i,n,r,a,o,s){var l,u,c,d,p,h,g,f,m=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),b=this._get(e,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",x="";if(a||!m)x+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(l=n&&n.getFullYear()===i,u=r&&r.getFullYear()===i,x+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;c<12;c++)(!l||c>=n.getMonth())&&(!u||c<=r.getMonth())&&(x+="<option value='"+c+"'"+(c===t?" selected='selected'":"")+">"+s[c]+"</option>");x+="</select>"}if(b||(y+=x+(!a&&m&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",a||!v)y+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),p=(new Date).getFullYear(),g=(h=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?p+parseInt(e,10):parseInt(e,10);return isNaN(t)?p:t})(d[0]),f=Math.max(g,h(d[1]||"")),g=n?Math.max(g,n.getFullYear()):g,f=r?Math.min(f,r.getFullYear()):f,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";g<=f;g++)e.yearshtml+="<option value='"+g+"'"+(g===i?" selected='selected'":"")+">"+g+"</option>";e.yearshtml+="</select>",y+=e.yearshtml,e.yearshtml=null}return y+=this._get(e,"yearSuffix"),b&&(y+=(!a&&m&&v?"":"&#xa0;")+x),y+="</div>"},_adjustInstDate:function(e,t,i){var n=e.drawYear+("Y"===i?t:0),r=e.drawMonth+("M"===i?t:0),a=Math.min(e.selectedDay,this._getDaysInMonth(n,r))+("D"===i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,r,a)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),"M"!==i&&"Y"!==i||this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),r=i&&t<i?i:t;return n&&r>n?n:r},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var r=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(i,n+(t<0?t:r[0]*r[1]),1));return t<0&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(e,a)},_isInRange:function(e,t){var i,n,r=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),o=null,s=null,l=this._get(e,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),o=parseInt(i[0],10),s=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=n),i[1].match(/[+\-].*/)&&(s+=n)),(!r||t.getTime()>=r.getTime())&&(!a||t.getTime()<=a.getTime())&&(!o||t.getFullYear()>=o)&&(!s||t.getFullYear()<=s)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var r=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),r,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new a,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.2",window["DP_jQuery_"+r]=e}(jQuery),function(e,t){var i={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},n={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.2",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;i<0&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(e=t.parent.children().eq(t.index)).length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i=this;this._isOpen&&!1!==this._trigger("beforeClose",t)&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||e(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!t&&this._trigger("focus",e),i},open:function(){var t=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._trigger("open"))},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement;this.uiDialog[0]===t||e.contains(this.uiDialog[0],t)||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),r=i.filter(":last");t.target!==r[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==n[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(r.focus(1),t.preventDefault()):(n.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?this.uiDialog.removeClass("ui-dialog-buttons"):(e.each(i,function(i,n){var r,a;n=e.isFunction(n)?{click:n,text:i}:n,n=e.extend({type:"button"},n),r=n.click,n.click=function(){r.apply(t.element[0],arguments)},a={icons:n.icons,text:n.showText},delete n.icons,delete n.showText,e("<button></button>",n).button(a).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var t=this,i=this.options;function n(e){return{position:e.position,offset:e.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,r){e(this).addClass("ui-dialog-dragging"),t._blockFrames(),t._trigger("dragStart",i,n(r))},drag:function(e,i){t._trigger("drag",e,n(i))},stop:function(r,a){i.position=[a.position.left-t.document.scrollLeft(),a.position.top-t.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),t._unblockFrames(),t._trigger("dragStop",r,n(a))}})},_makeResizable:function(){var t=this,i=this.options,n=i.resizable,r=this.uiDialog.css("position"),a="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";function o(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:a,start:function(i,n){e(this).addClass("ui-dialog-resizing"),t._blockFrames(),t._trigger("resizeStart",i,o(n))},resize:function(e,i){t._trigger("resize",e,o(i))},stop:function(n,r){i.height=e(this).height(),i.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),t._unblockFrames(),t._trigger("resizeStop",n,o(r))}}).css("position",r)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var r=this,a=!1,o={};e.each(t,function(e,t){r._setOption(e,t),e in i&&(a=!0),e in n&&(o[e]=t)}),a&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(e,t){var i,n,r=this.uiDialog;"dialogClass"===e&&r.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&((i=r.is(":data(ui-draggable)"))&&!t&&r.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&((n=r.is(":data(ui-resizable)"))&&!t&&r.resizable("destroy"),n&&"string"==typeof t&&r.resizable("option","handles",t),n||!1===t||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),t=Math.max(0,n.minHeight-e),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-e):"none","auto"===n.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!e(t.target).closest(".ui-dialog").length||!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=this,i=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(n){t._allowInteraction(n)||(n.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++}},_getMaxZindex:function(){var t=e("*"),i=1;return e.each(t,function(t,n){var r=parseInt(e(n).css("z-index"));r>i&&(i=r+1)}),i},_destroyOverlay:function(){this.options.modal&&this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,!1!==e.uiBackCompat&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t,i=this.options.position,n=[],r=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(1===(n=i.split?i.split(" "):[i[0],i[1]]).length&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)}),i={my:n[0]+(r[0]<0?r[0]:"+"+r[0])+" "+n[1]+(r[1]<0?r[1]:"+"+r[1]),at:n.join(" ")}),i=e.extend({},e.ui.dialog.prototype.options.position,i)):i=e.ui.dialog.prototype.options.position,(t=this.uiDialog.is(":visible"))||this.uiDialog.show(),this.uiDialog.position(i),t||this.uiDialog.hide()}})}(jQuery),function(e,t){var i=/up|down|vertical/,n=/up|left|vertical|horizontal/;e.effects.effect.blind=function(t,r){var a,o,s,l=e(this),u=["position","top","bottom","left","right","height","width"],c=e.effects.setMode(l,t.mode||"hide"),d=t.direction||"up",p=i.test(d),h=p?"height":"width",g=p?"top":"left",f=n.test(d),m={},v="show"===c;l.parent().is(".ui-effects-wrapper")?e.effects.save(l.parent(),u):e.effects.save(l,u),l.show(),o=(a=e.effects.createWrapper(l).css({overflow:"hidden"}))[h](),s=parseFloat(a.css(g))||0,m[h]=v?o:0,f||(l.css(p?"bottom":"right",0).css(p?"top":"left","auto").css({position:"absolute"}),m[g]=v?s:o+s),v&&(a.css(h,0),f||a.css(g,s+o)),a.animate(m,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===c&&l.hide(),e.effects.restore(l,u),e.effects.removeWrapper(l),r()}})}}(jQuery),function(e,t){e.effects.effect.bounce=function(t,i){var n,r,a,o=e(this),s=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(o,t.mode||"effect"),u="hide"===l,c="show"===l,d=t.direction||"up",p=t.distance,h=t.times||5,g=2*h+(c||u?1:0),f=t.duration/g,m=t.easing,v="up"===d||"down"===d?"top":"left",b="up"===d||"left"===d,y=o.queue(),x=y.length;for((c||u)&&s.push("opacity"),e.effects.save(o,s),o.show(),e.effects.createWrapper(o),p||(p=o["top"===v?"outerHeight":"outerWidth"]()/3),c&&((a={opacity:1})[v]=0,o.css("opacity",0).css(v,b?2*-p:2*p).animate(a,f,m)),u&&(p/=Math.pow(2,h-1)),(a={})[v]=0,n=0;n<h;n++)(r={})[v]=(b?"-=":"+=")+p,o.animate(r,f,m).animate(a,f,m),p=u?2*p:p/2;u&&((r={opacity:0})[v]=(b?"-=":"+=")+p,o.animate(r,f,m)),o.queue(function(){u&&o.hide(),e.effects.restore(o,s),e.effects.removeWrapper(o),i()}),x>1&&y.splice.apply(y,[1,0].concat(y.splice(x,g+1))),o.dequeue()}}(jQuery),function(e,t){e.effects.effect.clip=function(t,i){var n,r,a,o=e(this),s=["position","top","bottom","left","right","height","width"],l="show"===e.effects.setMode(o,t.mode||"hide"),u="vertical"===(t.direction||"vertical"),c=u?"height":"width",d=u?"top":"left",p={};e.effects.save(o,s),o.show(),n=e.effects.createWrapper(o).css({overflow:"hidden"}),a=(r="IMG"===o[0].tagName?n:o)[c](),l&&(r.css(c,0),r.css(d,a/2)),p[c]=l?a:0,p[d]=l?0:a/2,r.animate(p,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){l||o.hide(),e.effects.restore(o,s),e.effects.removeWrapper(o),i()}})}}(jQuery),function(e,t){e.effects.effect.drop=function(t,i){var n,r=e(this),a=["position","top","bottom","left","right","opacity","height","width"],o=e.effects.setMode(r,t.mode||"hide"),s="show"===o,l=t.direction||"left",u="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l?"pos":"neg",d={opacity:s?1:0};e.effects.save(r,a),r.show(),e.effects.createWrapper(r),n=t.distance||r["top"===u?"outerHeight":"outerWidth"](!0)/2,s&&r.css("opacity",0).css(u,"pos"===c?-n:n),d[u]=(s?"pos"===c?"+=":"-=":"pos"===c?"-=":"+=")+n,r.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&r.hide(),e.effects.restore(r,a),e.effects.removeWrapper(r),i()}})}}(jQuery),function(e,t){e.effects.effect.explode=function(t,i){var n,r,a,o,s,l,u=t.pieces?Math.round(Math.sqrt(t.pieces)):3,c=u,d=e(this),p="show"===e.effects.setMode(d,t.mode||"hide"),h=d.show().css("visibility","hidden").offset(),g=Math.ceil(d.outerWidth()/c),f=Math.ceil(d.outerHeight()/u),m=[];function v(){m.push(this),m.length===u*c&&function(){d.css({visibility:"visible"}),e(m).remove(),p||d.hide();i()}()}for(n=0;n<u;n++)for(o=h.top+n*f,l=n-(u-1)/2,r=0;r<c;r++)a=h.left+r*g,s=r-(c-1)/2,d.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-r*g,top:-n*f}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g,height:f,left:a+(p?s*g:0),top:o+(p?l*f:0),opacity:p?0:1}).animate({left:a+(p?0:s*g),top:o+(p?0:l*f),opacity:p?1:0},t.duration||500,t.easing,v)}}(jQuery),function(e,t){e.effects.effect.fade=function(t,i){var n=e(this),r=e.effects.setMode(n,t.mode||"toggle");n.animate({opacity:r},{queue:!1,duration:t.duration,easing:t.easing,complete:i})}}(jQuery),function(e,t){e.effects.effect.fold=function(t,i){var n,r,a=e(this),o=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(a,t.mode||"hide"),l="show"===s,u="hide"===s,c=t.size||15,d=/([0-9]+)%/.exec(c),p=!!t.horizFirst,h=l!==p,g=h?["width","height"]:["height","width"],f=t.duration/2,m={},v={};e.effects.save(a,o),a.show(),n=e.effects.createWrapper(a).css({overflow:"hidden"}),r=h?[n.width(),n.height()]:[n.height(),n.width()],d&&(c=parseInt(d[1],10)/100*r[u?0:1]),l&&n.css(p?{height:0,width:c}:{height:c,width:0}),m[g[0]]=l?r[0]:c,v[g[1]]=l?r[1]:0,n.animate(m,f,t.easing).animate(v,f,t.easing,function(){u&&a.hide(),e.effects.restore(a,o),e.effects.removeWrapper(a),i()})}}(jQuery),function(e,t){e.effects.effect.highlight=function(t,i){var n=e(this),r=["backgroundImage","backgroundColor","opacity"],a=e.effects.setMode(n,t.mode||"show"),o={backgroundColor:n.css("backgroundColor")};"hide"===a&&(o.opacity=0),e.effects.save(n,r),n.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&n.hide(),e.effects.restore(n,r),i()}})}}(jQuery),function(e,t){e.effects.effect.pulsate=function(t,i){var n,r=e(this),a=e.effects.setMode(r,t.mode||"show"),o="show"===a,s="hide"===a,l=o||"hide"===a,u=2*(t.times||5)+(l?1:0),c=t.duration/u,d=0,p=r.queue(),h=p.length;for(!o&&r.is(":visible")||(r.css("opacity",0).show(),d=1),n=1;n<u;n++)r.animate({opacity:d},c,t.easing),d=1-d;r.animate({opacity:d},c,t.easing),r.queue(function(){s&&r.hide(),i()}),h>1&&p.splice.apply(p,[1,0].concat(p.splice(h,u+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.puff=function(t,i){var n=e(this),r=e.effects.setMode(n,t.mode||"hide"),a="hide"===r,o=parseInt(t.percent,10)||150,s=o/100,l={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:r,complete:i,percent:a?o:100,from:a?l:{height:l.height*s,width:l.width*s,outerHeight:l.outerHeight*s,outerWidth:l.outerWidth*s}}),n.effect(t)},e.effects.effect.scale=function(t,i){var n=e(this),r=e.extend(!0,{},t),a=e.effects.setMode(n,t.mode||"effect"),o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===a?0:100),s=t.direction||"both",l=t.origin,u={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()},c="horizontal"!==s?o/100:1,d="vertical"!==s?o/100:1;r.effect="size",r.queue=!1,r.complete=i,"effect"!==a&&(r.origin=l||["middle","center"],r.restore=!0),r.from=t.from||("show"===a?{height:0,width:0,outerHeight:0,outerWidth:0}:u),r.to={height:u.height*c,width:u.width*d,outerHeight:u.outerHeight*c,outerWidth:u.outerWidth*d},r.fade&&("show"===a&&(r.from.opacity=0,r.to.opacity=1),"hide"===a&&(r.from.opacity=1,r.to.opacity=0)),n.effect(r)},e.effects.effect.size=function(t,i){var n,r,a,o=e(this),s=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["width","height","overflow"],u=["fontSize"],c=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),h=t.restore||"effect"!==p,g=t.scale||"both",f=t.origin||["middle","center"],m=o.css("position"),v=h?s:["position","top","bottom","left","right","overflow","opacity"],b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&o.show(),n={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},"toggle"===t.mode&&"show"===p?(o.from=t.to||b,o.to=t.from||n):(o.from=t.from||("show"===p?b:n),o.to=t.to||("hide"===p?b:n)),a={from:{y:o.from.height/n.height,x:o.from.width/n.width},to:{y:o.to.height/n.height,x:o.to.width/n.width}},"box"!==g&&"both"!==g||(a.from.y!==a.to.y&&(v=v.concat(c),o.from=e.effects.setTransition(o,c,a.from.y,o.from),o.to=e.effects.setTransition(o,c,a.to.y,o.to)),a.from.x!==a.to.x&&(v=v.concat(d),o.from=e.effects.setTransition(o,d,a.from.x,o.from),o.to=e.effects.setTransition(o,d,a.to.x,o.to))),"content"!==g&&"both"!==g||a.from.y!==a.to.y&&(v=v.concat(u).concat(l),o.from=e.effects.setTransition(o,u,a.from.y,o.from),o.to=e.effects.setTransition(o,u,a.to.y,o.to)),e.effects.save(o,v),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),f&&(r=e.effects.getBaseline(f,n),o.from.top=(n.outerHeight-o.outerHeight())*r.y,o.from.left=(n.outerWidth-o.outerWidth())*r.x,o.to.top=(n.outerHeight-o.to.outerHeight)*r.y,o.to.left=(n.outerWidth-o.to.outerWidth)*r.x),o.css(o.from),"content"!==g&&"both"!==g||(c=c.concat(["marginTop","marginBottom"]).concat(u),d=d.concat(["marginLeft","marginRight"]),l=s.concat(c).concat(d),o.find("*[width]").each(function(){var i=e(this),n=i.height(),r=i.width(),o=i.outerHeight(),s=i.outerWidth();h&&e.effects.save(i,l),i.from={height:n*a.from.y,width:r*a.from.x,outerHeight:o*a.from.y,outerWidth:s*a.from.x},i.to={height:n*a.to.y,width:r*a.to.x,outerHeight:n*a.to.y,outerWidth:r*a.to.x},a.from.y!==a.to.y&&(i.from=e.effects.setTransition(i,c,a.from.y,i.from),i.to=e.effects.setTransition(i,c,a.to.y,i.to)),a.from.x!==a.to.x&&(i.from=e.effects.setTransition(i,d,a.from.x,i.from),i.to=e.effects.setTransition(i,d,a.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){h&&e.effects.restore(i,l)})})),o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===o.to.opacity&&o.css("opacity",o.from.opacity),"hide"===p&&o.hide(),e.effects.restore(o,v),h||("static"===m?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,i){var n=parseInt(i,10),r=e?o.to.left:o.to.top;return"auto"===i?r+"px":n+r+"px"})})),e.effects.removeWrapper(o),i()}})}}(jQuery),function(e,t){e.effects.effect.shake=function(t,i){var n,r=e(this),a=["position","top","bottom","left","right","height","width"],o=e.effects.setMode(r,t.mode||"effect"),s=t.direction||"left",l=t.distance||20,u=t.times||3,c=2*u+1,d=Math.round(t.duration/c),p="up"===s||"down"===s?"top":"left",h="up"===s||"left"===s,g={},f={},m={},v=r.queue(),b=v.length;for(e.effects.save(r,a),r.show(),e.effects.createWrapper(r),g[p]=(h?"-=":"+=")+l,f[p]=(h?"+=":"-=")+2*l,m[p]=(h?"-=":"+=")+2*l,r.animate(g,d,t.easing),n=1;n<u;n++)r.animate(f,d,t.easing).animate(m,d,t.easing);r.animate(f,d,t.easing).animate(g,d/2,t.easing).queue(function(){"hide"===o&&r.hide(),e.effects.restore(r,a),e.effects.removeWrapper(r),i()}),b>1&&v.splice.apply(v,[1,0].concat(v.splice(b,c+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.slide=function(t,i){var n,r=e(this),a=["position","top","bottom","left","right","width","height"],o=e.effects.setMode(r,t.mode||"show"),s="show"===o,l=t.direction||"left",u="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l,d={};e.effects.save(r,a),r.show(),n=t.distance||r["top"===u?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),s&&r.css(u,c?isNaN(n)?"-"+n:-n:n),d[u]=(s?c?"+=":"-=":c?"-=":"+=")+n,r.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&r.hide(),e.effects.restore(r,a),e.effects.removeWrapper(r),i()}})}}(jQuery),function(e,t){e.effects.effect.transfer=function(t,i){var n=e(this),r=e(t.to),a="fixed"===r.css("position"),o=e("body"),s=a?o.scrollTop():0,l=a?o.scrollLeft():0,u=r.offset(),c={top:u.top-s,left:u.left-l,height:r.innerHeight(),width:r.innerWidth()},d=n.offset(),p=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:d.top-s,left:d.left-l,height:n.innerHeight(),width:n.innerWidth(),position:a?"fixed":"absolute"}).animate(c,t.duration,t.easing,function(){p.remove(),i()})}}(jQuery),function(e,t){e.widget("ui.menu",{version:"1.10.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var i=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(t),i.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=e(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var i,n,r,a,o,s=!0;function l(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:s=!1,n=this.previousFilter||"",r=String.fromCharCode(t.keyCode),a=!1,clearTimeout(this.filterTimer),r===n?a=!0:r=n+r,o=new RegExp("^"+l(r),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())}),(i=a&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i).length||(r=String.fromCharCode(t.keyCode),o=new RegExp("^"+l(r),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())})),i.length?(this.focus(t,i),i.length>1?(this.previousFilter=r,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}s&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i=this.options.icons.submenu,n=this.element.find(this.options.menus);n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.prev("a"),r=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(r),t.attr("aria-labelledby",n.attr("id"))}),(t=n.add(this.element)).children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var i,n;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),n=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(i=t.children(".ui-menu")).length&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,r,a,o,s;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,r=t.offset().top-this.activeMenu.offset().top-i-n,a=this.activeMenu.scrollTop(),o=this.activeMenu.height(),s=t.height(),r<0?this.activeMenu.scrollTop(a+r):r+s>o&&this.activeMenu.scrollTop(a+r-o+s))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(t),this.activeMenu=n},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(i,n)},nextPage:function(t){var i,n,r;this.active?this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,r=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return(i=e(this)).offset().top-n-r<0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var i,n,r;this.active?this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,r=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return(i=e(this)).offset().top-n+r>0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)}})}(jQuery),function(e,t){e.ui=e.ui||{};var i,n=Math.max,r=Math.abs,a=Math.round,o=/left|center|right/,s=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,c=/%$/,d=e.fn.position;function p(e,t,i){return[parseFloat(e[0])*(c.test(e[0])?t/100:1),parseFloat(e[1])*(c.test(e[1])?i/100:1)]}function h(t,i){return parseInt(e.css(t,i),10)||0}e.position={scrollbarWidth:function(){if(void 0!==i)return i;var t,n,r=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=r.children()[0];return e("body").append(r),t=a.offsetWidth,r.css("overflow","scroll"),t===(n=a.offsetWidth)&&(n=r[0].clientWidth),r.remove(),i=t-n},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),n=t.isWindow?"":t.element.css("overflow-y"),r="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight?e.position.scrollbarWidth():0,height:r?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]);return{element:i,isWindow:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return d.apply(this,arguments);t=e.extend({},t);var i,c,g,f,m,v,b,y,x=e(t.of),C=e.position.getWithinInfo(t.within),_=e.position.getScrollInfo(C),w=(t.collision||"flip").split(" "),E={};return v=9===(y=(b=x)[0]).nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:e.isWindow(y)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:y.preventDefault?{width:0,height:0,offset:{top:y.pageY,left:y.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()},x[0].preventDefault&&(t.at="left top"),c=v.width,g=v.height,f=v.offset,m=e.extend({},f),e.each(["my","at"],function(){var e,i,n=(t[this]||"").split(" ");1===n.length&&(n=o.test(n[0])?n.concat(["center"]):s.test(n[0])?["center"].concat(n):["center","center"]),n[0]=o.test(n[0])?n[0]:"center",n[1]=s.test(n[1])?n[1]:"center",e=l.exec(n[0]),i=l.exec(n[1]),E[this]=[e?e[0]:0,i?i[0]:0],t[this]=[u.exec(n[0])[0],u.exec(n[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===t.at[0]?m.left+=c:"center"===t.at[0]&&(m.left+=c/2),"bottom"===t.at[1]?m.top+=g:"center"===t.at[1]&&(m.top+=g/2),i=p(E.at,c,g),m.left+=i[0],m.top+=i[1],this.each(function(){var o,s,l=e(this),u=l.outerWidth(),d=l.outerHeight(),v=h(this,"marginLeft"),b=h(this,"marginTop"),y=u+v+h(this,"marginRight")+_.width,T=d+b+h(this,"marginBottom")+_.height,z=e.extend({},m),R=p(E.my,l.outerWidth(),l.outerHeight());"right"===t.my[0]?z.left-=u:"center"===t.my[0]&&(z.left-=u/2),"bottom"===t.my[1]?z.top-=d:"center"===t.my[1]&&(z.top-=d/2),z.left+=R[0],z.top+=R[1],e.support.offsetFractions||(z.left=a(z.left),z.top=a(z.top)),o={marginLeft:v,marginTop:b},e.each(["left","top"],function(n,r){e.ui.position[w[n]]&&e.ui.position[w[n]][r](z,{targetWidth:c,targetHeight:g,elemWidth:u,elemHeight:d,collisionPosition:o,collisionWidth:y,collisionHeight:T,offset:[i[0]+R[0],i[1]+R[1]],my:t.my,at:t.at,within:C,elem:l})}),t.using&&(s=function(e){var i=f.left-z.left,a=i+c-u,o=f.top-z.top,s=o+g-d,p={target:{element:x,left:f.left,top:f.top,width:c,height:g},element:{element:l,left:z.left,top:z.top,width:u,height:d},horizontal:a<0?"left":i>0?"right":"center",vertical:s<0?"top":o>0?"bottom":"middle"};c<u&&r(i+a)<c&&(p.horizontal="center"),g<d&&r(o+s)<g&&(p.vertical="middle"),n(r(i),r(a))>n(r(o),r(s))?p.important="horizontal":p.important="vertical",t.using.call(this,e,p)}),l.offset(e.extend(z,{using:s}))})},e.ui.position={fit:{left:function(e,t){var i,r=t.within,a=r.isWindow?r.scrollLeft:r.offset.left,o=r.width,s=e.left-t.collisionPosition.marginLeft,l=a-s,u=s+t.collisionWidth-o-a;t.collisionWidth>o?l>0&&u<=0?(i=e.left+l+t.collisionWidth-o-a,e.left+=l-i):e.left=u>0&&l<=0?a:l>u?a+o-t.collisionWidth:a:l>0?e.left+=l:u>0?e.left-=u:e.left=n(e.left-s,e.left)},top:function(e,t){var i,r=t.within,a=r.isWindow?r.scrollTop:r.offset.top,o=t.within.height,s=e.top-t.collisionPosition.marginTop,l=a-s,u=s+t.collisionHeight-o-a;t.collisionHeight>o?l>0&&u<=0?(i=e.top+l+t.collisionHeight-o-a,e.top+=l-i):e.top=u>0&&l<=0?a:l>u?a+o-t.collisionHeight:a:l>0?e.top+=l:u>0?e.top-=u:e.top=n(e.top-s,e.top)}},flip:{left:function(e,t){var i,n,a=t.within,o=a.offset.left+a.scrollLeft,s=a.width,l=a.isWindow?a.scrollLeft:a.offset.left,u=e.left-t.collisionPosition.marginLeft,c=u-l,d=u+t.collisionWidth-s-l,p="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,h="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,g=-2*t.offset[0];c<0?((i=e.left+p+h+g+t.collisionWidth-s-o)<0||i<r(c))&&(e.left+=p+h+g):d>0&&((n=e.left-t.collisionPosition.marginLeft+p+h+g-l)>0||r(n)<d)&&(e.left+=p+h+g)},top:function(e,t){var i,n,a=t.within,o=a.offset.top+a.scrollTop,s=a.height,l=a.isWindow?a.scrollTop:a.offset.top,u=e.top-t.collisionPosition.marginTop,c=u-l,d=u+t.collisionHeight-s-l,p="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,h="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,g=-2*t.offset[1];c<0?(n=e.top+p+h+g+t.collisionHeight-s-o,e.top+p+h+g>c&&(n<0||n<r(c))&&(e.top+=p+h+g)):d>0&&(i=e.top-t.collisionPosition.marginTop+p+h+g-l,e.top+p+h+g>d&&(i>0||r(i)<d)&&(e.top+=p+h+g))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,n,r,a,o=document.getElementsByTagName("body")[0],s=document.createElement("div");for(a in t=document.createElement(o?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"}),n)t.style[a]=n[a];t.appendChild(s),(i=o||document.documentElement).insertBefore(t,i.firstChild),s.style.cssText="position: absolute; left: 10.7432222px;",r=e(s).offset().left,e.support.offsetFractions=r>10&&r<11,t.innerHTML="",i.removeChild(t)}()}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.10.2",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){if(void 0===e)return this.options.value;this.options.value=this._constrainedValue(e),this._refreshValue()},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=!1===e,"number"!=typeof e&&(e=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})}(jQuery),function(e,t){e.widget("ui.slider",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,n=this.options,r=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a=[];for(i=n.values&&n.values.length||1,r.length>i&&(r.slice(i).remove(),r=r.slice(0,i)),t=r.length;t<i;t++)a.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=r.add(e(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):this.range=e([])},_setupEvents:function(){var e=this.handles.add(this.range).filter("a");this._off(e),this._on(e,this._handleEvents),this._hoverable(e),this._focusable(e)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,n,r,a,o,s,l,u=this,c=this.options;return!c.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),r=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(n-u.values(t));(r>i||r===i&&(t===u._lastChangedValue||u.values(t)===c.min))&&(r=i,a=e(this),o=t)}),!1!==this._start(t,o)&&(this._mouseSliding=!0,this._handleIndex=o,a.addClass("ui-state-active").focus(),s=a.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-s.left-a.width()/2,top:t.pageY-s.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,r,a;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(n=i/t)>1&&(n=1),n<0&&(n=0),"vertical"===this.orientation&&(n=1-n),r=this._valueMax()-this._valueMin(),a=this._valueMin()+n*r,this._trimAlignValue(a)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var n,r,a;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&!0===this.options.range&&(0===t&&i>n||1===t&&i<n)&&(i=n),i!==this.values(t)&&((r=this.values())[t]=i,a=this._trigger("slide",e,{handle:this.handles[t],value:i,values:r}),n=this.values(t?0:1),!1!==a&&this.values(t,i,!0))):i!==this.value()&&!1!==(a=this._trigger("slide",e,{handle:this.handles[t],value:i}))&&this.value(i)},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var n,r,a;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,r=arguments[0],a=0;a<n.length;a+=1)n[a]=this._trimAlignValue(r[a]),this._change(null,a);this._refreshValue()},_setOption:function(t,i){var n,r=0;switch("range"===t&&!0===this.options.range&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(r=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;n<r;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,n,r,a,o=this.options.range,s=this.options,l=this,u=!this._animateOff&&s.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[u?"animate":"css"](c,s.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[u?"animate":"css"]({left:i+"%"},s.animate),1===n&&l.range[u?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:s.animate})):(0===n&&l.range.stop(1,1)[u?"animate":"css"]({bottom:i+"%"},s.animate),1===n&&l.range[u?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:s.animate}))),t=i}):(n=this.value(),r=this._valueMin(),a=this._valueMax(),i=a!==r?(n-r)/(a-r)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[u?"animate":"css"](c,s.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:i+"%"},s.animate),"max"===o&&"horizontal"===this.orientation&&this.range[u?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:s.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:i+"%"},s.animate),"max"===o&&"vertical"===this.orientation&&this.range[u?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:s.animate}))},_handleEvents:{keydown:function(t){var i,n,r,a=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),!1===this._start(t,a)))return}switch(r=this.options.step,i=n=this.options.values&&this.options.values.length?this.values(a):this.value(),t.keyCode){case e.ui.keyCode.HOME:n=this._valueMin();break;case e.ui.keyCode.END:n=this._valueMax();break;case e.ui.keyCode.PAGE_UP:n=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/5);break;case e.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/5);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;n=this._trimAlignValue(i+r);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;n=this._trimAlignValue(i-r)}this._slide(t,a,n)},click:function(e){e.preventDefault()},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.10.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,n){var r=i.attr(n);void 0!==r&&r.length&&(t[n]=r)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e))},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){var i;function n(){this.element[0]===this.document[0].activeElement||(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i}))}i=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),n.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,n.call(this)}),!1!==this._start(t)&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(e(t.currentTarget).hasClass("ui-state-active"))return!1!==this._start(t)&&void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,n=e.ui.keyCode;switch(t.keyCode){case n.UP:return this._repeat(null,1,t),!0;case n.DOWN:return this._repeat(null,-1,t),!0;case n.PAGE_UP:return this._repeat(null,i.page,t),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(e){return!(!this.spinning&&!1===this._trigger("start",e))&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",t,{value:i})||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,n=this.options;return i=e-(t=null!==n.min?n.min:0),e=t+(i=Math.round(i/n.step)*n.step),e=parseFloat(e.toFixed(this._precision())),null!==n.max&&e>n.max?n.max:null!==n.min&&e<n.min?n.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,void this.element.val(this._format(i))}"max"!==e&&"min"!==e&&"step"!==e||"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var i;""!==e&&null!==(i=this._parse(e))&&(t||(i=this._adjustValue(i)),e=this._format(i)),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){if(!arguments.length)return this._parse(this.element.val());t(this._value).call(this,e)},widget:function(){return this.uiSpinner}})}(jQuery),function(e,t){var i=0,n=/#.*$/;function r(e){return e.hash.length>1&&decodeURIComponent(e.href.replace(n,""))===decodeURIComponent(location.href.replace(n,""))}e.widget("ui.tabs",{version:"1.10.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(i.active):this.active=e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,n=location.hash.substring(1);return null===t&&(n&&this.tabs.each(function(i,r){if(e(r).attr("aria-controls")===n)return t=i,!1}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==t&&-1!==t||(t=!!this.tabs.length&&0)),!1!==t&&-1===(t=this.tabs.index(this.tabs.eq(t)))&&(t=!i&&0),!i&&!1===t&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),n=this.tabs.index(i),r=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:n++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:r=!1,n--;break;case e.ui.keyCode.END:n=this.anchors.length-1;break;case e.ui.keyCode.HOME:n=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n!==this.options.active&&n);default:return}t.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,r),t.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){var n=this.tabs.length-1;for(;-1!==e.inArray((t>n&&(t=0),t<0&&(t=n),t),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){"active"!==e?"disabled"!==e?(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||!1!==this.options.active||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t)):this._setupDisabled(t):this._activate(t)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+ ++i},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,n){var a,o,s,l=e(n).uniqueId().attr("id"),u=e(n).closest("li"),c=u.attr("aria-controls");r(n)?(a=n.hash,o=t.element.find(t._sanitizeSelector(a))):(a="#"+(s=t._tabId(u)),(o=t.element.find(a)).length||(o=t._createPanel(s)).insertAfter(t.panels[i-1]||t.tablist),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),c&&u.data("ui-tabs-aria-controls",c),u.attr({"aria-controls":a.substring(1),"aria-labelledby":l}),o.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,n=0;i=this.tabs[n];n++)!0===t||-1!==e.inArray(n,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,n=this.element.parent();"fill"===t?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,n=this.active,r=e(t.currentTarget).closest("li"),a=r[0]===n[0],o=a&&i.collapsible,s=o?e():this._getPanelForTab(r),l=n.length?this._getPanelForTab(n):e(),u={oldTab:n,oldPanel:l,newTab:o?e():r,newPanel:s};t.preventDefault(),r.hasClass("ui-state-disabled")||r.hasClass("ui-tabs-loading")||this.running||a&&!i.collapsible||!1===this._trigger("beforeActivate",t,u)||(i.active=!o&&this.tabs.index(r),this.active=a?e():r,this.xhr&&this.xhr.abort(),l.length||s.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),s.length&&this.load(this.tabs.index(r),t),this._toggle(t,u))},_toggle:function(t,i){var n=this,r=i.newPanel,a=i.oldPanel;function o(){n.running=!1,n._trigger("activate",t,i)}function s(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),r.length&&n.options.show?n._show(r,n.options.show,o):(r.show(),o())}this.running=!0,a.length&&this.options.hide?this._hide(a,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a.hide(),s()),a.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),r.length&&a.length?i.oldTab.attr("tabIndex",-1):r.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),r.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var i,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return!1===t?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var i=this.options.disabled;!1!==i&&(void 0===t?i=!1:(t=this._getIndex(t),i=e.isArray(i)?e.map(i,function(e){return e!==t?e:null}):e.map(this.tabs,function(e,i){return i!==t?i:null})),this._setupDisabled(i))},disable:function(t){var i=this.options.disabled;if(!0!==i){if(void 0===t)i=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,i))return;i=e.isArray(i)?e.merge([t],i).sort():[t]}this._setupDisabled(i)}},load:function(t,i){t=this._getIndex(t);var n=this,a=this.tabs.eq(t),o=a.find(".ui-tabs-anchor"),s=this._getPanelForTab(a),l={tab:a,panel:s};r(o[0])||(this.xhr=e.ajax(this._ajaxSettings(o,i,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(a.addClass("ui-tabs-loading"),s.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){s.html(e),n._trigger("load",i,l)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&n.panels.stop(!1,!0),a.removeClass("ui-tabs-loading"),s.removeAttr("aria-busy"),e===n.xhr&&delete n.xhr},1)})))},_ajaxSettings:function(t,i,n){var r=this;return{url:t.attr("href"),beforeSend:function(t,a){return r._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:a},n))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(jQuery),function(e){var t=0;e.widget("ui.tooltip",{version:"1.10.2",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,i){var n=this;if("disabled"===t)return this[i?"_disable":"_enable"](),void(this.options[t]=i);this._super(t,i),"content"===t&&e.each(this.tooltips,function(e,t){n._updateContent(t)})},_disable:function(){var t=this;e.each(this.tooltips,function(i,n){var r=e.Event("blur");r.target=r.currentTarget=n[0],t.close(r,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,n=e(t?t.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&n.parents().each(function(){var t,n=e(this);n.data("ui-tooltip-open")&&((t=e.Event("blur")).target=t.currentTarget=this,i.close(t,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))}),this._updateContent(n,t))},_updateContent:function(e,t){var i,n=this.options.content,r=this,a=t?t.type:null;if("string"==typeof n)return this._open(t,e,n);(i=n.call(e[0],function(i){e.data("ui-tooltip-open")&&r._delay(function(){t&&(t.type=a),this._open(t,e,i)})}))&&this._open(t,e,i)},_open:function(t,i,n){var r,a,o,s,l,u,c=e.extend({},this.options.position);n&&((r=this._find(i)).length?r.find(".ui-tooltip-content").html(n):(i.is("[title]")&&(t&&"mouseover"===t.type?i.attr("title",""):i.removeAttr("title")),r=this._tooltip(i),s=i,l=r.attr("id"),(u=(s.attr("aria-describedby")||"").split(/\s+/)).push(l),s.data("ui-tooltip-id",l).attr("aria-describedby",e.trim(u.join(" "))),r.find(".ui-tooltip-content").html(n),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:d}),d(t)):r.position(e.extend({of:i},this.options.position)),r.hide(),this._show(r,this.options.show),this.options.show&&this.options.show.delay&&(o=this.delayedShow=setInterval(function(){r.is(":visible")&&(d(c.of),clearInterval(o))},e.fx.interval)),this._trigger("open",t,{tooltip:r}),a={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=i[0],this.close(n,!0)}},remove:function(){this._removeTooltip(r)}},t&&"mouseover"!==t.type||(a.mouseleave="close"),t&&"focusin"!==t.type||(a.focusout="close"),this._on(!0,i,a)));function d(e){c.of=e,r.is(":hidden")||r.position(c)}},close:function(t){var i,n,r,a,o=this,s=e(t?t.currentTarget:this.element),l=this._find(s);this.closing||(clearInterval(this.delayedShow),s.data("ui-tooltip-title")&&s.attr("title",s.data("ui-tooltip-title")),n=(i=s).data("ui-tooltip-id"),r=(i.attr("aria-describedby")||"").split(/\s+/),-1!==(a=e.inArray(n,r))&&r.splice(a,1),i.removeData("ui-tooltip-id"),(r=e.trim(r.join(" ")))?i.attr("aria-describedby",r):i.removeAttr("aria-describedby"),l.stop(!0),this._hide(l,this.options.hide,function(){o._removeTooltip(e(this))}),s.removeData("ui-tooltip-open"),this._off(s,"mouseleave focusout keyup"),s[0]!==this.element[0]&&this._off(s,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete o.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:l}),this.closing=!1)},_tooltip:function(i){var n="ui-tooltip-"+t++,r=e("<div>").attr({id:n,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(r),r.appendTo(this.document[0].body),this.tooltips[n]=i,r},_find:function(t){var i=t.data("ui-tooltip-id");return i?e("#"+i):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,n){var r=e.Event("blur");r.target=r.currentTarget=n[0],t.close(r,!0),e("#"+i).remove(),n.data("ui-tooltip-title")&&(n.attr("title",n.data("ui-tooltip-title")),n.removeData("ui-tooltip-title"))})}})}(jQuery);var object=function(){function e(){}return function(t){return e.prototype=t,new e}}();$.widget("ui.widget",$.widget);var OVERRIDE=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;$.ui.widget.subclass=function e(t){$.widget(t,$.widget),t=t.split(".");var i=$[t[0]][t[1]],n=this.prototype,r={namespace:i.prototype.namespace,widgetName:i.prototype.widgetName,widgetEventPrefix:i.prototype.widgetEventPrefix,widgetBaseClass:i.prototype.widgetBaseClass},a=$.makeArray(arguments),o=a[0]=i.prototype=object(n);$.extend.apply(null,a),i.subclass=e,$.extend(!0,o,r);var s=o._init;for(key in o._init=function(){this.element.data(i.prototype.widgetName.toLowerCase(),this),this.element.data(i.prototype.widgetName,this),o.hasOwnProperty("_init")&&s.apply(this)},o.bindEvent=function(e,t){this.element.bind((this.widgetEventPrefix+e).toLowerCase(),t)},o)if(o.hasOwnProperty(key))switch(key){case"_create":var l=o._create;o._create=function(){n._create.apply(this),l.apply(this)};break;case"_init":var u=o._init;o._init=function(){n._init.apply(this),u.apply(this)};break;case"destroy":var c=o.destroy;o.destroy=function(){this.element.removeData(i.prototype.widgetName.toLowerCase()),this.element.removeData(i.prototype.widgetName),c.apply(this),n.destroy.apply(this)};break;case"options":var d=o.options;o.options=$.extend({},n.options,d);break;default:$.isFunction(o[key])&&$.isFunction(n[key])&&OVERRIDE.test(o[key])&&(o[key]=function(e,t){return function(){var i=this._super;this._super=n[e];try{var r=t.apply(this,arguments)}finally{this._super=i}return r}}(key,o[key]))}},function(e){e.support.cors=!0;e.ajax;function t(arguments){return{url:arguments[0],data:arguments.length>=2?arguments[1]:void 0,success:arguments.length>=3?arguments[2]:void 0,error:arguments.length>=4?arguments[3]:void 0}}function i(t){var i={dataType:"json"};return 1===arguments.length&&"string"!=typeof arguments[0]?"url"in(i=e.extend(i,t))&&("data"in i&&("object"==typeof i.data&&i.data.guid?i.url=i.url.replace("{guid}",i.data.guid):i.url=n(i.url,i.data)),bizagi.override.forceBatchRequest&&i.url.indexOf("Api/")>-1&&-1==i.url.indexOf("Api/Batch")&&(i.batchRequest=!0,i.fromRestLib=!0)):(e.isFunction(data)&&(error=success,success=data,data=null),t=n(t,data),i=e.extend(i,{url:t,data:data,cache:!0,success:function(e,t,n){success&&success.call(i.context||i,e,r(n),n)},error:function(e){error&&error.call(i.context||i,e,r(e))}})),i}function n(e,t){var i,n,r;for(i in t)r=t[i],(n=e.replace("{"+i+"}",r))!=e&&(e=n,delete t[i]);return e}function r(t){var i={},n=e.trim(t.getAllResponseHeaders());return e.each(n.split("\n"),function(t,n){if(n.length){var r=n.match(/^([\w\-]+):(.*)/);3===r.length&&(i[r[1]]=e.trim(r[2]))}}),t.responseHeaders=i,i}e.restSetup={methodParam:"_method",useMethodOverride:!1,verbs:{create:"POST",update:"PUT",destroy:"DELETE"}},e(document).ready(function(){e.restSetup.csrfParam=e.restSetup.csrfParam||e("meta[name=csrf-param]").attr("content"),e.restSetup.csrfToken=e.restSetup.csrfToken||e("meta[name=csrf-token]").attr("content")}),e.read=function(n){n.url||(n=t(arguments));var r=i(n);return r.type="GET",r.crossDomain="true",r.xhrFields={withCredentials:!0},e.ajax(r)},e.create=function(n){n.url||(n=t(arguments));var r=i(n);return r.type=e.restSetup.verbs.create,r.crossDomain="true",r.xhrFields={withCredentials:!0},e.ajax(r)},e.update=function(n){n.url||(n=t(arguments));var r=i(n);return r.type=e.restSetup.verbs.update,r.crossDomain="true",r.xhrFields={withCredentials:!0},e.ajax(r)},e.destroy=function(n){n.url||(n=t(arguments));var r=i(n);return r.type=e.restSetup.verbs.destroy,r.crossDomain="true",r.xhrFields={withCredentials:!0},e.ajax(r)}}(jQuery),function(e){e.widget("ui.optiongroup",{_create:function(){var t=this,i=this.element,n=(t.options,e("input[type=radio]",i));e("label",i).each(function(i){var r=e(this),a=r.text(),o=e("input[type=radio]",r);r.attr("for")==o.attr("id")?(o.detach(),r.wrap('<div class="ui-radio"></div>'),o.insertBefore(r),r.text(a),r.hover(function(){e(this).addClass("ui-radio-state-hover")},function(){e(this).removeClass("ui-radio-state-hover")}).click(function(){o[0].checked;o[0].checked=!o[0].checked}),o.bind("update",function(){e(this).is(":checked")?(n.each(function(){e(this).next().removeClass("ui-radio-state-checked")}),r.addClass("ui-radio-state-checked")):r.removeClass("ui-radio-state-checked ui-radio-state-hover ui-radio-state-highlight"),e(this).is(":checked")&&t._trigger("change",window.event,{value:e(this).val(),text:r.text()})}).click(function(){e(this).trigger("update")}).focus(function(){r.addClass("ui-radio-state-highlight")}).blur(function(){r.removeClass("ui-radio-state-highlight")})):alert("label and input element are not related in label:"+r.attr("id"))})},setValue:function(t){var i=this.element,n=(this.options,e("input[type=radio]",i));e.each(n,function(i){var n=e(this);n.val()==t&&(n.prop("checked",!0),n.trigger("update"))})}}),e.extend(e.ui.optionGroup,{version:"@VERSION",eventPrefix:"optiongroup"})}(jQuery),String.prototype.replaceMultiple=function(e){var t=this;e=e||{};return $.each(e,function(i,n){t=t.replace(new RegExp("\\{"+i+"\\}","gm"),e[i])}),t},Math.guid=function(){var e=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:3&i|8).toString(16)})};var batchRequest=function(e){var t=this;return t.intervalLap=400,t.queueOfRequest=[],t.queueToDistpatch=[],t.options={boundary:"batch_"+Math.guid(),newLine:"\r\n",endPoint:"/"},t.options=$.extend(t.options,e),t.addBatchRequest=function(e,i,n,r){var a=Math.guid();i.fromRestLib&&(i=i.data),t.queueOfRequest.push({guid:a,options:e,originalOptions:i,deferred:n,jqXHR:r})},t.getHeadersToString=function(e){e=e||{};var i="";return $.each(e,function(e,n){i+=e+": "+n+t.options.newLine}),i},t.parseUrl=function(e){return e=(e=e||"").replace("./","/"),e=(e=location.pathname.split("/").reduce(function(e,t,i,n){return i+1<n.length&&e.push(t),e},[]).join("/")+e).replace("//","/")},t.tryParseURL=function(e,t){try{return t.url=new URL(e),!0}catch(e){return!1}},t.getRequestHeaders=function(e){var i="",n={url:void 0};t.tryParseURL(e.originalOptions.url,n)&&(e.originalOptions.url=e.originalOptions.url.replace(n.url.origin,""));var r=JSON.stringify(e.originalOptions);'""'==r&&(r="");var a=Array("*","/","*").join("");i+="--{boundary}{newLine}",i+="Content-Type: {contentType}{newLine}{newLine}",i+="{method} {url} {protocol}{newLine}",i+="Host: {host}{newLine}",i+="X-Request-ID: {requestId}{newLine}",i+="{originalHeaders}",i+="content-length: {contentLength}{newLine}",i+="{newLine}{data}{newLine}";var o={newLine:t.options.newLine,boundary:t.options.boundary,contentType:"application/http; msgtype=request",method:e.options.type,url:n.url?e.options.url.replace(n.url.origin,""):t.parseUrl(e.options.url),protocol:"HTTP/1.1",accept:e.options.headers&&e.options.headers.Accept?e.options.headers.Accept:a,requestId:Math.guid(),originalHeaders:t.getHeadersToString(e.options.headers),contentLength:r.length,host:n.url?n.url.host:location.host,data:r};return i=i.replaceMultiple(o)},t.buildBatchRequest=function(){for(var e,i="";e=t.queueOfRequest.shift();)t.queueToDistpatch.push(e),i+=t.getRequestHeaders(e);return i&&(i+="--{boundary}--{newLine}".replaceMultiple({newLine:t.options.newLine,boundary:t.options.boundary})),i},t.parseResponse=function(e){var t,i;return{status:(t=e,i=/(HTTP\/1\.1) (\d{3}) (\w{1,})/g.exec(t),{code:i[2],codeMessage:i[3]}),headers:function(e){for(var t,i=/([A-Z]{1}[\w|-]{1,}):[ \t]*([^\r\n]*)$/gm,n={};t=i.exec(e);)n[t[1].toLowerCase()]=t[2];return n}(e),data:function(e){for(var t,i={},n=e.split(/^\s*$/gm),r=n.length-1;r>0;r--)try{""==(t=bizagi.util.trim(n[r]))||"["!=t.charAt(0)&&"{"!=t.charAt(0)||(JSON.parse(t),i=t)}catch(e){}return i}(e)}},t.processResponses=function(e,i){var n,r=[],a=e.split(i);for(a.shift(),a.pop();n=a.shift();)r.push(t.parseResponse(n));return r},t.getBoundary=function(e){var t=e.getResponseHeader("Content-Type"),i=/boundary=(.*)/g.exec(t);return"--"+(i=(i=i.length>0?i[1]:"").replace(/\"/g,""))},t.execute=function(){var e=t.buildBatchRequest();e&&$.when($.ajax(t.options.endPoint,{method:"POST",contentType:'multipart/mixed; boundary="'+t.options.boundary+'"',data:e})).done(function(e,i,n){for(var r,a=t.getBoundary(n),o=t.processResponses(e,a);r=o.shift();){var s,l,u=t.queueToDistpatch.shift();try{s="function"==typeof u.options.converters["text "+u.options.dataType]?u.options.converters["text "+u.options.dataType]:u.options.converters["* text"],l=s(r.data)}catch(e){l=r.data}switch(u.jqXHR.status=parseInt(r.status.code),r.status.code){case"200":case"201":u.jqXHR.getAllResponseHeaders=function(){return t.getHeadersToString(u.options.headers)},u.jqXHR.getResponseHeader=function(e){return u.options.headers[e]},u.deferred.resolve(l,i,u.jqXHR);break;case"400":case"401":case"404":case"500":u.deferred.reject(u.jqXHR,r.status.code,l);break;default:u.deferred.reject("Status code "+r.status.code+" is unrecognized")}}})},t.stop=function(){window.clearInterval(t.interval)},window.setInterval(function(){t.queueOfRequest&&(t.execute(),t.options.boundary="batch_"+Math.guid())},t.intervalLap),{add:t.addBatchRequest,execute:t.execute,getInterval:t.interval,stop:t.stop}},jqOAuth=function(e){if(this.options={},this.intercept=!1,this.refreshing=!1,this.buffer=[],this.currentRequests=[],this._resetOptions(),this._setupInterceptor(),$.extend(this.options,e),this._hasStoredData()&&this.hasAccessToken()){var t=this.data;this.login(t.access_token,t.refresh_token)}void 0!==e.csrfToken&&null!==e.csrfToken&&this._setCsrfHeader()};Object.defineProperty(jqOAuth.prototype,"data",{get:function(){var e=localStorage.getItem(this.options.tokenName);if(null!=e){var t=JSON.parse(e);return{access_token:t.access_token,refresh_token:t.refresh_token}}return null},set:function(e){null!==e.access_token&&void 0!==e.access_token&&null!==e.refresh_token&&void 0!==e.refresh_token?localStorage.setItem(this.options.tokenName,JSON.stringify(e)):console.log("access & refresh token required")}}),jqOAuth.prototype.getAccessToken=function(){return this.data.access_token},jqOAuth.prototype.getRefreshToken=function(){return this.data.refresh_token},jqOAuth.prototype.hasAccessToken=function(){return null!==this.data&&null!==this.data.access_token},jqOAuth.prototype.logout=function(){this._removeStorage(),this._deactivateInterceptor(),this._removeAjaxHeader("Authorization"),this._fireEvent("logout")},jqOAuth.prototype.login=function(e,t){this.setAccessToken(e,t),this._activateInterceptor(),this._fireEvent("login")},jqOAuth.prototype.setAccessToken=function(e,t){this.data={access_token:e,refresh_token:t},this._setAuthorizationHeader()},jqOAuth.prototype.setCsrfToken=function(e){this.options.csrfToken=e,this._setCsrfHeader()},jqOAuth.prototype._activateInterceptor=function(){this.intercept=!0},jqOAuth.prototype._addToBuffer=function(e,t){this.buffer.push({deferred:t,settings:e})},jqOAuth.prototype._clearBuffer=function(){this.buffer=[]},jqOAuth.prototype._deactivateInterceptor=function(){this.intercept=!1},jqOAuth.prototype._fireBuffer=function(){for(var e,t=this,i=[],n=0,r=this.buffer.length;n<r;n++)e=this.buffer[n].deferred,this.buffer[n].settings.refreshRetry=!0,this.buffer[n].settings.headers.Authorization=$.ajaxSettings.headers.Authorization,i.push($.ajax(this.buffer[n].settings).then(e.resolve,e.reject));this._clearBuffer(),$.when.apply($,i).done(function(){t._setRefreshingFlag(!1)}).fail(function(){t._setRefreshingFlag(!1),t.logout()})},jqOAuth.prototype._fireEvent=function(e){if(this._hasEvent(e))return this.options.events[e]()},jqOAuth.prototype._hasEvent=function(e){return void 0!==this.options.events[e]&&"function"==typeof this.options.events[e]},jqOAuth.prototype._hasStoredData=function(){return null!==this.user},jqOAuth.prototype._isAjaxHeadersInitialized=function(){return void 0!==$.ajaxSettings.headers},jqOAuth.prototype._removeAjaxHeader=function(e){if(!this._isAjaxHeadersInitialized())return!0;$.ajaxSettings.headers[e]=void 0},jqOAuth.prototype._removeAllAjaxHeaders=function(){this._removeAjaxHeader("Authorization"),this._removeAjaxHeader("X-CSRF-Token")},jqOAuth.prototype._removeStorage=function(){localStorage.removeItem(this.options.tokenName)},jqOAuth.prototype._resetOptions=function(){this.options={bufferInterval:25,bufferWaitLimit:500,csrfToken:null,events:{},tokenName:"jquery.oauth"},this._removeAllAjaxHeaders()},jqOAuth.prototype._setAjaxHeader=function(e,t){this._isAjaxHeadersInitialized()||($.ajaxSettings.headers={}),$.ajaxSettings.headers[e]=t},jqOAuth.prototype._setAuthorizationHeader=function(){this._setAjaxHeader("Authorization","Bearer "+this.data.access_token)},jqOAuth.prototype._setCsrfHeader=function(){this._setAjaxHeader("X-CSRF-Token",this.options.csrfToken)},jqOAuth.prototype._setRefreshingFlag=function(e){this.refreshing=e},jqOAuth.prototype._setupInterceptor=function(){var e=this;$.ajaxPrefilter(function(t,i,n){if(!0!==t.refreshRetry){var r=$.Deferred();return e.currentRequests.push(t.url),n.always(function(){e.currentRequests.splice($.inArray(t.url,e.currentRequests),1)}),n.done(r.resolve),n.fail(function(){var i=Array.prototype.slice.call(arguments);e.intercept&&401===n.status&&e._hasEvent("tokenExpiration")?(e._addToBuffer(t,r),e.refreshing||(e._setRefreshingFlag(!0),e._fireEvent("tokenExpiration").done(function(){var t=0;e.interval=setInterval(function(){t+=e.options.bufferInterval,(0===e.currentRequests.length||t>=e.options.bufferWaitLimit)&&(clearInterval(e.interval),e._fireBuffer())},e.options.bufferInterval)}).fail(function(){e.logout()}))):r.rejectWith(n,i)}),r.promise(n)}})},bizagi.jqxhrList=function(){var e=this;return e._bufferRendering=[],e._intercept=!1,{intercept:e._intercept,add:function(t){t.id&&t.source&&t.url&&t.req&&e._bufferRendering.push(t)},delete:function(t){e._bufferRendering=e._bufferRendering.filter(function(e){return e.id!==t})},abortAll:function(t){$.each(e._bufferRendering,function(e,i){i.source===t&&i.req.abort()})}}}(),$.ajaxPrefilter(function(e,t,i){if(bizagi.jqxhrList.intercept&&e.interceptor&&e.interceptor.intercept){var n=Math.guid();bizagi.jqxhrList.add({id:n,source:e.interceptor.source,url:e.url,req:i}),i.always(function(){bizagi.jqxhrList.delete(n)})}});var bizagiConfig=bizagiConfig||{};function getMessageFromResultObject(e){return(e.code&&"UNKNOWN_ERROR"!=e.code?e.status+": ":"")+(e.message?""+e.message:"")}bizagi=void 0!==bizagi?bizagi:{},bizagi.services=void 0!==bizagi.services?bizagi.services:{},bizagi.services.ajax=void 0!==bizagi.services.ajax?bizagi.services.ajax:{},bizagi.log=bizagi.log||new Function,bizagi.assert=bizagi.assert||new Function,bizagi.services.ajax.useAbsolutePath="undefined"!=typeof BIZAGI_USE_ABSOLUTE_PATH&&BIZAGI_USE_ABSOLUTE_PATH,bizagi.services.ajax.pathToBase=bizagi.services.ajax.useAbsolutePath?bizagi.loader.getLocationPrefix():"undefined"!=typeof BIZAGI_PATH_TO_BASE?BIZAGI_PATH_TO_BASE:"",bizagi.services.ajax.loginPage=bizagi.services.ajax.pathToBase||"default.htm",bizagi.services.ajax.logoutPage="logout.html",bizagi.services.ajax.errorPage=bizagi.services.ajax.pathToBase+"error.html",bizagi.services.ajax.logEnabled=!0,bizagi.services.ajax.logSuccess=!0,bizagi.services.ajax.logSubmits=!0,bizagi.services.ajax.logFail=!0,bizagi.services.ajax.batch={},bizagi.services.ajax.batchCount=0,bizagi.services.ajax.batchTimer=100,bizagi.services.ajax.batchTimeoutInstance=null,bizagiConfig.proxyPrefix=bizagiConfig.proxyPrefix?bizagiConfig.proxyPrefix:"undefined"!=typeof BIZAGI_PROXY_PREFIX?BIZAGI_PROXY_PREFIX:"",bizagi.services.batchRequest=new batchRequest({endPoint:bizagiConfig.proxyPrefix+"Api/Batch"}),bizagi.services.redirectToLoginPage=function(){"string"==typeof bizagi.services.ajax.loginPage?(sessionStorage.setItem("currentRedirectUrl",window.location.href),sessionStorage.removeItem("bizagiAuthentication"),"true"!=localStorage.getItem("clientLog")&&(window.location=bizagi.services.ajax.loginPage)):bizagi.services.ajax.loginPage()},bizagi.services.redirectToLogoutPage=function(){window.parent&&window.parent.bizagi&&window.location.href!=window.parent.location.href&&window.top.location.reload(),window.location=bizagi.services.ajax.logoutPage+"?userIdentity="+sessionStorage.getItem("userIdentity")+"&rnd="+bizagi.util.randomNumber()+"&post_logout_redirect_uri="+bizagiConfig.applicationUrl},$.ajaxTransport("json",function(e,t,i){if(bizagi.override.enableBatchRequest&&e.batchRequest)return{send:function(t,i){e.headers=t},abort:function(){}}}),$.ajaxTransport("+binary",function(e,t,i){if(window.FormData&&(e.dataType&&"binary"==e.dataType||e.data&&(window.ArrayBuffer&&e.data instanceof ArrayBuffer||window.Blob&&e.data instanceof Blob)))return{send:function(t,i){var n=new XMLHttpRequest,r=e.url,a=e.type,o=e.async||!0,s=e.responseType||"blob",l=e.data||null,u=e.username||null,c=e.password||null;for(var d in n.addEventListener("load",function(){var t={};t[e.dataType]=n.response,i(n.status,n.statusText,t,n.getAllResponseHeaders())}),n.open(a,r,o,u,c),t)n.setRequestHeader(d,t[d]);n.responseType=s,"blob"!==n.responseType&&"arraybuffer"!==n.responseType&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.send(l)},abort:function(){i.abort()}}}),$.ajaxPrefilter(function(e,t,i){if(e=e||{},bizagi.override.enableBatchRequest&&e.batchRequest&&bizagi.services.batchRequest){var n=$.Deferred();n.promise(i),bizagi.services.batchRequest.add(e,t,n,i)}}),$.ajaxPrefilter("*",function(e,t,i){"function"==typeof bizagi.cookie&&null!=bizagi.cookie(".BIZCSRF")&&-1==e.url.indexOf("tmpl.html")&&i.setRequestHeader("XSRF-TOKEN",bizagi.cookie(".BIZCSRF"));var n=void 0!==e.rpcEnabled?e.rpcEnabled:bizagi.services.ajax.rpcEnabled;if(e.triggerBatch||!n){var r=0==e.url.indexOf("http")?e.url:bizagi.services.ajax.pathToBase+e.url;e.url=r,"json"!=e.dataType||e.cache||(e.cache=!1),bizagi.services.ajax.logEnabled&&(bizagi.services.ajax.logSubmits&&-1==r.indexOf("tmpl")&&-1==r.indexOf("resources.json")&&bizagi.log("Sending data to "+r,e.data,"success"),1==e.crossDomain&&(e.xhrFields={withCredentials:!0}),i.done(function(e){if(bizagi.services.ajax.logSuccess&&-1==r.indexOf("tmpl")&&-1==r.indexOf("resources.json")&&bizagi.log(r+" succeded",e,"success"),bizagi.menuSecurity&&!bizagi.isMobileDevice())try{bizagi.injector.get("sessionTimeOutService").keepSessionOpen(!0)}catch(e){}}).fail(function(t,i,n){bizagi.log("Sent data to"+r,e.data,"error"),bizagi.services.ajax.logFail&&("object"==typeof n&&"SyntaxError"==n.name?bizagi.log(r+" failed - syntax error",arguments[0].responseText,"error"):bizagi.log(r+" failed",n,"error"))}))}}),bizagi.services.ajax.parseJSON=function(e){var t={};e=(e=e||"{}").replace(/(\r\n|\n|\r)/gm,"");try{t=$.parseJSON(e)}catch(i){try{t=$.parseJSON(e.replace(/\x1d/g,"."))}catch(n){t.type="error",t.code=i.errorCode,t.message=e,t.message.toUpperCase().indexOf("401 - UNAUTHORIZED")>0&&(t.http_status_code=401)}}if(t.type&&"error"==t.type||t.status&&"error"==t.status||t.http_status_code&&401==t.http_status_code){if("AUTH_ERROR"==t.code||"AUTHENTICATION_ERROR"==t.code||"AUTHENTICATION_ERROR"==t.message||401==t.http_status_code)bizagi.iframeCommunicator&&bizagi.iframeCommunicator.trigger("authentication-error"),bizagi.services.redirectToLoginPage();else if("FED_AUTHENTICATION_ERROR"==t.code)"string"==typeof bizagi.services.ajax.loginPage?(sessionStorage.setItem("FED_AUTHENTICATION_ERROR",!0),window.location=t.message):bizagi.services.ajax.loginPage();else if("AUTHENTICATION_USER_NOT_FOUND"==t.code)window.location=bizagi.services.ajax.errorPage+"?message="+t.message+"&type="+t.type;else if(t.http_status_code&&401==t.http_status_code){var i=t.code?t.code:t.error?t.error:"AuthenticationError",n=t.message?t.message:t.error_description?t.error_description:"Authentication Configuration Error";window.location=bizagi.services.ajax.errorPage+"?message="+n+"&type="+i}"licenseError"==t.code&&(window.location=bizagi.services.ajax.errorPage+"?message="+t.message+"&type="+t.type),jQuery.error(getMessageFromResultObject(t))}else"Unauthorized"==t.status&&jQuery.error(getMessageFromResultObject(t));return localStorage.setItem("clientLog","false"),t},$.ajaxSetup({converters:{"text json":bizagi.services.ajax.parseJSON},beforeSend:function(e,t){"json"!=t.dataType||t.batchRequest||(e._loading=!0,bizagi&&bizagi.loading&&bizagi.loading.start())},complete:function(e){if(e._loading&&bizagi&&bizagi.loading&&bizagi.loading.stop(),401===e.status){if(e.responseJSON&&"implicitPrincipalInjection"===e.responseJSON.validationMethod)return;bizagi.services.redirectToLoginPage()}else 503===e.status&&"undefined"==typeof cordova&&bizagi.loader.startPageMaintenance()}}),bizagi.enableOauth=function(){if(void 0!==jqOAuth&&bizagi.isOAuth2Enabled()){$.ajaxSetup({converters:{"text json":function(e){var t={};if("string"!=typeof(e=e||"{}"))return e;e=e.replace(/(\r\n|\n|\r)/gm,"");try{t=$.parseJSON(e)}catch(i){try{t=$.parseJSON(e.replace(/\x1d/g,"."))}catch(n){t.type="error",t.code=i.errorCode,t.message=e}}if(t.type&&"error"==t.type||t.status&&"error"==t.status){var i=(t.code&&"UNKNOWN_ERROR"!=t.code?t.code+": ":"")+(t.message?""+t.message:"");jQuery.error(i)}return localStorage.setItem("clientLog","false"),t}},beforeSend:function(e,t){"json"!=t.dataType||t.batchRequest||(e._loading=!0,bizagi&&bizagi.loading&&bizagi.loading.start())},complete:function(e){e._loading&&bizagi&&bizagi.loading&&bizagi.loading.stop(),401!==e.status||!e.responseJSON||e.responseJSON.validationMethod}});var e=btoa("2a80addc628db6f12788ed842f873260066c9d6c"+":"+"672b11ff612225ff018b87252d8d3a1116ecc574");bizagi.authentication=bizagi.authentication||{},bizagi.authentication.oauth=new jqOAuth({events:{logout:function(){},login:function(){},tokenExpiration:function(){var t=bizagi.getNativeComponent();if(bizagi.util.isNativePluginSupported()){var i=$.Deferred();return bizagiapp.setAccessToken(bizagi.authentication.oauth.getAccessToken(),bizagi.authentication.oauth.getRefreshToken(),t,function(e){var t=jQuery.parseJSON(e);bizagi.authentication.oauth.setAccessToken(t.accessToken,t.refreshToken),i.resolve()}),i.promise()}return $.ajax({type:"POST",url:BIZAGI_PROXY_PREFIX+"oauth2/server/token",headers:{Authorization:"Basic "+e},data:{grant_type:"refresh_token",scope:"login api",refresh_token:bizagi.authentication.oauth.getRefreshToken()}}).then(function(e){bizagi.authentication.oauth.setAccessToken(e.access_token,e.refresh_token)})}}}),bizagi.authentication.resetToken=function(e,t){this.oauth.setAccessToken(e,t),bizagi.util.isNativePluginSupported()&&bizagiapp.setAccessToken(e,t)}}},bizagi.enableOauth(),void 0!==jQuery.browser&&jQuery.browser.msie&&window.XDomainRequest&&(7==document.documentMode||8==document.documentMode||9==document.documentMode)&&(jQuery.support.cors=!0),$.Class.extend("bizagi.services.service",{},{init:function(){},getServerResourceDictionary:function(){var e="";void 0!==bizagiConfig&&bizagiConfig.proxyPrefix?e=bizagiConfig.proxyPrefix:"undefined"!=typeof BIZAGI_PROXY_PREFIX&&(e=BIZAGI_PROXY_PREFIX);var t="undefined"==typeof BIZAGI_LANGUAGE?bizagi.language:BIZAGI_LANGUAGE;return $.ajax({url:e+"Rest/Multilanguage/Client?cultureName="+t+"&version="+bizagi.loader.version,rpcEnabled:!1,cache:!0,dataType:"json",async:!0})},getResourceDictionary:function(e){return $.ajax({url:e,rpcEnabled:!1,dataType:"json",async:!0})}}),$.Class.extend("bizagi.templates.services.service",{customTemplateFile:bizagi.loader.getResource("tmpl","bizagi.overrides."+bizagi.detectDevice()+".custom.templates"),cachedTemplates:{},customTemplates:{}},{init:function(e){this.localization=e,this.cssRegex=/{{css "(.+)"}}/g,this.loadingFileDeferred={}},loadCustomTemplates:function(){var e=this,t=new $.Deferred;return $.when(this.getTemplateFile(this.Class.customTemplateFile)).done(function(i){var n=$("<div />").html(i),r=$("script",n);$.each(r,function(t,i){i=$(i),e.Class.customTemplates[i.attr("id")]=i.html()}),t.resolve()}),t.promise()},getTemplate:function(e){var t=!1;if(e=(e=e.replace(/([^#]*#)([^#]*#)([^#]*)/g,"$1$3")).replace(/([a-zA-Z_\/.-=]*)#([a-zA-Z_\/.-]*)\?(build=[a-zA-Z0-9.-]*)/g,"$1?$3#$2"),bizagi.enableCustomizations){var i=this.getHash(e);this.Class.customTemplates[i]&&(t=!0)}return t||"release"!==bizagi.loader.environment?this.internalGetTemplate(e).pipe(function(t){return $.template("#"+e,t)}):this.getTemplateForRelease(e).pipe(function(t){return $.template("#"+e,t)})},getTemplateWidget:function(e){var t=!1;if(e=(e=e.replace(/([^#]*#)([^#]*#)([^#]*)/g,"$1$3")).replace(/([a-zA-Z_\/.-=]*)#([a-zA-Z_\/.-]*)\?(build=[a-zA-Z0-9.-]*)/g,"$1?$3#$2"),bizagi.enableCustomizations){var i=this.getHash(e);this.Class.customTemplates[i]&&(t=!0)}return t||"release"!==bizagi.loader.environment?this.internalGetTemplate(e).pipe(function(t){return $.templates("#"+e,t)}):this.getTemplateForRelease(e).pipe(function(t){return $.templates("#"+e,t)})},getTemplateWebpart:function(e){return e=(e=e.replace(/([^#]*#)([^#]*#)([^#]*)/g,"$1$3")).replace(/([a-zA-Z_\/.-=]*)#([a-zA-Z_\/.-]*)\?(build=[a-zA-Z0-9.-]*)/g,"$1?$3#$2"),this.internalGetTemplate(e).pipe(function(t){return $.template("#"+e,t)})},getTemplateForRelease:function(e){var t,i,n=this,r=$.Deferred();return n.containsHash(e)?(t=n.getUrlWithoutHashes(e),i=n.getHash(e)):(t=e,i=""),n.Class.cachedTemplates[t]?r.resolve(n.processAndReturnTemplate(t,i)):$.when(n.loadTemplateFileForRelease(t)).done(function(){r.resolve(n.processAndReturnTemplate(t,i))}),r.promise()},loadTemplateFileForRelease:function(e){var t=this,i=$.Deferred();return t.Class.cachedTemplates[e]?t.Class.cachedTemplates[e]:t.loadingFileDeferred[e]?($.when(t.loadingFileDeferred[e]).done(function(){i.resolve(t.Class.cachedTemplates[e])}),i.promise()):(t.loadingFileDeferred[e]=$.Deferred(),$.when($.ajax({url:e,dataType:"text"}),t.localization.ready()).done(function(n){var r,a,o;for(r in n||i.reject(""),"string"!=typeof n&&(n=JSON.parse(n[0])),t.Class.cachedTemplates[e]=n,n)n.hasOwnProperty(r)&&(a=n[r],o=(o=t.localization.translate(a)).replace(t.cssRegex,""),r.indexOf("jsrender")>=0?(delete t.Class.cachedTemplates[e][r],r=r.substring(0,r.indexOf("jsrender")-1),t.Class.cachedTemplates[e][r]=a,$.templates("#"+r,o)):$.template("#"+r,o),t.Class.cachedTemplates[e][r]=t.Class.cachedTemplates[r]=o);t.loadingFileDeferred[e].resolve(),i.resolve(n)}),i.promise())},processAndReturnTemplate:function(e,t){var i=this.Class.cachedTemplates[e][t];if(!i)throw"template "+i+"doesn't exist";return i},internalGetTemplate:function(e){var t=this,i=new $.Deferred,n=this.Class.cachedTemplates[e];if(n)i.resolve(n);else if(t.containsHash(e)){var r=t.getUrlWithoutHashes(e),a=t.getHash(e);if(t.Class.customTemplates[a])return i.resolve(t.Class.customTemplates[a]),i.promise();$.when(t.getTemplatePart(r,a)).done(function(n){t.Class.cachedTemplates[e]=n,i.resolve(n)})}else $.when(t.getTemplateFile(e)).done(function(e){i.resolve(e)});return i.promise()},getTemplatePart:function(e,t){var i=this,n=new $.Deferred;return $.when(i.loadingTemplatePartExecution).done(function(){i.loadingTemplatePart=!0,i.loadingTemplatePartExecution=new $.Deferred,$.when(i.getTemplateFile(e)).done(function(r){var a=$("<div />").html(r),o=$("#"+t,a);bizagi.assert(o.length>0,"No template part ("+t+") found in content for:"+e),r=o.html(),i.loadingTemplatePartExecution.resolve(),i.loadingTemplatePart=!0,n.resolve(r)})}),n.promise()},getTemplateFile:function(e){var t=this,i=this.Class.cachedTemplates[e];return i||$.when($.ajax({url:e,dataType:"text"}),t.localization.ready()).pipe(function(i){if(!i)return"";if("string"!=typeof i&&(i=i[0]),void 0===i)return"";var n=t.localization.translate(i),r=n.match(t.cssRegex);r&&$.each(r,function(e,i){var n=i.replace(t.cssRegex,"$1");bizagi.loader.loadFile({src:n,type:"css",environment:"debug"})}),n=n.replace(t.cssRegex,"");var a=$("<div />").html(n);return $("script",a).each(function(e,t){var i=$(t).attr("id"),n=$(t).attr("type");if($.templates&&n&&n.indexOf("jsrender")>=0)$.templates("#"+i,$(t).html());else try{$.template("#"+i,$(t).html())}catch(e){console.log(e,a)}}),t.Class.cachedTemplates[e]="string"==typeof n?n:n[0].outerHTML,n})},containsHash:function(e){return-1!=e.indexOf("#")},getHash:function(e){return e.substring(e.indexOf("#")+1,e.length)},getUrlWithoutHashes:function(e){return e.substring(0,e.indexOf("#"))}});var originalEmptyMethod=jQuery.fn.empty;jQuery.fn.empty=function(){var e=originalEmptyMethod.apply(this,arguments),t=$(this);return t.hasClass("ui-bizagi-component-loading")&&t.loadingMessage(),e},jQuery.fn.fastEmpty=function(){this.children().remove();var e=$(this);e.hasClass("ui-bizagi-component-loading")&&e.loadingMessage()};var originalPrependMethod=jQuery.fn.prepend;jQuery.fn.prepend=function(){var e=$(this);if(0==e.length)return jQuery.fn;e.data("loading")&&(originalEmptyMethod.apply(this),e.data("loading",!1));var t=originalPrependMethod.apply(this,arguments);return"body"!=e[0].tagName.toLowerCase()&&e.find(".ui-bizagi-component-adjustable").length>0&&$(document).triggerHandler("resizeLayout"),e.removeData("loading"),t};var originalAppendMethod=jQuery.fn.append;jQuery.fn.append=function(){var element=$(this);if(0==element.length)return jQuery.fn;eval(element.attr("data-loading"))&&(originalEmptyMethod.apply(this),element.data("loading",!1));var result=originalAppendMethod.apply(this,arguments),tagName=element[0].tagName||"";return"body"!=tagName.toLowerCase()&&element.find(".ui-bizagi-component-adjustable").length>0&&$(document).triggerHandler("resizeLayout"),element.removeData("loading"),result};var originalTmplMethod=jQuery.tmpl;for(key in jQuery.tmpl=function(){var e=originalTmplMethod.apply(this,arguments);return arguments[2]&&arguments[2].fast?e:($(".ui-bizagi-component",e).each(function(e,t){for(var i=$(t).attr("component"),n=$(t).parent();0==n[0].tagName.length;)n=n.parent();n.attr("data-bizagi-component",i),$(t).detach()}),$("[data-loading=true]",e).length>0&&$("[data-loading=true]",e).loadingMessage(),$("[data-loading=true]",e).addClass("ui-bizagi-component-loading"),e.jquery&&$.each(e,function(e,t){t.outerHTML&&$(t).is("[data-loading=true]")&&($(t).loadingMessage(),$(t).addClass("ui-bizagi-component-loading"))}),$("[data-adjustable=true]",e).addClass("ui-bizagi-component-adjustable"),e.jquery&&$.each(e,function(e,t){t.outerHTML&&$(t).is("[data-adjustable=true]")&&$(t).addClass("ui-bizagi-component-adjustable")}),e)},originalTmplMethod)jQuery.tmpl[key]=originalTmplMethod[key];function printf(e){var t,i=Array.prototype.slice.call(arguments,1);return e.replace(/(%[disv])/g,function(e,n){if(void 0!==(t=i.shift()))switch(n.charCodeAt(1)){case 100:return+t;case 105:return Math.round(+t);case 115:return String(t);case 118:return t}return n})}function bizagiQueue(){var e=this,t=[];e.add=function(e){t.push({callbacks:[e]})},e.addParallel=function(i){if(0==t.length)return e.add(i);t[t.length-1].callbacks.push(i)},e.execute=function(){for(var e=new $.Deferred,i=e.promise(),n=t.length,r=0;r<n;r++)i=i.pipe(function(){var e=t.shift();return $.when.apply($,$.map(e.callbacks,function(e){if("function"==typeof e){var t=$.Deferred();return $.when(e()).done(function(){t.resolve()}).fail(function(){t.resolve()}),t.promise()}return e}))});return e.resolve(),i=i.done(function(){t=[]})}}$.extend(jQuery.tmpl.tag,{component:{open:'_ = _.concat(\'<div class="ui-bizagi-component" component="$1"></div>\');'},loading:{open:"_ = _.concat('data-loading=\"true\"');"},adjustable:{open:"_ = _.concat('data-adjustable=\"true\"');"},resource:{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode(bizagi.localization.getResource($1a)));}"},log:{open:"console.log($1, $2);"},children:{open:"_ = _.concat('{{children}}');"},control:{open:"_ = _.concat('{{control}}');"},files:{open:"_ = _.concat('{{files}}');"},result:{open:"_ = _.concat('{{result}}');"},element:{open:"_ = _.concat('{{element $1}}');"},for:{_default:{$2:"var i=1;i<=1;i++"},open:"for ($2){",close:"};"}}),bizagi=void 0!==bizagi?bizagi:{},bizagi.util=void 0!==bizagi.util?bizagi.util:{},$.Class.extend("bizagi.l10n",{templateRegex:/%{([\w-{}$.]+)}/,templateSubExpressionRegex:/[$]{([\w.]+)}/g},{init:function(e){this.resourceLocationDefinition=e,this.service=new bizagi.services.service,this.dictionaries={},this.dictionary={},this.readyDeferred=null,this.enableCustomizations=void 0!==bizagi.enableCustomizations?bizagi.enableCustomizations:"undefined"==typeof BIZAGI_ENABLE_CUSTOMIZATIONS||BIZAGI_ENABLE_CUSTOMIZATIONS,this.defaultDatetimeInfo="undefined"!=typeof BIZAGI_DEFAULT_DATETIME_INFO&&BIZAGI_DEFAULT_DATETIME_INFO},setLanguage:function(e){var t=this;t.language=e,t.readyDeferred=new $.Deferred,$.when(t._getDictionary(e)).done(function(e){if(t.dictionary=e,t.defaultDatetimeInfo&&(t.defaultDatetimeInfo.shortDateFormat&&t.overrideSpecificResource("dateFormat",t.defaultDatetimeInfo.shortDateFormat),t.defaultDatetimeInfo.timeFormat&&t.overrideSpecificResource("timeFormat",t.defaultDatetimeInfo.timeFormat)),t.enableCustomizations){if(t.resourceLocationDefinition.custom){var i="undefined"!=typeof BIZAGI_LOCAL_RESOURCES&&BIZAGI_LOCAL_RESOURCES?t.service.getResourceDictionary:t.service.getServerResourceDictionary;i===t.service.getServerResourceDictionary&&BIZAGI_LANGUAGE===t.language?t.readyDeferred.resolve():i(t.resourceLocationDefinition.custom).done(function(e){t.enableCustomizations&&t.overrideResources(e),t.readyDeferred.resolve()})}}else t.readyDeferred.resolve()})},loadLanguageExtension:function(e){var t=this;t.language=e,t.readyDeferred=new $.Deferred;var i=t.getLanguageFromCulture(e);return void 0===t.resourceLocationDefinition[i.toLowerCase()]&&(i="default"),t.service.getResourceDictionary(t.resourceLocationDefinition[i.toLowerCase()]).done(function(i){t.dictionaries[e.toLowerCase()]=t.dictionaries[e.toLowerCase()]||{},$.extend(t.dictionaries[e.toLowerCase()],i),t.readyDeferred.resolve()}).fail(function(t,i,n){alert("Can't load localization file for language: "+e+", "+i+" - "+n)}),t.readyDeferred.promise()},getLanguageFromCulture:function(e){return-1!==e.indexOf("-")?e.split("-")[0]:e},resolvei18n:function(e){if(!e)return"";if("string"==typeof e)return e;if(this.language&&"default"!=this.language){var t=e.i18n.default.languages[this.language];if(t)return t}return e.i18n.default},getResource:function(e){return null==this.dictionary[e]?e:this.dictionary[e]},setResource:function(e,t){e&&""!=e&&(this.dictionary[e]=t)},getMessageFromLocalization:function(e,t,i,n){var r="";if("error"==t)if(n)r=e;else{if(e=e.toLowerCase(),(r=bizagi.localization.getResource("workportal-general-error-"+e))=="workportal-general-error-"+e)"workportal-general-error-generic"===bizagi.localization.getResource("workportal-general-error-generic")&&(r="The request could not be completed.");if(i)for(var a=0;a<i.length;a++)r=r.replace("{"+a+"}",i[a])}else r=bizagi.localization.getResource(e);return r},translate:function(e){var t;do{if(t=this.Class.templateRegex.exec(e)){var i=t[1];if(-1==i.indexOf("$"))e=e.replaceAll(t[0],this.getResource(i));else{var n=this.Class.templateSubExpressionRegex.exec(i);if(!n){n=/[$]{([\w.]+)}/g.exec(i)}e=e.replaceAll(t[0],"{{resource "+n[1]+"}}")}}}while(null!=t);return e},overrideResources:function(e){var t=e[this._getUserLanguage(this.language)];for(var i in t)this.dictionary[i]=t[i]},overrideSpecificResource:function(e,t){e=e||"nodefined",t=t||"",this.dictionary[e]=t},_getDictionary:function(e){var t=this,i=new $.Deferred;if(e=e.toLowerCase(),null!=t.dictionaries[e])return t.dictionaries[e];var n=t._getUserLanguage(e);return("undefined"!=typeof BIZAGI_LOCAL_RESOURCES&&BIZAGI_LOCAL_RESOURCES?t.service.getResourceDictionary:t.service.getServerResourceDictionary)(t.resourceLocationDefinition[n]).done(function(n){t.dictionaries[e]=n,i.resolve(n)}).fail(function(t,i,n){void 0===t.responseJSON&&0===t.status&&"error"===t.statusText&&""===n?console.log("Can't load localization file for language: "+e+", "+i+" - "+n):alert("Can't load localization file for language: "+e+", "+i+" - "+n)}),i.promise()},_getUserLanguage:function(e){var t=e.toLowerCase();if(null==this.resourceLocationDefinition[t]&&t.length>0)for(var i=t.split("-"),n=i.length-1;n>=0;n--)if(null!=this.resourceLocationDefinition[i[n]]){t=i[n];break}return 0!=t.length&&null!=this.resourceLocationDefinition[t]||(bizagi.log("No resource definition location has been given for language :"+e+", loading default language"),t="default"),t},ready:function(){return this.readyDeferred.promise()}}),bizagi=bizagi||{},bizagi.l10n=bizagi.l10n||{},bizagi.l10n.extend("bizagi.l10n",{},{init:function(e){this._super(e),this.localResourcesLoaded=!1},_getDictionary:function(e){var t=this,i=new $.Deferred,n=(e=e.toLowerCase()).toLowerCase().replace(/([^a-z]+)/g,"-").split("-").shift(),r=t._getUserLanguage(e);return t._loadFullLocalResources(r).done(function(){t.service.getServerResourceDictionary(r).then(function(i){var r=t.dictionaries[n];t.dictionaries[e]=$.extend({},i,r)}).always(function(){t._loadMobileLocalDictionary(r).always(function(){t.dictionaries[e].mobile=!0,i.resolve(t.dictionaries[e])})})}),i.promise()},_loadFullLocalResources:function(e){var t=this,i=new $.Deferred,n=e.toLowerCase().replace(/([^a-z]+)/g,"-").split("-").shift();return t.localResourcesLoaded?i.resolve():t.service.getResourceDictionary("jquery/resources/mobile/bizagi.resources.all.json.txt?build="+bizagi.loader.build).done(function(r){t.dictionaries=r,t.dictionaries[e]=t.dictionaries[n],t.localResourcesLoaded=!0,i.resolve()}),i.promise()},_loadMobileLocalDictionary:function(e){var t=this,i=new $.Deferred,n=(e=e.toLowerCase()).toLowerCase().replace(/([^a-z]+)/g,"-").split("-").shift();return t.localResourcesLoaded&&t.dictionaries[n].mobile?i.resolve():t.service.getResourceDictionary("jquery/resources/mobile/bizagi.resources."+n+".json.txt?build="+bizagi.loader.build).done(function(n){t.dictionaries[e]=$.extend(n,t.dictionaries[e]),i.resolve(t.dictionaries[e])}).fail(function(){t.service.getResourceDictionary("jquery/resources/mobile/bizagi.resources.en.json.txt?build="+bizagi.loader.build).done(function(i){t.dictionaries[e]=$.extend(i,t.dictionaries[e])}).fail(function(t,i,n){console.log("Can't load mobile localization file for language: "+e+", "+i+" - "+n)}).always(function(){i.resolve(t.dictionaries[e])})}),i.promise()},getResource:function(e,t){return void 0===this.dictionary[e]?void 0!==t?t:e:this.dictionary[e]},_getUserLanguage:function(e){var t=e.toLowerCase();if(null==this.resourceLocationDefinition[t]&&t.length>0)for(var i=t.split("-"),n=i.length-1;n>=0;n--)if(null!=this.resourceLocationDefinition[i[n]]){t=i[n];break}return 0!=t.length&&null!=this.resourceLocationDefinition[t]||(bizagi.log("No resource definition location has been given for language :"+e+", loading default language"),t="en"),t}}),bizagi=void 0!==bizagi?bizagi:{},bizagi.util=void 0!==bizagi.util?bizagi.util:{},bizagi.context=void 0!==bizagi.context?bizagi.context:{},bizagi.util.smartphone=void 0!==bizagi.util.smartphone?bizagi.util.smartphone:{},bizagi.util.tablet=void 0!==bizagi.util.tablet?bizagi.util.tablet:{},function(e){e.fn.callInside=function(t,i){if("iframe"!=e(this)[0].tagName.toLowerCase())return null;if(null==e(this)[0].contentWindow)return null;try{e(this)[0].contentWindow.args=i}catch(e){return null}return e.browser.msie?e(this)[0].contentWindow.execScript("args = (this.window.args)?this.window.args:{}; insideFunction = "+t.toString()+"; insideFunction(args)"):e.browser.webkit||e.browser.mozilla?e(this)[0].contentWindow.eval("args = window.args;insideFunction = "+t.toString()+"; insideFunction(args)"):void 0}}(jQuery),function(e){e.fn.callInsidePopup=function(t,i){var n=this;e(document).ready(function(){try{e(n)[0].args=i}catch(e){return null}return e.browser.msie?e(n)[0].execScript("args = (this.window.args)?this.window.args:{}; insideFunction = "+t.toString()+"; insideFunction(args)"):e.browser.webkit||e.browser.mozilla?e(n)[0].eval("args = window.args;insideFunction = "+t.toString()+"; insideFunction(args)"):void 0})}}(jQuery),jQuery,!!CSSStyleDeclaration.prototype.getPropertyValue||(CSSStyleDeclaration.prototype.getPropertyValue=function(e){return this.getAttribute(e)},CSSStyleDeclaration.prototype.setProperty=function(e,t,i){if(this.setAttribute(e,t),""!=(i=void 0!==i?i:"")){var n=new RegExp(RegExp.escape(e)+"\\s*:\\s*"+RegExp.escape(t)+"(\\s*;)?","gmi");this.cssText=this.cssText.replace(n,e+": "+t+" !"+i+";")}},CSSStyleDeclaration.prototype.removeProperty=function(e){return this.removeAttribute(e)},CSSStyleDeclaration.prototype.getPropertyPriority=function(e){return new RegExp(RegExp.escape(e)+"\\s*:\\s*[^\\s]*\\s*!important(\\s*;)?","gmi").test(this.cssText)?"important":""}),RegExp.escape=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},jQuery.fn.style=function(e,t,i){if(void 0!==this.get(0)){var n=this.get(0).style;if(void 0===e)return n;if(void 0===t)return n.getPropertyValue(e);i=void 0!==i?i:"",n.setProperty?n.setProperty(e,t,i):n.setAttribute(e,t,i)}},jQuery,jQuery.nl2br=function(e){return e.replace(/(\r\n|\n\r|\r|\n|\\r\\n|\\n\\r|\\r|\\n)/g,"<br>")},jQuery,jQuery.br2nl=function(e){return e.replace(/\r\n|\r|\n|<br>|<br\/>/g,"\r")},function(e){jQuery.controlValueIsChanged=function(t){var i=t,n=i.properties,r=i.getValue(),a=n.originalValue,o=!0;return!!e.forceCollectData||("grid"!=t.properties.type||"pending"!=t.ready().state())&&("combo"==n.type||"queryCombo"==n.type||"list"==n.type||"queryList"==n.type||"radio"==n.type||"queryRadio"==n.type||"queryState"==n.type||"cascadingCombo"===n.type?(r&&void 0!==r.length&&(r=r[0]),a&&void 0!==a.length&&(a=a[0]),r=r&&r.id?r.id:r,o=(a=a&&a.id?a.id:a)!=r):o="boolean"==n.type||"queryBoolean"==n.type||"queryCheck"==n.type?bizagi.util.parseBoolean(a)!=bizagi.util.parseBoolean(r):"searchNumber"==n.type?!!r:"date"===n.type?new Date(a).getTime()!==new Date(r).getTime():a!==r,o)}}(jQuery),function(e){jQuery.getMaxZindex=function(){var t=e("*"),i=1;return e.each(t,function(t,n){var r=parseInt(e(n).css("z-index"));r>i&&(i=r+1)}),i}}(jQuery),function(e){jQuery.equalizeHeights=function(t){var i=new Array;e(t).each(function(){e(this).css("min-height","0"),e(this).css("max-height","none"),e(this).css("height","auto"),i.push(e(this).outerHeight())});var n=Math.max.apply(Math,i);e(t).each(function(){e(this).css("height",n+"px")})}}(jQuery),bizagi.util.autoSave=function(){var e=$.Deferred();return"desktop"!==bizagi.util.detectDevice()?$(document).data("auto-save")?$(document).trigger("save-form",[e]):e.resolve():$._data($(document)[0],"events")["save-form"]&&$._data($(document)[0],"events")["save-form"].length>0?$(document).trigger("save-form",[e]):e.resolve(),e.promise()},bizagi.util.liveProcessesEvents=bizagi.util.liveProcessesEvents||{},bizagi.util.liveProcessesEvents.newLiveProcess=document.createEvent("Event"),bizagi.util.liveProcessesEvents.newLiveProcess.initEvent("new-live-process",!0,!0),bizagi.util.liveProcessesEvents.routeEvents=document.createEvent("Event"),bizagi.util.liveProcessesEvents.routeEvents.initEvent("parent-route-events",!0,!0),bizagi.util.liveProcessesEvents.routeEvents.route="/",bizagi.util.liveProcessesEvents.saveEvent=document.createEvent("Event"),bizagi.util.liveProcessesEvents.saveEvent.initEvent("save-live",!0,!0),bizagi.util.liveProcessesEvents.saveEvent.lastWidget="",bizagi.util.liveProcessesEvents.saveEvent.nextWidget="",bizagi.util.liveSave=function(e){bizagi.util.liveProcessesEvents.saveEvent.nextWidget=e;var t=$.Deferred(),i=0;try{i=$(document).find("iframe")[0].contentWindow.location.href.indexOf("quickprocess")}catch(e){i=-1}return(e!==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROFLY||e===bizagi.util.liveProcessesEvents.saveEvent.lastWidget)&&$(document).find("iframe").length>0&&i>0?(bizagi.util.liveProcessesEvents.saveEvent.saveLivePromise=t,document.dispatchEvent(bizagi.util.liveProcessesEvents.saveEvent)):t.resolve(),$.when(t).done(function(){bizagi.util.liveProcessesEvents.saveEvent.lastWidget=e}),t.promise()},bizagi.util.md5=function(e){var t=t||function(e,t){var i={},n=i.lib={},r=function(){},a=n.Base={extend:function(e){r.prototype=this;var t=new r;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=n.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var r=0;r<e;r++)t[n+r>>>2]|=(i[r>>>2]>>>24-r%4*8&255)<<24-(n+r)%4*8;else if(65535<i.length)for(r=0;r<e;r+=4)t[n+r>>>2]=i[r>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],n=0;n<t;n+=4)i.push(4294967296*e.random()|0);return new o.init(i,t)}}),s=i.enc={},l=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++){var r=t[n>>>2]>>>24-n%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new o.init(i,t/2)}},u=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++)i.push(String.fromCharCode(t[n>>>2]>>>24-n%4*8&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new o.init(i,t)}},c=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},d=n.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,n=i.words,r=i.sigBytes,a=this.blockSize,s=r/(4*a);if(t=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,r=e.min(4*t,r),t){for(var l=0;l<t;l+=a)this._doProcessBlock(n,l);l=n.splice(0,t),i.sigBytes-=r}return new o.init(l,r)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=d.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new p.HMAC.init(e,i).finalize(t)}}});var p=i.algo={};return i}(Math);return function(e){function i(e,t,i,n,r,a,o){return((e=e+(t&i|~t&n)+r+o)<<a|e>>>32-a)+t}function n(e,t,i,n,r,a,o){return((e=e+(t&n|i&~n)+r+o)<<a|e>>>32-a)+t}function r(e,t,i,n,r,a,o){return((e=e+(t^i^n)+r+o)<<a|e>>>32-a)+t}function a(e,t,i,n,r,a,o){return((e=e+(i^(t|~n))+r+o)<<a|e>>>32-a)+t}for(var o=t,s=(u=o.lib).WordArray,l=u.Hasher,u=o.algo,c=[],d=0;64>d;d++)c[d]=4294967296*e.abs(e.sin(d+1))|0;u=u.MD5=l.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var o=0;16>o;o++){var s=e[d=t+o];e[d]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}o=this._hash.words;var l,u,d=e[t+0],p=(s=e[t+1],e[t+2]),h=e[t+3],g=e[t+4],f=e[t+5],m=e[t+6],v=e[t+7],b=e[t+8],y=e[t+9],x=e[t+10],C=e[t+11],_=e[t+12],w=e[t+13],E=e[t+14],T=e[t+15],z=o[0],R=a(R=a(R=a(R=a(R=r(R=r(R=r(R=r(R=n(R=n(R=n(R=n(R=i(R=i(R=i(R=i(R=o[1],u=i(u=o[2],l=i(l=o[3],z=i(z,R,u,l,d,7,c[0]),R,u,s,12,c[1]),z,R,p,17,c[2]),l,z,h,22,c[3]),u=i(u,l=i(l,z=i(z,R,u,l,g,7,c[4]),R,u,f,12,c[5]),z,R,m,17,c[6]),l,z,v,22,c[7]),u=i(u,l=i(l,z=i(z,R,u,l,b,7,c[8]),R,u,y,12,c[9]),z,R,x,17,c[10]),l,z,C,22,c[11]),u=i(u,l=i(l,z=i(z,R,u,l,_,7,c[12]),R,u,w,12,c[13]),z,R,E,17,c[14]),l,z,T,22,c[15]),u=n(u,l=n(l,z=n(z,R,u,l,s,5,c[16]),R,u,m,9,c[17]),z,R,C,14,c[18]),l,z,d,20,c[19]),u=n(u,l=n(l,z=n(z,R,u,l,f,5,c[20]),R,u,x,9,c[21]),z,R,T,14,c[22]),l,z,g,20,c[23]),u=n(u,l=n(l,z=n(z,R,u,l,y,5,c[24]),R,u,E,9,c[25]),z,R,h,14,c[26]),l,z,b,20,c[27]),u=n(u,l=n(l,z=n(z,R,u,l,w,5,c[28]),R,u,p,9,c[29]),z,R,v,14,c[30]),l,z,_,20,c[31]),u=r(u,l=r(l,z=r(z,R,u,l,f,4,c[32]),R,u,b,11,c[33]),z,R,C,16,c[34]),l,z,E,23,c[35]),u=r(u,l=r(l,z=r(z,R,u,l,s,4,c[36]),R,u,g,11,c[37]),z,R,v,16,c[38]),l,z,x,23,c[39]),u=r(u,l=r(l,z=r(z,R,u,l,w,4,c[40]),R,u,d,11,c[41]),z,R,h,16,c[42]),l,z,m,23,c[43]),u=r(u,l=r(l,z=r(z,R,u,l,y,4,c[44]),R,u,_,11,c[45]),z,R,T,16,c[46]),l,z,p,23,c[47]),u=a(u,l=a(l,z=a(z,R,u,l,d,6,c[48]),R,u,v,10,c[49]),z,R,E,15,c[50]),l,z,f,21,c[51]),u=a(u,l=a(l,z=a(z,R,u,l,_,6,c[52]),R,u,h,10,c[53]),z,R,x,15,c[54]),l,z,s,21,c[55]),u=a(u,l=a(l,z=a(z,R,u,l,b,6,c[56]),R,u,T,10,c[57]),z,R,m,15,c[58]),l,z,w,21,c[59]),u=a(u,l=a(l,z=a(z,R,u,l,g,6,c[60]),R,u,C,10,c[61]),z,R,p,15,c[62]),l,z,y,21,c[63]);o[0]=o[0]+z|0,o[1]=o[1]+R|0,o[2]=o[2]+u|0,o[3]=o[3]+l|0},_doFinalize:function(){var t=this._data,i=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;i[r>>>5]|=128<<24-r%32;var a=e.floor(n/4294967296);for(i[15+(r+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),i[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(i.length+1),this._process(),i=(t=this._hash).words,n=0;4>n;n++)r=i[n],i[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);return t},clone:function(){var e=l.clone.call(this);return e._hash=this._hash.clone(),e}}),o.MD5=l._createHelper(u),o.HmacMD5=l._createHmacHelper(u)}(Math),t.MD5(e).toString()},bizagi.util.multiReplace=function(e,t){for(var i in t=t||{}){var n=new RegExp(i,"g");e=e.replace(n,t[i])}return e},bizagi.util.replaceAll=function(e,t,i){return bizagi.replaceAll(e,t,i)},bizagi.util.replaceAllGlobalRegExp=function(e,t,i){var n=e,r=new RegExp(t,"g");return(n=n.replace(r,i)).toString()},String.prototype.replaceAll=function(e,t){return bizagi.util.replaceAll(this,e,t)},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.startsWith=function(e){return this.slice(0,e.length)==e},String.prototype.getInitials=function(){var e="";try{for(var t=this.replace(/  +/g," ").split(" "),i=0;i<t.length&&2!=(e+=t[i][0]||"").length;i+=1);}catch(e){}return e.toUpperCase()},Math.sign=Math.sign||function(e){return 0===(e=+e)||isNaN(e)?e:e>0?1:-1},bizagi.clone=function(e){return JSON.parse(JSON.encode(e))},bizagi.measureString=function(e,t){var i=$("<span/>").appendTo("body");i.text(e),t&&i.css("font-size",t);var n=i.width();return i.detach(),n},bizagi.util.trim=function(e){return void 0===e||null==e?e:e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)},bizagi.util.isIPad=function(){return-1!=navigator.platform.indexOf("iPad")},bizagi.util.isIPhone=function(){return navigator.userAgent.toLowerCase().indexOf("iphone")>-1},bizagi.util.isIPod=function(){return navigator.userAgent.toLowerCase().indexOf("ipod")>-1},bizagi.util.isIE7=function(){return bizagi.util.isIE()&&7==document.documentMode},bizagi.util.isIE8=function(){return bizagi.util.isIE()&&8==document.documentMode},bizagi.util.isIE9=function(){return bizagi.util.isIE()&&9==document.documentMode},bizagi.util.isIE10=function(){return bizagi.util.isIE()&&10==document.documentMode},bizagi.util.isIE11=function(){return!!navigator.userAgent.match(/Trident\/7.0/)&&!navigator.userAgent.match(/MSIE/i)},bizagi.util.isIE11OrLower=function(){return bizagi.util.isIE11()||bizagi.util.isIE10()||bizagi.util.isIE9()||bizagi.util.isIE8()||bizagi.util.isIE7()},bizagi.util.isEdge=function(){return!!/Edge\/*./i.test(navigator.userAgent)},bizagi.util.isIE=function(){return navigator.appName.indexOf("Internet Explorer")>0||!!navigator.userAgent.match(/Trident/)},bizagi.util.getIEVersion=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE"),i=0;return t>0?i=parseInt(e.substring(t+5,e.indexOf(".",t))):(navigator.userAgent.match(/Trident/)||window.navigator.userAgent.indexOf("Edge")>-1)&&(i=11),i},bizagi.util.isChrome=function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)},bizagi.util.isFirefox=function(e){return/Firefox/.test(navigator.userAgent)&&(void 0===e||e<=(i=navigator.userAgent,n=i.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(n[1])?{name:"IE",version:(t=/\brv[ :]+(\d+)/g.exec(i)||[])[1]||""}:"Chrome"===n[1]&&null!=(t=i.match(/\bOPR|Edge\/(\d+)/))?{name:"Opera",version:t[1]}:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(t=i.match(/version\/(\d+)/i))&&n.splice(1,1,t[1]),{name:n[0],version:n[1]})).version);var t,i,n},bizagi.util.getBrowser=function(){var e="undetected";return bizagi.util.isChrome()?e="chrome":bizagi.util.isFirefox()?e="firefox":bizagi.util.isEdge()?e="edge":bizagi.util.isIE11()?e="ie11":bizagi.util.isIE10()&&(e="ie10"),e},bizagi.util.emptyNavigatorInfo=function(){bizagi.navigator&&bizagi.navigator.info&&(bizagi.navigator.info={})},$(document).ready(function(){if($("html").addClass("browser-"+bizagi.util.getBrowser()),bizagi.language){var e=bizagi.language.split("-");e&&e.length>0&&$("html").addClass("language-"+e[0])}}),bizagi.util.isIphoneHigherIOS5=function(){return null!=this.value?this.value:this.value=RegExp("OS\\s*(5|6|7|8)_*\\d").test(navigator.userAgent)&&RegExp(" AppleWebKit/").test(navigator.userAgent)},bizagi.util.setIphoneXOverrides=function(){bizagi.util.isNativePluginSupported()&&void 0!==bizagiapp.isIphoneX&&bizagiapp.isIphoneX(function(e){if("true"===e){$("head").append('<style type="text/css" id="iphoneXStyle"></style>'),$("#iphoneXStyle").text(".bz-menu-home .bz-menu-carousel .bz-menu-carousel-seat{padding:0 16px 16px}.bz-home-header .km-navbar{padding:35px 16px 5px}#menuHome .bz-home-header .km-navbar{padding:30px 3px 0}#menuHome .km-navbar .km-rightitem{font-size:19px;right:.4em;top:32px}#menuHome .km-navbar .km-leftitem{font-size:24px;left:0;top:25px}#taskFeed .km-navbar .km-rightitem{font-size:19px;top:25px;right:0}#taskFeed .km-navbar .km-leftitem{font-size:24px;top:20px;left:0}#homePortal #menuHome .km-view-title .km-buttongroup{margin-left:0;top:2px}.bz-render-header,.search-container{padding-top:25px}#activity-search,.search-container .bz-wp-mu-button-search{padding-top:40px}#content-newCase-drawer{padding-top:25px}#menuHome{background:#EBEDF1!important}.km-flat .km-content{background-color:#fff} .k-loading-mask{top:0!important}");var t=$("meta[name=viewport]").attr("content");$("meta[name=viewport]").attr("content",t+", viewport-fit=cover"),jQuery(document).delegate("input:not([type=submit],[type=radio],.bz-rn-date-control,.bz-rn-combo-control), textarea","focus",function(){$("meta[name=viewport]").attr("content",t)}),jQuery(document).delegate("input:not([type=submit],[type=radio],.bz-rn-date-control,.bz-rn-combo-control), textarea","blur",function(){$("meta[name=viewport]").attr("content",t+", viewport-fit=cover")})}else if(bizagi.util.isiOSDevice()){$("head").append('<style type="text/css" id="iphoneStyle"></style>');$("#iphoneStyle").text("#homePortal .bz-home-header > div{padding-top:.8em}")}})},bizagi.util.isLessThanIOS5=function(){return!!navigator.userAgent.match(new RegExp(/CPU OS (1|2|3|4)/i))},bizagi.util.isIphoneAndLessIOS6=function(){return null!=this.value?this.value:this.value=RegExp("OS\\s*(4|5|6)_*\\d").test(navigator.userAgent)&&RegExp(" AppleWebKit/").test(navigator.userAgent)},bizagi.util.isString=function(e){return"[object String]"===Object.prototype.toString.apply(e)},bizagi.util.isObject=function(e){return"[object Object]"===Object.prototype.toString.apply(e)},bizagi.util.isArray=function(e){return Array.isArray(e)},bizagi.util.isNull=function(e){return"[object Null]"===Object.prototype.toString.apply(e)},bizagi.util.isBoolean=function(e){return"[object Boolean]"===Object.prototype.toString.apply(e)},bizagi.util.getInternetExplorerVersion=function(){return bizagi.util.isIE()?Number(document.documentMode):-1},bizagi.util.detectDevice=function(){return bizagi.detectDevice()},bizagi.util.isTablet=function(){return bizagi.util.isIPad()},bizagi.util.isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},bizagi.util.isGUID=function(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)},bizagi.util.mustImplement=function(e){try{console.log("Not implemented exception: "+e)}catch(e){}},bizagi.util.encodeXpath=function(e){return bizagi.util.isEmpty(e)||void 0===e.replaceAll?"":e.replaceAll(".","_").replaceAll("=","_").replaceAll("[","_").replaceAll("]","_")},bizagi.util.parseBoolean=function(e){return void 0===e?null:null===e?null:""===e?null:!0===e||1===e||"true"===e.toString()||"1"===e||("true"===e.toString().toLowerCase()||(null===e||!1!==e)&&0!==e&&"false"!==e.toString()&&"0"!==e&&("false"!==e.toString().toLowerCase()&&null))},bizagi.util.isEmpty=function(e){return 0!==e&&(null==e||""===e||("Array"==typeof e?0==e.length:"[object Array]"===Object.prototype.toString.apply(e)?0===e.length:"[object Object]"===Object.prototype.toString.apply(e)&&(!!$.isEmptyObject(e)||bizagi.util.isEmptyCombo(e))))},bizagi.util.isEmptyCombo=function(e){if("[object Object]"===Object.prototype.toString.apply(e)){var t,i=!1,n=!1;for(t in e)if(e.hasOwnProperty(t)&&("id"===t?i=!0:"value"===t?!0:n=!0,n))return!1;if(i)return""===e.id}},bizagi.util.decodeURI=function(e){for(var t,i=!1,n=e=e||"";!i;)try{if(t=decodeURI(n),bizagi.util.hasNonVisibleChars(t)){n=e;break}t==n?i=!0:n=t}catch(e){i=!0}return n},bizagi.util.hasNonVisibleChars=function(e){for(var t,i=(e=e||"").length,n=0,r=!1;n<i;)if((t=e.charCodeAt(n++))<32||t>126){r=!0;break}return r},bizagi.util.percent2Number=function(e){return Number(String(e).replace("%",""))},bizagi.util.isObjectEmpty=function(e){return!(e.length>0)},bizagi.util.isMapEmpty=function(e){if(1==e.length&&0==e[0].length)return!0;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},bizagi.util.replaceSelector=function(e,t,i){var n=$(t,e);n.length>0&&(n.append(i),n.children().unwrap())},bizagi.util.hasScroll=function(e,t){e.length&&(e=e[0]);var i=!!e[t="vertical"===t?"scrollTop":"scrollLeft"];return i||(e[t]=1,i=!!e[t],e[t]=0),i},bizagi.util.identicalObjects=function(e,t){if(typeof e!=typeof t)return!1;if("function"==typeof e)return e.toString()===t.toString();if(e instanceof Object&&t instanceof Object){if(bizagi.util.countProps(e)!==bizagi.util.countProps(t))return!1;for(k in e)if(!bizagi.util.identicalObjects(e[k],t[k]))return!1;return!0}return e===t},bizagi.util.countProps=function(e){var t=0;for(k in e)e.hasOwnProperty(k)&&t++;return t},bizagi.util.isScrolledIntoView=function(e,t){if(null==e)return!1;var i=(t=t||$(window)).scrollTop(),n=$(e).offset().top;return n+$(e).height()<=i+$(t).height()&&n>=i},bizagi.util.centerElementIntoScroll=function(e,t){if(null==e)return!1;var i=(t=t||$(window)).scrollTop(),n=$(e).offset().top,r=$(e).height(),a=i+(n>0?n+r:n-r);t.scrollTop(a)},bizagi.util.encodeHtml=function(e){return null==e?"":"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},bizagi.util.decodeHtmlEntities=function(e){return null==e?"":"string"==typeof e?e.replace(/&apos;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,"'"):e},bizagi.util.getHashParams=function(){return window.location.hash.substring(1).split("#")},bizagi.util.loadFile=function(e){var t=new $.Deferred,i=e&&e.src?e.src:e,n=e&&e.type?e.type:null;return bizagi.loader.loadFile({src:i,type:n}).then(function(){t.resolve()}),t.promise()},bizagi.util.initWebpart=function(e){var t=new $.Deferred;return e.initialized?t.resolve():e.initializing?$.when(e.loadingDeferred.promise()).done(function(){t.resolve()}):(e.loadingDeferred=new $.Deferred,e.initializing=!0,bizagi.loader.initWebpart(e,function(){e.loadingDeferred.resolve(),e.initializing=!1,t.resolve()})),t.promise()},bizagi.util.getQueryString=function(e){for(var t={},i=((e=e||window.location.href).indexOf("?")>0?e.substring(e.indexOf("?")+1):"").split("&"),n=i.length-1;n>=0;n--){var r=i[n].indexOf("=");if(-1!=r){var a=i[n].substring(0,r),o=i[n].substring(r+1);t[a]=unescape(o)}}return t},bizagi.util.extendQueryString=function(e,t){var i=e.indexOf("?")>0?e.substring(0,e.indexOf("?")):e,n=bizagi.util.getQueryString(e),r=$.extend({},n,t);return i+"?"+$.param(r)},bizagi.util.getStackTrace=function(){var e=[],t=!1;try{n.dont.exist+=0}catch(o){if(o.stack){for(var i=o.stack.split("\n"),n=0,r=i.length;n<r;n++)i[n].match(/^\s*[A-Za-z0-9\-_\$]+\(/)&&e.push(i[n]);e.shift(),t=!0}else if(window.opera&&o.message){for(i=o.message.split("\n"),n=0,r=i.length;n<r;n++)if(i[n].match(/^\s*[A-Za-z0-9\-_\$]+\(/)){var a=i[n];i[n+1]&&(a+=" at "+i[n+1],n++),e.push(a)}e.shift(),t=!0}}if(!t)for(var o=arguments.callee.caller;o;){var s=o.toString(),l=s.substring(s.indexOf("function")+8,s.indexOf(""))||"anonymous";e.push(l),o=o.caller}return e},bizagi.util.highLightElement=function(e){e.addClass("ui-highlight-control"),$.when(setTimeout(function(){e.addClass("ui-highlight-off-control")},450)).done(setTimeout(function(){e.removeClass("ui-highlight-control ui-highlight-off-control")},800))},bizagi.util.autoScrollBottom=function(e){try{var t;t=e[0].scrollHeight,e.scrollTop(t)}catch(e){}},bizagi.util.autoScrollInterval={init:!1},bizagi.util.autoScroll=function(e,t,i,n){var r=!1;clearInterval(bizagi.util.autoScrollInterval[n]),bizagi.util.autoScrollInterval[n]=0,bizagi.util.autoScrollInterval.init=!0,$("body").addClass("autoscroll"),$("body.autoscroll").mousemove(function(a){a.pageY<t?r||(r=!0,bizagi.util.autoScrollTopInterval(e,"autoscroll",n)):a.pageY>i?r||(r=!0,bizagi.util.autoScrollBottomInterval(e,"autoscroll",n)):(clearInterval(bizagi.util.autoScrollInterval[n]),r=!1)})},bizagi.util.autoScrollTopInterval=function(e,t,i){clearInterval(bizagi.util.autoScrollInterval[i]),t&&$("body").addClass(t),0==e.scrollTop()?clearInterval(bizagi.util.autoScrollInterval[i]):(clearInterval(bizagi.util.autoScrollInterval[i]),bizagi.util.autoScrollInterval[i]=setInterval(function(){e.scrollTop()>0?e.scrollTop(e.scrollTop()-40):clearInterval(bizagi.util.autoScrollInterval[i])},100))},bizagi.util.autoScrollBottomInterval=function(e,t,i){clearInterval(bizagi.util.autoScrollInterval[i]),t&&$("body").addClass(t);var n=$(e)[0].scrollHeight-$(e).innerHeight();e.scrollTop()>=n?clearInterval(bizagi.util.autoScrollInterval[i]):(clearInterval(bizagi.util.autoScrollInterval[i]),bizagi.util.autoScrollInterval[i]=setInterval(function(){bizagi.util.autoScrollBottom($("html")),e.scrollTop()<n?e.scrollTop(e.scrollTop()+40):clearInterval(bizagi.util.autoScrollInterval[i])},100))},bizagi.util.removeAutoScroll=function(e,t){$("body."+e).unbind("mousemove").removeClass(e),clearInterval(bizagi.util.autoScrollInterval[t]),bizagi.util.autoScrollInterval.init=!1},bizagi.util.getMaxZIndex=function(e){return e=e||$("div,span"),Math.max.apply(null,$(e).map(function(){var e;return isNaN(e=parseInt($(this).css("z-index"),10))?0:e}))},bizagi.showPopup=function(e,t,i){var n=t.width||1024,r=t.height||768,a=$(window).height()/2-r/2,o=$(window).width()/2-n/2,s=window.open(e,"","width="+n+",height="+r+", top="+a+", left="+o+", Menubar=NO, Location=NO, Status=NO, scrollbars=YES");window.BAPopupWindow=s,window.BAPopupCallback=i,window.BACloseWindow=function(e,t){window.BAPopupWindow.close(),window.BAPopupCallback(e,t)}},bizagi.showQuirksModePopup=function(e,t){var i=window.BIZAGI_PATH_TO_BASE+"quirks.html",n=t.width||1024,r=t.height||768,a=$(window).height()/2-r/2,o=$(window).width()/2-n/2,s=window.open(i,"bizagiPopup","width="+n+",height="+r+", top="+a+", left="+o+", Menubar=NO, Location=NO, Status=NO, scrollbars=YES");window.BAQuirksPopupWindow=s,setTimeout(function(){try{s.document.title=t.title}catch(e){}},50),$(s).callInsidePopup(function(e){var t=e.jQuery,i=e.popupWindow;i.quirksOnLoad=function(){var n=t("body",i.document),r=t("iframe",n);n.removeClass("ui-bizagi-loading-message"),r.show();var a=e.userParams.afterLoad;if(a&&null!=a){var o=t.extend(e.userParams,{popupWindow:i});r.callInside(a,o)}};var n=function(){var r=t("body",i.document);r.length>0?r.append("<iframe scrolling='yes' id='innerFrameContent' src='"+e.url+"' style='width: 100%; height: 100%; display:none' frameborder='0' onload='quirksOnLoad();'></iframe>"):setTimeout(function(){n()},50)};n()},{jQuery:$,userParams:t,popupWindow:s,url:e})},bizagi.resolveResult=function(e){var t;return e.done(function(e){t=e}),t},bizagi.createPopup=function(e){var t=e.name,i=e.onClose,n=e.title?e.title:"",r=$('<div class="ui-widget-overlay '+t+'-overlay" />'),a=$('<div class="'+t+'-popup  ui-popup-modal"/>').appendTo(r),o=$('<div class="'+t+'-btn-close biz-btn-close"><i class="biz-icon ui-close-btn bz-studio bz-black bz-false_16x16_black"></i></div>').appendTo(a);e.title&&$('<div class="'+t+'-popup-header ui-popup-header" ><h3>'+n+"</h3></div>").appendTo(a);var s=$('<div class="'+t+'-popup-content" />').appendTo(a);a.hide(),e.additionalClass&&a.addClass(e.additionalClass);var l=e.container||"body";r.appendTo($(l,document)),e.center&&(a.css("top",(r.height()-a.height())/2),a.css("left",(r.width()-a.width())/2)),a.show();var u=function(e){r.detach(),i&&i(e)};return o.click(u),{fullPopup:a,overlay:r,content:s,close:function(e){u(e)}}},bizagi.createOkCancelPopup=function(e){e.name="popup-ok-cancel";var t=e.onOk,i=e.onCancel,n=bizagi.createPopup(e),r=$("<div></div>").addClass("container-okcancel-popup"),a=$("<div></div>").addClass("message-okcancel-popup ui-light-bevel-border biz-gradient-v"),o=$("<div></div>").addClass("buttonsContainer-okcancel-popup biz-actions-bar");a.text(e.message),a.appendTo(r);var s=$("<span></span>").addClass("ok-button-okcancel-popup editor-ui-button-actions biz-action-btn biz-btn"),l=$("<span></span>").addClass("cancel-button-okcancel-popup editor-ui-button-actions biz-action-btn biz-btn");s.text(bizagi.localization.getResource("bizagi-editor-okcancel-ok")),l.text(bizagi.localization.getResource("bizagi-editor-okcancel-cancel")),s.appendTo(o),l.appendTo(o),o.appendTo(r),r.appendTo(n.content);var u=function(){n.close(),"function"==typeof t&&t()};s.click(u);var c=function(){n.close(),"function"==typeof i&&i()};return l.click(c),{close:function(){n.close()},ok:function(){u()},cancel:function(){c()}}},bizagi.dialog=function(e){var t=$("<div></div>").addClass("biz-dialog"),i=$("<p></p>");i.text(e.message||""),i.appendTo(t),t.appendTo($("body",document)),t.dialog({title:e.title,modal:!0,buttons:e.buttons,close:function(){t.dialog("destroy")}})},bizagi.closeQuirksModePopup=function(){var e=window.BAQuirksPopupWindow;window.BAQuirksPopupWindow=null;try{e&&e.close()}catch(e){}},bizagi.getStyle=function(e){var t,i=location.href.replace("/default.aspx",""),n=!!e.match(/@/),r=!!e.match(/\*/),a=new RegExp(e.replace("*",""),"g"),o="";if(""==e)return"";var s=function(e){for(var i=0;i<document.styleSheets.length;i++)if(null!=(t=document.styleSheets[i].rules||document.styleSheets[i].cssRules))for(var s=0;s<t.length;s++)if(null!=document.styleSheets[i].href&&(null==document.styleSheets[i].href.match(/less.css/g)||"release"==BIZAGI_ENVIRONMENT)){var l=t[s].cssText?t[s].cssText:"";r?null!=t[s].selectorText&&null!=t[s].selectorText.match(a)&&($.browser.webkit?o+=t[s].cssText.replace(/\(path\)/g,""):$.browser.msie&&"8.0"==$.browser.version?o+=t[s].style.cssText:o+=t[s].cssText.replace(/\(path\)/g,"../../jquery/workportal/css/desktop")):null!=t[s].selectorText&&t[s].selectorText==e&&(o+=t[s].cssText),n&&null!=t[s]&&null!=l&&-1!=l.indexOf("@font-face")&&($.browser.webkit?o+=l.replace(/jquery\/workportal\/css\/desktop\//g,"").replace(/\(path\)/g,""):o+=l.replace(/\(path\)/g,"../../"))}return o};return $.browser.msie?function(e){if("8.0"==$.browser.version)return s(e);for(var n,l=0;l<document.styleSheets.length;l++)if(null!=(t=document.styleSheets[l].cssRules||document.styleSheets[l].rules))for(var u=0;u<t.length;u++)if("release"==BIZAGI_ENVIRONMENT)r&&(null!=t[u].selectorText&&null!=t[u].selectorText.match(a)?o+=t[u].cssText.replace(/\(path\)/g,i+"/jquery/workportal/css/desktop"):null!=t[u].selectorText&&t[u].selectorText==e&&(o+=t[u].cssText.replace(/\(path\)/g,i+"/jquery/workportal/css/desktop")));else if(null!=t[u].href&&null!=t[u].href&&null==t[u].href.match(/less.css/g)){n=t[u].styleSheet.cssRules||[];for(var c=0;c<n.length;c++)r?null==n[c].selectorText&&null==n[c].selectorText||null==n[c].selectorText.match(a)||(o+=n[c].cssText.replace(/\(path\)/g,i+"/jquery/workportal/css/desktop")):null!=n[c].selectorText&&n[c].selectorText==e&&(o+=n[c].cssText.replace(/\(path\)/g,i+"/jquery/workportal/css/desktop"))}return o}(e):s(e)},bizagi.cookie=function(e,t,i){if(arguments.length>1&&"[object Object]"!==String(t)){if(i=$.extend({},i),null==t&&(i.expires=-1),"number"==typeof i.expires){var n=i.expires,r=i.expires=new Date;r.setDate(r.getDate()+n)}return t=String(t),document.cookie=[encodeURIComponent(e),"=",i.raw?t:encodeURIComponent(t),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}var a,o=(i=t||{}).raw?function(e){return e}:decodeURIComponent;return(a=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?o(a[1]):null},bizagi.util.randomNumber=function(e,t){return e=e||1,t=t||1e7,Math.floor(Math.random()*(t-e+1))+e},bizagi.util.setContext=function(e,t){e=e||{},(t=t||!1)&&(bizagi.context={}),$.each(e,function(e,t){bizagi.context[e]=t}),bizagi.context.idWorkItem=bizagi.context.idWorkitem},bizagi.util.reloadCSS=function(){var e="?reload="+(new Date).getTime();$('link[rel="stylesheet"]').each(function(){this.href=this.href.replace(/\?.*|$/,e)})},bizagi.util.setInterval=function(params){var _name=params.name||"default",_call=params.call||function(){},_params=params.params||{},_singleton=params.singleton||!1,_timeOut=params.timeout||5e3,_maxIterations=params.iterations||1e3,_context=params.context||"true;",_killWhenExitContext=!params.hasOwnProperty("killWhenExitContext")||params.killWhenExitContext;bizagi.timeOut=bizagi.timeOut||{},null==bizagi.timeOut[_name]&&(bizagi.timeOut[_name]=[]),_singleton&&null!=bizagi.timeOut[_name]&&(bizagi.timeOut[_name]=[]),bizagi.timeOut[_name].push({name:_name,params:_params,call:_call,singleton:_singleton,timeOut:_timeOut,iterations:0,maxIterations:_maxIterations,context:_context,killWhenExitContext:_killWhenExitContext,itsRunning:!1,timeInit:Math.round((new Date).getTime())});var executeTimeOut=function(){$.each(bizagi.timeOut,function(k,v){$.each(v,function(key,value){var now=Math.round((new Date).getTime()),actualIterations=Math.round((now-value.timeInit)/value.timeOut);if(bizagi.timeOut[value.name][key].iterations=actualIterations,actualIterations<value.maxIterations)if(eval(value.context)){if(!value.itsRunning){if(value.params&&$.browser.msie)var ieFunction=function(){return value.call(value.params)};bizagi.timeOut[value.name][key].pointer=$.browser.msie?setInterval(ieFunction,value.timeOut,"JavaScript"):setInterval(value.call,value.timeOut,value.params),bizagi.timeOut[value.name][key].itsRunning=!0}}else value.killWhenExitContext?(bizagi.timeOut[value.name].splice(key,1),clearTimeout(value.pointer)):(bizagi.timeOut[value.name][key].itsRunning=!1,clearTimeout(value.pointer));else clearTimeout(value.pointer),bizagi.timeOut[value.name].splice(key,1)})})};bizagi.timeOutRunning||(bizagi.timeOutRunning=!0,setInterval(executeTimeOut,1e3))},bizagi.util.isDate=function(e){var t,i,n=!1,r=!1,a=!1,o=(e=e||"").toString().split(" ");return t=o[0],(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(t)||/^\d{4}\/\d{1,2}\/\d{1,2}$/.test(t)||/^\d{1,2}\/\d{1,2}\/\d{1,2}$/.test(t))&&(n=!0),o.length>1&&(i=o[1],r=!0,3==o.length&&(i=i+" "+o[2]),/^\d{1,2}:\d{2}(:\d{2})?(\s[aApP][mM])?$/.test(i)&&(a=!0)),r?n&&a:n},bizagi.util.unicode2htmlencode=function(e){var t,i=(e=e.replace(/\r\n/g,"\n")).length,n="";for(t=0;t<i;t++)n+="&#x"+e.charCodeAt(t).toString(16)+";";return n},bizagi.util.getHeadElement=function(){var e=document.getElementsByTagName("head")[0],t=document&&document.documentElement;return e||(e=document.createElement("head"),t.insertBefore(e,t.firstChild)),bizagi.util.getHeadElement=function(){return e},e},bizagi.util.loadStyle=function(e,t){var i,n=document.getElementById(t);if(e&&!n){var r=document.createElement("style");r.type="text/css",r.id=t,r.styleSheet?r.styleSheet.cssText=e:(i=document.createTextNode(e),r.childNodes.length?r.firstChild.nodeValue!==i.nodeValue&&r.replaceChild(i,r.firstChild):r.appendChild(i)),bizagi.util.getHeadElement().appendChild(r)}},bizagi.util.loadIconStyle=function(e,t){bizagi.log("bizagi.util.loadIconStyle");var i=document.createElement("style");i.type="text/css";var n=".mtool-item-image-"+t+" { background:url(data:image/png;base64,"+e+"); }";i.innerHTML=n,bizagi.util.getHeadElement().appendChild(i)},bizagi.util.formatDecimalAndMoneyCell=function(e,t){var i,n,r,a,o={decimalSymbol:t.decimalSeparator,digitGroupSymbol:t.groupSeparator,roundToDecimalPlace:t.decimalDigits};for(i=$.extend({symbol:"â¬",decimalSeparator:",",groupSeparator:".",decimalDigits:"2"},t),n=$.extend({colorize:!1,decimalSymbol:".",digitGroupSymbol:",",groupDigits:!0,negativeFormat:"(%s%n)",positiveFormat:"%s%n",roundToDecimalPlace:"2",symbol:""},o),r=0;r<e.columnTitle.length;r++){if("MONEY"==e.columnTitle[r].type.toUpperCase())for(a=0;a<e.rows.length;a++)e.rows[a].fields[r]=bizagi.util.formatMoney(e.rows[a].fields[r],i);if("FLOAT"==e.columnTitle[r].type.toUpperCase()||"REAL"==e.columnTitle[r].type.toUpperCase())for(a=0;a<e.rows.length;a++){var s=bizagi.util.formatDecimal(e.rows[a].fields[r],n);if(!0===bizagi.override.removeTrailingZeros){var l=!0;-1!=s.toString().indexOf(")")&&(l=!1,s=s.replace("(","").replace(")",""));var u=new RegExp("("+BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator+"\\d*?[1-9])0+$","g");s=s.replace(u,"$1"),u=new RegExp("\\"+BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator+"0+$","g"),s=s.replace(u,""),l||(s="("+s+")")}e.rows[a].fields[r]=s}}return e},bizagi.util.formatBoolean=function(e){return 1==bizagi.util.parseBoolean(e)?bizagi.localization.getResource("render-boolean-yes"):0==bizagi.util.parseBoolean(e)?bizagi.localization.getResource("render-boolean-no"):""},bizagi.util.formatInvariantBoolean=function(e){e=e||"",$(".formatBoolean",e).not(".formatted").each(function(e,t){var i=$(t),n=i.html();i.addClass("formatted");try{var r=bizagi.util.formatBoolean(n);i.html(r)}catch(e){i.html(n)}})},bizagi.util.formatDecimal=function(e,t){var i=$("<i/>").text(e);return i.formatCurrency(t),i.text()},bizagi.util.formatMonetaryCells=function(e,t){t=t||{symbol:"â¬",decimalSeparator:",",groupSeparator:".",decimalDigits:"2"};for(var i=0;i<e.columnTitle.length;i++)if("MONEY"==e.columnTitle[i].type.toUpperCase())for(var n=0;n<e.rows.length;n++)e.rows[n].fields[i]=bizagi.util.formatMoney(e.rows[n].fields[i],t);return e},bizagi.util.formatMoney=function(e,t){var i="",n="",r="",a="",o="",s=e<0;if(null==e&&(e=""),(e=e.toString()).length>=1){var l=e.indexOf(".");if(l>0)r=(e=bizagi.util.fixDecimalDigits(e,t.decimalDigits)).substring(0,l).replace(/\D/g,"");else{for(var u=0;u<t.decimalDigits;u++)o+="0";r=e.replace(/\D/g,"")}if(e=e.replace(/\D/g,""),a=t.decimalDigits>0?l>0?t.decimalSeparator+e.substring(e.length-t.decimalDigits,e.length):t.decimalSeparator+o:"",r.length>3){var c=0;for(u=r.length-1;u>=0;u--)3==c&&(n+=".",c=0),n+=r[u],c+=1;for(u=n.length-1;u>=0;u--)i+=n[u]}else i=r;if(i=i.replaceAll(".",t.groupSeparator),s)i=bizagi.localization.getResource("numericFormat").negativeFormat.replace("%s",t.symbol).replace("%n",i+a);else i=t.symbol+i+a;return i}return e},bizagi.util.getOnlyNumbersByString=function(e){return e.replace(/\D/g,"")},bizagi.util.fixDecimalDigits=function(e,t){var i,n;if(i=e.indexOf("."),e.substring(0,i),t>(n=e.substring(i+1,e.length)).length)for(var r=n.length;r<t;r++)e+="0";else e=parseFloat(e).toFixed(t);return e},bizagi.util.formatInvariantMoney=function(e,t){e=e||"";var i={symbol:t.symbol,decimalSeparator:t.decimalSeparator||",",groupSeparator:t.groupSeparator||".",decimalDigits:t.decimalDigits||"2"};!1===t.allowDecimals&&(i.decimalDigits="0"),$(".formatMoney",e).not(".formated").each(function(e,t){var n=$(t).html();$(t).addClass("formated");try{var r=parseFloat(n);if(!isNaN(r)){var a=bizagi.util.formatMoney(r,i);$(t).html(a)}}catch(e){$(t).html(n)}})},bizagi.util.formatInvariantNumber=function(e,t){e=e||"";var i="2";i="0"==t.decimalDigits?"0":t.decimalDigits||"2";var n={symbol:"",decimalSeparator:t.decimalSeparator||",",groupSeparator:t.groupSeparator||t.thousands?".":"",decimalDigits:i};$(".formatMoney",e).not(".formated").each(function(e,i){var r=$(i).html();$(i).addClass("formated");try{var a=r.match(/[a-zA-Z]/),o=null!=a&&a.length>0?NaN:parseFloat(r);if(!isNaN(o)){var s=bizagi.util.formatMoney(o,n);t.percentage&&(s=s.toString()+"%"),$(i).html(s)}}catch(e){$(i).html(r)}})},bizagi.util.formatInvariantDate=function(e,t){e=e||"",t=t||"MM/dd/yyyy hh:mm:ss",$(".formatDate",e).not(".formated").each(function(e,i){var n=$(i).html();$(i).addClass("formated");try{var r=new Date(n),a=t;bizagi.util.isValidDate(r)&&(a=bizagi.util.getFormatDate(r,a));var o=bizagi.util.dateFormatter.formatDate(r,a);$(i).html(o)}catch(e){$(i).html(n)}})},bizagi.util.formatDateFromInvariantStringDate=function(e){if(bizagi.util.isValidDate(e)){var t=bizagi.localization.getResource("dateFormat")+" "+bizagi.localization.getResource("timeFormat"),i=new Date(e);return t=bizagi.util.getFormatDate(i,t),bizagi.util.dateFormatter.formatDate(i,t)}return e||""},bizagi.util.getFormatDate=function(e,t){var i=t,n=e.getHours(),r=e.getMinutes(),a=e.getSeconds(),o=e.getMilliseconds();return 0===n&&0===r&&0===a&&0===o&&(i=bizagi.localization.getResource("dateFormat")),i},bizagi.util.formatValueByDataType=function(e,t){var i=e;switch(t){case"NText":case 23:case"Char":case 14:case"VarChar":case 15:case"Text":case 16:e&&e.length>30&&(i=bizagi.util.replaceLineBreak(e));break;case"Boolean":case 5:case"Binary":case 17:i=bizagi.util.formatBoolean(e);break;case"Int":case 2:case"BigInt":case 1:case"SmallInt":case 3:case"TinyInt":case 4:case"Numeric":case 7:i=null==e?"":e;break;case"Money":case 8:i=bizagi.util.formatMonetaryCell(e);break;case"Float":case 10:case"Real":case 11:case"Decimal":case 6:i=bizagi.util.formatDecimalCell(e);break;case"DateTime":case 12:case"SmallDateTime":case 13:i=bizagi.util.formatDateFromInvariantStringDate(e)}return null==i&&(i=""),i},bizagi.util.isValidDate=function(e){if(void 0!==e&&null!=e){var t=new Date(e);return!isNaN(t.valueOf())}return!1},bizagi.util.monthNames=new Array("January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),bizagi.util.dayNames=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat"),bizagi.util.dateFormatter=new function(){this.LZ=function(e){return(e<0||e>9?"":"0")+e},this.isDate=function(e,t){return 0!=this.getDateFromFormat(e,t)},this.getRelativeTime=function(e,t,i){var n=new Date,r=e instanceof Date?e:kendo.parseDate(e,t),a=n.getTime()-r.getTime(),o=s(a,"year",31536e6,i);return o||(o=s(a,"month",2628e6,i))||(o=s(a,"week",6048e5,i))||(o=s(a,"day",864e5,i))||(o=s(a,"hour",36e5,i))||(o=s(a,"minute",6e4,i))||(i?o=s(0===a?a+1:a,"minute",1,i):(o=s(a,"second",2e3,i))||(o=bizagi.localization.getResource("workportal-relativetime-momentago"))),o;function s(e,t,i,n){var r=(e/i).toFixed(0);if(r>0){if(n)return 1==r?bizagi.localization.getResource("workportal-relativetime-"+t).replace("%s",r):bizagi.localization.getResource("workportal-relativetime-"+t+"s").replace("%s",r);var a=bizagi.localization.getResource("workportal-relativetime-ago");return 1==r?a.replace("%s",bizagi.localization.getResource("workportal-relativetime-"+t).replace("%s",r)):a.replace("%s",bizagi.localization.getResource("workportal-relativetime-"+t+"s").replace("%s",r))}return null}},this.compareDates=function(e,t,i,n){var r=getDateFromFormat(e,t),a=getDateFromFormat(i,n);return 0==r||0==a?-1:r>a?1:0},this.getDifferenceBetweenDates=function(e,t,i){if(!(e instanceof Date&&e instanceof Date))return"one param not is Date";switch(i){case"seconds":return(t.getTime()-e.getTime())/1e3;case"milliseconds":return t.getTime()-e.getTime();default:return"unit is not Defined"}},this.formatDate=function(e,t,i){if(!bizagi.util.isValidDate(e)||0==e)return"";var n=bizagi.util.monthNames,r=bizagi.util.dayNames;t+="";var a,o,s="",l=0,u=e.getFullYear()+"",c=e.getMonth()+1,d=e.getDate(),p=e.getDay(),h=e.getHours(),g=e.getMinutes(),f=e.getSeconds(),m=e.getMilliseconds(),v=new Object;if(i){var b=i.monthNames.concat(i.monthNamesShort),y=i.dayNames.concat(i.dayNamesShort);n=n.toString()===b.toString()?n:b,r=r.toString()===y.toString()?r:y}for((u.length<4||"-"===u.charAt(0)&&u.length<5)&&(u=""+(u-0+1900)),v.y=""+u,v.yyyy=u,v.yy=u.substring(2,4),v.M=c,v.MM=this.LZ(c),v.MMM=n[c+11],v.MMMM=n[c-1],v.NNN=n[c+11],v.d=d,v.dd=this.LZ(d),v.ddd=r[p+7],v.dddd=r[p],v.E=r[p+7],v.EE=r[p],v.H=h,v.HH=this.LZ(h),v.tt=h<12?"am":"pm",v.TT=h<12?"AM":"PM",v.h=0==h?12:h>12?h-12:h,v.hh=this.LZ(v.h),v.K=h>11?h-12:h,v.k=h+1,v.KK=this.LZ(v.K),v.kk=this.LZ(v.k),v.a=h>11?"PM":"AM",v.m=g,v.mm=this.LZ(g),v.s=f,v.ss=this.LZ(f),v.FFF=m;l<t.length;){for(a=t.charAt(l),o="";t.charAt(l)==a&&l<t.length;)o+=t.charAt(l++);null!=v[o]?s+=v[o]:s+=o}return s},this.getDateFromFormat=function(e,t,i){var n=bizagi.util.monthNames,r=bizagi.util.dayNames;e+="",t+="";var a,o,s=0,l=0,u=0,c=0,d=new Date,p=d.getYear(),h=d.getMonth()+1,g=1,f=d.getHours(),m=d.getMinutes(),v=d.getSeconds(),b=(d.getMilliseconds(),"");if(i){var y=i.monthNames.concat(i.monthNamesShort),x=i.dayNames.concat(i.dayNamesShort);n=n.toString()===y.toString()?n:y,r=r.toString()===x.toString()?r:x}for(;l<t.length;){for(a=t.charAt(l),o="";t.charAt(l)==a&&l<t.length;)o+=t.charAt(l++);if("yyyy"==o||"yy"==o||"y"==o){if("yyyy"==o&&(u=4,c=4),"yy"==o&&(u=2,c=2),"y"==o&&(u=2,c=4),null==(p=z(e,s,u,c)))return 0;s+=p.length,2==p.length&&(p=p>70?p-0+1900:p-0+2e3)}else if("MMMM"==o||"MMM"==o||"NNN"==o){h=0;for(var C=0;C<n.length;C++){var _=n[C];if(e.substring(s,s+_.length).toLowerCase()==_.toLowerCase()&&("MMMM"==o||"MMM"==o||"NNN"==o&&C>11)){(h=C+1)>12&&(h-=12),s+=_.length;break}}if(h<1||h>12)return 0}else if("dddd"==o||"EE"==o||"E"==o)for(var w=0;w<r.length;w++){var E=r[w];if(e.substring(s,s+E.length).toLowerCase()==E.toLowerCase()){s+=E.length;break}}else if("MM"==o||"M"==o){if(null==(h=z(e,s,1,2))||h<1||h>12)return 0;s+=h.length}else if("dd"==o||"d"==o){if(null==(g=z(e,s,1,2))||g<1||g>31)return 0;s+=g.length}else if("hh"==o||"h"==o){if(null==(f=z(e,s,o.length,2))||f<1||f>12)return 0;s+=f.length}else if("HH"==o||"H"==o){if(null==(f=z(e,s,o.length,2))||f<0||f>23)return 0;s+=f.length}else if("KK"==o||"K"==o){if(null==(f=z(e,s,o.length,2))||f<0||f>11)return 0;s+=f.length}else if("kk"==o||"k"==o){if(null==(f=z(e,s,o.length,2))||f<1||f>24)return 0;s+=f.length,f--}else if("mm"==o||"m"==o){if(null==(m=z(e,s,o.length,2))||m<0||m>59)return 0;s+=m.length}else if("ss"==o||"s"==o){if(null==(v=z(e,s,o.length,2))||v<0||v>59)return 0;s+=v.length}else if("FFF"==o){if(ff=z(e,s,o.length,3),null==ff||ff<0||ff>999)return 0;s+=ff.length}else if("a"==o||"tt"==o){if("am"==e.substring(s,s+2).toLowerCase())b="AM";else{if("pm"!=e.substring(s,s+2).toLowerCase())return 0;b="PM"}s+=2}else{if(e.substring(s,s+o.length)!=o)return 0;s+=o.length}}if(2==h)if(p%4==0&&p%100!=0||p%400==0){if(g>29)return 0}else if(g>28)return 0;return(4==h||6==h||9==h||11==h)&&g>30?0:(f<12&&"PM"==b?f=f-0+12:f>11&&"AM"==b&&(f-=12),new Date(p,h-1,g,f,m,v));function T(e){for(var t=0;t<e.length;t++)if(-1=="1234567890".indexOf(e.charAt(t)))return!1;return!0}function z(e,t,i,n){for(var r=n;r>=i;r--){var a=e.substring(t,t+r);if(a.length<i)return null;if(T(a))return a}return null}},this.parseDate=function(e){for(var t,i=2==arguments.length&&arguments[1],n=new Array("y-M-d","MMM d, y","MMM d,y","y-MMM-d","d-MMM-y","MMM d"),r=new Array("M/d/y","M-d-y","M.d.y","MMM-d","M/d","M-d"),a=new Array("d/M/y","d-M-y","d.M.y","d-MMM","d/M","d-M"),o=new Array(n,i?a:r,i?r:a),s=0;s<o.length;s++)for(var l=window[o[s]],u=0;u<l.length;u++)if(0!=(t=getDateFromFormat(e,l[u])))return new Date(t);return null},this.analyzeTimeFormat=function(e){for(var t,i,n=0,r={show24Hours:!1,showSeconds:!1,separator:":"},a="";n<e.length;){for(t=e.charAt(n),i="";e.charAt(n)==t&&n<e.length;)i+=e.charAt(n++);"hh"==i||"h"==i?(a=i,r.show24Hours=!1):"HH"==i||"H"==i?(a=i,r.show24Hours=!0):"mm"==i||"m"==i?a=i:"ss"==i||"s"==i?(a=i,r.showSeconds=!0):"a"==i?a=i:"H"!=a.toUpperCase()&&"HH"!=a.toUpperCase()||(r.separator=i)}return r},this.getDateFromInvariant=function(e,t){e="string"!=typeof(e=null==e?"":e)?e.toString():e;var i="MM/dd/yyyy"+(t?" H:mm:ss":"");t&&e&&(e.toLowerCase().indexOf("am")>0||e.toLowerCase().indexOf("pm")>0)&&(i="MM/dd/yyyy h:mm:ss a");var n=bizagi.util.dateFormatter.getDateFromFormat(e,i);return 0!=n||t?0==n&&t&&null!=e&&""!=e&&(i="MM/dd/yyyy",(n=bizagi.util.dateFormatter.getDateFromFormat(e,i)).setHours(0,0,0,0)):(i="MM/dd/yyyy H:mm:ss",n=bizagi.util.dateFormatter.getDateFromFormat(e,i)),n},this.formatInvariant=function(e,t){var i="MM/dd/yyyy"+(t?" HH:mm:ss":"");return bizagi.util.dateFormatter.formatDate(e,i)},this.getDateFromISO=function(e,t){var i="yyyy-MM-dd"+(t?" HH:mm":""),n=bizagi.util.dateFormatter.getDateFromFormat(e,i);return 0==n&&t&&(i="yyyy-MM-dd"+(t?" HH:mm:ss":""),n=bizagi.util.dateFormatter.getDateFromFormat(e,i)),0!=n||t||(i="yyyy-MM-dd HH:mm",0==(n=bizagi.util.dateFormatter.getDateFromFormat(e,i))&&(i="yyyy-MM-dd HH:mm:ss",n=bizagi.util.dateFormatter.getDateFromFormat(e,i))),n},this.formatISO=function(e,t){var i="yyyy-MM-dd"+(t?" HH:mm":"");return bizagi.util.dateFormatter.formatDate(e,i)},this.formatISO8601=function(e,t){return(t=t||!1)&&e.setHours(0,0,0,0),bizagi.util.dateFormatter.formatDate(e,"yyyy-MM-ddTHH:mm:ss")},this.isFormatISO8601=function(e){return/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(([+-]\d\d:\d\d)|Z)?$/i.test(e)},this.sleep=function(e){for(var t=(new Date).getTime();(new Date).getTime()<t+e;);},this.getDateFormatByDatePickerJqueryUI=function(){return bizagi.localization.getResource("dateFormat").replace("yyyy","yy")}},bizagi.util.browserSupportLocalStorage=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}},bizagi.util.setItemLocalStorage=function(e,t){return!!bizagi.util.browserSupportLocalStorage()&&(localStorage.setItem(e,t),!0)},bizagi.util.getItemLocalStorage=function(e){return localStorage.getItem(e)},bizagi.util.removeItemLocalStorage=function(e){localStorage.removeItem(e)},bizagi.util.clearLocalStorage=function(){bizagi.util.browserSupportLocalStorage()&&localStorage.clear()},"debug"==("undefined"!=typeof BIZAGI_ENVIRONMENT?BIZAGI_ENVIRONMENT:"release")?"object"!=typeof window.console&&(window.console={log:function(e){}}):"object"!=typeof console?window.console={log:function(e){}}:bizagiConfig&&!bizagiConfig.showConsoleLog&&(console.log=function(e){}),bizagi.util.smartphone.startLoading=function(e){(e||$("body")).append('<div class="bz-util-loading-container"> <div class="ui-bizagi-loading-icon bz-util-loading"></div>  </div>')},bizagi.util.smartphone.stopLoading=function(e){var t=e||$("body");$(".bz-util-loading-container",t).remove()},bizagi.util.isEventSupported=function(e,t){var i,n=!("onblur"in document.documentElement);return!!e&&(t&&"string"!=typeof t||(t=document.createElement(t||"div")),!(i=(e="on"+e)in t)&&n&&(t.setAttribute||(t=document.createElement("div")),t.setAttribute&&t.removeAttribute&&(t.setAttribute(e,""),i="function"==typeof t[e],void 0!==t[e]&&(t[e]=void 0),t.removeAttribute(e))),i)},bizagi.circularDependencies=function(){var e=(new Function).prototype;e.list=[],e.lastNodeAdded,e.addNode=function(t,i){var n=JSON.encode(i),o=r(t,n);if(!o){var s=new a(t,n);return e.list.push({name:t,obj:n,nodeObj:s,timeStamp:(new Date).getTime()}),s}(e.lastNodeAdded||e.list[e.list.length-1]).nodeObj.addChild(o.nodeObj),e.lastNodeAdded=o},e.resolve=function(t,i,r){return t=t||n()||e.list[0].nodeObj,new o(t,i,r)};var t,i,n=function(){for(var t=0;t<e.list.length;t++)if(e.list[t].nodeObj.childs.length>0)return e.list[t].nodeObj;return e.list.length>0?e.list[0].nodeObj:{}},r=function(t,i){for(var n=0;n<e.list.length;n++)if(e.list[n].name==t){var r=(new Date).getTime();if(e.list[n].timeStamp+1e3<r)e.list.splice(n,1);else if(e.list[n].obj==i)return e.list[n]}return!1},a=function(e,t){e=e||"",t=t||{};var i=function(e,t){this.name=e,this.obj=t,this.childs=[]};return i.prototype.addChild=function(e){this.childs.push(e)},i}(),o=((i=(t=function(n,r,a){this.node=n||{},this.node.childs=this.node.childs||[],this.resolved=r||[],this.seen=a||[],this.seen.push(this.node);for(var o=0;o<this.node.childs.length;o++)if(!i.hasObject(this.node.childs[o],this.resolved)){if(i.hasObject(this.node.childs[o],this.seen)){e.list=[];var s={dependencyFrom:this.node.name,dependencyFromObj:this.node.obj,dependencyTo:this.node.childs[o].name,dependencyToObj:this.node.childs[o].obj,path:this.seen};return{error:$.extend({standardError:{status:"error",responseText:JSON.encode({message:i.makeErrorMessage(s),type:"alert"})},multiactionError:{message:i.makeErrorMessage(s),type:"alert"}},s)}}return t(this.node.childs[o],this.resolved,this.seen)}this.resolved&&this.resolved.push(this.node)}).prototype).hasObject=function(e,t){for(var i=0;i<t.length;i++)if(t[i].name==e.name)return!0;return!1},i.makeErrorMessage=function(e){return printf(bizagi.localization.getResource("render-actions-loop-validation"),e.dependencyFrom,e.dependencyTo)},t);return e},bizagi.util.cssExtended=function(e,t){var n=t.split(";");for(i=0;i<n.length;i++)""!=n[i]&&bizagi.util.cssExtendedApplyChanges(e,n[i])},bizagi.util.cssExtendedApplyChanges=function(e,t){for(var i=0;i<e.length;i++){var n=$(e[i]),r=t.split(":")[0];if(n.attr("style")){var a=n.attr("style").split(";"),o=[],s="";for(j=0;j<a.length;j++){var l=a[j].split(":");$.trim(l[0])!=r&&""!=$.trim(l[0])&&o.push(l[0]+":"+l[1]+";"),s=JSON.stringify(o).replace(/\","/g," ").replace(/\["/g," ").replace(/\"]/g," ")}s="[]"==s?"":s,n.attr("style",s+t+";")}else if(n.css(r)){a=n.css(r),s="";(o=[]).push(t+";"),s="[]"==s?"":s,n.attr("style",s+t+";")}}},bizagi.util.scrollTop=function(e){if(e&&e[0])for(;"HTML"!==e[0].tagName&&"scroll"!=e.css("overflow-y")&&"auto"!=e.css("overflow-y")&&e.parent().length>0;)e=e.parent();return e},bizagi.util.sortJSON=function(e,t,i){return e.sort(function(e,n){var r=e[t],a=n[t];return"asc"===i?r<a?-1:r>a?1:0:"desc"===i?r>a?-1:r<a?1:0:void 0})},bizagi.util.shortNumber=function(e){var t=e.toString(),i=t.length;return i>=4&&i<7?t="+"+t.charAt(0)+"K":i>=7&&i<10?t="+"+t.charAt(0)+"M":i>=10&&(t="+"+t.charAt(0)+"B"),"&nbsp;&nbsp;&nbsp;"+t},bizagi.util.replaceLineBreak=function(e){return"string"==typeof e?e.replace(/\r\n|\r|\n|<br>|<br\/>/g,"<br/>"):e},bizagi.util.escapeHtml=function(e){var t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.innerHTML},bizagi.util.formatMonetaryCell=function(e){return bizagi.util.formatMoney(e,BIZAGI_DEFAULT_CURRENCY_INFO)},bizagi.util.formatDecimalCell=function(e){var t,i={decimalSymbol:BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator,digitGroupSymbol:BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator,roundToDecimalPlace:BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits};t=$.extend({colorize:!1,decimalSymbol:".",digitGroupSymbol:",",groupDigits:!0,negativeFormat:"(%s%n)",positiveFormat:"%s%n",roundToDecimalPlace:"2",symbol:""},i);var n=bizagi.util.formatDecimal(e,t);if(!0===bizagi.override.removeTrailingZeros){var r=!0;-1!=n.toString().indexOf(")")&&(r=!1,n=n.replace("(","").replace(")",""));var a=new RegExp("("+BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator+"\\d*?[1-9])0+$","g");n=n.replace(a,"$1"),a=new RegExp("\\"+BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator+"0+$","g"),n=n.replace(a,""),r||(n="("+n+")")}return n},bizagi.util.showNotification=function(e){e=e||{};var t=$('<div id="sync-notification" class="bz-cm-icon"></div>').text(e.text||"");t.appendTo($("body")),t.fadeIn(1500,function(){t.stop()}),t.fadeOut(2e3,function(){t.remove()})},bizagi.util.isModeOnline=function(){return void 0!==bizagi.context.isOfflineForm&&!bizagi.context.isOfflineForm},bizagi.util.dispose=function(e){for(key in e)switch(typeof e[key]){case"object":delete e[key];break;case"function":e[key]=null,delete e[key]}},bizagi.util.arrayEach=function(e,t){var i;if(e)if("[object Array]"===Object.prototype.toString.apply(e)&&"[object Function]"===Object.prototype.toString.apply(t)){for(i in e)if(e.hasOwnProperty(i)&&!1===t.call(e[i],i,e[i]))return}else $.each(e,t)},bizagi.util.getStandardNotation=function(e,t){t=t||".";var i="",n=!1,r=!1;e=(e.length>0?e.toString().toLowerCase():"").replace(/ /g,"");for(var a=0;a<e.length;a++)("+"!==e[a]&&"-"!==e[a]||0!==a&&"e"!=e[a-1])&&isNaN(Number(e[a]))?e[a]!==t||n?"e"!==e[a]||r||(i+=e[a],r=!0):(i+=e[a],n=!0):i+=e[a];return i},bizagi.util.scientificNotationFormat=function(e,t,i,n,r){t=t||".",e=bizagi.util.getStandardNotation(e,t),i=i>0?i:38,n=n>0?n:-125,r=r>0?r:125;var a=new RegExp("[0-9]+("+t+"[0-9]+)?(e[+-]?[0-9]+)?"),o=e.match(a),s=0,l="-"===e[0]?e[0]:"",u=0;if(e=e.replace(l,""),o&&o[0]&&o[2]){var c=o[0]?o[0].replace(o[2],"").split(t):"",d="",p="";return c[0]=c[0].replace(/^0+/g,""),c[0].length>1?(u=(d=c[0].slice(1)).length,p=c[0][0]||"",d=d.concat(o[1]||"")):1===c[0].length?(p=c[0][0]||"",d=d.concat(c[1]||"")):(u=c[1].length,c[1]=c[1].replace(/^0+/g,""),u=c[1].length-1-u,p=c[1][0],d=c[1].slice(1)),(d=d.replace(t,"").replace(/0+$/g,"")).length>=i&&(d=d.slice(0,i-1)),l+p+(d?t+d:"")+"e"+((s=(s=Number(o[2].replace("e",""))+u)>r?r:s<n?n:s)>0?"+"+s:s)}if(e){u=e.indexOf(t);var h=0,g=e.length-1;e=e.replace(t,"");for(var f=h;!m;)"0"!==e[f]&&e[f]!==t?(m=!0,h=f):f++;for(var m=!1,v=g;!m;)"0"!==e[v]&&e[v]!==t?(m=!0,g=v+1):v--;if(g=g>i+h?i+h:g,-1!==u){m=!1;return s=u-(h+1),(d=e.slice(h,g)).length>0&&!isNaN(Number(d[0]))?l+d[0]+(d.length>1?t+d.slice(1):"")+"e"+(s>0?"+"+s:s):"0"}var b=e.slice(h,h+1),y=e.slice(h+1,e.length);return s=y.length,(y=y.replace(/0+$/g,"")).length>i&&(y=e.slice(h+1,i+h)),Number(b)?l+b+(y.length>0?t+y:"")+"e"+(s>0?"+"+s:s):"0"}return""},bizagi.util.stripslashes=function(e){return e.replace(/\\'/g,"'").replace(/\"/g,'"').replace(/\\\\/g,"\\").replace(/\\0/g,"\0")},bizagi.util.isHTMLValidText=function(e){return new RegExp(/<(.|\n)*?>/g).test(e)},bizagi.util.resetData=function(){var e=JSON.parse(sessionStorage.getItem("bizagiAuthentication"));sessionStorage.removeItem("bizagiAuthentication"),$.extend(e,{isAuthenticate:"false"}),sessionStorage.setItem("bizagiAuthentication",JSON.encode(e))},bizagi.util.changeData=function(e){var t=JSON.parse(sessionStorage.getItem("bizagiAuthentication"));sessionStorage.removeItem("bizagiAuthentication"),$.extend(t,e),sessionStorage.setItem("bizagiAuthentication",JSON.encode(t))},bizagi.util.isMobileDevice=function(){var e=bizagi.detectDevice();return["smartphone_ios","smartphone_ios_native","smartphone_android","smartphone_android_native","tablet","tablet_ios","tablet_ios_native","tablet_android","tablet_android_native"].indexOf(e)>-1},bizagi.util.isTabletDevice=function(){var e=bizagi.util.detectDevice();return["tablet","tablet_ios","tablet_ios_native","tablet_android","tablet_android_native"].indexOf(e)>-1},bizagi.util.isAndroidTabletDevice=function(){var e=bizagi.util.detectDevice();return bizagi.util.isTabletDevice()&&-1!==e.indexOf("android")},bizagi.util.isiOSTabletDevice=function(){var e=bizagi.util.detectDevice();return bizagi.util.isTabletDevice()&&!(-1===e.indexOf("android"))},bizagi.util.isSmartphoneDevice=function(){var e=bizagi.util.detectDevice();return["smartphone_ios","smartphone_ios_native","smartphone_android","smartphone_android_native"].indexOf(e)>-1},bizagi.util.isAndroidSmartphoneDevice=function(){var e=bizagi.util.detectDevice();return bizagi.util.isSmartphoneDevice()&&-1!==e.indexOf("android")},bizagi.util.isiOSSmartphoneDevice=function(){var e=bizagi.util.detectDevice();return bizagi.util.isSmartphoneDevice()&&-1!==e.indexOf("ios")},bizagi.util.isOfflineForm=function(e){if(!bizagi.util.isTabletDevice()||void 0===e)return!1;var t=e.context||null,i=e.container||null,n=null!==i?i:null!==t?t.getFormContainer():null;if(null===n)return!1;var r=n.getParams()||{};return void 0!==r.isOfflineForm&&bizagi.util.parseBoolean(r.isOfflineForm)},bizagi.util.detectAndroidVersion=function(){var e=navigator.userAgent.toLowerCase().indexOf("android"),t=navigator.userAgent.toLowerCase().substring(e+8,e+13);return t=t.replaceAll(".",""),Number(t)},bizagi.util.getPathUrl=function(e){var t="",i=location.pathname.split("/"),n=location.protocol+"//"+location.host;if("/"==BIZAGI_PATH_TO_BASE[0])t=n+BIZAGI_PATH_TO_BASE+e;else{for(var r=BIZAGI_PATH_TO_BASE.split("../").length,a=0,o=i.length;a<o-r;a++)n+=i[a]+"/";t=(n="/"===n[n.length-1]?n:n+"/")+e}return t},bizagi.util.getAndroidVersion=function(){var e=navigator.userAgent.toLowerCase().match(/android\s([0-9\.]*)/);return!!e&&parseFloat(e[1])},bizagi.util.mobileImagePath=function(e){var t=e,i=bizagi.util.getAndroidVersion();if(!i)return t;if("content://com.android"===t.substring(0,21)&&i<=4.4){var n=t.split("%3A");t=n.length>1?"content://media/external/images/media/"+n[1]:"content://media/external/images/media/"+(n=t.split("/"))[n.length-1]}return t},bizagi.util.isValidResource=function(e){return!!bizagi.localization&&bizagi.localization.getResource(e)!==e},bizagi.util.b64toBlob=function(e,t,i){t=t||"",i=i||512;for(var n=atob(e),r=[],a=0;a<n.length;a+=i){for(var o=n.slice(a,a+i),s=new Array(o.length),l=0;l<o.length;l++)s[l]=o.charCodeAt(l);var u=new Uint8Array(s);r.push(u)}return new Blob(r,{type:t})},bizagi.util.stringToByteArray=function(e){for(var t=new Uint8Array(e.length),i=0;i<e.length;i++)t[i]=255&e.charCodeAt(i);return t},bizagi.util.hasOfflineFormsEnabled=function(){return"undefined"!=typeof BIZAGI_ENABLE_OFFLINE_FORMS&&!0===bizagi.util.parseBoolean(BIZAGI_ENABLE_OFFLINE_FORMS)},bizagi.util.isFlatDesignEnabled=function(){return"undefined"!=typeof BIZAGI_ENABLE_FLAT&&!0===bizagi.util.parseBoolean(BIZAGI_ENABLE_FLAT)},bizagi.util.isMobileGridEnabled=function(){return"undefined"!=typeof BIZAGI_ENABLE_MOBILE_GRID&&!0===bizagi.util.parseBoolean(BIZAGI_ENABLE_MOBILE_GRID)},bizagi.util.isNativeHeaderEnabled=function(){return"undefined"!=typeof NATIVE_HEADER_ENABLE&&!0===bizagi.util.parseBoolean(NATIVE_HEADER_ENABLE)},bizagi.util.isQuickSearchEnabled=function(){return"undefined"!=typeof BIZAGI_ENABLE_QUICK_SEARCH&&!0===bizagi.util.parseBoolean(BIZAGI_ENABLE_QUICK_SEARCH)},bizagi.util.isOAuth2Enabled=function(){return"undefined"!=typeof BIZAGI_AUTH_TYPE&&"OAuth"===BIZAGI_AUTH_TYPE},bizagi.util.getNativeComponent=function(){return"undefined"!=typeof BIZAGI_NATIVE_COMPONENT?BIZAGI_NATIVE_COMPONENT:""},bizagi.util.isVersionSupported=function(){var e=!0;if("undefined"!=typeof BIZAGI_SERVER_VERSION&&!bizagi.util.isEmpty(BIZAGI_SERVER_VERSION)){var t=BIZAGI_SERVER_VERSION.match(/\d+\.\d+/);e=!t||parseFloat(t.shift())>=11}return e},bizagi.util.isCordovaSupported=function(){return"undefined"!=typeof cordova},bizagi.util.isNativePluginSupported=function(){return"undefined"!=typeof bizagiapp},bizagi.util.isTabletNativeSupported=function(){return"undefined"!=typeof bizagiapp&&bizagi.util.isTabletDevice()},bizagi.util.isSmartphoneNativeSupported=function(){return"undefined"!=typeof bizagiapp&&bizagi.util.isSmartphoneDevice()},bizagi.util.isNativePluginSupported()&&window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!1),bizagi.util.detectRealDevice=function(){var e="undefined"==typeof BIZAGI_DEFAULT_DEVICE||bizagi.util.isEmpty(BIZAGI_DEFAULT_DEVICE)?null:BIZAGI_DEFAULT_DEVICE;BIZAGI_DEFAULT_DEVICE="";var t=bizagi.detectDevice();return BIZAGI_DEFAULT_DEVICE=e,t},bizagi.util.isAndroid=function(){return navigator.userAgent.toLowerCase().indexOf("android")>-1},bizagi.util.isAndroidDevice=function(){return bizagi.util.detectDevice().indexOf("android")>-1},bizagi.util.isiOSDevice=function(){return-1===bizagi.util.detectDevice().indexOf("android")},bizagi.util.getChannelType=function(){return"undefined"==typeof BIZAGI_SERVER_CHANNEL||bizagi.util.isEmpty(BIZAGI_SERVER_CHANNEL)?bizagi.loader.channel||"":BIZAGI_SERVER_CHANNEL},bizagi.util.isDataUrl=function(e){try{return!!e.toString().match(/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i)}catch(e){}return!1},bizagi.util.getDataUrl=function(e){var t;try{if(void 0===e.value||bizagi.util.isEmpty(e.value))t=e.url||"";else{var i=e.value,n=i.value||i;if(Array.isArray(n)){var r=n.shift();t=Array.isArray(r)?r.join(""):r}else t=n}t=bizagi.util.isEmpty(t)?"":"data:image/png;base64,"+t.replace(/^data:.*;base64,/,"")}catch(e){t=""}return t},bizagi.util.processFailMessage=function(e){var t=e||{};try{t=(t="string"==typeof t?JSON.parse(t):t).responseText||t.message||t}catch(i){t=e}return t};var tmp_block_header="<div class='blockHeaderByLiveProcess'></div>";function initBizagi(){0!=bizagi.loader.initialized?((bizagi=void 0!==bizagi?bizagi:{}).enableCustomizations="undefined"==typeof BIZAGI_ENABLE_CUSTOMIZATIONS||BIZAGI_ENABLE_CUSTOMIZATIONS,bizagi.enableTrace="undefined"==typeof BIZAGI_ENABLE_LOG||BIZAGI_ENABLE_LOG,bizagi.enableDebug="undefined"!=typeof BIZAGI_ENABLE_LOG&&BIZAGI_ENABLE_LOG,bizagi.enableChrono="undefined"==typeof BIZAGI_ENABLE_LOG||BIZAGI_ENABLE_LOG,bizagi.enableProfiler="undefined"!=typeof BIZAGI_ENABLE_PROFILER?BIZAGI_ENABLE_PROFILER:"true"===bizagi.readQueryString().enableProfiler,bizagi.services.ajax.logSuccess="undefined"==typeof BIZAGI_ENABLE_LOG||BIZAGI_ENABLE_LOG,bizagi.services.ajax.logSubmits="undefined"==typeof BIZAGI_ENABLE_LOG||BIZAGI_ENABLE_LOG,bizagi.proxyPrefix="undefined"!=typeof BIZAGI_PROXY_PREFIX?BIZAGI_PROXY_PREFIX:"",bizagi.UserPreferencesUrl="undefined"!=typeof BIZAGI_USER_PREFERENCES_PAGE?BIZAGI_USER_PREFERENCES_PAGE:"",BIZAGI_PATH_TO_BASE="undefined"!=typeof BIZAGI_PATH_TO_BASE?BIZAGI_PATH_TO_BASE:"",bizagi.resourceDefinitionLocation={custom:bizagi.loader.getResource("l10n","bizagi.custom.resources"),default:bizagi.loader.getResource("l10n","bizagi.resources.default"),ja:bizagi.loader.getResource("l10n","bizagi.resources.ja"),en:bizagi.loader.getResource("l10n","bizagi.resources.en-us"),"en-us":bizagi.loader.getResource("l10n","bizagi.resources.en-us"),es:bizagi.loader.getResource("l10n","bizagi.resources.es"),"es-es":bizagi.loader.getResource("l10n","bizagi.resources.es"),"en-mobile":bizagi.loader.getResource("l10n","bizagi.resources.en-mobile")},$.when($.read(bizagi.proxyPrefix+"Rest/Util/Features")).done(function(e){bizagi.features=e}).fail(function(){}),"boolean"==typeof isWebpart&&!0===isWebpart?$.when($.read(bizagi.proxyPrefix+"Rest/Users/CurrentUserGuid")).done(function(e){assignLanguage(e.language)}).fail(function(){assignLanguage()}):assignLanguage(),bizagi.initialized=!0):setTimeout(initBizagi,100)}function assignLanguage(e){return e=(e=(e=e||bizagi.readQueryString().language)||("undefined"!=typeof BIZAGI_LANGUAGE?BIZAGI_LANGUAGE:null))||"default",bizagi.language=e,bizagi.localization=new bizagi.l10n(bizagi.resourceDefinitionLocation),bizagi.localization.setLanguage(bizagi.language),bizagi.templateService=new bizagi.templates.services.service(bizagi.localization),bizagi.util.isIE&&bizagi.util.isIE()&&bizagi.loader.loadFile({src:bizagi.getStyleSheet("common.ie7"),type:"css"}),window.onerror=function(){bizagi.logError("Uncaught error",{message:arguments[0],file:arguments[1],line:arguments[2]})},bizagi.localization.readyDeferred}bizagi.util.disableWorkPortalMenu=function(){var e=$("body").find("#ui-bizagi-wp-menu").height();$(tmp_block_header).prependTo("body"),$("body").find(".blockHeaderByLiveProcess").css({position:"absolute",width:"100%",height:e+"px",background:"gray",opacity:"0.9","z-index":"101"})},bizagi.util.enableWorkPortalMenu=function(){$("body").find(".blockHeaderByLiveProcess").detach()},bizagi.util.downloadFile=function(e,t){var i=window.navigator.userAgent.indexOf("MSIE "),n="";if(t)n=e;else{var r=e.split("/");n=window.location.href.split("#")[0]+r.slice(r.indexOf("Api"),r.length).join("/")}bizagi.util.isEdge()||i>0||navigator.userAgent.match(/Trident.*rv\:11\./)?0===$("#iframe-download").length?$("<iframe/>").attr({src:n,style:"visibility:hidden;display:none",id:"iframe-download"}).appendTo("body"):$("#iframe-download").attr("src",n):window.open(n)},bizagi.util.executeActionRoutingFromWorkportal=function(e,t){bizagi.workportal.controllers.menu.prototype.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:e,idWorkItem:t})},bizagi.util.getMessageFromNetworkState=function(e){return e?bizagi.localization.getResource("render-without-globalform-offline-userOnline","The case has been created successfully, please wait until the server synchronizes"):bizagi.localization.getResource("render-without-globalform-offline","Your offline case has been created successfully. It will synchronized as soon as you go online.")},bizagi.util.sanitizeHTML=function(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML},bizagi.util.arrayUnique=function(e){for(var t=e.concat(),i=0,n=t.length;i<n;++i)for(var r=i+1;r<n;++r)t[i]===t[r]&&t.splice(r-=1,1);return t},bizagi.util.debounce=function(e,t,i){var n;return function(){var r=this,a=arguments,o=i&&!n;clearTimeout(n),n=setTimeout(function(){n=null,i||e.apply(r,a)},t),o&&e.apply(r,a)}},bizagi.util.isNativeImageEditorSupported=function(){return bizagi.util.isNativePluginSupported()&&bizagi.util.isiOSDevice()&&bizagi.override.enableImageEditor},bizagi.util.errorMessage=function(e){return'<div class="admin-stakeholder-message"> <i class="bz-wp-empty__img"></i> <p class="bz-wp-empty__info bz-wp-empty__info--first"> '+e+"</p></div>"},bizagi.util.validateUrlWellFormed=function(e){if(/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/.test(e)){return/^((http|https):\/\/)/.test(e)||(e="http://"+e),e}return null},bizagi.util.getFeatureObject=function(e){var t=e.split(".");return this.featureObjectCache=this.featureObjectCache||{},e in this.featureObjectCache?this.featureObjectCache[e]:this.featureObjectCache[e]=function(t){var i=bizagi.util.getConfigFeatures();if("string"==typeof e&&void 0!==i){for(var n=i,r=0,a=t.length;r<a;r++)if(void 0===(n=n[t[r]]))return;return n}}(t)},bizagi.util.getConfigFeatures=function(){var e=window.bizagiConfig||bizagiConfig||{};return bizagi.util.isMobileDevice()&&"undefined"!=typeof BIZAGI_MOBILE_FEATURES&&!bizagi.util.isEmpty(BIZAGI_MOBILE_FEATURES)&&(e.features=JSON.parse(BIZAGI_MOBILE_FEATURES||"{}")),e.features},bizagi.util.resetConfigFeatures=function(){bizagi.util.featureObjectCache=void 0},bizagi.util.formatItem=function(e){if(null!=e){if($.isArray(e)){for(var t=0,i=e.length;t<i;t++)null!=e[t]&&"boolean"==typeof e[t]&&(!0===bizagi.util.parseBoolean(e[t])?e[t]=bizagi.localization.getResource("render-boolean-yes"):!1===bizagi.util.parseBoolean(e[t])&&(e[t]=bizagi.localization.getResource("render-boolean-no")));return e.join(" - ")}return e}return""},function(e){e.widget("ui.bizagi_notifications",{options:{containerAdditionalClass:"",headerAdditionalClass:"",contentAdditionalClass:"",itemAdditionalClass:"",itemIcon:"ui-icon-alert",title:"Notifications",minimized:!0,clearEnabled:!0,location:"bottom",device:"desktop"},_init:function(){var t=this,i=t.options,n=t.element;t.counter=0,n.addClass(i.containerAdditionalClass).addClass("ui-bizagi-notifications-container"),"rtl"==i.orientation&&n.addClass("ui-bizagi-notification-reverse"),n.addClass(i.minimized?"ui-bizagi-state-collapsed":"ui-bizagi-state-expanded");var r=e("<div></div>").addClass("ui-bizagi-notifications-content").addClass(i.contentAdditionalClass).addClass("ui-widget-content"),a=e("<div></div>").addClass("ui-bizagi-notifications-header").addClass(i.headerAdditionalClass).addClass("ui-widget-header").addClass("ui-state-active");if(bizagi.util.isTabletDevice()?a.data("expanded",!i.minimized).html("<label>"+i.title+"</label>"):a.data("expanded",!i.minimized).text(i.title),a.mouseenter(function(){n.addClass("ui-bizagi-state-hover")}),a.mouseleave(function(){n.removeClass("ui-bizagi-state-hover")}),t.expandedIcon="bottom"==i.location?"ui-icon-triangle-1-s":"ui-icon-triangle-1-n",t.collapsedIcon="bottom"==i.location?"ui-icon-triangle-1-n":"ui-icon-triangle-1-s","desktop"===i.device?t.headerButton=e("<span />").addClass("ui-bizagi-notifications-box-button").addClass("ui-icon").addClass("ui-icon-closethick").appendTo(a).click(function(){t.hide()}):(a.click(function(){t.onHeaderClick()}),t.headerButton=e("<span />").addClass("ui-bizagi-notifications-box-button").addClass("ui-icon").addClass(i.minimized?t.collapsedIcon:t.expandedIcon).appendTo(a)),i.clearEnabled){var o=e("<span />").addClass("ui-bizagi-notifications-clear-button").appendTo(a).click(function(){t.clearAll(!1)});e("<span />").addClass("ui-icon").addClass("ui-icon-trash").appendTo(o)}n.append(a).append(r),"bottom"==i.location&&n.addClass("ui-bizagi-notifications-container-bottom"),"rtl"==i.orientation&&n.addClass("ui-bizagi-notification-rtl"),i.minimized&&r.hide(),t.content=r,t.header=a},addNotification:function(t,i,n,r,a,o){if(t&&t.replace){var s=this,l=s.options,u=s.element,c=s.batchMode?s.batchContent:s.content,d=o?'data-type="'+o+'"':"";n=n||l.itemIcon,r=r||l.itemAdditionalClass,"string"!=typeof t&&(t=t.toString()),t=(t=(t=bizagi.util.encodeHtml(t.replace(/<(\/?(?:STRONG|FONT))>/gi,"#$1!#"))).replace(/#(\/?(?:STRONG|FONT))!#/gi,"<$1>")).replace(/\n|\r/g,"<br/>");var p=e('<div class="ui-bizagi-notification-item '+r+' ui-widget-content" '+d+'><span class="ui-icon '+n+'" /><label>'+t+"</label></div>").appendTo(c);!s.batchMode&&s._hasScrollBar()&&p[0].scrollIntoView(),p.bind("click",function(){u.triggerHandler("itemClick",{data:i}),a&&a({data:i})}),s.batchMode||s.show(),s.counter++}},clearAll:function(e,t){var i=this.content;e=void 0===e||e;var n=(t=t||{}).clearOnlyServer?"allServer":"";this._getItems(n)&&(i.empty(),this.counter=0,e?this.hide():this.show())},_getItems:function(t){var i=this.content;return""===t||("allServer"===t?e(".ui-bizagi-notification-item",i).length===e(".ui-bizagi-notification-item[data-type=serverMessage]",i).length:void 0)},show:function(){var t=this.element,i=e.getMaxZindex();t.css("z-index",i+1),this.isContentVisible()||t.fadeIn()},hide:function(){var e=this.element;this.isContentVisible()&&e.hide()},count:function(){return this.content.children().size()},_hasScrollBar:function(){var e=this.content;return!!this.isContentVisible()&&bizagi.util.hasScroll(e,"vertical")},onHeaderClick:function(){this.isExpanded()?this.collapse():this.expand()},isExpanded:function(){return 1==this.header.data("expanded")},collapse:function(){this.options;var e=this.element,t=this.headerButton,i=this.header;t.removeClass(this.expandedIcon),t.addClass(this.collapsedIcon),i.data("expanded",!1),e.removeClass("ui-bizagi-state-expanded"),e.addClass("ui-bizagi-state-collapsed"),this.content.hide()},expand:function(){this.options;var e=this.element,t=this.headerButton,i=this.header;t.removeClass(this.collapsedIcon),t.addClass(this.expandedIcon),i.data("expanded",!0),e.removeClass("ui-bizagi-state-collapsed"),e.addClass("ui-bizagi-state-expanded"),this.content.show()},autoFocusFirstError:function(){var t=this.content;window.setTimeout(function(){e("div:first",t).click()},9e3)},initBatch:function(){this.batchMode=!0,this.batchContent=e("<div></div>")},endBatch:function(){this.batchMode=!1,this.batchContent.children().appendTo(this.content),this.batchContent.detach(),this.batchContent=null,this.content.children().length>0&&this.show()},isContentVisible:function(){var e=this.content,t=this.element;return t.length>0&&"none"!=t.css("display")&&e.length>0&&"none"!=e.css("display")}})}(jQuery),function(e){e.widget("ui.bizagi_grid",{options:{id:"no-id",columns:[],sortBy:"",sortType:"asc",showSummary:!1,collapse:!1,collapseState:!1,data:{},indexedData:{},maxColumns:0,buttonsPst:!1,title:"",tableCssClass:"",headerStyles:"",floatingHeader:!1,template:{grid:"",waiting:"",table:"",emptyTable:"",column:"",specialColumn:"",row:"",rowButtons:"",cell:"",specialCell:"",pager:"",buttons:"",dynamicPager:"",summary:"",summaryCell:""},actions:{add:!0,edit:!0,remove:!0,details:!0,allowMore:!1,enableXlsExport:!1,enablePdfExport:!1},mode:"execution"},_init:function(){var t=this,i=t.options,n=t.element;t.page=1,t.changes={},t.totalRows=0,t.totalPages=0,t.data=i.data,t.selectedRow=0,t.components={},t.buttons={},t.asyncCells={},t.scrollableArea=i.scrollableArea||t,t.columnByIndex={},t.columnByName={},t.columnKeyIndex=0,e.each(i.columns,function(e,i){i.key=void 0!==i.key&&i.key,i.label=void 0!==i.label?i.label:i.name,i.sortType="asc",i.tooltip=void 0!==i.tooltip?i.tooltip:"",t.columnByIndex[i.index]=i,t.columnByName[i.name]=i,i.key&&(t.columnKeyIndex=i.index)}),i.sortBy=i.sortBy||t.columnByIndex[0].name,t.columnByName[i.sortBy]?t.columnByName[i.sortBy].sortType=i.sortType:t.columnByName[i.sortBy.split(".")[0]]&&(t.columnByName[i.sortBy.split(".")[0]].sortType=i.sortType),n.addClass("ui-bizagi-grid-wrapper"),n.attr("data-bizagi-id",i.id),t.calculateKeyIndex(),t.collapseState=i.collapseState,t.startLoading(!1)},startLoading:function(t){var i=this;if(t=void 0===t||t,"execution"==i.options.mode&&void 0!==i.options.sortBy){var n=function(){var t=i.element,n=i.options;i.waitingTimeout=null,t.append(e.fasttmpl(n.template.waiting))};t?i.waitingTimeout=setTimeout(n,250):n()}},endLoading:function(){var e=this.element;this.waitingTimeout&&(clearTimeout(this.waitingTimeout),this.waitingTimeout=null),e.empty()},setData:function(e){this.data=e,this.calculateKeyIndex(),this.refresh()},getData:function(){return this.data},calculateKeyIndex:function(){var t=this.options.columns,i=this.data;indexedData={},i.rows&&e.each(i.rows,function(i,n){var r;e.each(t,function(e,t){t.key&&(r=n[e])}),indexedData[r]=n}),this.indexedData=indexedData},getChanges:function(){},refresh:function(){this._cleanComponents(),this._cleanButtons(),this.components={},this.draw()},refreshSummary:function(e){var t=this.options,i=this._getComponent("summary");this.drawing||i&&t.showSummary&&(e?this.refreshSummaryCell(e):(i.empty(),i.append(this.drawSummary()),this.postRenderSummary(i)))},refreshSummaryCell:function(t){this.options;var i=this._getComponent("summary"),n=function(t,i){var n=t.is("[data-bizagi-component=summary-cells]")?t.children():t.find("[data-bizagi-component=summary-cells]").children();return e(n[i])},r=n(i,t),a=this.columnByIndex[t];if(!a.key){var o=this.drawSummaryCell(a);r.replaceWith(o),r=n(i,t),this.onCellReady(a,"summary",r,!1)}},changeCellValue:function(e,t,i){this.indexedData[e]&&(this.indexedData[e][t]=i)},draw:function(){var t=this,i=t.options,n=t.element;if(t.drawing=!0,t.endLoading(),"rtl"==i.orientation)var r=e.fasttmpl(i.template.gridRtl,{label:i.title,buttonsPst:i.buttonsPst,collapse:i.collapse,collapseState:t.collapseState,isDesign:"design"===i.mode});else r=e.fasttmpl(i.template.grid,{label:i.title,buttonsPst:i.buttonsPst,collapse:i.collapse,collapseState:t.collapseState,isDesign:"design"===i.mode});if(r=t.drawTable(r),t.grid=e(r).appendTo(n),t.postRender(t.grid),t.attachPaginator(),t.attachHandlers(),"execution"==i.mode&&i.floatingHeader){var a=t._getComponent("table");e("table",a).stickyTableHeaders({scrollableArea:t.scrollableArea,zIndex:1e3})}0==t.data.rows.length?(t._getComponent("table").hide(),t._getComponent("pager").hide(),t._getButton("remove").hide(),t._getButton("edit").hide(),t._getComponent("dynamicPager").hide(),t._getComponent("emptyTable").show()):(t._getComponent("table").show(),t._getButton("remove").show(),t._getButton("edit").show(),t._getComponent("emptyTable").hide(),i.actions.allowMore?(t._getComponent("dynamicPager").show(),t._getComponent("pager").hide()):(t._getComponent("pager").show(),t._getComponent("dynamicPager").hide()),i.actions.edit&&t._getButton("edit").show(),i.actions.enableXlsExport||i.actions.enablePdfExport?t._getButton("show-grid-export-options").show():t._getButton("show-grid-export-options").css("display","none")),"undefined"!=typeof Windows&&t.grid.find(".bz-rn-grid-data-wraper").addClass("bz-rn-grid-data-wraper-fix-w8"),t.drawing=!1},attachPaginator:function(){},drawTable:function(t){var i=this,n=i.options,r=e.fasttmpl(n.template.table,{showSummary:n.showSummary,tableCssClass:n.tableCssClass}),a=e.fasttmpl(n.template.emptyTable);return r=i._replaceElement(r,"columns",i.drawHeader()),r=i._replaceElement(r,"rows",i.drawBody()),n.showSummary&&(r=i._replaceElement(r,"summary",i.drawSummary())),t=i._replaceElement(t,"pager",i.drawPager()),t=i._replaceElement(t,"buttons",i.drawButtons()),t=i._replaceElement(t,"gridExportOptions",i.drawGridExportOptions()),t=i._replaceElement(t,"rowButtons",i.drawRowButtons()),t=i._replaceElement(t,"dynamicPager",i.drawDynamicPager()),t=i._replaceElement(t,"table",r),t=i._replaceElement(t,"emptyTable",a)},isExactMatch:function(){for(var e=this.options.columns,t=this.options.sortBy,i=0,n=e.length;i<n;)if(t==e[i++].name)return!0;return!1},drawHeader:function(){var t=this,i=t.options,n="",r=!1;return t.exactMatch=t.isExactMatch(),e.each(i.columns,function(e,i){r||(t.options.maxColumns>0?e<=t.options.maxColumns?n+=t.drawColumn(i):(n+=t.drawSpecialColumn(i),r=!0):n+=t.drawColumn(i))}),n},drawColumn:function(t){var i=this.options,n=t.bizAgiProperties||{},r=n.cssclass?n.cssclass:"",a=i.headerStyles?i.headerStyles.header:"";return a+=(""!==a?"; text-align:":"text-align:")+(n.columntitlealign?n.columntitlealign:"center"),e.fasttmpl(i.template.column,e.extend({},t,{isKey:t.key,sortActive:t.name===i.sortBy?t.name===i.sortBy:t.name===i.sortBy.split(".")[0]&&!this.exactMatch&&t.name===i.sortBy.split(".")[0],sortType:i.sortOrder,tooltip:t.tooltip||"",columnCssClass:r,headerLabelStyles:i.headerStyles?i.headerStyles.label:"",headerStyles:a}))},drawSpecialColumn:function(){var t=this.options;return e.fasttmpl(t.template.specialColumn)},drawDynamicPager:function(){var t=this.options;return e.fasttmpl(t.template.dynamicPager)},drawBody:function(){var t=this,i="";return e.each(t.data.rows,function(e,n){i+=t.drawRow(n)}),i},drawRow:function(t,i){var n=this,r=n.options,a=t[n.columnKeyIndex],o=i||!1,s=Math.floor(1e4*Math.random()),l=e.fasttmpl(r.template.row,{key:s,isNewRow:i,businessKey:a}),u="",c=!1;return e.each(t,function(e,t){c||(n.options.maxColumns>0?e<n.options.maxColumns+1?u+=n.drawCell(e,a,t,o):(u+=n.drawSpecialCell(e,a,t),c=!0):u+=n.drawCell(e,a,t,o))}),l=n._replaceElement(l,"cells",u)},drawSummary:function(){var t=this,i=t.options,n=e.fasttmpl(i.template.summary),r="";return e.each(i.columns,function(e,i){t.options.maxColumns>0?e<=t.options.maxColumns&&(r+=t.drawSummaryCell(i)):r+=t.drawSummaryCell(i)}),n=t._replaceElement(n,"summary-cells",r)},drawSummaryCell:function(t){var i=this.options,n=t.bizAgiProperties||{},r=n.columnAlign?n.columnAlign:"center",a=e.fasttmpl(i.template.summaryCell,{hidden:t.hidden||!1,summarizeBy:t.summarizeBy,cellAlign:r}),o=this.onDrawCell(t,"summary",this.calculateSummary(t),!1);return(o=null!=o&&"number"!=typeof o?o.replace("summaryValue",this.calculateSummary(t)):o)||(o=""),"object"==typeof o&&o.done?"resolved"===o.state()?a=this._replaceElement(a,"cellContent",this.resolveResult(o)):(a=this._replaceElement(a,"cellContent",""),this.asyncCells[key+"-"+columnIndex]=o):a=this._replaceElement(a,"cellContent",o),a},drawCell:function(t,i,n,r){var a=this,o=a.options;r=r||!1;var s="";if(!a.columnByIndex[t])return"";t>0&&(s=a.columnByIndex[t].bizAgiProperties&&a.columnByIndex[t].bizAgiProperties.messageValidation);var l=a.columnByIndex[t].bizAgiProperties||{},u=l.cssclass?l.cssclass:"",c=l.columnAlign?l.columnAlign:"center",d=e.fasttmpl(o.template.cell,{isKey:a.columnByIndex[t].key,hidden:o.columns[t].hidden||!1,isDesign:"design"===o.mode,messageValidation:s,columnCssClass:u,id:o.columns[t].bizAgiProperties?o.columns[t].bizAgiProperties.id:void 0,cellAlign:c}),p=a.onDrawCell(a.columnByIndex[t],i,n,r);return p||(p=""),"object"==typeof p&&p.done?"resolved"===p.state()?d=a._replaceElement(d,"cellContent",a.resolveResult(p)):(d=a._replaceElement(d,"cellContent",""),a.asyncCells[i+"-"+t]=p):d=a._replaceElement(d,"cellContent",p),a.columnByIndex[t].cell=e(d),d},resolveResult:function(e){var t;return e.done(function(e){t=e}),t},drawSpecialCell:function(t){var i=this.options;return this.columnByIndex[t]?e.fasttmpl(i.template.specialCell):""},drawGroupHeader:function(){},drawFooter:function(){},drawPager:function(){for(var t=this.options,i=[],n=1;n<=this.data.total;n++)i.push({number:n,active:n==this.data.page});return e.fasttmpl(t.template.pager,{page:this.data.page,pages:i,records:this.data.records})},drawButtons:function(){var t=this.options,i=t.tooltips||{},n=e.extend(t.actions,i);return this._canShowButtons()?"rtl"==t.orientation?e.fasttmpl(t.template.buttonsRtl,n):e.fasttmpl(t.template.buttons,n):""},drawGridExportOptions:function(){var t=this.options,i=t.actions;tooltips=t.tooltips||{};var n=e.extend({enableXlsExport:i.enableXlsExport,enablePdfExport:i.enablePdfExport},tooltips);return e.fasttmpl(t.template.exportOptions,n)},drawRowButtons:function(){var t=this.options;return this._canShowRowButtons()?"rtl"===t.orientation?e.fasttmpl(t.template.rowButtons.rtl,t.actions):e.fasttmpl(t.template.rowButtons,t.actions):""},postRender:function(){var t=this,i=t.options,n=t._getComponent("cells");if(n&&e.each(n,function(i,n){n=e(n),t.postRenderRow(n)}),i.showSummary){var r=t._getComponent("summary");t.postRenderSummary(r)}t._triggerHandler("gridControlReady")},postRenderRow:function(t){var i=this,n=t.attr("data-business-key"),r=t.attr("data-new-row"),a=t.is("[data-bizagi-component=cells]")?t.children():t.find("[data-bizagi-component=cells]").children();e.each(a,function(t,a){var o=i.columnByIndex[t];if(!o.key){var s=i.asyncCells[n+"-"+o.index];s?e.when(s).done(function(t){(a=e(a)).append(t),i.onCellReady(o,n,a,r)}):i.onCellReady(o,n,e(a),r)}})},postRenderSummary:function(t){var i=this,n=t.is("[data-bizagi-component=summary-cells]")?t.children():t.find("[data-bizagi-component=summary-cells]").children();e.each(n,function(t,n){var r=i.columnByIndex[t];if(!r.key){var a=i.asyncCells[key+"-"+r.index];a?e.when(a).done(function(t){(n=e(n)).append(t),i.onCellReady(r,"summary",n,!1)}):i.onCellReady(r,"summary",e(n),!1)}})},attachHandlers:function(){},selectDynamicPager:function(){this.onDynamicPager()},changePage:function(e){var t=Number(this.data.page),i=this.data.total,n=e;if("previous"===e){if(!(t>1))return;n=t-1}if("next"===e){if(!(t<i))return;n=t+1}this._cleanComponents(),this.page=Number(n),this.onPageRequested()},isValid:function(){return this._triggerHandler("isValid")},sortBy:function(e,t){var i=this.options,n=this.columnByIndex[e];if(void 0===i.sortBy)return!0;void 0===n.name&&(n.name=n.label),t=n.name==i.sortBy?t||("asc"==i.sortOrder?"desc":"asc"):n.name==i.sortBy.split(".")[0]?t||("asc"==i.sortType?"desc":"asc"):t||i.sortType,i.sortBy.split(".").length>1?(i.sortBy.split(".")[0],n.name,i.sortBy=n.name):i.sortBy=n.name,void 0!==n.bizAgiProperties.sortAttribute&&-1!==n.bizAgiProperties.type.indexOf("column")&&(i.sortBy=n.name+"."+n.bizAgiProperties.sortAttribute),i.sortColumn=n,i.sortType=t,i.sortOrder=t,this._cleanComponents(),this.onSortRequested()},selectRow:function(e,t){this.selectedRow==e?(this.onRowUnselected(),this.selectedRow=0,this.selectedBusinessKey=0):(0!=this.selectedRow&&this.onRowUnselected(),this.selectedRow=e,this.selectedBusinessKey=t,this.onRowSelected())},unselectRow:function(){0!=this.selectedRow&&(this.onRowUnselected(),this.selectedRow=0,this.selectedBusinessKey=0)},calculateSummary:function(t){var n=this,r=t.summarizeBy;e.each(n.data.rows,function(e,i){void 0!==n.data.rows[e][t.index]&&null==n.data.rows[e][t.index]&&null!=t.bizAgiProperties.defaultvalue&&(n.data.rows[e][t.index]=t.bizAgiProperties.defaultvalue)});var a,o=e.map(n.data.rows,function(e,i){return e[t.index]});if(0==o.length)return 0;if("sum"===r)a=0,e.each(o,function(e,t){null!=t&&(a+=Number(t))});else if("min"===r)a=o[0]||0,e.each(o,function(e,t){"number"==typeof t&&null!=t&&t<a&&(a=Number(t))}),a===Math.max()&&(a=null);else if("max"===r)a=o[0]||0,e.each(o,function(e,t){"number"==typeof t&&null!=t&&t>a&&(a=Number(t))}),a===Math.min()&&(a=null);else if("avg"===r)a=0,e.each(o,function(e,t){null!=t&&(a+=Number(t))}),a/=o.length;else if("count"===r)for(a=0,o=n.data.rows,i=0;i<o.length;i++){var s=o[i][t.index];s instanceof Array&&s.length>0?a+=1:s instanceof Array||null===s||""===s||(a+=1)}return a},processAction:function(e,t){"add"==e&&this.onAddRow(),"edit"==e&&this.onEditRow(),"remove"==e&&this.onDeleteRow(),"more"==e&&this.onShowMore(t.key),"details"==e&&this.onShowDetails(t),"show-grid-export-options"==e&&this.onShowExportGridOptions()},onPageRequested:function(){return this.startLoading(),this._triggerHandler("pageRequested",this._buildRefreshParameters())},onSortRequested:function(){return this.startLoading(),this._triggerHandler("sortRequested",this._buildRefreshParameters())},onRowSelected:function(){return this._triggerHandler("rowSelected",{key:this.selectedBusinessKey})},onRowUnselected:function(){return this._triggerHandler("rowUnselected",{key:this.selectedBusinessKey})},onCollapseGrid:function(){return this._triggerHandler("performCollapseGrid")},onDynamicPager:function(){return this._triggerHandler("moreRows",{key:this.selectedBusinessKey})},onDrawCell:function(e,t,i,n){return this._triggerHandler("drawCell",{column:e,key:t,value:i,isNewRow:n})},onCellReady:function(e,t,i,n){return this._triggerHandler("cellReady",{column:e,key:t,cell:i,isNewRow:n})},onDrawControl:function(){},onDrawGroupHeader:function(){},onAddRow:function(){return this._triggerHandler("addRow")},onEditRow:function(){return this._triggerHandler("editRow",{key:this.selectedBusinessKey})},onDeleteRow:function(){return this._triggerHandler("deleteRow",{key:this.selectedBusinessKey})},onShowMore:function(e){return this._triggerHandler("showMore",{key:e})},onShowDetails:function(){return this._triggerHandler("showFormDetails",{key:this.selectedBusinessKey})},onShowExportGridOptions:function(){return this._triggerHandler("showGridExportOptions")},_replaceElement:function(e,t,i){return e.replace("{{element "+t+"}}",i)},_buildRefreshParameters:function(){var e=this.options,t=null!=e.sortColumn?e.sortColumn.index:1;return{page:this.page,sortBy:e.sortBy,sortType:e.sortOrder,sortColumnIndex:t}},_triggerHandler:function(e,t){var i=this.options[e];return i?i.call(this.element[0],t):null},_getComponent:function(t){var i=this.element;if(!this.components[t]){var n=e("[data-bizagi-component="+t+"]",i);null!=n&&n.length>0&&(this.components[t]=n)}return this.components[t]},_getButton:function(t){var i=this.element;return this.buttons[t]||(this.buttons[t]=e("[data-action="+t+"]",i)),this.buttons[t]},_cleanComponents:function(){this.components={}},_cleanButtons:function(){this.buttons={}},_canShowButtons:function(){return!0},_canShowRowButtons:function(){return!0}})}(jQuery),function(e){e.widget("ui.bizagi_grid_tablet",e.ui.bizagi_grid,{attachHandlers:function(){var t=this;t._getComponent("pager").find("ul li").bind("click",function(){var i=parseInt(e(this).attr("data-page-number"));i&&t.changePage(i)}),t._getComponent("dynamicPager").find("input").bind("click",function(){t.selectDynamicPager()}),t._getComponent("columns").find(".ui-bizagi-grid-column").bind("click",function(){if(t.isModeOnline()){var i=e(this).attr("data-column-index");t.sortBy(i)}}),t._getComponent("rows").find("tr").bind("click",function(){var i=e(this).attr("data-key"),n=e(this).attr("data-business-key");t.selectRow(i,n)}),t._getComponent("buttons").find("[data-action]").bind("click",function(){"totalizer"===e(this).attr("data-action")?t.totalizer():(t.processAction(e(this).attr("data-action")),t.unselectRow())}),t._getComponent("rowButtons").find("[data-action]").bind("click",function(){t.processAction(e(this).attr("data-action")),t.unselectRow()}),t._getComponent("rows").find("[data-action=more]").bind("click",function(i){i.stopPropagation();var n=e(this).parents("[data-bizagi-component=cells]").attr("data-business-key");t.processAction(e(this).attr("data-action"),{key:n})})},totalizer:function(){this.options.totalData()},onRowSelected:function(){e.ui.bizagi_grid.prototype.onRowSelected.apply(this,arguments),this._showRowButtons()},onRowUnselected:function(){e.ui.bizagi_grid.prototype.onRowUnselected.apply(this,arguments),this._hideRowButtons()},getCell:function(t,i,n){var r=this._getComponent("rows").find("[data-business-key="+t+"]"),a="";return a=n<4?e("td",e(r))[n+1]:e("td:visible",e(r))[n],e(a)},_canShowButtons:function(){var e=this.options.actions;return this.isModeOnline()?e.add:e.add||e.remove||e.edit||e.inlineAdd},drawPager:function(){var t=this,i=t.options,n=[];renderPages=[];for(var r=1;r<=t.data.total;r++)n.push({number:r,active:r==t.data.page});t.data.page<3||t.data.page>t.data.total-2?renderPages=[]:renderPages=[t.data.page-1,t.data.page,t.data.page+1];var a={renderPages:renderPages,pages:n,pagination:{totalPages:t.data.total,currentPage:t.data.page}};return e.fasttmpl(i.template.pager,a)},_canShowRowButtons:function(){var e=this.options.actions;return!!this.isModeOnline()&&(e.edit||e.remove)},_showRowButtons:function(){var t=this,i=window.document,n=t.element,r=n.find("[data-bizagi-component=rows] tr[data-key="+t.selectedRow+"]");if(r.addClass("ui-bizagi-state-selected"),t.isModeOnline()){var a=t._getComponent("rowButtons");a.show(),a.find(".ui-bizagi-grid-row-buttons").show(),a.position({my:"right",at:"left",of:r,collision:"none",offset:"-5 0"}),a.css("left")&&Number(a.css("left").replace("px",""))<0&&a.css("left","0"),setTimeout(function(){a.click(function(e){e.stopPropagation()}),n.find("[data-bizagi-component=rows]").click(function(e){e.stopPropagation()}),e(i).one("click",function(){t.unselectRow()})},100)}else{t._getComponent("buttons").find("[data-action=remove]").removeClass("ui-grid-buttons-hidden")}},_hideRowButtons:function(){(e.ui.bizagi_grid.prototype.onRowUnselected.apply(this,arguments),this._getComponent("rows").find("tr[data-key="+this.selectedRow+"]").removeClass("ui-bizagi-state-selected"),this.isModeOnline())?this._getComponent("rowButtons").hide():this._getComponent("buttons").find("[data-action=remove]").addClass("ui-grid-buttons-hidden")},getNewRowKeys:function(t){return t=t||this._getComponent("rows").find("[data-new-row=true]"),e.map(t,function(t,i){return e(t).data("business-key")})},processAction:function(t){e.ui.bizagi_grid.prototype.processAction.apply(this,arguments),"save"===t&&this.onSaveAddedRows(),"cancel"===t&&this.onCancelEdition()},isNewRecord:function(t){var i=this._getComponent("rows");return!(!i||(t=i.find("[data-business-key='"+t+"']"),!e(t).data("new-row")))},addInlineRow:function(){var t=this;t._triggerHandler("beforeInlineAdd");var i=t.drawRow(t.createAddRowData(),!0),n=e(i);t.postRenderRow(n),t._getComponent("rows").append(n);var r=t._getComponent("buttons");t.isModeOnline()?(r.find("[data-action=save]").css("display","inline-block"),r.find("[data-action=cancel]").css("display","inline-block")):(r.find("[data-action=save]").removeClass("ui-grid-buttons-hidden"),r.find("[data-action=cancel]").removeClass("ui-grid-buttons-hidden")),0===t.data.rows.length&&(t._getComponent("table").show(),t._getComponent("emptyTable").hide()),t._triggerHandler("afterInlineAdd")},createAddRowData:function(){var t=this,i=t.options,n=[];return e.each(i.columns,function(e){if(e===t.columnKeyIndex){var i=Math.ceil(1e5*Math.random());n.push(i)}else n.push(null)}),n},onAddRow:function(){if(this.options.actions.add)return this.options.actions.inlineAdd?this.addInlineRow():this._triggerHandler("addRow")},onCancelEdition:function(){var e=this._getComponent("rows").find("[data-new-row=true]"),t=this._getComponent("rows").find("[data-new-row=false]");e.detach();var i=this._getComponent("buttons");return this.isModeOnline()?(i.find("[data-action=save]").hide(),i.find("[data-action=cancel]").hide()):(i.find("[data-action=save]").addClass("ui-grid-buttons-hidden"),i.find("[data-action=cancel]").addClass("ui-grid-buttons-hidden")),0===t.length&&(this._getComponent("table").hide(),this._getComponent("emptyTable").show()),this._triggerHandler("cancelEdition",{keys:this.getNewRowKeys(e)})},onSaveAddedRows:function(){var t=this.getNewRowKeys(),i=this._getComponent("buttons");if(t.length>=1&&this.isValid()){var n=this._getComponent("rows");return this.isModeOnline()?(i.find("[data-action=save]").hide(),i.find("[data-action=cancel]").hide(),this._triggerHandler("saveAddedRows",{keys:t}),this._triggerHandler("removeNewRecords",{keys:t})):(e.each(t,function(t,i){var r=n.find("[data-business-key='"+i+"']");e(r).attr("data-new-row","false")}),i.find("[data-action=save]").addClass("ui-grid-buttons-hidden"),i.find("[data-action=cancel]").addClass("ui-grid-buttons-hidden"),this._triggerHandler("saveAddedRows",{keys:t}),!0)}return!0},isModeOnline:function(){return!(void 0!==this.options.isOfflineForm&&bizagi.util.parseBoolean(this.options.isOfflineForm))}})}(jQuery),bizagi=void 0!==bizagi?bizagi:{},bizagi.chrono=void 0!==bizagi.chrono?bizagi.chrono:{},bizagi.enableTrace=!1,bizagi.enableDebug=!1,bizagi.enableChrono=!1,bizagi.log=function(e,t,i){var n=window.document;if(bizagi.enableTrace){var r,a;if(void 0===bizagi.logContainer&&(bizagi.logContainer=$(".ui-bizagi-log-container",n),0==bizagi.logContainer.length&&(bizagi.logContainer=(r=$("<div />").appendTo($("body",n)),a=void 0!==bizagi.detectDevice?bizagi.detectDevice():bizagi.util.detectDevice(),r.bizagi_notifications({headerAdditionalClass:"ui-bizagi-log-container-header",containerAdditionalClass:"ui-bizagi-notifications-container ui-bizagi-log-container",itemIcon:"ui-icon-info",title:"Debugging Log",location:"top",device:a}),r.bind("itemClick",function(e,t){var i=$("<div />").appendTo($("body"),n),r="desktop"==a?$("<textarea />"):$("<textarea readonly=true />");"string"==typeof t.data?(r.height("90%"),r.width("100%"),r.text(t.data),i.append(r)):(r.height("90%"),r.width("100%"),r.text(JSON.encode(t.data)),i.append(r)),i.dialog({width:640,height:480,modal:!0,title:"Object Hierarchy",close:function(){i.dialog("destroy"),i.detach()}})}),r))),t)try{t=JSON.parse(JSON.encode(t))}catch(e){t={}}bizagi.logContainer.bizagi_notifications("addNotification",e,t,function(e){if("info"==(e=e||"ui-icon-bullet"))return"ui-icon-info";if("warning"==e)return"ui-icon-alert";if("error"==e)return"ui-icon-circle-close";if("timer"==e)return"ui-icon-clock";if("success"==e)return"ui-icon-check";return e}(i))}},bizagi.assert=function(e,t,i){e||bizagi.log(t,i,"error")},bizagi.logError=function(e,t){bizagi.log(e,t,"error")},bizagi.debug=function(e,t){bizagi.enableDebug&&bizagi.log(e,t,"info")},bizagi.getLogInstance=function(){return bizagi.logContainer},bizagi.chrono.init=function(e){e?bizagi.chronos[e]={millis:0,timestamp:0}:bizagi.chronos={}},bizagi.chrono.start=function(e,t){bizagi.enableChrono&&(t=void 0!==t&&t,bizagi.chronos[e]=bizagi.chronos[e]||{millis:0,timestamp:0},bizagi.chronos[e].running||(bizagi.chronos[e].timestamp=(new Date).getTime(),bizagi.chronos[e].profiling=bizagi.enableProfiler&&t,bizagi.chronos[e].running=!0,bizagi.enableProfiler&&t&&(console.time(e),console.timeStamp(e),console.profile(e))))},bizagi.chrono.initAndStart=function(e){bizagi.chrono.init(e),bizagi.chrono.start(e)},bizagi.chrono.stop=function(e){if(bizagi.enableChrono&&(bizagi.chronos[e]=bizagi.chronos[e]||{millis:0,timestamp:0},bizagi.chronos[e].running)){var t=(new Date).getTime()-bizagi.chronos[e].timestamp;bizagi.chronos[e].millis=bizagi.chronos[e].millis+t,bizagi.chronos[e].running=!1,bizagi.chronos[e].profiling&&(console.timeEnd(e),console.timeStamp(e+"end"),console.profileEnd(e))}},bizagi.chrono.stopAndLog=function(e){bizagi.chronos[e]&&bizagi.chronos[e].running&&bizagi.chrono.stop(e),bizagi.chrono.log(e)},bizagi.chrono.log=function(e){bizagi.chronos[e]&&bizagi.log("Timer "+e+": "+bizagi.chronos[e].millis+"ms",null,"timer")},bizagi.chrono.logTimers=function(){if(bizagi.enableChrono)for(key in bizagi.chronos)bizagi.chrono.log(key)},bizagi.chrono.init(),bizagi=void 0!==bizagi?bizagi:{},bizagi.showConfirmationBox=function(e,t,i,n,r){var a=window.document,o=new $.Deferred;if(r=r||{},t=t||bizagi.localization.getResource("confirmation-box-title"),i=null==bizagi.util.isEmpty(i)||i,bizagi.util.isMobileDevice()){var s,l=[],u=[];if(bizagi.util.isCordovaSupported()&&void 0!==n){if(n.length>0){for(var c=0;c<n.length;c++)l[c]=n[c].label,u[c]=n[c].action;s=function(e){"resolve"===u[--e]?o.resolve():"reject"===u[e]&&o.reject()}}else s=function(e){1===e?o.resolve():2===e&&o.reject()},l=[bizagi.localization.getResource("confirmation-savebox-save"),bizagi.localization.getResource("confirmation-savebox-dontsave"),bizagi.localization.getResource("confirmation-savebox-cancel")];navigator.notification.confirm(e,s,t,l)}else bizagi.util.isCordovaSupported()?(s=function(e){1===e?o.resolve():2===e&&o.reject()},l=[bizagi.localization.getResource("confirmation-box-ok"),bizagi.localization.getResource("confirmation-box-cancel")],navigator.notification.confirm(e,s,t,l)):window.confirm(e.replace(/(<([^>]+)>)/gi,""))?o.resolve():o.reject()}else{var d=bizagi.getTemplate("common.bizagi.desktop.dialog-confirmation");l=function(e){var t=[];e&&e.length>0?e.forEach(function(e){newButton={text:e.label,click:function(){"resolve"==e.action?(o.resolve(),$(this).dialog("close")):(o.reject(e.action),$(this).dialog("close"))}},t.push(newButton)}):t=[{text:bizagi.localization.getResource("confirmation-box-ok"),click:function(){o.resolve(),$(this).dialog("close")}},{text:bizagi.localization.getResource("confirmation-box-cancel"),click:function(){o.reject(),$(this).dialog("close")}}];return t}(n),$.when(bizagi.templateService.getTemplate(d)).then(function(n){var s=$.tmpl(n,{message:e,showIcon:i}).appendTo("body",a);s.dialog({dialogClass:r.dialogClass||"bz-ui-common-dialog",resizable:!1,minHeight:r.minHeight||140,minWidth:r.minWidth||300,width:r.width||"auto",modal:!0,allowmaximize:!1,title:t,buttons:l,close:function(e,t){$(this).dialog("destroy"),s.detach(),o.reject()}})})}return o.promise()},bizagi.showSimpleConfirmationBox=function(e,t,i){var n=new $.Deferred,r=[bizagi.localization.getResource("confirmation-box-ok")],a=i&&i.length>0?i:r;return bizagi.util.isMobileDevice()&&bizagi.util.isCordovaSupported()?navigator.notification.confirm(e,function(e){n.resolve(e)},t,a):n.reject(),n.promise()},bizagi.showSaveBox=function(e,t,i,n){var r=window.document,a=new $.Deferred,o="rtl"===n;if(t=t||bizagi.localization.getResource("confirmation-box-title"),i=null==bizagi.util.isEmpty(i)||i,bizagi.util.isMobileDevice())if(bizagi.util.isCordovaSupported()){var s=[bizagi.localization.getResource("confirmation-savebox-save"),bizagi.localization.getResource("confirmation-savebox-dontsave"),bizagi.localization.getResource("confirmation-savebox-cancel")];navigator.notification.confirm(e,function(e){0===e||1===e?a.resolve():2===e&&a.reject()},t,s)}else window.confirm(e.replace(/(<([^>]+)>)/gi,""))?a.resolve():a.reject();else{var l=bizagi.getTemplate("common.bizagi.desktop.dialog-confirmation");$.when(bizagi.templateService.getTemplate(l)).then(function(n){var s=$.tmpl(n,{message:e,showIcon:i}).appendTo("body",r),l=[];l[0]={text:bizagi.localization.getResource("confirmation-savebox-save"),click:function(){s.dialog("close"),a.resolve()}},l[1]={text:bizagi.localization.getResource("confirmation-savebox-dontsave"),click:function(){s.dialog("close"),a.reject()}},l[2]={text:bizagi.localization.getResource("confirmation-savebox-cancel"),click:function(){s.dialog("close"),a.reject("cancel")}},o&&l.reverse(),s.dialog({resizable:!1,minHeight:140,width:400,modal:!0,allowmaximize:!1,title:t,buttons:l,close:function(e,t){s.dialog("destroy"),s.detach()}})})}return a.promise()},bizagi.showMessageBox=function(e,t,i,n){var r=window.document,a=new $.Deferred;if(i=i||"info",t=t||"Bizagi",n="boolean"!=typeof n||n,bizagi.util.isMobileDevice())bizagi.util.isCordovaSupported()?navigator.notification.alert(e.replace(/(<([^>]+)>)/gi,""),function(){},"Bizagi","Ok"):window.alert(e.replace(/(<([^>]+)>)/gi,"")),a.resolve();else{var o=bizagi.getTemplate("common.bizagi.desktop.dialog-message");$.when(bizagi.templateService.getTemplate(o)).then(function(n){var o=$.tmpl(n,{message:e,icon:bizagi.getIcon(i)}).appendTo("body",r),s={};s[bizagi.localization.getResource("workportal-widget-dialog-box-ok")]=function(){o.dialog("close"),a.resolve()},o.dialog({modal:!0,title:t,height:"auto",resizable:!1,maximize:!1,draggable:!1,buttons:s,close:function(e,t){o.dialog("destroy"),o.detach()}})})}return a.promise()},bizagi.getIcon=function(e){return"info"===(e=e||"ui-icon-bullet")?"ui-icon-info":"warning"===e?"ui-icon-alert":"error"===e?"ui-icon-circle-close":"success"===e?"ui-icon-check":e},"undefined"!=typeof Windows&&(jQuery.fn.nonSecureAppend=jQuery.fn.append,jQuery.fn.append=function(){var e=arguments,t=this;return MSApp.execUnsafeLocalFunction(function(){return jQuery.fn.nonSecureAppend.apply(t,e)})},jQuery.fn.nonSecureBefore=jQuery.fn.before,jQuery.fn.before=function(){var e=arguments,t=this;return MSApp.execUnsafeLocalFunction(function(){return jQuery.fn.nonSecureBefore.apply(t,e)})},jQuery.fn.nonSecureAfter=jQuery.fn.after,jQuery.fn.after=function(){var e=arguments,t=this;return MSApp.execUnsafeLocalFunction(function(){return jQuery.fn.nonSecureAfter.apply(t,e)})},jQuery.nonSecureClean=jQuery.clean,jQuery.clean=function(){var e=arguments,t=this;return MSApp.execUnsafeLocalFunction(function(){return jQuery.nonSecureClean.apply(t,e)})},jQuery.nonSecurereplaceWith=jQuery.fn.replaceWith,jQuery.fn.replaceWith=function(){var e=arguments,t=this;return MSApp.execUnsafeLocalFunction(function(){return jQuery.nonSecurereplaceWith.apply(t,e)})},jQuery.nonSecureinsertBefore=jQuery.fn.insertBefore,jQuery.fn.insertBefore=function(){var e=arguments,t=this;return MSApp.execUnsafeLocalFunction(function(){return jQuery.nonSecureinsertBefore.apply(t,e)})},jQuery.nonSecurebuildFragment=jQuery.buildFragment,jQuery.buildFragment=function(){var e=arguments,t=this;return MSApp.execUnsafeLocalFunction(function(){return jQuery.nonSecurebuildFragment.apply(t,e)})}),$.expr.cacheLength=1,bizagi.initialized||initBizagi(),bizagi.util.isIE8&&bizagi.util.isIE8()&&(Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)||e instanceof Array}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){for(var i=this.length>>>0,n=0;n<i;n++)n in this&&e.call(t,this[n],n,this)}),Array.prototype.map||(Array.prototype.map=function(e){for(var t=this.length>>>0,i=new Array(t),n=arguments[1],r=0;r<t;r++)r in this&&(i[r]=e.call(n,this[r],r,this));return i}),Array.prototype.filter||(Array.prototype.filter=function(e){for(var t=[],i=arguments[1],n=0;n<this.length;n++)e.call(i,this[n])&&t.push(this[n]);return t}),Array.prototype.reduce||(Array.prototype.reduce=function(e){var t=this.length>>>0,i=0;if(0===t&&1===arguments.length)throw new TypeError;if(arguments.length>=2)var n=arguments[1];else for(;;){if(i in this){n=this[i++];break}if(++i>=t)throw new TypeError}for(;i<t;i++)i in this&&(n=e.call(null,n,this[i],i,this));return n}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length,i=arguments[1]||0;if(!t)return-1;if(i>=t)return-1;for(i<0&&(i+=t);i<t;i++)if(Object.prototype.hasOwnProperty.call(this,i)&&e===this[i])return i;return-1}),Object.keys||(Object.keys=function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return t})),function(e){e.widget("ui.selectable",e.ui.mouse,{options:{closest:!0,filter:"> *",keyboard:!0,lasso:{cancel:":input,option",delay:0,distance:1,tolerance:"touch",appendTo:"body"}},_init:function(){var t=this;this.items=e(this.options.filter,this.element),this.element.addClass("ui-selectable ui-widget"),this.currentFocus=this.items.eq(0).attr("tabindex",0),this.refresh(1),this.element.disableSelection(),this.options.lasso&&(!0!==this.options.lasso&&e.extend(this.options,this.options.lasso),this._mouseInit()),this.element.bind("mousedown.selectable",function(i){if(!t.options.disabled){var n=t._targetIsItem(i.target);if(n)return t._selection.length>1&&e(n).hasClass("ui-selected")?t._listenForMouseUp=1:!0===t._mouseSelect(i,n)||void 0}}).bind("mouseup.selectable",function(e){if(t._listenForMouseUp){t._listenForMouseUp=0;var i=t._targetIsItem(e.target);if(i&&!0===t._mouseSelect(e,i))return!0}}).bind("focus.selectable",function(){t.options.disabled||t.currentFocus.addClass("ui-state-focus")}).bind("blur.selectable",function(){t.options.disabled||t.currentFocus.removeClass("ui-state-focus")}).bind("keydown.selectable",function(i){if(!t.options.keyboard||t.options.disabled||!1===t._trigger("beforeselect",i))return!0;i.keyCode==e.ui.keyCode.DOWN&&(t.options.closest?t.selectClosest("down",i):t.next(i),i.preventDefault()),i.keyCode==e.ui.keyCode.RIGHT&&(t.options.closest?t.selectClosest("right",i):t.next(i),i.preventDefault()),i.keyCode==e.ui.keyCode.UP&&(t.options.closest?t.selectClosest("up",i):t.previous(i),i.preventDefault()),i.keyCode==e.ui.keyCode.LEFT&&(t.options.closest?t.selectClosest("left",i):t.previous(i),i.preventDefault()),(i.ctrlKey||i.metaKey)&&(i.keyCode==e.ui.keyCode.SPACE&&(t._toggleSelection(t.currentFocus,i),i.preventDefault()),65==i.keyCode&&(t.select("*"),i.preventDefault()))}),this.helper=e(document.createElement("div")).addClass("ui-selectable-lasso")},selectClosest:function(t,i){var n=[/(down|right)/.test(t)?1e4:-1e4,null],r=1e4,a=this.currentFocus.data("selectable-item");if(this.items.not(this.currentFocus).filter(":visible").each(function(){var i=e(this),o=i.data("selectable-item"),s={x:Math.abs(a.left-o.left)+Math.abs(o.left+this.offsetWidth-(a.left+this.offsetWidth)),y:Math.abs(a.top-o.top)+Math.abs(o.top+this.offsetHeight-(a.top+this.offsetHeight))};switch(t){case"up":a.top>o.top&&o.top>=n[0]&&(o.top!=n[0]||s.x<r)&&(n=[o.top,i],r=s.x);break;case"down":a.top<o.top&&o.top<=n[0]&&(o.top!=n[0]||s.x<r)&&(n=[o.top,i],r=s.x);break;case"left":a.left>o.left&&o.left>=n[0]&&(o.left!=n[0]||s.y<r)&&(n=[o.left,i],r=s.y);break;case"right":a.left<o.left&&o.left<=n[0]&&(o.left!=n[0]||s.y<r)&&(n=[o.left,i],r=s.y)}}),!n[1])return!1;var o=this.items.index(this.currentFocus[0]),s=this.items.index(n[1]);return this._selectAdjacent(i,s-o)},destroy:function(){this.items.removeClass("ui-selectable-item ui-selected ui-state-active"),this.element.removeClass("ui-selectable ui-selectable-disabled ui-widget").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this._selection=[],this._previousSelection=[]},_mouseCapture:function(e){return this.clickedOnItem=this._targetIsItem(e.target),!0},_mouseStart:function(t){var i=this.options;if(this.opos=[t.pageX,t.pageY],!i.disabled){this.refresh(1),this._trigger("start",t,this._uiHash()),this._previousSelection=this._selection.slice(),this.helper.appendTo("body").css({zIndex:100,position:"absolute",left:t.clientX,top:t.clientY,width:0,height:0});for(var n=this._selection.length-1;n>=0;n--)t.metaKey||t.ctrlKey?this!=this.clickedOnItem&&(e(this._selection[n]).data("selectable-item").startSelected=!0):this._removeFromSelection(e(this._selection[n]),t)}},_mouseDrag:function(t){var i=this,n=this.options;if(!n.disabled){var r=this.opos[0],a=this.opos[1],o=t.pageX,s=t.pageY;if(r>o){var l=o;o=r,r=l}if(a>s){l=s;s=a,a=l}return this.helper.css({left:r,top:a,width:o-r,height:s-a}),this.items.each(function(){var l=e.data(this,"selectable-item");if(l&&l.element!=i.element[0]){var u=!1;n.lasso&&"touch"==n.lasso.tolerance?u=!(l.left>o||l.right<r||l.top>s||l.bottom<a):n.lasso&&"fit"==n.lasso.tolerance&&(u=l.left>r&&l.right<o&&l.top>a&&l.bottom<s),u?l.startSelected?i._removeFromSelection(e(this),t):i._addToSelection(e(this),t):l.startSelected?i._addToSelection(e(this),t):i._removeFromSelection(e(this),t)}}),!1}},_mouseStop:function(t){for(var i=[],n=[],r=0;r<this._selection.length;r++){for(var a=!1,o=0;o<this._previousSelection.length;o++)this._selection[r][0]==this._previousSelection[o][0]&&(a=!0);a||i.push(this._selection[r])}for(r=this._previousSelection.length-1;r>=0;r--)this._previousSelection[r].data("selectable-item").selected||n.push(this._previousSelection[r]);i=e(e.map(i,function(e){return e[0]})),n=e(e.map(n,function(e){return e[0]}));var s=e.extend(this._uiHash(),{added:i||[],removed:n||[]});return this._trigger("stop",t,s),(i&&i.length||n&&n.length)&&this._trigger("change",t,s),this.helper.remove(),!1},_mouseSelect:function(e,t){if(!1===this._trigger("beforeselect",e))return!0;this._select(e,t),this.element[0].focus(),e.preventDefault()},_targetIsItem:function(t){var i=e(t).parents().addBack().filter(":data(selectable-item)");return i.length&&i},_selection:[],_endSelection:function(t,i){var n=this._triggerDeselection(t);if(i&&i.length&&this._trigger("select",t,this._uiHash(i,"added")),i&&i.length||n&&n.length){var r=e.extend(this._uiHash(),{added:i||[],removed:n||[]});this._trigger("change",t,r)}},_triggerDeselection:function(t){for(var i=[],n=this._previousSelection.length-1;n>=0;n--){var r=this._previousSelection[n].data("selectable-item");r&&r.selected||i.push(this._previousSelection[n])}return this._previousSelection=[],(i=e(e.map(i,function(e){return e[0]}))).length&&this._trigger("deselect",t,this._uiHash(i,"removed")),i},_clearSelection:function(t){for(var i=[],n=this._selection.length-1;n>=0;n--)t&&this._selection[n].data("selectable-item").selected&&i.push(this._selection[n]),this._selection[n].removeClass("ui-selected ui-state-active"),this._selection[n].data("selectable-item").selected=!1;this._previousSelection=this._selection.slice(),this._selection=[],t&&i.length&&this._trigger("deselect",t,this._uiHash(e(e.map(i,function(e){return e[0]})),"removed"))},_toggleSelection:function(e,t){var i=e.data("selectable-item").selected;return i?this._removeFromSelection(e,t):this._addToSelection(e),!i},_addToSelection:function(t,i){return!t.data("selectable-item")||t.data("selectable-item").selected?null:(this._selection.push(t),this.latestSelection=t,t.addClass("ui-selected ui-state-active"),t.data("selectable-item").selected=!0,i&&this._trigger("select",i,e.extend({lasso:!0},this._uiHash(t))),t)},_removeFromSelection:function(t,i){for(var n=0;n<this._selection.length;n++)if(this._selection[n][0]==t[0]){this._selection[n].removeClass("ui-selected ui-state-active"),this._selection[n].data("selectable-item").selected=!1,this._selection.splice(n,1),i&&this._trigger("deselect",i,this._uiHash(e(t),"removed"));break}},_updateSelectionMouse:function(t){var i=[];if(t&&t.shiftKey){this._clearSelection();for(var n=this.items.index(this.latestWithoutModifier[0])>this.items.index(this.currentFocus[0])?-1:1,r=this.latestWithoutModifier.data("selectable-item").selected?this.items.eq(this.items.index(this.latestWithoutModifier[0])+n):this.latestWithoutModifier;r.length&&r[0]!=this.currentFocus[0];)r[0]==this.previousFocus[0]?this._addToSelection(r):i.push(this._addToSelection(r)),r=this.items.eq(this.items.index(r[0])+n);i.push(this._addToSelection(this.currentFocus))}else{if(t&&(t.metaKey||t.ctrlKey))this._toggleSelection(this.currentFocus,t)&&i.push(this.currentFocus);else this._clearSelection(),i.push(this._addToSelection(this.currentFocus)),this.latestWithoutModifier=this.currentFocus}return e(e.map(i,function(e){return e[0]}))},_updateSelection:function(t,i){var n=[];if(t&&t.shiftKey)if(this.currentFocus.data("selectable-item").selected)this._removeFromSelection(this.previousFocus,t);else{var r=this.items.index(this.latestSelection[0])>this.items.index(this.currentFocus[0])?1:-1;if(!this.previousFocus.data("selectable-item").selected)for(var a=i==r?this.items.eq(this.items.index(this.previousFocus[0])+r):this.previousFocus;a.length&&!a.data("selectable-item").selected;)n.push(this._addToSelection(a)),a=this.items.eq(this.items.index(a[0])+r);n.push(this._addToSelection(this.currentFocus))}else{if(t&&(t.metaKey||t.ctrlKey))return;this._clearSelection(t),n.push(this._addToSelection(this.currentFocus)),this.latestWithoutModifier=this.currentFocus}return e(e.map(n,function(e){if(e)return e[0]}))},_select:function(t,i){this.previousFocus=this.currentFocus.attr("tabindex",-1),this.currentFocus=e(i).attr("tabindex",0),this.previousFocus.removeClass("ui-state-focus"),this.currentFocus.addClass("ui-state-focus");var n=this._updateSelectionMouse(t);this._endSelection(t,n)},_selectAdjacent:function(e,t){var i=this.items.eq(this.items.index(this.currentFocus[0])+t);if(i.length){this.previousFocus=this.currentFocus.attr("tabindex",-1),this.currentFocus=i.attr("tabindex",0),this.previousFocus.removeClass("ui-state-focus"),this.currentFocus.addClass("ui-state-focus"),this._previousSelection=this._selection.slice();var n=this._updateSelection(e,t);this._endSelection(e,n)}},previous:function(e){this._selectAdjacent(e,-1)},next:function(e){this._selectAdjacent(e,1)},refresh:function(t){var i=this.options,n=this;if(this.items=e(i.filter,this.element),this.items.addClass("ui-selectable-item"),this.items.each(function(){var t=e(this),i=t.offset();n.currentFocus&&n.currentFocus[0]!=this&&t.attr("tabindex",-1),e.data(this,"selectable-item",{left:i.left,top:i.top,right:i.left+t.width(),bottom:i.top+t.height(),startSelected:!1,selected:t.hasClass("ui-selected")})}),!t){this._previousSelection=this._selection.slice(),this._selection=[];for(var r=0;r<this._previousSelection.length;r++)this._previousSelection[r][0].parentNode&&this._selection.push(this._previousSelection[r]);this._endSelection()}},select:function(t){if((t=isNaN(parseInt(t))?e(t,this.element):this.items.eq(t)).length){this._clearSelection();var i=[],n=this;t.each(function(t){0==t&&(n.previousFocus=n.currentFocus.attr("tabindex",-1),n.currentFocus=e(this).attr("tabindex",0),n.previousFocus.removeClass("ui-state-focus"),n.currentFocus.addClass("ui-state-focus")),i.push(n._addToSelection(e(this)))}),this._endSelection(window.event,e(e.map(i,function(e){return!!e&&e[0]})))}},deselect:function(t){if(t||this._clearSelection(!0),(t=isNaN(parseInt(t))?e(t,this.element):this.items.eq(t)).length){this._previousSelection=this._selection.slice();var i=this;t.each(function(){i._removeFromSelection(e(this))}),this._endSelection(event)}},_uiHash:function(t,i){var n={previousFocus:this.previousFocus,currentFocus:this.currentFocus,selection:e(e.map(this._selection,function(e){return e[0]}))};return i&&(n[i]=t),n}})}(jQuery),function(e){e.widget("ui.slideContent",{options:{container:"<div/>",content:"",buttons:[],zIndex:1,autoOpen:!0,cssWrapContainer:"slide-container",cssButtonsContainer:"ui-slide-button-container"},_create:function(){this._layout=e("<div class='"+this.options.cssWrapContainer+"'></div>").append(this.element),this.element.addClass("slide-container-applied"),this.options.buttons.length>=1&&this._layout.append(this._createButtons()),this._layout.hide()},_init:function(){return this.options.autoOpen&&(this._isOpen=!1,this.open()),this},_createButtons:function(){var t=e("<div class="+this.options.cssButtonsContainer+"></div>");return e.each(this.options.buttons,function(i,n){e("<input type='button' value='"+n.text+"' >").click(n.click).appendTo(t)}),this.buttonContainer=t,t},destroy:function(){e.Widget.prototype.destroy.apply(this),this.element.removeClass("slide-container-applied")},setContent:function(e){this.options.content=e},open:function(){this._isOpen||(this.parentCurrentScroll=this.options.container.parent().scrollTop(),this.options.container.hide(),this.options.container.after(this._layout),this.element.parents(".slide-container-applied").length>0&&e(this.element.parents(".slide-container-applied")[0]).slideContent("hideButtons"),this._layout.show(),this._isOpen=!0,this._trigger("open"))},isOpen:function(){return this._isOpen},close:function(){!1!==this._trigger("beforeclose")&&(this.isOpen()&&(this.options.container.show(),this.options.container.parent().scrollTop(this.parentCurrentScroll),this.element.parents(".slide-container-applied").length>0&&e(this.element.parents(".slide-container-applied")[0]).slideContent("showButtons"),this._layout.hide(),this._isOpen=!1),this._trigger("close"))},showButtons:function(){this.buttonContainer.show()},hideButtons:function(){this.buttonContainer.hide()}})}(jQuery),function(e){function t(t,i){function f(t){l=e("li.dw-v",t).eq(0).index(),u=e("li.dw-v",t).eq(-1).index(),s=k.height,c=I}function v(){I.temp=M&&null!==I.val&&I.val!=t.val()||null===I.values?k.parseValue(t.val()?t.val():"",I):I.values.slice(0),I.setValue(!0)}function x(t,i,n,r,a){k.validate.call(F,S,n),e(".dww ul",S).each(function(r){var o=e(this),s=l=e('li[data-val="'+I.temp[r]+'"]',o),l=o=l.index();if(!s.hasClass("dw-v")){for(var u=s,c=0,d=0;u.prev().length&&!u.hasClass("dw-v");)u=u.prev(),c++;for(;s.next().length&&!s.hasClass("dw-v");)s=s.next(),d++;d<c&&d&&1==!a||!c||!u.hasClass("dw-v")||1==a?l+=d:(s=u,l-=c),I.temp[r]=s.data("val")}o==l&&r!=n&&void 0!==n||I.scroll(e(this),l,r==n?t:0,i,r)}),I.change(r)}function w(){var t,i,n,r,a=0,o=0,s=e(window).width(),l=e(window).height(),u=e(window).scrollTop(),c=e(".dwo",S),d=e(".dw",S);e(".dwc",S).each(function(){t=e(this).outerWidth(!0),a+=t,o=t>o?t:o}),t=a>s?o:a,d.width(t),t=d.outerWidth(),i=d.outerHeight(),d.css({left:(s-t)/2,top:u+(l-i)/2}),c.height(0).height((n=document.body,r=document.documentElement,Math.max(n.scrollHeight,n.offsetHeight,r.clientHeight,r.scrollHeight,r.offsetHeight)))}function T(e){var t=+e.data("pos")+1;a(e,t>u?l:t,1)}function A(e){var t=+e.data("pos")-1;a(e,t<l?u:t,2)}var P,D,S,I=this,F=t,k=(t=e(F),e.extend({},z)),N={},O={},M=t.is("input"),B=!1;I.enable=function(){k.disabled=!1,M&&t.prop("disabled",!1)},I.disable=function(){k.disabled=!0,M&&t.prop("disabled",!0)},I.scroll=function(e,t,i,n,r){var a=(D-t)*k.height;if(e.attr("style",(i?_+"-transition:all "+i.toFixed(1)+"s ease-out;":"")+(C?_+"-transform:translate3d(0,"+a+"px,0);":"top:"+a+"px;")),i){var o=0;clearInterval(N[r]),N[r]=setInterval(function(){o+=.1,e.data("pos",Math.round((t-n)*Math.sin(o/i*(Math.PI/2))+n)),o>=i&&(clearInterval(N[r]),e.data("pos",t))},100),clearTimeout(O[r]),O[r]=setTimeout(function(){"mixed"==k.mode&&!e.hasClass("dwa")&&e.closest(".dwwl").find(".dwwb").fadeIn("fast")},1e3*i)}else e.data("pos",t)},I.setValue=function(e,i,n){var r=k.formatResult(I.temp);I.val=r,I.values=I.temp.slice(0),B&&e&&x(n),i&&M&&t.val(r).trigger("change")},I.validate=function(e,t,i,n){x(e,t,i,!0,n)},I.change=function(t){var i,n,r=k.formatResult(I.temp);"inline"==k.display?I.setValue(!1,t):e(".dwv",S).html((i=r,(n=k.headerText)?"function"==typeof n?n.call(F,i):n.replace(/{value}/i,i):"")),t&&k.onChange.call(F,r,I)},I.hide=function(){if(!1===k.onClose.call(F,I.val,I))return!1;e(".dwtd").prop("disabled",!1).removeClass("dwtd"),t.blur(),S&&S.remove(),B=!1,e(window).unbind(".dw")},I.show=function(){if(k.disabled||B)return!1;var i=k.height,r=k.rows*i;v();for(var s='<div class="'+k.theme+'">'+("inline"==k.display?'<div class="dw dwbg dwi"><div class="dwwr">':'<div class="dwo"></div><div class="dw dwbg"><div class="dwwr">'+(k.headerText?'<div class="dwv"></div>':"")),l=0;l<k.wheels.length;l++){var u;s=s+'<div class="dwc'+("scroller"!=k.mode?" dwpm":" dwsc")+(k.showLabel?"":" dwhl")+'"><div class="dwwc dwrc"><table cellpadding="0" cellspacing="0"><tr>';for(u in k.wheels[l]){var c;s=s+'<td><div class="dwwl dwrc">'+("scroller"!=k.mode?'<div class="dwwb dwwbp" style="height:'+i+"px;line-height:"+i+'px;"><span>+</span></div><div class="dwwb dwwbm" style="height:'+i+"px;line-height:"+i+'px;"><span>&ndash;</span></div>':"")+'<div class="dwl">'+u+'</div><div class="dww dwrc" style="height:'+r+"px;min-width:"+k.width+'px;"><ul>';for(c in k.wheels[l][u])s+='<li class="dw-v" data-val="'+c+'" style="height:'+i+"px;line-height:"+i+'px;">'+k.wheels[l][u][c]+"</li>";s+='</ul><div class="dwwo"></div></div><div class="dwwol"></div></div></td>'}s+="</tr></table></div></div>"}s+=("inline"!=k.display?'<div class="dwbc"><span class="dwbw dwb-s"><a href="#" class="dwb">'+k.setText+'</a></span><span class="dwbw dwb-c"><a href="#" class="dwb">'+k.cancelText+"</a></span></div>":'<div class="dwcc"></div>')+"</div></div></div>",S=e(s),x(),"inline"!=k.display?S.appendTo("body"):t.is("div")?t.html(S):S.insertAfter(t),B=!0,P.init(S,I),"inline"!=k.display&&(e(".dwb-s a",S).click(function(){return I.setValue(!1,!0),I.hide(),k.onSelect.call(F,I.val,I),!1}),e(".dwb-c a",S).click(function(){return I.hide(),k.onCancel.call(F,I.val,I),!1}),e("input,select").each(function(){e(this).prop("disabled")||e(this).addClass("dwtd")}),e("input,select").prop("disabled",!0),w(),e(window).bind("resize.dw",w)),S.delegate(".dwwl","DOMMouseScroll mousewheel",function(t){if(!k.readonly){t.preventDefault();t=(t=t.originalEvent).wheelDelta?t.wheelDelta/120:t.detail?-t.detail/3:0;var i=e("ul",this),n=+i.data("pos");n=Math.round(n-t);f(i),a(i,n,t<0?1:2)}}).delegate(".dwb, .dwwb",E,function(){e(this).addClass("dwb-a")}).delegate(".dwwb",E,function(t){if(!k.readonly){t.preventDefault(),t.stopPropagation();var i=e(this).closest(".dwwl").find("ul");func=e(this).hasClass("dwwbp")?T:A,f(i),clearInterval(o),o=setInterval(function(){func(i)},k.delay),func(i)}}).delegate(".dwwl",E,function(t){b||"clickpick"==k.mode||k.readonly||(t.preventDefault(),b=!0,y=e("ul",this).addClass("dwa"),"mixed"==k.mode&&e(".dwwb",this).fadeOut("fast"),g=+y.data("pos"),f(y),d=n(t),h=new Date,p=d,I.scroll(y,g))}),k.onShow.call(F,S,I)},I.init=function(i){P=e.extend({defaults:{},init:m},e.scroller.themes[i.theme?i.theme:k.theme]),e.extend(k,P.defaults,i),I.settings=k,D=Math.floor(k.rows/2);var n=e.scroller.presets[k.preset];t.unbind(".dw"),n&&(n=n.call(F,I),e.extend(k,n,i),e.extend(R,n.methods)),void 0!==t.data("dwro")&&(F.readOnly=r(t.data("dwro"))),B&&I.hide(),"inline"==k.display?I.show():(v(),M&&k.showOnFocus&&(t.data("dwro",F.readOnly),F.readOnly=!0,t.bind("focus.dw",I.show)))},I.values=null,I.val=null,I.temp=null,I.init(i)}function i(e){for(var t in e)if(void 0!==x[e[t]])return!0;return!1}function n(e){return w?e.originalEvent?e.originalEvent.changedTouches[0].pageY:e.changedTouches[0].pageY:e.pageY}function r(e){return!0===e||"true"==e}function a(t,i,n,r,a){var o=t.closest(".dwwr").find("ul").index(t);i=(i=i>u?u:i)<l?l:i,t=e("li",t).eq(i);c.temp[o]=t.data("val"),c.validate(r?i==a?.1:Math.abs(.1*(i-a)):0,a,o,n)}var o,s,l,u,c,d,p,h,g,f={},m=function(){},v=(new Date).getTime(),b=!1,y=null,x=document.createElement(x).style,C=i(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"])&&"webkitPerspective"in document.documentElement.style,_=function(){var e,t=["Webkit","Moz","O","ms"];for(e in t)if(i([t[e]+"Transform"]))return"-"+t[e].toLowerCase();return""}(),w="ontouchstart"in window,E=w?"touchstart":"mousedown",T=w?"touchend":"mouseup",z={width:70,height:40,rows:3,delay:300,disabled:!1,readonly:!1,showOnFocus:!0,showLabel:!0,wheels:[],theme:"",headerText:"{value}",display:"modal",mode:"scroller",preset:"",setText:"Set",cancelText:"Cancel",onShow:m,onClose:m,onSelect:m,onCancel:m,onChange:m,formatResult:function(e){for(var t="",i=0;i<e.length;i++)t+=(0<i?" ":"")+e[i];return t},parseValue:function(e,t){for(var i=t.settings.wheels,n=(e=e.split(" "),[]),r=0,a=0;a<i.length;a++)for(var o in i[a]){if(void 0!==i[a][o][e[r]])n.push(e[r]);else for(var s in i[a][o]){n.push(s);break}r++}return n},validate:m},R={init:function(e){return void 0===e&&(e={}),this.each(function(){this.id||(v+=1,this.id="scoller"+v),f[this.id]=new t(this,e)})},enable:function(){return this.each(function(){var e=f[this.id];e&&e.enable()})},disable:function(){return this.each(function(){var e=f[this.id];e&&e.disable()})},isDisabled:function(){var e=f[this[0].id];if(e)return e.settings.disabled},option:function(e,t){return this.each(function(){var i=f[this.id];if(i){var n={};"object"==typeof e?n=e:n[e]=t,i.init(n)}})},setValue:function(e,t,i){return this.each(function(){var n=f[this.id];n&&(n.temp=e,n.setValue(!0,t,i))})},getInst:function(){return f[this[0].id]},getValue:function(){var e=f[this[0].id];if(e)return e.values},show:function(){var e=f[this[0].id];if(e)return e.show()},hide:function(){return this.each(function(){var e=f[this.id];e&&e.hide()})},destroy:function(){return this.each(function(){var t=f[this.id];t&&(t.hide(),e(this).unbind(".dw"),delete f[this.id],e(this).is("input")&&(this.readOnly=r(e(this).data("dwro"))))})}};e(document).bind(w?"touchmove":"mousemove",function(e){b&&(e.preventDefault(),p=n(e),e=(e=(e=g+(d-p)/s)>u+1?u+1:e)<l-1?l-1:e,c.scroll(y,e))}),e(document).bind(T,function(t){if(b){t.preventDefault(),y.removeClass("dwa");var i=new Date-h;t=(t=(t=g+(d-p)/s)>u+1?u+1:t)<l-1?l-1:t;300>i?(i=(i=(p-d)/i)*i/.0012,0>p-d&&(i=-i)):i=p-d,a(y,Math.round(g-i/s),0,!0,Math.round(t)),b=!1,y=null}clearInterval(o),e(".dwb-a").removeClass("dwb-a")}),e.fn.scroller=function(t){return R[t]?R[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Unknown method"):R.init.apply(this,arguments)},e.scroller={setDefaults:function(t){e.extend(z,t)},presets:{},themes:{}}}(jQuery),function(e){var t={dateFormat:"mm/dd/yy",dateOrder:"mmddy",timeWheels:"hhiiA",timeFormat:"hh:ii A",startYear:(i=new Date).getFullYear()-100,endYear:i.getFullYear()+1,monthNames:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthNamesShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),dayNames:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),dayNamesShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),shortYearCutoff:"+10",monthText:"Month",dayText:"Day",yearText:"Year",hourText:"Hours",minuteText:"Minutes",secText:"Seconds",ampmText:"&nbsp;",stepHour:1,stepMinute:1,stepSecond:1,separator:" "},i=function(i){function n(e,t,i){return void 0!==p[t]?+e[p[t]]:void 0!==i?i:C[h[t]]?C[h[t]]():h[t](C)}function r(e,t){return Math.floor(e/t)*t}function a(e){var t=n(e,"h",0);return new Date(n(e,"y"),n(e,"m"),n(e,"d"),n(e,"ap")?t+12:t,n(e,"i",0),n(e,"s",0))}var o;if((l=e(this)).is("input")){switch(l.attr("type")){case"date":o="yy-mm-dd";break;case"datetime":o="yy-mm-ddTHH:ii:ssZ";break;case"datetime-local":o="yy-mm-ddTHH:ii:ss";break;case"month":o="yy-mm",t.dateOrder="mmyy";break;case"time":o="HH:ii:ss"}var s=l.attr("min"),l=l.attr("max");s&&(t.minDate=e.scroller.parseDate(o,s)),l&&(t.maxDate=e.scroller.parseDate(o,l))}var u=e.extend({},t,i.settings),c=0,d=(s=[],[]),p={},h={y:"getFullYear",m:"getMonth",d:"getDate",h:function(e){return e=e.getHours(),r(e=y&&12<=e?e-12:e,_)},i:function(e){return r(e.getMinutes(),w)},s:function(e){return r(e.getSeconds(),E)},ap:function(e){return b&&11<e.getHours()?1:0}},g=u.preset,f=u.dateOrder,m=u.timeWheels,v=f.match(/D/),b=m.match(/a/i),y=m.match(/h/),x="datetime"==g?u.dateFormat+u.separator+u.timeFormat:"time"==g?u.timeFormat:u.dateFormat,C=new Date,_=u.stepHour,w=u.stepMinute,E=u.stepSecond,T=u.minDate,z=u.maxDate;if(o=o||x,g.match(/date/i)){e.each(["y","m","d"],function(e,t){-1<(e=f.search(RegExp(t,"i")))&&d.push({o:e,v:t})}),d.sort(function(e,t){return e.o>t.o?1:-1}),e.each(d,function(e,t){p[t.v]=e});l={};for(var R=0;3>R;R++)if(R==p.y){c++,l[u.yearText]={};for(var A=T?T.getFullYear():u.startYear,P=z?z.getFullYear():u.endYear;A<=P;A++)l[u.yearText][A]=f.match(/yy/i)?A:(A+"").substr(2,2)}else if(R==p.m)for(c++,l[u.monthText]={},A=0;12>A;A++)l[u.monthText][A]=f.match(/MM/)?u.monthNames[A]:f.match(/M/)?u.monthNamesShort[A]:f.match(/mm/)&&9>A?"0"+(A+1):A+1;else if(R==p.d)for(c++,l[u.dayText]={},A=1;32>A;A++)l[u.dayText][A]=f.match(/dd/i)&&10>A?"0"+A:A;s.push(l)}if(g.match(/time/i)){if(l={},m.match(/h/i))for(p.h=c++,l[u.hourText]={},A=0;A<(y?12:24);A+=_)l[u.hourText][A]=y&&0==A?12:m.match(/hh/i)&&10>A?"0"+A:A;if(m.match(/i/))for(p.i=c++,l[u.minuteText]={},A=0;60>A;A+=w)l[u.minuteText][A]=m.match(/ii/)&&10>A?"0"+A:A;if(m.match(/s/))for(p.s=c++,l[u.secText]={},A=0;60>A;A+=E)l[u.secText][A]=m.match(/ss/)&&10>A?"0"+A:A;b&&(p.ap=c++,c=m.match(/A/),l[u.ampmText]={0:c?"AM":"am",1:c?"PM":"pm"}),s.push(l)}return{wheels:s,headerText:function(){return e.scroller.formatDate(x,a(i.temp),u)},formatResult:function(t){return e.scroller.formatDate(o,a(t),u)},parseValue:function(t){var i=new Date,n=[];try{i=e.scroller.parseDate(o,t,u)}catch(e){}for(var r in p)n[p[r]]=i[h[r]]?i[h[r]]():h[r](i);return n},validate:function(t,a){var o=i.temp,s={m:0,d:1,h:0,i:0,s:0,ap:0},l={m:11,d:31,h:r(y?11:23,_),i:r(59,w),s:r(59,E),ap:1},c=!0,d=!0;e.each(T||z?"y,m,d,ap,h,i,s".split(","):a==p.y||a==p.m||void 0===a?["d"]:[],function(i,r){if(void 0!==p[r]){var a,g,m=s[r],b=l[r],y=31,x=n(o,r),C=e("ul",t).eq(p[r]);if("d"==r&&(a=n(o,"y"),g=n(o,"m"),b=y=32-new Date(a,g,32).getDate(),v&&e("li",C).each(function(){var t=e(this),i=t.data("val"),n=new Date(a,g,i).getDay();t.html(f.replace(/[my]/gi,"").replace(/dd/,10>i?"0"+i:i).replace(/d/,i).replace(/DD/,u.dayNames[n]).replace(/D/,u.dayNamesShort[n]))})),c&&T&&(m=T[h[r]]?T[h[r]]():h[r](T)),d&&z&&(b=z[h[r]]?z[h[r]]():h[r](z)),"y"!=r){var _=e('li[data-val="'+m+'"]',C).index(),w=e('li[data-val="'+b+'"]',C).index();e("li",C).removeClass("dw-v").slice(_,w+1).addClass("dw-v"),"d"==r&&e("li",C).removeClass("dw-h").slice(y).addClass("dw-h"),x<m&&(x=m),x>b&&(x=b)}if(c&&(c=x==m),d&&(d=x==b),u.invalid&&"d"==r){var E=[];if(u.invalid.dates&&e.each(u.invalid.dates,function(e,t){t.getFullYear()==a&&t.getMonth()==g&&E.push(t.getDate()-1)}),u.invalid.daysOfWeek){var R=new Date(a,g,1).getDay();e.each(u.invalid.daysOfWeek,function(e,t){for(var i=t-R;i<y;i+=7)i>=0&&E.push(i)})}u.invalid.daysOfMonth&&e.each(u.invalid.daysOfMonth,function(e,t){(t=(t+"").split("/"))[1]?t[0]-1==g&&E.push(t[1]-1):E.push(t[0]-1)}),e.each(E,function(t,i){e("li",C).eq(i).removeClass("dw-v")})}}})},methods:{getDate:function(t){var i=e(this).scroller("getInst");if(i)return a(t?i.temp:i.values)},setDate:function(t,i,n){return null==i&&(i=!1),this.each(function(){var r=e(this).scroller("getInst");if(r){for(var a in p)r.temp[p[a]]=t[h[a]]?t[h[a]]():h[a](t);r.setValue(!0,i,n)}})}}}};e.scroller.presets.date=i,e.scroller.presets.datetime=i,e.scroller.presets.time=i,e.scroller.formatDate=function(i,n,r){if(!n)return null;r=e.extend({},t,r);for(var a=function(e){for(var t=0;c+1<i.length&&i.charAt(c+1)==e;)t++,c++;return t},o=function(e,t,i){if(t=""+t,a(e))for(;t.length<i;)t="0"+t;return t},s=function(e,t,i,n){return a(e)?n[t]:i[t]},l="",u=!1,c=0;c<i.length;c++)if(u)"'"!=i.charAt(c)||a("'")?l+=i.charAt(c):u=!1;else switch(i.charAt(c)){case"d":l+=o("d",n.getDate(),2);break;case"D":l+=s("D",n.getDay(),r.dayNamesShort,r.dayNames);break;case"o":l+=o("o",(n.getTime()-new Date(n.getFullYear(),0,0).getTime())/864e5,3);break;case"m":l+=o("m",n.getMonth()+1,2);break;case"M":l+=s("M",n.getMonth(),r.monthNamesShort,r.monthNames);break;case"y":l+=a("y")?n.getFullYear():(10>n.getYear()%100?"0":"")+n.getYear()%100;break;case"h":var d=n.getHours();l=l+o("h",12<d?d-12:0==d?12:d,2);break;case"H":l+=o("H",n.getHours(),2);break;case"i":l+=o("i",n.getMinutes(),2);break;case"s":l+=o("s",n.getSeconds(),2);break;case"a":l+=11<n.getHours()?"pm":"am";break;case"A":l+=11<n.getHours()?"PM":"AM";break;case"'":a("'")?l+="'":u=!0;break;default:l+=i.charAt(c)}return l},e.scroller.parseDate=function(i,n,r){var a=new Date;if(!i||!n)return a;n="object"==typeof n?n.toString():n+"";for(var o=e.extend({},t,r),s=(r=a.getFullYear(),a.getMonth()+1),l=a.getDate(),u=-1,c=a.getHours(),d=(a=a.getMinutes(),0),p=-1,h=!1,g=function(e){return(e=b+1<i.length&&i.charAt(b+1)==e)&&b++,e},f=function(e){return g(e),(e=n.substr(v).match(RegExp("^\\d{1,"+("@"==e?14:"!"==e?20:"y"==e?4:"o"==e?3:2)+"}")))?(v+=e[0].length,parseInt(e[0],10)):0},m=function(e,t,i){for(e=g(e)?i:t,t=0;t<e.length;t++)if(n.substr(v,e[t].length).toLowerCase()==e[t].toLowerCase())return v+=e[t].length,t+1;return 0},v=0,b=0;b<i.length;b++)if(h)"'"!=i.charAt(b)||g("'")?v++:h=!1;else switch(i.charAt(b)){case"d":l=f("d");break;case"D":m("D",o.dayNamesShort,o.dayNames);break;case"o":u=f("o");break;case"m":s=f("m");break;case"M":s=m("M",o.monthNamesShort,o.monthNames);break;case"y":r=f("y");break;case"H":c=f("H");break;case"h":c=f("h");break;case"i":a=f("i");break;case"s":d=f("s");break;case"a":p=m("a",["am","pm"],["am","pm"])-1;break;case"A":p=m("A",["am","pm"],["am","pm"])-1;break;case"'":g("'")?v++:h=!0;break;default:v++}if(100>r&&(r+=(new Date).getFullYear()-(new Date).getFullYear()%100+(r<=o.shortYearCutoff?0:-100)),-1<u)for(s=1,l=u;;){if(l<=(o=32-new Date(r,s-1,32).getDate()))break;s++,l-=o}if((c=new Date(r,s-1,l,-1==p?c:p&&12>c?c+12:p||12!=c?c:0,a,d)).getFullYear()!=r||c.getMonth()+1!=s||c.getDate()!=l)throw"Invalid date";return c}}(jQuery),function(e){var t={inputClass:""};e.scroller.presets.select=function(i){var n=e.extend({},t,i.settings),r=e(this),a=this.id+"_dummy";e('label[for="'+this.id+'"]').attr("for",a);var o=(o=e('label[for="'+a+'"]')).length?o.text():r.attr("name"),s=[],l=[{}];l[0][o]={};var u=l[0][o];e("option",r).each(function(){var t=e(this).attr("value");u[t]=e(this).text(),e(this).prop("disabled")&&s.push(t)}),e("#"+a).remove();var c=e('<input type="text" id="'+a+'" value="'+u[r.val()]+'" class="'+n.inputClass+'" readonly />').insertBefore(r);return n.showOnFocus&&c.focus(function(){i.show()}),r.hide().closest(".ui-field-contain").trigger("create"),{width:200,wheels:l,headerText:!1,formatResult:function(e){return u[e[0]]},parseValue:function(){return[r.val()]},validate:function(t){e.each(s,function(i,n){e('li[data-val="'+n+'"]',t).removeClass("dw-v")})},onSelect:function(e,t){c.val(e),r.val(t.values[0]).trigger("change")},onChange:function(e,t){"inline"==n.display&&(c.val(e),r.val(t.temp[0]).trigger("change"))},onClose:function(){c.blur()}}}}(jQuery),jQuery.scroller.themes.android={defaults:{dateOrder:"Mddyy",mode:"clickpick",height:50}},function(e){var t={defaults:{dateOrder:"Mddyy",mode:"mixed",rows:5,width:70,showLabel:!1}};e.scroller.themes["android-ics"]=t,e.scroller.themes["android-ics light"]=t}(jQuery),jQuery.scroller.themes.ios={defaults:{dateOrder:"MMdyy",rows:5,height:30,width:55,headerText:!1,showLabel:!1}},function(e){e.scroller.themes.jqm={defaults:{jqmBody:"c",jqmHeader:"b",jqmWheel:"d",jqmClickPick:"c",jqmSet:"b",jqmCancel:"c"},init:function(t,i){var n=i.settings;e(".dw",t).removeClass("dwbg").addClass("ui-overlay-shadow ui-corner-all ui-body-a"),e(".dwb-s a",t).attr("data-role","button").attr("data-theme",n.jqmSet),e(".dwb-c a",t).attr("data-role","button").attr("data-theme",n.jqmCancel),e(".dwwb",t).attr("data-role","button").attr("data-theme",n.jqmClickPick),e(".dwv",t).addClass("ui-header ui-bar-"+n.jqmHeader),e(".dwwr",t).addClass("ui-body-"+n.jqmBody),e(".dwpm .dww",t).addClass("ui-body-"+n.jqmWheel),"inline"!=n.display&&e(".dw",t).addClass("pop in"),t.trigger("create"),e(".dwo",t).click(function(){i.hide()})}}}(jQuery),function(e){var t=(bizagi.util.isEventSupported("paste")?"paste":"input")+".mask";e.widget("ui.mask",{_init:function(){var t=this.options,i=this;e.extend(this,{caret:function(t,n){return e.ui.mask.caret(i.element,t,n)}}),t.mask&&t.mask.length&&(t.placeholder&&t.placeholder.length||(t.placeholder="_"),this._prepareBuffer(),this._bindEvents(),this._checkVal(this.element.val().length&&t.allowPartials))},destroy:function(){this.element.unbind(".mask").removeData("mask")},value:function(){this.element;var t=this,i=e.map(t.buffer,function(e,i){return t.tests[i]?e:null}).join(""),n=new RegExp("\\"+this.options.placeholder,"gi");return i.replace(n,"")},formatted:function(){var e=new RegExp("\\"+this.options.placeholder,"gi");return this.element.val().replace(e,"")},apply:function(){this.element.trigger("apply.mask")},_setData:function(t,i){e.widget.prototype._setData.apply(this,arguments);var n=this.options;switch(t){case"mask":if(!n.mask||!n.mask.length){this.element.unbind(".mask");break}case"placeholder":n.placeholder&&n.placeholder.length||(n.placeholder="_"),this.element.val(""),this._prepareBuffer(),!this.eventsBound&&this._bindEvents()}},_prepareBuffer:function(){this._escapeMask();var t=this,i=this.element,n=this.options,r=n.mask,a=e.ui.mask.definitions,o=[],s=r.length,l=null;r.length;i.is(":input")||(i.val=i.html),e.each(r.split(""),function(e,t){"?"==t?(0,s=e):a[t]?(o.push(new RegExp(a[t])),null==l&&(l=o.length-1)):o.push(null)}),e.extend(this,{buffer:e.map(r.split(""),function(e,t){if("?"!=e)return a[e]?n.placeholder:e}),tests:o,firstNonMaskPos:l,partialPosition:s}),this.buffer=e.map(this.buffer,function(e,i){return"\t"==e?t.maskEscaped[i]:e}),this.options.mask=r=this.maskEscaped},_bindEvents:function(){var i=this,n=this.element,r=!1,a=n.val();n.attr("readonly")||(n.bind("focus.mask",function(){a=n.val();var e=i._checkVal();i._writeBuffer(),setTimeout(function(){e==i.options.mask.length?i.caret(0,e):i.caret(e)},0)}).bind("blur.mask",function(){i._checkVal(),n.val()!=a&&n.change()}).bind("apply.mask",function(){a=n.val();i._checkVal();i._writeBuffer()}).bind("keydown.mask",function(t){t=t||window.event;var o=i.caret(),s=t.keyCode,l=e.ui.keyCode;return r=s<l.SHIFT||s>l.SHIFT&&s<l.SPACE||s>l.SPACE&&s<41,o.begin-o.end==0||r&&s!=l.BACKSPACE&&s!=l.DELETE||i._clearBuffer(o.begin,o.end),s==l.BACKSPACE||s==l.DELETE?(i._shiftL(o.begin+(s==l.DELETE||s==l.BACKSPACE&&o.begin!=o.end?0:-1),Math.abs(o.begin-o.end)),!1):s==l.ESCAPE?(n.val(a),i.caret(0,i._checkVal()),!1):void 0}).bind("keypress.mask",function(t){var a=(t=t||window.event).charCode||t.keyCode||t.which,o=e.ui.keyCode,s=i.options.mask.length;if(r)return r=!1,t.keyCode!=o.BACKSPACE&&null;var l=i.caret();if(t.ctrlKey||t.altKey||t.metaKey)return!0;if(a>=o.SPACE&&a<=125||a>186){var u=i._seekNext(l.begin-1);if(u<s){var c=String.fromCharCode(a);if(i.tests[u]&&i.tests[u].test(c)){i._shiftR(u),i.buffer[u]=c,i._writeBuffer();var d=i._seekNext(u);i.caret(d),i.options.completed&&d==s&&i.options.completed.call(n)}}}return!1}).bind(t,function(){setTimeout(function(){i.caret(i._checkVal(!0))},0)}),this.eventsBound=!0)},_writeBuffer:function(){return this.element.val(this.buffer.join("")).val()},_clearBuffer:function(e,t){for(var i=this.options.mask.length,n=e;n<t&&n<i;n++)this.tests[n]&&(this.buffer[n]=this.options.placeholder)},_seekNext:function(e){for(var t=this.options.mask.length;++e<=t&&!this.tests[e];);return e},_shiftR:function(e){for(var t=this.options.mask.length,i=e,n=this.options.placeholder;i<t;i++)if(this.tests[i]){var r=this._seekNext(i),a=this.buffer[i];if(this.buffer[i]=n,!(r<t&&this.tests[r].test(a)))break;n=a}},_shiftL:function(e,t){for(;!this.tests[e]&&--e>=0;);for(var i=e,n=this.options.mask.length,r=this.options.placeholder,a=e;a<n&&(a>=0||t>1);a++)if(this.tests[a]){this.buffer[a]=r;var o=this._seekNext(a);if(o<n&&this.tests[a].test(this.buffer[o]))for(this.buffer[e]=this.buffer[o],this.buffer[o]=r,e++;!this.tests[e];)e++}this._writeBuffer(),this.caret(Math.max(this.firstNonMaskPos,i))},_checkVal:function(e){for(var t=this.element,i=t.val(),n=this.options.mask.length,r=-1,a=0,o=0;a<n;a++)if(this.tests[a]){for(this.buffer[a]=this.options.placeholder;o++<i.length;){var s=i.charAt(o-1);if(this.tests[a].test(s)){this.buffer[a]=s,r=a;break}}if(o>i.length)break}else this.buffer[a]==i[o]&&a!=this.partialPosition&&(o++,r=a);return!e&&r+1<this.partialPosition?this.options.allowPartials&&this.value().length?t.is(":input")||this._writeBuffer():(t.val(""),this._clearBuffer(0,n)):(e||r+1>=this.partialPosition)&&(this._writeBuffer(),e||t.val(t.val().substring(0,r+1))),this.partialPosition?a:this.firstNonMaskPos},_escapeMask:function(){for(var e=this.options.mask,t=[],i=[],n=0;n<e.length;n++){var r,a=e[n]||e.charAt(n);"\\"==a&&"\\"!=e[n-1]||("\\"==e[n-1]?(r="\t",i[t.length]=a):r=a,t[t.length]=r)}this.options.mask=t.join("");for(n=0;n<t.length;n++)void 0!==i[n]&&(t[n]=i[n]);this.maskEscaped=t.join("")}}),e.extend(e.ui.mask,{version:"@VERSION",getter:"value formatted",defaults:{mask:"",placeholder:"_",completed:null,allowPartials:!1},definitions:{"#":"[\\d]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},caret:function(e,t,i){var n=e[0];if("number"==typeof t){if(i="number"==typeof i?i:t,n.setSelectionRange)n.focus(),n.setSelectionRange(t,i);else if(n.createTextRange){(r=n.createTextRange()).collapse(!0),r.moveEnd("character",i),r.moveStart("character",t),r.select()}return e}if(n.setSelectionRange)t=n.selectionStart,i=n.selectionEnd;else if(document.selection&&document.selection.createRange){var r;i=(t=0-(r=document.selection.createRange()).duplicate().moveStart("character",-1e5))+r.text.length}return{begin:t,end:i}}})}(jQuery),jQuery.fn.numeric=function(e,t){return e=e||".",t="function"==typeof t?t:function(){},this.keypress(function(t){var i=t.charCode?t.charCode:t.keyCode?t.keyCode:0;if(13==i&&"input"==this.nodeName.toLowerCase())return!0;if(13==i)return!1;var n=!1;if(t.ctrlKey&&97==i||t.ctrlKey&&65==i)return!0;if(t.ctrlKey&&120==i||t.ctrlKey&&88==i)return!0;if(t.ctrlKey&&99==i||t.ctrlKey&&67==i)return!0;if(t.ctrlKey&&122==i||t.ctrlKey&&90==i)return!0;if(t.ctrlKey&&118==i||t.ctrlKey&&86==i||t.shiftKey&&45==i)return!0;if(i<48||i>57){if(45==i&&0==this.value.length)return!0;i==e.charCodeAt(0)&&-1!=this.value.indexOf(e)&&(n=!1),8!=i&&9!=i&&13!=i&&35!=i&&36!=i&&37!=i&&39!=i&&46!=i?n=!1:void 0!==t.charCode&&(t.keyCode==t.which&&0!=t.which?n=!0:0!=t.keyCode&&0==t.charCode&&0==t.which&&(n=!0)),i==e.charCodeAt(0)&&-1==this.value.indexOf(e)&&(n=!0)}else n=!0;return n}).blur(function(){var i=jQuery(this).val();""!=i&&(new RegExp("^\\d+$|\\d*"+e+"\\d+").exec(i)||t.apply(this))}),this},jQuery.fn.numericSN=function(e,t){e=e||".",t=t||"e";return callback="function"==typeof callback?callback:function(){},this.keypress(function(i){var n=i.charCode?i.charCode:i.keyCode?i.keyCode:0;if(13==n&&"input"==this.nodeName.toLowerCase())return!0;if(13==n)return!1;var r=!1;return!!(i.ctrlKey&&97==n||i.ctrlKey&&65==n)||(!!(i.ctrlKey&&120==n||i.ctrlKey&&88==n)||(!!(i.ctrlKey&&99==n||i.ctrlKey&&67==n)||(!!(i.ctrlKey&&122==n||i.ctrlKey&&90==n)||(!!(i.ctrlKey&&118==n||i.ctrlKey&&86==n||i.shiftKey&&45==n)||(n<48||n>57?(n==e.charCodeAt(0)&&-1!=this.value.indexOf(e)&&(r=!1),n==t.charCodeAt(0)&&-1!=this.value.indexOf(t)&&(r=!1),8!=n&&9!=n&&13!=n&&35!=n&&36!=n&&37!=n&&39!=n?r=!1:void 0!==i.charCode&&(i.keyCode==i.which&&0!=i.which?r=!0:0!=i.keyCode&&0==i.charCode&&0==i.which&&(r=!0)),n==t.charCodeAt(0)&&-1==this.value.indexOf(t)&&(r=!0),n==e.charCodeAt(0)&&-1==this.value.indexOf(e)&&(r=!0),n!="-".charCodeAt(0)&&n!="+".charCodeAt(0)||(r=!0)):r=!0,r)))))}).blur(function(){var t=jQuery(this).val();""!=t&&(new RegExp("^\\d+$|\\d*"+e+"\\d+").exec(t)||callback.apply(this))}),this},function(e){function t(t){var i=e.formatCurrency.regions[t];if(i)return i;if(/(\w+)-(\w+)/g.test(t)){var n=t.replace(/(\w+)-(\w+)/g,"$1");return e.formatCurrency.regions[n]}return null}function i(e){if(""===e.symbol)return new RegExp("[^\\d"+e.decimalSymbol+"-]","g");var t=e.symbol.replace("$","\\$").replace(".","\\.");return new RegExp(t+"|[^\\d"+e.decimalSymbol+"-]","g")}e.formatCurrency={},e.formatCurrency.regions=[],e.formatCurrency.regions[""]={symbol:"$",positiveFormat:"%s%n",negativeFormat:"(%s%n)",decimalSymbol:".",digitGroupSymbol:",",groupDigits:!0},e.fn.formatCurrency=function(n,r){1==arguments.length&&"string"!=typeof n&&(r=n,n=!1);var a={name:"formatCurrency",colorize:!1,region:"",global:!0,roundToDecimalPlace:2,eventOnDecimalsEntered:!1};return a=e.extend(a,e.formatCurrency.regions[""]),(r=e.extend(a,r)).region.length>0&&(r=e.extend(r,t(r.region))),r.regex=i(r),this.each(function(){var t=e(this),i="0",a=new RegExp("^(0+|-0+)","g");if((i=t[t.is("input, select, textarea")?"val":"html"]()).search("\\(")>=0&&(i="-"+i),i.match(/[1-9]/g)||(i=i.replace(a,0)),""!==i&&("-"!==i||-1!==r.roundToDecimalPlace)){if(isNaN(i)){if(""===(i=i.replace(r.regex,""))||"-"===i&&-1===r.roundToDecimalPlace)return;"."!=r.decimalSymbol&&(i=i.replace(r.decimalSymbol,".")),isNaN(i)&&(i="0")}var o=String(i).split("."),s=i==Math.abs(i),l=o.length>1,u=l?o[1].toString():"0",c=u;if(i=Math.abs(o[0]),i=isNaN(i)?0:i,r.roundToDecimalPlace>=0&&("2"==(u=(u=parseFloat("1."+u)).toFixed(r.roundToDecimalPlace)).substring(0,1)&&(i=Number(i)+1),u=u.substring(2)),i=String(i),r.groupDigits)for(var d=0;d<Math.floor((i.length-(1+d))/3);d++)i=i.substring(0,i.length-(4*d+3))+r.digitGroupSymbol+i.substring(i.length-(4*d+3));(l&&-1==r.roundToDecimalPlace||r.roundToDecimalPlace>0)&&(i+=r.decimalSymbol+u);var p=(s?r.positiveFormat:r.negativeFormat).replace(/%s/g,r.symbol);p=p.replace(/%n/g,i);var h=e([]);(h=n?e(n):t)[h.is("input, select, textarea")?"val":"html"](p),l&&r.eventOnDecimalsEntered&&c.length>r.roundToDecimalPlace&&h.trigger("decimalsEntered",c),r.colorize&&h.css("color",s?"black":"red")}})},e.fn.toNumber=function(n){var r=e.extend({name:"toNumber",region:"",global:!0},e.formatCurrency.regions[""]);return(n=jQuery.extend(r,n)).region.length>0&&(n=e.extend(n,t(n.region))),n.regex=i(n),this.each(function(){var t=e(this).is("input, select, textarea")?"val":"html";e(this)[t](e(this)[t]().replace("(","(-").replace(n.regex,""))})},e.fn.asNumber=function(n){var r=e.extend({name:"asNumber",region:"",parse:!0,parseType:"Float",global:!0},e.formatCurrency.regions[""]);(n=jQuery.extend(r,n)).region.length>0&&(n=e.extend(n,t(n.region))),n.regex=i(n),n.parseType=function(e){switch(e.toLowerCase()){case"int":return"Int";case"float":return"Float";default:throw"invalid parseType"}}(n.parseType);var a=e(this).is("input, select, textarea")?"val":"html",o=e(this)[a]();return o=(o=(o=o||"").replace("(","(-")).replace(n.regex,""),n.parse?(0==o.length&&(o="0"),"."!=n.decimalSymbol&&(o=o.replace(n.decimalSymbol,".")),window["parse"+n.parseType](o)):o}}(jQuery),function(e){var t;bizagi=void 0!==bizagi?bizagi:{},bizagiLoaderMessageTemplate=e.template("#loading_template",'<div class="ui-bizagi-loading-message" style="position: relative;"><div class="ui-bizagi-loading-message-center" style="position: ${position}; top: ${top}; left: ${top}; display: ${inline};"><div class="ui-bizagi-loading-icon"></div></div></div>'),e.fn.loadingMessage=function(t){t=t||{};if(0==this.children().length){var i=e.fasttmpl(bizagiLoaderMessageTemplate,{position:"absolute",top:t["position-y"]||"48%",left:t["position-x"]||"48%",display:"inline"});this.append(i),this.data("loading",!0)}},e.fn.endLoadingMessage=function(){this.children().length>0&&e("> .ui-bizagi-loading-message",this).length&&(this.data("loading",!1),this.attr("data-loading",!1),this.removeClass("ui-bizagi-component-loading"),this.empty())},(t=jQuery).fn.startLoading=function(e){var i=this,n=(e=e||{}).delay||0,r=e.overlay||!1,a=e.opacity||0,o=e.maxZIndex||!1;if(1!=t(i).data("loading")){var s;t(i).data("loading",!0),s=r?a?t.template("#loading_tmpl_transparent",'<div class="ui-bizagi-loading-transparent-overlay ui-bizagi-loading-gray-overlay" style="background-color:rgba(128, 128, 128, ${opacity});opacity:${opacity};z-index:${zindex};"><div class="ui-bizagi-loading-overlay-preloader"></div></div>'):t.template("#loading_tmpl_transparent",'<div class="ui-bizagi-loading-transparent-overlay ui-bizagi-loading-alpha-overlay" style="z-index:${zindex};"><div class="ui-bizagi-loading-overlay-preloader"></div></div>'):t.template("#loading_tmpl_alpha",'<div class="ui-bizagi-loading-transparent-overlay" style="z-index:${zindex};"><div class="ui-bizagi-loading-overlay-preloader ${extraCssClass}"></div></div>'),o=o?t.ui.dialog.prototype._getMaxZindex():"auto";var l=window.setTimeout(function(){t(i).data("original-position",t(i).css("position")),t(i).css("position","relative"),r?t(i).append(t.fasttmpl(s,{opacity:a,zindex:o})):t(i).append(t.fasttmpl(s,{zindex:o})),t(i).removeData("loading-timeout")},n);t(i).data("loading-timeout",l)}},t.fn.endLoading=function(){t(this).css("position",t(this).data("original-position")),t(".ui-bizagi-loading-transparent-overlay",this).remove();var e=t(this).data("loading-timeout");e&&clearTimeout(e),t(this).data("loading",!1)}}(jQuery),bizagi.render=void 0!==bizagi.render?bizagi.render:{},bizagi.render.services=void 0!==bizagi.render.services?bizagi.render.services:{},bizagi.render.services.endPoints=[],bizagi.render.services.getEndPoints=function(e){var t="Rest/Handlers/Render",i="Rest/Handlers/Render/Upload",n="Rest/Handlers/RenderFile",r="Rest/Handlers/Letter",a="Rest/Handlers/MultiAction",o="Rest/Handlers/Metadata";return"workflow"==e.context?{"form-get-data":e.proxyPrefix+t,"form-submit-data":e.proxyPrefix+t,"form-submit-data-upload":e.proxyPrefix+i,"render-property-refresh":e.proxyPrefix+t,"render-multiaction":e.proxyPrefix+a,"render-upload-cancel-image":e.proxyPrefix+"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png","render-upload-data-url":e.proxyPrefix+n,"render-upload-add-url":e.proxyPrefix+i,"render-upload-delete-url":e.proxyPrefix+t,"render-ecm-upload-url":e.proxyPrefix+o,"render-multiaction-metadata":e.proxyPrefix+"Rest/Handlers/MetadataMultiAction","render-grid-edit-url":e.proxyPrefix+t,"render-grid-save-url":e.proxyPrefix+t,"render-grid-add-url":e.proxyPrefix+t,"render-grid-rollback-url":e.proxyPrefix+t,"render-grid-commit-url":e.proxyPrefix+t,"render-grid-checkpoint-url":e.proxyPrefix+t,"render-save-entity":e.proxyPrefix+t,"render-stakeholder-associated":e.proxyPrefix+t,"render-search-default-image":e.proxyPrefix+"jquery/rendering/css/desktop/images/bizagi_xpress.png","render-search-form-get-data":e.proxyPrefix+t+"?h_contexttype=metadata","render-search-advanced-url":e.proxyPrefix+"Rest/Handlers/Query","render-letter-notEditable-url":e.proxyPrefix+r,"render-letter-content-url":e.proxyPrefix+r,"render-letter-save-url":e.proxyPrefix+t,"render-letter-content-icons":e.proxyPrefix+"jquery/rendering/css/desktop/plugins/other/images/nicEditorIcons.gif","render-userfield-definition":e.proxyPrefix+"Rest/Userfields/{guidUserfield}/UserfieldDependency/{device}","render-document-generate":e.proxyPrefix+"Rest/DocumentTemplates/CaseTemplates","render-document-generateAllDocuments":e.proxyPrefix+"Rest/DocumentTemplates/TemplatesConcatFilesToPDF","render-processes-startform":e.proxyPrefix+"Rest/Processes/HasStartForm","render-processes-getstartform":e.proxyPrefix+"Rest/Processes/HasStartForm","render-entity-layout-image64":e.proxyPrefix+"Api/Entities/{entity}/Picture/{surrogateKey}/Base64","render-entity-layout-imageByteArray":e.proxyPrefix+"Api/Entities/{entity}/Picture/{surrogateKey}/Array?xpath={xpath}&width={width}&height={height}&idcase={idcase}&idworkitem={idworkitem}&contextxpath={contextxpath}&h_={hash}&xsrf="+bizagi.cookie(".BIZCSRF"),"render-entity-layout-upload-files":e.proxyPrefix+"Api/Entities/{entity}/Files/{surrogateKey}/Array?xpath={xpath}","case-handler-getCaseSummary":e.proxyPrefix+"Rest/Cases/{idCase}/SummaryGuid","case-handler-getCaseSummaryByGuid":e.proxyPrefix+"Rest/Cases/{guid}/SummaryByGuid","case-handler-getCaseAssignees":e.proxyPrefix+"Rest/Cases/{idCase}/AssigneesGuid","case-handler-getWorkItems":e.proxyPrefix+"Rest/Cases/{idCase}/WorkItems","case-handler-getWorkItemsByGuid":e.proxyPrefix+"Rest/Cases/{guid}/WorkItemsByGuid","admin-getUsersList":e.proxyPrefix+"Rest/Users/SearchUsers","admin-getUsersList-FromPreferences":e.proxyPrefix+"Rest/Users/SearchUsersFromPreferences","admin-getUsersList-ForStakeholders":e.proxyPrefix+"Rest/Users/SearchUsersForStakeholders","admin-getUsersForAssignation":e.proxyPrefix+"Rest/Users/UsersForAssignation","admin-users-config":e.proxyPrefix+"Api/Authentication/BizagiConfig","admin-usersform":e.proxyPrefix+"Rest/Handlers/Render","admin-GenerateDataToSendByEmail":e.proxyPrefix+"Rest/Users/GenerateDataToSendByEmail","admin-sendUserEmail":e.proxyPrefix+"Rest/Users/SendUserEmail"}:"sharepoint"==e.context||"portal"==e.context?(void 0===e.sharepointProxyPrefix&&alert("sharepointProxyPrefix param is requiered to build endpoints when context is 'sharepoint'"),{"form-get-data":e.sharepointProxyPrefix+t,"form-submit-data":e.sharepointProxyPrefix+t,"form-submit-data-upload":e.sharepointProxyPrefix+i,"render-property-refresh":e.sharepointProxyPrefix+t,"render-multiaction":e.sharepointProxyPrefix+a,"render-upload-cancel-image":"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png","render-upload-data-url":e.sharepointProxyPrefix+n,"render-upload-add-url":e.sharepointProxyPrefix+i,"render-upload-delete-url":e.sharepointProxyPrefix+t,"render-ecm-upload-url":e.sharepointProxyPrefix+o,"render-grid-edit-url":e.sharepointProxyPrefix+t,"render-grid-save-url":e.sharepointProxyPrefix+t,"render-grid-add-url":e.sharepointProxyPrefix+t,"render-grid-rollback-url":e.sharepointProxyPrefix+t,"render-grid-commit-url":e.sharepointProxyPrefix+t,"render-grid-checkpoint-url":e.sharepointProxyPrefix+t,"render-save-entity":e.sharepointProxyPrefix+t,"render-stakeholder-associated":e.proxyPrefix+t,"render-search-default-image":"jquery/css/bizagi/desktop/images/bizagi_xpress.png","render-search-form-get-data":e.sharepointProxyPrefix+t+"?h_contexttype=metadata","render-search-advanced-url":e.sharepointProxyPrefix+"Rest/Handlers/Query","render-letter-notEditable-url":e.sharepointProxyPrefix+r,"render-letter-content-url":e.sharepointProxyPrefix+r,"render-letter-save-url":e.sharepointProxyPrefix+t,"render-letter-content-icons":"jquery/css/plugins/other/images/nicEditorIcons.gif","render-userfield-definition":e.sharepointProxyPrefix+"Rest/Userfields/{guidUserfield}/UserfieldDependency/{device}","render-document-generate":e.sharepointProxyPrefix+"Rest/DocumentTemplates/CaseTemplates","render-document-generateAllDocuments":e.sharepointProxyPrefix+"Rest/DocumentTemplates/TemplatesConcatFilesToPDF","render-processes-startform":e.proxyPrefix+"Rest/Processes/HasStartForm","render-processes-getstartform":e.proxyPrefix+"Rest/Processes/HasStartForm","case-handler-getCaseSummary":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Summary","case-handler-getCaseSummaryByGuid":e.sharepointProxyPrefix+"Rest/Cases/{guid}/SummaryByGuid","case-handler-getWorkItems":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/WorkItems","case-handler-getWorkItemsByGuid":e.proxyPrefix+"Rest/Cases/{guid}/WorkItemsByGuid"}):"entitymanagement"==e.context?{"form-get-data":e.proxyPrefix+t+"?h_contexttype=entity","form-submit-data":e.proxyPrefix+t+"?h_contexttype=entity","form-submit-data-upload":e.proxyPrefix+i+"?h_contexttype=entity","render-property-refresh":e.proxyPrefix+t+"?h_contexttype=entity","render-upload-cancel-image":"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png","render-upload-data-url":e.proxyPrefix+n+"?h_contexttype=entity","render-upload-add-url":e.proxyPrefix+i+"?h_contexttype=entity","render-upload-delete-url":e.proxyPrefix+t+"?h_contexttype=entity","render-grid-edit-url":e.proxyPrefix+t+"?h_contexttype=entity","render-grid-save-url":e.proxyPrefix+t+"?h_contexttype=entity","render-grid-add-url":e.proxyPrefix+t+"?h_contexttype=entity","render-grid-rollback-url":e.proxyPrefix+t+"?h_contexttype=entity","render-grid-commit-url":e.proxyPrefix+t+"?h_contexttype=entity","render-grid-checkpoint-url":e.proxyPrefix+t+"?h_contexttype=entity","render-search-default-image":"jquery/rendering/css/desktop/images/bizagi_xpress.png","render-search-form-get-data":e.proxyPrefix+t+"?h_contexttype=metadata","render-search-advanced-url":e.proxyPrefix+"Rest/Handlers/Query?h_contexttype=entity","render-letter-notEditable-url":e.proxyPrefix+r+"?h_contexttype=entity","render-letter-content-url":e.proxyPrefix+r+"?h_contexttype=entity","render-letter-save-url":e.proxyPrefix+t+"?h_contexttype=entity","render-letter-content-icons":"jquery/rendering/css/desktop/plugins/other/images/nicEditorIcons.gif"}:"search"==e.context?{"form-get-data":e.proxyPrefix+t+"?h_contexttype=metadata","form-submit-data":e.proxyPrefix+t+"?h_contexttype=metadata","form-submit-data-upload":e.proxyPrefix+i+"?h_contexttype=metadata","render-property-refresh":e.proxyPrefix+t+"?h_contexttype=metadata","render-upload-cancel-image":"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png","render-upload-data-url":e.proxyPrefix+n+"?h_contexttype=metadata","render-upload-add-url":e.proxyPrefix+i+"?h_contexttype=metadata","render-upload-delete-url":e.proxyPrefix+t+"?h_contexttype=metadata","render-grid-edit-url":e.proxyPrefix+t+"?h_contexttype=metadata","render-grid-save-url":e.proxyPrefix+t+"?h_contexttype=metadata","render-grid-add-url":e.proxyPrefix+t+"?h_contexttype=metadata","render-grid-rollback-url":e.proxyPrefix+t+"?h_contexttype=metadata","render-grid-commit-url":e.proxyPrefix+t+"?h_contexttype=metadata","render-grid-checkpoint-url":e.proxyPrefix+t+"?h_contexttype=metadata","render-search-default-image":"jquery/rendering/css/desktop/images/bizagi_xpress.png","render-search-form-get-data":e.proxyPrefix+t+"?h_contexttype=metadata","render-search-advanced-url":e.proxyPrefix+"Rest/Handlers/Query?h_contexttype=metadata","render-letter-notEditable-url":e.proxyPrefix+r+"?h_contexttype=metadata","render-letter-content-url":e.proxyPrefix+r+"?h_contexttype=metadata","render-letter-save-url":e.proxyPrefix+t+"?h_contexttype=metadata","render-letter-content-icons":"jquery/rendering/css/desktop/plugins/other/images/nicEditorIcons.gif"}:{}},$.Class.extend("bizagi.render.services.context",{},{init:function(e){this.context=e.context,this.endPoints=bizagi.render.services.getEndPoints(e),this.proxyPrefix=bizagi.util.isEmpty(e.proxyPrefix)?"":e.proxyPrefix},getUrl:function(e){return null==this.endPoints[e]&&alert("No endpoint defined for: "+e),this.endPoints[e]},setProxyPrefix:function(e){this.proxyPrefix=bizagi.util.isEmpty(e.proxyPrefix)?"":e.proxyPrefix,this.endPoints=bizagi.render.services.getEndPoints(e)}}),$.Class.extend("bizagi.render.services.service",{BA_ACTION_PARAMETER_PREFIX:"p_",BA_CONTEXT_PARAMETER_PREFIX:"h_",BA_PAGE_CACHE:"pageCacheId"},{init:function(e){(e=e||{}).context=e.context||"workflow",e.proxyPrefix=bizagi.util.isEmpty(e.proxyPrefix)?"":e.proxyPrefix,this.serviceLocator=new bizagi.render.services.context(e),this.multiactionService=new bizagi.render.services.multiactionservice(this),this.guid=Math.guid(),bizagi.override.enableECMMetadataMultiaction&&!bizagi.util.isMobileDevice()&&(this.multiactionMetadataService=new bizagi.render.services.metadatamultiactionservice(this)),this.userfieldRequests={}},multiaction:function(){return this.multiactionService},getFormData:function(e){var t=this;if(e&&e.data)return e.data;e=e||{};var i={};if(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]=e.action||"LOADFORM",e.idProcess&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"idProcess"]=e.idProcess),e.idForm&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"idForm"]=e.idForm),e.idEntity&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"idEntity"]=e.idEntity),e.surrogateKey&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"surrogateKey"]=e.surrogateKey),e.idRender&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.idRender),e.xpathContext&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext),e.requestedForm&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"requestedForm"]=e.requestedForm),e.recordXPath&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"recordXPath"]=e.recordXPath),e.summaryForm&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"summaryForm"]=e.summaryForm),e.idCase&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"idCase"]=e.idCase),e.idWorkitem&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"idWorkitem"]=e.idWorkitem),e.idTask&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"idTask"]=e.idTask),e.idPageCache&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+t.Class.BA_PAGE_CACHE]=e.idPageCache),e.contextType&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"contexttype"]=e.contextType),e.guidEntity&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"guidEntity"]=e.guidEntity),bizagi.util.isEmpty(e.isRefresh)||(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"isRefresh"]=e.isRefresh),e.isActionStartForm&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"isActionStartForm"]=e.isActionStartForm),e.additionalXpaths&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"additionalXpaths"]=e.additionalXpaths),e.idStartScope&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"idStartScope"]=e.idStartScope),void 0!==e.readOnlyForm&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"readonlyform"]=e.readOnlyForm),void 0!==e.printversion&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"printForm"]=e.printversion),void 0!==e.recordXpath&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"recordlauncherxpath"]=e.recordXpath),e.guid&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"guid"]=e.guid),!1===e.editable&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"DisplayFormAsReadOnly"]=!0),e.printversion){e[t.Class.BA_ACTION_PARAMETER_PREFIX+"all_rows"]&&(i[t.Class.BA_ACTION_PARAMETER_PREFIX+"all_rows"]=e[t.Class.BA_ACTION_PARAMETER_PREFIX+"all_rows"])}return e.prepare?i:(bizagi.chrono.initAndStart("data"),$.ajax({url:e.url||t.serviceLocator.getUrl("form-get-data"),data:i,type:"POST",dataType:"json",serviceType:e.action||"LOAD"}).pipe(function(t){if(bizagi.chrono.stopAndLog("data"),e.printversion)try{t.form.properties.editable="False";var n=function(e){return null==e?e:(e.hasOwnProperty("type")&&"grid"==e.type?(e.id=i.id+"-print",e.allowAdd="False",e.allowDelete="False",e.allowEdit="False",e.allowGrouping="False",e.allowMore="False",e.allowSearch="False"):$.each(i,function(t,i){"object"==typeof i&&(e[t]=n(e[t]))}),e)};t=n(t)}catch(e){}return t}))},getSearchFormData:function(e){e=e||{};var t={};return t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="SEARCHFORM",e.xpath&&(t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpath"]=e.xpath),e.idRender&&(t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.idRender),e.xpathContext&&(t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext),e.idSearchForm&&(t[this.Class.BA_ACTION_PARAMETER_PREFIX+"searchForm"]=e.idSearchForm),e.idPageCache&&(t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache),e.prepare?t:$.ajax({url:e.url||this.serviceLocator.getUrl("render-search-form-get-data"),data:t,type:"POST",dataType:"json",serviceType:"SEARCHFORM"})},processDataValues:function(e){var t;for(t in e=$.extend(!0,{},e))e.hasOwnProperty(t)&&"object"==$.type(e[t])&&e[t].hasOwnProperty("id")&&(e[t]=e[t].id);return e},submitData:function(e){var t=this;data=t.resolveData(e.data||{},e.xpathContext),data=t.processDataValues(data),data[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]=e.action,(e=e||{}).xpath&&(data[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpath"]=e.xpath),e.idRender&&(data[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.idRender),e.xpathContext&&(data[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext),e.idPageCache&&(data[t.Class.BA_CONTEXT_PARAMETER_PREFIX+t.Class.BA_PAGE_CACHE]=e.idPageCache),e.guidEntity&&(data[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"guidEntity"]=e.guidEntity),e.contexttype&&(data[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"contexttype"]=e.contexttype),e.transitions&&(data[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"transitions"]=e.transitions),e.surrogatekey&&(data[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"surrogateKey"]=e.surrogatekey),e.forcePlanCompletion&&(data[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"forcePlanCompletion"]=e.forcePlanCompletion);var i=e.action.toString().toUpperCase();return bizagi.debug("Data sent",data),e.prepare?data:$.ajax({url:e.url||t.serviceLocator.getUrl("form-submit-data"),data:data,type:"POST",dataType:"json",serviceType:i})},resolveData:function(e,t){var i,n,r;if(!$.isEmptyObject(e)&&t&&-1!==t.search(/\[id=\d+\]/))for(i in e)-1!==i.search(/\[id=\d+\]/)&&t==i.substr(0,i.search(/\]/)+1)&&(n=i.substr(i.search(/\]/)+2),r=e[i],e[n]=r,delete e[i]);return e},getPropertyData:function(e){var t=this,i=e.extra||{};return i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="PROCESSPROPERTYVALUE",i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpath"]=e.xpath,i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.idRender,i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext,i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+t.Class.BA_PAGE_CACHE]=e.idPageCache,i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"propertyName"]=e.property,e.contexttype&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"contexttype"]=e.contexttype),e.guidentity&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"guidEntity"]=e.guidentity),e.surrogatekey&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"surrogateKey"]=e.surrogatekey),e.pxpath&&(i[t.Class.BA_ACTION_PARAMETER_PREFIX+"xpath"]=e.pxpath),e.prows&&(i[t.Class.BA_ACTION_PARAMETER_PREFIX+"rows"]=e.prows),e.ppage&&(i[t.Class.BA_ACTION_PARAMETER_PREFIX+"page"]=e.ppage),null!=e.pfilter&&null!=e.pfilter&&(i[t.Class.BA_ACTION_PARAMETER_PREFIX+"filter"]=e.pfilter),null!=e.psort&&null!=e.psort&&(i[t.Class.BA_ACTION_PARAMETER_PREFIX+"sort"]=e.psort),e.porder&&(i[t.Class.BA_ACTION_PARAMETER_PREFIX+"order"]=e.porder),e.pcaseId&&(i[t.Class.BA_ACTION_PARAMETER_PREFIX+"caseId"]=e.pcaseId),e.pguidEntity&&(i[t.Class.BA_ACTION_PARAMETER_PREFIX+"guidEntity"]=e.pguidEntity),e.psurrogatedKey&&(i[t.Class.BA_ACTION_PARAMETER_PREFIX+"surrogatedKey"]=e.psurrogatedKey),e.pactionXpath&&(i[t.Class.BA_ACTION_PARAMETER_PREFIX+"actionXpath"]=e.pactionXpath),e.ptemplateGuid&&(i[t.Class.BA_ACTION_PARAMETER_PREFIX+"templateGuid"]=e.ptemplateGuid),e.pparameters&&(i[t.Class.BA_ACTION_PARAMETER_PREFIX+"parameters"]=e.pparameters),bizagi.debug("Property refresh for '"+e.xpath+"'",i),e.prepare?i:$.ajax({url:e.url||t.serviceLocator.getUrl("render-property-refresh"),data:i,type:"POST",dataType:e.dataType||"json",serviceType:"PROCESSPROPERTYVALUE",beforeSend:function(e,t){bizagi.multiactionConnection=bizagi.multiactionConnection||[],bizagi.multiactionConnection.push(e)}})},getData:function(e){return this.getPropertyData($.extend(e,{property:"data"}))},getSearchData:function(e){return e.extra=e.extra||{},e.extra[this.Class.BA_ACTION_PARAMETER_PREFIX+"term"]=e.term,this.getPropertyData($.extend(e,{property:"data"}))},getCollapseData:function(e){return e.extra=e.extra||{},e.extra[this.Class.BA_ACTION_PARAMETER_PREFIX+"collapseState"]=e.collapseState,this.getPropertyData($.extend(e,{property:"collapseState"}))},getGridData:function(e){return e.extra=e.extra||{},e.extra[this.Class.BA_ACTION_PARAMETER_PREFIX+"sort"]=e.sort,e.extra[this.Class.BA_ACTION_PARAMETER_PREFIX+"order"]=e.order,e.extra[this.Class.BA_ACTION_PARAMETER_PREFIX+"page"]=e.page,e.extra[this.Class.BA_ACTION_PARAMETER_PREFIX+"rows"]=e.rows,e.extra[this.Class.BA_ACTION_PARAMETER_PREFIX+"searchFilter"]=e.searchFilter,e.extra[this.Class.BA_ACTION_PARAMETER_PREFIX+"value"]=e.value,this.getPropertyData($.extend(e,{property:"data"}))},getGridDataExclusivesSelected:function(e){return e.extra=e.extra||{},e.extra[this.Class.BA_ACTION_PARAMETER_PREFIX+"rows"]=e.rows,e.extra[this.Class.BA_ACTION_PARAMETER_PREFIX+"value"]=e.value,e.extra[this.Class.BA_ACTION_PARAMETER_PREFIX+"xpathfilter"]=e.xpathfilter,this.getPropertyData($.extend(e,{property:"exclusivesSelected"}))},getUploadCancelImage:function(){return bizagi.services.ajax.pathToBase+this.serviceLocator.getUrl("render-upload-cancel-image")},getUploadFileUrl:function(e){var t=this,i=this.serviceLocator.getUrl("render-upload-data-url"),n={};return n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="PROCESSPROPERTYVALUE",n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"propertyName"]="fileContent",n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpath"]=e.xpath,n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.idRender,n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext,n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+t.Class.BA_PAGE_CACHE]=e.idPageCache,n[t.Class.BA_ACTION_PARAMETER_PREFIX+"fileId"]=e.fileId,n[t.Class.BA_ACTION_PARAMETER_PREFIX+"sessionId"]=e.sessionId,e.contexttype&&(n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"contexttype"]=e.contexttype),t.verifyPathToBase(bizagi.services.ajax.pathToBase,i)+"?"+jQuery.param(n)+"&xsrf="+bizagi.cookie(".BIZCSRF")},getUploadFileEntityUrl:function(e){var t=this,i=this.serviceLocator.getUrl("render-upload-data-url"),n={};return n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="PROCESSPROPERTYVALUETEMPLATE",n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"propertyName"]="fileContent",n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpath"]=e.xpath,n[t.Class.BA_ACTION_PARAMETER_PREFIX+"fileId"]=e.fileId,e.isContextContainerWidgetRender?(n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.idRender,n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext,n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+t.Class.BA_PAGE_CACHE]=e.idPageCache,n[t.Class.BA_ACTION_PARAMETER_PREFIX+"sessionId"]=e.sessionId,n[t.Class.BA_ACTION_PARAMETER_PREFIX+"xpathactions"]=e.xpathActions):(n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"surrogateKey"]=e.surrogatekey,n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"guidEntity"]=e.guidentity),t.verifyPathToBase(bizagi.services.ajax.pathToBase,i)+"?"+jQuery.param(n)+"&xsrf="+bizagi.cookie(".BIZCSRF")},getUploadAddUrl:function(){var e=this.serviceLocator.getUrl("render-upload-add-url"),t={};return t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="ADDFILE",this.verifyPathToBase(bizagi.services.ajax.pathToBase,e)+"?"+jQuery.param(t)},getUploadAddFileUrl:function(e){var t=this.serviceLocator.getUrl("form-submit-data-upload"),i={};return i[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]=!0===e?"SAVEUSERIMAGE":"savefile",this.verifyPathToBase(bizagi.services.ajax.pathToBase,t)+"?"+jQuery.param(i)},deleteImage:function(e){var t=e.extra||{};return t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="DELETEUSERIMAGE",t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpath"]=e.xpath,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.idRender,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,e.contexttype&&(t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"contexttype"]=e.contexttype),bizagi.debug("Removing image '"+e.xpath+"'",t),e.prepare?t:$.ajax({url:e.url||this.serviceLocator.getUrl("render-upload-delete-url"),data:t,type:"POST",dataType:"json"})},deleteUploadFile:function(e){var t=e.extra||{};return t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="REMOVERELATION",t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpath"]=e.xpath,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.idRender,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,e.contexttype&&(t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"contexttype"]=e.contexttype),bizagi.debug("Removing file in upload '"+e.xpath+"'",t),e.prepare?t:$.ajax({url:e.url||this.serviceLocator.getUrl("render-upload-delete-url"),data:t,type:"POST",dataType:"json"})},getECMMetadata:function(e){var t=e.extra||{};return t.action="getECMMetadata",t.idFileUpload=e.idFileUpload,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,t.xpathContext=e.xpathContext,t.xPath=e.xPath,t.idAttrib=e.idAttrib,e.sessionId&&(t[this.Class.BA_ACTION_PARAMETER_PREFIX+"sessionId"]=e.sessionId),bizagi.debug("Get file metadata '"+e.xPath+"'",t),e.prepare?t:$.ajax({url:e.url||this.serviceLocator.getUrl("render-ecm-upload-url"),data:t,type:"POST",dataType:"json",interceptor:{intercept:!0,source:"rendering_"+this.guid}})},checkOutFile:function(e){var t=e.extra||{};return t.action="checkOutFile",t.idFileUpload=e.idFileUpload,t.xPath=e.xPath,t.idAttrib=e.idAttrib,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,t.xpathContext=e.xpathContext,bizagi.debug("file checkout '"+e.xPath+"'",t),e.prepare?t:$.ajax({url:e.url||this.serviceLocator.getUrl("render-ecm-upload-url"),data:t,type:"POST",dataType:"json"})},cancelCheckOut:function(e){var t=e.extra||{};return t.action="cancelCheckOut",t.idFileUpload=e.idFileUpload,t.xPath=e.xPath,t.idAttrib=e.idAttrib,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,t.xpathContext=e.xpathContext,bizagi.debug("file checkout '"+e.xPath+"'",t),e.prepare?t:$.ajax({url:e.url||this.serviceLocator.getUrl("render-ecm-upload-url"),data:t,type:"POST",dataType:"json"})},deleteECMFile:function(e){var t=e.extra||{};return t.action="delete",t.idFileUpload=e.idFileUpload,t.xPath=e.xPath,t.idAttrib=e.idAttrib,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,t.xpathContext=e.xpathContext,bizagi.debug("delete file'"+e.xPath+"'",t),e.prepare?t:$.ajax({url:e.url||this.serviceLocator.getUrl("render-ecm-upload-url"),data:t,type:"POST",dataType:"json"})},updateECMFileContent:function(e){var t=e.extra||{};return t.action="updateECMFileContent",t.idFileUpload=e.idFileUpload,t.xPath=e.xPath,t.idAttrib=e.idAttrib,t.metaValues=e.metaValues,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,t.xpathContext=e.xpathContext,bizagi.debug("Update file content '"+e.xPath+"'",t),e.prepare?t:$.ajax({url:e.url||this.serviceLocator.getUrl("render-ecm-upload-url"),data:t,type:"POST",dataType:"json"})},updateECMMetadata:function(e){var t=e.extra||{};return t.action="updateECMMetadata",t.idFileUpload=e.idFileUpload,t.xPath=e.xPath,t.idAttrib=e.idAttrib,t.metaValues=e.metaValues,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,t.xpathContext=e.xpathContext,bizagi.debug("Update file meta data '"+e.xPath+"'",t),e.prepare?t:$.ajax({url:e.url||this.serviceLocator.getUrl("render-ecm-upload-url"),data:t,type:"POST",dataType:"json"})},getFileProperties:function(e){var t=e.extra||{};return t.action="getFileProperties",t.idFileUpload=e.idFileUpload,t.xPath=e.xPath,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,t.xpathContext=e.xpathContext,bizagi.debug("Get file properties '"+e.xPath+"'",t),e.prepare?t:$.ajax({url:e.url||this.serviceLocator.getUrl("render-ecm-upload-url"),data:t,type:"POST",dataType:"json",interceptor:{intercept:!0,source:"rendering_"+this.guid}})},uploadECMFile:function(e){var t=e.extra||{};return t.action="uploadECMFile",t.fileUpload=e.fileUpload,t.xPath=e.xPath,t.idAttrib=e.idAttrib,t.fileName=e.fileName,t.metaValues=e.metaValues,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,t.xpathContext=e.xpathContext,bizagi.debug("Upload ECM file '"+e.xPath+"'",t),e.prepare?t:$.ajax({url:e.url||this.serviceLocator.getUrl("render-ecm-upload-url"),data:t,type:"POST",dataType:"json"})},getECMFileUrl:function(e){var t=e.url||this.serviceLocator.getUrl("render-ecm-upload-url")+"File",i=e.extra||{};return i.action="viewECMFile",i.idFileUpload=e.idFileUpload,i.xPath=e.xPath,i.idAttrib=e.idAttrib,i.fileName=e.fileName,i[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,i.xpathContext=e.xpathContext,e.sessionId&&(i[this.Class.BA_ACTION_PARAMETER_PREFIX+"sessionId"]=e.sessionId),e.p_sessionId&&(i.p_sessionId=e.p_sessionId),bizagi.debug("View uploaded file '"+e.xPath+"'",i),this.verifyPathToBase(bizagi.services.ajax.pathToBase,t)+"?"+jQuery.param(i)+"&xsrf="+bizagi.cookie(".BIZCSRF")},isFileOnECM:function(e){var t={action:"isFileOnECM"};return t.idUpload=e.idUpload,$.read(this.serviceLocator.getUrl("render-ecm-upload-url"),t)},editGridRecord:function(e){var t=e.extra||{};return t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="EDITRELATION",t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpath"]=e.xpath,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.idRender,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,e.contexttype&&(t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"contexttype"]=e.contexttype),bizagi.debug("Sending edit request for relation '"+e.xpath+"'",t),e.prepare?t:$.ajax({url:e.url||this.serviceLocator.getUrl("render-grid-edit-url"),data:t,type:"POST",dataType:"json",serviceType:"EDITRELATION"})},addGridRecord:function(e){var t=e.extra||{};return t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="ADDRELATION",t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpath"]=e.xpath,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.idRender,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext,e.contexttype&&(t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"contexttype"]=e.contexttype),t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,bizagi.debug("Sending add request for grid '"+e.xpath+"'",t),e.prepare?t:$.ajax({url:e.url||this.serviceLocator.getUrl("render-grid-add-url"),data:t,type:"POST",dataType:"json",serviceType:"ADDRELATION"})},addGridRecordData:function(e){var t=e.extra||{};t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="ADDRELATIONWITHDATA",t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpath"]=e.xpath,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.idRender,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,e.contexttype&&(t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"contexttype"]=e.contexttype);var i=e.submitData||{};for(key in i)t[key]=i[key];return bizagi.debug("Sending add request for grid '"+e.xpath+"'",t),e.prepare?t:$.ajax({url:e.url||this.serviceLocator.getUrl("render-grid-add-url"),data:t,type:"POST",dataType:"json",serviceType:"ADDRELATIONWITHDATA"})},saveGridRecord:function(e){var t=e.extra||{};t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="SAVERELATION",t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.idRender,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext,e.contexttype&&(t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"contexttype"]=e.contexttype),t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"disableServerGridValidations"]=e.disableServerGridValidations||!1,e.submitData.idPageCache&&(t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.submitData.idPageCache,delete e.submitData.idPageCache);var i=e.submitData||{};for(key in i=this.processDataValues(i))t[key]=i[key];return bizagi.debug("Sending save request for grid '"+e.xpath+"'",t),e.prepare?t:$.ajax({url:e.url||this.serviceLocator.getUrl("render-grid-save-url"),data:t,type:"POST",dataType:"json",serviceType:"SAVERELATION"})},deleteGridRecord:function(e){var t=e.extra||{};return t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="REMOVERELATION",t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpath"]=e.xpath,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.idRender,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,e.contexttype&&(t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"contexttype"]=e.contexttype),bizagi.debug("Sending delete request for grid '"+e.xpath+"'",t),e.prepare?t:$.ajax({url:e.url||this.serviceLocator.getUrl("render-grid-save-url"),data:t,type:"POST",dataType:"json",serviceType:"REMOVERELATION"})},getFlipAssociation:function(e){var t=this,i=e.extra||{};return i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="PROCESSPROPERTYVALUE",i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpath"]=e.xpath,i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.id,i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"propertyName"]="flipped",i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext,i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+t.Class.BA_PAGE_CACHE]=e.idPageCache,i[t.Class.BA_ACTION_PARAMETER_PREFIX+"flipstate"]=e.flipstate,e.contexttype&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"contexttype"]=e.contexttype),bizagi.debug("Sending request for flip association control '"+e.xpath+"'",i),e.prepare?i:$.ajax({url:e.url||t.serviceLocator.getUrl("render-property-refresh"),data:i,type:"POST",dataType:"text"}).pipe(function(e){try{return bizagi.services.ajax.parseJSON(e)}catch(t){return e}})},rollbackGridAction:function(e){var t=e.extra||{};return t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="ROLLBACK",t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpath"]=e.xpath,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.idRender,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,e.contexttype&&(t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"contexttype"]=e.contexttype),bizagi.debug("Sending rollback request for grid '"+e.xpath+"'",t),e.prepare?t:$.ajax({url:e.url||this.serviceLocator.getUrl("render-grid-rollback-url"),data:t,type:"POST",dataType:"json",serviceType:"ROLLBACK"})},getSearchDefaultImage:function(){return bizagi.services.ajax.pathToBase+this.serviceLocator.getUrl("render-search-default-image")},processDataCriteria:function(e){var t;for(t in e=$.extend(!0,[],e))e.hasOwnProperty(t)&&e[t].hasOwnProperty("value")&&"object"==$.type(e[t].value)&&e[t].value.hasOwnProperty("id")&&e[t].value.hasOwnProperty("label")&&(e[t].value=e[t].value.id);return e},submitSearch:function(e){var t,i=this,n=e.extra||{},r=e.sort&&""!==e.sort?e.sort:"";return e.order&&""!==e.order&&""!==r&&(r+=" "+e.order),n[i.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="SEARCHENTITYFORRENDER",n[i.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.idRender,n[i.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext,n[i.Class.BA_CONTEXT_PARAMETER_PREFIX+i.Class.BA_PAGE_CACHE]=e.idPageCache,n[i.Class.BA_ACTION_PARAMETER_PREFIX+"searchForm"]=e.idSearchForm,n[i.Class.BA_ACTION_PARAMETER_PREFIX+"sort"]=r,n[i.Class.BA_ACTION_PARAMETER_PREFIX+"page"]=e.page,n[i.Class.BA_ACTION_PARAMETER_PREFIX+"pageSize"]=e.rows,n[i.Class.BA_ACTION_PARAMETER_PREFIX+"searchFilter"]=e.searchFilter,t=i.processDataCriteria(e.criteria),n[i.Class.BA_ACTION_PARAMETER_PREFIX+"searchCriteria"]=JSON.encode(t),e.allowFullSearch&&(n[i.Class.BA_ACTION_PARAMETER_PREFIX+"allowFullSearch"]=e.allowFullSearch),e.maxRecords&&(n[i.Class.BA_ACTION_PARAMETER_PREFIX+"maxRowsAllowed"]=e.maxRecords),bizagi.debug("Performing advanced search",n),e.prepare?n:$.ajax({url:e.url||i.serviceLocator.getUrl("render-search-advanced-url"),data:n,type:"POST",dataType:"json",serviceType:"SEARCHENTITYFORRENDER"})},associateStakeholder:function(e){var t=e.extra||{};return t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="SAVE",t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"contexttype"]=e.contexttype,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"surrogateKey"]=e.surrogateKey,t.associatedUser=e.associatedUser,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"guidEntity"]=e.guidentity,bizagi.debug("Property refresh for '"+e.xpath+"'",t),e.prepare?t:$.ajax({url:e.url||this.serviceLocator.getUrl("render-stakeholder-associated"),data:t,type:"POST",dataType:e.dataType||"json"})},refreshAssociateStakeholder:function(e){var t=e.extra||{};return t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="PROCESSPROPERTYVALUE",t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.idRender,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"contexttype"]=e.contexttype,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"propertyName"]=e.property,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,bizagi.debug("Property refresh for '"+e.xpath+"'",t),e.prepare?t:$.ajax({url:e.url||this.serviceLocator.getUrl("render-stakeholder-associated"),data:t,type:"POST",dataType:e.dataType||"json",serviceType:"PROCESSPROPERTYVALUE"})},getLetterNotEditableUrl:function(e){var t=e.extra||{};t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="GETLETTER",t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.idRender,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpath"]=e.xpath,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache;var i=e.url||this.serviceLocator.getUrl("render-letter-notEditable-url");return this.verifyPathToBase(bizagi.services.ajax.pathToBase,i)+"?"+jQuery.param(t)},getLetterContent:function(e){var t=e.extra||{};return t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="GETLETTER",t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.idRender,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpath"]=e.xpath,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,e.prepare?t:$.ajax({url:e.url||this.serviceLocator.getUrl("render-letter-content-url"),data:t,type:"POST",dataType:"html"}).pipe(function(e){try{return bizagi.services.ajax.parseJSON(e)}catch(t){return e}})},getCanGenerateLetter:function(e){var t=e.extra||{};return t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="CANGENERATELETTER",t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.idRender,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpath"]=e.xpath,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,e.prepare?t:$.ajax({url:this.serviceLocator.getUrl("render-letter-content-url"),data:t,type:"POST",dataType:"json"})},saveLetterContent:function(e){var t=e.extra||{};t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="UPDATELETTER",t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.idRender,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpath"]=e.xpath,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache;var i=e.content||"",n=(e.url||this.serviceLocator.getUrl("render-letter-save-url"))+"?"+jQuery.param(t);return bizagi.debug("Save request for letter sent to: "+n,i),e.prepare?t:$.ajax({url:n,data:i,type:"POST",dataType:"html"})},getLetterEditorIconsPath:function(){return bizagi.services.ajax.pathToBase+this.serviceLocator.getUrl("render-letter-content-icons")},executeButton:function(e){return this.getPropertyData($.extend(e,{property:"buttonRule"}))},getFilePrintUrl:function(e){var t=this,i=this.serviceLocator.getUrl("render-upload-data-url"),n={};return n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="PROCESSPROPERTYVALUE",n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"propertyName"]="data",n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"disposition"]=e.disposition,n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.idRender,n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext,n[t.Class.BA_ACTION_PARAMETER_PREFIX+"sessionId"]=e.sessionId,n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+t.Class.BA_PAGE_CACHE]=e.idPageCache,e.contexttype&&(n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"contexttype"]=e.contexttype),t.verifyPathToBase(bizagi.services.ajax.pathToBase,i)+"?"+jQuery.param(n)},editLinkForm:function(e){return this.editGridRecord(e)},saveLinkForm:function(e){var t=e.extra||{};t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="SAVEFORMLINKRELATION",t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.idRender,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext,e.contexttype&&(t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"contexttype"]=e.contexttype),e.submitData.idPageCache&&(t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.submitData.idPageCache,delete e.submitData.idPageCache);var i=e.submitData||{};for(key in i=this.processDataValues(i))t[key]=i[key];return bizagi.debug("Sending save request for grid '"+e.xpath+"'",t),e.prepare?t:$.ajax({url:e.url||this.serviceLocator.getUrl("render-grid-save-url"),data:t,type:"POST",dataType:"json",serviceType:"SAVEFORMLINKRELATION"})},rollbackLinkForm:function(e){return this.rollbackGridAction(e)},commitLinkForm:function(e){return this.commitGridAction(e)},sendCheckpoint:function(e){return this.sendCheckpointAction(e)},getUserfieldDefinition:function(e){return e=e||{},this.userfieldRequests[e.userfield]?this.userfieldRequests[e.userfield]:(this.userfieldRequests[e.userfield]=$.read(this.serviceLocator.getUrl("render-userfield-definition"),{guidUserfield:e.userfield,device:e.device||"desktop"}),this.userfieldRequests[e.userfield])},refreshControl:function(e){e=e||{};var t={};return t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="REFRESH",t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.idRender,e.xpathContext&&(t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext),t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,e.contexttype&&(t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"contexttype"]=e.contexttype),e.idForm&&(t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"idForm"]=e.idForm),e.prepare?t:$.ajax({url:e.url||this.serviceLocator.getUrl("form-get-data"),data:t,type:"POST",dataType:"json",serviceType:"PARTIALREFRESH"})},refreshGridCell:function(e){var t=this;e=e||{};var i={};return i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="REFRESHGRIDCELL",i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.idRender,i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"guidcolumn"]=e.column,e.xpathContext&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext),i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+t.Class.BA_PAGE_CACHE]=e.idPageCache,i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+t.Class.BA_PAGE_CACHE]=e.idPageCache,e.idForm&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"idForm"]=e.idForm),e.typeRender&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"typeRender"]=e.typeRender),e.prepare?i:$.ajax({url:e.url||t.serviceLocator.getUrl("form-get-data"),data:i,type:"POST",dataType:"json"})},executeRule:function(e){var t={};return e=e||{},t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="EXECUTERULE",t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"guidrule"]=e.rule||"",e.xpathContext&&(t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext),e.contexttype&&(t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"contexttype"]=e.contexttype),e.prepare?t:$.create(this.serviceLocator.getUrl("form-submit-data"),t)},executeInterface:function(e){var t={};return e=e||{},t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="EXECUTEINTERFACE",t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"guidinterface"]=e.interface||"",t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext||"",e.prepare?t:$.create(this.serviceLocator.getUrl("form-submit-data"),t)},executeSAPConnector:function(e){var t={};return e=e||{},t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="EXECUTESAP",t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"guidsap"]=e.guidsap||"",t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext||"",e.prepare?t:$.create(this.serviceLocator.getUrl("form-submit-data"),t)},executeConnector:function(e){var t={};return e=e||{},t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="EXECUTECONNECTOR",t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"guidConnector"]=e.guidConnector||"",t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext||"",e.prepare?t:$.create(this.serviceLocator.getUrl("form-submit-data"),t)},generateDocumentTemplate:function(e){return(e=e||{}).append=!!e.append&&e.append,$.create(this.serviceLocator.getUrl("render-document-generate"),{h_pageCacheId:e.idPageCache,contextXpath:e.xpathcontext,groupMappingId:e.groupMapping,xpathAttribute:e.xpath,append:e.append,controlId:e.id})},getAllDocumentsDownloadUrl:function(e){var t=this.serviceLocator.getUrl("render-document-generateAllDocuments"),i={};return i.h_pageCacheId=e.idPageCache,i.contextXpath=e.xpathContext,i.xpathAttribute=e.xpath,i.idCase=e.idCase,i.idWorkItem=e.idWorkItem,i.p_sessionId=e.sessionId,this.verifyPathToBase(bizagi.services.ajax.pathToBase,t)+"?"+jQuery.param(i)+"&xsrf="+bizagi.cookie(".BIZCSRF")},getCaseNumber:function(e){return $.ajax({url:this.serviceLocator.getUrl("case-handler-getCaseSummary").replace("{idCase}",e.idCase)+"?eventAsTasks=false&onlyUserWorkItems=true&mobileDevice="+bizagi.isMobile(),type:"GET",dataType:"json"})},getCaseAssignees:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getCaseAssignees"),{idCase:e.idCase}).pipe(function(e){return e})},getWorkitems:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getWorkItems"),{idCase:e.idCase,onlyUserWorkItems:e.onlyUserWorkItems||""})},getGridExportUrl:function(e){var t=this,i=this.serviceLocator.getUrl("render-upload-data-url"),n={};return n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="PROCESSPROPERTYVALUE",n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"propertyName"]=e.exportType,n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"disposition"]=e.disposition,n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.idRender,n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext,n[t.Class.BA_ACTION_PARAMETER_PREFIX+"sort"]=e.sort,n[t.Class.BA_ACTION_PARAMETER_PREFIX+"sessionId"]=e.sessionId,n[t.Class.BA_ACTION_PARAMETER_PREFIX+"idForm"]=e.idForm,n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+t.Class.BA_PAGE_CACHE]=e.idPageCache,e.contexttype&&(n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"contexttype"]=e.contexttype),t.verifyPathToBase(bizagi.services.ajax.pathToBase,i)+"?"+jQuery.param(n)+"&xsrf="+bizagi.cookie(".BIZCSRF")},sendEmail:function(e){var t=this;e=e||{};var i={};if(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="PROCESSPROPERTYVALUE",i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.idRender,i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpath"]=e.xpath,i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+t.Class.BA_PAGE_CACHE]=e.idPageCache,i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"propertyName"]=e.property||"sendEmail",e.xpathContext&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext),i[t.Class.BA_ACTION_PARAMETER_PREFIX+"to"]=e.to,i[t.Class.BA_ACTION_PARAMETER_PREFIX+"subject"]=e.subject,i[t.Class.BA_ACTION_PARAMETER_PREFIX+"message"]=e.message,i[t.Class.BA_ACTION_PARAMETER_PREFIX+"selected"]=JSON.encode(e.selected),e.prepare)return i;var n=e.url||t.serviceLocator.getUrl("form-get-data");return $.create(n,i)},invalidatePageCache:function(e){var t=e.extra||{};return t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="INVALIDATEPAGECACHE",t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,e.prepare?t:$.ajax({url:e.url||this.serviceLocator.getUrl("form-submit-data"),data:t,type:"POST",dataType:"json",serviceType:"INVALIDATEPAGECACHE"})},getUsersList:function(e){return $.read(this.serviceLocator.getUrl("admin-getUsersList"),e)},getUsersListFromPreferences:function(e){return $.read(this.serviceLocator.getUrl("admin-getUsersList-FromPreferences"),e)},getUsersListForStakeholders:function(e){return $.read(this.serviceLocator.getUrl("admin-getUsersList-ForStakeholders"),e)},getUsersForAssignation:function(e){return $.read(this.serviceLocator.getUrl("admin-getUsersForAssignation"),e)},getUsersForm:function(e){return $.create(this.serviceLocator.getUrl("admin-usersform"),e)},generateDataToSendByEmail:function(e){(e=e||{}).idUser,e.password;return $.ajax({url:this.serviceLocator.getUrl("admin-GenerateDataToSendByEmail"),data:e,type:"POST",dataType:"json"})},sendUserEmail:function(e){(e=e||{}).eMailTo,e.subject,e.body;return $.ajax({url:this.serviceLocator.getUrl("admin-sendUserEmail"),data:e,type:"POST",dataType:"json"})},getConfiguration:function(){var e=this.serviceLocator.getUrl("admin-users-config");return $.read(e)},verifyPathToBase:function(e,t){return-1!=t.indexOf("http")&&""!=e?t:e+t},getTemplate:function(e){var t={};e=e||{},t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="LOADTEMPLATE",t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"contexttype"]="entity",t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"guidEntity"]=e.guid,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"isProcessData"]=e.forcePersonalizedColumns,e.templateType&&(t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"templatetype"]=e.templateType),e.templateGuid&&(t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"templateguid"]=e.templateGuid),null!=e.isDefaultTemplate&&(t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"isDefaultTemplate"]=e.isDefaultTemplate);var i=bizagi.util.detectDevice();return bizagi.util.isTabletDevice()?i="tablet":bizagi.util.isSmartphoneDevice()&&(i="mobile"),t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"devicetype"]=i,e.prepare?t:$.create(this.serviceLocator.getUrl("form-get-data"),t)},hasStartForm:function(e){var t={};return e.guidWFClass&&(t.guidWFClass=e.guidWFClass),$.read(this.serviceLocator.getUrl("render-processes-startform"),t)},getStartForm:function(e){var t=this,i={};return i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="LOADSTARTFORM",i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"guidprocess"]=e.guidprocess,i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"isActionStartForm"]=!0,e.idStartScope&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"idStartScope"]=e.idStartScope),e.idCase&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"idCase"]=e.idCase),e.idStartScope&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"idStartScope"]=e.idStartScope),e.idWorkitem&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"idWorkitem"]=e.idWorkitem),e.additionalXpaths&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"additionalXpaths"]=e.additionalXpaths),e.surrogatedKey&&(i[t.Class.BA_ACTION_PARAMETER_PREFIX+"surrogatedKey"]=e.surrogatedKey),e.recordXpath&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"recordlauncherxpath"]=e.recordXpath),e.mappingstakeholders&&(i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"mappingstakeholders"]=e.mappingstakeholders),$.ajax({url:t.serviceLocator.getUrl("form-get-data"),data:i,type:"POST",dataType:"json",cache:!0})},editActionForm:function(e){return this.editGridRecord(e)},getActions:function(e){var t=$.extend(e,{prepare:!0}),i=this.getPropertyData(t)||[];return e.ptags&&(i[this.Class.BA_ACTION_PARAMETER_PREFIX+"tags"]=e.ptags),e.pmaxitems&&(i[this.Class.BA_ACTION_PARAMETER_PREFIX+"maxitems"]=e.pmaxitems),e.prepare?i:$.ajax({url:e.url||this.serviceLocator.getUrl("render-property-refresh"),data:i,type:"POST",dataType:e.dataType||"json",serviceType:"PROCESSPROPERTYVALUE",beforeSend:function(e,t){bizagi.multiactionConnection=bizagi.multiactionConnection||[],bizagi.multiactionConnection.push(e)}})},executeActions:function(e){var t=$.extend({},e,{prepare:!0}),i=this.getPropertyData(t)||[];return e.pguidConstructor&&(i[this.Class.BA_ACTION_PARAMETER_PREFIX+"guidConstructor"]=e.pguidConstructor),e.pguidAction&&(i[this.Class.BA_ACTION_PARAMETER_PREFIX+"guidAction"]=e.pguidAction),e.prepare?i:$.ajax({url:e.url||this.serviceLocator.getUrl("render-property-refresh"),data:i,type:"POST",dataType:e.dataType||"json",serviceType:"PROCESSPROPERTYVALUE"})},getPolymorphicActions:function(e){var t=$.extend(e,{prepare:!0}),i=this.getPropertyData(t)||[];return e.ptags&&(i[this.Class.BA_ACTION_PARAMETER_PREFIX+"tags"]=e.ptags),e.additionalXpaths&&(i[this.Class.BA_ACTION_PARAMETER_PREFIX+"additionalXpaths"]=e.additionalXpaths),e.prepare?i:$.ajax({url:e.url||this.serviceLocator.getUrl("render-property-refresh"),data:i,type:"POST",dataType:e.dataType||"json",serviceType:"PROCESSPROPERTYVALUE"})},serializePolymorphicActions:function(e){var t=[],i=function(t){t=t||{};var n="";return $.each(e,function(e,r){r[0]==t[6]&&(n+=i(r)+r[1]+" > ")}),n},n=function(t,r){var a,o,s,l=(s=[],o=(o=r)||"",$.each(e,function(e,t){t[6]==o&&s.push(t)}),s);return $.each(l,function(e,r){var o=n([],r[0]);(""!==(a={guidEntity:r[0],displayName:r[1],hasConstructor:!!r[5],type:r[3],guidObject:r[4],guidConstructor:r[5],xpathContext:r[2],children:o,parents:i(r)}).guidConstructor||a.children.length>0)&&t.push(a)}),t};return n(t,""),t},getEntityImage64:function(e){var t={width:e.data,height:e.height,xpath:e.xpath},i=this.serviceLocator.getUrl("render-entity-layout-image64").replace("{entity}",e.entity).replace("{surrogateKey}",e.surrogateKey);return $.ajax({url:i,data:t})},getFilesDataForLayoutUploadControl:function(e){return $.read(this.serviceLocator.getUrl("render-entity-layout-upload-files"),e)},processUploadFile:function(e){return $.ajax({url:e.url,data:e.formData,type:"POST",contentType:!1,processData:!1})},commitGridAction:function(e){var t=e.extra||{};return t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="COMMIT",t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpath"]=e.xpath,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.idRender,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,e.contexttype&&(t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"contexttype"]=e.contexttype),bizagi.debug("Sending rollback request for grid '"+e.xpath+"'",t),e.prepare?t:$.ajax({url:e.url||this.serviceLocator.getUrl("render-grid-commit-url"),data:t,type:"POST",dataType:"json",serviceType:"COMMIT"})},sendCheckpointAction:function(e){var t=e.extra||{};return t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="CHECKPOINT",t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpath"]=e.xpath,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=e.idRender,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=e.xpathContext,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,e.contexttype&&(t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"contexttype"]=e.contexttype),bizagi.debug("Sending checkpoint request for grid '"+e.xpath+"'",t),e.prepare?t:$.ajax({url:e.url||this.serviceLocator.getUrl("render-grid-checkpoint-url"),data:t,type:"POST",dataType:"json",serviceType:"CHECKPOINT"})}}),bizagi.render.services.service.extend("bizagi.render.services.service",{},{init:function(e){this._super(e),this.database=e.database},getFormData:function(e){var t=this;return(e=e||{}).isOfflineForm?bizagi.util.isNativePluginSupported()&&void 0!==bizagiapp.getNativeFormData?t.getFormDataFromNative(e).then(function(e){return t.database.mergeForm(e[1],e[0].data)}):$.when(t.database.getCase(e.idCase)).then(function(e){var i=$.trim(e.idWfClass.toString());return t.database.mergeForm(e,t.database.getFormData(i))}):t._super(e)},getFormDataFromNative:function(e){var t=new $.Deferred;return bizagiapp.getNativeFormData(e,function(i){bizagiapp.getCase(e.idCase,function(e){var n=[JSON.parse(i),JSON.parse(e)];t.resolve(n)},function(e){t.reject(e)})},function(e){t.reject(e)}),t.promise()},submitData:function(e){if((e=e||{}).isOfflineForm){var t=this.resolveData(e.data||{},e.xpathContext);return t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]=e.action,bizagi.util.isNativePluginSupported()&&void 0!==bizagiapp.getNativeFormData?this.saveNativeFormInfo(e,t):this.database.saveFormInfo(e,t)}return this._super(e)},saveNativeFormInfo:function(e,t){var i=this,n=new $.Deferred;return i.getFormDataFromNative(e).then(function(r){return i.database.nativeSaveFormInfo(t,r[1],r[0].data).done(function(t){bizagiapp.saveFormData(e,t),n.resolve(t)})}),n.promise()}}),$.Class.extend("bizagi.render.services.multiactionservice",{BA_ACTION_PARAMETER_PREFIX:"p_",BA_CONTEXT_PARAMETER_PREFIX:"h_",BA_PAGE_CACHE:"pageCacheId"},{init:function(e){this.service=e,this.serviceLocator=e.serviceLocator,this.batch={},this.batchTimer=50,this.circularDependencies=new bizagi.circularDependencies,this.replicateServiceMethods()},getService:function(){return this.service},replicateServiceMethods:function(){var self=this;for(var key in this.service.Class.prototype)"init"!=key&&"constructor"!=key&&"Class"!=key&&"multiaction"!=key&&(self[key]=eval("var tmp = function(){ return this.proxyMethod(this.getService()."+key+", arguments);};tmp"))},proxyMethod:function(e,arguments){var t=this.service;if(!arguments||1!=arguments.length)return e.apply(t,arguments);if("object"!=typeof arguments[0])return e.apply(t,arguments);var i=arguments[0];if(1==i.prepare)return e.apply(t,arguments);i.prepare=!0;var n=e.apply(t,arguments);return this.add(n)},makeCircularDependenciesError:function(e){return printf(bizagi.localization.getResource("render-actions-loop-validation"),e.dependencyFrom,e.dependencyTo)},add:function(e){var t=this,i=new $.Deferred,n=e.h_action||"unnamed";["PROCESSPROPERTYVALUE","LOADTEMPLATE","ADDRELATIONWITHDATA"].indexOf(n)<0&&bizagi.override.detectCircularDependencies&&t.circularDependencies.addNode(n,e),clearTimeout(t.batchTimeout);var r=e.tag=Math.guid(),a={action:e,deferred:i};return t.batch[r]=a,t.batchTimeout=setTimeout(function(){var e=t.circularDependencies.resolve();if(e.error){for(var i in t.batch){var n=e.error.multiactionError;t.batch[i].deferred.reject(n)}t.batch={}}else t.fire()},t.batchTimer),i.promise()},fire:function(){var e={},t=[];$.each(this.batch,function(i,n){t.push(n.action),e[i]=n}),this.batch={},$.when(this.execute({actions:t,rejectDeferreds:!1})).done(function(t){$.each(t,function(t,i){var n=i.tag;i.error?e[n].deferred.reject(i.error,i,i.error.message):e[n].deferred.resolve(i.result),delete e[n]}),$.each(e,function(e,t){t.deferred.reject({type:"not-processed",message:"Operation didn't executed"},"","Operation didn't executed")})}).fail(function(t,i,n){var r=void 0!==n?n.message:n||"Operation didn't executed";$.each(e,function(e,t){t.deferred.reject({type:"not-processed",message:r},"","Operation didn't executed")})})},execute:function(e){var t=this,n={},r=void 0===e.rejectDeferreds||e.rejectDeferreds;n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="multiaction",$.each(e.actions,function(e,i){i[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"tag"]=i.tag||e,delete i.tag}),(e=e||{}).actions&&(n[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"actions"]=JSON.encode(e.actions)),bizagi.debug("Performing multi-action",n);var a=new $.Deferred;return $.ajax({url:t.serviceLocator.getUrl("render-multiaction"),data:n,type:"POST",dataType:"json",serviceType:"MULTIACTION",beforeSend:function(e,t){bizagi.multiactionConnection=bizagi.multiactionConnection||[],bizagi.multiactionConnection.push(e)}}).done(function(e){for(i in e)if("function"!=typeof e[i]){var t=e[i];if(t.error&&r)return void a.reject(this,"servererror",t)}a.resolve(e)}).fail(function(e){var t,i=e.responseText||e;try{t=JSON.parse(i)}catch(e){}a.reject(e,"servererror",t)}),a.promise()}}),$.Class.extend("bizagi.command.controllers.controller",{THROW_ERROR:!0},{init:function(e){this.form=e,this.dateFormat=e.getResource("dateFormat")},buildConditions:function(e,t,i){var n=e.expressions&&e.expressions.length>1?this.buildConditionOperator(e.operator):e.operator;if(t=t||!1,i=i||!1,"true"==n)return"true";if("false"==n)return"false";for(var r="",a=0;a<e.expressions.length;a++){var o=e.expressions[a];o.simple?r+=this.buildSimpleCondition(o.simple,t,i):o.complex&&(r+="("+this.buildConditions(o.complex,t,i)+") "),r+=a<e.expressions.length-1?n:""}return r},buildConditionOperator:function(e){return"and"==e?" && ":"or"==e?" || ":e},buildSimpleCondition:function(e,t,i){var n,r,a="",o=e.operator,s="",l="";t=t||!1,i=i||!1;var u=e.xpath||e.renderId,c=this.detectConditionArgumentType(u,e.argumentType);if(n=this.buildXpath(u,c,t),"boolean"!=c&&(s+="!bizagi.util.isEmpty("+n+") && "),i&&u&&u.length>0&&!{boolean:""}.hasOwnProperty(c)&&(l="self.isVisible('"+u+"') && self.isEditable('"+u+"') && "),bizagi.util.isEmpty(e.argument)?""===e.argument&&(a='""'):(a=this.buildArgument(e.argument,c,t),"xpath"==c&&(s+="!bizagi.util.isEmpty("+a+") && ")),"includes"==o)return l+s+"self.includes("+n+","+a+") ";if("changes"==o)return"self.isChanged("+n+", params.changed)";if("equals"==o)return l+s+n+" == "+a;if("not-equals"==o)return l+n+" != "+a;if("less-than"==o)return l+s+n+" < "+a;if("less-equals-than"==o)return l+s+n+" <= "+a;if("greater-than"==o)return l+s+n+" > "+a;if("greater-equals-than"==o)return l+s+n+" >= "+a;if("like"==o)return l+s+n+".toString().indexOf("+a+") >= 0 ";if("is-empty"==o)return"entity"!=c?l+"bizagi.util.isEmpty("+n+")":l+"("+n+" == 0 || bizagi.util.isEmpty("+n+"))";if("is-not-empty"==o)return"entity"!=c?l+"!bizagi.util.isEmpty("+n+")":l+"("+n+" != 0 && !bizagi.util.isEmpty("+n+"))";if("is-true"==o)return l+"( "+n+" == true || "+n+" == 'true' )";if("is-false"==o)return l+"( "+n+" == false || "+n+" == 'false' || "+n+" == 'False' )";if("does-not-contain"==o)return l+s+n+".toString().indexOf("+a+") < 0 ";if("contains"==o)return l+s+n+".toString().indexOf("+a+") >= 0 ";if("begins-with"==o)return l+s+n+".toString().startsWith("+a+") == true ";if("does-not-begins-with"==o)return l+s+n+".toString().startsWith("+a+") == false ";if("file-uploaded"==o)return r=u,t&&r&&(r=r.replaceAll("[]","[' + i + ']")),l+"self.isFileUploaded('"+r+"') ";if("file-not-uploaded"==o)return r=u,t&&r&&(r=r.replaceAll("[]","[' + i + ']")),l+"!self.isFileUploaded('"+r+"') ";if("is-invalid-email"==o)return l+"!self.isValidEmail("+n+") ";if("letter-edited"==o)return"false";if("letter-not-edited"==o)return"false";if("cell-change"==o)return"column == "+a;if("on-press"==o)return t?"self.isGridButtonPressed("+this.buildXpath(u,"id",t)+", params.pressed)":"self.isButtonPressed('"+u+"', params.pressed)";if("on-deleted-row"==o)return"self.onDeletedGridRow('"+(r=u||"")+"', params.rowDeleted)";throw new"There is no implementation for operator code "+o},detectConditionArgumentType:function(e,t){if(void 0===t||"const"==t){var i=this.form,n=i.getRender(e)||i.getRenderById(e);if(null==n)throw new Error("RenderNotFoundException in method detectConditionArgumentType of bizagi.command.controllers.controller");if("grid"==n.properties.type){var r=this.processGridXpath(e);if(""===r.remainingXpath)return"xpath";if(null==(n=n.getColumn(r.remainingXpath)))throw new Error("RenderNotFoundException in method detectConditionArgumentType of bizagi.command.controllers.controller")}var a=n.properties.dataType,o=n.properties.type;return this.isRelatedEntityRender(o)?"entity":1==a||2==a||3==a||4==a||6==a||7==a||10==a||11==a?"number":8==a?"money":12==a||13==a?1==n.properties.showTime?"datetime":"date":5==a?"boolean":"button"==o?"button":"text"}return"xpath"==t||"function"==t||"entity"==t?t:"text"},isRelatedEntityRender:function(e){return"combo"==e||"cascadingCombo"==e||"list"==e||"radio"==e||"search"==e||"searchCombo"==e||"columnCombo"==e},buildXpath:function(e,t,i){return(i=i||!1)&&(e=e.replaceAll("[]","[' + i + ']")),"xpath"!=t||i?"id"==t?"'"+e+"'":"function"==t?"self.evalXpath('"+e+"', '"+this.detectConditionArgumentType(e,"const")+"')":i?"self.evalGridXpath(params, '"+e+"', '"+t+"')":"self.evalXpath('"+e+"', '"+t+"')":"self.evalXpath('"+e+"', '"+this.detectConditionArgumentType(e,"const")+"')"},buildArgument:function(argument,argumentType,bGridDetected,xpathContext){var self=this,number;if(bGridDetected=bGridDetected||!1,"text"==argumentType)return argument=null==argument?"":argument,argument="string"!=typeof argument?argument.toString():argument,-1!=argument.indexOf("'")&&(argument=argument.replaceAll("'","\\'")),-1!=argument.indexOf("\n")&&(argument=argument.replaceAll("\n","")),"'"+argument.toString()+"'";if("boolean"==argumentType)return"string"==typeof argument?1==eval(argument.toLowerCase())?"true":"false":1==eval(argument)?"true":"false";if("number"==argumentType)return number=new Number(argument),NaN==number?"-99999999":number.toString();if("money"==argumentType)return number=new Number(argument),NaN==number?"-99999999":number.toString();if("date"==argumentType){var date=bizagi.util.dateFormatter.getDateFromInvariant(argument);return date&&0!=date||(date=new Date(0)),date.setHours(0,0,0,0),"bizagi.util.dateFormatter.getDateFromInvariant('"+bizagi.util.dateFormatter.formatInvariant(date)+"').getTime()"}if("datetime"==argumentType){var date=bizagi.util.dateFormatter.getDateFromInvariant(argument,!0);return date&&0!=date||(date=new Date(0)),date.setSeconds(0),date.setMilliseconds(0),"bizagi.util.dateFormatter.getDateFromInvariant('"+bizagi.util.dateFormatter.formatInvariant(date,!0)+"', true).getTime()"}if("color"==argumentType)return"'"+argument.toString()+"'";if("entity"==argumentType){if(bizagi.util.isEmpty(argument))return null;try{argument="object"!=typeof argument?JSON.parse(argument):argument}catch(e){argument=argument||{}}var result=argument.id||argument;return JSON.stringify(result)}if("xpath"==argumentType){var xpath=argument.toString();return bGridDetected&&(xpath=xpath.replaceAll("[]","[' + i + ']")),xpathContext&&(xpath=xpathContext+"."+xpath),self.buildXpath(xpath,argumentType,bGridDetected)}if("json"==argumentType)return JSON.encode(argument);if("function"==argumentType){if("BANow"==argument)return"self.getCurrentDate()";throw"There is no implementation for function "+argument}if(null==argumentType)return null;throw"There is no implementation for argument type "+argumentType},isEditable:function(e){var t=this.getRender(e);if(null!=t)return t.properties.editable;this.Class.THROW_ERROR&&this.showRenderNotFoundError(e)},isVisible:function(e){var t=this.getRender(e);if(null!=t)return!!t.properties.visible&&this.isParentVisible(t.parent);this.Class.THROW_ERROR&&this.showRenderNotFoundError(e)},isParentVisible:function(e){return e.parent?!!e.properties.visible&&this.isParentVisible(e.parent):e.properties.visible},evalGridXpath:function(params,xpath,argumentType){var self=this;if(void 0===params)return this.evalXpath(xpath,argumentType);var grid=params.grid;if(null==grid)return self.Class.THROW_ERROR&&self.showRenderNotFoundError(xpath),null;var gridXpath=self.processGridXpath(xpath),gridColumn=grid.getColumn(gridXpath.remainingXpath);if(!gridColumn)return!1;var cellValue=grid.getCellCurrentValue(gridXpath.index,gridXpath.remainingXpath);return"columnRadio"==gridColumn.properties.type&&(cellValue=cellValue?cellValue.length>0&&cellValue[0].length>0?cellValue[0][0]:cellValue.id:0),"columnCombo"==gridColumn.properties.type&&(cellValue=cellValue&&cellValue.id?cellValue.id:0),"columnSearch"==gridColumn.properties.type&&(cellValue=cellValue&&cellValue.id?cellValue.id:0),bizagi.util.isEmpty(cellValue)&&"boolean"==argumentType?"check"!=gridColumn.properties.display&&null:"boolean"==argumentType||"date"==argumentType&&!bizagi.util.isEmpty(self.getRender(xpath,argumentType).value)?eval(self.buildArgument(cellValue,argumentType)):(void 0!==gridColumn&&void 0!==gridColumn.properties&&void 0!==gridColumn.properties.type&&"columnDate"==gridColumn.properties.type&&(cellValue=bizagi.util.dateFormatter.getDateFromInvariant(cellValue)),cellValue)},evalXpath:function(xpath,argumentType){var self=this,i,renderToEval,renders=self.getRenders(xpath);if(null==renders)return self.Class.THROW_ERROR&&self.showRenderNotFoundError(xpath),null;var rendersToEval=[];for($.each(renders,function(e,t){t.properties.editable&&rendersToEval.push(t)}),0===rendersToEval.length&&$.each(renders,function(e,t){rendersToEval.push(t)}),i=0;i<rendersToEval.length;){renderToEval=rendersToEval[i++];var bIsGrid="grid"==renderToEval.properties.type;if(bIsGrid){var gridXpath=self.processGridXpath(xpath),gridColumn=renderToEval.getColumn(gridXpath.remainingXpath);if(!gridColumn)continue;var cellValue=renderToEval.getCellCurrentValue(gridXpath.index,gridXpath.remainingXpath);return"columnRadio"==gridColumn.properties.type&&(cellValue=cellValue?cellValue.length>0&&cellValue[0].length>0?cellValue[0][0]:cellValue.id:0),"columnCombo"==gridColumn.properties.type&&(cellValue=cellValue&&cellValue.id?cellValue.id:0),"columnSearch"==gridColumn.properties.type&&(cellValue=cellValue&&cellValue.id?cellValue.id:0),bizagi.util.isEmpty(cellValue)&&"boolean"==argumentType?"check"!=gridColumn.properties.display&&null:"boolean"==argumentType||"date"==argumentType&&!bizagi.util.isEmpty(self.getRender(xpath,argumentType).value)?eval(self.buildArgument(cellValue,argumentType)):(void 0!==gridColumn&&void 0!==gridColumn.properties&&void 0!==gridColumn.properties.type&&"columnDate"==gridColumn.properties.type&&(cellValue=bizagi.util.dateFormatter.getDateFromInvariant(cellValue)),cellValue)}var value=renderToEval.getValue();return void 0===argumentType||"undefined"===argumentType?value:("combo"!=renderToEval.properties.type&&"list"!=renderToEval.properties.type&&"cascadingCombo"!=renderToEval.properties.type&&"search"!=renderToEval.properties.type&&"radio"!=renderToEval.properties.type||(bizagi.util.isEmpty(value)||""==value.id)&&(value=0),"comboSelected"==renderToEval.properties.type?"string"==typeof value?JSON.parse(value).value:value:bizagi.util.isEmpty(value)?("boolean"!=renderToEval.properties.type||"check"!=renderToEval.properties.display)&&((!bizagi.util.isEmpty(value)||"boolean"!=renderToEval.properties.type||"check"!=renderToEval.properties.display)&&value):"xpath"==argumentType?eval(self.buildArgument(xpath,argumentType)):eval(self.buildArgument(value,argumentType)))}},isFileUploaded:function(e){var t=this.evalXpath(e);return!!(t&&t.length&&t.length>0)},isValidEmail:function(e){return!(!e||!e.match(new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/gi)))},isButtonPressed:function(e,t){var i=this.getRenderById(e);return null!==i&&"button"==i.properties.type&&t},isGridButtonPressed:function(e,t){var i=this.processGridXpath(e),n=i.gridXpath,r=this.getRender(n),a=i.remainingXpath||"";return t&&r&&r.columns&&$.each(r.columns,function(e,i){i.properties.xpath!==a&&i.properties.id!==a||"columnButton"!==i.properties.type||(t=!0)}),t},isChanged:function(e,t){return null!=e&&t},includes:function(e,t){return null!=e&&(null!=t&&$.grep(e,function(e){return e.id==t}).length>0)},onDeletedGridRow:function(e,t){return!(!(this.getRender(e)||{})||!t)},getRenders:function(e){var t=this.form,i=null,n=/id=([\w-]+)/gi.exec(e);if(n&&n.length>1){var r=this.getRenderById(n[1]);return r?0==r.length?null:((i=[]).push(r),i):null}return 0==(i=t.getRenders(e)).length?null:i},getRender:function(e){return this.form.getRender(e)},getRenderById:function(e){return this.form.getRenderById(e)},showRenderNotFoundError:function(e){bizagi.debug("Cannot find render in DOM: "+e)},showContainerNotFoundError:function(e){bizagi.debug("Cannot find container in DOM: "+e)},getCurrentDate:function(){var e=new Date;return e.setHours(0,0,0,0),e},processGridXpath:function(e){var t,i,n,r=new RegExp(/([\w\.]*)\[(\d*)\]\.([\w\.|\w-\.]*)/g).exec(e);return r?(n=r[1],t=r[2],i=r[3]):(t="",i=""),{xpath:e,index:t,remainingXpath:i,gridXpath:n}},searchForGridReference:function(e,t){var i;if(e)return this.searchGridReferenceInCondition(e);if(t)for(i in t){var n=t[i];return this.searchForGridReferenceInCommand(n)}return null},searchForGridReferenceInCommand:function(e){return e.xpath&&e.xpath.indexOf("[]")>0?e.xpath.substring(0,e.xpath.indexOf("[]")):"xpath"==e.argumentType&&e.argument.indexOf("[]")>0?e.argument.substring(0,e.argument.indexOf("[]")):void 0},searchGridReferenceInCondition:function(e){var t;if("string"==typeof e||"boolean"==typeof e)return null;if(e.expressions){for(i in e.expressions)if(t=this.searchGridReferenceInCondition(e.expressions[i]))return t}else{if(e.simple)return this.searchGridReferenceInCondition(e.simple);if(e.complex)return this.searchGridReferenceInCondition(e.complex);if(e.xpath||e.renderId){if(t=this.searchGridReferenceInXpath(e.xpath)||this.searchGridReferenceInXpath(e.renderId))return t;if("xpath"==e.argumentType&&(t=this.searchGridReferenceInXpath(e.argument)))return t}}return null},searchGridReferenceInXpath:function(e){return e&&e.indexOf("[]")>0?e.substring(0,e.indexOf("[]")):null},getGridControl:function(e,t){var i=this.processGridXpath(e).remainingXpath;return this.getRender(e).getControlCell(t,i)}}),bizagi.command.controllers.controller.extend("bizagi.command.controllers.validation",{},{init:function(e,t,i){var n=this;n.enableDebug=!1,this._super(e);var r=null!=i?i.container:e.container,a=$("<div />").appendTo(r);$.widget("ui.bizagi_notifications",$.ui.bizagi_notifications,{expand:function(){this._super(),n.form.triggerGlobalHandler("modalViewDidAppear",{})},collapse:function(){this._super(),n.form.triggerGlobalHandler("modalViewDidDisappear",{})}}),a.bizagi_notifications({itemIcon:"ui-icon-circle-close",minimized:!1,clearEnabled:!1,title:e.getResource("render-form-validations-header-text"),device:bizagi.util.detectDevice(),orientation:e.properties.orientation}),a.bind("itemClick",function(e,t){n.onNotificationClick(t.data)}),t&&n.buildValidations(t),n.validationBox=a,n.validations=t||[]},buildValidations:function(e){var t=this,i=t.buildAllValidations(e);t.form.bind("rendervalidate",function(){return i(t)})},showErrorMessage:function(e){bizagi.showErrorAlertDialog=!1,this.showValidationMessage(e,null,"ui-icon-circle-close","ui-state-error")},showAlertMessage:function(e){this.showValidationMessage(e,null,"ui-icon-alert","ui-state-highlight")},showInfoMessage:function(e){this.showValidationMessage(e,null,"ui-icon-info","ui-state-highlight")},showValidationMessage:function(e,t,i,n,r){var a=this,o=a.form,s=t?o.getRender(t):null;bizagi.showErrorAlertDialog=!1;var l=function(){a.clearValidationMessages(),a.validating=!0,a.performValidations(),a.validating=!1,0==a.countValidationMessages()?(a.hideValidationMessages(),a.form.triggerGlobalHandler("modalViewDidDisappear",{})):a.form.triggerGlobalHandler("modalViewDidAppear",{}),o.triggerGlobalHandler("modalViewDidDisappear",{})};a.validationBox.bizagi_notifications("addNotification",e,t,i,n,l,r),s&&(s.setValidationMessage(e),bizagi.util.isIE8()||a.validating||s.one("rendervalidate",l))},countValidationMessages:function(){return this.validationBox.bizagi_notifications("count")},clearValidationMessages:function(e){return $(".ui-bizagi-notifications-container","body").not(".ui-bizagi-log-container").bizagi_notifications("clearAll",void 0,e)},hideValidationMessages:function(){return this.validationBox.bizagi_notifications("hide")},showValidationMessages:function(){return this.validationBox.bizagi_notifications("show")},expandNotificationBox:function(e){return!1!==e&&this.validationBox.bizagi_notifications("autoFocusFirstError"),this.validationBox.bizagi_notifications("expand")},isExpandedNotificationBox:function(){return this.validationBox.bizagi_notifications("isExpanded")&&this.validationBox.bizagi_notifications("isContentVisible")},performValidations:function(e){this.clearValidationMessages(),this.validationBox.bizagi_notifications("initBatch");var t=this.validateRenders(e),i=!(this.validations.length>0)||this.form.triggerHandler("rendervalidate");return this.validationBox.bizagi_notifications("endBatch"),!(!i||!t)||(this.validationBox.bizagi_notifications("show"),!1)},buildAllValidations:function(e){for(var t="",i=0;i<e.length;i++){if(null==e[i].enabled||e[i].enabled)try{t+=this.buildValidation(e[i].conditions,e[i].validationCommand)}catch(t){"RenderNotFoundException"!=t.message&&bizagi.logError("Validation cannot be parsed: "+t.message,e[i])}}var n="var baTmpFn = function(self, params){\r\n var bValid = true;\r\n "+t+"\r\n return bValid;}; baTmpFn";return this.evalValidation(n)},buildValidation:function(e,t){var i="",n="",r=this.searchForGridReference(e),a=null!=r;i+="( "+this.buildConditions(e,a,!0)+" )",t.message=t.message.replace(/'/g,"\\'"),t.message=t.message.replace(/\n/g," ");var o=t.focus||"";if(a&&(o=r),t.tokens?n+="self.showValidationMessage(' "+t.message+"', '"+o+"', JSON.parse('"+JSON.encode(t.tokens)+"')); bValid = false;\r\n":n+="self.showValidationMessage(' "+t.message+"', '"+o+"'); bValid = false;\r\n",a){var s="var grid = self.form.getRender('"+r+"');\r\n";return s+="if(grid === null) return true;\r\n",s+="var data = grid.getIndexes();\r\n",s+="var bGridValid = true;\r\n",s+="$.each(data, function(_, i) {\r\n",s+="if ("+i+"){\r\n bGridValid = false; \r\n}",s+="});\r\n",s+="if (bGridValid == false){\r\n "+n+"\r\n}"}return"if ("+i+"){\r\n "+n+" \r\n}"},onNotificationClick:function(e){var t=this.form;if(e){var i=t.getRender(e);i&&i.focus()}},validateRenders:function(e){e=e||[];var t=this.form.isValid(e);if(!t)for(var i=0;i<e.length;i++)(e[i].message||e[i].xpath)&&this.showValidationMessage(e[i].message,e[i].xpath);return t},evalValidation:function(command){var self=this;return self.enableDebug&&null!=console&&console.log(command),eval(command)}}),bizagi.command.controllers.controller.extend("bizagi.command.controllers.action",{},{init:function(e,t){var i=this;this._super(e),i.globalDependencies={},i.initialCallFunctions={},i.initialCallFunctionsDeferred=new $.Deferred,t&&i.buildActions(t),i.actions=t,i.internalSubmitActions={},i.initialCallTimeout=25,i.initialCallIncrements=25,i.actionsHistory={},i.period=50},processInternalSubmitAction:function(e,t){this.internalSubmitActions[e]||(this.internalSubmitActions[e]=t,this.buildAction(t,!0))},isSummaryOrGlobalForm:function(){var e=!1;return"SummaryForm"!=this.form.properties.typeForm&&"GlobalForm"!=this.form.properties.typeForm||(e=!0),e},evalClientAction:function(e){for(var t,i=0,n=!1,r=[].concat(e.commands,e.elseCommands),a=r.length;i<a;i++)if(t=r[i],!this.isClientAction(t)){n=!0;break}n&&(e.enabled=!1)},buildActions:function(e,t){var i,n,r={},a=this.isSummaryOrGlobalForm();for(i=0,n=e.length;i<n;i++)try{var o=e[i],s=bizagi.util.md5(JSON.stringify(o.conditions)),l=bizagi.util.md5(JSON.stringify(o.commands));r[s]?-1===r[s].indexOf(l)&&(a&&this.evalClientAction(o),this.buildAction(o,t),r[s].push(l)):(a&&this.evalClientAction(o),this.buildAction(o,t),r[s]=[l])}catch(t){"RenderNotFoundException"!=t.message&&bizagi.logError("Action cannot be parsed: "+t.message,e[i])}},unbindActions:function(){$.each(this.globalDependencies,function(e,t){t.unbind("renderchange.action")}),this.globalDependencies={},$.each(this.initialCallFunctions,function(e,t){clearTimeout(t)}),this.initialCallFunctions={}},refreshActions:function(e){var t=this;t.initialCallTimeout=25,t.initialCallFunctions={},e=e||[],t.actions=t.actions.concat(e),t.buildActions(t.actions,!0),$.each(t.internalSubmitActions,function(e,i){try{t.buildAction(i,!1)}catch(e){"RenderNotFoundException"!=e.message&&bizagi.logError("Action cannot be parsed: "+e.message,i)}})},buildAction:function(e,t){var i=this,n=i.form,r=[],a=[];if(null==e.enabled||e.enabled){if(e.conditions&&"true"==e.conditions.operator&&(e.dependencies||(e.dependencies=[]),$.each(e.commands,function(t,n){var r=i.searchGridReferenceInXpath(n.xpath);if(r){var a,o,s=!1;for(a=0,o=e.dependencies;a<o;a++)e.dependencies[a]==r&&(s=!0);s||e.dependencies.push(r)}})),e.dependencies)for(var o=0;o<e.dependencies.length;o++)if(void 0!==e.dependencies[o]){var s=n.getRenders(e.dependencies[o]);if(0==s.length){var l=n.getRenderById(e.dependencies[o]);s=l?[l]:null}s&&$.each(s,function(e,t){var i;$.inArray(t.properties.id,a)<0&&(i=t.properties.type,-1===["groupedgrid","collectionnavigator"].indexOf(i)&&(a.push(t.properties.id),r.push(t)))})}var u=i.buildFunction(e.conditions,e.commands,e.elseCommands);if($.each(r,function(n,r){r.bind("renderchange.action",function(t,n){if((n=n||{}).changed=void 0===n.changed||n.changed,n.column){for(var r=0;r<e.gridColumns.length;r++)if(n.column==e.gridColumns[r])return void u(i,n)}else u(i,n)}),i.globalDependencies[r.properties.id]=r,"grid"==r.properties.type&&(t=!0,e.gridColumns=[],i.searchGridColumns(e.conditions,e.gridColumns))}),!t){var c,d,p;c=i,d=Math.guid(),p=setTimeout(function(){try{u(c),delete c.initialCallFunctions[d]}catch(e){}},c.initialCallTimeout),c.initialCallFunctions[d]=p,c.initialCallTimeout+=c.initialCallIncrements}}},buildFunction:function(conditions,commands,elseCommands){var self=this,gridReference=self.searchForGridReference(conditions,commands),bGridDetected=null!=gridReference&&gridReference,sJsCondition="",sJsAction="",sStatement,sJsElseAction="",bAutomaticRestore=!elseCommands,bCondition=!!conditions,i;for(bCondition&&(sJsCondition+=self.buildConditions(conditions,bGridDetected)),i=0;i<commands.length;i++){var queueAction=self.isServerCommand(commands[i])?"addParallel":"add",command=self.buildCommand(commands[i],bGridDetected);command=command.indexOf(";")>=1?command.replace(";",""):command,sJsAction+="actionQueue."+queueAction+"(function(){return "+command+" ;}); \r\n",bAutomaticRestore&&(sJsElseAction+=self.buildRestoreCommand(commands[i],bGridDetected))}if(!bAutomaticRestore){for(sJsElseAction+="var actionQueue = new bizagiQueue(); \r\n",sJsElseAction+="if (params.render){params.render.startActionExecution();} \r\n",i=0;i<elseCommands.length;i++){var queueAction=self.isServerCommand(elseCommands[i])?"addParallel":"add",elseCommand=self.buildCommand(elseCommands[i],bGridDetected);elseCommand=elseCommand.indexOf(";")>=1?elseCommand.replace(";",""):elseCommand,sJsElseAction+="actionQueue."+queueAction+"(function(){return "+elseCommand+" ;}); \r\n"}sJsElseAction+="var execute = actionQueue.execute().always(function(){ \r\n",sJsElseAction+="if (params.render){ params.render.endActionExecution();} \r\n });\r\n",sJsElseAction+="self.form.appendWaitForLoader({ promise: execute, create: true });\r\n"}if(sStatement="var baTmpFn = function(self, params){ \r\n",sStatement+="params = params || {};\r\n",bGridDetected&&(sStatement+="var i = params.key;\r\n",sStatement+="var column = params.column;\r\n"),bCondition&&(sStatement+="if ("+sJsCondition+"){ \r\n"),sStatement+="var actionQueue = new bizagiQueue(); \r\n",sStatement+="if (params.render){params.render.startActionExecution();} \r\n",sStatement+=sJsAction,sStatement+="var execute = actionQueue.execute().always(function(){ \r\n",sStatement+="if (params.render){ params.render.endActionExecution();} \r\n });\r\n",sStatement+="self.form.appendWaitForLoader({ promise: execute, create: true });\r\n",bCondition&&(sStatement+="\r\n } ",sJsElseAction.length>0&&(sStatement+="else { \r\n"+sJsElseAction+" }\r\n")),sStatement+="};\r\n",bGridDetected){var sGridStatement="var baGridTmpFn = function(self, args){ \r\n";sGridStatement+="args = args || {};\r\n",sGridStatement+="\t var grid = args.render || self.form.getRender('"+gridReference+"') || []; \r\n",sGridStatement+="\t args.grid = grid; \r\n",sGridStatement+="if(args.surrogateKey === undefined){\r\n",sGridStatement+="\t var data = grid.getIndexes();\r\n",sGridStatement+="\t $.each(data, function(i, index) {\r\n",sGridStatement+="\t\t args.key = index; \r\n",sGridStatement+="\t\t baTmpFn(self, args);\r\n",sGridStatement+="\t });\r\n",sGridStatement+="} else {\r\n",sGridStatement+="\t args.key = args.surrogateKey; \r\n",sGridStatement+="\t\t baTmpFn(self, args ); \r\n",sGridStatement+="}\r\n",sGridStatement+="};\r\n",sStatement+=sGridStatement,sStatement+="baGridTmpFn"}else sStatement+="baTmpFn";return eval(sStatement)},isServerCommand:function(e){var t=e.command;return"refresh"==t||"submit-data"==t||"execute-rule"==t||"execute-interface"==t||"execute-sap"==t||"execute-connector"==t||"execute-excel-bot"==t},isClientAction:function(e){var t=e.command;return"background-color"==t||"forecolor"==t||"visible"==t||"required"==t||"collapse"==t||"set-active"==t},isRecentAction:function(e,t){var i=this,n=e+"@"+t;return null!=i.actionsHistory[n]||($.when(i.runAction(e,t)).done(function(){delete i.actionsHistory[n],bizagi.log("resolve "+n)}),!1)},runAction:function(e,t){var i=e+"@"+t;return this.actionsHistory[i]=new $.Deferred,setTimeout(this.actionsHistory[i].resolve,this.period),this.actionsHistory[i].promise()},buildCommand:function(e,t){var i=t=t||!1,n=e.command,r=this.detectCommandArgumentType(e.argumentType,n),a=this.buildArgument(e.argument,r,t,e.xpathContext),o=e.xpath;if(e.renderId&&(o="id="+e.renderId),t&&o&&(o=o.replaceAll("[]","[' + i + ']")),e.xpath&&e.xpath.length>0||e.renderId&&e.renderId.length>0)switch(n){case"background-color":return"activityFlowButton"===e.controlType?"self.changeButtonBackground('"+o+"', "+a+");":"self.changeRenderBackground('"+o+"', "+a+");";case"forecolor":return"activityFlowButton"===e.controlType?"self.changeButtonForeground('"+o+"', "+a+");":"self.changeRenderForeground('"+o+"', "+a+");";case"visible":return"activityFlowButton"===e.controlType?"self.changeButtonVisibility('"+o+"', "+a+");":"self.changeRenderVisibility('"+o+"', "+a+");";case"readonly":return"activityFlowButton"===e.controlType?"self.changeButtonEditability('"+o+"', "+a+");":"self.changeRenderEditability('"+o+"', "+a+");";case"required":return"self.changeRenderRequired('"+o+"', "+a+");";case"set-value":return t&&"xpath"==e.argumentType&&e.xpathContext&&(e.argument=e.xpathContext+"."+e.argument,a=this.buildArgument(e.argument,r,t)),"self.changeRenderValue('"+o+"', "+a+");";case"set-min":return"self.changeRenderMinValue('"+o+"', "+a+");";case"set-max":return"self.changeRenderMaxValue('"+o+"', "+a+");";case"calculate":return"self.executeCalculatedField('"+o+"');";case"submit-value":return"self.submitRender('"+o+"', '"+a+"');";case"clean-data":return"self.cleanRenderData('"+o+"');";case"refresh":return this.searchForGridReferenceInCommand(e)?"self.refreshGridCell('"+o+"', '"+(e.xpathContext||"")+"');":"self.refreshControl('"+o+"', '"+(e.xpathContext||"")+"','"+n+"');";case"trigger-click":return"self.triggerClick('"+o+"');"}else switch(n){case"background-color":return"self.changeContainerBackground('"+e.container+"', "+a+");";case"visible":return"self.changeContainerVisibility('"+e.container+"', "+a+");";case"collapse":return"self.toogleContainer('"+e.container+"', "+!bizagi.util.parseBoolean(a)+");";case"set-active":return"self.changeActiveItem('"+e.container+"');";case"readonly":return"self.changeContainerEditability('"+e.container+"', "+bizagi.util.parseBoolean(a)+");";case"refresh":return"self.refreshContainer('"+e.container+"', '"+(e.xpathContext||"")+"');"}if("submit-data"==n)return"self.submitFormData();";if("execute-rule"==n){var s=e.argument||{},l="";try{l=JSON.parse(s).guid}catch(e){}var u=e.xpathContext||"";if(t){var c=i+"[id=%s]";return"self.executeRule('"+l+"', printf('"+c+"',i) ,'"+n+"');"}return"self.executeRule('"+l+"','"+u+"','"+n+"');"}if("execute-interface"==n){var d=e.argument||{},p="";try{p=JSON.parse(d).guid}catch(e){}return u=e.xpathContext||"",t?"self.executeInterface('"+p+"', printf('"+(c=i+"[id=%s]")+"',i));":"self.executeInterface('"+p+"','"+u+"');"}if("execute-sap"==n){var h=e.argument||{},g="";try{g=JSON.parse(h).guid}catch(e){}return u=e.xpathContext||"",t?"self.executeSAPConnector('"+g+"', printf('"+(c=i+"[id=%s]")+"',i));":"self.executeSAPConnector('"+g+"','"+u+"');"}if("execute-connector"==n||"execute-excel-bot"==n){h=e.argument||{};var f="";try{f=JSON.parse(h).guid}catch(e){}return u=e.xpathContext||"",t?"self.executeConnector('"+f+"', printf('"+(c=i+"[id=%s]")+"',i));":"self.executeConnector('"+f+"','"+u+"');"}return bizagi.log("There is no definition for commandType: "+n),""},buildRestoreCommand:function(e,t){var i=e.xpath,n=e.command;return t=t||!1,e.renderId&&(i="id="+e.renderId),t&&(i=i.replaceAll("[]","[' + i + ']")),i&&i.length>0?"self.restoreRender('"+i+"', '"+n+"');":"self.restoreContainer('"+e.container+"', '"+n+"');"},detectCommandArgumentType:function(e,t){if(void 0===e)return e;if("const"==e){if("background-color"==t)return"color";if("forecolor"==t)return"color";if("visible"==t)return"boolean";if("readonly"==t)return"boolean";if("required"==t)return"boolean";if("set-value"==t)return"text";if("collapse"==t)return"boolean";if("set-active"==t)return"number";if("set-min"==t)return"text";if("set-max"==t)return"text";if("calculate"==t)return;if("refresh"==t)return;if("submit-value"==t)return"json"}else if("xpath"==e||"entity"==e)return e;return bizagi.log("There is no definition for commandType: "+t),null},restoreRender:function(e,t){var i=this,n=i.getRenders(e);null!=n?$.each(n,function(n,r){var a=r.originalProperties,o=a.textFormat||{};"background-color"==t&&i.changeRenderBackground(e,o.background||""),"forecolor"==t&&i.changeRenderForeground(e,o.color||"none"),"visible"==t&&i.changeRenderVisibility(e,null==a.visible||a.visible),"readonly"==t&&i.changeRenderEditability(e,null==a.editable||a.editable),"required"==t&&i.changeRenderRequired(e,null!=a.required&&a.required)}):i.Class.THROW_ERROR&&i.showRenderNotFoundError(e)},restoreContainer:function(e,t){var i=this.form.getContainer(e);if(null!=i){var n=i.originalProperties;"background-color"==t&&this.changeContainerBackground(e,n.backgroundColor||"none"),"visible"==t&&this.changeContainerVisibility(e,null==n.visible||n.visible),"collapse"==t&&this.toogleContainer(e,!0),"readonly"==t&&this.changeContainerEditability(e,null==n.editable||n.editable)}else this.Class.THROW_ERROR&&this.showContainerNotFoundError(xpath)},changeRenderBackground:function(e,t){var i=this,n=i.getRenders(e);null!=n?$.each(n,function(n,r){if(i.isGridComponent(r,e)){var a=i.processGridXpath(e);$.when(r.ready()).done(function(){if(bizagi.util.isEmpty(a.index)){var e,i,n=r.getIndexes();for(e=0,i=n.length;e<i;e++)r.changeCellBackgroundColor(n[e],a.remainingXpath,t)}else r.changeCellBackgroundColor(a.index,a.remainingXpath,t)})}else $.when(r.ready()).done(function(){r.changeBackgroundColor(t)})}):i.Class.THROW_ERROR&&i.showRenderNotFoundError(e)},changeButtonBackground:function(e,t){var i=e.substring(3),n=this.form.getButton(i);n.css("background-image","none"),n.addClass("ui-fast-transition"),void 0!==n[0]&&n[0].style.setProperty("background-color",t,"important")},changeRenderForeground:function(e,t){var i=this,n=i.getRenders(e);null!=n?$.each(n,function(n,r){if(i.isGridComponent(r,e)){var a=i.processGridXpath(e);$.when(r.ready()).done(function(){if(bizagi.util.isEmpty(a.index)){var e,i,n=r.getIndexes();for(e=0,i=n.length;e<i;e++)r.changeCellColor(n[e],a.remainingXpath,t)}else r.changeCellColor(a.index,a.remainingXpath,t)})}else $.when(r.ready()).done(function(){r.changeColor(t)})}):i.Class.THROW_ERROR&&i.showRenderNotFoundError(e)},changeButtonForeground:function(e,t){var i=e.substring(3);this.form.getButton(i).css("color",t,"!important")},changeRenderVisibility:function(e,t){var i=this,n=i.getRenders(e);null!=n?$.each(n,function(n,r){if(i.isGridComponent(r,e)){var a=i.processGridXpath(e);$.when(r.ready()).done(function(){if(bizagi.util.isEmpty(a.index)){var e,i,n=r.getIndexes();for(e=0,i=n.length;e<i;e++)r.changeCellVisibility(n[e],a.remainingXpath,t)}else r.changeCellVisibility(a.index,a.remainingXpath,t)})}else $.when(r.ready()).done(function(){$.when(r.renderingDeferred).done(function(){r.changeVisibility(t)})})}):i.Class.THROW_ERROR&&i.showRenderNotFoundError(e)},changeButtonVisibility:function(e,t){var i=e.substring(3),n=this.form.getButton(i);1==bizagi.util.parseBoolean(t)?(n.show(),n.css("display","")):n.hide()},changeRenderEditability:function(e,t){var i=this,n=i.getRenders(e);null!=n?$.each(n,function(n,r){if(i.isValidRender(r))if(i.isGridComponent(r,e)){var a=i.processGridXpath(e);$.when(r.ready()).done(function(){if(bizagi.util.isEmpty(a.index)){var e,i,n=r.getIndexes();for(e=0,i=n.length;e<i;e++)r.changeCellEditability(n[e],a.remainingXpath,t)}else r.changeCellEditability(a.index,a.remainingXpath,t)})}else $.when(r.ready()).done(function(){$.when(r.renderingDeferred).done(function(){r.changeEditability(t)})})}):i.Class.THROW_ERROR&&i.showRenderNotFoundError(e)},changeButtonEditability:function(e,t){var i=e.substring(3),n=this.form.getButton(i);1==bizagi.util.parseBoolean(t)?n.removeAttr("disabled"):n.attr("disabled","disabled")},triggerClick:function(e){var t=e.substring(3);this.form.getButton(t).trigger("click")},changeRenderRequired:function(e,t){var i=this,n=i.getRenders(e),r=[];null!=n?($.each(n,function(e,t){bizagi.util.parseBoolean(t.properties.editable)&&r.push(t)}),0===r.length&&(r=n),$.each(r,function(n,r){if(i.isValidRender(r))if(i.isGridComponent(r,e)){var a=i.processGridXpath(e);$.when(r.ready()).done(function(){if(bizagi.util.isEmpty(a.index)){var e,i,n=r.getIndexes();for(e=0,i=n.length;e<i;e++)r.changeCellRequired(n[e],a.remainingXpath,t)}else r.changeCellRequired(a.index,a.remainingXpath,t)})}else $.when(r.ready()).done(function(){$.when(r.renderingDeferred).done(function(){r.changeRequired(t)})})})):i.Class.THROW_ERROR&&i.showRenderNotFoundError(e)},changeRenderValue:function(e,t){var i=this;"object"==typeof t&&(t=$.extend(t,{fromAction:!0}));var n=i.getRenders(e);if(null!=n){var r=[];$.each(n,function(e,t){t.properties.editable&&r.push(t)}),0==r.length&&$.each(n,function(e,t){r.push(t)}),$.each(r,function(n,r){if(i.isGridComponent(r,e)){var a=i.processGridXpath(e);$.when(r.ready()).done(function(){if(bizagi.util.isEmpty(a.index)){var e,i,n=r.getIndexes();for(e=0,i=n.length;e<i;e++)r.changeCellValue(n[e],a.remainingXpath,t)}else r.changeCellValue(a.index,a.remainingXpath,t)})}else $.when(r.ready()).done(function(){r.asyncRenderDeferred?$.when(r.asyncRenderDeferred).done(function(){r.setDisplayValue(t)}):r.setDisplayValue(t)})})}else i.Class.THROW_ERROR&&i.showRenderNotFoundError(e)},changeRenderMinValue:function(e,t){var i=this,n=i.getRenders(e);null!=n?$.each(n,function(n,r){if(i.isGridComponent(r,e)){var a=i.processGridXpath(e);$.when(r.ready()).done(function(){if(bizagi.util.isEmpty(a.index)){var e,i,n=r.getIndexes();for(e=0,i=n.length;e<i;e++)r.changeCellMinValue(n[e],a.remainingXpath,t)}else r.changeCellMinValue(a.index,a.remainingXpath,t)})}else $.when(r.ready()).done(function(){var e=r.properties.type;"number"!=e&&"date"!=e&&"money"!=e||r.changeMinValue(t)})}):i.Class.THROW_ERROR&&i.showRenderNotFoundError(e)},changeRenderMaxValue:function(e,t){var i=this,n=i.getRenders(e);null!=n?$.each(n,function(n,r){if(i.isGridComponent(r,e)){var a=i.processGridXpath(e);$.when(r.ready()).done(function(){if(bizagi.util.isEmpty(a.index)){var e,i,n=r.getIndexes();for(e=0,i=n.length;e<i;e++)r.changeCellMaxValue(n[e],a.remainingXpath,t)}else r.changeCellMaxValue(a.index,a.remainingXpath,t)})}else $.when(r.ready()).done(function(){r.changeMaxValue(t)})}):i.Class.THROW_ERROR&&i.showRenderNotFoundError(e)},executeCalculatedField:function(e){var t=this.getRenders(e);null!=t?$.each(t,function(e,t){$.when(t.ready()).done(function(){t.runFormula()})}):this.Class.THROW_ERROR&&this.showRenderNotFoundError(e)},refreshControl:function(e,t,i){var n=this.getRenders(e)||this.form.getContainer(e),r=new bizagiQueue;if(null!=n)return $.each(n,function(i,n){r.add(n.ready().pipe(function(){return n.refreshControl({xpath:e,xpathContext:t})}))}),r.execute();this.Class.THROW_ERROR&&this.showRenderNotFoundError(e)},refreshContainer:function(e,t){var i=this.form.getContainer(e);if(null!=i)return $.when(i.ready()).pipe(function(){return i.refreshContainer({xpathContext:t})});this.Class.THROW_ERROR&&this.showRenderNotFoundError(e)},refreshGridCell:function(e,t){var i=this,n=new bizagiQueue,r=new $.Deferred,a=i.getRenders(e)||i.form.getContainer(e);if(null==a)return i.Class.THROW_ERROR&&i.showRenderNotFoundError(e),null;var o=[];return $.each(a,function(e,t){if(t.properties.editable)return o.push(t),!1}),0==o.length&&$.each(a,function(e,t){return o.push(t),!1}),0!==o.length?(i.form&&""!==i.form.properties.xpathContext&&(t=""!==t?i.form.properties.xpathContext+"."+t:i.form.properties.xpathContext),n.add(r.promise()),$.when.apply($,$.map(o,function(e){e.ready()})).done(function(){for(var n=o.length,a=new bizagiQueue,s=0;s<n;s++){var l=o[s],u=i.processGridXpath(e);if(bizagi.util.isEmpty(u.index))for(var c=l.getIndexes(),d=c.length,p=0;p<d;p++)a.addParallel(l.refreshCell({key:c[p],column:u.remainingXpath,xpathContext:t}));else a.add(l.refreshCell({key:u.index,column:u.remainingXpath,xpathContext:t}))}$.when(a.execute()).done(function(){r.resolve()})}),n.execute()):void 0},submitFormData:function(e){var t=this.form;return $.when(t.ready()).pipe(function(){return t.submitData(e)})},executeRule:function(e,t,i){var n=this.form,r=e+"."+t;return this.isRecentAction(r,i)?void 0:$.when(n.ready()).pipe(function(){return n.executeRule({rule:e,xpathContext:t})})},executeInterface:function(e,t){var i=this.form;return $.when(i.ready()).pipe(function(){return i.executeInterface({interface:e,xpathContext:t})})},executeSAPConnector:function(e,t){var i=this.form;return $.when(i.ready).pipe(function(){return i.executeSAPConnector({guidsap:e,xpathContext:t})})},executeConnector:function(e,t){var i=this.form;return $.when(i.ready).pipe(function(){return i.executeConnector({guidConnector:e,xpathContext:t})})},submitRender:function(e,t){var i=this.getRender(e);if(null!=i)return $.when(i.ready()).pipe(function(){return i.submitOnChange()});this.Class.THROW_ERROR&&this.showRenderNotFoundError(e)},cleanRenderData:function(e){var t=this,i=t.getRenders(e);null!=i?$.each(i,function(i,n){if(t.isGridComponent(n,e)){var r=t.processGridXpath(e);$.when(n.ready()).done(function(){if(bizagi.util.isEmpty(r.index)){var e,t,i=n.getIndexes();for(e=0,t=i.length;e<t;e++)n.cleanCellData(i[e],r.remainingXpath)}else n.cleanCellData(r.index,r.remainingXpath)})}else $.when(n.ready()).done(function(){$.when(n.renderingDeferred).done(function(){n.cleanData(),t.changeRenderRequired(e,null!=n.properties.required&&n.properties.required)})})}):t.Class.THROW_ERROR&&t.showRenderNotFoundError(e)},changeContainerBackground:function(e,t){var i=this.form.getContainer(e);null!=i?$.when(i.ready()).done(function(){i.changeBackgroundColor(t)}):this.Class.THROW_ERROR&&this.showContainerNotFoundError(e)},changeContainerVisibility:function(e,t){var i=this.form.getContainer(e);null!=i?$.when(i.ready(!0)).done(function(){$.when(i.renderingDeferred).done(function(){i.changeVisibility(t)})}):this.Class.THROW_ERROR&&this.showContainerNotFoundError(e)},toogleContainer:function(e,t){var i=this.form.getContainer(e);null!=i?"group"==i.properties.type&&$.when(i.ready()).done(function(){i.toogleContainer(t)}):this.Class.THROW_ERROR&&this.showContainerNotFoundError(e)},changeActiveItem:function(e){var t=this.form.getContainer(e);null!=t?("tabItem"==t.properties.type&&t.loadingDeferred.resolve(),$.when(t.ready()).done(function(){t.setAsActiveContainer()})):this.Class.THROW_ERROR&&this.showContainerNotFoundError(e)},changeContainerEditability:function(e,t){var i=this.form.getContainer(e);null!=i?$.when(i.ready()).done(function(){i.changeEditability(t)}):this.Class.THROW_ERROR&&this.showContainerNotFoundError(e)},searchGridColumns:function(e,t){var i;if("string"==typeof e||"boolean"==typeof e)return null;if(e.expressions){var n,r;for(n=0,r=e.expressions.length;n<r;n++)this.searchGridColumns(e.expressions[n],t)}else{if(e.simple)return this.searchGridColumns(e.simple,t);if(e.complex)return this.searchGridColumns(e.complex,t);var a=e.xpath||e.renderId;a&&(a&&a.indexOf("[]")>0&&(i=a.substring(a.indexOf("[]")+3),t.push(i)),"xpath"==e.argumentType&&e.argument.indexOf("[]")>0&&(i=e.argument.substring(e.argument.indexOf("[]")+3),t.push(i)))}return null},isGridComponent:function(e,t){return"grid"==e.properties.type&&t.indexOf("[")>=0},isValidRender:function(e){return-1===["collectionnavigator"].indexOf(e.properties.type)}}),$.Class.extend("bizagi.rendering.element",{ELEMENT_TYPE_CONTAINER:1,ELEMENT_TYPE_RENDER:2,ELEMENT_TYPE_COLUMN:3},{init:function(e){this.renderFactory=e.renderFactory,this.dataService=e.dataService,this.parent=e.parent,this.resources=bizagi.localization,this.observableElement=$("<div />"),this.disposed=!1,this.initializeData(e.data),this.subscribers=[]},initializeData:function(e){this.properties={},e&&e.properties&&(this.properties=e.properties),this.properties.xpathContext=this.getXpathContext(),this.properties.idPageCache=this.getPageCache()},getXpathContext:function(){return null!=this.parent&&"function"==typeof this.parent.getXpathContext?this.parent.getXpathContext():""},getPageCache:function(){return null!=this.parent&&"function"==typeof this.parent.getPageCache?this.parent.getPageCache():""},getFormContainer:function(){if(void 0!==this.parent)return this.parent.getFormContainer()},getResource:function(e){return this.resources.getResource(e)},getElementType:function(){},resize:function(e){},focus:function(){if(this.properties.required){var e=$("#ui-bizagi-wp-app-render-form-content");bizagi.util.isScrolledIntoView(this.element,e)||$(this.element).attr("tabindex",-1).focus(),this.element&&this.element.effect("highlight",2e3)}this.parent&&"function"==typeof this.parent.focus&&this.parent.focus()},triggerGlobalHandler:function(e,t){return this.disposed?null:this.parent?this.parent.triggerGlobalHandler(e,t):null},trigger:function(e,t){return this.disposed?null:this.observableElement?this.observableElement.trigger(e,t):null},triggerHandler:function(e,t){return this.disposed?null:this.observableElement?this.observableElement.triggerHandler(e,t):null},bind:function(e,t){return this.disposed?null:this.observableElement?this.observableElement.bind(e,t):(this.subscribers.push({event:e}),null)},unbind:function(e,t){return this.disposed?null:this.observableElement?this.observableElement.unbind(e,t):null},one:function(e,t){return this.disposed?null:this.observableElement?this.observableElement.one(e,t):(this.subscribers.push({event:e}),null)},getRenderedElement:function(){},getMode:function(){if(this.parent)return this.parent.getMode()},getParams:function(){if(this.parent)return this.parent.getParams()},getFormType:function(){return this.getFormContainer().properties.type||"form"},ready:function(){},isReadyToSave:function(){},getCustomHandlers:function(){return null},dispose:function(){var e=this;e.disposed=!0,setTimeout(function(){null!=e.subscribers&&$.each(e.subscribers,function(t,i){e.unbind(i.event)}),delete e.subscribers,e.observableElement&&e.observableElement.off(),bizagi.util.dispose(e)},bizagi.override.disposeTime||50)},isDisposed:function(){return this.disposed},processFailMessage:function(e){var t=this.getFormContainer(),i=bizagi.util.isOfflineForm({context:this});if("CustomMessageException"===e.errorType){t.validationController.clearValidationMessages();var n=bizagi.localization.getResource(e.message);t.validationController.showErrorMessage(n)}else if("InvalidCaseStateException"===e.errorType){var r=t.getParams();t.validationController.clearValidationMessages(),t.container.trigger("routing",{idCase:r.idCase||bizagi.context.idCase})}else{var a=(e="string"==typeof(e=e||{})?JSON.parse(e):e).type||"error",o=e.code||"code";if(e=e.responseText||e.message||e,"not-processed"===a)return;if("not-shown"===a)return;if(i&&"AUTH_ERROR"===o)return;t.validationController.clearValidationMessages(),"alert"==a?t.validationController.showAlertMessage(e):t.validationController.showErrorMessage(e)}return e},startLoading:function(){},endLoading:function(){},beforeToRefresh:function(){},afterToRefresh:function(){}}),bizagi.rendering.element.extend("bizagi.rendering.container",{TYPE_QUERY_FORM:"queryForm"},{initializeData:function(e){var t=this;t._super(e);var i=t.properties;i.uniqueId=Math.ceil(1e6*Math.random()),i.editable=void 0===i.editable||bizagi.util.parseBoolean(i.editable),i.visible=void 0===i.visible||bizagi.util.parseBoolean(i.visible),i.orientation=i.orientation||(t.parent?t.parent.properties.orientation:"ltr"),this.originalProperties=JSON.parse(JSON.encode(i)),this.children=[],this.childrenHash={},e.elements&&$.each(e.elements,function(e,i){i.render?t.createRenderElement(i):i.container?t.createContainerElement(i):i.form&&t.createFormElement(i)})},createRenderElement:function(e){var t,i=this.properties;0==i.editable&&(e.render.properties.editable=i.editable,"grid"==e.render.properties.type&&(e.render.properties.inlineEdit=!1)),!1===i.required&&(e.render.properties.required=i.required),"duplicate"==e.render.properties.retype&&(t=bizagi.clone(e));var n=this.renderFactory.getRender({type:e.render.properties.type,data:e.render,dataService:this.dataService,parent:this,mode:this.getMode()});this.children.push(n),"duplicate"==e.render.properties.retype&&this.processDuplicateRender(n,t),this.getFormContainer().registerRender(n)},createContainerElement:function(e){var t=this.properties;0==t.editable&&(e.container.properties.editable=t.editable),!1===t.required&&(e.container.properties.required=t.required);var i=this.renderFactory.getContainer({type:e.container.properties.type,data:e.container,parent:this,dataService:this.dataService,mode:this.getMode()});this.children.push(i),this.getFormContainer().registerRender(i)},createFormElement:function(e){var t=this.properties;0==t.editable&&(e.container.properties.editable=t.editable);var i=this.renderFactory.getContainer({type:e.form.properties.type||"form",data:e.form,parent:this,dataService:this.dataService,mode:this.getMode()});this.children.push(i)},getElement:function(){return this.container},getElementsByType:function(e,t){t=t||[];return $.each(this.children,function(i,n){n.properties.type==e&&t.push(n),n.getElementType()==bizagi.rendering.element.ELEMENT_TYPE_CONTAINER&&n.getElementsByType(e,t)}),t},processDuplicateRender:function(e,t){var i=JSON.parse(JSON.encode(t.render));i.properties.displayName=i.properties.displayName+" "+this.getResource("render-text-duplicate-label-sufix"),i.properties.xpath=i.properties.xpath+".clone",i.properties.isClone=!0;var n=this.renderFactory.getRender({type:i.properties.type,data:i,parent:this,mode:this.getMode()});e.cloneRender=n,this.children.push(n)},getElementType:function(){return bizagi.rendering.element.ELEMENT_TYPE_CONTAINER},render:function(){var e;this.getMode();return e=this.internalRender(),this.applyContainerDefaults(),e.attr("data-container-id",this.properties.id),this.properties.tag&&e.attr("data-tag",this.properties.tag),this.params&&this.params.requestedForm&&e.addClass(this.params.requestedForm),e},internalRender:function(){var e=this.renderContainerHtml(),t=this.container=$(e);return this.postRenderContainer(t),this.container},renderContainerHtml:function(){return this.renderingDeferred=this.renderingDeferred||new $.Deferred,this.renderContainer()},isRendered:function(){return!!this.renderingDeferred&&this.renderingDeferred.promise()},getRenderedElement:function(){return bizagi.util.isEmpty(this.container)&&alert("container hasn't been rendered!"),this.container},applyContainerDefaults:function(){var e=this.properties;e.backgroundColor&&this.changeBackgroundColor(e.backgroundColor),e.visible||this.changeVisibility(e.visible)},changeBackgroundColor:function(e){this.properties.backgroundColor=e,$.each(this.children,function(t,i){i.getElementType()==bizagi.rendering.element.ELEMENT_TYPE_CONTAINER?i.changeBackgroundColor(e):i.getElementType()==bizagi.rendering.element.ELEMENT_TYPE_RENDER&&i.changeBackgroundColor(e)})},changeVisibility:function(e){var t=this.properties;t.visible=bizagi.util.parseBoolean(e),t.visible?this.container.show():this.container.hide()},changeEditability:function(e){this.properties.editable=bizagi.util.parseBoolean(e),$.each(this.children,function(t,i){i.getElementType()==bizagi.rendering.element.ELEMENT_TYPE_CONTAINER?i.changeEditability(e):i.getElementType()==bizagi.rendering.element.ELEMENT_TYPE_RENDER&&i.changeEditability(e)})},replaceTag:function(e,t,i){bizagi.util.replaceSelector(e,t,i)},replaceChildrenTag:function(e,t){this.replaceTag(e,".children",t)},replaceChildrenHtml:function(e,t){return e.replace("{{children}}",t)},renderContainer:function(){},postRenderContainer:function(e){var t=this,i=(t.properties,t.getMode());t.renderingDeferred&&t.renderingDeferred.resolve(),t.container=e,t.executeChildrenPostRender(e),"execution"==i&&(t.configureHandlers(),t.applyPlaceHolderPolyfill()),"design"==i&&t.configureDesignView(),"layout"==i&&(t.configureDesignView(),t.configureLayoutView())},applyPlaceHolderPolyfill:function(){var e=window.placeHolderConfig||{};("placeholder"in $("<input>")[0]||"placeHolder"in $("<input>")[0])&&!e.forceApply||Placeholders.enable()},executeChildrenPostRender:function(e){var t=this,i=e.children();$.each(i,function(e,i){i=$(i);var n=Number(i.data("unique-id"));if(n){var r=t.childrenHash[n];if(r){var a=r.getElementType();a==bizagi.rendering.element.ELEMENT_TYPE_RENDER&&r.postRenderElement(i),a==bizagi.rendering.element.ELEMENT_TYPE_CONTAINER&&r.postRenderContainer(i)}}else t.executeChildrenPostRender(i)})},configureHandlers:function(){},configureDesignView:function(){},configureLayoutView:function(){},renderChildrenHtml:function(){var e=this,t="";return $.each(e.children,function(i,n){var r=n.getElementType();r==bizagi.rendering.element.ELEMENT_TYPE_RENDER&&(t+=n.renderElement()),r==bizagi.rendering.element.ELEMENT_TYPE_CONTAINER&&(t+=n.renderContainerHtml()),e.childrenHash[n.properties.uniqueId]=n}),t},collectRenderValues:function(e){this.children&&$.each(this.children,function(t,i){i.getElementType()==bizagi.rendering.element.ELEMENT_TYPE_CONTAINER?i.collectRenderValues(e):i.getElementType()==bizagi.rendering.element.ELEMENT_TYPE_RENDER&&i.canBeSent()&&i.collectData(e)})},hasChanged:function(e){if((e=e||[]).length)return e;this.children&&$.each(this.children,function(t,i){if(e.length||i.hasChanged(e))return!1})},collectRenderValuesQueryForm:function(e){$.each(this.children,function(t,i){i.getElementType()==bizagi.rendering.element.ELEMENT_TYPE_CONTAINER?i.collectRenderValuesQueryForm(e):i.getElementType()==bizagi.rendering.element.ELEMENT_TYPE_RENDER&&i.canBeSentQueryForm()&&i.collectDataQueryForm(e)})},firstChild:function(){return this.children[0]},getRenders:function(e,t){return t=t||[],e.indexOf("[")>0&&(e=e.substring(0,e.indexOf("["))),$.each(this.children,function(i,n){n.getElementType()==bizagi.rendering.element.ELEMENT_TYPE_CONTAINER?n.getRenders(e,t):n.getElementType()==bizagi.rendering.element.ELEMENT_TYPE_RENDER&&e==n.properties.xpath&&t.push(n)}),t},getRender:function(e){var t=this.getRenders(e),i=null;return $.each(t,function(e,t){t.properties.editable&&null==i&&(i=t)}),null==i&&$.each(t,function(e,t){i=t}),i},getRendersByXpath:function(e){return this.getRenders(e)},getContainer:function(e){var t;return this.properties.id==e?this:($.each(this.children,function(i,n){if(n.getElementType()==bizagi.rendering.element.ELEMENT_TYPE_CONTAINER){var r=n.getContainer(e);if(null!=r)return t=r,!1}}),t)},isValid:function(e){return $.each(this.children,function(t,i){i.properties.visible&&(i.getElementType()==bizagi.rendering.element.ELEMENT_TYPE_CONTAINER?i.isValid(e):i.getElementType()==bizagi.rendering.element.ELEMENT_TYPE_RENDER&&i.isValid(e))}),0==e.length},hasValidGrids:function(e){return $.each(this.children,function(t,i){i.properties.visible&&(i.getElementType()==bizagi.rendering.element.ELEMENT_TYPE_CONTAINER?i.hasValidGrids(e):i.getElementType()==bizagi.rendering.element.ELEMENT_TYPE_RENDER&&void 0!==i.grid&&i.isValid(e))}),0==e.length},ready:function(){return $.when(this.parent.ready(),this.isRendered())},isReadyToSave:function(){var e=$.map(this.children,function(e){return e.isReadyToSave()});return $.when.apply($,e)},getFocus:function(){var e;return $.each(this.children,function(t,i){if(i.getElementType()==bizagi.rendering.element.ELEMENT_TYPE_CONTAINER){var n=i.getFocus();bizagi.util.isEmpty(n)||(e=n)}}),e},getCustomHandlers:function(){var e=this.getFormContainer();if(e)return e.getCustomHandlers()},getCustomHandler:function(e){var t=this.getCustomHandlers();if(t)return t[e]},dispose:function(){var e=this;setTimeout(function(){e.children&&$.each(e.children,function(e,t){t.dispose()})},bizagi.override.disposeTime||50),e._super()},refreshContainer:function(e){var t=this,i=t.properties;return t.startLoading(),t.beforeToRefresh(),$.when(t.dataService.multiaction().refreshControl({xpath:i.xpath,idRender:i.id,idPageCache:i.idPageCache,xpathContext:i.xpathContext||e.xpathContext,contexttype:t.properties.contexttype||""})).done(function(e){if(!t.isDisposed()){t.unregisterChildren(),delete t.children,delete t.childrenHash,t.getFormContainer().removeActions(),!1===t.properties.editable&&e.container&&e.container.properties&&(e.container.properties.editable=!1),t.initializeData(e.container);var i=t.container,n=t.render();"tabItem"==t.properties.type&&$(n).addClass("childrenActive"),i.replaceWith(n);var r=e.container&&e.container.actions?e.container.actions:[];t.getFormContainer().refreshActions(r),t.triggerChildrenActions(),t.afterToRefresh()}}).fail(function(e){e=t.processFailMessage(e)}).always(function(){t.endLoading()})},refreshDesignContainer:function(e){var t=this,i=t.properties;if(t.beforeToRefresh(e),$.extend(e.properties,{editable:i.editable,contexttype:i.contexttype||"",idPageCache:i.idPageCache,idRender:i.id,messageValidation:i.messageValidation,uniqueId:i.uniqueId,visible:i.visible,xpath:i.xpath,mode:"design",xpathContext:i.xpathContext||""}),!t.isDisposed()){t.unregisterChildren(),delete t.children,delete t.childrenHash,!1===t.properties.editable&&e.container&&e.container.properties&&(e.container.properties.editable=!1),t.initializeData(e.container);var n=t.container,r=t.render();"tabItem"==t.properties.type&&$(r).addClass("childrenActive"),n&&n.replaceWith(r),t.afterToRefresh()}},beforeToRefresh:function(){for(var e=0;e<this.children.length;e++)this.children[e].beforeToRefresh()},afterToRefresh:function(){for(var e=0;e<this.children.length;e++)this.children[e].afterToRefresh()},triggerChildrenActions:function(){this.getFormContainer();for(var e=this.children,t=0,i=e.length;t<i;t++){var n=e[t],r=n.getElementType();r===bizagi.rendering.element.ELEMENT_TYPE_CONTAINER?n.triggerChildrenActions():r===bizagi.rendering.element.ELEMENT_TYPE_RENDER&&n.triggerRenderChange({changed:!1})}},registerActions:function(e){var t=this.getFormContainer();e&&t.actionController.buildActions(e)},unregisterChildren:function(){for(var e=this.getFormContainer(),t=this.children,i=0,n=t.length;i<n;i++){var r=t[i],a=r.getElementType();a===bizagi.rendering.element.ELEMENT_TYPE_CONTAINER?r.unregisterChildren():a===bizagi.rendering.element.ELEMENT_TYPE_RENDER&&e.unregisterRender(r)}},replaceChild:function(e){for(var t=this.children,i=0,n=t.length;i<n;i++){if(t[i].properties.uniqueId==e.properties.uniqueId){t.splice(i,1),t.splice(i,0,e);break}}},getChildById:function(e){for(var t=this.children,i=0,n=t.length;i<n;i++){var r=t[i];if(r.properties.id==e)return r}return null}}),bizagi.rendering.container.extend("bizagi.rendering.container",{},{}),bizagi.rendering.container.extend("bizagi.rendering.form",{},{init:function(e){var t=this,i=e.data,n=bizagi.util.detectDevice();t.rendersById={},t.rendersByXpath={},t.rendersByType={},t.idPageCache=i.pageCacheId,t.mode=e.mode||"execution",t.focus=e.focus,t.params=e,this._super(e);var r="";r="desktop"!==n?this.getResource("render-form-user-confirmation-message").replace(/<br(\/| \/)>/g,"\n"):this.getResource("render-form-user-confirmation-message");var a=t.properties;a.sessionId=i.sessionId,a.displayAsReadOnly=bizagi.util.parseBoolean(i.displayAsReadOnly)||!1,a.userConfirmationMessage=a.userConfirmationMessage||r,a.orientation=a.orientation||"ltr",a.hasRule=bizagi.util.parseBoolean(a.hasRule)||!1,a.contexttype=e.contexttype||"",a.paramsRender=e.paramsRender||{},a.processPath=e.data.processPath?e.data.processPath.replaceAll("/","  &rsaquo;  "):"",a.breadCrumb=e.data.processPath?e.data.processPath.split("/"):[],this.validations=i.validations,this.actions=i.actions,t.initializeButtons(i),i.transitions&&(t.transitions=i.transitions),this.originalProcessButton=this.processButton},initializeButtons:function(e){var t=this;t.buttons=[],e.buttons&&$.each(e.buttons,function(e,i){var n=i.button.properties;n.caption=bizagi.util.isEmpty(n.caption)||t.getResource(n.caption)==n.caption?n.caption:t.getResource(n.caption),n.actions&&$.each(n.actions,function(e,t){n[t]=!0}),n.ordinal=e,n.action=n.next?"next":n.nextWithoutValidations?"nextWithoutValidations":n.submitData?"save":n.cancel?"cancel":n.back?"back":n.createnewcase?"createnewcase":n.validate?"validate":"",n.save="save"==n.action,(n.next||n.back||n.nextWithoutValidations)&&(n.routing=!0),n.hasRule&&(n.executeRule=!0),n.style=t.buildButtonStyle(n),"rtl"!==t.properties.orientation||t.properties.useCustomButtons?t.buttons.push(n):t.buttons.unshift(n)})},getParams:function(){return this.params},setParam:function(e,t){this.params&&(this.params[e]=t)},getMode:function(){return this.mode},getCustomHandlers:function(){if(this.params)return this.params.customHandlers},registerRender:function(e){this.rendersById[e.properties.id]=e,e.properties.xpath&&(this.rendersByXpath[e.properties.xpath]||(this.rendersByXpath[e.properties.xpath]=[]),this.rendersByXpath[e.properties.xpath].push(e)),this.rendersByType[e.properties.type]||(this.rendersByType[e.properties.type]=[]),this.rendersByType[e.properties.type].push(e)},unregisterRender:function(e){var t=this;if(t.rendersById[e.properties.id]&&delete t.rendersById[e.properties.id],e.properties.xpath)if($.isArray(t.rendersByXpath[e.properties.xpath])&&t.rendersByXpath[e.properties.xpath].length>1)for(var i=0,n=t.rendersByXpath[e.properties.xpath].length;i<n;i++){if(t.rendersByXpath[e.properties.xpath][i].properties.id===e.properties.id){t.rendersByXpath[e.properties.xpath].splice(i,1);break}}else delete t.rendersByXpath[e.properties.xpath];if(e.properties.type){var r=t.getRenderByType(e.properties.type),a=r.length,o=e.properties.id||e.properties.xpath;for(i=0;i<a;i++){var s=r[i];if(void 0!==s.properties.id&&s.properties.id==o||void 0!==s.properties.xpath&&s.properties.xpath==o){t.rendersByType[e.properties.type].splice(i,1);break}}}},getRenderById:function(e){return this.rendersById[e]},getGridByColumn:function(e){for(var t=this.getRenderByType("grid"),i=0;i<t.length;i++)if(-1!=t[i].columnsIds.indexOf(e))return t[i];return null},getRenders:function(e){return e&&e.indexOf&&e.indexOf("[")>0&&(e=e.substring(0,e.indexOf("["))),this.rendersByXpath[e]?this.rendersByXpath[e]:[]},getRenderByType:function(e){return"string"==typeof e&&e.length>0&&this.rendersByType[e]?this.rendersByType[e]:[]},renderContainer:function(){var e=this,t=this.properties,i=e.renderFactory.getTemplate("form"),n=$.fasttmpl(i,{buttons:e.buttons,transitions:e.transitions,uniqueId:t.uniqueId,helptext:t.helpText,mode:e.getMode(),queryForm:"queryForm"==e.getFormType(),summaryForm:e.params.summaryForm||!1,globalForm:e.properties.displayAsReadOnly||!1,idCase:"",displayName:e.params.displayName||"",processPath:t.processPath,breadCrumb:t.breadCrumb,orientation:t.orientation});return n=e.replaceChildrenHtml(n,e.renderChildrenHtml())},postRenderContainer:function(e){var t=this.getMode();e.addClass("ui-bizagi-rendering-mode-"+t),this._super(e)},configureHandlers:function(){var e,t=this,i=t.container;i.length>1?$(i).each(function(){$(this).hasClass("ui-bizagi-container-complexgateway")&&(e=this)}):e=$(".ui-bizagi-container-complexgateway",i),t.activeTransitions={},t.processButtons(i),t.bind("ondomincluded",function(e,i){t.validationController=new bizagi.command.controllers.validation(t,t.validations,i),t.actionController=new bizagi.command.controllers.action(t,t.actions),t.readyDeferred.resolve()}),$(e).find(".ui-checkbox").bind("click",function(){var e=$("label",this),i=e.data("value")||"";void 0===t.activeTransitions[i]&&(t.activeTransitions[i]=!1),bizagi.util.parseBoolean(e.data("checked"))?(e.removeClass("ui-checkbox-state-checked"),e.removeClass("bz-check").addClass("bz-full-ball"),e.data("checked",!1),t.activeTransitions[i]=!1):(e.addClass("ui-checkbox-state-checked"),e.addClass("bz-mo-icon").addClass("bz-check").removeClass("bz-full-ball"),e.data("checked",!0),t.activeTransitions[i]=!0)})},configureDesignView:function(){var e=this;e.container;e.bind("ondomincluded",function(){e.readyDeferred.resolve()})},buildButtonStyle:function(e){var t={};if(e.format){if(e.format.size&&"0"!=e.format.size){var i=100+10*Number(e.format.size)+"%";t["font-size"]=i+" !important"}if(e.format.bold&&(t["font-weight"]="bold !important",bizagi.util.isIE()&&(t["font-family"]="'Open Sans', 'Helvetica Neue', Arial, Helvetica, sans-serif !important")),e.format.italic&&(t["font-style"]="italic !important"),e.format.underline||e.format.strikethru){var n=bizagi.util.parseBoolean(e.format.strikethru)?"line-through ":"",r=bizagi.util.parseBoolean(e.format.underline)?"underline ":"";t["text-decoration"]=n+r+" !important"}e.format.background&&(t["background-color"]=e.format.background+" !important",t["background-image"]="none !important"),e.format.color&&(t.color=e.format.color+" !important")}var a="";for(key in t)a+=key+":"+t[key]+";";return a},render:function(){return this.readyDeferred||(this.readyDeferred=new $.Deferred),this._super()},ready:function(){return this.readyDeferred.promise()},getXpathContext:function(){return this.properties.xpathContext||""},getContextType:function(){return this.properties.contexttype||""},getEndPointAction:function(){if("startform"==this.properties.formtype)return"LOADSTARTFORM"},getPageCache:function(){return this.idPageCache},getFormContainer:function(){return this},processButtons:function(){var e=this,t=e.getButtons();t&&0!=t.length&&t.on("click",function(t){t.preventDefault(),t.stopImmediatePropagation(),e.startLoading();var i=$(this),n=i.attr("ordinal"),r=e.buttons[n];e.lastActionButton=r,i.prop("disabled",!0),i.hasOwnProperty("disabled")&&i.button("disable"),e.propagateExternalEvents(t),setTimeout(function(){$.when(e.processButton(r)).always(function(){e.processDefer=void 0,e.endLoading(),$.contains(document.documentElement,i.get(0))&&(i.prop("disabled",!1),i.hasOwnProperty("enable")&&i.button("enable"))})},100)})},preProcessButton:function(e){return!0},postProcessButton:function(e,t){return!0},setLoaderDeferred:function(){this.loaderDeferred=$.Deferred().resolve()},deleteLoaderDeferred:function(){var e=this;e.isLoaderDeferredSet()&&$.when(e.loaderDeferred.promise()).done(function(){delete e.loaderDeferred})},useOrSetLoaderDeferred:function(){this.isLoaderDeferredSet()||this.setLoaderDeferred()},getLoaderPromise:function(){return this.isLoaderDeferredSet()?this.loaderDeferred.promise():void 0},isLoaderDeferredSet:function(){return!!this.loaderDeferred},appendWaitForLoader:function(e){var t=e.promise,i=e.create||!1;if(!this.isLoaderDeferredSet()){if(!i)return;this.setLoaderDeferred()}this.loaderDeferred=this.loaderDeferred.then(function(){return t})},processButton:function(e){var t=this,i=$.Deferred(),n=t.properties;e.routing||bizagi.chrono.initAndStart("submitForm"),bizagi.chrono.init("waiting"),t.validationController.clearValidationMessages();var r=t.getFormContainer(),a=r.getRenderByType("tabItem"),o=a.length;r.innerTabsLoading=!0,t.useOrSetLoaderDeferred();for(var s=0;s<o;s++){var l=a[s];l.loadingDeferred&&l.parent.container&&l.loadingDeferred.resolve()}return delete r.innerTabsLoading,$.when(t.ready(),t.getLoaderPromise()).done(function(){t.deleteLoaderDeferred(),!bizagi.util.parseBoolean(e.validate)||t.validationController.performValidations()?("save"!==e.action&&"next"!=e.action&&"back"!=e.action&&"createnewcase"!=e.action&&"nextWithoutValidations"!=e.action||$(document).data("auto-save",""),bizagi.util.parseBoolean(t.properties.needsUserConfirmation)&&bizagi.util.parseBoolean(e.routing)?(t.endLoading(),$.when(bizagi.showConfirmationBox(n.userConfirmationMessage,null,!1)).done(function(){t.preProcessButton(e)&&(t.triggerGlobalHandler("renderActionButton",e),$.when(t.submitForm(e)).done(function(){i.resolve()}))}).fail(function(){i.reject()})):t.preProcessButton(e)&&(t.triggerGlobalHandler("renderActionButton",e),$.when(t.submitForm(e)).done(function(){$(document).trigger("FORMACTION",e),i.resolve()}).fail(function(){i.reject(arguments)}))):(t.endLoading(),e.submitData?$.when(t.submitData()).done(function(){i.reject()}):i.reject(),t.validationController.expandNotificationBox());var r=t.getCustomHandler("afterFormButtonClick");r&&r(e)}),i.promise()},validateForm:function(){return this.validationController.clearValidationMessages(),this.validationController.performValidations()},saveForm:function(){var e=this,t=bizagi.util.isOfflineForm({context:e}),i=e.collectRenderValuesForSubmit(),n=null;return i.deferreds&&(n=$.when.apply($,i.deferreds),delete i.deferreds),$.when(n).pipe(function(){return e.startLoading(),$.when(e.dataService.submitData({action:"SAVE",data:i,idCase:e.params.idCase,xpathContext:e.properties.xpathContext,idPageCache:e.properties.idPageCache,isOfflineForm:t||!1})).always(function(){e.endLoading()})})},submitForm:function(e){var t=this,i=$.Deferred(),n=bizagi.util.isOfflineForm({context:t});return $.when(t.isReadyToSave()).done(function(){n?t.internalSubmitFormOffline(e):$.when(t.internalSubmitForm(e)).done(function(){i.resolve()}).fail(function(){i.reject(arguments)})}).fail(function(){t.endLoading(),bizagi.log("The form is not saved, no changes were found"),i.reject()}),i.promise()},checkWidgetsData:function(){},isComplexGatewayPainted:function(){return!1},getLastActionButton:function(){return this.lastActionButton},internalSubmitFormOffline:function(e){var t,i=this,n="",r=bizagi.util.isOfflineForm({context:i});if(r&&i.properties&&!i.properties.idPageCache&&(i.properties.idPageCache=""),(e.submitData||e.executeRule)&&(t=i.collectRenderValuesForSubmit()),i.transitions){var a=[];if($.each(this.activeTransitions,function(e,t){t&&a.push(e)}),0==bizagi.util.countProps(a))return bizagi.showMessageBox(bizagi.localization.getResource("render-widget-complexgateway-path"),bizagi.localization.getResource("render-widget-complexgateway-error"),"info",!1),i.endLoading(),""}$.when(i.dataService.submitData({action:e.action,data:t,xpathContext:i.properties.xpathContext,idPageCache:i.properties.idPageCache,prepare:!0,transitions:a||"",idCase:i.params.idCase,idWorkitem:i.params.idWorkitem,isOfflineForm:r||!1})).done(function(t){i.postProcessButton(t,e)&&(e.routing?(i.triggerHandler("routing",{offlineAction:e.action,idCase:i.params.idCase,idWorkitem:i.params.idWorkitem}),$(document).trigger("tryPushData.offline")):(n=bizagi.util.isValidResource("workportal-mobile-offline-form-successful")?bizagi.localization.getResource("workportal-mobile-offline-form-successful"):"Saved",bizagi.util.showNotification({text:n,type:"success"})))}).fail(function(e){n=bizagi.util.isValidResource("workportal-mobile-offline-successful-fail")?bizagi.localization.getResource("workportal-mobile-offline-successful-fail"):"Not saved",bizagi.util.showNotification({text:n,type:"error"})})},internalSubmitForm:function(e){var t,i=this,n=$.Deferred();(e.submitData||e.executeRule||e.createnewcase)&&(t=i.collectRenderValuesForSubmit()),$.when(i.startLoading()).done(function(){$("html, body").animate({scrollTop:$(".ui-bizagi-loading-icon")},"slow")});var r=null,a=null,o=null,s=null,l=null;if(e.executeRule&&((r=i.dataService.submitData({action:"SUBMITDATA",data:t,xpathContext:i.properties.xpathContext,idPageCache:i.properties.idPageCache,prepare:!0})).tag="submitData",s=i.PrepareCheckpointAction(e.id),t={},(a=i.dataService.executeButton({idRender:e.id,xpathContext:i.properties.xpathContext||"",idPageCache:i.properties.idPageCache,prepare:!0})).tag="executeRule",l=i.prepareCommitAction(e.id)),e.next||e.back||e.save||e.createnewcase||e.nextWithoutValidations){if(i.transitions){var u=[];if($.each(this.activeTransitions,function(e,t){t&&u.push(e)}),0==bizagi.util.countProps(u))return bizagi.showMessageBox(bizagi.localization.getResource("render-widget-complexgateway-path"),bizagi.localization.getResource("render-widget-complexgateway-error"),"info",!1),i.endLoading(),n.reject(),n.promise()}(o=i.dataService.submitData({action:e.action,forcePlanCompletion:e.forcePlanCompletion,data:t,xpathContext:i.properties.xpathContext,idPageCache:i.properties.idPageCache,prepare:!0,transitions:u||"",contexttype:i.properties.contextType,surrogatekey:i.properties.surrogateKey})).tag="performAction"}var c=[];a&&(c.push(r),c.push(s),c.push(a),c.push(l)),o&&c.push(o),bizagi.chrono.initAndStart("submitForm-ajax");var d=new $.Deferred;return t&&t.deferreds?$.when.apply(this,t.deferreds).done(function(e){d.resolve(e)}).fail(function(){d.reject(),console.log("Error: It was not possible resolve async actions on form ")}):d.resolve(),$.when(d).done(function(){$.when(i.dataService.multiaction().execute({actions:c})).done(function(t){var r;bizagi.chrono.stop("submitForm-ajax"),i.endLoading();var a="";if($.each(t,function(e,t){var n=i.validationToDisplayMessages(r,t.result.type,t.result.messages,a);r=n.bHasValidations,a=n.alertMessage}),r)""!==a&&bizagi.modalError.show(a,"workportal-general-word-information",!1),e.executeRule&&i.sendRollbackAction(e.id);else{if(!i.postProcessButton(t,e))return;e.refresh&&i.refreshForm(),e.routing&&(bizagi.jqxhrList.abortAll("rendering_"+i.dataService.guid),i.triggerHandler("routing",{idCase:i.params.idCase})),e.createnewcase&&t.length>0&&(bizagi.jqxhrList.abortAll("rendering_"+i.dataService.guid),i.triggerHandler("routing",{idCase:t[0].result.IdCase,caseNumber:t[0].result.CaseNumber}))}n.resolve()}).fail(function(t,t,r){e.executeRule&&i.sendRollbackAction(e.id),r&&r.error&&("WaitForCompletionPlanException"===r.error.errorType||"InvalidPlanStateException"===r.error.errorType||"CustomMessageException"===r.error.errorType)?(i.endLoading(),$.when(bizagi.showConfirmationBox(bizagi.localization.getResource(r.error.message),null,!1)).then(function(){return $.when(i.internalSubmitForm($.extend({},e,{forcePlanCompletion:!0})))}).done(function(){n.resolve()}).fail(function(){n.reject()})):(i.failHandler(r),n.reject(r))})}),n.promise()},validationToDisplayMessages:function(e,t,i,n){return"validationMessages"==t&&(this.addValidationMessage(i),e=!0),"desktop"==bizagi.detectDevice()&&"alertMessages"==t&&(n=""===n?i:n+"\n\n"+i,e=!0),{bHasValidations:e,alertMessage:n}},addValidationMessage:function(e,t,i,n,r,a){var o=this;o.validationController||(o.validationController=new bizagi.command.controllers.validation(o)),"string"==typeof e?o.validationController.showValidationMessage(e,t,i,n,a):$.each(e,function(e,r){o.validationController.showValidationMessage(r,t,i,n,a)}),o.validationController.expandNotificationBox(r)},clearValidationMessages:function(e){this.validationController&&this.validationController.clearValidationMessages(e)},addErrorMessage:function(e){this.validationController.showErrorMessage(e),this.validationController.expandNotificationBox()},refreshForm:function(e){var t=this,i=t.properties,n=$.Deferred();(e=e||t.getFocus())&&!e.id&&(e={id:e});var r={idCase:t.params.idCase||"",idWorkitem:t.params.idWorkitem||"",idTask:t.params.idTask||"",focus:e,selectedTabs:t.getSelectedTabs(),xpathContext:i.xpathContext,idPageCache:i.idPageCache,isRefresh:!0,contextType:t.getContextType()||"",action:t.getEndPointAction(),idStartScope:t.properties.idStartScope||""};return t.startLoading(),$.when(t.triggerHandler("refresh",r)).done(function(){t.endLoading(),n.resolve()}).fail(function(){t.endLoading(),n.reject()}),n.promise()},getSelectedTabs:function(){for(var e=this.getElementsByType("tab"),t=$.map(e,function(e){return{tab:e.properties.id,selected:e.activeTab}}),i={},n=0,r=t.length;n<r;n++)i[t[n].tab]=t[n].selected;return i},getButtons:function(){},addSubmitAction:function(e,t){this.actionController.processInternalSubmitAction(e,t)},startLoading:function(){var e=this,t=e.renderFactory.getTemplate("form-waiting");if(!e.waitingOverlay||!e.waitingMessage)if(bizagi.util.isTabletDevice())e.waitingOverlay=$('<div class="ui-widget-overlay" />').appendTo("body",$(document)),e.waitingMessage=$.tmpl(t).appendTo("body",$(document));else{var i="sharepoint"==e.params.context&&"undefined"==typeof Windows,n=e.params.canvas;i&&(n=bizagi.util.scrollTop(n)).context||(n=$("body",$(document)));var r=this.getSize(),a=this.getOffset();r.height==$(window).height()&&(a.top=0),e.waitingOverlay=$('<div class="ui-widget-overlay" />').appendTo(n),e.waitingMessage=$.tmpl(t).appendTo(n),e.waitingOverlay.css({height:"100%",width:"100%","min-height":r.height,"min-width":r.width}),e.waitingMessage.css({top:a.top+Math.ceil((r.height-e.waitingMessage.outerHeight())/2)+"px",left:Math.ceil((r.width-e.waitingMessage.outerWidth())/2)+"px"}),n.css("position","relative")}},endLoading:function(){if(this.waitingOverlay&&this.waitingMessage){this.waitingOverlay.remove(),this.waitingMessage.remove(),this.waitingOverlay=null,this.waitingMessage=null;var e=this.params.canvas;null!=e&&e.css("position","")}},getFocusedElement:function(){return this.focus},setFocusedElement:function(e){this.focus=e},triggerGlobalHandler:function(e,t){return this.triggerHandler("globalHandler",{eventType:e,data:t})},failHandler:function(e){try{e=JSON.parse(e)}catch(e){}if(e&e.length&&e.length>1&&(e=e[0]),e.error&&(e=e.error),e.error&&(e=e.error),"object"==typeof e&&e.message)e="WaitForCompletionPlanException"===e.errorType||"InvalidPlanStateException"===e.errorType||"CustomMessageException"===e.errorType?bizagi.localization.getResource(e.message):e.message;else if("string"==typeof e)try{var t=JSON.parse(e);"WaitForCompletionPlanException"!==t.errorType&&"InvalidPlanStateException"!==t.errorType&&"CustomMessageException"!==e.errorType||(t.message=bizagi.localization.getResource(t.message)),e=t.message}catch(e){}this.addErrorMessage(e),this.endLoading()},resize:function(e){this.setSize(e)},setSize:function(e){this.size=e},getSize:function(){if(this.size)return this.size;var e=this.params.canvas?this.params.canvas:this.getFormContainer().container;return{width:e.width(),height:e.height()}},getOffset:function(){return this.getFormContainer().container.offset()},submitData:function(e){var t=this,i=t.collectRenderValuesForSubmit();if(bizagi.util.isOfflineForm({context:t})&&t.properties&&!t.properties.idPageCache&&(t.properties.idPageCache=""),$.each(i,function(e,i){var n=t.getRenders(e);$.each(n,function(e,t){t.updateOriginalValue()})}),!$.isEmptyObject(i))return $.when(t.dataService.multiaction().submitData({action:"SUBMITDATA",data:i,idPageCache:t.properties.idPageCache,xpathContext:t.properties.xpathContext,contexttype:t.properties.contexttype||""})).fail(function(e){e=t.processFailMessage(e)})},executeRule:function(e){var t=this,i=t.properties,n=e.xpathContext;return""!=i.xpathContext&&(n=""!=n?i.xpathContext+"."+n:i.xpathContext),$.when(t.dataService.multiaction().executeRule({idPageCache:i.idPageCache,rule:e.rule,xpathContext:n,contexttype:t.properties.contexttype||""})).done(function(e){t.getFormContainer().clearValidationMessages({clearOnlyServer:!0}),e&&"validationMessages"==e.type&&t.getFormContainer().addValidationMessage.apply(t,[e.messages,void 0,void 0,void 0,!1,"serverMessage"]),"desktop"==bizagi.detectDevice()&&"alertMessages"==e.type&&bizagi.modalError.show(e.messages.join("\n\n"),"workportal-general-word-information",!1)}).fail(function(e){e=t.processFailMessage(e)})},executeInterface:function(e){var t=this,i=t.properties,n=e.xpathContext;return""!=i.xpathContext&&(n=""!=n?i.xpathContext+"."+n:i.xpathContext),$.when(t.dataService.multiaction().executeInterface({idPageCache:i.idPageCache,interface:e.interface,xpathContext:n,contexttype:t.properties.contexttype||""})).done(function(e){t.getFormContainer().clearValidationMessages(),e&&"validationMessages"==e.type&&t.getFormContainer().addValidationMessage(e.messages)}).fail(function(e){e=t.processFailMessage(e)})},executeSAPConnector:function(e){var t=this,i=t.properties,n=e.xpathContext;return""!=i.xpathContext&&(n=""!=n?i.xpathContext+"."+n:i.xpathContext),$.when(t.dataService.multiaction().executeSAPConnector({idPageCache:i.idPageCache,guidsap:e.guidsap,xpathContext:n,contexttype:t.properties.contexttype||""})).done(function(e){t.getFormContainer().clearValidationMessages(),e&&"validationMessages"==e.type&&t.getFormContainer().addValidationMessage(e.messages)}).fail(function(e){e=t.processFailMessage(e)})},executeConnector:function(e){var t=this,i=t.properties,n=e.xpathContext;return""!=i.xpathContext&&(n=""!=n?i.xpathContext+"."+n:i.xpathContext),$.when(t.dataService.multiaction().executeConnector({idPageCache:i.idPageCache,guidConnector:e.guidConnector,xpathContext:n,contexttype:t.properties.contexttype||""})).done(function(e){t.getFormContainer().clearValidationMessages(),e&&"validationMessages"==e.type&&t.getFormContainer().addValidationMessage(e.messages)}).fail(function(e){e=t.processFailMessage(e)})},refreshActions:function(e){this.actionController.refreshActions(e)},removeActions:function(){this.actionController.unbindActions()},collectRenderValuesForSubmit:function(e){var t=this;return e=e||{},t.collectRenderValues(e),$.each(e,function(e,i){var n=t.getRenders(e);$.each(n,function(e,t){t.updateOriginalValue()})}),e},internalSubmitOnChange:function(e){var t=this,i=(e=e||{}).properties,n=new $.Deferred,r=e.data||{},a=void 0===e.bRefreshForm||e.bRefreshForm;(e.notCollect?e.notCollect:void 0)&&!$.isEmptyObject(r)||t.collectRenderValuesForSubmit(r),t.startLoading();var o=null;return r.deferreds&&(o=$.when.apply($,r.deferreds),delete r.deferreds),$.when(o).then(function(){t.dataService.submitData({action:"SUBMITONCHANGE",data:r,idRender:i.id,xpath:i.xpath,xpathContext:t.properties.xpathContext,idPageCache:i.idPageCache,contexttype:i.contexttype}).done(function(e){if(t.cancelPreviousRequest(),t.endLoading(),e&&"validationMessages"==e.type)"function"==typeof t.clearValidationMessages&&t.clearValidationMessages(),t.addValidationMessage(e.messages),n.resolve();else if(a){var r={id:i.id,xpath:i.xpath};void 0!==i.idCase&&$.extend(r,{idCaseObject:bizagi.cache.idCaseObject}),e.IdScope&&(t.properties.idStartScope=e.IdScope),$.when(t.refreshForm(r)).done(function(){n.resolve()}).fail(function(){n.resolve()})}else n.resolve()}).fail(function(e){t.endLoading();var i=JSON.parse("object"==typeof e&&e.responseText?e.responseText:{})||{},r=i.message||e;t.validationController.clearValidationMessages(),"alert"==i.type?t.validationController.showAlertMessage(r):t.validationController.showErrorMessage(r),n.resolve()})}),n.promise()},cancelPreviousRequest:function(){if(bizagi.multiactionConnection&&bizagi.multiactionConnection.length)for(var e,t=bizagi.multiactionConnection.length,i=0;i<t;i++)(e=bizagi.multiactionConnection.pop())&&e.abort&&(bizagi.showErrorAlertDialog=!1,e.abort())},PrepareCheckpointAction:function(e){return checkpointAction=this.dataService.sendCheckpoint({url:this.properties.checkpointUrl,idRender:e,xpath:"",xpathContext:this.properties.xpathContext,idPageCache:this.properties.idPageCache,prepare:!0}),checkpointAction.tag="checkpoint",checkpointAction},prepareCommitAction:function(e){var t=this.dataService.commitLinkForm({url:this.properties.commitUrl,idRender:e,xpath:"",xpathContext:this.properties.xpathContext,idPageCache:this.properties.idPageCache,prepare:!0});return t.tag="commit",t},sendRollbackAction:function(e){this.dataService.rollbackLinkForm({url:this.properties.rollbackUrl,idRender:e,xpath:"",xpathContext:this.properties.xpathContext,idPageCache:this.properties.idPageCache})},dispose:function(){var e=this;e.endLoading(),setTimeout(function(){e.params&&delete e.params.canvas,delete e.params,delete e.control,e.validationController&&(e.unbind("rendervalidate"),delete e.validationController),e.actionController&&(e.actionController.unbindActions(),delete e.actionController)},bizagi.override.disposeTime||50),e._super()},getButton:function(e){return $(".ui-bizagi-button[data-id='"+e+"']",this.container)},getFloatingButton:function(e){return $("li[data-id='"+e+"']",this.container)},propagateExternalEvents:function(e){$(".bz-overflow-menu")&&$(document).trigger("click.overflow"),$(".jquery-image-zoom")&&"block"==$(".jquery-image-zoom").css("display")&&$("div.jquery-image-zoom a").click()}}),bizagi.rendering.container.extend("bizagi.rendering.accordion",{},{initializeData:function(e){this._super(e),$.each(this.children,function(e,t){t.properties.ordinal=e})},renderContainer:function(){var e=this.properties,t=this.renderFactory.getTemplate("accordion"),i=$.fasttmpl(t,{uniqueId:e.uniqueId});return i=this.replaceChildrenHtml(i,this.renderChildrenHtml())}}),bizagi.rendering.container.extend("bizagi.rendering.accordionItem",{},{renderContainer:function(){var e=this.properties,t=this.renderFactory.getTemplate("accordionItem"),i=$.fasttmpl(t,{id:e.id,ordinal:e.ordinal,displayName:e.displayName,orientation:e.orientation,uniqueId:e.uniqueId});return i=this.replaceChildrenHtml(i,this.renderChildrenHtml())},activate:function(){this.active=!0},getFocus:function(){var e=this._super();return bizagi.util.isEmpty(e)&&this.active&&(e=this.properties.id),e}}),bizagi.rendering.container.extend("bizagi.rendering.group",{},{initializeData:function(e){this._super(e);var t=this.properties;t.helpText=t.helpText||t.displayName,t.cssclass=t.cssclass||"cssClassContainer",t.collapse=!(void 0===t.collapse||!bizagi.util.parseBoolean(t.collapse))},renderContainer:function(){var e=this.properties,t=this.renderFactory.getTemplate("group");this.expandedIcon=this.getExpandedIcon(),this.collapsedIcon=this.getCollapsedIcon();var i=$.fasttmpl(t,{expandedClassIcon:this.expandedIcon,displayName:e.displayName,editable:e.editable,orientation:e.orientation,uniqueId:e.uniqueId,collapse:e.collapse,isDesign:"execution"!==this.getMode(),messageValidation:e.messageValidation,cssclass:e.cssclass,guid:e.guid});return i=this.replaceChildrenHtml(i,this.renderChildrenHtml())},getExpandedIcon:function(){},getCollapsedIcon:function(){},toogleContainer:function(e,t){}}),bizagi.rendering.container.extend("bizagi.rendering.horizontal",{},{renderContainer:function(){var e=this.properties,t=this.renderFactory.getTemplate("horizontal"),i=$.fasttmpl(t,{uniqueId:e.uniqueId});return i=this.replaceChildrenHtml(i,this.renderChildrenHtml())}}),bizagi.rendering.container.extend("bizagi.rendering.panel",{},{initializeData:function(e){this._super(e);var t=this.properties;t.displayName=t.displayName||""},renderContainer:function(){var e=this.properties,t=this.renderFactory.getTemplate("panel"),i=$.fasttmpl(t,{displayName:e.displayName,loading:e.loading,message:e.message,orientation:e.orientation,uniqueId:e.uniqueId,cssClass:e.cssclass});return i=this.replaceChildrenHtml(i,this.renderChildrenHtml())},postRenderContainer:function(e){var t=this.properties;t.height&&e.height(t.height),this._super(e)}}),bizagi.rendering.form.extend("bizagi.rendering.searchForm",{},{renderContainer:function(){var e=this.properties,t=this.renderFactory.getTemplate("searchForm");"entity"!=e.contexttype&&this.parent&&(e.contexttype="function"==typeof this.parent.getContextType?this.parent.getContextType():"");var i=$.fasttmpl(t,{displayName:e.displayName,uniqueId:e.uniqueId});return i=(i=this.replaceChildrenHtml(i,this.renderChildrenHtml())).replace("{{result}}",this.renderResult())},performSearch:function(e){this.properties.searchParams=e,this.submitSearch()},submitSearch:function(){this.refreshResults()},ready:function(){return this.parent.ready()},getRemoteData:function(e){var t=this,i=t.properties,n=new $.Deferred,r=t.collectSearchValues();return bizagi.util.isMapEmpty(r)?(bizagi.showMessageBox(this.getResource("render-search-advanced-no-filters"),this.getResource("render-form-dialog-box-search"),"error"),null):(e.rows=i.searchParams&&i.searchParams.maxRecords&&i.searchParams.maxRecords>0?i.searchParams.maxRecords:e.rows,i.searchParams&&void 0!==i.searchParams.maxRows&&(e.rows=i.searchParams.maxRows||e.rows),t.dataService.submitSearch($.extend(e,{url:i.dataUrl,idRender:i.idRender,idPageCache:i.idPageCache,idSearchForm:i.id,allowFullSearch:i.searchParams.allowFullSearch?i.searchParams.allowFullSearch:null,maxRecords:i.searchParams.maxRecords>0?i.searchParams.maxRecords:null,criteria:r})).done(function(e){i.page=e.page,i.records=e.records,i.totalPages=e.totalPages||0,e.records>1e4?(i.deviceMaxRecordsExceeded=!0,e.deviceMaxRecordsExceeded=!0):delete i.deviceMaxRecordsExceeded,n.resolve(e),t.onSearchFinished()}).fail(function(e){if(bizagi.showErrorAlertDialog=!1,e.responseText)try{var t=JSON.parse(e.responseText).message;bizagi.showMessageBox(t,"","error")}catch(e){}n.reject()}),n.promise())},collectSearchValues:function(){var e={};this.collectRenderValues(e);var t=[];for(key in e){var i=key,n=e[key],r=this.getCriteriaOperation(this.getRender(i)),a={};bizagi.util.isEmpty(n)||(a.xpath=i,a.value=n,a.operation=r,t.push(a))}return t},getCriteriaOperation:function(e){var t=this.properties,i="EQUALS";return"15"==e.properties.dataType&&"approx"===e.properties.typeSearch&&(i=t.allowFullSearch?"FULLLIKE":"LIKE"),i},renderResult:function(){},refreshResults:function(){},parseAdditionalProperties:function(e){return 1==e||2==e||3==e||4==e||6==e||7==e||10==e||11==e?{type:"columnNumber"}:29==e?{type:"columnNumberScientificNotation"}:8==e?{type:"columnMoney"}:12==e||13==e?{type:"columnDate"}:5==e?{type:"columnBoolean"}:{type:"columnText"}},onSearchFinished:function(){}}),bizagi.rendering.container.extend("bizagi.rendering.tab",{},{initializeData:function(e){this._super(e);var t=this.properties;t.helpText=t.helpText||t.displayName,t.cssclass=t.cssclass||""},renderContainer:function(){for(var e=this.properties,t=$.map(this.children,function(e,t){return e.properties.counter=t,e.properties.tooltip=e.properties.tooltip||e.properties.displayName||"",e.properties}),i=this.renderFactory.getTemplate("tab"),n=this.getMode(),r=$.fasttmpl(i,{id:e.id,tabs:t,mode:n,editable:e.editable,tabOrientation:e.orientation,uniqueId:e.uniqueId,cssclass:e.cssclass}),a=this.activeTab=this.getActiveTab(),o=0,s=this.children.length;o<s;o++)this.children[o].properties.loadOnDemand=o!=a;return r=this.replaceChildrenHtml(r,this.renderChildrenHtml())},getActiveTab:function(){var e=this.properties,t=this.getFormContainer().getParams();"execution"===this.getMode()&&!t.isRefresh&&e.activeTab&&this.getFormContainer().setFocusedElement(e.activeTab);var i=t&&t.selectedTabs?t.selectedTabs:{};if(i[this.properties.id]>=0)return i[this.properties.id];for(var n=0,r=this.children.length;n<r;n++)if(this.children[n].containsFocusedElement())return n;return 0}}),bizagi.rendering.container.extend("bizagi.rendering.tabItem",{},{renderContainer:function(){var e=this.properties,t=this.renderFactory.getTemplate("tabItem"),i=$.fasttmpl(t,{id:e.id,uniqueId:e.uniqueId,counter:e.counter});return i=this.renderTabContent(i)},renderTabContent:function(e){return this.replaceChildrenHtml(e,this.renderChildrenHtml())},activate:function(){this.active=!0},getFocus:function(){var e=this._super();return bizagi.util.isEmpty(e)&&this.active&&(e=this.properties.id),e},containsFocusedElement:function(){var e=this.getFormContainer().getFocusedElement();if(e){if(e.xpath){var t=this.getFormContainer().getRenders(e.xpath);$.each(t,function(t,n){n.properties.id==e.id&&n.properties.editable&&(i=n)})}else var i=this.getFormContainer().getContainer(e)||this.getFormContainer().getRenderById(e);if(i)for(;i.parent;){if(i.properties.id==this.properties.id||i.parent.properties.id==this.properties.id)return!0;i=i.parent}}return!1}}),bizagi.rendering.panel.extend("bizagi.rendering.nestedForm",{},{}),bizagi.rendering.element.extend("bizagi.rendering.render",{postRenderTimeout:0,maxRendersPerScreen:50,rendersExecuted:0,renderOptimization:!1,TYPE_QUERY_FORM:"queryForm",startOptimization:function(){bizagi.rendering.render.postRenderTimeout=500,bizagi.rendering.render.rendersExecuted=0,bizagi.rendering.render.renderOptimization=!1},stopOptimization:function(){bizagi.rendering.render.postRenderTimeout=0,bizagi.rendering.render.rendersExecuted=0,bizagi.rendering.render.renderOptimization=!1}},{initializeData:function(e){var t=this;t._super(e);var i=t.getFormContainer(),n=t.properties;n.included=void 0!==n.included&&bizagi.util.parseBoolean(n.included),n.uniqueId=Math.ceil(1e6*Math.random()),n.displayName=n.displayName||"",n.editable=void 0===n.editable||bizagi.util.parseBoolean(n.editable),n.visible=void 0===n.visible||bizagi.util.parseBoolean(n.visible),n.includedInResult=void 0!==n.includedInResult&&bizagi.util.parseBoolean(n.includedInResult),"hidden"==n.type&&(n.visible=!1),n.required=void 0!==n.required&&bizagi.util.parseBoolean(n.required),n.submitOnChange=void 0!==n.submitOnChange&&bizagi.util.parseBoolean(n.submitOnChange),n.maxLength=n.maxLength||0,n.helpText=bizagi.util.trim(n.helpText)||"",n.textFormat=n.textFormat||{},n.valueFormat=n.valueFormat||{},n.isHidden=void 0!==n.isHidden&&bizagi.util.parseBoolean(n.isHidden),n.visible=!n.isHidden&&n.visible,n.color&&(n.textFormat.color=n.color),n.backgroundColor&&(n.textFormat.backgroundColor=n.backgroundColor),n.required=!!n.editable&&n.required,n.orientation=n.orientation||"auto",n.contexttype=i.params&&i.params.data&&i.params.data.contextType?i.params.data.contextType:"",t.originalProperties={textFormat:{color:n.textFormat.color,backgroundColor:n.textFormat.backgroundColor},valueFormat:{color:n.textFormat.color,backgroundColor:n.textFormat.backgroundColor},visible:n.visible,editable:n.editable,required:n.required,labelAlign:n.labelAlign},t.value=void 0!==n.value?n.value:null,t.properties.originalValue=t.value,t.properties.previousValue=t.value,t.calculateInitialLayoutProperties()},calculateInitialLayoutProperties:function(){var e=this.properties;e.displayType=e.displayType||"normal",e.labelAlign=e.labelAlign||this.getDefaultLabelAlign(e.displayType),e.valueAlign=e.valueAlign||this.getDefaultValueAlign(e.displayType),"rtl"==e.orientation&&(e.labelAlign=this.getRTLAlign(e.labelAlign),e.valueAlign=this.getRTLAlign(e.valueAlign));var t=this.calculateRenderWidth(e.labelWidth,e.valueWidth,e.displayType);e.labelWidth=t.label,e.valueWidth=t.control,"percentage"==e.layoutType&&(e.valueWidth=t.control),0==e.labelWidth&&(e.displayType="value",e.valueWidth=t.control),0==e.valueWidth&&(e.displayType="label"),"userfield"===e.type&&("both"===e.displayType?(e.valueWidth=e.valueWidth||50,e.labelWidth=e.labelWidth||50):"vertical"===e.displayType?(e.valueWidth=100,e.labelWidth=100):(e.valueWidth=100,e.labelWidth=0))},getElementType:function(){return bizagi.rendering.element.ELEMENT_TYPE_RENDER},render:function(e){return this.renderElement(e)},renderElement:function(e){var t=this,i=t.properties,n=t.getFormContainer();t.renderingDeferred=new $.Deferred,e=e||"render";var r=t.renderFactory.getTemplate(e),a=i.displayName;"string"==typeof a&&(a=(a=(a=(a=(a=(a=a.replaceAll("&","&amp;")).replaceAll("$","&#36;")).replaceAll("<","&lt;").replaceAll(">","&gt;")).replaceAll('"',"&#34;").replaceAll("'","&#39;").replaceAll("/","&#47;")).replaceAll("\\n","<br/>")).replaceAll("\n","<br/>"));var o=parseFloat(i.labelWidth),s=$.fasttmpl(r,{label:a,helpText:i.helpText,editable:i.editable,isExtendedText:"text"==i.type&&i.isExtended,orientation:i.orientation,uniqueId:i.uniqueId,id:i.id,xpath:i.xpath,tag:i.tag,displayType:i.displayType,displayOptionClass:t.getDisplayOptionClass(i.displayType),labelAlignClass:t.getAlignClass(i.labelAlign),valueAlignClass:t.getAlignClass(i.valueAlign),labelWidth:o,stringLabelWidth:o+("pixels"==i.layoutType?"px":"%"),valueWidth:parseFloat(i.valueWidth),stringValueWidth:parseFloat(i.valueWidth)+("pixels"==i.layoutType?"px":"%"),layoutType:i.layoutType,isDesign:"design"===t.getMode(),messageValidation:i.messageValidation,printVersion:n.params.printversion,cssClass:i.cssclass||"",includedInResult:i.includedInResult,included:i.included,type:i.type,showFullRender:"desktop"!==bizagi.util.detectDevice()&&("association"===i.type||"uploadecm"===i.type||"actionLauncher"===i.type&&bizagi.util.isTabletDevice()||"polymorphicLauncher"===i.type&&bizagi.util.isTabletDevice()||"grid"===i.type&&!bizagi.util.isTabletDevice())}),l=t.internalRenderControl();return l||(l=""),"object"==typeof l&&l.done?"resolved"===l.state()?(s=t.replaceControlHtml(s,t.resolveResult(l)),t.asyncRenderDeferred=null):(t.asyncRenderDeferred=l,s=t.replaceControlHtml(s,"")):s=t.replaceControlHtml(s,l),s},resolveResult:function(e){return bizagi.resolveResult(e)},isRendered:function(){return!!this.renderingDeferred&&this.renderingDeferred.promise()},internalRenderControl:function(){var e=this.properties;return this.control=null,this.renderFactory.printVersion?(e.editable=!1,this.renderControl()):e.editable?this.renderControl():this.renderReadOnly()},postRenderElement:function(e){var t=this,i=t.properties;t.element=e,i.submitOnChange&&t.configureSubmitOnChange(),isLabelFormat=!0;var n=function(e){bizagi.rendering.render.renderOptimization&&bizagi.rendering.render.rendersExecuted>bizagi.rendering.render.maxRendersPerScreen?setTimeout(function(){t.internalPostRender(e),bizagi.rendering.render.postRenderTimeout+=50},bizagi.rendering.render.postRenderTimeout):t.internalPostRender(e),bizagi.rendering.render.rendersExecuted++};t.asyncRenderDeferred?$.when(t.asyncRenderDeferred).done(function(i){var r=t.getControl();"function"==typeof t.emptyControlByAsyncRenderDeferred&&t.emptyControlByAsyncRenderDeferred(),r.append(i),n(e),t.processLayout(!isLabelFormat,t.properties.valueFormat||{})}):n(e)},internalPostRender:function(e){var t=this,i=t.properties,n=t.getMode();t.control=t.getControl();t.renderingDeferred&&t.renderingDeferred.resolve(),i.editable?t.renderFactory.printVersion&&t.postRenderPrintVersion?t.postRenderPrintVersion():t.postRender():t.postRenderReadOnly(e),"execution"==n?t.performExecutionModeMethods():t.performDesignModeMethods(),t.processLayout(isLabelFormat,t.properties.textFormat||{}),t.processLayout(!isLabelFormat,t.properties.valueFormat||{})},performExecutionModeMethods:function(){var e=this.properties;this.getFormType()==this.Class.TYPE_QUERY_FORM&&this.configureHandlersQueryForm(),e.editable?this.configureHandlers():this.configureHandlersReadOnly(),this.internalSetInitialValue()},performDesignModeMethods:function(){this.properties;var e=this.getControl();null!==e&&$("input, select, button, textarea",e).attr("readonly",!0),this.configureDesignView(),this.internalSetInitialValue()},replaceControlHtml:function(e,t){return t=t||"",(e=e||"").replace("{{control}}",t)},getRenderedElement:function(){return bizagi.util.isEmpty(this.element)&&bizagi.log(" render hasn't been rendered!",this,"error"),this.element},internalSetInitialValue:function(){var e=this.properties;this.internalSetInitialValueFlag=!0,e.editable,bizagi.util.isEmpty(this.value)||this.setDisplayValue(this.value),this.internalSetInitialValueFlag=!1},isValid:function(e){var t,i=this,n=i.properties,r=i.grid&&i.grid.properties&&i.grid.properties.inlineAdd;if(0==bizagi.util.parseBoolean(n.visible))return!0;if(0==bizagi.util.parseBoolean(n.editable)&&!r)return!0;if(i.setValidationMessage(""),bizagi.util.parseBoolean(n.required)){var a=i.getFormContainer(),o=i.grid?[i]:a.getRenders(n.xpath),s=!1;if($.each(o,function(e,t){if(t.hasValue()&&(t.properties.editable||r))return s=!0,!1}),!s&&!i.properties.isClone)return t=i.getResource("render-required-text").replaceAll("#label#",n.displayName),e.push({xpath:n.xpath,message:t}),!1}if("duplicate"==n.retype){if(i.cloneRender&&i.cloneRender.getValue()!=i.getValue())return t=i.getResource("render-text-retype-error"),e.push({xpath:n.xpath,message:t}),!1}else if("double"==n.retype){var l=$("input",i.element);if(l&&l.data("oldValue")){if(""==l.val())return t=i.getResource("render-text-retype-error"),e.push({xpath:n.xpath,message:t}),!1;if(l.val()!=l.data("oldValue"))return t=i.getResource("render-text-retype-error"),e.push({xpath:n.xpath,message:t}),!1}}var u=!i.grid||!i.grid.getColumn||i.grid.getColumn(i.properties.xpath).properties.editable;if("userPassword"!=n.type&&void 0!==n.maxLength&&n.maxLength>0&&bizagi.util.isNumeric(n.maxLength)&&(u||!u&&i.controlValueIsChanged())){var c=new Number(n.maxLength),d=i.getValue();if(d&&d.toString().length>c)return t=i.getResource("render-text-maxLength-error").replaceAll("#maxLength#",c),e.push({xpath:n.xpath,message:t}),!1}return!0},hasValue:function(){var e=this.getValue();return e=e&&"text"==this.properties.type&&"string"==typeof e?e.trim():e,!bizagi.util.isEmpty(e)},postRender:function(){},postRenderReadOnly:function(){},configureHandlers:function(){},configureHandlersReadOnly:function(){},configureDesignView:function(){},processLayout:function(e,t){var i=this,n=i.properties;if(null!=i.getControl()){(t=t||{}).color&&i.changeColor(t.color,e),t.background&&i.changeBackgroundColor(t.background),!t.bold&&t.bold&&e||i.changeFontBold(t.bold,e),t.italic&&i.changeFontItalic(t.italic,e),t.underline&&i.changeFontUnderline(t.underline,e),t.strikethru&&i.changeFontStrikethru(t.strikethru,e),t.size&&i.changeFontSize(t.size,e),n.required=null!=n.required&&bizagi.util.parseBoolean(n.required);var r=null==n.visible||bizagi.util.parseBoolean(n.visible);n.required&&i.changeRequired(n.required),r||i.changeVisibility(r)}},setValue:function(e,t){var i=this;t=void 0===t||t,bizagi.util.identicalObjects(e,i.value)||(i.properties.previousValue=i.properties.originalValue=i.value,i.value=i.properties.value=e,i.properties.required&&"execution"==i.getMode()&&(i.checkRequired([])?i.changeRequiredLabel(!1):i.changeRequiredLabel(!0)),t&&!i.internalSetInitialValueFlag&&(i.triggerRenderChange(),i.triggerRenderValidate()))},checkRequired:function(e){var t=this.properties;return!(bizagi.util.parseBoolean(t.required)&&!this.hasValue())||(message=this.getResource("render-required-text").replaceAll("#label#",t.displayName),e.push({xpath:t.xpath,message:message}),!1)},validateInputRetype:function(){return!this.properties.retype||!this.cloneRender||this.getValue()==this.cloneRender.getValue()},triggerRenderChange:function(e){(e=e||{}).changed=void 0===e.changed||e.changed,this.triggerHandler("renderchange",{render:this,changed:e.changed})},triggerRenderValidate:function(){this.triggerHandler("rendervalidate",{render:this})},setDisplayValue:function(e){var t=this.getControl();if(this.setValue(e,!1),0==this.properties.editable&&"check"!=this.properties.display){var i=this.getDisplayValue(e);"string"!=typeof i&&"number"!=typeof i||$(t).html("<label class='readonly-control'>"+i+"</label>")}},getValue:function(){return this.value},getDisplayValue:function(){return this.getValue()},getLabel:function(){bizagi.util.mustImplement("getLabel")},getControl:function(){bizagi.util.mustImplement("getControl")},getControlFiller:function(){bizagi.util.mustImplement("getControlFiller")},renderControl:function(){},setValidationMessage:function(e){this.validationMessage=e},renderReadOnly:function(){var e=this.getValue(),t="";if(bizagi.util.isObject(e)&&void 0!==e.value)t=e.value;else if(!bizagi.util.isEmpty(e))if(bizagi.util.isString(e)){var i=e.replaceAll("&","&amp;");t=i=(i=(i=(i=i.replaceAll("<","&lt;").replaceAll(">","&gt;")).replaceAll('"',"&#34;").replaceAll("'","&#39;").replaceAll("/","&#47;")).replaceAll("\\n","<br/>")).replaceAll("\n","<br/>")}else t=e;return t},postRenderPrintVersion:function(){},changeDisplayOption:function(e){this.properties.displayType=e},getDisplayOptionClass:function(e){return""},changeLabelAlign:function(e){this.properties.labelAlign=e},changeValueAlign:function(e){this.properties.valueAlign=e},getAlignClass:function(e){return""},customizeRenderWidth:function(){},changeColor:function(e,t){var i=this,n=i.getControl(),r=i.getLabel();t=void 0===t&&null==t||t;n&&r&&("none"!=e?"value"!=i.properties.displayType&&t?(i.element.each(function(){this.style.setProperty("color",e,"important")}),"grid"==i.properties.type&&i.getControl().find(".bz-rn-grid-header-title").each(function(){this.style.setProperty("color",e,"important")}),i.getLabel().find("label").css("color",e,"!important"),!1===i.properties.editable&&(i.getElementsToStylize(i.getControl()).css("color",e,"!important"),i.getElementsToStylize($("label",i.getControl()).css("color",e,"!important")))):(i.getElementsToStylize(i.getControl()).css("color",e,"!important"),i.getControl().find("*").each(function(t,n){i.getElementsToStylize(n).css("color",e,"!important")})):(i.element.css("color",""),i.getLabel().find("label").css("color",""),i.getControl().css("color",""),i.getControl().find("input, textarea").each(function(e,t){var n=$(t).data("originalColor")||"";i.getElementsToStylize(t).css("color",n)})))},changeBackgroundColor:function(e){var t=this,i=t.getControl(),n=t.getLabel();if(i&&n)if("none"!=e){t.element.each(function(){this.style.setProperty("background-color",e,"important")}),void 0!==n.find("label").style?t.getLabel().find("label").style("background-color",e,"important"):t.getLabel().find("label").css("background-color",e,"!important");var r=t.getLabel().attr("style");r+="; background-color:"+e+"!important",t.getLabel().attr("style",r)}else t.element.css("background-color",""),t.getLabel().find("label").css("background-color",""),t.getControl().css("background-color",""),t.getControl().find("input, textarea").each(function(e,t){var i=$(t).data("originalColor")||"";$(t).css("background-color",i)})},getFormattingLabel:function(){return this.getLabel().find("label")},changeFontBold:function(e,t){t=void 0===t&&null==t||t;0!=bizagi.util.parseBoolean(e)&&t?(this.getFormattingLabel().css("font-weight","bold","!important"),this.getControl().each(function(e,t){$(t).css("font-weight","bold","!important")})):t&&this.getFormattingLabel().css("font-weight","normal","!important"),t||(1==bizagi.util.parseBoolean(e)?this.getControl().find("*").each(function(e,t){$(t).css("font-weight","bold","!important")}):(this.getControl().find("*").each(function(e,t){$(t).css("font-weight","normal","!important")}),this.getControl().css("font-weight","normal","!important")))},controlValueIsChanged:function(){var e=this.properties,t=this.getValue(),i=e.originalValue,n=e.defaultValue,r=!0;if($.forceCollectData)return!0;if("grid"==this.properties.type&&"pending"==this.ready().state())return!1;if("combo"==e.type||"queryCombo"==e.type||"list"==e.type||"queryList"==e.type||"radio"==e.type||"queryRadio"==e.type||"cascadingCombo"==e.type)t&&void 0!==t.length&&(t=t[0]),i&&void 0!==i.length&&(i=i[0]),n&&void 0!==n.length&&(n=n[0]),t=t&&t.id?t.id:t,i=i&&i.id?i.id:i,r=void 0!==(n=n&&n.id?n.id:n)&&null!=n?i!=t||i==n:i!=t;else if("boolean"==e.type||"queryBoolean"==e.type||"queryCheck"==e.type)r=bizagi.util.parseBoolean(i)!=bizagi.util.parseBoolean(t);else if("searchNumber"==e.type)r=!!t;else if("number"==e.type)r=(null!==t&&""!==t||null!==i&&""!==i)&&i!==t;else if("text"==e.type)r=(null!==t&&""!==t||null!==i&&""!==i)&&i!==t;else if("date"==e.type)r=!(!i&&!t)&&i!=t;else if("actionLauncher"==e.type){r=!1;var a=[];try{a="string"==typeof i?JSON.parse(i):i}catch(e){}var o=function(e,t){e=e||"";for(var i=!1,n=0,r=(t=t||[]).length;n<r;n++)if(t[n].guidAction==e){i=!0;break}return i};if(a.length==t.length)for(var s=0,l=a.length;s<l;s++)o(a[s].guidAction,t)||(r=!0);else r=!0}else if("polymorphicLauncher"==e.type||"entityTemplate"==e.type)r=i.length!=t.length||JSON.encode(t)!=JSON.encode(i);else if("image"==e.type)r=!(null==i&&t.indexOf(!0)<0);else if("searchList"==e.type){var u={};try{u=JSON.parse(t)}catch(e){console.log("Error when detect change value on searchList control")}r=JSON.encode(i)!=JSON.encode(u.value)}else r=i!==t;return r},changeFontItalic:function(e,t){var i=this;t=void 0===t&&null==t||t;"value"!=i.properties.displayType&&t?1==bizagi.util.parseBoolean(e)?i.getFormattingLabel().css("font-style","italic","!important"):i.getFormattingLabel().css("font-style","normal","!important"):1==bizagi.util.parseBoolean(e)?(t&&i.getFormattingLabel().css("font-style","italic","!important"),i.properties.editable?i.getControl().find("*").each(function(e,t){i.getElementsToStylize(t).css("font-style","italic","!important")}):i.getElementsToStylize(i.getControl()).css("font-style","italic","!important")):(t&&i.getFormattingLabel().css("font-style","normal","!important"),i.properties.editable?i.getControl().find("*").each(function(e,t){i.getElementsToStylize(t).css("font-style","normal","!important")}):i.getElementsToStylize(i.getControl()).css("font-style","normal","!important"))},changeFontUnderline:function(e,t){var i=this,n=i.properties.textFormat||{},r=i.properties.valueFormat||{},a=bizagi.util.parseBoolean(n.strikethru)?"line-through ":"",o=bizagi.util.parseBoolean(r.strikethru)?"line-through ":"";t=void 0===t&&null==t||t;1==bizagi.util.parseBoolean(e)&&t?(i.getFormattingLabel().css("text-decoration",a+"underline","!important"),i.getControl().each(function(e,t){i.getElementsToStylize(t).css("text-decoration",a+"underline")})):t&&i.getFormattingLabel().css("text-decoration",a,"!important"),"value"!=i.properties.displayType&&t||(1==bizagi.util.parseBoolean(e)?i.properties.editable?i.getControl().find("*").each(function(e,t){i.getElementsToStylize(t).css("text-decoration",o+"underline","!important")}):i.getElementsToStylize(i.getControl()).css("text-decoration",o+"underline","!important"):i.getControl().find("*").each(function(e,t){i.getElementsToStylize(t).css("text-decoration",o,"!important")}))},changeFontStrikethru:function(e,t){var i=this,n=i.properties.textFormat||{},r=i.properties.valueFormat||{},a=bizagi.util.parseBoolean(n.underline)?"underline ":"",o=bizagi.util.parseBoolean(r.underline)?"underline ":"";t=void 0===t&&null==t||t;1==bizagi.util.parseBoolean(e)&&t?i.getFormattingLabel().css("text-decoration",a+"line-through","!important"):t&&i.getFormattingLabel().css("text-decoration",a,"!important"),"value"!=i.properties.displayType&&t||(1==bizagi.util.parseBoolean(e)?i.properties.editable?i.getControl().find("*").each(function(e,t){i.getElementsToStylize(t).css("text-decoration",o+"line-through","!important")}):i.getElementsToStylize(i.getControl()).css("text-decoration",o+"line-through","!important"):i.properties.editable?i.getControl().find("*").each(function(e,t){i.getElementsToStylize(t).css("text-decoration",o,"!important")}):i.getElementsToStylize(i.getControl()).css("text-decoration",o,"!important"))},changeFontSize:function(e,t){t=void 0===t&&null==t||t;if("0"!=e){var i=this.getFormattingLabel(),n=100+10*Number(e)+"%";if(t&&i.css("font-size",n,"!important"),"value"==this.properties.displayType||!t){var r=this.getControl();"object"==typeof r.children()&&r.children().length>0?this.getElementsToStylize(r.children()).css("font-size",n,"!important"):(this.getElementsToStylize(r).css("font-size",n,"!important"),-1!=this.properties.type.indexOf("ombo")&&e>4&&r.children(0).height(2*e+20)),this.getElementsToStylize(r.find(".ui-bizagi-render-date")).css("line-height","normal")}}},getElementsToStylize:function(e){return $(e)},changeVisibility:function(e){var t=this.properties;1==bizagi.util.parseBoolean(e)?"hidden"!==t.type&&(this.element.show(),this.element.css("display",""),t.required&&(this.hasValue()||this.changeRequiredLabel(!0))):this.element&&this.element.hide(),t.visible=e},changeEditability:function(e){var t=this,i=t.properties,n=t.getControl();i.editable=bizagi.util.parseBoolean(e),n.empty(),"function"==typeof t.internalRenderControl&&$.when(t.internalRenderControl()).done(function(e){"function"==typeof t.emptyControlByChangeEditability&&t.emptyControlByChangeEditability(),t.asyncRenderDeferred||n.append(e),t.postRenderElement(t.element)})},changeEditabilityCellControl:function(e,t,i){var n=this,r=n.properties,a=n.getControl(),o=n.grid.getColumn(i),s=o.getDecorated(t);r.editable=bizagi.util.parseBoolean(e),a.empty(),"function"==typeof n.internalRenderControl&&$.when(n.internalRenderControl()).done(function(e){a.append(e),n.postRenderElement(n.element),r.editable&&(o.bind("rendered",function(){o.readyDeferred.resolve()}),s.unbind("renderchange"),s.bind("renderchange",function(e,i){o.changed=!0,n.grid.onCellChange(o,null,t,i)}))})},changeRequired:function(e){var t=this.properties,i=t.displayName||"",n=$("label",this.getLabel()),r=this.getControl();t.required=e,"execution"==this.getMode()&&this.checkRequired([])?this.changeRequiredLabel(!1):1==bizagi.util.parseBoolean(e)&&t.editable?"rtl"==this.properties.orientation?r.prepend('<div class="ui-bizagi-render-control-required-rtl"></div>'):(r.addClass("control-required"),r.prepend('<div class="ui-bizagi-render-control-required"></div>')):"rtl"==this.properties.orientation?$(".ui-bizagi-render-control-required-rtl",r).remove():(r.removeClass("control-required"),$(".ui-bizagi-render-control-required",r).remove()),n.html(i),this.triggerRenderValidate()},changeRequiredLabel:function(e){var t=this.properties,i=t.displayName||"",n=$("label",this.getLabel()),r=this.getControl();1==bizagi.util.parseBoolean(e)&&t.editable?"rtl"==this.properties.orientation?r.prepend('<div class="ui-bizagi-render-control-required-rtl"></div>'):(r.addClass("control-required"),r.append('<div class="ui-bizagi-render-control-required"></div>')):"rtl"==this.properties.orientation?$(".ui-bizagi-render-control-required-rtl",r).remove():(r.removeClass("control-required"),$(".ui-bizagi-render-control-required",r).remove()),n.html(i),this.triggerRenderValidate()},refreshControl:function(e){var t=this,i=t.properties,n=(t.value,t.getFormContainer().properties.id||"");return e=e||{},t.startLoading(),t.beforeToRefresh(),$.when(t.dataService.multiaction().refreshControl({xpath:i.xpath,idRender:i.id,idPageCache:i.idPageCache,xpathContext:i.xpathContext||e.xpathContext,idForm:n})).pipe(function(e){t.control=t.controlFiller=t.label=null;var i=t.element;return t.initializeData(e.render),$.when(t.render()).pipe(function(e){var i=$(e);t.postRenderElement(i);return t.properties.originalValue=t.value,i}).pipe(function(e){i.replaceWith(e),t.grid||t.triggerRenderChange({changed:!1}),t.afterToRefresh()})}).fail(function(e){e=t.processFailMessage(e)}).always(function(){t.endLoading()})},refreshDesignControl:function(e){var t=this,i=t.properties;t.beforeToRefresh(),t.control=t.controlFiller=t.label=null,$.extend(e.render.properties,{xpath:i.xpath,idRender:i.id,xpathContext:i.xpathContext||"form",idPageCache:i.idPageCache});var n=t.element;return t.initializeData(e.render),$.when(t.render()).pipe(function(e){var i=$(e);t.postRenderElement(i);return t.properties.originalValue=t.value,i}).pipe(function(e){n.replaceWith(e),t.triggerRenderChange(),t.beforeToRefresh()})},cleanData:function(){this.setValue(""),this.clearDisplayValue()},clearDisplayValue:function(){var e=this.getControl(),t=e.find("input");t.length>0?t.val(this.getValue()):!1===this.properties.editable&&$(e).html("<label class='readonly-control'></label>")},updateOriginalValue:function(){this.properties.originalValue=this.value},collectData:function(e){var t=this.properties,i=t.xpath,n=this.getValue();this.controlValueIsChanged()&&(bizagi.util.isEmpty(i)||(bizagi.util.isEmpty(n)?""!==n&&null!==n||(e[t.xpath]=""):e[t.xpath]=n)),this.validateInputRetype()||(e[t.xpath]="")},hasChanged:function(e){return!!this.controlValueIsChanged()&&(e.push(!0),!0)},configureHandlersQueryForm:function(){var e=this;e.element.find(".ui-bizagi-render-control-included").change(function(){e.properties.included=$(this).is(":checked")})},collectDataQueryForm:function(e){var t=this.properties,i=t.xpath,n=this.getValue(),r=null;if(!bizagi.util.isEmpty(i)){if(null!=n)r=void 0!==n.id?bizagi.util.isEmpty(n.id)?null:[n]:""!==n?n:null;if((null!==r||t.included)&&("check"!=t.display||0!=t.value)){var a=this.properties.typeSearch||this.properties.rangeQuery||"NONE";a=a.toUpperCase();var o={value:r,included:this.properties.included,xpath:t.xpath,searchType:a,orderType:"NONE"};void 0!==t.displayXpath&&""!==t.displayXpath&&(o.displayXpath=t.displayXpath),e.push(o)}}},canBeSent:function(){var e,t=this.properties,i=bizagi.util.parseBoolean(t.displayOnly)||!1,n=t.editable;if(!i&&n)return!0;if(t.isClone)return!1;if(t.xpath&&1==this.getFormContainer().getRenders(t.xpath).length){if(e=!!$.forceCollectData&&$.forceCollectData.toString(),$.forceCollectData=e?void 0:$.forceCollectData,this.controlValueIsChanged())return $.forceCollectData=e?bizagi.util.parseBoolean(e):$.forceCollectData,!0;$.forceCollectData=e?bizagi.util.parseBoolean(e):$.forceCollectData}return!1},canBeSentQueryForm:function(){return!this.properties.isClone},focus:function(e){var t=this;if(t.properties.visible){this._super();var i=$("#ui-bizagi-wp-app-render-form-content"),n=function(){var e=t.getControl(),n="grid"!=t.properties.type?$("input, select, option, textarea",e):$("input, select, option, textarea",e).first();n.length>0&&$.each(n,function(e){var t=n[e];if("hidden"!=$(t).attr("type")&&"none"!=$(t).css("display")&&"hidden"!=$(t).css("visibility"))try{bizagi.util.isIE()||bizagi.util.autoScrollBottom(i),t.focus()}catch(e){}})};$.when(t.ready()).done(function(){e>0?setTimeout(n,e):n()})}},getDefaultLabelAlign:function(e){return"normal"==(e=e||"normal")||"both"==e?"left":"vertical"==e?"left":"reversed"==e?"left":"verticalReversed"==e?"left":"label"==e?"left":"value"==e?"left":""},getDefaultValueAlign:function(e){return"normal"==(e=e||"normal")||"both"==e?"left":"vertical"==e?"left":"reversed"==e?"right":"verticalReversed"==e?"left":"label"==e?"left":"value"==e?"left":""},configureSubmitOnChange:function(){var e=this,t=e.properties,i="";if(t.editable){t.dependencies=t.dependencies||"all";var n={conditions:{expressions:[{simple:{xpath:i=t.xpath?t.submitOnChangexpathContext?t.submitOnChangexpathContext+"."+t.xpath:t.xpath:t.submitOnChangexpathContext?t.submitOnChangexpathContext+"."+t.id:t.id,operator:"changes",argumentType:"const"}}]},commands:[{xpath:i,command:"submit-value",argument:t.dependencies}],dependencies:[i],elseCommands:[]};$.when(e.ready()).done(function(){e.getFormContainer().addSubmitAction(i,n)})}},submitOnChange:function(e,t,i){var n=this,r=$.Deferred();return""!=n.properties.contexttype&&e&&(e[n.dataService.Class.BA_CONTEXT_PARAMETER_PREFIX+"contexttype"]=n.properties.contexttype),$.when(n.isReadyToSave()).done(function(){n.internalSubmitOnChange(e,t,i).done(function(){r.resolve()}).fail(function(){r.reject()})}),r.promise()},getCacheIdCase:function(){var e=this.getParams().idCase;return void 0===bizagi.cache?(bizagi.cache={},bizagi.cache.idCaseObject={idCase:void 0!==e?e:void 0!==bizagi.cache.idCase?bizagi.cache.idCase:void 0}):void 0!==e&&void 0!==bizagi.cache.idCaseObject?bizagi.cache.idCaseObject.idCase=e:void 0!==e&&void 0===bizagi.cache.idCaseObject&&(bizagi.cache.idCaseObject={},bizagi.cache.idCaseObject.idCase=e),e=void 0===e?void 0===bizagi.cache.idCaseObject?void 0:bizagi.cache.idCaseObject.idCase:e},internalSubmitOnChange:function(e,t,i){var n=this.getFormContainer(),r=this.properties,a={data:e,bRefreshForm:t,notCollect:i,properties:{idCase:this.getCacheIdCase(),id:r.id,xpath:r.xpath,idPageCache:r.idPageCache,contexttype:r.contexttype}};return n.internalSubmitOnChange(a)},ready:function(){return $.when(this.parent.ready(),this.isRendered())},getCustomHandlers:function(){var e=this.getFormContainer();return e?e.getCustomHandlers():null},getCustomHandler:function(e){var t=this.getCustomHandlers();return t?t[e]:null},getRTLAlign:function(e){return"default"==e||"left"==e?"right":"right"==e?"left":e},calculateRenderWidth:function(e,t,i){if(e="100"==t&&void 0===e?"0":e?"0"!=e?e:"50":"50%",t=t?"0"!=t?t:"50":"50%","normal"==i||"both"==i||"reversed"==i){if(e&&bizagi.util.percent2Number(e)<5&&t&&bizagi.util.percent2Number(t)<5)return{label:0,control:100};e&&!t?t=100-(e=bizagi.util.percent2Number(e)):!e&&t?e=100-(t=bizagi.util.percent2Number(t)):(e=bizagi.util.percent2Number(e))+(t=bizagi.util.percent2Number(t))!=100&&void 0!==this.properties&&"pixels"!=this.properties.layoutType&&(t=100-e)}else e=100,t=100;return{label:e,control:t}},getIdCase:function(){return this.getFormContainer().params.idCase||bizagi.context.idCase},getIdWorkitem:function(){return this.getFormContainer().params.idWorkitem||bizagi.context.idWorkitem},getidTask:function(){return this.getFormContainer().params.idTask||bizagi.context.idTask},getSessionId:function(){return this.getFormContainer().properties.sessionId},changeCellColor:function(e){var t=this.getControl();t&&("none"!=e?(t.css("color",e),t.find("input, textarea, label").each(function(t,i){$(i).css("color",e)})):(t.css("color",""),t.find("input, textarea, label").each(function(e,t){$(t).css("color","")})))},changeCellBackgroundColor:function(e){var t=this.getControl(),i="",n="";if(t)if("none"!=e&&(i=e,n="none"),this.properties.editable){var r=!1;t.find("input, textarea, .ui-selectmenu").each(function(e,t){"text"!=t.type&&"textarea"!=t.type||$(t).hasClass("ui-select-data")||(r=!0),$(t).css({"background-color":i,"background-image":n})}),r||t.closest("td").each(function(e,t){$(t).css({"background-color":i,"background-image":n})})}else t.each(function(e,r){($(r).hasClass("ui-bizagi-cell-readonly")?t.closest("td"):$(r)).css({"background-color":i,"background-image":n})})},changeCellVisibility:function(e){var t=this.properties,i=this.getControl();i&&(1==bizagi.util.parseBoolean(e)?(i.css("visibility","visible"),i.css("display","")):i.css("visibility","hidden")),t.visible=e},changeCellRequired:function(e){var t=this.properties,i=this.getControl();i&&(1==bizagi.util.parseBoolean(e)&&bizagi.util.isEmpty(this.value)?(i.addClass("control-required"),i.append('<div class="ui-bizagi-render-control-required"></div>')):(i.removeClass("control-required"),$(".ui-bizagi-render-control-required",i).remove()),t.required=e)},startActionExecution:function(){this.startLoading(),this.actionExecutionDeferred=new $.Deferred},endActionExecution:function(){this.endLoading(),this.actionExecutionDeferred&&this.actionExecutionDeferred.resolve(),delete this.actionExecutionDeferred},readyActionExecution:function(){return this.actionExecutionDeferred?this.actionExecutionDeferred.promise():$.when(!0)},isFromCreatedRow:function(){if(this.grid)for(var e=this.grid.columns.length;e-- >0;)if(this.grid.columns[e].properties.xpath==this.properties.xpath&&1==this.grid.columns[e].isNewRow)return!0;return!1},submitInvalidatePageCacheRequest:function(e){var t=this.properties,i=e?e.idPageCache:t.idPageCache;this.dataService.invalidatePageCache({idPageCache:i})}}),$.Class.extend("bizagi.rendering.render.base",{},{processLayout:function(e,t){var i=this.properties;if("boolean"==typeof e)if(e)this.processLabelLayout(t);else{this.processControlLayout(t),i.required=void 0!==i.required&&bizagi.util.parseBoolean(i.required);var n=void 0===i.visible||bizagi.util.parseBoolean(i.visible);i.required&&this.changeRequired(i.required),n||this.changeVisibility(n)}else console.warm("error calling processLayout, 'isLabelFormat' is not boolean")},processLabelLayout:function(e){var t=this.getLabel();null!=t&&(void 0===(e=e||{}).bold&&(e.bold=!0),this.changeBackgroundColor(e.background).changeFontColor(t,e.color).changeFontBold(t,e.bold).changeFontSize(t,e.size).changeFontItalic(t,e.italic).changeTextDecoration(t,(e.underline?"underline":"")+(e.strikethru?" line-through":"")))},processControlLayout:function(e){var t=this.getControl(),i=this.getElementsToStylize(t);e=e||{},this.changeFontColor(i,e.color).changeFontBold(i,e.bold).changeFontItalic(i,e.italic).changeFontSize(i,e.size).changeTextDecoration(i,(e.underline?"underline":"")+(e.strikethru?" line-through":""))},changeColor:function(e){var t=this.getLabel(),i=this.getControl(),n=this.getElementsToStylize(i);return this.changeFontColor(t,e).changeFontColor(n,e)},changeFontColor:function(e,t){if(void 0===e)return this;if(void 0===t)return this;var i="none"!==t?t:"";return e.css("color",i),this},changeFontSize:function(e,t){if(void 0===t)return this;if(void 0===e)return this;if("0"!==t){var i=100+10*Number(t)+"%";e.css("font-size",i)}return this},changeTextDecoration:function(e,t){return void 0===t?this:void 0===e?this:(t&&e.css("text-decoration",t),this)},changeFontItalic:function(e,t){var i=bizagi.util.parseBoolean(t)?"italic":"normal";return e.css("font-style",i),this},changeFontBold:function(e,t){var i=bizagi.util.parseBoolean(t)?"bold":"normal";return e.css("font-weight",i),this},changeBackgroundColor:function(e){return void 0===e?this:("none"!==e?this.element.css("background-color",e):this.element.css("background-color",""),this)}}),bizagi.rendering.render.extend("bizagi.rendering.render",{},{postRender:function(){this.configureHelpText()},postRenderReadOnly:function(){var e=this.getControl();this._super(),this.configureHelpText(),e.addClass("bz-rn-read-only")},configureHelpText:function(){this.element&&this.element.find(".ui-bizagi-helptext").click(function(){var e=$(this);if(e.data("active"))e.removeData("active"),e.find(".bz-rn-helptext").tooltip("destroy"),e.find(".bz-rn-helptext").remove();else{e.data("active","true");var t=e.data("helptext"),i=$('<span class="bz-rn-helptext"></span>').appendTo(e);i.attr("title",""),i.tooltip({content:t}),i.tooltip("open")}})},getLabel:function(){return this.label||(this.label=$(".ui-bizagi-label",this.element||this.observableElement)),this.label},getControl:function(){return this.control&&0!=this.control.length||(this.control=$(".ui-bizagi-render-control",this.element||this.observableElement)),this.control},getControlFiller:function(){return this.controlFiller||(this.controlFiller=$(".ui-bizagi-render-control",this.element||this.observableElement)),this.controlFiller},startLoading:function(){if(this.element){this.element.addClass("ui-bizagi-state-loading");var e=$('<div class="ui-bizagi-render-loading ui-bizagi-loading"></div>');this.element.append(e)}},endLoading:function(){this.element&&(this.element.removeClass("ui-bizagi-state-loading"),this.element.find(".ui-bizagi-render-loading").detach(),this.element.find(".ui-bizagi-control").removeClass("ui-bizagi-loading"))},getDisplayOptionClass:function(e){return"normal"==e||"both"==e?"ui-bizagi-render-display-normal":"vertical"==e?"ui-bizagi-render-display-vertical":"reversed"==e?"ui-bizagi-render-display-reversed":"verticalReversed"==e?"ui-bizagi-render-display-vertical-reversed":"label"==e?"ui-bizagi-render-display-label":"value"==e?"ui-bizagi-render-display-value":void 0},changeDisplayOption:function(e){var t=this.element;t.removeClass("ui-bizagi-render-display-normal ui-bizagi-render-display-vertical ui-bizagi-render-display-reversed").removeClass("ui-bizagi-render-display-vertical-reversed ui-bizagi-render-display-label ui-bizagi-render-display-value"),t.addClass(this.getDisplayOptionClass(e))},getAlignClass:function(e){return"left"==e?"ui-bizagi-render-align-left":"center"==e?"ui-bizagi-render-align-center":"right"==e?"ui-bizagi-render-align-right":void 0},changeLabelAlign:function(e){var t=this.getLabel();t.removeClass("ui-bizagi-render-align-left ui-bizagi-render-align-center ui-bizagi-render-align-right"),t.addClass(this.getAlignClass(e))},changeValueAlign:function(e){var t=this.getControlFiller();t.removeClass("ui-bizagi-render-align-left ui-bizagi-render-align-center ui-bizagi-render-align-right"),t.addClass(this.getAlignClass(e))},customizeRenderWidth:function(){var e=this.getLabel(),t=this.properties,i=this.getControlFiller(),n=t.labelWidth?"0"!=t.labelWidth?t.labelWidth:"50%":null,r=t.valueWidth?"0"!=t.valueWidth?t.valueWidth:"50%":null;n&&!r?r=100-(n=bizagi.util.percent2Number(n)):!n&&r?n=100-(r=bizagi.util.percent2Number(r)):(n=bizagi.util.percent2Number(n))+(r=bizagi.util.percent2Number(r))!=100&&(r=100-n),e.width(n+"%"),i.width(r-.01+"%")},setValidationMessage:function(e){var t=this;t._super(e),$.when(t.ready()).done(function(){var i=t.getControl();if(e&&e.length>0){var n=0==t.element.prev().length&&t.parent==t.getFormContainer();e=e.replace(/<\w+>([^<]*)<\/\w+>/g,"$1"),i.attr("data-error",e),i.addClass(n?"ui-bizagi-render-error-firstControl":"ui-bizagi-render-error")}else i&&(i.attr("data-error",""),i.removeClass("ui-bizagi-render-error"),i.removeClass("ui-bizagi-render-error-firstControl"))})},changeRequired:function(e){var t=this.properties;t.required=e,this._super(e),"tablet"==bizagi.detectDevice()&&"vertical"==t.displayType&&("execution"==this.getMode()&&this.checkRequired([])||(1==bizagi.util.parseBoolean(e)&&t.editable?this.getLabel().addClass("ui-bizagi-required-vertical"):this.getLabel().removeClass("ui-bizagi-required-vertical")))},changeRequiredLabel:function(e){var t=this.properties;this._super(e),"tablet"==bizagi.detectDevice()&&"vertical"==t.displayType&&(1==bizagi.util.parseBoolean(e)&&t.editable?this.getLabel().addClass("ui-bizagi-required-vertical"):this.getLabel().removeClass("ui-bizagi-required-vertical"))},clearDisplayValue:function(){this.getControl().html("")}}),bizagi.rendering.render.extend("bizagi.rendering.combo",{},{initializeData:function(e){this._super(e);var t=this.properties;t.hasLocalData=t.data||!1,void 0===t.enableTyping&&(t.enableTyping=!0),t.value=t.value&&t.value.length>0?t.value[0]:t.defaultValue&&t.defaultValue.length>0?t.defaultValue[0]:null,t.value&&void 0===t.value.id&&(t.value=null),this.value=t.value,t.hasLocalData&&(t.data=this.complementData(t.data)),t.loadOnDemand=!1},renderControl:function(){var e={};if(this.isDependant&&this.properties&&"cascadingCombo"===this.properties.type&&this.getParentCombo){var t=this.getParentCombo().getValue();t&&t.id&&(e[this.Class.BA_ACTION_PARAMETER_PREFIX+"parent"]=t.id)}return this.renderCombo(e)},renderCombo:function(e){var t=this;if(t.properties.loadOnDemand)return t.renderComboTemplate();var i=new $.Deferred,n=t.getData(e);return $.when(n).done(function(e){var n=t.renderComboTemplate(e);t.properties.data=e,i.resolve(n)}).fail(function(e){var n=t.renderComboTemplate({});i.resolve(n)}),i.promise()},renderComboTemplate:function(e){var t=this.properties,i=this.renderFactory.getTemplate(this.getTemplateName()),n=bizagi.override.emptyLabelForCombo||this.getResource("render-combo-empty-selection"),r=t.value?"":n;return e=e||this.properties.data||{},"columnCombo"!==this.properties.type||""!==r||"object"!=typeof t.value||""!==t.value.id||""!==t.value.value&&t.value.value!==this.getResource("render-combo-empty-value")||(r=this.getResource("render-combo-empty-selection")),$.fasttmpl(i,$.extend(this.getTemplateParams(),{id:t.id,xpath:t.xpath,unique:bizagi.util.randomNumber(1e4,1e6),idPageCache:t.idPageCache,items:e,align:t.valueAlign,value:r}))},postRenderReadOnly:function(){var e=this;e._super();var t=e.getValue(),i=e.getControl();e.control&&e.control.parent()&&e.control.parent().addClass("ui-bizagi-noneditable-"+e.properties.displayType),t?(null!=t.value&&"boolean"==typeof t.value&&(1==bizagi.util.parseBoolean(t.value)?t.value=this.getResource("render-boolean-yes"):0==bizagi.util.parseBoolean(t.value)&&(t.value=this.getResource("render-boolean-no"))),e.getResource("render-combo-empty-value")==t.value||e.getResource("render-combo-empty-selection")==t.value?i.text(""):i.html("<label class='readonly-control'>"+e.formatItem(t.value)+"</label>")):i.text("")},getTemplateName:function(){return"combo"},showEmpty:function(){return!0},showCurrentData:function(){return!0},getData:function(e){var t=this,i=t.properties,n=new $.Deferred;return"execution"!=t.getMode()?t.getDummyData():(i.hasLocalData?n.resolve(i.data):i.remoteDataLoaded&&"cascadingCombo"!=i.type?n.resolve(i.data):t.dataService.multiaction().getData({url:i.dataUrl,xpath:i.xpath,idRender:i.id,xpathContext:i.xpathContext,idPageCache:i.idPageCache,extra:e,contexttype:t.properties.contexttype||null}).done(function(e){i.recalculate||(i.remoteDataLoaded=!0),i.data=t.complementData(e),n.resolve(i.data)}).fail(function(e){if("not-processed"!=e.type){var i=t.getFormContainer(),r=t.properties.displayName+": ";if("string"==typeof e)var a=JSON&&JSON.parse(e)||$.parseJSON(e);else a=e;r+=a.message,i.addValidationMessage(r),n.reject(e)}}),n.promise())},getDummyData:function(){var e=this.properties;return e.data?e.data:(e.data=[],e.data=this.complementData(e.data),e.data.push({id:"",value:"Item 1"}),e.data.push({id:"",value:"Item 2"}),e.data)},resetData:function(){var e=this.properties;e.hasLocalData=!1,e.data=null,e.remoteDataLoaded=!1},getDisplayValue:function(){if(this.combo&&this.combo.length>0)return this.getSelectedValue();var e="",t=this.getValue();return t&&(e=this.formatItem(t.value)),e},getSelectedValue:function(){},getTemplateParams:function(){return{}},formatItem:function(e){if(null!=e){if($.isArray(e)){for(var t=0,i=e.length;t<i;t++)null!=e[t]&&"boolean"==typeof e[t]&&(1==bizagi.util.parseBoolean(e[t])?e[t]=this.getResource("render-boolean-yes"):0==bizagi.util.parseBoolean(e[t])&&(e[t]=this.getResource("render-boolean-no")));return e.join(" - ")}return e}return""},collectData:function(e){var t=this.properties,i=t.xpath,n=this.getValue();this.controlValueIsChanged()&&(bizagi.util.isEmpty(i)||null==n||("object"!=typeof n||void 0!==n.id&&""!==n.id?e[t.xpath]=void 0!==n.id?n.id:"":e[t.xpath]=""))},controlValueIsChanged:function(){var e=this.properties,t=this.getValue(),i=e.originalValue,n=e.defaultValue,r=!0;return $.forceCollectData?r:(t=t&&void 0!==t.length?t[0]:t,i=i&&void 0!==i.length?i[0]:i,n=n&&void 0!==n.length?n[0]:n,t=t&&void 0!==t.id?t.id:t,i=i&&void 0!==i.id?i.id:i,r=void 0!==(n=n&&void 0!==n.id?n.id:n)?n!=i||n!=t:t!=i)},parseAdditionalValues:function(e){var t=this;return $.map(e,function(e){var i=e.value?t.formatItem(e.value):e,n={id:e.id,value:i};return e.hidden&&(n.hidden=!0),e})},complementData:function(e){var t=this,i=t.properties,n=!1;if($.each(e,function(e,r){void 0!==r.value&&null!==r.value?(r.value=t.formatItem(r.value),i.value&&r.id==i.value.id&&(n=!0)):r.value=""}),t.showEmpty()){for(var r=!1,a=0,o=e.length;a<o;a++)if(""==e[a].id){r=!0;break}if(!r){var s=bizagi.override.emptyLabelForCombo||bizagi.localization.getResource("render-combo-empty-value");e.unshift({id:"",value:s})}}return i.value&&!n&&t.showCurrentData()&&e.unshift({id:i.value.id,value:i.value.value,hidden:!0}),t.parseAdditionalValues(e)},hasValue:function(){var e=this.getValue();return!bizagi.util.isEmpty(e)&&("[object Object]"!==Object.prototype.toString.apply(e)||!bizagi.util.isEmpty(e.id)&&0!=e.id)},cleanData:function(){var e={id:"",label:""};this.setDisplayValue(e),this.setValue(e,!1)},beforeToRefresh:function(){this.column&&!this.column.comboData&&this.getData()},isExtraItem:function(){var e=(this.value||{}).value||"";return""===e||e===this.getResource("render-combo-empty-selection")||e==this.getResource("render-combo-empty-value")},escapeValue:function(e){return bizagi.util.isString(e)?e.replaceAll("<","&lt;").replaceAll(">","&gt;"):e}}),bizagi.rendering.render.extend("bizagi.rendering.check",{},{initializeData:function(e){this._super(e);var t=this.properties;t.value=void 0!==t.value?bizagi.util.parseBoolean(t.value):null},renderControl:function(){var e=this.renderFactory.getTemplate("check"),t=bizagi.util.randomNumber(100,1e7);return $.fasttmpl(e,{id:t})},renderReadOnly:function(){return this.renderControl()},postRender:function(){var e=this.getControl();this._super(),this.input=e.find("label")},getDisplayValue:function(){var e=this.getValue();return 1==bizagi.util.parseBoolean(e)?this.getResource("render-boolean-yes"):0==bizagi.util.parseBoolean(e)?this.getResource("render-boolean-no"):""},hasValue:function(){var e=this.getValue();return!bizagi.util.isEmpty(e)&&(!1!==bizagi.util.parseBoolean(e)||!this.properties.required)}}),bizagi.rendering.render.extend("bizagi.rendering.number",{},{initializeData:function(e){this._super(e);var t=this.properties,i=this.getResource("numericFormat");t.allowDecimals=void 0!==t.allowDecimals?bizagi.util.parseBoolean(t.allowDecimals):this.getDefaultAllowDecimals(t.dataType),t.numDecimals=t.allowDecimals?t.numDecimals?t.numDecimals:"undefined"!=typeof BIZAGI_DEFAULT_CURRENCY_INFO?BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits:2:0,t.symbol="",t.positiveFormat=i.positiveFormat,t.negativeFormat=i.negativeFormat,t.decimalSymbol="undefined"!=typeof BIZAGI_DEFAULT_CURRENCY_INFO?BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator:i.decimalSymbol,t.digitGroupSymbol="undefined"!=typeof BIZAGI_DEFAULT_CURRENCY_INFO?BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator:i.digitGroupSymbol,t.groupDigits=this.setGroupDigits(),t.colorize=t.colorizeOnNegative||!1,t.dataTypeMinValue=this.calculateMinValue(t.dataType),t.dataTypeMaxValue=this.calculateMaxValue(t.dataType)},renderControl:function(){var e=this.renderFactory.getTemplate("number"),t=bizagi.util.detectDevice(),i={};return"desktop"!==t&&(i={type:-1!==t.indexOf("android")?"tel":"text"}),$.fasttmpl(e,i)},postRender:function(){this._super();var e=this.getControl(),t=this.properties;this.numericInput=e.find("input"),this.numericInput.numeric(this.properties.decimalSymbol),this.attachFormatCurrency(),"double"==t.retype&&this.attachRetypeDouble()},removeValidations:function(){(this.getFormContainer().parent||this.getFormContainer()).clearValidationMessages()},attachRetypeDouble:function(){},attachFormatCurrency:function(){var self=this,properties=self.properties,message=bizagi.localization.getResource("render-number-retype-fail"),control=self.getControl();self.isValidRender=self.isValidRender||!0,null==$.formatCurrency.regions[bizagi.language]&&($.formatCurrency.regions[bizagi.language]=this.getResource("numericFormat")),self.numericInput.blur(function(){void 0===self.getFormContainer().validationController&&(self.getFormContainer().validationController=new bizagi.command.controllers.validation(self.getFormContainer(),self.validations));var e=self.getFormContainer().validationController||self.getFormContainer().parent.validationController,t=".",i=",";"undefined"==typeof BIZAGI_DEFAULT_CURRENCY_INFO?(t=self.getResource("numericFormat").decimalSymbol||".",i=self.getResource("numericFormat").digitGroupSymbol||","):(t=BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator,i=BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator);var n=self.getMinValue(),r=self.getMaxValue();properties.percentage&&self.numericInput.val(self.numericInput.val().replace("%",""));var a=self.numericInput.val();a=(a=","==t?a.replace(/\,0+$/,""):a.replace(/\.0+$/,"")).replace(properties.symbol,""),-1!=(a=bizagi.util.replaceAll(a,i,"")).toString().indexOf(t)&&(","==t&&(a=a.replace(/([0-9]+(\,[0-9]+[1-9])?)(\,?0+$)/,"$1")),"."==t&&(a=a.replace(/([0-9]+(\.[0-9]+[1-9])?)(\.?0+$)/,"$1"))),null!=a&&a.length>0&&self.numericInput.val(a);var o=a.replace(/[^0-9]+/g,"").length,s=self.properties.xpath,l=self.numericInput.val();if(null!=self.isInvalidFormat&&1==self.isInvalidFormat||""!=a&&-1!=["$","Â£","â¬","Â¥",properties.symbol].indexOf(a))return self.setValue(""),self.getControl().find("input").val(""),void self.numericInput.val("");if(""!=bizagi.util.trim(a)){var u=parseFloat(a.replace(",","."));if(isNaN(u)&&(u=self.numericInput.asNumber()),message=void 0!==n&&null!=n&&u<n?bizagi.localization.getResource("render-numeric-minimum-validation").replaceAll("#label#",properties.displayName+" ("+l+")").replaceAll("#minValue#",n.toString()):null!=r&&u>r?bizagi.localization.getResource("render-numeric-maximum-validation").replaceAll("#label#",properties.displayName+" ("+l+")").replaceAll("#maxValue#",r.toString()):message+" "+l,null!=n&&u<n||null!=r&&u>r||10==self.properties.dataType&&o>15||1==self.properties.dataType&&o>19||11==self.properties.dataType&&o>7||11==self.properties.dataType&&o>7||l.match(/[^$Â£â¬Â¥,-.()\d]/)){if(void 0!==e&&null!=e){self.removeValidations();var c=message;-1===c.indexOf(l)&&(c=message+" "+l),e.showValidationMessage(c,s),self.isValidRender=!1,self.isValidRenderMessage=c}message=message.replace(l,"")}else self.isValidRender=!0,self.isValidRenderMessage="",this.value.toString().length>0&&!properties.allowDecimals&&!properties.groupDigits?(this.value=this.value.toString().replace(/^0+/,""),properties.symbol.length>0&&(this.value=this.value.toString().replace(properties.symbol+"0",properties.symbol)),this.value=this.value.toString().replace(/^0+/,""),0==this.value.replaceAll("0","").length?this.value=properties.symbol+"0":this.value.toString()==parseInt(this.value)&&(this.value=properties.symbol+this.value)):"money"!==self.properties.type&&"number"!==self.properties.type&&"columnMoney"!==self.properties.type&&"columnNumber"!==self.properties.type||(this.value=this.value.toString().replace(/^0+/,""),""===this.value&&(this.value=0)),self.executeFormatCurrencyPlugin(),self.setValue(self.numericInput.asNumber({symbol:properties.symbol,positiveFormat:properties.positiveFormat,negativeFormat:properties.negativeFormat,decimalSymbol:properties.decimalSymbol,digitGroupSymbol:properties.digitGroupSymbol,groupDigits:properties.groupDigits})),properties.percentage&&self.numericInput&&-1==self.numericInput.val().indexOf("%")&&self.numericInput.val(self.numericInput.val()+"%"),message=message.replace(l,"")}else self.setValue("")}).bind("paste",function(e){try{var tmpData=bizagi.util.isIE()||bizagi.util.isIE11()?window.clipboardData.getData("text"):e.originalEvent.clipboardData.getData("Text"),totalVal="/[^0-9";properties.decimalSymbol.length>0&&(totalVal+=properties.decimalSymbol),8==properties.dataType&&(properties.symbol.length>0&&(totalVal+=properties.symbol),properties.digitGroupSymbol.length>0&&(totalVal+=properties.digitGroupSymbol)),totalVal+="\\-\\s]/gi";try{tmpData.replace(eval(totalVal),"").length!=tmpData.length&&e.preventDefault()}catch(e){}}catch(e){bizagi.log("Error to pasting content"),self.isInvalidFormat=!0}}).keydown(function(e){self.previousValue=this.value;var t=(e=window.event&&window.event.preventDefault?window.event:e).charCode||e.keyCode;if("undefined"!=typeof BIZAGI_DEFAULT_CURRENCY_INFO&&0==BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits&&(properties.allowDecimals=!1),(properties.dataType<5||8==properties.dataType&&0==properties.allowDecimals)&&(188!=t&&190!=t&&110!=t||e.preventDefault()),this.value&&void 0!==e&&this.value.length>0&&(8==properties.dataType||10==properties.dataType))if(t>47&&t<58){self.formatTimeout&&clearTimeout(self.formatTimeout);var i=this.value+"";properties.digitGroupSymbol&&properties.digitGroupSymbol.length>0&&(i=i.replaceAll(properties.digitGroupSymbol,"")),properties.symbol.length>0&&(i=i.replaceAll(properties.symbol,"")),i=$.trim(i),properties.decimalSymbol&&properties.decimalSymbol.length>0&&(i=i.replaceAll(properties.decimalSymbol,".")),10*i>properties.dataTypeMaxValue&&e.preventDefault()}else 109!=t&&189!=t||(this.value=properties.symbol+"-"+this.value.replace(properties.symbol,""))}).keyup(function(e){var t=(e=window.event||e).charCode||e.keyCode;if(void 0!==e)switch(t){case 16:case 17:case 13:case 18:break;case 27:this.value=""}}).keypress(function(e){var t=(e=window.event&&window.event.preventDefault?window.event:e).charCode||e.keyCode;if(void 0!==e){35==t||37==t||39==t?e.preventDefault():8!=properties.dataType&&36==t&&e.preventDefault();var i=String.fromCharCode(t);!1===properties.allowDecimals&&0===properties.numDecimals&&i===properties.decimalSymbol&&e.preventDefault()}})},executeFormatCurrencyPlugin:function(){var e=this.properties;if(this.numericInput&&this.numericInput.formatCurrency({symbol:e.symbol,positiveFormat:e.positiveFormat,negativeFormat:e.negativeFormat,decimalSymbol:e.decimalSymbol,digitGroupSymbol:e.digitGroupSymbol,groupDigits:e.groupDigits,roundToDecimalPlace:e.numDecimals,colorize:e.colorize}),8!=e.dataType&&!0===bizagi.override.removeTrailingZeros){var t=this.numericInput.val(),i=!0;-1!=t.indexOf(")")&&(i=!1,t=t.replace("(","").replace(")",""));var n=new RegExp("("+e.decimalSymbol+"\\d*?[1-9])0+$","g");t=t.replace(n,"$1"),n=new RegExp("\\"+e.decimalSymbol+"0+$","g"),t=t.replace(n,""),this.numericInput.val(t),i||this.numericInput.val("("+t+")")}e.percentage&&this.numericInput.val(this.numericInput.val()+"%")},getDisplayValue:function(){var e=this.properties,t=this.getControl(),i=void 0!==this.getValue()?this.getValue():$("input",t).val()||"",n=$("<label/>").html(i);if(n.formatCurrency({symbol:e.symbol,positiveFormat:e.positiveFormat,negativeFormat:e.negativeFormat,decimalSymbol:e.decimalSymbol,digitGroupSymbol:e.digitGroupSymbol,groupDigits:e.groupDigits,roundToDecimalPlace:e.numDecimals,colorize:e.colorize}),e.percentage&&(n=$("<label/>").html(n.text()+"%")),0==e.editable&&8!=e.dataType&&!0===bizagi.override.removeTrailingZeros){var r=!0;-1!=(i=n.text()).toString().indexOf(")")&&(r=!1,i=i.replace("(","").replace(")",""));var a=new RegExp("("+e.decimalSymbol+"\\d*?[1-9])0+$","g");return i=i.replace(a,"$1"),a=new RegExp("\\"+e.decimalSymbol+"0+$","g"),i=i.replace(a,""),r||(i="("+i+")"),i}return n.text()},isValid:function(e){var t,i=this.properties,n=this._super(e),r=this.getValue(),a=(this.getDisplayValue(),this.getMinValue()),o=this.getMaxValue();if("string"==typeof r&&""!=r&&(r=Number(r)),this.hasValue()&&(bizagi.util.isEmpty(a)||r<a&&(t=this.getResource("render-numeric-minimum-validation").replaceAll("#label#",i.displayName.toString()+" ("+r+")").replaceAll("#minValue#",a.toString()),e.push({xpath:i.xpath,message:t}),n=!1),bizagi.util.isEmpty(o)||r>o&&(t=this.getResource("render-numeric-maximum-validation").replaceAll("#label#",i.displayName.toString()+" ("+r+")").replaceAll("#maxValue#",o.toString()),e.push({xpath:i.xpath,message:t}),n=!1)),!(!1!==this.isValidRender||n&&bizagi.util.isMobileDevice())){n=!1;var s=this.isValidRenderMessage?this.isValidRenderMessage:"error";e.push({xpath:i.xpath,message:s})}return n},getMinValue:function(){var e=this.properties.minValue;return null!=e?e:this.properties.dataTypeMinValue},getMaxValue:function(){var e=this.properties.maxValue;return null!=e?e:this.properties.dataTypeMaxValue},getDefaultAllowDecimals:function(e){if(e){if(1==e||2==e||3==e||4==e||7==e)return!1;if(6==e||8==e||10==e||11==e)return!0}return!1},getDefaultGroupDigits:function(e){if(e){if(1==e||2==e||3==e||4==e||7==e)return!1;if(6==e||8==e||10==e||11==e)return!0}return!1},setGroupDigits:function(){return void 0!==this.properties.thousands?!!this.properties.digitGroupSymbol&&bizagi.util.parseBoolean(this.properties.thousands):!!this.properties.digitGroupSymbol&&this.getDefaultGroupDigits(this.properties.dataType)},calculateMinValue:function(e){return 8==e||10==e?-922337203685477:4==e?0:3==e?-32768:2==e?-2147483648:1==e?-999999999999999:null},calculateMaxValue:function(e){return 8==e||10==e?922337203685477:4==e?255:3==e?32767:2==e?2147483647:1==e?999999999999999:null},changeMinValue:function(e){var t=Number(e);this.properties.minValue=this.properties.dataTypeMinValue=Number.isNaN(t)?this.calculateMinValue(this.properties.dataType):t},changeMaxValue:function(e){var t=Number(e);this.properties.maxValue=this.properties.dataTypeMaxValue=Number.isNaN(t)?this.calculateMaxValue(this.properties.dataType):t}}),bizagi.rendering.render.extend("bizagi.rendering.numberScientificNotation",{initializeData:function(e){this._super(e),this.properties.decimalSymbol="undefined"!=typeof BIZAGI_DEFAULT_CURRENCY_INFO?BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator:format.decimalSymbol},renderControl:function(){var e=this.renderFactory.getTemplate("numberScientificNotation");return $.fasttmpl(e,{})},postRender:function(){var e=this.getControl();this.numericInput=e.find("input"),this.numericInput.numericSN(this.properties.decimalSymbol)},getDisplayValue:function(){return this.getValue().replace(".",this.properties.decimalSymbol)},setValue:function(e){e=(e||"").toString().replace(this.properties.decimalSymbol,"."),this._super(e)},controlValueIsChanged:function(){var e=this.properties,t=this.getValue()||"",i=e.originalValue||"";return!!$.forceCollectData||i.toLowerCase()!=t.toLowerCase()}}),bizagi.rendering.render.extend("bizagi.rendering.date",{},{initializeData:function(e){this._super(e);var t=this.properties,i=this.getResource("dateFormat"),n=this.getResource("timeFormat");if(t.displayValue="",t.showTime=void 0!==t.showTime&&bizagi.util.parseBoolean(t.showTime),t.dateFormat=t.dateFormat||i,t.timeFormat=t.timeFormat||n,t.fullFormat=t.dateFormat,t.showTime&&-1===t.fullFormat.search(/[h|H]+/gi)&&(t.fullFormat=t.fullFormat+" "+t.timeFormat),t.value){var r=bizagi.util.dateFormatter.getDateFromInvariant(t.value,t.showTime);if(0!=r){this.value=t.value;var a=bizagi.localization.getResource("datePickerRegional");t.displayValue=bizagi.util.dateFormatter.formatDate(r,t.fullFormat,a)}else this.value=null}},renderControl:function(){var e=this.properties,t=this.renderFactory.getTemplate("date"),i=e.dateFormat.substring(0,e.dateFormat.indexOf(":")).lastIndexOf(" ");return $.fasttmpl(t,{showTime:e.showTime,value:e.value,dateFormat:i>0?e.dateFormat.substring(0,i):e.dateFormat,timeFormat:e.showTime&&i>0?e.dateFormat.substring(i):"",rtl:"rtl"==e.orientation})},configureHandlers:function(e,t){var i=this,n=i.properties,r=i.getDateControl(),a=i.getTimeControl();n.mask&&r.mask({mask:n.mask}),r.bind("change",function(){i.onChangeHandler()}),n.showTime&&a.bind("change",function(e,t){i.updatingTime?delete i.updatingTime:i.onChangeHandler(t)})},onChangeHandler:function(){},getDisplayValue:function(e){var t,i=this.properties;if(!i.displayValue&&e){var n=bizagi.util.dateFormatter.getDateFromInvariant(e,i.showTime),r=bizagi.localization.getResource("datePickerRegional");t=bizagi.util.dateFormatter.formatDate(n,i.fullFormat,r)}else t="";return i.displayValue||t||""},collectData:function(e){var t=this.properties,i=t.xpath,n=this.getValue();if(this.controlValueIsChanged()&&!bizagi.util.isEmpty(i))if(bizagi.util.isEmpty(n))""===n&&(e[t.xpath]="");else{var r=bizagi.util.dateFormatter.getDateFromInvariant(n,t.showTime);void 0!==r&&0!==r&&(t.showTime||r.setHours(0,0,0,0),e[t.xpath]=bizagi.util.dateFormatter.formatInvariant(r,!0))}},getDateControl:function(){},getTimeControl:function(){},isValid:function(e){var t,i=this.properties,n=this._super(e),r=this.getValue();if(r&&(!0===bizagi.util.parseBoolean(i.editable)&&0!=(r=bizagi.util.dateFormatter.getDateFromInvariant(r,i.showTime)))){if(r.setSeconds(0),r.setMilliseconds(0),i.minValue&&("string"==typeof i.minValue||"number"==typeof i.minValue)){var a="string"==typeof i.minValue?bizagi.util.dateFormatter.getDateFromInvariant(i.minValue,i.showTime):new Date(i.minValue);a.setSeconds(0),a.setMilliseconds(0),r<a&&(t=this.getResource("render-date-minimum-validation").replaceAll("#label#",i.displayName).replaceAll("#minValue#",bizagi.util.dateFormatter.formatDate(a,i.fullFormat)),e.push({xpath:i.xpath,message:t}),n=!1)}if(i.maxValue&&("string"==typeof i.maxValue||"number"==typeof i.maxValue)){var o="string"==typeof i.maxValue?bizagi.util.dateFormatter.getDateFromInvariant(i.maxValue,i.showTime):new Date(i.maxValue);o.setSeconds(0),o.setMilliseconds(0),r>o&&(t=this.getResource("render-date-maximum-validation").replaceAll("#label#",i.displayName).replaceAll("#maxValue#",bizagi.util.dateFormatter.formatDate(o,i.fullFormat)),e.push({xpath:i.xpath,message:t}),n=!1)}}if(i.showTime&&!0===bizagi.util.parseBoolean(i.editable)&&i.required&&this.hasValue()){var s=this.getDateControl(),l=this.getTimeControl();if(s.length>0&&l.length>0&&s.val().length>0&&0==l.val().length)return t=this.getResource("render-required-text").replaceAll("#label#",i.displayName),e.push({xpath:i.xpath,message:t}),!1}return n}}),bizagi.rendering.render.extend("bizagi.rendering.extendedText",{},{initializeData:function(e){this._super(e);var t=this.properties;t.regularExpressionExpression&&(t.regularExpression={expression:t.regularExpressionExpression,message:t.regularExpressionMessage||this.getResource("render-text-regular-expression-default-message")})},renderControl:function(){var e=this.renderFactory.getTemplate("extendedText");return $.fasttmpl(e,{isEmptyField:void 0===this.properties.value})},postRender:function(){this._super();var e=this.getControl(),t=this.properties;this.textarea=e.find("textarea"),this.textarea?this.textarea.css({resize:"both"}):this.textarea.css({resize:"none"}),"double"==t.retype&&this.attachRetypeDouble()},attachRetypeDouble:function(){},configureHandlers:function(){var e=this,t=e.properties;t.maxLength&&e.textarea.prop("maxlength",t.maxLength),t.maxLines?e.textarea.prop("rows",t.maxLines):e.textarea.prop("rows",6),e.textarea.bind("change",function(){e.getValue();e.setValue(e.textarea.val());var i=[];if("duplicate"!=t.retype)if(e.isValid(i)||void 0===t.regularExpression)e.setValue(e.textarea.val(),!0);else{var n=i[0].message;bizagi.showMessageBox(n,"Bizagi","error")}}),e.textarea.bind("blur",function(){e.setValue(e.textarea.val())})},isValid:function(e){var t,i=this.properties,n=this._super(e),r=this.getValue(),a=bizagi.util.isOfflineForm({context:this});return i.regularExpression?(a&&bizagi.util.isTabletDevice()&&(r="object"==typeof r&&r.value?r.value:r),r&&(r.match(new RegExp(".*?(<|\\u003C)(.+?)(>|\\u003E)(.?)|eval\\(|eval\\u0028","g"))||!r.match(new RegExp(i.regularExpression.expression))&&this.properties&&"userName"===this.properties.xpath)?(t=i.regularExpression.message,e.push({xpath:i.xpath,message:t}),n=!1):!r||!r.match(new RegExp(".*?(<|\\u003C)(.+?)(>|\\u003E)(.?)|eval\\(|eval\\u0028","g"))&&r.match(new RegExp(i.regularExpression.expression))||(t=i.regularExpression.message,e.push({xpath:i.xpath,message:t}),n=!1)):r&&r.match(new RegExp(".*?eval\\(","g"))&&r.match(new RegExp(".*?eval\\u0028","g"))&&i.editable&&(t=this.getResource("render-text-regular-expression-default-message"),e.push({xpath:i.xpath,message:t}),n=!1),n},setDisplayValue:function(e){var t=this.getControl(),i=this.getDisplayValue(),n=bizagi.util.decodeURI(e),r=bizagi.util.decodeURI(i);if(0==this.properties.editable&&"string"==typeof e){var a=r.replaceAll("&","&amp;");a=(a=(a=(a=a.replaceAll("<","&lt;").replaceAll(">","&gt;")).replaceAll('"',"&#34;").replaceAll("'","&#39;").replaceAll("/","&#47;")).replaceAll("\\n","<br/>")).replaceAll("\n","<br/>"),t.html(a)}this.setValue(n,!1)},collectData:function(e){this.properties;this._super(e)},setValue:function(e){var t=bizagi.util.decodeURI(e);this._super(t)}}),bizagi.rendering.render.extend("bizagi.rendering.grid",{},{initializeData:function(e){var t=this;t.originalData=bizagi.clone(e.properties),this._super(e);var i,n,r=this.properties;t.initProperties(),t.columns=[],t.columnsIds=[],t.enabledChecks={},t.exclusiveChanges={},t.originalEnabledChecks=[],$.each(e.elements,function(a,o){var s=o.render.properties;if(s.groupBy&&(r.groupBy=s.xpath||"",r.allowGrouping=!bizagi.util.isEmpty(r.groupBy)),"columnLabel"===s.type&&t.spliceRowData(e.properties.data,a+1),"columnBoolean"===s.type&&s.isExclusive){s.xpath;if(e.properties.data){t.enabledChecks[s.xpath]=[];for(var l=0;l<e.properties.data.rows.length;l++){var u=e.properties.data.rows[l],c=u[a+1];c&&(t.originalEnabledChecks.push(u[0]),t.enabledChecks[s.xpath].push([u[0],c]))}}}t.properties.inlineEdit||(o.render.properties.editable=!1);var d=t.renderFactory.getColumn({type:s.type,data:o.render,parent:t,singleInstance:r.singleInstance});t.columns.push(d),t.columnsIds.push(o.render.properties.id),s.editable&&(i=!0),s.totalize&&s.totalize.operation&&(n=!0,s.totalize.format=s.totalize.format||{},s.totalize.format.bold=void 0===s.totalize.format.bold||s.totalize.format.bold)}),"rtl"==r.orientation&&(t.columns=t.columns.reverse()),r.inlineEdit&&!i&&(r.inlineEdit=!1,r.allowEdit=!1),n&&(r.showSummary=!0,r.rowsPerPage=0)},initProperties:function(){var e=this,t=e.getFormContainer(),i=e.properties;i.editable=bizagi.util.parseBoolean(i.editable)||!1,i.allowEdit=null==bizagi.util.parseBoolean(i.allowEdit)||bizagi.util.parseBoolean(i.allowEdit),i.inlineEdit=null==bizagi.util.parseBoolean(i.inlineEdit)||bizagi.util.parseBoolean(i.inlineEdit),i.withEditForm=null!=bizagi.util.parseBoolean(i.withEditForm)&&bizagi.util.parseBoolean(i.withEditForm),i.allowAdd=null==bizagi.util.parseBoolean(i.allowAdd)||bizagi.util.parseBoolean(i.allowAdd),i.inlineAdd=!!i.allowAdd&&(null==bizagi.util.parseBoolean(i.inlineAdd)||bizagi.util.parseBoolean(i.inlineAdd)),i.allowDelete=null==bizagi.util.parseBoolean(i.allowDelete)||bizagi.util.parseBoolean(i.allowDelete),i.allowDetail=null!=bizagi.util.parseBoolean(i.allowDetail)&&bizagi.util.parseBoolean(i.allowDetail),i.keyColumn="",i.data=i.data||null,i.displayType="value",i.skipInitialLoad=i.skipInitialLoad||!1,i.allowMore=bizagi.util.parseBoolean(i.allowMore)||!1,i.allowFilter=bizagi.util.parseBoolean(i.allowFilter)||!1,i.allowGrouping=!1,i.groupBy="",i.groupSummary=i.groupSummary||null,i.groupText=this.getResource("render-grid-group-text"),i.groupCollapsed=bizagi.util.parseBoolean(i.groupCollapsed)||!1,i.groupOrder=i.groupOrder||"asc",i.formShowMode=bizagi.util.parseBoolean(i.formShowMode)||"popup",i.floatingHeader=bizagi.util.parseBoolean(i.floatingHeader)||!1,i.sortBy=i.sortBy?i.sortBy:i.data&&i.data.sort?i.data.sort:i.keyColumn,i.sortOrder=void 0!==i.sortOrder&&null!==i.sortOrder?"True"===i.sortOrder?"asc":"desc":i.data&&i.data.order?i.data.order:"asc",i.sort=i.sortBy+" "+i.sortOrder,i.rowsPerPage=i.allowGrouping?1e3:i.rowsPerPage||20,i.page=1,i.records=0,i.totalPages=0,i.addLabel=i.addLabel||this.getResource("render-grid-add-label")+i.displayName,i.editLabel=i.editLabel||$.trim(this.getResource("render-grid-edit-label"))+" "+i.displayName,i.deleteLabel=i.deleteLabel||this.getResource("render-ecm-confirm-bt-delete")+" "+i.displayName,i.exportOptionsLabel=i.exportOptionsLabel||this.getResource("render-grid-export-options-label")+i.displayName,i.detailLabel=i.detailLabel||this.getResource("render-collection-navigator-details-form"),i.tableCssClass=i.cssClass||"",i.alreadySaved=!1,"entity"!=i.contexttype&&(i.contexttype="function"==typeof e.parent.getContextType?e.parent.getContextType():"");try{(e.parent&&"boolean"==typeof e.parent.properties.editable&&!e.parent.properties.editable||!i.editable)&&(i.allowAdd=!1,i.allowEdit=!1,i.allowDelete=!1,i.inlineEdit=!1,i.inlineAdd=!1,i.editable=!1)}catch(e){}i.allowEdit&&(i.inlineEdit||i.withEditForm)||(i.editable=!1),i.labelWidth=0,i.valueWidth="100%",i.overrideGetRemoteData=i.overrideGetRemoteData||void 0,i.singleInstance=!!bizagi.util.isEmpty(i.singleInstance)||i.singleInstance,i.contextType=t.params&&t.params.data&&t.params.data.contextType?t.params.data.contextType:null,e.changes={},e.cellOverrides={},e.isRTL()&&null!=i.data&&(i.data.rows=e.changeOrderData(i.data.rows))},hasValue:function(){return this.properties.data&&this.properties.data.rows.length>0},isRTL:function(){var e=this.properties;return!e||"string"==typeof e.orientation&&"RTL"==e.orientation.toUpperCase()},changeOrderData:function(e){var t,i=[],n=e||[];return $.each(n,function(e,r){t=r.shift(),(i=r.reverse()).unshift(t),n[e]=i}),n},removeRemainingColumns:function(e,t){var i=e||[],n=0;return i.length>0&&(n=i[0].length-t-1),n>0&&$.each(i,function(e,t){for(var i=0;i<n;i++)t.pop()}),i},getColumn:function(e){var t=null;return $.each(this.columns,function(i,n){n.properties.xpath!=e&&n.properties.id!=e||(t=n)}),t},getColumnType:function(e){var t=this.columnsIds.indexOf(e);return-1!=t?this.columns[t].properties.type:null},renderControl:function(){var e=this.properties,t=new $.Deferred;"execution"!=this.getMode()&&(e.data=this.getDummyData());var i=this.getGridTemplate(),n=this.applyTemplate(i),r=[];return $.each(this.columns,function(e,t){var i=t.initialize();i&&r.push(i)}),jQuery.when.apply($,r).done(function(){t.resolve(n)}),t.promise()},postRender:function(){var e=this.getControl();this._super(),e.addClass("ui-bizagi-render-grid-container").addClass("ui-bizagi-render-display-block")},getGridTemplate:function(){return this.renderFactory.getTemplate("grid")},applyTemplate:function(e){var t=this.properties;return orientation=this.properties.orientation,$.fasttmpl(e,{id:bizagi.util.encodeXpath(t.xpath),displayName:bizagi.util.encodeXpath(t.displayName),allowAdd:t.allowAdd,addLabel:t.addLabel})},renderReadOnly:function(){this.properties;return this.renderControl()},getRemoteData:function(e){var t=this,i=t.properties;return e=e||{},$.extend(e,{url:i.dataUrl,xpath:i.xpath,idRender:i.id,xpathContext:i.xpathContext,contexttype:i.contextType,idPageCache:i.idPageCache,sort:i.sortBy,order:i.sortType,page:i.page,rows:i.rowsPerPage,searchFilter:i.searchFilter,orientation:i.orientation||"ltr"}),i.overrideGetRemoteData?i.overrideGetRemoteData(e):t.dataService.multiaction().getGridData(e).then(function(e){return t.originalData=t.originalData||{},t.originalData.data=bizagi.clone(e),i.page=e.page,i.records=e.records,i.totalPages=e.totalPages,e})},spliceRowData:function(e,t){"execution"==this.getMode()&&e&&e.rows&&$.each(e.rows,function(i,n){var r=t||e.rows[i].length;e.rows[i].splice(r,0,"")})},spliceRowDataVisible:function(e,t){"execution"==this.getMode()&&e&&e.visible&&$.each(e.visible,function(i,n){var r=t||e.visible[i].length;e.visible[i].splice(r,0,!0)})},spliceRowDataEditable:function(e,t){"execution"==this.getMode()&&e&&e.editable&&$.each(e.editable,function(i,n){var r=t||e.editable[i].length;e.editable[i].splice(r,0,!0)})},getDummyData:function(){var e=this.properties;if(e.data)return e.data;for(var t=["1"],i=0;i<this.columns.length;i++)t.push("");return{page:1,total:1,records:1,rows:[t]}},submitEditRequest:function(e){var t=this.properties,i=t.xpath+this.buildCellXpathFilter(e);return this.dataService.editGridRecord({url:t.editUrl,idRender:t.id,xpath:i,xpathContext:t.xpathContext,idPageCache:t.idPageCache,contexttype:t.contextType})},submitSaveRequest:function(e,t){var i=this,n=i.properties,r=null;t.deferreds&&(r=$.when.apply($,t.deferreds),delete t.deferreds);var a=n.xpathContext.length>0?n.xpathContext+"."+n.xpath+i.buildCellXpathFilter(e):n.xpath+i.buildCellXpathFilter(e);return $.when(r).pipe(function(){return i.startLoading(),i.dataService.saveGridRecord({url:n.saveUrl,idRender:n.id,xpath:n.xpath,xpathContext:a,submitData:t,contexttype:n.contextType,disableServerGridValidations:t.disableServerGridValidations||!1}).pipe(function(e){return i.endLoading(),e}).fail(function(e){var t=i.getFormContainer(),n=e.responseText?e.responseText:"string"==typeof e?e:e.toString();if("string"==typeof n)try{n=JSON.parse(n).message}catch(e){n=(n=n.match(/"message":(.*)",/)[0]).substr(11,n.length-13)}else n.message||(n=e);t.validateForm(),t.clearValidationMessages(),t.addValidationMessage(n)})})},submitDeleteRequest:function(e){var t=this,i=t.properties,n=i.xpath+t.buildCellXpathFilter(e);return t.dataService.deleteGridRecord({url:i.deleteUrl,idRender:i.id,xpath:n,xpathContext:i.xpathContext,idPageCache:i.idPageCache,contexttype:i.contextType}).pipe(function(e){if("validationMessages"==e.type){var i=t.getFormContainer(),n=e.messages.join(" ");i.failHandler({message:n})}return e})},submitAddRequest:function(){var e=this.properties;return this.dataService.addGridRecord({url:e.addUrl,idRender:e.id,xpath:e.xpath,xpathContext:e.xpathContext,contexttype:e.contextType,idPageCache:e.idPageCache}).pipe(function(e){return e.idEntity}).promise()},submitRollbackRequest:function(e){var t=this.properties;return this.dataService.rollbackGridAction({url:t.rollbackUrl,idRender:t.id,xpath:t.xpath,xpathContext:t.xpathContext,idPageCache:e?e.idPageCache:t.idPageCache,contexttype:this.properties.contexttype||""})},collectGridChange:function(e){var t=(e=e||{}).id,i=e.xpath,n=e.value,r=void 0===e.trigger||e.trigger,a=e.pressed||!1;this.changes[t]=this.changes[t]||{},this.changes[t][i]=n,r&&this.triggerRenderChange({key:t,column:i,pressed:a})},configureColumnSubmitOnChange:function(e){var t=this,i=t.properties,n={commands:[{xpath:i.xpath,command:"submit-value",argument:"all"}],conditions:{operator:"and",expressions:[{simple:{operator:"cell-change",xpath:i.xpath+"[]."+e,argumentType:"text",argument:e}}]},dependencies:[i.xpath]};$.when(t.ready()).done(function(){t.getFormContainer().addSubmitAction(e,n)})},collectData:function(e){var t=this,i=t.properties,n=[];for(var r in t.changes){if("summary"!=r)for(var a in t.changes[r])if(t.canColumnBeSent(r,a)){var o=i.xpath+t.buildCellXpathFilter(r)+"."+a,s=(i.xpath,t.buildCellXpathFilter(r),a.substr(a.lastIndexOf(".")+1,a.length),t.changes[r][a]);e[o]=s}n.push(r)}if(t.exclusiveChanges)for(var r in t.exclusiveChanges){var l=t.exclusiveChanges[r],u=t.enabledChecks[r];if(l&&u){for(var c=0;c<u.length;c++){e[i.xpath+t.buildCellXpathFilter(u[c][0])+"."+r]=!1}e[i.xpath+t.buildCellXpathFilter(l.key)+"."+l.xpath]=l.value}}$.each(n,function(e,i){delete t.changes[i]})},hasChanged:function(e){return!$.isEmptyObject(this.changes)&&(e.push(!0),!0)},canColumnBeSent:function(e,t){var i,n;for(i in this.columns)if(this.columns.hasOwnProperty(i)){var r=this.columns[i];if("columnUserfield"!==r.properties.type){if(r.properties.xpath==t){var a=this.getCellOverride(e,r.columnIndex-1);return r.canBeSent(e,a)}}else for(n in r.properties)if(r.properties.hasOwnProperty(n)&&"[object String]"===Object.prototype.toString.apply(r.properties[n])&&r.properties[n].substr(r.properties[n].lastIndexOf(".")+1)===t)return!0}return!1},canBeSent:function(){var e=this.properties;return!(bizagi.util.parseBoolean(e.displayOnly)||!1||!e.inlineEdit&&!e.inlineAdd&&$.isEmptyObject(this.changes))},getCellValue:function(e,t){for(var i=this.properties.data.rows,n=0;n<i.length;n++)if(i[n][0]==e)for(var r=0;r<this.columns.length;r++){if(this.columns[r].properties.xpath==t)return i[n][r+1]}return null},getCellCurrentValue:function(e,t){var i=this.getControlCell(e,t);return i&&"function"==typeof i.getValue?i.getValue():null},getControlCell:function(e,t){var i=null;if(void 0!==this.columns)for(var n=0;n<this.columns.length;n++)if(this.columns[n].properties.xpath==t||this.columns[n].properties.id==t){i=this.columns[n].getDecorated(e);break}return i},changeRequired:function(e){this.properties.required=e,this.changeRequiredLabel(e)},changeRequiredLabel:function(e){var t=this.getControl();t.length>0&&("execution"!==this.getMode()?1==bizagi.util.parseBoolean(e)&&this.properties.editable?t.addClass("grid-control-required"):t.removeClass("grid-control-required"):1==bizagi.util.parseBoolean(e)&&!this.hasValue()&&this.properties.editable?t.addClass("grid-control-required"):t.removeClass("grid-control-required")),this.triggerRenderValidate()},refresh:function(){},setError:function(e,t){},changeCellBackgroundColor:function(e,t,i){},changeCellColor:function(e,t,i){},changeCellVisibility:function(e,t,i){},changeCellEditability:function(e,t,i){},changeCellRequired:function(e,t,i){},changeCellProperties:function(e,t,i){},changeCellMaxValue:function(e,t,i){},changeCellMinValue:function(e,t,i){},cleanCellData:function(e,t){},changeEditability:function(e){var t=this,i=(t.properties,t.getControl());t.saveGrid().done(function(){var n={properties:$.extend({editable:bizagi.util.parseBoolean(e)},t.originalData)};i.empty(),bizagi.rendering.render.prototype.initializeData.apply(t,[n]),t.initProperties(),t.changeColumnsEditability(e),"function"==typeof t.internalRenderControl&&$.when(t.internalRenderControl()).done(function(e){i.append(e),t.postRenderElement(t.element)})})},saveGrid:function(){var e=$.Deferred(),t=$("[data-bizagi-component=rows]",this.element).find("[data-new-row=true]");return t.length>0?(t=$.map(t,function(e,t){return $(e).data("business-key")}),this.saveInlineAddedRows(t).done(function(){e.resolve()})):e.resolve(),e.promise()},changeColumnsEditability:function(e){var t=this.columns||[];$.each(t,function(t,i){i.properties.editable=e})},refreshCell:function(e){var t=this,i=t.properties,n=e.key,r=e.column,a=""!==e.xpathContext?e.xpathContext+"."+t.properties.xpath+t.buildCellXpathFilter(n):t.properties.xpath+t.buildCellXpathFilter(n),o=t.getControlCell(n,e.column),s=t.getFormContainer().properties.id;if(o)return o.beforeToRefresh(),$.when(t.dataService.multiaction().refreshGridCell({idRender:i.id,column:o.properties.id,idPageCache:i.idPageCache,xpathContext:a,idForm:s,typeRender:o.properties.type})).done(function(e){var i=function(e){return e&&"object"==typeof e&&e.length>=1?e[0].length>=1?e[0][0]:e[0]:""},a=i(e.rows),s=i(e.editable);bizagi.util.isBoolean(s)||(s=!0),s=!(!s||void 0===o.column||void 0===o.column.properties||!o.column.properties.editable);var l=i(e.visible)||!0;t.changeCellVisibility(n,r,l),t.changeCellEditability(n,r,s),o.setValue(a),o.setDisplayValue(a),t.triggerRenderChange({key:n,column:r,changed:!1}),null!=o.column&&"desktop"==bizagi.util.detectDevice()&&t.updateAffectedCellManually(n,a,o.column.columnIndex),o.afterToRefresh()})},triggerRenderChange:function(e){e=e||{},bizagi.util.isEmpty(e)||0==e.changed||(this.properties.canBeExported=!1),this.triggerHandler("renderchange",{render:this,surrogateKey:e.key,column:e.column,changed:e.changed,rowDeleted:e.rowDeleted,pressed:e.pressed})},validate:function(){this.isValid([])},isValid:function(e){var t=this,i=!0;if(t.hasErrors=!1,t.setValidationMessage(""),t.properties.data&&t.properties.data.rows){var n=t.getDataNewRows();0==n.length&&bizagi.util.parseBoolean(t.properties.required)&&(t.hasValue()||(message=t.getResource("render-required-text").replaceAll("#label#",t.properties.displayName),e.push({xpath:t.properties.xpath,message:message}),i=!1));for(var r=$.merge($.merge([],t.properties.data.rows),n),a=0;a<t.columns.length;a++){for(var o=[],s={},l=0;l<r.length;l++){var u=r[l][a+1],c=r[l][0];t.columns[a].properties.xpath;void 0!==t.changes[c]&&void 0!==t.changes[c][t.columns[a].properties.xpath]&&(u=t.changes[c][t.columns[a].properties.xpath]),t.columns[a].isValueValid(c,u,o,t.getCellOverride(c,a))||(i=!1,t.hasErrors=!0,t.setError(c,t.columns[a].properties.xpath))}for(var d=0,p=o.length;d<p;d++)null==s[o[d]]&&(s[o[d]]=o[d]);if(o.length>0){var h=t.getResource("render-grid-validation").replaceAll("#grid#",t.properties.displayName);for(c in s)e.push({xpath:t.properties.xpath,message:h+" "+c})}}}return i},configureSubmitOnChange:function(){},getCellOverride:function(e,t){e=Number(e),t=Number(t);var i=this.columns[t].properties;return this.cellOverrides[e]||(this.cellOverrides[e]={}),this.cellOverrides[e][t]||(this.cellOverrides[e][t]={visible:i.visible,editable:i.editable,required:i.required}),this.cellOverrides[e][t]},setCellOverrides:function(e,t){var i;if(e.visible)for(var n=0,r=e.visible.length;n<r;n++){i=e.visible[n][0];for(var a=0,o=e.visible[n].length;a<o;a++)a>0&&(this.getCellOverride(i,a-1).visible=bizagi.util.parseBoolean(e.visible[n][a]))}if(e.editable)for(n=0,r=e.editable.length;n<r;n++){i=e.editable[n][0];for(a=0,o=e.editable[n].length;a<o;a++)if(a>0){var s=!t||bizagi.util.parseBoolean(t[a-1].properties.editable);this.getCellOverride(i,a-1).editable=!!s&&bizagi.util.parseBoolean(e.editable[n][a])}}if(e.required)for(n=0,r=e.required.length;n<r;n++){i=e.required[n][0];for(a=0,o=e.required[n].length;a<o;a++)a>0&&(this.getCellOverride(i,a-1).required=bizagi.util.parseBoolean(e.required[n][a]))}},getIndexes:function(){var e=$.merge(this.properties.data.rows,this.getDataNewRows());return $.map(e,function(e,t){return e[0]})},getDataNewRows:function(){var e=this,t=[];return"object"!=typeof e.newRecords||$.isEmptyObject(e.newRecords)||$.each(e.newRecords,function(i){var n=[];n.push(Number(i));for(var r=0,a=e.columns.length;r<a;r++)n.push(e.getCellCurrentValue(i,e.columns[r].properties.xpath));t.push(n)}),t},getGridExportUrl:function(e){var t=this.properties;return this.dataService.getGridExportUrl({idRender:t.id,xpathContext:t.xpathContext||"",idPageCache:t.idPageCache,disposition:e.disposition,exportType:e.exportType,sort:t.sort,sessionId:this.getSessionId(),idForm:this.getFormContainer().properties.id})},submitForGridChange:function(){return this.submitOnChange(null,!1)},dispose:function(){var e=this;setTimeout(function(){e.columns&&$.each(e.columns,function(e,t){t.dispose()})},bizagi.override.disposeTime||50),e._super()},getEnabledChecks:function(e){var t=this,i=t.properties;e=e||{},$.extend(e,{url:i.dataUrl,xpath:i.xpath,idRender:i.id,xpathContext:i.xpathContext,contexttype:i.contextType,idPageCache:i.idPageCache,rows:i.rowsPerPage,xpathfilter:e.xpath});var n=new $.Deferred;return t.dataService.multiaction().getGridDataExclusivesSelected(e).done(function(e){i.page=e.page,i.records=e.records,i.totalPages=e.totalPages,t.isRTL()&&(e.rows=t.changeOrderData(e.rows)),n.resolve(e)}),n.promise()},buildCellXpathFilter:function(e){return bizagi.util.isNumeric(e)?"[id="+e+"]":"[id='"+e+"']"},cleanNewRecords:function(){this.newRecords={}},changeBackgroundColor:function(e){this._super(e);var t=this.getControl();t.find(".bz-rn-grid-header-title").css("background-color",e,"!important"),t.find(".bz-rn-grid-container-foother").css("background-color",e,"!important")}}),bizagi.rendering.render.extend("bizagi.rendering.hidden",{},{renderControl:function(){return"design"===this.getMode()?"<div>"+bizagi.localization.getResource("render-hidden-displayName")+"</div>":"<div />"},postRender:function(){var e=this.properties;this._super(),void 0!==e.value&&this.setDisplayValue(e.value)}}),bizagi.rendering.render.extend("bizagi.rendering.label",{},{initializeData:function(e){this._super(e),this.properties.required=!1,this.properties.displayType="label",this.properties.labelAlign=this.originalProperties.labelAlign||"left",this.properties.displayName=e.properties.displayName||"",bizagi.util.parseBoolean(this.properties.allowDinamiclabel)&&(this.properties.displayName=e.properties.displayName||bizagi.localization.getResource("render-label-default-display-name")),this.bindingValue(),this.calculateInitialLayoutProperties()},postRender:function(){var e=this.properties;this._super(),this.changeDisplayOption("label"),this.changeLabelAlign(e.labelAlign||"left"),"function"==typeof this.configureHelpText&&this.configureHelpText()},postRenderReadOnly:function(){var e=this.properties;this._super(),this.changeDisplayOption("label"),this.changeLabelAlign(e.labelAlign||"left")},isValid:function(e){},getDefaultLabelAlign:function(e){return"left"},canBeSent:function(){return!1},bindingValue:function(){var e=this;e.properties.allowDinamiclabel&&e.properties.value&&("object"==typeof e.properties.value&&e.properties.value[0]?e.properties.displayName=e.properties.value[0].value:"string"==typeof e.properties.value&&""!==e.properties.value&&(e.properties.displayName=e.properties.value))}}),bizagi.rendering.render.extend("bizagi.rendering.search",{},{initializeData:function(e){this._super(e);var t=this.properties;t.searchForms=t.searchForms||[],t.maxRecords=Number(t.maxRecords)||20,t.advancedSearch=null!==bizagi.util.parseBoolean(t.advancedSearch)&&bizagi.util.parseBoolean(t.advancedSearch),t.allowSuggest=null!==bizagi.util.parseBoolean(t.allowSuggest)&&bizagi.util.parseBoolean(t.allowSuggest),t.allowFullSearch=t.allowFullSearch||!1,t.allowAdd=bizagi.util.parseBoolean(t.allowAdd)||!1,t.allowTyping=null!==bizagi.util.parseBoolean(t.allowTyping)&&bizagi.util.parseBoolean(t.allowTyping),t.allowTyping=!!bizagi.util.parseBoolean(t.allowSuggest)||t.allowTyping,t.allowClear=null!==bizagi.util.parseBoolean(t.allowClear)&&bizagi.util.parseBoolean(t.allowClear),t.editable=null===bizagi.util.parseBoolean(t.editable)||bizagi.util.parseBoolean(t.editable),t.searchLength=t.searchLength||2,t.enableLocalStorage=!1,t.expireCache=9e5,t.advancedSearch&&"execution"===this.getMode()&&(t.submitOnChange=bizagi.util.parseBoolean(t.submitOnChange)||!1,t.submitOnChange=!((t.submitVersion||1)>1)||t.submitOnChange)},renderControl:function(){var e=this.properties,t=this.renderFactory.getTemplate("search");return $.fasttmpl(t,{id:e.id,xpath:e.xpath,allowTyping:e.allowTyping,advancedSearch:e.advancedSearch})},getData:function(e){var t=this,i=t.properties,n=new $.Deferred,r=t.getFormContainer(),a=r.getContextType()||r.params.contexttype||!1;if(e=e||{},t.properties.contexttype?e.h_contexttype=t.properties.contexttype:a&&(e.h_contexttype=a),e.h_contexttype=t.properties.enableQuerySuggestBehavior?"metadata":e.h_contexttype,e&&e.h_contexttype&&"metadata"===e.h_contexttype&&(i.xpathContext=""),i.term.indexOf("'")>-1){var o=new RegExp("'","g");i.term=i.term.replace(o,"\\'\\'")}if(i.term.indexOf('"')>-1){o=new RegExp('"',"g");i.term=i.term.replace(o,'"')}return t.dataService.multiaction().getSearchData({url:i.dataUrl,contexttype:e.h_contexttype,xpath:i.xpath,idRender:i.id,xpathContext:i.xpathContext,idPageCache:i.idPageCache,term:i.allowFullSearch?"%"+i.term:i.term,extra:e}).done(function(e){i.data=e,n.resolve(i.data)}).fail(function(e){var i=e.hideStatus||!1;n.resolve({}),i||t.trigger("onSearchError",e)}),n.promise(n)},setValue:function(e,t){t=void 0===t||t,this._super(e,t),null!=e?(this.value=e,this.selectedValue=e.label):(this.value=null,this.selectedValue=null)},mapValue:function(e){return e&&e.fromAction?{id:e.value,value:e.label,label:e.label}:e},collectData:function(e){var t=this.properties,i=t.xpath,n=this.getValue();if(this.controlValueIsChanged()&&!bizagi.util.isEmpty(i)&&null!=n){if("object"==typeof n&&void 0===n.id)return;e[t.xpath]=n}},submitData:function(){var e=this.properties,t={};this.grid||(t[e.xpath]=this.getValue()),this.submitOnChange(t,void 0,!1)},isValid:function(e){return this._super(e)},formatItem:function(e){return bizagi.util.formatItem(e)}}),bizagi.rendering.render.extend("bizagi.rendering.text",{},{initializeData:function(e){this._super(e);var t=this.properties;t.regularExpressionExpression&&(t.regularExpression={expression:t.regularExpressionExpression,message:t.regularExpressionMessage||this.getResource("render-text-regular-expression-default-message")})},renderControl:function(){var e=this.properties,t=this.renderFactory.getTemplate("text");return $.fasttmpl(t,{value:"",isEmptyField:void 0===e.value})},renderReadOnly:function(){this.properties;var e=this.renderFactory.getTemplate("text-read-only");return $.fasttmpl(e,{value:this.getValue()})},postRender:function(){var e=this.getControl(),t=this.properties;this._super(),this.input=e.find("input"),"double"==t.retype&&this.attachRetypeDouble()},attachRetypeDouble:function(){},configureHandlers:function(){var e=this,t=e.properties;e.getControl(),e.input;t.mask&&e.input.mask({mask:t.mask}),e.input.bind("change",function(){e.getValue();e.setValue(e.input.val(),!1);var i=[];"duplicate"!=t.retype&&(e.isValid(i)||void 0===t.regularExpression?e.setValue(e.input.val(),!0):message=i[0].message)}).keypress(function(e){var t=(e=window.event||e).charCode||e.keyCode;void 0!==e&&13==t&&$(this).trigger("change")})},isValid:function(e){var t=this.properties,i=this._super(e),n=this.getValue();if("string"==typeof n)if(t.regularExpression){var r=new RegExp("");try{r=new RegExp(t.regularExpression.expression)}catch(n){bizagi.override.showDesignValidations&&(bizagi.log(n),e.push({xpath:t.xpath,message:n.message}),i=!1)}if(n&&(n.match(new RegExp(".*?(<|\\u003C)(.+?)(>|\\u003E)(.?)|eval\\(|eval\\u0028","g"))||!n.match(r)&&this.properties&&"userName"===this.properties.xpath)){var a=t.regularExpression.message;e.push({xpath:t.xpath,message:a}),i=!1}else if(n&&(n.match(new RegExp(".*?(<|\\u003C)(.+?)(>|\\u003E)(.?)|eval\\(|eval\\u0028","g"))||!n.match(r))){a=t.regularExpression.message;e.push({xpath:t.xpath,message:a}),i=!1}}else if(n&&n.match(new RegExp(".*?eval\\(","g"))&&n.match(new RegExp(".*?eval\\u0028","g"))&&t.editable){a=this.getResource("render-text-regular-expression-default-message");e.push({xpath:t.xpath,message:a}),i=!1}return i},setDisplayValue:function(e){var t=this.getControl(),i=this.getDisplayValue(),n=bizagi.util.decodeURI(e),r=bizagi.util.decodeURI(i);if(!bizagi.util.parseBoolean(this.properties.editable))if("string"==typeof e){var a=r.replaceAll("&","&amp;");a=(a=(a=(a=a.replaceAll("<","&lt;").replaceAll(">","&gt;")).replaceAll('"',"&#34;").replaceAll("'","&#39;").replaceAll("/","&#47;")).replaceAll("\\n","<br/>")).replaceAll("\n","<br/>"),t.html("<label class='readonly-control'>"+a+"</label>")}else bizagi.util.isNull(e)&&t.html("");this.setValue(n,!1)},setValue:function(e){this._super(e)}}),bizagi.rendering.render.extend("bizagi.rendering.button",{},{initializeData:function(e){this._super(e);var t=this.properties;t.caption=t.caption||"",t.displayType="value",t.required=!1,t.preventDefault=t.preventDefault||!1},renderControl:function(){var e=this.properties,t=this.renderFactory.getTemplate("button");return $.fasttmpl(t,{caption:e.caption,cssClass:e.cssclass||""})},renderReadOnly:function(){return this.renderControl()},saveForm:function(){return this.getFormContainer().saveForm()},executeButton:function(){var e=this,t=e.properties,i=t.xpathContext||"";return t.submitOnChangexpathContextRow&&(i=i?i+"."+t.submitOnChangexpathContextRow:t.submitOnChangexpathContextRow),e.getFormContainer().startLoading(),e.dataService.multiaction().executeButton({idRender:t.id,xpath:t.xpath||"",xpathContext:i||"",idPageCache:t.idPageCache}).always(function(){return e.getFormContainer().endLoading(),arguments?arguments[0]:void 0})},refreshForm:function(){var e=this.properties;this.getFormContainer().refreshForm(e.id)},processButton:function(){var e=this;e.properties.editable&&(e.getFormContainer().clearValidationMessages(),e.saveForm().pipe(function(){return e.executeButton()}).done(function(t){if(null==t||1==t||"success"==t.result||"success"==t.type)return e.refreshForm();"validationMessages"==t.type&&e.getFormContainer().addValidationMessage(t.messages)}).fail(function(t,i,n){e.getFormContainer().addErrorMessage(n)}))},triggerRenderChange:function(e){var t=(e=e||{}).pressed||!1;this.triggerHandler("renderchange",{render:this,pressed:t})},canBeSent:function(){return!1}}),bizagi.rendering.render.extend("bizagi.rendering.fileprint",{},{initializeData:function(e){this._super(e);var t=this.properties;t.caption=t.caption&&" "!=t.caption?t.caption:"render-fileprint-property-caption",t.displayType="value",this.calculateInitialLayoutProperties(),t.required=!1},renderControl:function(){var e=this.properties,t=this.renderFactory.getTemplate("fileprint");return $.fasttmpl(t,{caption:e.caption})},renderReadOnly:function(){return this.renderControl()},getFilePrintUrl:function(e){var t=this.properties;return this.dataService.getFilePrintUrl({idRender:t.id,xpathContext:t.xpathContext||"",idPageCache:t.idPageCache,disposition:e,sessionId:this.getSessionId()})},refreshForm:function(){var e=this.properties;this.getFormContainer().refreshForm(e.id)},saveForm:function(){return this.getFormContainer().saveForm()}}),bizagi.rendering.render.extend("bizagi.rendering.link",{},{initializeData:function(e){this._super(e),this.properties.displayType="value",this.calculateInitialLayoutProperties()},renderControl:function(){var e=this.properties,t=this.renderFactory.getTemplate("link");return $.fasttmpl(t,{displayName:e.displayName,align:e.valueAlign})},renderReadOnly:function(){return this.renderControl()},isValid:function(e){},setDisplayValue:function(e){},canBeSent:function(){return!1}}),bizagi.rendering.render.extend("bizagi.rendering.upload",{BA_ACTION_PARAMETER_PREFIX:bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,BA_CONTEXT_PARAMETER_PREFIX:bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,BA_PAGE_CACHE:bizagi.render.services.service.BA_PAGE_CACHE},{initializeData:function(e){this._super(e);var t=this.getFormContainer(),i=this.properties;if(i.maxSize=Number(i.maxSize)||("undefined"!=typeof BIZAGI_SETTINGS&&void 0!==BIZAGI_SETTINGS.UploadMaxFileSize?Number(BIZAGI_SETTINGS.UploadMaxFileSize):i.maxSize=Number(i.maxSize)||4091904),i.maxfiles=Number(i.maxfiles)||999,i.validExtensions=i.validExtensions||"",i.validExtensions.length>0&&i.validExtensions.indexOf(".")<0){for(var n=i.validExtensions.replace(/\ /gi,"").split(";"),r=[],a=0;a<n.length;a++)if(n[a].length>0)r.push("*."+n[a]);else{n.indexOf(n[a]);n.splice(a,1)}i.validExtensions=r.join(";")}i.addUrl=i.addUrl||this.dataService.getUploadAddUrl(),i.deleteUrl=i.deleteUrl||void 0,i.editable=bizagi.util.parseBoolean(i.editable)||!1,i.allowDelete=!(null===bizagi.util.parseBoolean(i.allowDelete)||!i.editable)&&bizagi.util.parseBoolean(i.allowDelete),i.contexttype=t.params&&t.params.data&&t.params.data.contextType?t.params.data.contextType:"",i.allowSendInMail=i.allowSendInMail||!1,this.files=i.value||[],this.filesCount=this.files.length},renderControl:function(){for(var e=this.properties,t=this.renderFactory.getTemplate("upload"),i=$.fasttmpl(t,{xpath:bizagi.util.encodeXpath(this.getUploadXpath()),editable:e.editable,noFiles:0==this.filesCount,allowSendInMail:e.allowSendInMail}),n="",r=0;r<this.filesCount;r++){var a={id:this.files[r][0],fileName:this.files[r][1]};n+=this.renderUploadItem(a)}return i=this.replaceFilesHtml(i,n)},renderReadOnly:function(){return this.renderControl()},renderUploadItem:function(e){var t=this.properties,i=this.getMode(),n=this.renderFactory.getTemplate("uploadItem"),r=this.buildItemUrl(e);return"execution"!=i&&(r="javascript:void(0);"),$.fasttmpl(n,{url:r,allowDelete:t.allowDelete,filename:e.fileName,id:e.id,mode:i,editable:t.editable})},buildItemUrl:function(e){var t=this.properties,i=this.getFormContainer();return this.dataService.getUploadFileUrl({idRender:t.id,xpath:this.getUploadXpath(),xpathContext:t.xpathContext,idPageCache:t.idPageCache,fileId:e.id,sessionId:i.properties.sessionId,contexttype:t.contexttype})},replaceFilesHtml:function(e,t){return e.replace("{{files}}",t)},deleteUploadItem:function(e,t){var i=this,n=i.properties,r=i.getUploadXpath()+(bizagi.util.isNumeric(t)?"[id="+t+"]":"[id='"+t+"']");return i.dataService.deleteUploadFile({url:n.deleteUrl,idRender:n.id,xpath:r,xpathContext:n.xpathContext,idPageCache:n.idPageCache,contexttype:n.contexttype}).pipe(function(){i.filesCount=i.filesCount-1,i.files=$.grep(i.files,function(e){return e[0]!=t})})},canBeSent:function(){return!1},setValue:function(e,t){this.files=e||[],this.filesCount=this.files.length,this._super(e,t)},getValue:function(){return this.files},isValid:function(e){var t,i=this.properties,n=!0;if(this.setValidationMessage(""),i.required&&i.editable){var r=this.grid&&this.grid.isFromCreatedRow.apply(this);if(this.filesCount<=0&&!r)(!this.grid||this.grid.properties.inlineEdit)&&(t=this.getResource("render-required-upload").replaceAll("#label#",i.displayName),e.push({xpath:i.xpath,message:t}),n=!1)}return n},buildAddParams:function(){var e=this,t=e.properties,i=e.getFormContainer(),n={};n[e.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpath"]=e.getUploadXpath(),n[e.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=t.id,n[e.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=t.xpathContext,n[e.Class.BA_CONTEXT_PARAMETER_PREFIX+e.Class.BA_PAGE_CACHE]=t.idPageCache,n[e.Class.BA_ACTION_PARAMETER_PREFIX+"sessionId"]=i.properties.sessionId,n[e.Class.BA_CONTEXT_PARAMETER_PREFIX+"contexttype"]=t.contexttype;try{"undefined"!=typeof BIZAGI_SESSION_NAME?n[BIZAGI_SESSION_NAME]=i.properties.sessionId:n.JSESSIONID=i.properties.sessionId}catch(e){n.JSESSIONID=i.properties.sessionId}return n},getUploadXpath:function(){return this.properties.xpath},checkRequired:function(e){var t=this.properties;if(bizagi.util.parseBoolean(t.required))if(this.grid&&1==this.grid.properties.inlineAdd){if(!this.hasValue()&&!this.getControl().parents("tr").data("new-row"))return this.setRenderRequired(e,t),!1}else if(!this.hasValue())return this.setRenderRequired(e,t),!1;return!0},setRenderRequired:function(e,t){message=this.getResource("render-required-text").replaceAll("#label#",t.displayName),e.push({xpath:t.xpath,message:message})}}),bizagi.rendering.render.extend("bizagi.rendering.yesno",{},{initializeData:function(e){this._super(e);var t=this.properties;t.value=void 0!==t.value?bizagi.util.parseBoolean(t.value):null},renderControl:function(){var e=this.renderFactory.getTemplate("yesno"),t=bizagi.util.randomNumber(100,1e7);return $.fasttmpl(e,{id:t})},getDisplayValue:function(){var e=this.getValue();return 1==bizagi.util.parseBoolean(e)?this.getResource("render-boolean-yes"):0==bizagi.util.parseBoolean(e)?this.getResource("render-boolean-no"):""}}),bizagi.rendering.render.extend("bizagi.rendering.letter",{},{initializeData:function(e){this._super(e),this.letterOpened=!1},renderControl:function(){var e=this.renderFactory.getTemplate("letter");return $.fasttmpl(e)},renderReadOnly:function(){var e=this.renderFactory.getTemplate("letter.readonly");return $.fasttmpl(e)},getLetterContent:function(){var e=this.properties;return this.letterOpened=!0,this.dataService.getLetterContent({url:e.getUrl,idRender:e.id,xpath:this.getXpath(),xpathContext:this.getContextXpath(),idPageCache:e.idPageCache})},saveLetterContent:function(e){var t=this.properties;return this.dataService.saveLetterContent({url:t.saveUrl,idRender:t.id,xpath:this.getXpath(),xpathContext:this.getContextXpath(),idPageCache:t.idPageCache,content:e})},getCanGenerateLetter:function(){var e=this.properties;return this.dataService.getCanGenerateLetter({idRender:e.id,xpath:this.getXpath(),xpathContext:this.getContextXpath(),idPageCache:e.idPageCache})},saveForm:function(){return this.getFormContainer().saveForm()},isValid:function(e){var t,i=this.properties;return 0==bizagi.util.parseBoolean(i.visible)||(0==bizagi.util.parseBoolean(i.editable)||(this.setValidationMessage(""),!i.required||0!=this.letterOpened||(t=this.getResource("render-letter-required-text").replaceAll("#label#",i.displayName),e.push({xpath:i.xpath,message:t}),!1)))},getXpath:function(){return this.properties.xpath},getContextXpath:function(){return this.properties.xpathContext}}),bizagi.rendering.render.extend("bizagi.rendering.formLink",{},{initializeData:function(e){this._super(e),this.properties.displayType="value",this.properties.maximized=null!=bizagi.util.parseBoolean(this.properties.maximized)&&bizagi.util.parseBoolean(this.properties.maximized),this.calculateInitialLayoutProperties()},renderControl:function(){var e=this.properties,t=this.renderFactory.getTemplate("link");return $.fasttmpl(t,{id:e.id,align:e.valueAlign,displayName:e.displayName,value:e.value,likeButton:bizagi.util.parseBoolean(e.likeButton)||!1})},renderReadOnly:function(){return this.renderControl()},postRenderReadOnly:function(){this.configureHandlers()},submitEditRequest:function(){var e=this.properties;return 0!=e.editable||e.value?this.dataService.editLinkForm({url:e.editUrl,idRender:e.id,xpath:this.getFormLinkXpath(),xpathContext:e.xpathContext,idPageCache:e.idPageCache}):null},submitSaveRequest:function(e){var t=this,i=t.properties;if(0==i.editable&&!i.value)return null;var n=t.getFormLinkXpath();return t.dataService.saveLinkForm({url:i.saveUrl,idRender:i.id,xpathContext:null==i.xpathContext||""==i.xpathContext?n:n?i.xpathContext+"."+n:i.xpathContext,submitData:e}).done(function(e){var i=!0;e&&"validationMessages"==e.type&&(i=!1),i&&t.submitOnChange({})})},submitRollbackRequest:function(e){var t=this.properties;return 0!=t.editable||t.value?this.dataService.rollbackLinkForm({url:t.rollbackUrl,idRender:t.id,xpath:this.getFormLinkXpath(),xpathContext:t.xpathContext,idPageCache:e?e.idPageCache:t.idPageCache}):null},submitCommitRequest:function(){var e=this.properties;return 0!=e.editable||e.value?this.dataService.commitLinkForm({url:e.commitUrl,idRender:e.id,xpath:this.getFormLinkXpath(),xpathContext:e.xpathContext,idPageCache:e.idPageCache}):null},submitCheckpointRequest:function(){var e=this.properties;return 0!=e.editable||e.value?this.dataService.sendCheckpoint({url:e.checkpointUrl,idRender:e.id,xpath:this.getFormLinkXpath(),xpathContext:e.xpathContext,idPageCache:e.idPageCache}):null},submitDataRequest:function(){var e=this.properties;return 0!=e.editable||e.value?this.dataService.submitData({url:e.checkpointUrl,action:"SUBMITDATA",idRender:e.id,xpath:this.getFormLinkXpath(),xpathContext:e.xpathContext,idPageCache:e.idPageCache}):null},isValid:function(e){},getFormLinkXpath:function(){return this.properties.xpath},canBeSent:function(){return!1},setDisplayValue:function(e){},changeColor:function(e){var t=this.getControl(),i=this.getLabel();t&&i&&("none"!=e?(this.getControl().find("a").css("color",e,"!important"),"function"==typeof this.getControl().find("a").style&&this.getControl().find("a").style("color",e,"!important")):(this.getControl().find("a").css("color",""),"function"==typeof this.getControl().find("a").style&&this.getControl().find("a").style("color",""))),this._super(e)}}),bizagi.rendering.render.extend("bizagi.rendering.document",{},{initializeData:function(e){this._super(e);var t=this.properties;t.validate=null!=bizagi.util.parseBoolean(t.validate)&&bizagi.util.parseBoolean(t.validate),t.caption?(t.caption=bizagi.util.trim(t.caption),0==t.caption.length&&(t.caption=this.getResource("render-documentgenerator-button-label"))):t.caption=this.getResource("render-documentgenerator-button-label")},renderControl:function(){var e=this;e.preRenderControl();for(var t=e.properties,i=e.getMode(),n=!t.value||0==t.value.length,r=t.downloadalldocuments=!!t.downloadalldocuments&&t.downloadalldocuments,a=void 0===t.allowGenerate||t.allowGenerate,o=e.renderFactory.getTemplate(e.getTemplate()),s="",l=t.value?t.value.length:0,u=e.getControlHtml(o,i,r,a,t,n),c=0;c<l;c++){var d={id:t.value[c][0],fileName:t.value[c][1]};s+=e.renderDocumentItem(d)}if(!n&&r){var p={fileName:e.getResource("render-document-downloadalldocuments")};s+=e.renderAllDocumentDownload(p)}return u=e.replaceFilesHtml(u,s)},getControlHtml:function(e,t,i,n,r,a){return $.fasttmpl(e,{noActivateButton:!1,editable:"execution"!=t,downloadalldocuments:i,required:r.required,allowgenerate:n,xpath:this.getXpath(r.xpath),append:!!r.append&&r.append,caption:r.caption,noFiles:a,allowSendInMail:r.allowSendInMail})},getXpath:function(e){return e},preRenderControl:function(){},activateButton:function(){return!0},getDocumentXpath:function(e){return e},getContextXpath:function(){return this.properties.xpathContext},renderDocumentItem:function(e){this.properties;var t=this.getMode(),i=this.renderFactory.getTemplate(this.getTemplateItem()),n=this.buildItemUrl(e);return"execution"!=t&&(n="javascript:void(0);"),$.fasttmpl(i,{url:n,allowDelete:this.properties.allowDelete,filename:e.fileName,mode:t,joined:!1})},buildItemUrl:function(e){var t=this.properties;this.getFormContainer();return this.dataService.getUploadFileUrl({idRender:t.id,xpath:this.getDocumentXpath(t.xpath),xpathContext:this.getContextXpath(),idPageCache:t.idPageCache,fileId:e.id,sessionId:this.getSessionId()})},buildAllDocumentsUrl:function(){var e=this.properties;return this.dataService.getAllDocumentsDownloadUrl({xpath:this.getDocumentXpath(e.xpath),xpathContext:this.getContextXpath(),idPageCache:e.idPageCache,idCase:e.caseId,idWorkItem:e.workitemId,sessionId:this.getSessionId()})},postRender:function(){return this._super(),"<div></div>"},postRenderReadOnly:function(){if("design"!=this.getMode()){var e=this.getControl(),t=this.renderControl();e.append(t),this.updateControlForPrintMode(e),this.postRender()}},validateContainer:function(){return this.getFormContainer().validateForm()},save:function(){return this.getFormContainer().saveForm()},replaceFilesHtml:function(e,t){return e.replace("{{files}}",t)},canBeSent:function(){return!1},isValid:function(e){var t,i=this.properties;return 0==bizagi.util.parseBoolean(i.visible)||(0==bizagi.util.parseBoolean(i.editable)||(this.setValidationMessage(""),!(i.required&&!i.buttonExecuted&&this.value)||(this.value.length>0||(t=this.getResource("render-document-required-text"),e.push({xpath:i.xpath,message:t}),!1))))},configureHandlers:function(){var e=this,t=e.getControl(),i=e.getMode();e._super();var n=$(".ui-bizagi-button-documentgenerator",t);"execution"==i&&n.click(function(t){if(!t.isPropagationStopped()){if(t.stopPropagation(),e.properties.buttonExecuted=!0,e.properties.validate)e.validateContainer()&&e.documentTemplateGenerate();else e.documentTemplateGenerate();e.properties.buttonExecuted=!1}}),$(".ui-bizagi-document-preview",t).click(function(t){t.isPropagationStopped()||(t.stopPropagation(),e.showDocumentPreview($(this).data("url"),$(this).data("filename")))}),$(".ui-bizagi-container-documents-item-delete",t).click(function(t){t.isPropagationStopped()||(t.stopPropagation(),e.deleteDocumentTemplate($(this).data("filename")))})},deleteDocumentTemplate:function(e){var t=this,i=new Object;i.xpath=t.properties.xpath+"[fileName='"+e+"']",i.idRender=t.properties.id,i.xpathContext=t.getContextXpath(),i.idPageCache=t.properties.idPageCache,$.when(t.dataService.deleteUploadFile(i)).done(function(){$.when(t.dataService.multiaction().getPropertyData({xpath:t.properties.xpath,idRender:t.properties.id,xpathContext:t.getContextXpath(),idPageCache:t.properties.idPageCache,property:"value"})).done(function(e){t.redrawDocuments(e,!1,t.properties.downloadalldocuments),t.value=e,t.configureHandlers()})})},documentTemplateGenerate:function(){var e=this,t=e.properties;e.startLoading(),t.xpathcontext=e.getContextXpath(),t.xpath=e.getDocumentXpath(t.xpath),e.save().done(function(){bizagi.showErrorAlertDialog=!1,$.when(e.dataService.generateDocumentTemplate(t)).done(function(){$.when(e.dataService.multiaction().getPropertyData({xpath:t.xpath,idRender:t.id,xpathContext:e.getContextXpath(),idPageCache:t.idPageCache,property:"value"})).done(function(i){e.redrawDocuments(i,!1,t.downloadalldocuments),e.value=i,e.autoOpenDocuments(),e.configureHandlers(),e.endLoading()})}).fail(function(t){e.endLoading(),e.showErrorMessage(t)})}).fail(function(t){e.endLoading(),e.showErrorMessage(error)})},showErrorMessage:function(e){var t=this.getFormContainer(),i=this.resources.getResource("render-upload-alert-maxsize").replace("{0}",BIZAGI_SETTINGS.UploadMaxFileSize);try{i=e&&void 0!==e.responseText?JSON.parse(e.responseText).message:e}catch(e){}t.addErrorMessage(i),t.endLoading()},autoOpenDocuments:function(){},showDocumentPreview:function(e,t){},returnCssTypeFile:function(e){if(null==e||0==e.lenght)return"ui-bizagi-document-upload-item-generic-file";switch(e.substr(e.lastIndexOf(".")+1)){case"docx":return"ui-bizagi-document-upload-item-doc";case"pdf":return"ui-bizagi-document-upload-item-pdf";case"xlsx":return"ui-bizagi-document-upload-item-xls";default:return"ui-bizagi-document-upload-item-generic-file"}},redrawDocuments:function(e,t,i){var n=this.getControl(),r=$(".ui-bizagi-container-documents",n);r.empty();for(var a="",o=0;o<e.length;o++){var s={id:e[o][0],fileName:e[o][1]};a+=this.renderDocumentItem(s)}if(i&&!t&&e.length>0){var l={fileName:this.getResource("render-document-downloadalldocuments")};a+=this.renderAllDocumentDownload(l)}r.append(a),this.setValue(e)},renderAllDocumentDownload:function(e){var t=this.properties,i=this.getMode(),n=this.renderFactory.getTemplate(this.getTemplateItem()),r=this.buildAllDocumentsUrl(e);"execution"!=i&&(r="javascript:void(0);");var a=$.fasttmpl(n,{url:r,allowDelete:t.allowDelete,filename:e.fileName,mode:i,joined:!0});return this.removeDeleteButton(a)},removeDeleteButton:function(e){var t=e.indexOf('<span class="ui-bizagi-container-documents-item-delete');if(t>0){var i=e.substring(t),n=i.indexOf("</span>")+7;return e.substring(0,t)+i.substring(n)}return e},getTemplate:function(){return"document"},getTemplateItem:function(){return"document-item"},getErrorTemplate:function(){return"form-error"}}),bizagi.rendering.combo.extend("bizagi.rendering.cascadingCombo",{BA_ACTION_PARAMETER_PREFIX:bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,BA_CONTEXT_PARAMETER_PREFIX:bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX},{init:function(e){this._super(e),this.dependants=[],this.isDependant=!1},initializeData:function(e){this._super(e);var t=this.properties;t.hasLocalData=!!bizagi.util.isEmpty(t.parentCombo)&&t.hasLocalData,t.value&&void 0===t.value.id&&(t.value=null),this.value=t.value,t.hasLocalData&&(t.data=this.complementData(t.data))},renderControl:function(){var e=this.getMode(),t=this.parentCombo=this.getParentCombo();null!=t&&"cascadingCombo"==t.properties.type&&(this.isDependant=!0),this.initializingCascadingCombo=!0;var i=this._super();return"execution"!=e&&(this.initializingCascadingCombo=!1),i},configureHandlers:function(){this.initializingCascadingCombo=!1,this.isDependant&&this.parentCombo.bindDependantCombo(this)},configureReadOnlyHandlers:function(){this.initializingCascadingCombo=!1,this.isDependant&&this.parentCombo.bindDependantCombo(this)},refresh:function(e,t){var i=this;$.when(i.isRendered()).done(function(){var n=i.getControl(),r=i.getMode();n.empty(),$.when(i.renderCombo(e)).then(function(e){n.html(e),i.postRender(),"execution"==r&&i.configureHandlers(),void 0!==i.getValue()&&i.setDisplayValue(i.getValue()),i.deferredVisible&&i.deferredVisible.resolve(),i.trigger("select",[i.value,t])})})},getData:function(e){return"execution"!=this.getMode()?this.getDummyData():this.isDependant?(this.parentCombo&&e&&(this.properties.remoteDataLoaded=!1),""!=(this.parentCombo.selectedValue?this.parentCombo.selectedValue.id:"")?this._super(e):[]):this._super(e)},bindDependantCombo:function(e){var t=this,i=t.properties;"cascadingCombo"==e.properties.type&&(t.dependants.push(e),e.onChangeFunction=function(i,n,r){t.refreshDependantCombo(e,n.id,t.focusDependant,r),r||e.cleanInput()},t.isEventBinded("select")||t.bind("select",e.onChangeFunction),bizagi.util.isEmpty(t.getValue())||i.hasLocalData&&t.refreshDependantCombo(e,t.getValue().id))},isEventBinded:function(e){return void 0!==$._data(this.observableElement.get(0),"events")&&void 0!==$._data(this.observableElement.get(0),"events")[e]},unbindDependantCombo:function(e){this.unbind("select",e.onChangeFunction)},refreshDependantCombo:function(e,t,i,n){var r={};r[this.Class.BA_ACTION_PARAMETER_PREFIX+"parent"]=t,e.deferredVisible=$.Deferred(),n||e.setValue("",!1),e.refresh(r,n),i&&$.when(e.deferredVisible.promise()).done(function(){e.inputCombo.trigger("click")})},emptyControlByChangeEditability:function(){this.getControl().empty()},cleanInput:function(){this.triggerHandler("select",{id:0})},getParentCombo:function(){var e=this.properties;if(void 0===e.parentCombo)return null;for(var t=this.getFormContainer(),i=t.getRenderByType("cascadingCombo"),n=0,r=0,a=[],o=null;n<i.length;n++)e.parentCombo===i[n].properties.id&&a.push({control:i[n],index:n});if(a.length>1){for(var s,l;r<a.length;r++)if(s=(l=a[r].control.properties.xpath.split(".")).length,l.slice(0,s-1).join(".")===e.xpath){o=i[a[r].index];break}}else o=t.getRenderById(e.parentCombo);return o},canBeSent:function(){return this._super()&&bizagi.util.isMapEmpty(this.dependants)},showCurrentData:function(){return"execution"!=this.getMode()},configureSubmitOnChange:function(){this.configured||(this._super(),this.configured=!0)},internalSubmitOnChange:function(e,t){var i=new $.Deferred;return this.isDependant&&this.canBeSent()&&void 0!==this.itemSelected?this._super(e,t):i.resolve()},internalSetInitialValue:function(){this._super(),this.value&&0==this.isDependant&&(this.internalSetInitialValueFlag=!0,this.trigger("select",[this.value,!0])),this.internalSetInitialValueFlag=!1}}),bizagi.rendering.combo.extend("bizagi.rendering.list",{},{initializeData:function(e){this._super(e);var t=this.properties;t.listSize=t.listSize||0},getTemplateName:function(){return"list"},showCurrentData:function(){return!1}}),bizagi.rendering.render.extend("bizagi.rendering.multiSelect",{},{initializeData:function(e){this._super(e);var t=this.properties;t.editable=null===bizagi.util.parseBoolean(t.editable)||bizagi.util.parseBoolean(t.editable),t.maxRecords=Number(t.maxRecords)||20},renderControl:function(){var e=this.properties,t=this.renderFactory.getTemplate("list-multiselect");return $.fasttmpl(t,{id:e.id,xpath:e.xpath,editable:e.editable,align:e.valueAlign},{formatItem:this.formatItem})},renderReadOnly:function(){var e=this.properties,t=this.renderFactory.getTemplate("list-multiselect");return $.fasttmpl(t,{id:e.id,xpath:e.xpath,editable:e.editable,align:e.valueAlign},{formatItem:this.formatItem})},getData:function(){var e=this,t=new $.Deferred,i=this.properties;return e.dataService.multiaction().getData({url:i.dataUrl,xpath:i.xpath,idRender:i.id,xpathContext:i.xpathContext,contexttype:i.contexttype||null,idPageCache:i.idPageCache}).done(function(e){i.data=e,t.resolve(i.data)}).fail(function(i){if("not-processed"!==i.type){var n=e.getFormContainer(),r=e.properties.displayName+": ";r+=("string"==typeof i?JSON&&JSON.parse(i)||$.parseJSON(i):i).message,n.addValidationMessage(r),t.reject(i)}}),t.promise()},setValue:function(e,t){t=void 0===t||t,e=JSON.encode({value:e}),this._super(e,t)},setDisplayValue:function(e){var t=this;t.setValue(e,!1),setTimeout(function(){t.addSelectedElements()},100)},canBeSent:function(){return!0},getValue:function(){return this.value||[]},getDataValue:function(){try{return JSON.parse(this.value).value||[]}catch(e){return[]}},hasValue:function(){var e=this.getDataValue();return e&&e.length>0},getElementsToStylize:function(e){return $(".bz-multiselect .bz-multiselect__tag:not(.bz-multiselect__plus)",e)},getDefaultLabelAlign:function(e){return"left"},getDefaultValueAlign:function(e){return"left"},addElement:function(e){var t=this.getDataValue();t.push(e),this.setValue(t)},removeElement:function(e){var t=e.id,i=this.getDataValue().filter(function(e){return e.id!==t});this.setValue(i)},submitData:function(){var e={};e[this.properties.xpath]=this.getValue(),this.submitOnChange(e)},markAsChecked:function(e){var t=this;return t.selected.some(function(i,n){var r=i.id===e;return r&&t.selected.splice(n,1),r})},canAddMoreItems:function(e){var t=this;return parseInt(e.css("width"))>e.children().toArray().reduce(function(e,i){return e+=t.getElementWidth(i)},0)+t.Class.MORE_OPTION_WIDTH},getElementWidth:function(e){var t=window.getComputedStyle(e);return $(e).outerWidth()+["padding-left","padding-right","margin-left","margin-right"].reduce(function(e,i){return e+=parseInt(t[i])},0)},filterList:function(e,t){t.filter(function(){var t=$(this).text().toUpperCase(),i=e.toUpperCase();if(t.indexOf(i)>=0)return $(this);$(this).hide()}).show()},addSelectedElements:function(){},findItemById:function(e){return(this.properties.data||[]).find(function(t){return t.id==e})},formatItem:function(e){return bizagi.util.formatItem(e)}}),bizagi.rendering.number.extend("bizagi.rendering.money",{},{initializeData:function(e){this._super(e);var t=this.properties,i=this.getResource("numericFormat");t.showsymbol=void 0===t.showsymbol||t.showsymbol,t.showsymbol?t.symbol=t.currencySymbol?t.currencySymbol:"undefined"!=typeof BIZAGI_DEFAULT_CURRENCY_INFO?BIZAGI_DEFAULT_CURRENCY_INFO.symbol:i.symbol:t.symbol="",t.groupDigits=!0}}),bizagi.rendering.combo.extend("bizagi.rendering.radio",{},{initializeData:function(e){this._super(e);var t=this.properties;t.horizontal=bizagi.util.parseBoolean(t.horizontal)||!1,t.unique=bizagi.util.randomNumber(1e3,1e6)},getTemplateName:function(){return"radio"},showEmpty:function(){return!1},showCurrentData:function(){return!1},getTemplateParams:function(){return{vertical:!this.properties.horizontal}},cleanData:function(){var e={id:"",label:""};this.element.find(".ui-radio-state-checked").removeClass("ui-radio-state-checked"),this.setDisplayValue(e),this.setValue(e,!1),this.clearDisplayValue()},controlValueIsChanged:function(){var e=this.properties,t=this.getValue(),i=e.originalValue,n=e.defaultValue;return t&&void 0!==t.length&&(t=t[0]),i&&void 0!==i.length&&(i=i[0]),n&&void 0!==n.length&&(n=n[0]),t=t&&void 0!==t.id?t.id:t,i=i&&void 0!==i.id?i.id:i,void 0!==(n=n&&void 0!==n.id?n.id:n)&&n==t&&t==i||(null!==t&&""!==t||null!==i&&""!==i)&&i!=t}}),bizagi.rendering.render.extend("bizagi.rendering.userfieldDefinition",{},{getFileDependencies:function(){return null},postRender:function(){var e=this;e._super();var t=$.Deferred(),i=e.getFileDependencies();return i&&i.length>0?bizagi.loader.loadFile(i).then(function(){e.internalRenderControl(),t.resolve()}):$.when(e.renderUserfieldControl()).done(function(){t.resolve()}),t.promise()},renderUserfieldControl:function(){var e=this,t=e.getControl(),i=e.properties,n=new $.Deferred;i.extendedData&&i.extendedData.length>0?e.extendedData=bizagi.services.ajax.parseJSON(i.extendedData):e.extendedData={};var r;return(r=e.getEditableControl())&&(e.input=t.html(r)),e.renderComplex(),n.resolve(),n.promise()},postRenderReadOnly:function(){var e=this,t=e.getControl(),i=e.properties;i.extendedData&&i.extendedData.length>0?e.extendedData=bizagi.services.ajax.parseJSON(i.extendedData):e.extendedData={};var n=function(){var i=e.getReadonlyControl();i&&(e.input=t.html(i)),e.renderComplex()};e.ready?e.ready().done(function(){n()}):n()},getDisplayValue:function(){return this.getReadonlyValue()},setDisplayValue:function(e){this.setValue(e),this.setEditableValue(e)},getValue:function(){return this.getEditableValue()},getPropertyValue:function(e,t){var i=this,n=i.properties,r=new $.Deferred;return i.dataService.multiaction().getPropertyData({url:n.dataUrl,xpath:n.xpath,idRender:n.id,xpathContext:n.xpathContext,idPageCache:n.idPageCache,property:e,extra:t,dataType:t?t.dataType:null}).done(function(e){"error"==e.type?(i.getFormContainer().addErrorMessage(e.message),r.reject(e)):r.resolve(e)}).fail(function(e,t,i){r.reject(e,t,i)}),r.promise()},saveForm:function(){return this.getFormContainer().saveForm()},getRenderElements:function(e){var t=$(),i=this.getFormContainer().getRenders(e);return $.each(i,function(e,i){t=t.add($(i.element))}),t},getServerResourceURL:function(e){var t="Rest/Userfields/{0}/resource/{1}/{2}";t=t.replace("{0}",this.properties.userfieldGuid),e=e.replace("\\","__").replace("/","__");var i=bizagi.util.detectDevice();return t=(t=t.replace("{1}",i)).replace("{2}",e)},getRenderValue:function(e){var t,i=this.getFormContainer().getRenders(e);return $.each(i,function(e,i){t&&!i.properties.editable||(t=i)}),t?t.getValue():null},refreshForm:function(){var e=this.properties;this.getFormContainer().refreshForm(e.id)},showDialog:function(e,t){bizagi.util.mustImplement("Must implement the showDialog method")},showPopup:function(e,t){bizagi.util.mustImplement("Must implement the showPopup method")},updateOriginalValue:function(){this.properties.originalValue=this.value=this.properties.value}}),bizagi.rendering.userfieldDefinition.extend("bizagi.rendering.basicUserField",{},{getEditableControl:function(){},renderComplex:function(){},getEditableValue:function(){return bizagi.rendering.render.prototype.getValue.apply(this,arguments)},setEditableValue:function(e){return bizagi.rendering.render.prototype.setValue.apply(this,arguments)},getReadonlyControl:function(){},getReadonlyValue:function(){return bizagi.rendering.render.prototype.getDisplayValue.apply(this,arguments)},dispose:function(){this._super()}}),bizagi.rendering.render.extend("bizagi.rendering.userfieldWrapper",{},{init:function(e){this._super(e),this.initialParams=e,this.userfieldGuid=this.properties.userfieldGuid,this.userfieldName=this.properties.control},internalPostRender:function(){var e=this;$.when(e.getUserfieldControl()).done(function(t){return t.element=e.element,e.column&&(t.isColumn=!0,t.grid=e.grid,t.surrogateKey=e.surrogateKey,t.properties.xpathContext=e.getControlXpathContext(t),t.getControl=e.column.getControl),t.internalPostRender()})},getControlXpathContext:function(e){var t=e.properties;return e.isColumn?t.xpathContext.length>0?t.xpathContext+"."+e.grid.properties.xpath+"[id="+e.surrogateKey+"]":e.grid.properties.xpath+"[id="+e.surrogateKey+"]":t.xpathContext},getUserfieldControl:function(){var self=this,sControl=self.userfieldName,exists=eval("bizagi.rendering."+sControl+" !== undefined"),def=new $.Deferred;if(exists)$.when(self.parent.ready()).done(function(){def.resolve(self.createUserfieldInstance(sControl))});else{var device=bizagi.util.detectDevice();device.indexOf("smartphone")>=0?device="smartphone":device.indexOf("tablet")>=0&&(device="tablet"),$.when(self.dataService.getUserfieldDefinition({userfield:self.userfieldGuid,device:device})).pipe(function(e){self.loadUserfield(e),def.resolve(self.createUserfieldInstance(sControl))})}return def.promise()},createUserfieldInstance:function(sControl){var self=this,control;try{var dynamicFunction="var baDynamicFn = function(renderParams){ \r\n";dynamicFunction+="return new bizagi.rendering."+sControl+"(renderParams);\r\n",dynamicFunction+="}\r\n",dynamicFunction+="baDynamicFn",dynamicFunction=eval(dynamicFunction),control=dynamicFunction(self.initialParams)}catch(e){control=new bizagi.rendering.defaultUserField(self.initialParams)}return control.properties.isUserField=!0,self.userfieldInstance=control,self.replicateUserfieldMethods(control),self.userfieldInstance.bind("renderchange",function(){self.triggerHandler("renderchange",arguments)}),control},replicateUserfieldMethods:function(control){var self=this;for(var key in control.Class.prototype)"init"!=key&&"constructor"!=key&&"Class"!=key&&"subscribe"!=key&&"unsubscribe"!=key&&"publish"!=key&&"render"!=key&&"triggerHandler"!=key&&"dispose"!=key&&(self[key]=eval("var tmp = function(){ if (this.userfieldInstance) return this.userfieldInstance."+key+".apply(this.userfieldInstance, arguments); return null;};tmp"));control.properties=self.properties,control.value=self.value},loadUserfield:function(data){var self=this;self.properties.styleGuid=self.properties.styleGuid||Math.guid();try{try{data=eval(data)}catch(e){bizagi.log("Could not parse result userfield "+self.userfieldName,e.message)}$.each(data,function(index,val){if("js"==val.type)try{eval(val.content)}catch(e){bizagi.log("Could not parse result userfield3 "+self.userfieldName,e.message)}"css"==val.type&&bizagi.util.loadStyle(val.content,self.properties.styleGuid)});var control=eval("bizagi.rendering."+self.userfieldName)}catch(e){bizagi.log("Could not parse result userfield "+self.userfieldName,e.message)}},dispose:function(){var e=this;setTimeout(function(){e.userfieldInstance&&(e.userfieldInstance.unbind("renderchange"),e.userfieldInstance.dispose())},bizagi.override.disposeTime||50),e._super()}}),bizagi.rendering.render.extend("bizagi.rendering.association",{},{initializeData:function(e){this._super(e);var t=this.properties;t.property="flipped",t.idRender=this.properties.id,t.allowFlip=void 0===t.allowFlip||bizagi.util.parseBoolean(t.allowFlip),t.flipped=void 0!==t.flipped&&bizagi.util.parseBoolean(t.flipped),t.flipstate=t.flipped,t.leftData=t.leftData||[],t.rightData=t.rightData||[],t.value&&this.processPropertyValue()},renderControl:function(){var e=this,t=e.renderFactory.getTemplate("association"),i=new $.Deferred;return e.properties.property="flipped",e.properties.idRender=e.properties.id,$.when(e.getFlipAssociation()).done(function(n){e.makeJsonBase(),e.properties.flipped=bizagi.util.parseBoolean(n)||!1;var r=$.fasttmpl(t,e.properties,{getColumnData:e.getColumnData,getRightAssociation:e.getRightAssociation});e.setValue(JSON.encode(e.properties.formatJson)),i.resolve(r)}),i.promise()},getFlipAssociation:function(){return"execution"==this.getMode()&&this.dataService.getFlipAssociation(this.properties)},getDisplayValue:function(){return this.getValue()},getTemplateName:function(){return"association"},getColumnData:function(){var e=this.data,t=[],i=e.flipped?e.rightData:e.leftData;return $.each(i,function(e,i){t.push({id:i.id,value:i.value})}),t},getRightAssociation:function(e){var t=this.data,i=[],n=function(e,i){var n=!1;return $.each(t.formatJson.value,function(t,r){!n&&r.id==e&&r.value.indexOf(i)>=0&&(n=!0)}),n};return t.flipped?$.each(t.leftData,function(t,r){i.push({id:r.id,name:r.value,checked:n(r.id,e)})}):$.each(t.rightData,function(t,r){i.push({id:r.id,name:r.value,checked:n(e,r.id)})}),i},removeElement:function(e,t){var i=this;$.each(i.properties.formatJson.value,function(n,r){i.properties.flipped?r.id==t&&$.each(i.properties.formatJson.value[n].value,function(t,r){e==r&&i.properties.formatJson.value[n].value.splice(t,1)}):r.id==e&&$.each(i.properties.formatJson.value[n].value,function(e,r){t==r&&i.properties.formatJson.value[n].value.splice(e,1)})}),i.setValue(JSON.encode(i.properties.formatJson))},addElement:function(e,t){var i=this;$.each(i.properties.formatJson.value,function(n,r){i.properties.flipped?r.id==t&&i.properties.formatJson.value[n].value.push(e):r.id==e&&i.properties.formatJson.value[n].value.push(t)}),i.setValue(JSON.encode(i.properties.formatJson))},makeJsonBase:function(){this.properties.formatJson=this.properties.formatJson||{leftXpath:this.properties.leftXpath,rightXpath:this.properties.rightXpath,leftFactName:this.properties.leftFactName,rightFactName:this.properties.rightFactName,value:this.properties.value}},hasValue:function(){if(this.properties.formatJson)var e=this.properties.formatJson.value;else e=this.properties.value;for(var t=0,i=e.length;t<i;t++){var n=e[t];if(n&&n.value.length>0)return!0}return!1},processPropertyValue:function(){for(var e=this.properties,t=e.value,i=[],n=0,r=t.length;n<r;n++){var a=t[n];i.push({id:a[0],value:a[1]})}e.value=i}}),bizagi.rendering.render.extend("bizagi.rendering.ecm",{BA_ACTION_PARAMETER_PREFIX:bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,BA_CONTEXT_PARAMETER_PREFIX:bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,BA_PAGE_CACHE:bizagi.render.services.service.BA_PAGE_CACHE},{initializeData:function(e){this._super(e);var t=this.properties;if(t.maxSize=Number(t.maxSize)||("undefined"!=typeof BIZAGI_SETTINGS&&void 0!==BIZAGI_SETTINGS.UploadMaxFileSize?Number(BIZAGI_SETTINGS.UploadMaxFileSize):t.maxSize=Number(t.maxSize)||4091904),t.maxFiles=Number(t.maxfiles)||999,t.validExtensions=t.validExtensions||"",t.validExtensions.length>0&&t.validExtensions.indexOf(".")<0){for(var i=t.validExtensions.split(";"),n=0;n<i.length;n++)i[n]="*."+i[n];t.validExtensions=i.join(";")}t.addUrl=this.dataService.serviceLocator.getUrl("render-ecm-upload-url")+"?action=uploadECMFile",t.editUrl=this.dataService.serviceLocator.getUrl("render-ecm-upload-url")+"?action=updateECMFileContent",t.deleteUrl=t.deleteUrl||void 0,t.allowDelete=null===bizagi.util.parseBoolean(t.allowDelete)||bizagi.util.parseBoolean(t.allowDelete),t.q_xpath=bizagi.util.encodeXpath(t.xpath),t.showMetadata=void 0===t.showMetadata||null===t.showMetadata||bizagi.util.parseBoolean(t.showMetadata);var r=this.getResource("dateFormat"),a=this.getResource("timeFormat");t.displayValue="",t.showTime=void 0!==t.showTime&&bizagi.util.parseBoolean(t.showTime),t.dateFormat=t.dateFormat||r,t.timeFormat=t.timeFormat||a,t.fullFormat=t.dateFormat,this.files=t.value||[],this.filesCount=this.files.length,t.xpathContext=this.parent.properties.xpathContext||t.xpathContext||""},renderControl:function(e,t){var i=this,n=i.properties,r=i.renderFactory.getTemplate("ecm"),a=i.getMode(),o=new $.Deferred;n.value=t?[[t.idFileUpload,t.fileName]]:i.value;var s=$.fasttmpl(r,n,{getFileExtension:i.getFileExtension,isImage:i.isImage});if(null!=i.properties.value){var l=i.properties.value.length;0==l&&o.resolve(s),$.each(i.properties.value,function(e,n){var r={};r.idFileUpload=n[0],r.fileName=n[1],r.idPageCache=i.properties.idPageCache,r.xpathContext=i.getXpathContext(),r.xPath=i.properties.xpath,r.editable=i.properties.editable,r.idAttrib=i.properties.idAttrib;var u=i.getFormContainer();u&&u.properties&&u.properties.sessionId&&(r.sessionId=u.properties.sessionId),"execution"==a&&$.when(i.renderFileLayout(r,t)).done(function(e){l--,bizagi.loader.productBuildToAbout&&0==bizagi.loader.productBuildToAbout.indexOf("10.4")&&(e=e.replaceAll("Handlers/MetadataFile","Handlers/Metadata")),s=i.replaceItemHtml(s,i.properties.id+"-"+r.idFileUpload,e),0==l&&o.resolve(s)})})}else o.resolve(s);return o.promise()},replaceItemHtml:function(e,t,i){return e.replace("{{"+t+"}}",i)},renderFileLayout:function(e,t){var i=this,n=i.getFormContainer(),r=i.renderFactory.getTemplate("ecm-metadata"),a=(i.getControl(),$.Deferred());return $.when(i.dataService.getECMMetadata(e),t?[t]:i.dataService.getFileProperties(e)).done(function(t,o){o[0].data=e,o[0].xpathContext=o[0].xpathContext||n.properties.xpathContext||"",o[0].xpath=i.properties.xpath,t[0].filename=e.fileName,t[0].url=i.buildItemUrl(o[0]),t[0].ecm_ecmStatus=o[0].ecmStatus,t[0].ecm_isVisible=o[0].isVisible,t[0].ecm_allowUpdateMetadata=o[0].allowUpdateMetadata,t[0].ecm_allowDelete=o[0].allowDelete,t[0].ecm_allowUpdateContent=o[0].allowUpdateContent,t[0].ecm_allowView=o[0].allowView,t[0].ecm_allowCheckOut=o[0].allowCheckOut,t[0].ecm_allowCancelCheckOut=o[0].allowCancelCheckOut,t[0].ecm_allowEdit=e.editable&&o[0].allowEdit,t[0].ecm_ecmStatus=o[0].ecmStatus,t[0].idFileUploads=o[0].idFileUpload,t[0].xpath=o[0].xpath,t[0].value=bizagi.util.parseBoolean(o[0].value),t[0].deviceType=bizagi.detectDevice();var s=$.fasttmpl(r,t[0]);a.resolve(s)}),a.promise()},isImage:function(e){var t=this.getFileExtension(e);return["JPG","JPEG","GIF","PNG","BMP"].indexOf(t.toUpperCase())>-1},replaceFilesHtml:function(e,t){return e.replace("{{files}}",t)},renderReadOnly:function(){return this.renderControl()},canBeSent:function(){return!1},buildItemUrl:function(e){var t=bizagi.cookie("JSESSIONID");return this.dataService.getECMFileUrl({idFileUpload:e.idFileUpload,xPath:e.xpath,xpathContext:e.xpathContext,idAttrib:e.data.idAttrib,idPageCache:this.properties.idPageCache,fileName:e.data.fileName.replace(/ /g,"_"),p_sessionId:t,sessionId:e.data.sessionId||""})},buildAddParams:function(){var e=this.properties,t={};return t.fileExt=e.validExtensions,t.fileDesc=e.validExtensions?this.getResource("render-upload-allowed-extensions")+e.validExtensions:"",t.xPath=e.xpath,t.idAttrib=e.idAttrib,t.xpathContext=e.xpathContext,t.metaValues=[],t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+this.Class.BA_PAGE_CACHE]=e.idPageCache,t},getFileExtension:function(e){return(e=e||"").split(".").pop()},setValue:function(e,t){var i=this.properties;this._super(e,t),this.files=i.value||[],this.filesCount=this.files.length?this.files.length:i.value},getXpathContext:function(){return this.properties.xpathContext||""},getUploadXpath:function(){return this.properties.xpath},deleteUploadItem:function(e,t){var i=this,n=i.properties,r={idFileUpload:t,xPath:n.xpath,idAttrib:n.idAttrib,idPageCache:n.idPageCache,xpathContext:i.getXpathContext()};return i.dataService.deleteECMFile(r).pipe(function(){i.filesCount=i.filesCount-1,i.files=$.grep(i.files,function(e){return e[0]!=t})})}}),bizagi.rendering.render.extend("bizagi.rendering.searchList",{},{initializeData:function(e){this._super(e);var t=this.properties;t.maxRecords=Number(t.maxRecords)||20,t.editable=null===bizagi.util.parseBoolean(t.editable)||bizagi.util.parseBoolean(t.editable),this.setValue(t.value)},renderControl:function(){var e=this.properties,t=this.renderFactory.getTemplate("searchList");return $.fasttmpl(t,{id:e.id,xpath:e.xpath,value:e.value,editable:!0},{formatItem:this.formatItem})},setValue:function(e){this.value=JSON.encode({value:e}),this.triggerRenderChange()},addElement:function(e){var t=JSON.parse(this.value);t.value.push(e),this.setValue(t.value)},removeElement:function(e){var t=JSON.parse(this.value),i=[];$.each(t.value,function(t,n){n.id!=e.id&&i.push({id:n.id,value:n.value})}),this.setValue(i)},removeLastElement:function(){var e=JSON.parse(this.value);e.value.length>0&&(e.value.pop(),this.setValue(e.value))},getData:function(e){var t=this,i=t.properties,n=new $.Deferred;return t.dataService.getSearchData({url:i.dataUrl,xpath:i.xpath,idRender:i.id,xpathContext:i.xpathContext,idPageCache:i.idPageCache,term:i.term,extra:e}).done(function(e){i.data=e,n.resolve(i.data)}).fail(function(e){var i=e.hideStatus||!1;n.resolve({}),i||t.trigger("onSearchError",e)}),n.promise()},submitData:function(){var e={};e[this.properties.xpath]=this.getValue(),this.submitOnChange(e)},canBeSent:function(){return!0},formatItem:function(e){return bizagi.util.formatItem(e)}}),bizagi.rendering.render.extend("bizagi.rendering.image",{BA_ACTION_PARAMETER_PREFIX:bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,BA_CONTEXT_PARAMETER_PREFIX:bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,BA_PAGE_CACHE:bizagi.render.services.service.BA_PAGE_CACHE},{initializeData:function(e){this._super(e);var t=this.properties;if(t.editable=!!bizagi.util.parseBoolean(t.editable),t.maxSize=Number(t.maxSize)||("undefined"!=typeof BIZAGI_SETTINGS&&void 0!==BIZAGI_SETTINGS.UploadMaxFileSize?Number(BIZAGI_SETTINGS.UploadMaxFileSize):t.maxSize=Number(t.maxSize)||4091904),t.validExtensions=t.validExtensions||"",t.validExtensions.length>0&&t.validExtensions.indexOf(".")<0){for(var i=t.validExtensions.replace(/\ /gi,"").split(";"),n=0;n<i.length;n++)if(0!=i[n].length)i[n]="*."+i[n].replaceAll(" ","");else{i.indexOf(i[n]);i.splice(n,1)}t.validExtensions=i.join(";")}t.addUrl=t.addUrl||this.dataService.getUploadAddFileUrl(t.isUserPreference),t.allowDelete=null!==bizagi.util.parseBoolean(t.allowDelete)&&bizagi.util.parseBoolean(t.allowDelete),t.isAutoWidth=!1,t.isAutoHeight=!1,-1==t.width?(t.width="99%",t.isAutoWidth=!0):t.width=t.width+"px",-1==t.height?(t.height="auto",t.isAutoHeight=!0):t.height=t.height+"px"},renderControl:function(){var e=this,t=new $.Deferred,i=e.renderFactory.getTemplate("image"),n=bizagi.util.isOfflineForm({context:e});return $.when(e.buildItemUrl()).done(function(r){if(!e.isDisposed()){e.properties.url=""!==r?r:"",e.properties.value=e.value=e.properties.url.length>0?[e.properties.url]:null,e.setValue(e.properties.value),n&&-1!==r.indexOf("Invalid case id")&&(e.properties.url="");var a=$.fasttmpl(i,{url:e.properties.url});t.resolve(a)}}),t.promise()},renderReadOnly:function(){var e=this.renderFactory.getTemplate("image-readonly");return $.fasttmpl(e)},getTemplateItem:function(){return this.renderFactory.getTemplate("image-item")},renderUploadItem:function(e){var t=this,i=t.properties,n=t.getMode(),r="",a=new $.Deferred,o=t.getTemplateItem();return $.when(t.buildItemUrl()).done(function(e){r=e||r;var s=$.fasttmpl(o,{url:r,allowDelete:i.allowDelete,mode:n});t.properties.value=r.length>0?[r]:null,a.resolve(s)}),a.promise()},buildItemUrl:function(e){var t=this.properties,i=this.getMode(),n=new $.Deferred,r="",a=bizagi.util.isOfflineForm({context:this});if("execution"!==i)r="javascript:void(0);",n.resolve(r);else{var o={url:t.dataUrl,xpath:t.xpath,idRender:t.id,xpathContext:t.xpathContext,idPageCache:t.idPageCache,property:e&&e.property?e.property:"fileContent",dataType:"text"};t.contexttype&&(o.contexttype=t.contexttype),t.isUserPreference&&(this.currentUser=bizagi.currentUser.idUser,o.xpathContext="@Context.Users[id == "+this.currentUser+"]",o.contexttype="entity",o.surrogatekey=this.currentUser),a?n.resolve(bizagi.util.getDataUrl(t)):this.dataService.multiaction().getPropertyData(o,"text").done(function(e){'"'===e.charAt(0)&&(e=e.slice(1,-1)),""!==e&&(r="data:image/png;base64,"+e),n.resolve(r)})}return n.promise()},buildFullItemUrl:function(){var e=new $.Deferred;return $.when(this.buildItemUrl({property:"fileFullContent"})).done(function(t){e.resolve(t)}),e.promise()},canBeSent:function(){return!1},setValue:function(e,t){this.properties;this._super(e,t)},getValue:function(){return this.properties.value||[]},isValid:function(e){var t=this.properties;if(0==bizagi.util.parseBoolean(t.visible))return!0;if(0==bizagi.util.parseBoolean(t.editable))return!0;if((this.setValidationMessage(""),t.required)&&(!(this.grid&&this.grid.isFromCreatedRow.apply(this))&&0===this.getValue().length)){var i=this.getResource("render-required-text").replaceAll("#label#",this.properties.displayName);return e.push({xpath:this.properties.xpath,message:i}),!1}return!0},buildAddParams:function(){var e=this,t=e.properties,i=e.getFormContainer(),n={};n[e.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpath"]=e.getUploadXpath(),n[e.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender"]=t.id,n[e.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext"]=t.xpathContext,n[e.Class.BA_CONTEXT_PARAMETER_PREFIX+e.Class.BA_PAGE_CACHE]=t.idPageCache,n[e.Class.BA_ACTION_PARAMETER_PREFIX+"sessionId"]=i.properties.sessionId,n[e.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="savefile",t.contexttype&&(n[e.Class.BA_CONTEXT_PARAMETER_PREFIX+"contexttype"]=t.contexttype);try{null!=BIZAGI_SESSION_NAME?n[BIZAGI_SESSION_NAME]=i.properties.sessionId:n.JSESSIONID=i.properties.sessionId}catch(e){n.JSESSIONID=i.properties.sessionId}return n},getUploadXpath:function(){return this.properties.xpath},emptyControlByAsyncRenderDeferred:function(){this.getControl().empty()}}),bizagi.rendering.render.extend("bizagi.rendering.geolocation",{},{init:function(e){this._super(e);var t=this.properties;t.allowUpdate=bizagi.util.parseBoolean(t.allowUpdate),this.geoloc=window.navigator.geolocation},renderControl:function(){var e=this.renderFactory.getTemplate("geolocation");return $.fasttmpl(e,this.properties)},isValid:function(e){return this._super(e)},setDisplayValue:function(e){this.setValue(e,!1)},configureHandlers:function(){},getCurrentPosition:function(e,t){var i=this;if(void 0!==i.geoloc){return i.geoloc.getCurrentPosition(function(t){e&&e(t)},function(e){var n=i.getErrorMessage(e);t&&t(n)})}t&&t(bizagi.localization.getResource("render-control-unsuported-by-browser").replace("{0}",i.properties.type))},getErrorMessage:function(e){var t="";switch(e.code){case e.PERMISSION_DENIED:case 1:t=bizagi.localization.getResource("render-geolocation-permission-denied");break;case e.POSITION_UNAVAILABLE:case 2:t=bizagi.localization.getResource("render-geolocation-position-unavailable");break;case e.TIMEOUT:case 3:t=bizagi.localization.getResource("render-geolocation-timeout");break;default:t="WD: "+bizagi.localization.getResource("render-geolocation-permission-denied")}return t}}),bizagi.rendering.element.extend("bizagi.rendering.columns.column",{},{init:function(e){this._super(e),this.decoratedClass=e.decorated,this.data=e.data,e.singleInstance?(this.decorated=new this.decoratedClass({data:this.data,parent:this.parent,renderFactory:this.renderFactory,dataService:this.dataService}),this.decorated.getControl=this.getControl,e.decorated=this.decorated,this.decorated.properties.isColumn=!0):this.decorateRenders=[],this.grid=e.parent;var t=this.properties;t.columnVisible=null==bizagi.util.parseBoolean(t.columnVisible)||bizagi.util.parseBoolean(t.columnVisible),t.align=t.align||"center",t.textFormat=t.textFormat||{},t.submitOnChange=void 0!==t.submitOnChange&&bizagi.util.parseBoolean(t.submitOnChange),t.singleInstance=e.singleInstance,t.editable=void 0===t.editable||bizagi.util.parseBoolean(t.editable),t.visible=void 0===t.visible||bizagi.util.parseBoolean(t.visible),t.required=void 0!==t.required&&bizagi.util.parseBoolean(t.required),t.showColumn=void 0===t.showColumn||bizagi.util.parseBoolean(t.showColumn);try{e.parent&&"boolean"==typeof e.parent.properties.editable&&!e.parent.properties.editable&&(t.editable=!1)}catch(e){}this.readonly=void 0!==t.readonly&&t.readonly,this.readonly&&(t.editable=required=!1),this.originalProperties=JSON.parse(JSON.encode(t))},isReadonly:function(){return!1},getControl:function(){return $(".ui-bizagi-render-control",this.element||this.observableElement)},getDecorated:function(e){if(this.properties.singleInstance)return this.decorated;var t=this.decorateRenders[e];if(null==t){"object"!=typeof this.decorateRenders&&(this.decorateRenders=[]);var i=new this.decoratedClass({data:bizagi.clone(this.data),parent:this.parent,renderFactory:this.renderFactory,dataService:this.dataService});t=i,this.decorateRenders[e]=i,t.surrogateKey=e,this.applyOverrides(t),"summary"==e&&"columnMoney"!=t.properties.type&&"columnNumber"!=t.properties.type&&(t.setDisplayValue=function(e){this.getControl().html(e)})}return t},ready:function(){return this.readyDeferred.promise()},initialize:function(){},canBeSent:function(e,t){var i=this.getDecorated(e);return t&&(i.properties.visible=t.visible,i.properties.editable=t.editable),i.canBeSent()||!this.properties.editable&&this.hasChanged()||!i.properties.editable&&this.hasChanged()},isValueValid:function(e,t,i,n){var r=this.getDecorated(e),a=[];return n.visible&&(this.setValue(e,t),r.properties=$.extend(r.properties,n),this.grid&&void 0===r.grid&&(r.grid=this.grid),r.isValid(a)),!(a.length>0)||($.each(a,function(e,t){i.push(t.message)}),!1)},applyOverrides:function(e){},render:function(e,t){var i=this,n=i.properties,r=i.getDecorated(e);if(r.grid=i.grid,r.column=this,r.surrogateKey=e,i.setValue(e,t),i.overrideDecoratedRenderProperties(e),i.changed=!1,!n.editable&&"CALLER_RENDER_READ_ONLY_COLUMNSLINK"!==arguments[3])return i.renderReadOnly.apply(i,arguments);i.readyDeferred=new $.Deferred;var a=r.render("cell");return r.bind("renderchange",function(){i.changed=!0}),i.bind("rendered",function(){i.readyDeferred.resolve()}),a},postRender:function(e,t){this.getDecorated(e).postRenderElement(t)},renderReadOnly:function(e,t){var i=this,n=i.getDecorated(e);n.grid=i.grid,n.column=this,n.surrogateKey=e,i.setValue(e,t),i.overrideDecoratedRenderProperties(e),n.properties.editable=!1,i.readyDeferred=new $.Deferred;var r=n.render("cell.readonly");return i.bind("rendered",function(){i.readyDeferred.resolve()}),r},renderSummary:function(e,t){var i=this.renderFactory.getTemplate("cell.summary");return $.tmpl(i).html()},postRenderReadOnly:function(e,t){var i=this.getDecorated(e),n=this.properties.editable;i.properties.editable=!1,this.properties.singleInstance&&(i.element=t),i.postRenderElement(t),i.properties.editable=n},postRenderSummary:function(){return!1},getCell:function(){return this.decorated.getDisplayValue()},setSurrogateKey:function(e){this.surrogateKey=e},setValue:function(e,t){var i=this.getDecorated(e);"undefined"!=i&&null!=i&&(i.properties.originalValue=t,i.properties.previousValue=t,null==t&&void 0!==this.properties.defaultvalue&&null!=i.grid&&(t=this.setDefaultValue(e,i)),i.properties.value=t,i.setValue(t,!1))},setDefaultValue:function(e,t){var i=this.properties.defaultvalue;return t.grid.changes[e]=t.grid.changes[e]||{},t.grid.changes[e][this.properties.xpath]=i,i},getValue:function(e){return this.getDecorated(e).getValue()},getCompositeValue:function(e){return this.getValue(e)},getElementType:function(){return bizagi.rendering.element.ELEMENT_TYPE_COLUMN},hasChanged:function(){return this.changed},trigger:function(e,t){this.decorated&&this.decorated.trigger(e,t)},triggerHandler:function(e,t){this.decorated&&this.decorated.triggerHandler(e,t)},bind:function(e,t){this.decorated&&this.decorated.bind(e,t)},unbind:function(e,t){this.decorated&&this.decorated.unbind(e,t)},overrideDecoratedRenderProperties:function(e){var t=this.getDecorated(e);t.properties.editable=this.properties.editable,t.properties.visible=this.properties.visible,t.properties.required=this.properties.required},overrideProperties:function(e){this.properties.editable=e.editable||this.properties.editable,this.properties.visible=e.visible||this.properties.visible,this.properties.required=e.required||this.properties.required},getSortName:function(){var e=this.getAnyDecoratedInstance();return e&&e.getSortColumn?e.getSortColumn():this.properties.xpath},getAnyDecoratedInstance:function(){var e;for(e in this.decorateRenders)break;return e?this.decorateRenders[e]:null},dispose:function(){var e=this;setTimeout(function(){e.decorated&&(e.decorated.unbind("renderchange"),e.decorated.dispose()),e.decorateRenders&&bizagi.util.arrayEach(e.decorateRenders,function(e,t){t&&(t.unbind("renderchange"),t.dispose())})},bizagi.override.disposeTime||50),e._super()}}),bizagi.rendering.columns.column.extend("bizagi.rendering.columns.readonly",{},{init:function(e){this._super(e),this.properties.editable=required=!1},isReadonly:function(){return!0},render:function(e,t){if("string"==typeof t){var i=t.replaceAll("\\n","<br/>");return i=i.replaceAll("\n","<br/>")}return null===t?"":t},postRender:function(e,t){},renderReadOnly:function(e,t){return this.render(e,t)},postRenderReadOnly:function(e,t){},isValueValid:function(){return!0}}),bizagi.rendering.columns.column.extend("bizagi.rendering.columns.column",{},{applyOverrides:function(e){e&&e.getControl&&(this.originalGetControl=e.getControl,e.getControl=this.getControl)},getControl:function(){var e=this._super();return e&&0!=e.length||(e=$(".ui-bizagi-cell-readonly",this.element||this.observableElement)),e},render:function(e,t,i){var n=this._super(e,t,i),r=this.getDecorated(e);return r.element&&(r.element.removeClass("ui-bizagi-render-display-normal ui-bizagi-render-display-vertical ui-bizagi-render-display-reversed").removeClass("ui-bizagi-render-display-vertical-reversed ui-bizagi-render-display-label ui-bizagi-render-display-value"),r.element.addClass("ui-bizagi-render-display-cell")),n},postRenderReadOnly:function(e,t){var i=this.getDecorated(e),n=this.properties.editable;i.properties.editable=!1,null==i.grid&&(i.grid=this.grid),this.properties.singleInstance&&(i.element=t),i.postRenderElement(t),i.properties.editable=n},applyColumnStyles:function(e){var t=this.properties;(e=$(e)).css("-webkit-box-pack",t.align),t.textFormat.background&&(e.css("background-color",t.textFormat.background),e.css("background-image","none"))}}),bizagi.rendering.columns.column.extend("bizagi.rendering.columns.combo",{},{init:function(e){this._super(e);var t=this.properties;t.recalculate=bizagi.util.parseBoolean(t.recalculate)||!1},applyOverrides:function(e){var t=this.properties;this._super(e),t.recalculate||(e.originalGetData=e.getData,e.getData=this.getDataForAllCells,e.findDataById=this.findDataById)},findDataById:function(e){var t={};return this.column&&this.column.comboData&&$.each(this.column.comboData,function(i,n){n.id==e&&(t=n)}),t},getDataForAllCells:function(e){var t=this.column;return t.comboData?t.comboData:t.fetchingData?t.dataPromise:(t.fetchingData=!0,t.dataPromise=$.when(this.originalGetData(e)).pipe(function(e){return t.comboData=e,t.fetchingData=!1,e}),t.dataPromise)},setValue:function(e,t){var i=this.getDecorated(e);if(null!==i){if("summary"==e)return this._super(e,t);if(t&&bizagi.util.isString(t))this._super(e,t);else if(t&&t.length>0){var n={id:t[0][0],value:t[0].length>2?$.grep(t[0],function(e,t){return 0!=t}):t[0][1]};this._super(e,n),i.selectedValue=n.value}else t&&t.id&&t.value?(this._super(e,t),i.selectedValue=t.value):"columnRadio"==this.properties.type?(this._super(e,null),i.selectedValue=t):t&&"number"==typeof t?this._super(e,t):(this._super(e,null),i.selectedValue="")}},getCompositeValue:function(e){var t=this.getDecorated(e),i=t.getValue(),n=t.getSelectedValue(),r=[];return i&&(i.id>0||bizagi.util.isString(i.id))?(r.push([]),r[0].push(i.id),r[0].push(n)):r.push([]),r},getValue:function(e){var t=this.getDecorated(e).getValue();return t?t.id:t},render:function(e,t,i){var n=this.getDecorated(e),r=this.properties;r.recalculate&&n.resetData();var a=r.xpathContext.length>0?r.xpathContext+"."+this.grid.properties.xpath+"[id="+e+"]":this.grid.properties.xpath+"[id="+e+"]";return n.properties.xpathContext=a,this._super(e,t,i)},renderReadOnly:function(e,t){var i=this.getDecorated(e),n=this.properties,r=n.xpathContext.length>0?n.xpathContext+"."+this.grid.properties.xpath+"[id="+e+"]":this.grid.properties.xpath+"[id="+e+"]";return i.properties.xpathContext=r,this._super(e,t)}}),bizagi.rendering.columns.column.extend("bizagi.rendering.columns.date",{},{setValue:function(e,t){var i=this.getDecorated(e);if(null!==i){if(this._super(e,t),null==t&&void 0!==this.properties.defaultvalue&&(t=this.setDefaultValue(e,i)),"summary"==e)return this._super(e,t);null==t&&(i.setValue(t,!1),i.properties.displayValue="");var n=bizagi.util.dateFormatter.getDateFromInvariant(t,i.properties.showTime);if(0==n&&(n=bizagi.util.dateFormatter.getDateFromInvariant(t,!i.properties.showTime)),0!=n){var r=bizagi.localization.getResource("datePickerRegional"),a=bizagi.util.dateFormatter.formatDate(n,i.properties.fullFormat,r);i.properties.displayValue=a,i.setValue(t,!1)}}},setDefaultValue:function(e,t){var i=this.properties.defaultvalue;return t.grid.changes[e]=t.grid.changes[e]||{},i=bizagi.util.dateFormatter.getDateFromInvariant(i,!1),i=bizagi.util.dateFormatter.formatInvariant(i,!0),t.grid.changes[e][this.properties.xpath]=i,i}}),bizagi.rendering.columns.column.extend("bizagi.rendering.columns.search",{},{init:function(e){this._super(e);var t=this.properties;t.advancedSearch&&"execution"===this.getMode()&&(t.submitOnChange=bizagi.util.parseBoolean(t.submitOnChange)||!1,t.submitOnChange=!((t.submitVersion||1)>1)||t.submitOnChange)},render:function(e,t,i){var n=this.getDecorated(e),r=this.properties;r.recalculate&&n.resetData();var a=r.xpathContext.length>0?r.xpathContext+"."+this.grid.properties.xpath+"[id="+e+"]":this.grid.properties.xpath+"[id="+e+"]";return n.properties.xpathContext=a,this._super(e,t,i)},getValue:function(e){var t=this.getDecorated(e).getValue();return t&&"object"==typeof t?t.id:t},setValue:function(e,t){var i=this.getDecorated(e);if(null!==i){if("summary"==e)return this._super(e,t);if(t&&t.length>0){var n={id:t[0][0],value:t[0].length>2?$.grep(t[0],function(e,t){return 0!=t}):t[0][1]};this._super(e,n),i.selectedValue=n.value}else t&&t.id&&t.value?(this._super(e,t),i.selectedValue=t.value):t&&t.id&&t.label?(this._super(e,t),i.selectedValue=t.label):(this._super(e,t),i.selectedValue="")}}}),bizagi.rendering.container.extend("bizagi.rendering.contentPanel",{},{initializeData:function(e){this._super(e);var t=this.properties;t.displayName=t.displayName||""},renderContainer:function(){var e=this.properties,t=this.renderFactory.getTemplate("contentPanel"),i=$.fasttmpl(t,{displayName:e.displayName,mode:this.getMode(),uniqueId:e.uniqueId,isDesign:"design"===this.getMode(),messageValidation:e.messageValidation,cssClass:e.cssclass,guid:e.guid});return i=this.replaceChildrenHtml(i,this.renderChildrenHtml())},postRenderContainer:function(e){this._super(e)}}),$.Class.extend("bizagi.rendering.tablet.slideForm",{},{init:function(e,t,i){var n=this;this.dataService=e,this.renderFactory=t,this.slideFormDeferred=new $.Deferred,this.slideFormParams=i||{},n.slideForm=$("<div>").addClass("slideForm"),n.applySlidePlugin(n.slideForm).done(function(e){n.slideFormDeferred.resolve(e)}).fail(function(){n.slideFormDeferred.reject()}),this.slideForm.parent().parent()&&this.slideForm.parent().parent().scrollTop("0"),this.slideForm.parent().parent()&&!this.slideForm.parent().parent().hasClass("scroll-content")&&(this.slideForm.parent().parent().parent().scrollTop("0"),this.slideForm.parent().parent().find(".ui-bizagi-form").hide())},applySlidePlugin:function(e){var t=this,i=new $.Deferred,n={buttons:[]};t.slideFormParams.showSaveButton&&n.buttons.push({text:bizagi.localization.getResource("render-form-dialog-box-save"),click:function(){if(t.form&&t.form.validateForm()){var n={};t.form.collectRenderValues(n),t.slideFormParams.allowGetOriginalFormValues&&(n.formValues=t.form.children),n.idPageCache=t.form.getPageCache(),t.slideFormParams.onSave?$.when(t.slideFormParams.onSave(n)).done(function(n){if(null==n||1==n||"success"==n.type)e.parent().css("webkit-animation-name","slideFormExit"),setTimeout(function(){i.resolve(),e.slideContent("close"),e.parent().detach()},300);else if("validationMessages"==n.type){t.form.addValidationMessage(n.messages);var r=$(".ui-bizagi-notifications-container-bottom");$.each(r,function(e,t){"block"==$(t).css("display")&&$(t).appendTo("body")})}else"error"==n.type&&t.form.addErrorMessage(n.message)}).fail(function(e){var i=e.responseText?e.responseText:"string"==typeof e?e:e.toString();if("string"==typeof i)try{i=JSON.parse(i).message}catch(e){i=(i=i.match(/"message":(.*)",/)[0]).substr(11,i.length-13)}else i.message||(i=e);t.form.validateForm(),t.form.clearValidationMessages(),t.form.addValidationMessage(i)}):(e.parent().css("webkit-animation-name","slideFormExit"),setTimeout(function(){e.slideContent("close"),e.parent().detach(),i.reject()},300))}}}),n.buttons.push({text:bizagi.localization.getResource("render-form-dialog-box-cancel"),click:function(){e.parent().css("webkit-animation-name","slideFormExit"),setTimeout(function(){e.slideContent("close"),e.parent().detach(),i.reject()},300)}});var r=$.extend(n,this.slideFormParams);return e.slideContent(r),i.promise()},render:function(e){return this.renderSlideForm(this.slideForm,e),this.slideFormDeferred.promise()},renderSlideForm:function(e,t){var i=this;e.empty(),$.when(i.dataService.getFormData(t)).pipe(function(e){return 0==t.editable&&(e.form.properties.editable=!1),i.form=i.renderFactory.getContainer({type:"form",data:e.form}),i.form.render()},function(t){var n=i.renderFactory.getCommonTemplate("form-error");$.tmpl(n,{message:t}).appendTo(e.find(".scroll-content"))}).done(function(n){n.appendTo(e),$(".slideForm .ui-bizagi-button-container").remove(),i.form.triggerHandler("ondomincluded"),i.form.bind("refresh",function(){i.renderSlideForm(e,t)})})}}),$.Class.extend("bizagi.rendering.slide.search",{},{init:function(e,t,i,n,r){var a=this;this.dataService=e,this.renderFactory=t,this.searchForms=i,this.searchParams=n,this.slideParams=r,this.slideDeferred=new $.Deferred,this.extraButtons=!!r.hasOwnProperty("buttons")&&r.buttons,a.slideBox=$("<div/>"),a.slideBox.empty(),a.applySlidePlugin(a.slideBox).done(function(e){a.slideDeferred.resolve(e)}).fail(function(){a.slideDeferred.reject()}),this.slideBox.parent().parent()&&this.slideBox.parent().parent().scrollTop("0")},render:function(e){return this.renderSearchDialog(e),this.slideDeferred.promise()},renderSearchDialog:function(e){var t=this;$.when(t.getSearchContainerData(e)).pipe(function(e){return form=t.renderFactory.getContainer({type:"form",data:e.form}),t.form=form,form.render()}).done(function(e){var i=$(".ui-bizagi-container-search-results",e);i.hide(),e.appendTo(t.slideBox),form.triggerHandler("ondomincluded"),t.currentSearchForm=t.form.firstChild(),t.currentSearchForm.triggerHandler("ondomincluded"),t.currentSearchForm.bind("instancerefresh",function(){i.show()}),t.currentSearchForm.bind("instanceSelected",function(e,i){t.slideBox.slideContent("close"),t.slideBox.detach(),t.slideBoxDeferred.resolve({id:i.id,label:""})})})},applySlidePlugin:function(e){var t=this,i=$.extend({buttons:[{text:bizagi.localization.getResource("render-form-dialog-box-search"),click:function(){t.currentSearchForm.performSearch(t.searchParams)}},{text:bizagi.localization.getResource("render-form-dialog-box-cancel"),click:function(){e.slideContent("close")}}]},this.slideParams);return t.slideBoxDeferred=new $.Deferred,e.slideContent(i),t.slideBoxDeferred.promise()},getSearchContainerData:function(e){var t=this,i=new $.Deferred,n={form:{properties:{},elements:[]}},r=n.form,a=t.searchForms[0];if(t.searchForms.length>1){var o={properties:{type:"tab"},elements:[]},s=[];$.each(t.searchForms,function(e,i){var n=i.default||!1,l={};l.properties={id:e,type:"tabItem",displayName:i.caption},l.elements=[],n?(o.elements.push({container:l}),r=l,a=t.searchForms[0]):s.push({container:l})}),$.each(s,function(e,t){o.elements.push(t)}),n.form.elements.push({container:o})}return $.when(t.getSearchFormData(e,a)).done(function(e){r.elements.push(e),i.resolve(n)}),i.promise()},getSearchFormData:function(e,t){return this.dataService.getSearchFormData($.extend(e,{idSearchForm:t.id,url:t.url})).pipe(function(t){return t.form.properties.idRender=e.idRender,t})}}),$.Class.extend("bizagi.rendering.tablet.slide.gridView",{},{init:function(e,t,i){var n=this;this.dataService=e,this.renderFactory=t,this.slideFormDeferred=new $.Deferred,this.slideFormParams=i||{},n.slideForm=$("<div>").addClass("slideForm"),n.applySlidePlugin(n.slideForm).done(function(e){n.slideFormDeferred.resolve(e)}).fail(function(){n.slideFormDeferred.reject()})},applySlidePlugin:function(e){var t=this,i=new $.Deferred,n={buttons:[]};return n.buttons.push({text:bizagi.localization.getResource("workportal-case-dialog-box-close"),click:function(){e.slideContent("close"),e.parent().detach(),i.reject()}}),1==t.slideFormParams.allowEdition&&n.buttons.push({text:bizagi.localization.getResource("render-form-dialog-box-save"),click:function(){e.slideContent("close"),e.parent().detach();var n={};t.form.collectRenderValues(n),i.resolve(n)}}),n=$.extend(n,this.slideFormParams),e.slideContent(n),this.slideForm.parent().parent()&&this.slideForm.parent().parent().scrollTop("0"),i.promise()},render:function(e){return this.renderSlideForm(this.slideForm,e),this.slideFormDeferred.promise()},renderSlideForm:function(e,t){var i=this,n=i.transformData(t);e.empty(),i.form=i.renderFactory.getContainer({type:"form",data:n.form}),$.when(i.form.render()).done(function(t){t.appendTo(e),i.form.triggerHandler("ondomincluded"),$(".slideForm .ui-bizagi-button-container input:button").remove()})},transformData:function(e){var t=this,i=e.row,n=e.columns,r=e.xpathContext.length>0?e.xpathContext+"."+e.xpath+"["+e.row[0]+"]":e.xpath+"[id="+e.row[0]+"]",a={type:"form",form:{elements:[],pageCacheId:e.pageCacheId,sessionId:e.sessionId,properties:{xpathContext:r},actions:t.transformActions(e.xpath,e.actions),validations:t.transformValidations(e.xpath,e.validations)}};return $.each(i,function(e,i){if(e>0){var r={render:{properties:$.extend({},n[e-1].properties)}};r.render.properties.type=t.mapRenderType(r.render.properties.type),r.render.properties.displayType="both",0==t.slideFormParams.allowEdition&&(r.render.properties.editable=!1),r.render.properties.value=t.mapValue(r.render.properties.type,i),r.render.properties.recalculate&&(r.render.properties.data=null),void 0!==r.render.properties.columnVisible&&(r.render.properties.visible=r.render.properties.columnVisible),"upload"==r.render.properties.type&&(r.render.properties.isColumn=!0),a.form.elements.push(r)}}),a},mapRenderType:function(e){return"FormLink"==(e=e.substring(6,e.length))?"formLink":e=e.toLowerCase()},mapValue:function(e,t){return"combo"==e||"radio"==e?t&&t.length>0?[{id:t[0][0],value:t[0].length>2?$.grep(t[0],function(e,t){return 0!=t}):t[0][1]}]:null:t},transformActions:function(e,t){var i=this,n=[];return bizagi.util.isEmpty(t)?n:($.each(t,function(t,r){var a=!1;for(t=0;t<r.dependencies.length;t++)-1!=r.dependencies[t].indexOf(e)&&(a=!0);if(a){var o=JSON.parse(JSON.encode(r));for(t=0;t<o.dependencies.length;t++)o.dependencies[t]=o.dependencies[t].replaceAll(e+"[].","");i.transformConditions(e,o.conditions),i.transformCommands(e,o.commands),i.transformCommands(e,o.elseCommands),n.push(o)}}),n)},transformValidations:function(e,t){var i=this,n=[];return bizagi.util.isEmpty(t)?n:($.each(t,function(t,r){var a=JSON.parse(JSON.encode(r));i.transformConditions(e,a.conditions),n.push(a)}),n)},transformConditions:function(e,t){if(t.expressions)for(i in t.expressions)this.transformConditions(e,t.expressions[i]);else t.simple?this.transformConditions(e,t.simple):t.complex?this.transformConditions(e,t.complex):t.xpath&&(t.xpath=t.xpath.replaceAll(e+"[].",""),"xpath"==t.argumentType&&(t.argument=t.argument.replaceAll(e+"[].","")))},transformCommands:function(e,t){var i=null;if(null!=t&&0!=t.length){for(var n=0;n<t.length;n++)"refresh"==t[n].command?i=n:(t[n].xpath&&(t[n].xpath=t[n].xpath.replaceAll(e+"[].","")),"xpath"==t[n].argumentType&&(t[n].argument=t[n].argument.replaceAll(e+"[].","")));null!=i&&t.splice(n,1)}}}),$.Class.extend("bizagi.rendering.tablet.slide.upload",{},{init:function(e,t,i){var n=this;this.dataService=e,this.renderFactory=t,this.slideFormDeferred=new $.Deferred,this.slideFormParams=i||{},n.slideForm=$("<div>").addClass("slide-upload"),n.applySlidePlugin(n.slideForm).done(function(e){n.slideFormDeferred.resolve(e)}).fail(function(){n.slideFormDeferred.reject()})},applySlidePlugin:function(e){var t=new $.Deferred,i={buttons:[]};return i.buttons.push({text:bizagi.localization.getResource("workportal-case-dialog-box-close"),click:function(){e.slideContent("close"),e.parent().detach(),t.reject()}}),i=$.extend(i,this.slideFormParams),e.slideContent(i),t.promise()},render:function(e){return this.renderUploadFile(this.slideForm,e),this.slideFormDeferred.promise()},renderUploadFile:function(e,t){var i=this.renderFactory.getCommonTemplate("uploadSlide");$.tmpl(i,{url:t.url}).appendTo(e).find(".ui-slide-upload-link").click(function(){$.when(bizagi.showConfirmationBox(bizagi.localization.getResource("render-tablet-slide-upload-confirmation"))).done(function(){window.location.href=t.url})})}}),bizagi.rendering.form.extend("bizagi.rendering.form",{init:function(e){this.warnings={},this.errors={},this._super(e)},postRenderContainer:function(e){var t=this,i=t.properties;t._super(e);var n=t.getButtons();if($(t).on("onRefreshStarted",function(){$(".render-form > div:first-child").removeClass("scroll-content")}),$(t).on("onRefreshFinished",function(){$(".render-form > div:first-child").addClass("scroll-content")}),!bizagi.util.isObjectEmpty(t.warnings)){var r=$('<ul class="ui-bizagi-form-warnings"></ul>');for(var a in t.warnings)r.append($("<li>"+a+"</li>"));$("<button>X</button>").appendTo(r),r.prependTo(t.container),r.click(function(){r.detach()})}if(!bizagi.util.isObjectEmpty(t.errors)){var o=$('<ul class="ui-bizagi-form-errors"></ul>');for(var s in t.errors)o.append($("<li>"+s+"</li>"));$("<button>X</button>").prependTo(o),o.appendTo(t.container),o.click(function(){o.detach()}),$.each(i.buttons,function(e,i){i.routing&&t.getButtons().eq(e).prop("disabled",!0)})}(n?n.length:0)&&($(document).data("auto-save","auto-save"),$(document).unbind("save-form").bind("save-form",function(e,i){t.autoSaveEvents(i)}),$(window).unbind("beforeunload").bind("beforeunload",function(e){var i={};if(t.collectRenderValues(i),!$.isEmptyObject(i)&&$(document).data("auto-save"))return bizagi.localization.getResource("confirmation-savebox-message2")}))},autoSaveEvents:function(e,t){var i=this,n={};i.collectRenderValues(n),$.isEmptyObject(n)?e.resolve():$.when(bizagi.showSaveBox(bizagi.localization.getResource("confirmation-savebox-message1"),"Bizagi","warning")).done(function(){i.saveForm(),e.resolve()}).fail(function(){e.resolve()})},checkWidgetsData:function(){var e=null;if(bizagi.workportal.tablet.popup&&bizagi.workportal.tablet.popup.instance&&bizagi.workportal.tablet.popup.instance.getResponseValues){if(null===(e=bizagi.workportal.tablet.popup.instance.getResponseValues(bizagi.workportal.tablet.popup.instance.getResponseValuesParams)))return bizagi.showMessageBox(bizagi.localization.getResource("workportal-widget-complexgateway-path"),bizagi.localization.getResource("render-widget-complexgateway-error")),-1;bizagi.workportal.tablet.popup.instance.dontClose=!1,bizagi.workportal.tablet.popup.instance.close()}return e},repaintComplexGateway:function(){var e=this;void 0!==e.focus&&void 0!==e.focus.idCaseObject&&void 0!==e.focus.idCaseObject.isComplex&&e.dataService.getWorkitems({idCase:e.focus.idCaseObject.idCase}).done(function(t){if(1==t.workItems.length&&"ComplexGateway"==t.workItems[0].taskType){var i=t.workItems[0].transitions;e.currentPopup="complexgateway",$(document).triggerHandler("popupWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_COMPLEXGATEWAY,options:{transitions:i,sourceElement:".ui-bizagi-form",insertAfter:".ui-bizagi-form .ui-bizagi-button-container",height:"auto",offset:"8 0",activeScroll:!1,dontClose:!0,closed:function(){e.currentPopup=null}}})}})},getButtons:function(){var e=this.container;return $(".ui-bizagi-button-container :button",e)},addWarning:function(e){this.warnings[e]=e},addError:function(e){this.errors[e]=e},processButton:function(e){!bizagi.util.isObjectEmpty(this.errors)&&bizagi.util.parseBoolean(e.routing)||this._super(e)}}),bizagi.rendering.panel.extend("bizagi.rendering.panel",{},{}),bizagi.rendering.tab.extend("bizagi.rendering.tab",{},{postRenderContainer:function(e){var t=this;t._super(e),e.tabs({active:t.activeTab,activate:function(e,i){setTimeout(function(){t.resize({width:t.container.width(),height:t.container.height()})},50)},beforeActivate:function(e,i){t.triggerHandler("selected",{index:i.newTab.index(),tab:t.children[i.newTab.index()]}),t.children[i.newTab.index()]&&(t.children[i.newTab.index()].activate(),t.activeTab=i.newTab.index())}})}}),bizagi.rendering.tabItem.extend("bizagi.rendering.tabItem",{},{setAsActiveContainer:function(e){var t=this;$.when(t.ready()).done(function(){t.parent.container.tabs("option","active",t.container.data("tab-counter"))})},focus:function(){this.setAsActiveContainer(),this._super()},changeVisibility:function(e){var t=this,i=t.properties;t._super(e);var n=t.parent.container,r="ui-bizagi-tab-"+i.id,a=$("ul li[aria-controls = '"+r+"']",n),o=t.parent.getActiveTab();$.when(t.ready()).done(function(){i.visible?(a&&a.show(),t.setAsActiveContainer()):a&&a.hide()}).always(function(){n.tabs("option","active",o)})}}),bizagi.rendering.horizontal.extend("bizagi.rendering.horizontal",{},{}),bizagi.rendering.accordion.extend("bizagi.rendering.accordion",{},{}),bizagi.rendering.accordionItem.extend("bizagi.rendering.accordionItem",{},{setAsActiveContainer:function(e){},focus:function(){this.setAsActiveContainer(),this._super()}}),bizagi.rendering.group.extend("bizagi.rendering.group",{},{postRenderContainer:function(e){var t=this,i=t.properties;t._super(e),e=t.container,t.properties.collapse&&t.collapse(!1),i.expanded=t.properties.collapse,$(e).find("> h1, > .arrow").bind("click",function(){t.isOpen()?t.collapse(!0):t.expand(!0)})},isOpen:function(){var e=this.container;return!!$(".childrenContainer",e).is(":visible")},focus:function(){this.expand(),this._super()},expand:function(e){var t=this.container;$(".arrow",t).removeClass("down"),$(".arrow",t).addClass("up"),e?$(".childrenContainer",t).fadeToggle("fast"):$(".childrenContainer",t).show()},collapse:function(e){var t=this.container;$(".arrow",t).removeClass("up"),$(".arrow",t).addClass("down"),e?$(".childrenContainer",t).fadeToggle("fast"):$(".childrenContainer",t).hide()},toogleContainer:function(e){e?this.expand():this.collapse()}}),bizagi.rendering.searchForm.extend("bizagi.rendering.searchForm",{},{renderResult:function(){var e=this,t=e.properties,i={};i.properties={displayName:e.getResource("render-search-advanced-results-label"),type:"grid",visible:!1,xpath:"searchForm"+t.id,id:t.id,skipInitialLoad:!0,rowsPerPage:10,overrideGetRemoteData:function(t){return e.getRemoteData(t)}},i.elements=[];var n=t.columns;$.each(n,function(t){var r={render:{}};r.render.properties={displayName:n[t].caption,xpath:n[t].xpath,editable:!1},$.extend(r.render.properties,e.parseAdditionalProperties(n[t].dataType)),0==n[t].dataType&&(r.render.properties.columnVisible=!1),i.elements.push(r)});var r=e.renderFactory.getRender({type:"grid",data:i,parent:e,mode:e.getMode()});return e.resultsGrid=r,r.properties.allowAdd=!1,r.properties.allowDelete=!1,r.properties.allowEdit=!1,r.properties.inlineAdd=!1,r.render()},postRenderContainer:function(e){var t=this,i=(t.properties,e.find(".ui-bizagi-container-search-criteria")),n=e.find(".ui-bizagi-container-search-results"),r=i.children(),a=t.getMode();t.container=e,$.each(r,function(e,i){i=$(i);var n=Number(i.data("unique-id"));if(n){var r=t.childrenHash[n];if(r){var a=r.getElementType();a==bizagi.rendering.element.ELEMENT_TYPE_RENDER&&r.postRenderElement(i),a==bizagi.rendering.element.ELEMENT_TYPE_CONTAINER&&r.postRenderContainer(i)}}});var o=$(n.children()[0]);t.resultsGrid.postRenderElement(o),"execution"==a&&t.configureHandlers(),"design"==a&&t.configureDesignView(),"layout"==a&&(t.configureDesignView(),t.configureLayoutView())},configureHandlers:function(){var e=this;e.criteriaContainer=$(".ui-bizagi-container-search-criteria",e.container),e.resultsContainer=$(".ui-bizagi-container-search-results",e.container),e.resultsGrid.bind("rowSelected",function(t,i){e.properties.searchParams.hasOwnProperty("multiSelect")?e.trigger("multiSelect",i):e.trigger("instanceSelected",i)})},refreshResults:function(){this.trigger("instancerefresh"),this.resultsGrid.refresh()},onSearchFinished:function(){var e;(e=this).properties.deviceMaxRecordsExceeded||(e.resultsGrid.changeVisibility(!0),(e=this).properties&&(0==e.properties.records?$(".ui-bizagi-container-search-results .ui-bizagi-label",e.container).hide():$(".ui-bizagi-container-search-results .ui-bizagi-label",e.container).show()))}}),bizagi.rendering.text.extend("bizagi.rendering.text",{},{postRender:function(){var e=this.properties;this._super(),e.maxLength>0&&this.input.prop("maxlength",e.maxLength)},setDisplayValue:function(e){var t=this.properties;this._super(e),!bizagi.util.isEmpty(e)&&t.editable&&(e=e.replaceAll("\\n"," ").replaceAll("\n"," "),this.input.prop("value",e))},attachRetypeDouble:function(){var e=this,t=e.element,i=$("input",t);i&&0!=i.length&&i.blur(function(){var t=$(this);if("hidden"!=$(t).attr("type")&&"none"!=$(t).css("display")&&"hidden"!=$(t).css("visibility"))if(t.data("oldValue")&&""!=$(this).data("oldValue"))t.val()!=t.data("oldValue")?(e.setValue(""),t.val(""),t.data("oldValue",""),t.tooltip("destroy"),t.attr("title",e.getResource("render-text-retype-error")),t.tooltip(),t.tooltip("open"),setTimeout(function(){t.focus()},100)):(t.data("newValue",t.val()),t.data("oldValue",""),t.tooltip("destroy"));else{if(""==t.val())return;if(t.val()==t.attr("newValue"))return;t.data("oldValue",t.val()),t.val("");try{t.tooltip("destroy")}catch(e){}t.attr("title",e.getResource("render-number-retype")),t.tooltip(),t.tooltip("open"),setTimeout(function(){t.focus()},100)}})}}),bizagi.rendering.extendedText.extend("bizagi.rendering.extendedText",{},{init:function(e){this._super(e);var t=this.properties;t.rowSize=t.rowSize||5},postRender:function(){var e=this,t=e.properties,i=0;this._super(),e.textarea=$("textarea",e.getControl()),e.textarea.prop("rows",t.rowSize),t.maxLength>0&&e.textarea.attr("maxlength",t.maxLength);var n=function(){clearInterval(r)},r=t.autoExtend?setInterval(function(){(i>2e3||void 0!==e.textarea&&e.textarea[0]&&e.textarea[0].scrollHeight>0)&&(e.autoAdjustExtendedFrame(e.textarea[0]),n()),i+=500},500):null},postRenderReadOnly:function(){this._super(),this.textarea=$("textarea",this.getControl())},setDisplayValue:function(e){var t=this.properties;if(this._super(e),this.postRenderReadOnly(),e&&t.editable){void 0!==bizagi.context.isOfflineForm&&bizagi.util.parseBoolean(bizagi.context.isOfflineForm)&&(e="object"==typeof e&&e.value?e.value:e);var i=$.br2nl(e);i=i.replaceAll("\\n","\n"),this.textarea.text(i)}},configureHandlers:function(){var e=this,t=e.properties;e._super(),t.maxLength>0&&t.autoExtend&&$(e.textarea).bind("keydown keypress",function(t){e.autoAdjustExtendedFrame(this)})},autoAdjustExtendedFrame:function(e){if(e.scrollHeight<=0){var t=$(document.createElement("div")),i=null;$(t).attr("display","none"),$("body").append(t),i=(i=$(e).val()).replace(/\n/g,"<br>"),t.html(i+"<br>"),$(e).css("height",t.height()),t.remove()}else for($(e).height()>100&&$(e).height($(e).height()-20);$(e).outerHeight()<e.scrollHeight;)$(e).height($(e).height()+1)}}),bizagi.rendering.label.extend("bizagi.rendering.label",{},{}),bizagi.rendering.number.extend("bizagi.rendering.number",{},{postRender:function(){if(this._super(),this.numericInput=$("input",this.getControl()),"tablet_android"==bizagi.detectDevice()){var e=$("input",this.element);if(!e||0==e.length)return}},setDisplayValue:function(e){var t=this.properties;this.setValue(e),this._super(e),null!=e&&t.editable&&this.numericInput&&(this.numericInput.prop("value",e),this.executeFormatCurrencyPlugin())},attachRetypeDouble:function(){var e=this,t=e.element,i=$("input",t);i&&0!=i.length&&i.blur(function(){var t=$(this);if("hidden"!=$(t).attr("type")&&"none"!=$(t).css("display")&&"hidden"!=$(t).css("visibility"))if(t.data("oldValue")&&""!=$(this).data("oldValue"))t.val()!=t.data("oldValue")?(e.setValue(""),t.val(""),t.data("oldValue",""),t.tooltip("destroy"),t.attr("title",e.getResource("render-number-retype-fail")),t.tooltip(),t.tooltip("open"),setTimeout(function(){t.focus()},100)):(t.data("newValue",t.val()),t.data("oldValue",""),t.tooltip("destroy"));else{if(""==t.val())return;if(t.val()==t.attr("newValue"))return;t.data("oldValue",t.val()),t.val("");try{t.tooltip("destroy")}catch(e){}t.attr("title",e.getResource("render-number-retype")),t.tooltip(),t.tooltip("open"),setTimeout(function(){t.focus()},100)}})}}),bizagi.rendering.numberScientificNotation.extend("bizagi.rendering.numberScientificNotation",{},{postRender:function(){var e=this.getControl();this.inputDisplay=$("input",e).first(),this.numericInput=this.input=$("input",e).last(),this.numericInput.numericSN(this.properties.decimalSymbol),this.attachFormatSientificNotation()},setDisplayValue:function(e){var t=this.properties,i=(e=bizagi.util.scientificNotationFormat(e,t.decimalSymbol,38),bizagi.util.scientificNotationFormat(e,t.decimalSymbol,20));this._super(i),null!=e&&t.editable&&(this.numericInput.val(e),this.inputDisplay.val(i))},attachFormatSientificNotation:function(){var e=this;e.inputDisplay.focus(function(){$(this).val(e.getDisplayValue())}),e.inputDisplay.blur(function(){void 0===e.getFormContainer().validationController&&(e.getFormContainer().validationController=new bizagi.command.controllers.validation(e.getFormContainer(),e.validations));var t=bizagi.util.scientificNotationFormat(e.inputDisplay.val(),e.properties.decimalSymbol,38),i=bizagi.util.scientificNotationFormat(e.inputDisplay.val(),e.properties.decimalSymbol,20);e.numericInput.val(t),e.inputDisplay.val(i),e.setValue(t)})}}),bizagi.rendering.date.extend("bizagi.rendering.date",{},{postRender:function(){var e=this;e._super();var t=e.getDateControl(),i=e.getTimeControl();$(t).bind("click",function(e){e.preventDefault(),e.stopPropagation()}),$(t).bind("focusout",function(t){e.onChangeHandler()}),$(i).bind("focusout",function(t){e.onChangeHandler()}),"tablet_android"==bizagi.detectDevice()&&(e.renderMobiscroll(),$(t).attr("type","text"),$(i).attr("type","text"))},getDateControl:function(){return $(".ui-bizagi-render-date",this.getControl())},getTimeControl:function(){return $(".ui-bizagi-render-time",this.getControl())},getMaxDateInvariant:function(){var e=null;return this.properties.maxValue?(e=bizagi.util.dateFormatter.getDateFromInvariant(this.properties.maxValue,this.properties.showTime),this.properties.showTime||e.setHours(23,59,59),e):((e=new Date).setYear(e.getFullYear()+100),e.setHours(23,59,59),e)},getMinDateInvariant:function(){var e=null;return this.properties.minValue?(e=bizagi.util.dateFormatter.getDateFromInvariant(this.properties.minValue,this.properties.showTime),this.properties.showTime||e.setHours(0,0,0),e):((e=new Date).setYear(e.getFullYear()-100),e.setHours(0,0,0),e)},renderMobiscroll:function(){var e=this,t={display:"modal",cancelText:"Clear",mode:"mixed",theme:"android-ics",preset:"date",dateFormat:"mm/dd/yyyy",showOnFocus:"true",width:80,onClose:function(t,i){e.onClose(t,i)},onCancel:function(t,i){return this.value="",e.onChangeHandler(),!0}},i=e.getMaxDateInvariant(),n=e.getMinDateInvariant();t.maxDate=i,t.minDate=n,e.getDateControl().scroller(t),e.getTimeControl().scroller({display:"modal",cancelText:"Clear",mode:"mixed",theme:"android-ics",preset:"time",ampm:!1,timeFormat:"HH:ii:ss",seconds:!0,showOnFocus:"true",width:80,onClose:function(t,i){e.onClose(t,i)},onCancel:function(t,i){return this.value="",e.onChangeHandler(),!0}})},onClose:function(e,t){var i=this.getFormContainer().container.find("#container-items-edit");$(".ui-bizagi-container-button-edit .ui-bizagi-cancel-btn",i).click()},setDisplayValue:function(e){var t=this.properties,i=this.getControl(),n=this.getDateControl(),r=this.getTimeControl();if(this._super(e),e&&t.editable){t.showTime&&e.length<=10&&(e+=" 00:00:00");var a=bizagi.util.dateFormatter.getDateFromInvariant(e,t.showTime);bizagi.assert(a>0,"The date could not be parsed",e);var o=a.getFullYear(),s=a.getMonth()+1,l=a.getDate();s<10&&(s="0"+s),l<10&&(l="0"+l);var u=bizagi.util.dateFormatter.formatDate(a,this.properties.fullFormat);if("tablet"==bizagi.detectDevice()?n.prop("value",o+"-"+s+"-"+l):n.prop("value",u),t.showTime){var c=a.getHours(),d=a.getMinutes(),p=a.getSeconds();c<10&&(c="0"+c),d<10&&(d="0"+d),p<10&&(p="0"+p),r.prop("value",c+":"+d+":"+p)}}else{"string"==typeof(u=this.getDisplayValue())&&(""==u&&(u=bizagi.util.dateFormatter.formatDate(bizagi.util.dateFormatter.getDateFromInvariant(this.value,this.properties.showTime),this.properties.fullFormat)),i.html(u))}},changeMinValue:function(e){var t=this.properties,i=this.getDateControl();e&&t.editable&&(t.minValue=e,i.datepicker("option","minDate",bizagi.util.dateFormatter.getDateFromInvariant(e)))},changeMaxValue:function(e){var t=this.properties,i=this.getDateControl();e&&t.editable&&(t.maxValue=e,i.datepicker("option","maxDate",bizagi.util.dateFormatter.getDateFromInvariant(e)))},onChangeHandler:function(){var e=this.properties,t=this.getDateControl(),i=this.getTimeControl(),n=t.val(),r=e.showTime&&""!=i.val()?" "+i.val():" 00:00:00";if(""==n&&!e.showTime||""==n&&""==i.val())this.setValue(""),e.displayValue="";else{var a=n.length>0?n+r:bizagi.util.dateFormatter.formatISO(new Date,!1)+r,o=this.getMaxDateInvariant(),s=this.getMinDateInvariant();if(!(a=bizagi.util.dateFormatter.getDateFromISO(a,!0))||0==a)return;if(e.showTime||a.setSeconds(1),a>o||a<s){t.parent().addClass("ui-bizagi-render-error");var l=bizagi.localization.getResource("workportal-general-invalid-date");l=(l=(l=l.replace("{0}",e.displayName)).replace("<strong>","")).replace("</strong>",""),t.parent().attr("data-error",l),t.prop("value","")}else t.parent().removeClass("ui-bizagi-render-error"),t.parent().attr("data-error",""),this.setValue(bizagi.util.dateFormatter.formatInvariant(a,e.showTime)),e.displayValue=bizagi.util.dateFormatter.formatDate(a,e.fullFormat),"tablet_android"==bizagi.detectDevice()&&t.prop("value",e.displayValue)}}}),bizagi.rendering.yesno.extend("bizagi.rendering.yesno",{},{postRender:function(){var e=this,t=e.getControl();this._super(),t.addClass("ui-bizagi-render-display-block"),t.addClass("ui-bizagi-render-boolean-yesno"),t.bind("optiongroupchange",function(t,i){e.value!=i.value&&e.setValue(i.value)}),t.find(".ui-bizagi-render-boolean-radio").bind("click",function(){e.getControl().find(".ui-bizagi-render-boolean-radio").removeClass("ui-radio-state-checked"),$(this).addClass("ui-radio-state-checked");var t=$(this).attr("value");e.value!=t&&e.setValue(t)})},setDisplayValue:function(e){var t=this.properties,i=this.getControl();if(this._super(e),null!=e&&t.editable){var n=bizagi.util.parseBoolean(e);if(null!=n){var r=n?".yes":".no";i.find(".ui-bizagi-render-boolean-radio"+r).addClass("ui-radio-state-checked")}}}}),bizagi.rendering.check.extend("bizagi.rendering.check",{},{postRender:function(){var e=this;e.getControl();this._super(),e.input=$("input",e.getControl()),e.input.change(function(){e.input.is(":checked")?e.setValue(!0):e.setValue(!1)})},renderReadOnly:function(){var e=this.renderFactory.getTemplate("text-read-only");return $.fasttmpl(e,{value:this.getValue()})},postRenderReadOnly:function(){this.input=this.getControl()},setDisplayValue:function(e){var t=this.properties;(this._super(e),t.editable)?1==bizagi.util.parseBoolean(e)&&this.input.prop("checked",!0):this.input.text(this.getDisplayValue())}}),bizagi.rendering.combo.extend("bizagi.rendering.combo",{},{postRender:function(){var e=this;this._super(),e.combo=$("select",e.getControl()),e.combo.find("option:first").empty(),e.combo.change(function(){if(""!=e.combo.val()){var t={value:e.combo.val(),text:e.combo.find("option:selected").text()};e.onComboChange(t.value,t.text)}else e.onComboChange("","")})},setDisplayValue:function(e){this.properties.editable&&e&&(null!=e.id&&null!=e.id?this.combo.val(e.id):this.combo.val(e.value),this.triggerHandler("select",e))},getSelectedValue:function(){return this.selectedValue},onComboChange:function(e,t){this.setValue({id:e,value:t}),this.selectedValue=t}}),bizagi.rendering.upload.extend("bizagi.rendering.upload",{BA_ACTION_PARAMETER_PREFIX:bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,BA_CONTEXT_PARAMETER_PREFIX:bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,QUALITY_PICTURE:80,LIMIT:1,EXTENSIONSIMG:["image/jpeg","jpeg","image","png","jpg"],EXTENSIONSVIDEO:["video/quicktime","quicktime","qt","mov"],EXTENSIONSAUDIO:["audio/wav","audio","wav"]},{postRender:function(){this._super(),bizagi.util.isCordovaSupported()||this.supportFileAPI()?bizagi.util.isCordovaSupported()?this.activateUploadNative():this.activeUploadWebControl():this.addEventToOpenSlide()},postRenderReadOnly:function(){this._super(),bizagi.util.isCordovaSupported()||this.files&&this.files.length>0&&this.addEventToOpenSlide()},addEventToOpenSlide:function(){var e=this,t=e.getMode(),i=e.getControl(),n=e.getControl();e.itemAddfile=$(".bz-rn-upload-show-menu",n),e.itemAddfile.hide(),$("li",i).click(function(){var i=$(this).data("url");"execution"===t&&new bizagi.rendering.tablet.slide.upload(e.dataService,e.renderFactory,{container:e.getFormContainer().container,url:i}).render({url:i})})},activateUploadNative:function(){var e=this,t=e.properties,i=e.getControl(),n=$("body");e.renderControl(),e.itemAddfile=$(".bz-rn-upload-show-menu",i),e.itemResolutionUpload=$(".ui-bizagi-resolutionUploadFrame",i),bizagi.util.isCordovaSupported()&&0!=t.editable?(e.itemsUpload={file:$(".file",i),image:$(".image",i),cimage:$(".cimage",i),caudio:$(".caudio",i),cvideo:$(".cvideo",i)},e.itemAddfile.bind("click",function(t){var r=$(".bz_rn_upload_container_upload_items",i);if(r.hasClass("bz_clone_active")){r.removeClass("bz_clone_active");var a=$("#bz_active_clone_Upload",n);return a.hide(),a.remove(),r.hide(),void e.removeListener()}if(r.is(":visible"))return r.hide(),void e.removeListener();try{var o=e.getContainerRender().parent();o&&o.find(".bz_rn_upload_container_upload_items:visible").hide()}catch(e){bizagi.log(e)}r.show();var s=parseInt(r.css("height"));if(e.itemAddfile.offset().top-60-s>0)r.addClass("bottomArrow"),r.position({of:e.itemAddfile,my:"center bottom",at:"center top",offset:"-10px",collision:"flipfit flipfit"});else{r.hide(),r.addClass("bz_clone_active");var l=r.clone();l.attr("id","bz_active_clone_Upload"),l.addClass("upArrow"),l.appendTo(n),l.css("display","inline-block"),l.position({of:e.itemAddfile,my:"center top",at:"center bottom",offset:"5px",collision:"flipfit flipfit"})}e.itemsUpload={file:$(".file",l),image:$(".image",l),cimage:$(".cimage",l),caudio:$(".caudio",l),cvideo:$(".cvideo",l)},e.addListener()}),e.checkExtensions(),e.checkMaxFiles()):e.itemAddfile.hide()},removeListener:function(){this.itemsUpload&&(this.itemsUpload.image.unbind("click"),this.itemsUpload.file.unbind("click"),this.itemsUpload.cimage.unbind("click"),this.itemsUpload.caudio.unbind("click"),this.itemsUpload.cvideo.unbind("click"))},addListener:function(){var e=this,t=void 0!==bizagi.context.isOfflineForm&&bizagi.context.isOfflineForm||!1;e.itemsUpload.image.bind("click",function(){navigator.camera.getPicture(function(i){$.when(e.checkMaxSize(i)).done(function(n){n&&(e.dataImage=i,"android"===bizagi.detectSO()&&bizagi.util.detectAndroidVersion()<=422||t?e.saveImage(e,e.dataImage):("ios"!==bizagi.detectSO()&&$("body").append("<div class='ui-bizagi-mask'> </div>"),$(".ui-bizagi-resolution-container").css("display","block")))}),e.itemAddfile.click()},e.onFail.bind(e),{quality:e.Class.QUALITY_PICTURE,sourceType:Camera.PictureSourceType.PHOTOLIBRARY})}),e.itemsUpload.file.bind("click",function(){bizagi.showMessageBox("in development")}),e.itemsUpload.cimage.bind("click",function(){navigator.camera.getPicture(function(t){$.when(e.checkMaxSize(t)).done(function(i){i&&e.saveImage(e,t)}),e.itemAddfile.click()},e.onFail.bind(e),{quality:e.Class.QUALITY_PICTURE,targetWidth:1280,targetHeight:960})}),e.itemsUpload.caudio.bind("click",function(){navigator.device.capture.captureAudio(function(t){e.saveAudio(e,t),e.itemAddfile.click()},e.onFail.bind(e),{limit:e.Class.LIMIT})}),e.itemsUpload.cvideo.bind("click",function(){navigator.device.capture.captureVideo(function(t){e.saveVideo(e,t),e.itemAddfile.click()},e.onFail.bind(e),{limit:e.Class.LIMIT})}),$(".ui-bizagi-resolutionUploadFrame .ui-bizagi-resolution-button").unbind("click").bind("click",function(t){t.preventDefault(),t.stopPropagation();var i=$(this).attr("data-bz-ordinal");bizagi.util.smartphone.startLoading();var n=0,r=0;1===i?(n=320,r=240):2===i?(n=640,r=480):3===i&&(n=1280,r=960),4===i?e.saveImage(e,e.dataImage):$.when(e.transformImageSize(e.dataImage,n,r)).done(function(){e.saveImage(e,e.dataImage)}).fail(function(){bizagi.util.smartphone.stopLoading()}),$(".ui-bizagi-resolution-container").css("display","none"),$(".ui-bizagi-mask").remove()}),$(".ui-bizagi-resolutionUploadFrame .ui-bizagi-resolution-button-cancel").bind("click",function(e){$(".ui-bizagi-resolution-container").css("display","none"),$(".ui-bizagi-mask").remove(),bizagi.util.smartphone.stopLoading()})},renderUploadItem:function(e){return this._super(e)},getTemplateName:function(){return"upload"},getTemplateItemName:function(){return"uploadItem"},getTemplateEditionName:function(){return"edition.upload"},getTemplateEditionMenu:function(){return"edition.upload.menu"},saveImage:function(e,t){var i=e,n=i.properties,r=i.buildAddParams(),a="q_"+bizagi.util.encodeXpath(i.getUploadXpath());r.queueID=a;var o=new FileUploadOptions;o.fileKey="file",o.fileName=t.substr(t.lastIndexOf("/")+1),o.params=r,window.resolveLocalFileSystemURI(t,function(a){a.file(function(a){if(r.filename=o.fileName,!i.validateFileExtensions(o.fileName)){var s=a.type.substr(a.type.lastIndexOf("/")+1);o.fileName+="."+s}if(o.mimeType="image/jpeg",o.params=r,i.editedImageURL&&(t=i.editedImageURL),"content://com.android"===t.substring(0,21)){var l=t.split("%3A");t="content://media/external/images/media/"+l[1]}(new FileTransfer).upload(t,n.addUrl,function(t){i.onUploadFileCompleted(e,JSON.parse(decodeURIComponent(t.response)))},function(e){bizagi.log("An error has occurred: Code = "+e.code),bizagi.util.smartphone.stopLoading()},o)},function(){})},function(){})},saveAudio:function(e,t){var i=e,n=i.properties,r=i.buildAddParams(),a="q_"+bizagi.util.encodeXpath(i.getUploadXpath()),o=new FileUploadOptions;r.queueID=a,o.fileName=t[0].name,o.params=r,(new FileTransfer).upload(t[0].fullPath,n.addUrl,function(t){i.onUploadFileCompleted(e,JSON.parse(decodeURIComponent(t.response)))},function(e){bizagi.log("An error has occurred: Code: "+e.code)},o)},saveVideo:function(e,t){var i=e,n=i.properties,r=i.buildAddParams(),a="q_"+bizagi.util.encodeXpath(i.getUploadXpath()),o=new FileUploadOptions;r.queueID=a,o.fileName=t[0].name,o.mimeType="video/quicktime",o.params=r,(new FileTransfer).upload(t[0].fullPath,n.addUrl,function(t){i.onUploadFileCompleted(e,JSON.parse(decodeURIComponent(t.response)))},function(e){bizagi.log("An error has occurred: Code: "+e.code)},o)},onFail:function(e){var t;bizagi.log("Error: "+e.code),"string"==typeof e&&-1!==e.indexOf("No Activity found to handle Intent")&&(t=bizagi.util.isValidResource("render-upload-error-media-app")?bizagi.localization.getResource("render-upload-error-media-app"):"Your device does not have an app to execute this action.",bizagi.showMessageBox(t))},onUploadFileCompleted:function(e,t){var i=e,n=i.getControl(),r=$(".bz-rn-upload-show-menu",n),a=t;if(a.id&&a.fileName){var o=i.renderUploadItem(a);i.files.push([a.id,a.fileName]),$(o).insertBefore(r),i.filesCount=i.filesCount+1,i.changeRequired(!1),i.triggerRenderChange(),n.find(".ui-bizagi-render-upload-item-no-upload").hide(),i.checkMaxFiles(),i.editedImageURL=null,bizagi.util.smartphone.stopLoading()}else bizagi.log("Error:"+a.message),bizagi.util.smartphone.stopLoading()},saveBlobToFile:function(e,t){var i=this;window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(n){var r=n.root,a=function(n){n.onwriteend=function(e){i.editedImageURL=n.localURL,t.resolve(),console.log("Write completed.")},n.onerror=function(e){console.log("Write failed: "+e.toString())},n.write(e)};r.getFile("bizagiImgTmp.jpg",{create:!0},function(e){e.createWriter(a,null)},null)},function(){})},transformImageSize:function(e,t,i){var n=this,r=new $.Deferred;return window.resolveLocalFileSystemURL(e,function(e){e.file(function(e){var a=new FileReader;a.onloadend=function(e){var a=new Image;a.onload=function(e){var o=a.width,s=a.height;0!=t&&(o>s?o>t&&(s*=t/o,o=t):s>i&&(o*=i/s,s=i));var l=document.createElement("canvas");l.width=o,l.height=s,l.getContext("2d").drawImage(this,0,0,o,s),n.value&&n.properties.value?n.value[0]=n.properties.value[0]=n.properties.url=l.toDataURL("image/jpeg",.5):n.properties.url=l.toDataURL("image/jpeg",.5);var u=n.properties.url.replace("data:image/jpeg;base64,",""),c=bizagi.util.b64toBlob(u);n.saveBlobToFile(c,r),a=null},a.src=e.target.result},a.readAsDataURL(e)})}),r.promise()},checkMaxFiles:function(){var e=this.properties,t=e.maxfiles,i=e.value.length;0!==t&&i>=t&&(this.itemAddfile.hide(),this.removeListener())},checkExtensions:function(){var e=this,t=e.properties.validExtensions;if(void 0!==t&&""!==t&&(1!==(t=t.split(";")).length||-1===t[0].indexOf("*.*"))){for(var i=!1,n=!1,r=!1,a=0,o=t.length;a<o;a++){t[a]=t[a].replace("*.",""),e.Class.EXTENSIONSIMG.toString().indexOf(t[a])>=0&&(r=!0),e.Class.EXTENSIONSAUDIO.toString().indexOf(t[a])>=0&&(n=!0),e.Class.EXTENSIONSVIDEO.toString().indexOf(t[a])>=0&&(i=!0)}n||e.itemsUpload.caudio.hide(),r||(e.itemsUpload.image.hide(),e.itemsUpload.cimage.hide()),i||e.itemsUpload.cvideo.hide(),n||r||i||(e.itemAddfile.hide(),e.removeListener())}},checkMaxSize:function(e){var t=this,i=t.properties,n=new $.Deferred;return void 0!==i.maxSize&&null!=i.maxSize&&""!==i.maxSize||n.resolve(!0),window.resolveLocalFileSystemURI(e,function(e){e.file(function(e){e.size>=i.maxSize?(bizagi.showMessageBox(t.getResource("render-upload-alert-maxsize").replace("{0}",i.maxSize)),n.resolve(!1)):(t.fileExtension=e.type?e.type.substr(e.type.lastIndexOf("/")+1):"",n.resolve(!0))})}),n.promise()},checkMaxSizeVideo:function(e){var t=this.properties,i=new $.Deferred,n=e[0].size;return"undefined"!==t.maxSize&&null!=t.maxSize&&""!==t.maxSize||i.resolve(!0),n>=t.maxSize?(bizagi.showMessageBox(this.getResource("render-upload-alert-maxsize").replace("{0}",t.maxSize)),i.resolve(!1)):i.resolve(!0),i.promise()},validateFileExtensions:function(e){return/(.jpg|.gif|.png|.bmp|.jpeg|.mov|.avi|.mpg|.mpeg|.3gp|.asf|.wmv|.flv|.mp4)$/i.test(e)},supportFileAPI:function(){var e=document.createElement("INPUT");return e.type="file","files"in e},activeUploadWebControl:function(){var e=this,t=e.getControl(),i=$(".bz-rn-upload-web",t),n=$(".bz-rn-upload-show-menu span.bz-cm-icon",t);e.itemAddfile=$(".bz-rn-upload-show-menu",t),e.maxFilesLimit()?e.itemAddfile.hide():(n.addClass("bz-rn-upload-native"),n.on("click",function(e){i.click()}),i.on("change",function(t){bizagi.util.smartphone.startLoading();var i=this.files[0];i.fullPath=this.value,e.checkMaxSizeFile(i)&&e.checkFileTypes(i)?$.when(e.processUploadFile(i)).done(function(t){e.onUploadFileCompleted(e,JSON.parse(decodeURIComponent(t)))}).fail(function(e){bizagi.util.smartphone.stopLoading(),bizagi.showMessageBox(e)}):bizagi.util.smartphone.stopLoading(),$(this).val("")}))},checkMaxSizeFile:function(e){var t=this.properties;return void 0===t.maxSize||null==t.maxSize||""===t.maxSize||(void 0!==e?0===e.size?(bizagi.showMessageBox(this.getResource("render-upload-error-file-empty").replace("%s",e.name)),!1):!(e.size>=t.maxSize)||(bizagi.showMessageBox(this.getResource("render-upload-alert-maxsize").replace("{0}",t.maxSize)),!1):(bizagi.showMessageBox(this.getResource("render-required-upload").replace("#label#",t.displayName)),!1))},checkFileTypes:function(e){var t=this.properties;if(t.validExtensions&&t.validExtensions.length>0){var i=t.validExtensions.replaceAll("*.","").split(";");if(!this.stringEndsWithValidExtension(e.name,i,!0))return bizagi.showMessageBox(this.getResource("render-upload-allowed-extensions")+t.validExtensions),!1}return!0},stringEndsWithValidExtension:function(e,t,i){if(!1===i&&0===e.length)return!0;for(var n=0,r=t.length;n<r;n++)if("*"===t[n]||e.toLowerCase().endsWith(t[n].toLowerCase()))return!0;return!1},maxFilesLimit:function(){var e=this.properties,t=e.maxfiles,i=e.value.length;return 0!==t&&i>=t},buildAddFileParams:function(e){var t=this,i=t.properties,n=new FormData,r=t.getFormContainer();n.append(t.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpath",t.getUploadXpath()),n.append(t.Class.BA_CONTEXT_PARAMETER_PREFIX+"idRender",i.id),n.append(t.Class.BA_CONTEXT_PARAMETER_PREFIX+"xpathContext",i.xpathContext),n.append(t.Class.BA_CONTEXT_PARAMETER_PREFIX+t.Class.BA_PAGE_CACHE,i.idPageCache),n.append(t.Class.BA_ACTION_PARAMETER_PREFIX+"sessionId",r.properties.sessionId),n.append(i.xpath,e),i.contexttype&&n.append(t.Class.BA_CONTEXT_PARAMETER_PREFIX+"contexttype",i.contexttype);try{"undefined"!=typeof BIZAGI_SESSION_NAME?n.append(BIZAGI_SESSION_NAME,r.properties.sessionId):n.append("JSESSIONID",r.properties.sessionId)}catch(e){n.append("JSESSIONID",r.properties.sessionId)}return n},processUploadFile:function(e){var t=this,i=t.properties,n=new $.Deferred,r=t.buildAddFileParams(e),a=i.addUrl,o=new XMLHttpRequest;return o.open("POST",a,!0),o.onload=function(e){var i;try{i=JSON.parse(this.response)}catch(e){i={type:"error",message:t.getResource("workportal-widget-admin-language-error")}}"error"!==i.type?n.resolve(this.response):n.reject(i.message)},o.onerror=function(e){n.reject(e.message)},o.send(r),n.promise()}}),bizagi.rendering.upload.extend("bizagi.rendering.upload.offline",{BA_ACTION_PARAMETER_PREFIX:bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,BA_CONTEXT_PARAMETER_PREFIX:bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,QUALITY_PICTURE:80,LIMIT:1,EXTENSIONSIMG:["image/jpeg","jpeg","image","png","jpg"],EXTENSIONSVIDEO:["video/quicktime","quicktime","qt","mov"],EXTENSIONSAUDIO:["audio/wav","audio","wav"]},{renderControl:function(){for(var e=this.properties,t=this.renderFactory.getTemplate("upload"),i=$.fasttmpl(t,{xpath:bizagi.util.encodeXpath(this.getUploadXpath()),editable:e.editable,noFiles:0==this.filesCount,allowSendInMail:e.allowSendInMail}),n="",r=0;r<this.filesCount;r++){n+=this.renderUploadItem(this.files[r])}return i=this.replaceFilesHtml(i,n)},postRender:function(){var e=this.properties;this.configureHelpText(),bizagi.util.isCordovaSupported()&&e.editable?this.activateUploadNative():this.addEventToOpenSlide()},postRenderReadOnly:function(){this._super()},activateUploadNative:function(){var e=this,t=e.properties,i=e.getControl(),n=$("body");e.itemAddfile=$(".bz-rn-upload-show-menu",i),bizagi.util.isCordovaSupported()&&0!=t.editable?(e.itemsUpload={file:$(".file",i),image:$(".image",i),cimage:$(".cimage",i),caudio:$(".caudio",i),cvideo:$(".cvideo",i)},e.itemAddfile.bind("click",function(t){var r=$(".bz_rn_upload_container_upload_items",i);if(r.hasClass("bz_clone_active")){r.removeClass("bz_clone_active");var a=$("#bz_active_clone_Upload",n);return a.hide(),a.remove(),r.hide(),void e.removeListener()}if(r.is(":visible"))return r.hide(),void e.removeListener();try{var o=e.getContainerRender().parent();o&&o.find(".bz_rn_upload_container_upload_items:visible").hide()}catch(t){}r.show();var s=parseInt(r.css("height"));if(e.itemAddfile.offset().top-60-s>0)r.addClass("bottomArrow"),r.position({of:e.itemAddfile,my:"center bottom",at:"center top",offset:"-10px",collision:"flipfit flipfit"});else{r.hide(),r.addClass("bz_clone_active");var l=r.clone();l.attr("id","bz_active_clone_Upload"),l.addClass("upArrow"),l.appendTo(n),l.css("display","inline-block"),l.position({of:e.itemAddfile,my:"center top",at:"center bottom",offset:"5px",collision:"flipfit flipfit"})}e.itemsUpload={file:$(".file",l),image:$(".image",l),cimage:$(".cimage",l),caudio:$(".caudio",l),cvideo:$(".cvideo",l)},e.addListener()}),e.checkExtensions(),e.checkMaxFiles()):e.itemAddfile.hide()},removeListener:function(){this.itemsUpload.image.unbind("click"),this.itemsUpload.file.unbind("click"),this.itemsUpload.cimage.unbind("click"),this.itemsUpload.caudio.unbind("click"),this.itemsUpload.cvideo.unbind("click")},addListener:function(){bizagi.rendering.upload.prototype.addListener.apply(this,arguments)},getTemplateName:function(){return"upload"},getTemplateItemName:function(){return"uploadItem"},getTemplateEditionName:function(){return"edition.upload"},getTemplateEditionMenu:function(){return"edition.upload.menu"},saveImage:function(e,t){var i=e;t=bizagi.util.mobileImagePath(t),i.getDataUri(t,function(e){var n=t.substr(t.lastIndexOf("/")+1);n+=i.fileExtension?"."+i.fileExtension:"",i.onUploadFileCompletedOffline(n,e)})},getDataUri:function(e,t){var i=new Image;i.onload=function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height,e.getContext("2d").drawImage(this,0,0);var i=e.toDataURL("image/png");t(i.replace(/^data:image\/(png|jpg|jpeg);base64,/,""))},i.src=e},saveAudio:function(e,t){var i=e;window.resolveLocalFileSystemURI("file://"+t[0].fullPath,function(e){e.file(function(e){var n=new FileReader;n.onloadend=function(e){i.onUploadFileCompletedOffline(t[0].name,e.target.result)},n.readAsDataURL(e)},i.failReadFile)},i.failReadFile)},saveVideo:function(e,t){var i=e;i.properties;window.resolveLocalFileSystemURI("file://"+t[0].fullPath,function(e){e.file(function(e){var n=new FileReader;n.onloadend=function(e){i.onUploadFileCompletedOffline(t[0].name,e.target.result)},n.readAsDataURL(e)},i.failReadFile)},i.failReadFile)},renderUploadItem:function(e){this.properties;var t=this.getMode(),i=this.renderFactory.getTemplate("uploadItem");return $.fasttmpl(i,{url:"javascript:void(0);",allowDelete:!1,filename:e[0].value,id:bizagi.util.randomNumber(),mode:t})},collectData:function(e){this.filesCount>0&&(e[this.properties.xpath]=this.files)},onUploadFileCompletedOffline:function(e,t){var i=this.getControl(),n=$(".bz-rn-upload-show-menu",i),r=[{xpath:"fileName",DataType:"15",value:e},{xpath:"data",DataType:"19",value:t.replace(/^data:.*;base64,/,"")}],a=this.files.slice();a.push(r),this.filesCount=this.filesCount+1,this.setValue(a);var o=this.renderUploadItem(r);$(o).insertBefore(n),this.triggerRenderChange(),i.find(".ui-bizagi-render-upload-item-no-upload").hide(),this.checkMaxFiles()},failReadFile:function(e){bizagi.log(e);try{bizagi.log(e.target.error.code)}catch(e){}},checkMaxFiles:function(){bizagi.rendering.upload.prototype.checkMaxFiles.apply(this,arguments)},checkExtensions:function(){bizagi.rendering.upload.prototype.checkExtensions.apply(this,arguments)},checkMaxSize:function(e){return bizagi.rendering.upload.prototype.checkMaxSize.apply(this,arguments)},checkMaxSizeVideo:function(e){return bizagi.rendering.upload.prototype.checkMaxSizeVideo.apply(this,arguments)},canBeSent:function(){return!0}}),bizagi.rendering.grid.extend("bizagi.rendering.grid",{},{init:function(e){e.data.properties.singleInstance=!1,this._super(e),this.cellMetadata={};var t=this.properties,i=this.getFormContainer();this.properties.helpText&&null!=this.properties.helpText&&""!=this.properties.helpText?t.displayType="value":t.displayType="vertical",t.labelAlign="left",(t.groupBy||t.groupSummary)&&i.addWarning(this.getResource("render-tablet-warning-grid"))},initializeData:function(e){e.properties.singleInstance=!1,this._super(e)},updateAffectedCellManually:function(){},getRowIndexByKey:function(){},postRender:function(){var e=this,t=e.properties,i=e.getControl();for(var n in e.initialLoadDone=!1,e._super(),e.grid=$(">div",i),e.getLabel().hide(),e.applyGridPlugin(),t.data&&(e.updateData(t.data),$.when(e.ready()).done(function(){e.triggerRenderChange({changed:!1})})),e.initialLoadDone=!0,e.pendingActions)e.pendingActions.hasOwnProperty(n)&&e.pendingActions[n].method.apply(e,e.pendingActions[n].arguments)},applyGridPlugin:function(){var e=this,t=e.properties,i=e.getMode(),n=e.grid,r=bizagi.util.isOfflineForm({context:e}),a=e.buildColumnModel();n.bizagi_grid_tablet({columns:a,maxColumns:4,title:t.displayName,isOfflineForm:r||!1,mode:i,template:{grid:e.renderFactory.getTemplate("bizagi.grid.grid"),waiting:e.renderFactory.getTemplate("bizagi.grid.waiting"),table:e.renderFactory.getTemplate("bizagi.grid.table"),emptyTable:e.renderFactory.getTemplate("bizagi.grid.table.empty"),column:e.renderFactory.getTemplate("bizagi.grid.column"),specialColumn:e.renderFactory.getTemplate("bizagi.grid.column.special"),row:e.renderFactory.getTemplate("bizagi.grid.row"),rowButtons:e.renderFactory.getTemplate("bizagi.grid.row.buttons"),cell:e.renderFactory.getTemplate("bizagi.grid.cell"),specialCell:e.renderFactory.getTemplate("bizagi.grid.cell.special"),pager:e.renderFactory.getTemplate("bizagi.grid.pager"),buttons:e.renderFactory.getTemplate("bizagi.grid.buttons"),dynamicPager:e.renderFactory.getTemplate("bizagi.grid.dynamicpager")},actions:{add:t.allowAdd,edit:t.allowEdit&&t.withEditForm&&null!=t.data,remove:t.allowDelete,inlineAdd:!1,allowMore:t.allowMore,enableXlsExport:!1,enablePdfExport:!1},pageRequested:function(t){"execution"==i&&e.fetchData(t.page,t.sortBy,t.sortType)},sortRequested:function(t){"execution"==i&&e.fetchData(t.page,t.sortBy,t.sortType)},drawCell:function(t){return e.drawCell(t.column,t.key,t.value,t.isNewRow)},cellReady:function(t){return e.onCellReady(t.column,t.key,t.cell,t.isNewRow)},rowSelected:function(t){"execution"==i&&e.triggerHandler("rowSelected",{id:t.key,data:t})},addRow:function(t){"execution"==i&&e.addRow()},editRow:function(t){"execution"==i&&e.editRow(t.key)},deleteRow:function(t){"execution"==i&&e.deleteRow(t.key)},moreRows:function(t){"execution"==i&&e.moreRows(t)},showMore:function(t){e.showMore(t.key)}})},postRenderReadOnly:function(){this.postRender()},buildColumnModel:function(){var e=this.columns,t=[];return t.push({name:"id",index:0,label:"id",hidden:!0,align:"center",key:!0}),$.each(e,function(e,i){i.columnIndex=e+1;var n=bizagi.util.isEmpty(i.properties.displayName)?" ":i.properties.displayName,r={name:i.properties.xpath,index:e+1,label:n,key:!1,hidden:!i.properties.visible||"columnHidden"==i.properties.type||0==i.properties.columnVisible,summarizeBy:i.properties.totalize&&i.properties.totalize.operation?i.properties.totalize.operation:void 0,bizAgiProperties:i.properties};t.push(r)}),t},refresh:function(){this.fetchData()},dataReady:function(){return null!=this.dataReadyDeferred?this.dataReadyDeferred.promise():null},loadChanges:function(e){var t,i=[];for(t=0;t<e.length;t++)i.push([e[t][0],t]);for(t=0;t<i.length;t++){var n,r,a,o=this.changes[i[t][0]];if(void 0!==o)for(r in n=i[t][1],o)o.hasOwnProperty(r)&&(a=this.getColumn(r).columnIndex,e[n][a]=o[r])}},updateData:function(e){var t=this.grid;this.columns;if(e){this.properties.data=e,this.setCellOverrides(e),t.bizagi_grid_tablet("setData",e);var i=this.getAndroidVersion();i=i?i.substring(0,3):null,this.properties.data&&this.properties.data.total>1&&"tablet_android"==bizagi.detectDevice()&&i&&Number(i)<=4.2&&this.alternativePaginator()}},fetchData:function(e,t,i){var n=this,r=n.properties;n.dataReadyDeferred=new $.Deferred,e=e||r.page||1,t=t||r.sortBy||"id",i=i||r.sortOrder||"asc",r.page=e,r.sortBy=t,r.sortType=i,r.sort=t+" "+i,n.startLoading(),$.when(n.getRemoteData()).then(function(e){if(n.endLoading(),e)if(e.deviceMaxRecordsExceeded)alert(bizagi.localization.getResource("render-search-maximum-records-allowed"));else{n.loadChanges(e.rows),n.updateData(e),n.triggerRenderChange(),n.dataReadyDeferred.resolve();var t=$(".ui-bizagi-grid-pager",n.element).find("li[data-page-number="+e.page+"]"),i=t.length>0?t.position().left:0,r=n.getAndroidVersion();if(r=r?r.substring(0,3):null,"tablet_android"==bizagi.detectDevice()&&r&&Number(r)<=4.2){i=-1*Number(i-30);var a=Number($(".ui-bizagi-grid .ui-bizagi-grid-pager",n.getControl()).css("width").replace(/[^-\d\.]/g,"")),o=$(".ui-bizagi-grid .ui-bizagi-grid-pager ul li:last",n.getControl()),s=-(o=o.length>0?o.position().left:0)+a-90;a<o&&i<s&&(i=s,$(".ui-bizagi-grid .ui-bizagi-grid-pager ul",n.getControl()).animate({"margin-left":i+"px"}))}else $(".ui-bizagi-grid-pager",n.element).find("ul").scrollLeft(i)}})},collectData:function(e){var t=this,i=t.grid;if(t.grid&&(t.properties.inlineAdd||t.properties.inlineEdit)){var n=i.bizagi_grid_tablet("getNewRowKeys");if(n.length>0&&!t.properties.alreadySaved&&t.isValid()){var r=t.saveInlineAddedRows(n,!0);e.deferreds=e.deferreds||[],e.deferreds.push(r)}for(var a=0;a<n.length;a++)t.changes[n[a]]&&delete t.changes[n[a]]}t._super(e)},drawCell:function(e,t,i,n){var r=this;if(e.key)return i;r.newRecords=r.newRecords||{};var a=e.index-1,o=r.columns[a];r.cellMetadata[t]||(r.cellMetadata[t]={}),r.cellMetadata[t][a]||(r.cellMetadata[t][a]={});var s=r.cellMetadata[t][a].properties||o.originalProperties;void 0===s.visible||s.visible,void 0===s.editable||s.editable;if(s.editable=!1,n&&!0,o.properties.displayType="value","summary"==t&&!1,o.setValue(t,i),o.setSurrogateKey(t),s.visible){o.properties=s;var l=new $.Deferred;return $.when(o.renderReadOnly(t,i)).done(function(e){for(var i=0;i<r.columns.length;i++)r.cellOverrides[t]=r.cellOverrides[t]||{},r.getCellOverride(t,i).visible=!0;l.resolve(e)}),l.promise()}return""},onCellReady:function(e,t,i,n){var r=e.index-1,a=this.columns[r],o=(null!=this.cellMetadata[t][r]?this.cellMetadata[t][r].properties:void 0)||a.originalProperties,s=void 0===o.visible||o.visible,l=void 0===o.editable||o.editable;if(l=!!n,s)if(l){var u=a.properties.editable;if(a.properties.editable=l,a.properties.submitOnChange){var c=a.getDecorated(t);c&&(c.properties.submitOnChangexpathContext=this.properties.xpath+"[]")}a.postRender(t,i),a.properties.editable=u}else a.postRenderReadOnly(t,i)},addRow:function(){var e=this,t=e.properties;$.when(e.submitAddRequest()).done(function(i){var n=new bizagi.rendering.tablet.slideForm(e.dataService,e.renderFactory,{container:e.getFormContainer().container,showSaveButton:!0,onSave:function(t){return e.submitSaveRequest(i,t)}}),r=t.xpath+"[id="+i+"]";n.render({idRender:t.id,recordXPath:r,xpathContext:t.xpathContext,idPageCache:t.idPageCache,requestedForm:"addForm",url:t.addPage}).done(function(){t.submitOnChange?e.submitOnChange():e.fetchData()}).fail(function(){e.submitRollbackRequest()})})},editRow:function(e){if(0!=e){var t=this,i=t.properties;if(1!=i.inlineEdit||0!=i.allowEdit)if(t.cleanActionChanges&&void 0!==t.cleanActionChanges[e]){t.changes=t.cleanActionChanges;var n=$.extend(t.changes[e],{});n.idPageCache=i.idPageCache,$(".ui-tooltip").remove(),$.when(t.submitSaveRequest(e,n)).done(function(){t.startLoading(),i.submitOnChange?t.submitForGridChange().always(function(){t.endLoading(),t.executeSubmitEditRequest(e)}):t.fetchData()})}else t.executeSubmitEditRequest(e);else t.editInline(e)}else bizagi.showMessageBox(bizagi.localization.getResource("render-grid-message-no-selected-row"),bizagi.localization.getResource("render-grid-header-no-selected-row"))},executeSubmitEditRequest:function(e){var t=this,i=t.properties,n=new bizagi.rendering.tablet.slideForm(t.dataService,t.renderFactory,{container:t.getFormContainer().container,showSaveButton:!0,onSave:function(i){return t.submitSaveRequest(e,i)}});$.when(t.submitEditRequest(e)).done(function(){var r=i.xpath+"[id="+e+"]";n.render({idRender:i.id,recordXPath:r,xpathContext:i.xpathContext,idPageCache:i.idPageCache,requestedForm:"editForm",url:i.editPage}).done(function(){i.submitOnChange?t.submitOnChange():t.fetchData()}).fail(function(){t.submitRollbackRequest()})})},deleteRow:function(e){if(0!=e){var t=this;bizagi.showConfirmationBox(this.getResource("render-grid-delete-confirmation")).done(function(){$.when(t.submitDeleteRequest(e)).done(function(){t.fetchData()})})}else bizagi.showMessageBox(bizagi.localization.getResource("render-grid-message-no-selected-row"),bizagi.localization.getResource("render-grid-header-no-selected-row"))},moreRows:function(e){var t=this,i=t.properties;void 0===i.originalrowsPerPage&&(i.originalrowsPerPage=i.rowsPerPage),i.rowsPerPage+=i.originalrowsPerPage;var n={};t.collectData(n),jQuery.isEmptyObject(n)?t.moreRowsCommon(e):t.dataService.submitData({action:"SUBMITONCHANGE",data:n,idRender:i.id,xpath:i.xpath,xpathContext:i.xpathContext,idPageCache:i.idPageCache}).done(function(){t.moreRowsCommon(e)})},moreRowsCommon:function(e){var t=this,i=t.properties;t.fetchData(e.page,e.sortBy,e.sortType),$.when(t.dataReadyDeferred).done(function(){0!=i.records&&i.records+1<=i.rowsPerPage&&$(".ui-bizagi-grid-dynamic-pager",t.getControl()).hide()})},showMore:function(e){for(var t=this.properties.data,i=this.getFormContainer(),n=this.properties,r=[],a=0;a<t.rows.length;a++)if(t.rows[a][0]==e){r=t.rows[a];break}new bizagi.rendering.tablet.slide.gridView(this.dataService,this.renderFactory,{container:this.getFormContainer().container,allowEdition:!1}).render({row:r,columns:this.columns,pageCacheId:n.idPageCache,xpath:n.xpath,xpathContext:n.xpathContext,sessionId:i.properties.sessionId,actions:i.actions})},editInline:function(e){for(var t=this,i=t.properties.data,n=t.properties,r=t.getFormContainer(),a=[],o=0;o<i.rows.length;o++)if(i.rows[o][0]==e){a=i.rows[o];break}var s=new bizagi.rendering.tablet.slide.gridView(t.dataService,t.renderFactory,{container:t.getFormContainer().container,allowEdition:!0});$.when(s.render({row:a,columns:t.columns,pageCacheId:n.idPageCache,xpath:n.xpath,xpathContext:n.xpathContext,sessionId:r.properties.sessionId,actions:r.actions,validations:r.validations})).done(function(i){for(xpath in i)t.collectGridChange({id:e,xpath:xpath,value:i[xpath],trigger:!1});var r={};t.collectData(r),t.dataService.submitData({action:"SUBMITONCHANGE",data:r,idRender:n.id,xpath:n.xpath,xpathContext:n.xpathContext,idPageCache:n.idPageCache}).done(function(){t.fetchData()})})},changeCellBackgroundColor:function(e,t,i){if(this.initialLoadDone)for(var n=0;n<this.columns.length;n++){var r=this.getCellOverride(e,n).visible;if(this.columns[n].properties.xpath==t&&r){var a=this.grid.bizagi_grid_tablet("getCell",e,t,n);this.properties.editable&&(a=a.find("input")),a.css("background-color",i);break}}else this.pendingActions&&this.pendingActions.push({method:sel*f.changeCellBackgroundColor,arguments:arguments})},changeCellColor:function(e,t,i){if(this.initialLoadDone){for(var n=0;n<this.columns.length;n++)if(this.columns[n].properties.xpath==t){var r=this.grid.bizagi_grid_tablet("getCell",e,t,n);this.properties.editable&&(r=r.find("input")),r.css("color",i);break}}else this.pendingActions&&this.pendingActions.push({method:this.changeCellColor,arguments:arguments})},changeCellVisibility:function(e,t,i){var n=this;if(n.initialLoadDone){for(var r=0;r<n.columns.length;r++)if(n.columns[r].properties.xpath==t){var a=n.grid.bizagi_grid_tablet("getCell",e,t,r);1==i?a.show():a.hide(),n.cellOverrides[e]=n.cellOverrides[e]||{},n.getCellOverride(e,r).visible=i;break}}else n.pendingActions&&n.pendingActions.push({method:n.changeCellVisibility,arguments:arguments})},setError:function(e,t){if(this.initialLoadDone)for(var i=0;i<this.columns.length;i++){var n=this.getCellOverride(e,i).visible;if(this.columns[i].properties.xpath==t&&n){this.grid.bizagi_grid_tablet("getCell",e,t,i).parent().addClass("ui-bizagi-render-grid-cell-error");break}}else this.pendingActions&&this.pendingActions.push({method:this.setError,arguments:arguments})},ready:function(){var e=this._super(),t=this.inlineAddDeferred?this.inlineAddDeferred.promise():null;return $.when(e,t)},alternativePaginator:function(){var e=this.getControl(),t=this.properties.data.total,i=60*t+12*t;$(".ui-bizagi-grid-pagerArrowLeftFast",e).css("display","inline"),$(".ui-bizagi-grid-pagerArrowLeft",e).css("display","inline"),$(".ui-bizagi-grid-pagerArrowRightFast",e).css("display","inline"),$(".ui-bizagi-grid-pagerArrowRight",e).css("display","inline"),$(".ui-bizagi-grid .ui-bizagi-grid-pager",e).addClass("ui-bizagi-grid-alternativePaginator"),$(".ui-bizagi-grid .ui-bizagi-grid-pager ul",e)[0].style.removeProperty("white-space"),$(".ui-bizagi-grid .ui-bizagi-grid-pager ul",e).css("width",i),$(".ui-bizagi-grid .ui-bizagi-grid-pager",e).draggable(),$(".ui-bizagi-grid-pagerArrowRight",e).on("click",function(t){var i=Number($(".ui-bizagi-grid .ui-bizagi-grid-pager ul",e).css("margin-left").replace(/[^-\d\.]/g,"")),n=Number($(".ui-bizagi-grid .ui-bizagi-grid-pager",e).css("width").replace(/[^-\d\.]/g,"")),r=i-n+120,a=$(".ui-bizagi-grid .ui-bizagi-grid-pager ul li:last",e).position().left;r<-a+n&&(r=-a+n-90),$(".ui-bizagi-grid .ui-bizagi-grid-pager ul",e).animate({"margin-left":r+"px"})}),$(".ui-bizagi-grid-pagerArrowRightFast",e).on("click",function(t){var i=Number($(".ui-bizagi-grid .ui-bizagi-grid-pager",e).css("width").replace(/[^-\d\.]/g,"")),n=-$(".ui-bizagi-grid .ui-bizagi-grid-pager ul li:last",e).position().left+i-90;$(".ui-bizagi-grid .ui-bizagi-grid-pager ul",e).animate({"margin-left":n+"px"})}),$(".ui-bizagi-grid-pagerArrowLeft",e).on("click",function(t){var i=Number($(".ui-bizagi-grid .ui-bizagi-grid-pager ul",e).css("margin-left").replace(/[^-\d\.]/g,""))+Number($(".ui-bizagi-grid .ui-bizagi-grid-pager",e).css("width").replace(/[^-\d\.]/g,""))-120;i>0&&(i=30),$(".ui-bizagi-grid .ui-bizagi-grid-pager ul",e).animate({"margin-left":i+"px"})}),$(".ui-bizagi-grid-pagerArrowLeftFast",e).on("click",function(t){$(".ui-bizagi-grid .ui-bizagi-grid-pager ul",e).animate({"margin-left":"30px"})})},cleanCellData:function(e,t){var i=this;if(i.initialLoadDone){var n=i.getControlCell(e,t);if(n){n.cleanData();for(var r=0;r<i.columns.length&&i.columns[r].properties.xpath!=t;r++);for(var a=i.properties.data.rows,o=0,s=a.length;o<s;o++)if(Number(e)===a[o][0]){a[o][r+1]=[["",""]];break}i.cellOverrides[e]=i.cellOverrides[e]||{},i.getCellOverride(e,r).value=null,i.cleanActionChanges||(i.cleanActionChanges={}),i.cleanActionChanges[e]||(i.cleanActionChanges[e]={}),i.cleanActionChanges[e][t]=""}}else i.pendingActions.push({method:i.cleanData,arguments:""})},getAndroidVersion:function(){var e=navigator.userAgent.toLowerCase().match(/android\s([0-9\.]*)/);return!!e&&e[1]}}),bizagi.rendering.grid.extend("bizagi.rendering.grid.offline",{MAX_ROWS_SUPPORTED:4},{init:function(e){e.data;this._super(e),this.cellMetadata={};var t=this.properties;t.data.originalRows=bizagi.clone(t.data.rows);var i=this.getFormContainer();t.displayType="vertical",t.labelAlign="left",(t.groupBy||t.groupSummary)&&i.addWarning(this.getResource("render-tablet-warning-grid"))},postRender:function(){var e=this,t=e.properties,i=e.getControl();for(var n in e.initialLoadDone=!1,i.addClass("ui-bizagi-render-grid-container").addClass("ui-bizagi-render-display-block"),e.grid=$(">div",i),e.getLabel().hide(),e.applyGridPlugin(),t.data&&(e.updateData(t.data),$.when(e.ready()).done(function(){e.triggerRenderChange({changed:!1})})),e.initialLoadDone=!0,e.pendingActions)e.pendingActions[n].method.apply(e,e.pendingActions[n].arguments)},postRenderReadOnly:function(){this.postRender()},applyGridPlugin:function(){var e=this,t=e.properties,i=e.grid,n=e.getMode(),r=bizagi.util.isOfflineForm({context:e}),a=e.buildColumnModel();i.bizagi_grid_tablet({columns:a,maxColumns:e.Class.MAX_ROWS_SUPPORTED,title:t.displayName,isOfflineForm:r||!1,mode:e.getMode(),template:{grid:e.renderFactory.getTemplate("bizagi.grid.grid"),waiting:e.renderFactory.getTemplate("bizagi.grid.waiting"),table:e.renderFactory.getTemplate("bizagi.grid.table"),emptyTable:e.renderFactory.getTemplate("bizagi.grid.table.empty"),column:e.renderFactory.getTemplate("bizagi.grid.column"),specialColumn:e.renderFactory.getTemplate("bizagi.grid.column.special"),row:e.renderFactory.getTemplate("bizagi.grid.row"),rowButtons:e.renderFactory.getTemplate("bizagi.grid.row.buttons.offline"),cell:e.renderFactory.getTemplate("bizagi.grid.cell"),specialCell:e.renderFactory.getTemplate("bizagi.grid.cell.special"),pager:e.renderFactory.getTemplate("bizagi.grid.pager"),buttons:e.renderFactory.getTemplate("bizagi.grid.buttons.offline"),dynamicPager:e.renderFactory.getTemplate("bizagi.grid.dynamicpager")},actions:{add:t.allowAdd,edit:t.allowEdit&&t.withEditForm&&null!=t.data,remove:t.allowDelete,details:!1,inlineAdd:!0,allowMore:!1,enableXlsExport:!1,enablePdfExport:!1},isValid:function(){var t=[],i=e.getFormContainer();if(void 0!==i.validationController&&i.validationController.clearValidationMessages(),e.isValid(t),t.length>0){for(var n=0;n<t.length;n++)i.validationController.showValidationMessage(t[n].message,t[n].xpath);return!1}return!0},pageRequested:function(t){"execution"==n&&e.fetchData(t.page,t.sortBy,t.sortType)},drawCell:function(t){return e.drawCell(t.column,t.key,t.value,t.isNewRow)},cellReady:function(t){return e.onCellReady(t.column,t.key,t.cell,t.isNewRow)},rowSelected:function(t){if("execution"==n){e.triggerHandler("rowSelected",{id:t.key,data:t})}},addRow:function(t){"execution"==n&&e.addRow()},editRow:function(t){"execution"==n&&e.editRow(t.key)},deleteRow:function(t){"execution"==n&&e.deleteRow(t.key)},saveAddedRows:function(t){e.saveInlineAddedRows(t.keys)},beforeInlineAdd:function(){e.inlineAddDeferred=new $.Deferred},afterInlineAdd:function(){e.inlineAddDeferred&&e.inlineAddDeferred.resolve()},cancelEdition:function(t){e.removeNewRecords(t)},removeNewRecords:function(t){e.removeNewRecords(t)}})},buildColumnModel:function(){return bizagi.rendering.grid.prototype.buildColumnModel.call(this)},refresh:function(){this.fetchData()},dataReady:function(){return null!=this.dataReadyDeferred?this.dataReadyDeferred.promise():null},updateData:function(e){return bizagi.rendering.grid.prototype.updateData.apply(this,arguments)},fetchData:function(e,t,i){var n=this;n.dataReadyDeferred=new $.Deferred,n.startLoading(),$.when(n.getRemoteData()).then(function(e){n.endLoading(),e&&(n.updateData(e),n.triggerRenderChange(),n.dataReadyDeferred.resolve())})},processChanges:function(){var e=[],t=this.properties.data;for(var i in this.changes){var n=[];for(var r in n.push(i),this.changes[i])if(this.canColumnBeSent(i,r)){var a=this.changes[i][r];"string"==typeof a&&null!==a.match(/\n/gm)&&(a=a.replaceAll("\n","\\n")),n.push({value:a,xpath:r,DataType:this.getColumn(r).properties.dataType})}if(void 0!==this.properties.data.rows&&this.properties.data.rows.length>0)for(var o=[],s=0;s<t.rows.length;s++)if(t.rows[s][0]==i){o=t.rows[s],t.rows.splice(s,1),s--,o=this.processRow(o),n=$.extend(!0,o,n);break}e.push(n)}return e},collectData:function(e){var t=this,i=[],n=t.properties,r=t.properties.data;if(t.isValid([]))for(var a in t.changes){var o=[];for(var s in t.changes[a])if(t.canColumnBeSent(a,s)){var l=t.getColumn(s).columnIndex-1,u=t.changes[a][s];"string"==typeof u&&null!==u.match(/\n/gm)&&(u=u.replaceAll("\n","\\n")),o[l]={value:u,xpath:s,DataType:t.getColumn(s).properties.dataType}}if(void 0!==t.properties.data.rows&&t.properties.data.rows.length>0)for(var c=[],d=0;d<r.rows.length;d++)if(r.rows[d][0]==a){c=r.rows[d],r.rows.splice(d,1),d--,c=t.processRow(c),o=$.extend(!0,c,o);break}i[i.length]=o}(JSON.stringify(r.rows)!==JSON.stringify(r.originalRows)||i.length>0)&&(void 0!==r.rows&&i.length>0?e[n.xpath]=$.merge($.merge([],t.processOldRows(r.rows)),i):void 0!==r.rows&&r.rows.length>0?e[n.xpath]=t.processOldRows(r.rows):e[n.xpath]=i)},processOldRows:function(e){for(var t=[],i=e,n=0,r=i.length;n<r;n++){var a=i[n];t[n]=$.grep(a,function(e,t){return t>0})}return t},processRow:function(e){return $.grep(e,function(e,t){return t>0})},drawCell:function(e,t,i,n){var r=this;if(e.key)return i;"object"!=typeof i||n||(i=i.hasOwnProperty("value")?i.value:i);var a=e.index-1,o=r.columns[a],s=r.getCellOverride(t,e.index-1);r.newRecords=r.newRecords||{},r.cellMetadata[t]||(r.cellMetadata[t]={}),r.cellMetadata[t][a]||(r.cellMetadata[t][a]={});var l=r.cellMetadata[t][a].properties||o.originalProperties,u=void 0===l.visible||l.visible,c=void 0===l.editable||l.editable;if(u=s.visible,c=!!l.editable&&s.editable,n&&(c=!0),"summary"==t&&(c=!1),o.properties.displayType="value",o.setValue(t,i),o.setSurrogateKey(t),"columnSearch"==o.properties.type&&null!=i)for(var d=0,p=o.properties.data.length;d<p;d++)o.properties.data[d].id==i&&(i={id:o.properties.data[d].id,label:o.properties.data[d].value});if(("columnCombo"==o.properties.type||"columnList"==o.properties.type)&&null!=i)for(d=0,p=o.properties.data.length;d<p;d++)o.properties.data[d].id==i&&(i=[[o.properties.data[d].id,o.properties.data[d].value]]);return u?c?r.drawEditableCell(o,l,t,i,n):r.drawReadonlyCell(o,l,t,i):""},drawEditableCell:function(e,t,i,n,r){var a=this,o=new $.Deferred,s=e.properties.editable;return e.properties.editable=!0,e.overrideProperties({required:t.required}),$.when(e.render(i,n)).done(function(t){r&&!a.newRecords[i]&&(a.newRecords[i]={});for(var n=0;n<a.columns.length;n++)a.cellOverrides[i]=a.cellOverrides[i]||{},a.getCellOverride(i,n).visible=null==a.getCellOverride(i,n).visible||a.getCellOverride(i,n).visible;e.getDecorated(i).bind("renderchange",function(n){a.onCellChange(e,t,i)}),o.resolve(t)}),e.properties.editable=s,o.promise()},drawReadonlyCell:function(e,t,i,n){var r="";if("summary"==i){var a=e.properties.textFormat;e.properties.totalize&&(e.properties.textFormat=e.properties.totalize.format),r=e.renderSummary(i,n),e.properties.textFormat=a}else r=e.renderReadOnly(i,n);return r},onCellChange:function(e,t,i){var n=e.getValue(i),r=e.getCompositeValue(i);if("columnDate"==e.properties.type&&1==e.data.properties.showTime)if(bizagi.util.isEmpty(n))""===n&&(n="");else{var a=bizagi.util.dateFormatter.getDateFromInvariant(n,!0);n=bizagi.util.dateFormatter.formatInvariant(a,!0)}else if("columnDate"==e.properties.type){if(bizagi.util.isEmpty(n))""===n&&(n="");else(a=bizagi.util.dateFormatter.getDateFromInvariant(n,!1)).setHours(0,0,0,0),n=bizagi.util.dateFormatter.formatInvariant(a,!0)}if(this.properties.allowEdit||this.grid.bizagi_grid_tablet("isNewRecord",i)){var o=!this.grid.bizagi_grid_tablet("isNewRecord",i);this.collectGridChange({id:i,xpath:e.properties.xpath,value:n,compositeValue:r,columnIndex:e.columnIndex,trigger:o})}this.grid.bizagi_grid_tablet("changeCellValue",i,e.columnIndex,n),e.properties.totalize&&e.properties.totalize.operation&&this.grid.bizagi_grid_tablet("refreshSummary",e.columnIndex)},collectGridChange:function(e){var t=(e=e||{}).id,i=e.xpath,n=e.value,r=void 0===e.trigger||e.trigger;this.changes[t]=this.changes[t]||{},this.changes[t][i]=n,r&&this.triggerRenderChange({key:t,column:i})},onCellReady:function(e,t,i,n){bizagi.rendering.grid.prototype.onCellReady.apply(this,arguments)},addRow:function(){bizagi.showMessageBox(bizagi.localization.getResource("render-tablet-error-userfield"),bizagi.localization.getResource("render-tablet-error-userfield"))},editRow:function(e){},deleteRow:function(e){if(e&&0!=e){var t=this;bizagi.showConfirmationBox(this.getResource("render-grid-delete-confirmation")).done(function(){$.when(t.submitDeleteRequest(e)).done(function(){t.fetchData()})})}else bizagi.showMessageBox(bizagi.localization.getResource("render-grid-message-no-selected-row"),bizagi.localization.getResource("render-grid-header-no-selected-row"))},editInline:function(e){},saveInlineAddedRows:function(e,t){var i=this.processChanges();bizagi.util.isEmpty(i)||(this.properties.data.rows=$.merge(this.properties.data.rows,i))},removeNewRecords:function(e){var t=this;e&&e.keys&&$.each(e.keys,function(e,i){t.newRecords[i]&&delete t.newRecords[i]})},changeCellBackgroundColor:function(e,t,i){bizagi.rendering.grid.prototype.changeCellBackgroundColor.apply(this,arguments)},changeCellColor:function(e,t,i){bizagi.rendering.grid.prototype.changeCellColor.apply(this,arguments)},changeCellVisibility:function(e,t,i){bizagi.rendering.grid.prototype.changeCellVisibility.apply(this,arguments)},changeCellEditability:function(e,t,i){bizagi.rendering.grid.prototype.changeCellEditability.apply(this,arguments)},cleanCellData:function(e,t){bizagi.rendering.grid.prototype.cleanCellData.apply(this,arguments)},changeCellRequired:function(e,t,i){bizagi.rendering.grid.prototype.changeCellRequired.apply(this,arguments)},setError:function(e,t){bizagi.rendering.grid.prototype.setError.apply(this,arguments)},ready:function(){var e=this._super(),t=this.inlineAddDeferred?this.inlineAddDeferred.promise():null;return $.when(e,t)},getRemoteData:function(e){var t=this.properties;if(e=e||{},t.overrideGetRemoteData){var i=t.overrideGetRemoteData(e);return null!=i?i.promise():null}var n=new $.Deferred,r=t.data;return t.page=r.page,t.records=r.records,t.totalPages=r.totalPages,this.isRTL()&&(r.rows=this.changeOrderData(r.rows)),n.resolve(r),n.promise()},submitDeleteRequest:function(e){for(var t=this.properties.data,i=!1,n=0;n<t.rows.length;n++)if(t.rows[n][0]==e){t.rows[n],t.rows.splice(n,1),n--,t.records--,i=!0;break}return i||bizagi.showMessageBox(this.getResource("workportal-general-no-records-found")),t.rows}}),bizagi.rendering.render.extend("bizagi.rendering.collectionnavigator",{},{initializeData:function(e){var t=this;t._super(e);var i=t.properties;i.allowAdd=void 0===i.allowAdd||bizagi.util.parseBoolean(i.allowAdd),i.withAddForm=i.withAddForm&&i.allowAdd,i.allowEdit=void 0===i.allowEdit||bizagi.util.parseBoolean(i.allowEdit),i.withEditForm=i.withEditForm&&i.allowEdit,i.allowDetail=void 0!==i.allowDetail&&bizagi.util.parseBoolean(i.allowDetail),i.inlineAdd=void 0===i.inlineAdd||bizagi.util.parseBoolean(i.inlineAdd),i.inlineAdd=i.inlineAdd&&i.allowAdd,i.inlineEdit=void 0===i.inlineEdit||bizagi.util.parseBoolean(i.inlineEdit),i.inlineEdit=i.inlineEdit&&i.allowEdit,i.allowDelete=void 0===i.allowDelete||bizagi.util.parseBoolean(i.allowDelete),t.orientation=t.properties.orientation||"ltr",t.data=t.properties.data,t.keys=t.data?t.getKeys(t.data.rows):[],t.pointer=0,t.totalRows=0,t.inlineAddRecords=[],t.data&&(t.totalRows=t.data.rows.length)},getKeys:function(e){for(var t=[],i=0,n=(e=e||[]).length;i<n;i++){var r=e[i];t.push(r[0])}return t},renderControl:function(){var e=this.properties,t=this.renderFactory.getTemplate("collectionnavigator"),i=this.getMode(),n=$.fasttmpl(t,{uniqueId:e.uniqueId,displayName:e.displayName?e.displayName:"",id:e.id,guid:e.guid,showPreview:this.showPreview(),mode:i,orientation:this.getFormContainer().properties.orientation});return n=this.drawControls(n)},renderReadOnly:function(){return this.renderControl()},drawControls:function(e){},drawActions:function(e){},drawControl:function(e){},drawForms:function(e){},drawPreview:function(){var e="execution"===this.getMode()?"collectionnavigator-execution":"collectionnavigator-preview",t=this.renderFactory.getTemplate(e),i=$.tmpl(t);this.canvas.append(i)},hasData:function(){return this.getTotalRows()>0},getRow:function(){return this.keys[this.pointer]},getNextRow:function(){return this.getTotalRows()>this.pointer+1&&(this.pointer+=1),this.getRow()},getPreviousRow:function(){return this.pointer>0&&(this.pointer-=1),this.getRow()},getFirstRow:function(){return this.pointer=0,this.getRow()},getLastRow:function(){return this.pointer=this.keys.length-1,this.getRow()},getTotalRows:function(){return this.keys.length},getIndexes:function(){return this.properties.data.rows},setPointer:function(e){this.pointer=e-1},isTherePendingInlineRow:function(){return this.inlineAddRecords.length>0},addKey:function(e){this.keys.push(e)},removeKey:function(){var e=this.pointer;if(e>=0){this.keys.splice(e,1);var t=this.getTotalRows();t>0&&e>=t&&this.setPointer(t)}},showPreview:function(){var e=this.getMode(),t=this.properties;return"execution"==e?!this.hasData():!bizagi.util.parseBoolean(t.navigationform)},getParameters:function(e){var t={},i=this.properties,n=i.xpath+"[id="+e.id+"]";return t.idRender=i.id,t.recordXPath=n,t.xpathContext=i.xpathContext,t.idPageCache=i.idPageCache,t.requestedForm=e.requestedForm,t.contextType=i.contextType||i.contexttype,t.url=e.url,t.editable=e.editable,i.orientation,t},submitAddRequest:function(){var e=this.properties;return this.dataService.addGridRecord({url:e.addUrl,idRender:e.id,xpath:e.xpath,xpathContext:e.xpathContext,contexttype:e.contextType||e.contexttype,idPageCache:e.idPageCache,orientation:e.orientation||"ltr"}).pipe(function(e){return e.idEntity}).promise()},submitEditRequest:function(e){var t=this.properties,i=t.xpath+"[id="+e+"]";return this.dataService.editGridRecord({url:t.editUrl,idRender:t.id,xpath:i,xpathContext:t.xpathContext,idPageCache:t.idPageCache,contexttype:t.contextType||t.contexttype||"",orientation:t.orientation||"ltr"})},submitDeleteRequest:function(e){var t=this,i=t.properties,n=i.xpath+"[id="+e+"]";return t.dataService.deleteGridRecord({url:i.deleteUrl,idRender:i.id,xpath:n,xpathContext:i.xpathContext,idPageCache:i.idPageCache,contexttype:i.contextType||i.contexttype}).pipe(function(e){if("validationMessages"==e.type){var i=t.getFormContainer(),n=e.messages.join(" ");i.failHandler({message:n})}return e})},submitSaveRequest:function(e,t){var i=this,n=i.properties,r=n.xpathContext.length>0?n.xpathContext+"."+n.xpath+"[id="+e+"]":n.xpath+"[id="+e+"]";return i.dataService.saveGridRecord({url:n.saveUrl,idRender:n.id,xpath:n.xpath,xpathContext:r,contexttype:n.contextType||n.contexttype||"",submitData:t}).fail(function(e){var t=i.getFormContainer(),n=e.responseText?e.responseText:"string"==typeof e?e:e.toString();if("string"==typeof n)try{n=JSON.parse(n).message}catch(e){n=(n=n.match(/"message":(.*)",/)[0]).substr(11,n.length-13)}else n.message||(n=e);t.validateForm(),t.clearValidationMessages(),t.addValidationMessage(n)})},submitRollbackRequest:function(e){var t=this.properties;return this.dataService.rollbackGridAction({url:t.rollbackUrl,idRender:t.id,xpath:t.xpath,xpathContext:t.xpathContext,idPageCache:e.idPageCache,contexttype:this.properties.contexttype||""})},getRemoteData:function(e){var t=this.properties;return e=e||{},$.extend(e,{url:t.dataUrl,xpath:t.xpath,idRender:t.id,xpathContext:t.xpathContext,contexttype:t.contextType||t.contexttype,idPageCache:t.idPageCache}),this.dataService.getData(e)},isValid:function(e){this.validateControls(e)},validateControls:function(e){return!!this.form&&this.form.validationController.performValidations(e)}}),bizagi.rendering.search.extend("bizagi.rendering.search",{ADVANCED_SEARCH_ID:-1,ADVANCED_ADDITION_ID:-2,SEARCH_MIN_LENGTH:3,SEARCH_DELAY:700},{init:function(e){this._super(e);this.properties},postRender:function(){var e=this.getControl();this._super(),this.searchInput=$("input",e),this.isOffline=void 0!==bizagi.context.isOfflineForm&&bizagi.context.isOfflineForm,this.isOffline?(this.properties.submitOnChange=!1,this._simplySuggestOffline()):this.properties.advancedSearch?this._advanceSearch():this._simplySearch()},_simplySuggestOffline:function(){var e=this.getControl();$(".bt-search",e).hide(),this.applyAutocompletePlugin()},_simplySearch:function(){var e=this.getControl();$(".bt-search",e).hide(),this.applyAutocompletePlugin()},_advanceSearch:function(){var e=this,t=e.getControl();e.searchInput.attr("readonly","true"),$(".bt-search",t).click(function(){e.showSlideSearch()})},setDisplayValue:function(e){var t=this.properties;void 0!==e&&t.editable&&this.searchInput.val(e.label),this._super(e)},getDisplayValue:function(){return this.selectedValue},showSlideSearch:function(){var e=this,t=e.properties,i={container:e.getFormContainer().container};new bizagi.rendering.slide.search(e.dataService,e.renderFactory,t.searchForms,{allowFullSearch:t.allowFullSearch,maxRecords:t.maxRecords},i).render({idRender:t.id,xpath:t.xpath,xpathContext:t.xpathContext,idPageCache:t.idPageCache}).done(function(t){e.setValue(t),e.submitData()})},applyAutocompletePlugin:function(){var e=this,t=(e.getControl(),e.searchInput);t.autocomplete({messages:{noResults:null,results:function(){}},delay:this.Class.SEARCH_DELAY,minLength:this.Class.SEARCH_MIN_LENGTH,source:function(t,i){e.processRequest(t,i)},appendTo:e.element.find(".ui-bizagi-render-control"),autoFocus:!0,select:function(t,i){e.isOffline?e.setValue({id:i.item.id,label:i.item.value},!0):(e.setDisplayValue({id:i.item.id,label:i.item.value}),void 0!==e.properties.submitOnChange&&1==e.properties.submitOnChange&&e.submitOnChange())}}),t.data("ui-autocomplete")._renderItem=function(t,i){return e.renderSearchItem(i).appendTo(t)}},processRequest:function(e,t){var i=this,n=i.properties,r=[];if(e.term.length>=this.Class.SEARCH_MIN_LENGTH)if(n.term=e.term,i.isOffline){var a=i.properties.data;$.each(a,function(e,t){var i="";switch(typeof t.value){case"number":i=t.value;break;case"object":i=t.value.toString();break;case"string":default:i=t.value}void 0!==i&&-1!==i.toLowerCase().indexOf(n.term.toLowerCase())&&r.push({id:void 0!==t.id?t.id:"",label:void 0!==i?i.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+$.ui.autocomplete.escapeRegex(n.term)+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>"):"",value:void 0!==i?t.value:""})}),o(r)}else this.getData().done(function(t){$.each(t,function(t,i){r.push({id:i.id,label:i.value.toString().replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+$.ui.autocomplete.escapeRegex(e.term)+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>"),value:i.value})}),o(r)}).fail(function(){});else o(r);function o(e){n.allowClear&&void 0!==i.value&&e.push({id:i.Class.CLEAR_SEARCH_ID,label:"",value:""}),n.advancedSearch&&e.push({id:i.Class.ADVANCED_SEARCH_ID,label:"",value:""}),n.allowAdd&&e.push({id:i.Class.ADVANCED_ADDITION_ID,label:"",value:""}),t(e)}},renderSearchItem:function(e){this.properties;var t=$.tmpl(this.renderFactory.getTemplate("searchItem"),{id:e.id,label:e.label,value:e.value});return t.data("ui-autocomplete-item",e),t},showAddRecordDialog:function(){var e=this,t=e.properties;return{buttons:{text:bizagi.localization.getResource("render-form-dialog-box-add"),click:function(){new bizagi.rendering.dialog.form(e.dataService,e.renderFactory,{showSaveButton:t.editable,title:bizagi.localization.getResource("render-dialog-entity"),onSave:function(i){var n={action:"SAVE",data:i,idPageCache:i.idPageCache,guidEntity:t.entity,contexttype:"entity"};$.when(e.dataService.submitData(n)).done(function(e){})}}).render({idRender:t.id,idPageCache:t.idPageCache,requestedForm:"addForm",guidEntity:t.entity,contextType:"entity"}).fail(function(){})}}}}}),bizagi.rendering.letter.extend("bizagi.rendering.letter",{},{init:function(e){this._super(e),this.properties.required=!1}}),bizagi.rendering.button.extend("bizagi.rendering.button",{},{postRender:function(){var e=this,t=e.getControl(),i=$(":button",t);i.button(),i.removeClass("ui-state-default"),i.click(function(){e.processButton()})},postRenderReadOnly:function(){var e=this.getControl();this.postRender(),$(":button",e).button("option","disabled","true")},processButton:function(){var e=this.properties;e.editable&&(e.needsUserConfirmation?1==window.confirm(e.userConfirmationMessage)&&(this.triggerRenderChange({pressed:!0}),this.runButtonAction()):(e.preventDefault||this.runButtonAction(),this.triggerRenderChange({pressed:!0})))},runButtonAction:function(){var e=this;e.getFormContainer().clearValidationMessages(),e.saveForm().pipe(function(){return e.executeButton()}).done(function(t){if(null==t||1==t||"success"==t.result||"success"==t.type)return e.refreshForm();"validationMessages"==t.type&&e.getFormContainer().addValidationMessage(t.messages)}).fail(function(t,i,n){e.getFormContainer().addErrorMessage(n)})},processLayout:function(){var e=this.properties;e.required=null!=e.required&&bizagi.util.parseBoolean(e.required);var t=null==e.visible||bizagi.util.parseBoolean(e.visible);e.required&&this.changeRequired(e.required),t||this.changeVisibility(t)}}),bizagi.rendering.fileprint.extend("bizagi.rendering.fileprint",{},{postRender:function(){this.getControl().parent().hide()}}),bizagi.rendering.link.extend("bizagi.rendering.link",{},{configureHandlers:function(){var e=this.getControl(),t=this.properties,i=$(".ui-bizagi-render-link",e),n=t.value&&null!==t.value.toLowerCase().match(/^(http|https):\/\//)||!1;this._super(),this.input=e.find("a"),t.editable||i.addClass("ui-state-disabled"),t.editable&&n&&(i.attr("href",t.value),i.attr("target","_blank"),i.attr("data-rel","external"),$(this.input).on("click",function(e){e.preventDefault();var t=$(this).attr("href");window.open(t,"_system")}))},postRenderReadOnly:function(){this.configureHandlers()}}),bizagi.rendering.formLink.extend("bizagi.rendering.formLink",{},{postRender:function(e){var t=this,i=t.getControl();$(".ui-bizagi-render-link",i).click(function(){t.openLink()})},openLink:function(){var e=this,t=e.properties;$.when(e.submitEditRequest()).done(function(){new bizagi.rendering.tablet.slideForm(e.dataService,e.renderFactory,{container:e.getFormContainer().container,showSaveButton:t.editable,onSave:function(t){return e.submitSaveRequest(t)}}).render({idRender:t.id,xpathContext:t.xpathContext,idPageCache:t.idPageCache,recordXPath:e.getFormLinkXpath(),requestedForm:"linkform",editable:t.editable,url:t.editPage}).fail(function(){e.submitRollbackRequest()})})},postRenderReadOnly:function(){this.postRender()}}),bizagi.rendering.hidden.extend("bizagi.rendering.hidden",{},{}),bizagi.rendering.money.extend("bizagi.rendering.money",{},{postRender:function(){this._super(),this.numericInput=$("input",this.getControl())},setDisplayValue:function(e){var t=this.properties;this._super(e),null!=e&&t.editable&&(this.numericInput.val(e),this.attachFormatCurrency(),this.executeFormatCurrencyPlugin())}}),bizagi.rendering.radio.extend("bizagi.rendering.radio",{},{postRender:function(){var e=this;this._super(),e.combo=e.getControl(),e.combo.change(function(){var t=e.combo.find("input:radio:checked"),i={id:t.prop("value"),value:t.siblings("label").text()};e.setValue(i)})},setDisplayValue:function(e){this.properties.editable&&void 0!==e&&null!=e.id&&this.combo.find('input[type="radio"][value="'+e.id+'"]').prop("checked","checked")}}),bizagi.rendering.cascadingCombo.extend("bizagi.rendering.cascadingCombo",{},{postRender:function(){bizagi.rendering.combo.prototype.postRender.apply(this,arguments),this.processLayout()},cleanInput:function(){},setDisplayValue:function(e){this.properties;this.selectedValue=e,this.selectedValue=e.value,bizagi.rendering.combo.prototype.setDisplayValue.apply(this,arguments)},getSelectedValue:function(){return bizagi.rendering.combo.prototype.getSelectedValue.apply(this,arguments)},onComboChange:function(e,t){var i={id:e,value:t};this.setValue(i,this.initialValueSet),this.selectedValue=t,this.triggerHandler("select",i)},setValue:function(e,t){if(t=void 0===t||t,""===e&&(e={id:"",value:""}),e){var i=e.id||"",n=e.value||"";this.selectedValue={id:i,value:n},t&&this.triggerHandler("select",{id:i,value:n}),this._super(this.selectedValue,t)}},findDataById:function(){return bizagi.rendering.combo.prototype.findDataById.apply(this,arguments)}}),bizagi.rendering.list.extend("bizagi.rendering.list",{},{postRender:function(){var e=this,t=e.getControl(),i=e.properties;if(this._super(),t.addClass("ui-bizagi-render-display-block"),t.addClass("ui-bizagi-render-boolean-yesno"),e.list=$(".ui-bizagi-render-list",t),e.list.selectable({select:function(t,i){if(!t.isPropagationStopped()){var n=$("li[tabindex='0']",this),r={id:$(n).data("value"),value:$(n).text()};e.setValue(r),e.selectedValue=r.value,e.focusSelectedItem(n),t.stopPropagation()}}}),i.listSize>0){var n=23*Number(i.listSize);e.list.height(n+"px")}},setDisplayValue:function(e){var t=this.properties;this.getControl();t.editable&&void 0!==e&&""!=e.id&&this.list.selectable("select","[id='ui-bizagi-list-"+e.id+"']")},focusSelectedItem:function(e){$.when(this.ready()).done(function(){e.focus()})},configureHandlers:function(){this._super()},configureDesignView:function(){var e=this.properties;this._super(),e.editable&&(this.list.unbind("mousedown.selectable"),this.list.unbind("focus.selectable"),this.list.unbind("blur.selectable"),this.list.unbind("keydown.selectable"))},setDisplayValue:function(e){var t=this.properties;this.getControl();t.editable&&void 0!==e&&""!=e.id&&this.list.selectable("select","[id='ui-bizagi-list-"+e.id+"']")},clearDisplayValue:function(){this.list.selectable("select","")},getSelectedValue:function(){return this.selectedValue}}),bizagi.rendering.multiSelect.extend("bizagi.rendering.multiSelect",{postRender:function(){this.getControl();this._super()},postRenderReadOnly:function(){this._super()}}),bizagi.rendering.association.extend("bizagi.rendering.association",{},{postRender:function(){var e=this.getControl();this.association=$(".bz-wp-render-association",e),this.association.find(".association-container").accordion({autoHeight:!1,animated:!1}),this.addEventControl()},addEventControl:function(){var e=this,t=e.renderFactory.getTemplate("association"),i=e.getControl();e.association.delegate("input:checkbox","change",function(){var t=$(this).data("id");$(this).prop("checked")?e.associateItem(t):e.deAssociateItem(t)}),e.association.delegate(".association-flip-button","click",function(){$(i).empty(),e.properties.flipped=!e.properties.flipped,e.properties.flipstate=e.properties.flipped,e.dataService.getFlipAssociation(e.properties),$.tmpl(t,e.properties,{getColumnData:e.getColumnData,getRightAssociation:e.getRightAssociation,getLeftName:e.getLeftName}).appendTo(i),e.postRender()})},postRenderReadOnly:function(){var e=this,t=e.getControl(),i=e.renderFactory.getTemplate("association");e.makeJsonBase(),$.tmpl(i,e.properties,{getColumnData:e.getColumnData,getRightAssociation:e.getRightAssociation,getLeftName:e.getLeftName}).appendTo(t),e.association=$(".bz-wp-render-association",t),e.association.find("input:checkbox").hide(),setTimeout(function(){$.when(e.association.find(".association-container",t).accordion({autoHeight:!1,animated:!1}))},5),e.properties.allowFlip&&e.association.delegate(".association-flip-button","click",function(){$(t).empty(),e.properties.flipped=!e.properties.flipped,e.postRenderReadOnly()})},associateItem:function(e){var t=this.getControl(),i=$(".association-container .ui-accordion-content-active",t).children("ul").data("parent-id");this.addElement(i,e)},deAssociateItem:function(e){var t=this.getControl(),i=$(".association-container .ui-accordion-content-active",t).children("ul").data("parent-id");this.removeElement(i,e)}}),bizagi.rendering.ecm.extend("bizagi.rendering.ecm",{BA_ACTION_PARAMETER_PREFIX:bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,BA_CONTEXT_PARAMETER_PREFIX:bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,QUALITY_PICTURE:80,LIMIT:1,EXTENSIONSIMG:["image/jpeg","jpeg","image","png","jpg"],EXTENSIONSVIDEO:["video/quicktime","quicktime","qt","mov"],EXTENSIONSAUDIO:["audio/wav","audio","wav"]},{postRender:function(){this._super(),this.activateUploadNative()},postRenderReadOnly:function(){bizagi.util.isCordovaSupported()||this.addEventToOpenSlide()},addEventToOpenSlide:function(){var e=this,t=e.getMode(),i=e.getControl(),n=e.getControl();e.itemAddfile=$(".bz-rn-upload-show-menu",n),e.itemAddfile.hide(),$("li",i).click(function(){var i=$(this).data("url");"execution"==t&&new bizagi.rendering.tablet.slide.upload(e.dataService,e.renderFactory,{container:e.getFormContainer().container,url:i}).render({url:i})})},activateUploadNative:function(){var e=this,t=e.properties,i=e.getControl(),n=$("body"),r=e.getControl();r.css("display","block"),r.css("width","100%"),r.css("padding","0"),e.getLabel()&&e.getLabel().hide(),e.itemAddfile=$(".bz-rn-ecm-upload",i),$(".bz-rn-ecm-activate-menu",r).bind("click",function(){var t=$(this),i=t.parents(".bz-rn-ecm-metadata"),n=$(".bz-rn-ecm-menu-container",i);n.css("top","0").css("left","0"),n.toggle(),n.position({of:t,my:"right right",at:"left left",offset:"-8px",collision:"flipfit flipfit"});var r=t.parent().data("idfileupload")||"";e.elementsEvent={menu:n,lock:$(".bz-ecm-lock",n),unlock:$(".bz-ecm-unlock",n),del:$(".bz-ecm-delete",n),edit:$(".bz-ecm-edit",n),element:{id:r,filename:t.parent().attr("title")||"",elementReference:this},params:{idFileUpload:r,xPath:e.properties.xpath,idAttrib:e.properties.idAttrib,idPageCache:e.properties.idPageCache,xpathContext:e.getXpathContext()},panelMetadata:$(".bz-rn-ecm-metadata-container",i),btnCancel:$(".bz-rn-ecm-btn-cancel",i),btnSave:$(".bz-rn-ecm-btn-save",i)},n.is(":visible")?e.addEventsEcm():e.removeEventsEcm()}),bizagi.util.isCordovaSupported()&&0!=t.editable?("tablet_android"==bizagi.detectDevice()&&(e.uploadEcmLink=$(".bz-rn-ecm-url > span",i),e.uploadEcmLink.bind("click",function(e){window.open(encodeURI(this.getAttribute("href")),"_system","location=yes")})),e.itemsUpload={file:$(".file",i),image:$(".image",i),cimage:$(".cimage",i),caudio:$(".caudio",i),cvideo:$(".cvideo",i)},e.itemAddfile.show(),e.itemAddfile.bind("click",function(t){var r=$(".bz_rn_upload_container_upload_items",i);if(r.hasClass("bz_clone_active")){r.removeClass("bz_clone_active");var a=$("#bz_active_clone_Upload",n);return a.hide(),a.remove(),r.hide(),void e.removeListener()}if(r.is(":visible"))return r.hide(),void e.removeListener();try{var o=e.getContainerRender().parent();o&&o.find(".bz_rn_upload_container_upload_items:visible").hide()}catch(t){}r.show();var s=parseInt(r.css("height"));if(e.itemAddfile.offset().top-60-s>0)r.addClass("bottomArrow"),r.position({of:e.itemAddfile,my:"center bottom",at:"center top",offset:"-10px",collision:"flipfit flipfit"});else{r.hide(),r.addClass("bz_clone_active");var l=r.clone();l.attr("id","bz_active_clone_Upload"),l.addClass("upArrow"),l.appendTo(n),l.css("display","inline-block"),l.position({of:e.itemAddfile,my:"center top",at:"center bottom",offset:"5px",collision:"flipfit flipfit"})}e.itemsUpload={file:$(".file",l||r),image:$(".image",l||r),cimage:$(".cimage",l||r),caudio:$(".caudio",l||r),cvideo:$(".cvideo",l||r)},e.addListener()}),e.checkExtensions(),e.checkMaxFiles()):e.itemAddfile.hide()},addEventsEcm:function(){var e=this;e.elementsEvent.lock.click(function(){$.when(e.dataService.checkOutFile(e.elementsEvent.params)).done(function(){e.elementsEvent.lock.removeClass("bz-ecm-item-menu-enable"),e.elementsEvent.unlock.addClass("bz-ecm-item-menu-enable")})}),e.elementsEvent.unlock.click(function(){$.when(e.dataService.cancelCheckOut(e.elementsEvent.params)).done(function(){e.elementsEvent.unlock.removeClass("bz-ecm-item-menu-enable"),e.elementsEvent.lock.addClass("bz-ecm-item-menu-enable")})}),e.elementsEvent.del.bind("click",function(){$.when(e.dataService.deleteECMFile(e.elementsEvent.params)).done(function(){e.removeEventsEcm(),$(e.elementsEvent.element.elementReference).parents(".bz-rn-ecm-metadata").remove()})}),e.elementsEvent.edit.click(function(){e.elementsEvent.panelMetadata.show(),e.elementsEvent.menu.hide()}),e.elementsEvent.btnSave.click(function(){for(var t=e.properties,i=$(".bz-rn-ecm-metadata-value",e.elementsEvent.panelMetadata),n=[],r=!1,a=0;a<i.length;a++){var o=i[a],s=$(o).data("value"),l=$(o).data("metadatatype"),u=$(o).data("required"),c=$(o).data("readonly"),d=$(o).data("description"),p=$(o).data("idmetadata"),h=null;if(c)return!0;"STRING"==l||"DECIMAL"==l?h=$("input",o).val():"BOOL"==l?h=$("input[name=ecm-radio]:checked",o).val():"DATETIME"==l&&(h=$("input",o).attr("value"),h=$.scroller.formatDate("d. m. yy",$.scroller.parseDate("yy-mm-dd",h))),!u||""!=h&&null!=h||(alert(d+": "+e.getResource("render-ecm-tooltip-mandatory")),r=!0),r||h==s||n.push({idMetadata:p,value:h})}r||(params=e.buildAddParams(),params.fileName=e.elementsEvent.element.filename,params.idFileUpload=e.elementsEvent.element.id,params.idPageCache=t.idPageCache,params.metaValues=JSON.encode({metadataValues:n}),$.when(e.dataService.updateECMMetadata(params)).done(function(e){}),e.elementsEvent.panelMetadata.hide(),e.removeEventsEcm())}),e.elementsEvent.btnCancel.click(function(){e.elementsEvent.panelMetadata.hide(),e.removeEventsEcm()})},removeEventsEcm:function(){this.elementsEvent.lock.unbind("click"),this.elementsEvent.unlock.unbind("click"),this.elementsEvent.del.unbind("click"),this.elementsEvent.edit.unbind("click"),this.elementsEvent.btnSave.unbind("click"),this.elementsEvent.btnCancel.unbind("click")},removeListener:function(){this.itemsUpload.image.unbind("click"),this.itemsUpload.file.unbind("click"),this.itemsUpload.cimage.unbind("click"),this.itemsUpload.caudio.unbind("click"),this.itemsUpload.cvideo.unbind("click")},addListener:function(){var e=this;e.itemsUpload.image.bind("click",function(){navigator.camera.getPicture(function(t){$.when(e.checkMaxSize(t)).done(function(i){i&&e.saveImage(e,t)}),e.itemAddfile.click()},e.onFail,{quality:e.Class.QUALITY_PICTURE,sourceType:Camera.PictureSourceType.PHOTOLIBRARY})}),e.itemsUpload.file.bind("click",function(){alert("in development")}),e.itemsUpload.cimage.bind("click",function(){navigator.camera.getPicture(function(t){$.when(e.checkMaxSize(t)).done(function(i){i&&e.saveImage(e,t)}),e.itemAddfile.click()},e.onFail,{quality:e.Class.QUALITY_PICTURE})}),e.itemsUpload.caudio.bind("click",function(){navigator.device.capture.captureAudio(function(t){$.when(e.checkMaxSize(t)).done(function(i){i&&e.saveAudio(e,t)}),e.itemAddfile.click()},e.onFail,{limit:e.Class.LIMIT})}),e.itemsUpload.cvideo.bind("click",function(){navigator.device.capture.captureVideo(function(t){$.when(e.checkMaxSizeVideo(t)).done(function(i){i&&e.saveVideo(e,t)}),e.itemAddfile.click()},e.onFail,{limit:e.Class.LIMIT})})},renderUploadItem:function(e){this.properties;return this._super(e)},saveImage:function(e,t){var i=e,n=i.properties,r=i.buildAddParams(),a="q_"+bizagi.util.encodeXpath(i.getUploadXpath());r.queueID=a;var o=new FileUploadOptions;o.fileKey="file",o.fileName=t.substr(t.lastIndexOf("/")+1),r.filename=o.fileName,o.mimeType="image/jpeg",o.params=r,(new FileTransfer).upload(t,n.addUrl,function(t){i.onUploadFileCompleted(e,t)},function(e){3==e.code?alert(i.getResource("render-ecm-service-not-available")):alert(i.getResource("render-ecm-service-general-error")),bizagi.log("An error has occurred: Code = "+e.code)},o)},saveAudio:function(e,t){var i=e,n=i.properties,r=i.buildAddParams(),a="q_"+bizagi.util.encodeXpath(n.xpath);r.queueID=a;var o=new FileUploadOptions;o.fileName=t[0].name,r.filename=o.fileName,o.params=r,(new FileTransfer).upload(t[0].fullPath,n.addUrl,function(t){i.onUploadFileCompleted(e,t)},function(e){3==e.code?alert(i.getResource("render-ecm-service-not-available")):alert(i.getResource("render-ecm-service-general-error")),bizagi.log("An error has occurred: Code = "+e.code)},o)},saveVideo:function(e,t){var i=e,n=i.properties,r=i.buildAddParams(),a="q_"+bizagi.util.encodeXpath(i.getUploadXpath());r.queueID=a;var o=new FileUploadOptions;o.fileName=t[0].name,r.filename=o.fileName,o.params=r,(new FileTransfer).upload(t[0].fullPath,n.addUrl,function(t){i.onUploadFileCompleted(e,t)},function(e){3==e.code?alert(i.getResource("render-ecm-service-not-available")):alert(i.getResource("render-ecm-service-general-error")),bizagi.log("An error has occurred: Code = "+e.code)},o)},onFail:function(e){bizagi.log("Error code: "+e.code)},onUploadFileCompleted:function(e,t){var i=this;try{if("undefined"==(t=JSON.parse(decodeURI(t.response))).idFileUpload||null==t.idFileUpload)throw"not present idFileUpload";i.submitOnChange()}catch(e){alert(i.getResource("render-ecm-service-not-available")),bizagi.log("Error ECM:"),bizagi.log(e)}},checkMaxFiles:function(){var e=this.properties,t=e.maxfiles,i=e.value.length;0!=t&&i>=t&&(this.itemAddfile.hide(),this.removeListener())},checkExtensions:function(){var e=this,t=e.properties.validExtensions;if(void 0!==t&&""!=t&&(1!=(t=t.split(";")).length||-1===t[0].indexOf("*.*"))){for(var i=!1,n=!1,r=!1,a=0;a<t.length;a++){t[a]=t[a].replace("*.",""),e.Class.EXTENSIONSIMG.toString().indexOf(t[a])>=0&&(r=!0),e.Class.EXTENSIONSAUDIO.toString().indexOf(t[a])>=0&&(n=!0),e.Class.EXTENSIONSVIDEO.toString().indexOf(t[a])>=0&&(i=!0)}n||e.itemsUpload.caudio.hide(),r||(e.itemsUpload.image.hide(),e.itemsUpload.cimage.hide()),i||e.itemsUpload.cvideo.hide(),n||r||i||(e.itemAddfile.hide(),e.removeListener())}},checkMaxSize:function(e){var t=this,i=t.properties,n=new $.Deferred;return"undefined"!=i.maxSize&&null!=i.maxSize&&""!=i.maxSize||n.resolve(!0),window.resolveLocalFileSystemURI(e,function(e){e.file(function(e){e.size>=i.maxSize?(bizagi.showMessageBox(t.getResource("render-upload-alert-maxsize").replace("{0}",i.maxSize),"Error"),n.resolve(!1)):n.resolve(!0)})}),n.promise()},checkMaxSizeVideo:function(e){var t=this.properties,i=new $.Deferred,n=e[0].size;return"undefined"!=t.maxSize&&null!=t.maxSize&&""!=t.maxSize||i.resolve(!0),n>=t.maxSize?(bizagi.showMessageBox(this.getResource("render-upload-alert-maxsize").replace("{0}",t.maxSize),"Error"),i.resolve(!1)):i.resolve(!0),i.promise()},startLoading:function(){if(this.element){this.element.addClass("ui-bizagi-state-loading");var e=$('<div class="ui-bizagi-render-loading ui-bizagi-loading"></div>');this.element.prepend(e)}}}),bizagi.rendering.searchList.extend("bizagi.rendering.searchList",{ADVANCED_SEARCH_ID:-1,ADVANCED_ADDITION_ID:-2,CLEAR_SEARCH_ID:-3,SEARCH_MIN_LENGTH:2},{init:function(e){this._super(e);var t=this.properties;t.searchImage=t.searchImage||this.dataService.getSearchDefaultImage()},postRender:function(){var e=this,t=e.getControl();this._super(),e.searchInput=$("input",t),e.applyAutocompletePlugin(),$(".biz-render-searchlist",t).delegate(".removeItem","click",function(){var i=$(this).parent("li");e.removeElement({id:i.data("id")}),i.remove(),$(".biz-render-input-search",t).focus()}),$(".biz-render-searchlist",t).delegate(".button-search","click",function(){e.showSlideSearch()})},applyAutocompletePlugin:function(){var e=this;e.getControl();e.searchInput.autocomplete({messages:{noResults:null,results:function(){}},source:function(t,i){e.processRequest(t,i)},select:function(t,i){e.appendFoundItem(t,i)},close:function(e,t){$(e.target).val("")}})},appendFoundItem:function(e,t){var i=$(".biz-render-input-search").parents("ul");if(-1==$.map($("li:not(:last)",i),function(e,t){return $(e).data("id")}).indexOf(t.item.id)){var n=$("<label></label>").text(t.item.value),r=$("<a></a>").addClass("removeItem"),a=$("<li></li>").append(n).append(r).data("id",t.item.id);$("li:last",i).before(a),this.addElement({id:t.item.id,value:t.item.value})}},renderSearchItem:function(e){var t=this.properties,i=this.renderFactory.getTemplate("searchItem"),n=$.tmpl(i,{image:t.searchImage,label:e.label});return n.data("ui-autocomplete-item",e),n},renderClearItem:function(){var e=this,t=e.renderSearchItem({id:e.Class.CLEAR_SEARCH_ID,label:this.getResource("render-search-clear-label")});return t.click(function(){e.setValue(null),e.submitData()}),t},renderAddItem:function(){return this.renderSearchItem({id:this.Class.ADVANCED_ADDITION_ID,label:this.getResource("render-search-add-label")})},processRequest:function(e,t){var i=this,n=i.properties,r=[];function a(e){n.allowClear&&void 0!==i.value&&e.push({id:i.Class.CLEAR_SEARCH_ID,label:"",value:""}),n.advancedSearch&&e.push({id:i.Class.ADVANCED_SEARCH_ID,label:"",value:""}),n.allowAdd&&e.push({id:i.Class.ADVANCED_ADDITION_ID,label:"",value:""}),t(e)}e.term.length>=this.Class.SEARCH_MIN_LENGTH?(n.term=e.term,this.getData().done(function(e){$.each(e,function(e,t){r.push({id:t.id,label:t.value,value:t.value})}),a(r)})):a(r)},calculateSuggestionWidth:function(){return this.searchInput.data("ui-autocomplete").menu.element.width()},setDisplayValue:function(e){var t=this.properties;void 0!==e&&t.editable&&this.searchInput.val(e.label),this._super(e)},getDisplayValue:function(){return this.selectedValue},showSearchDialog:function(){var e=this,t=e.properties;new bizagi.rendering.dialog.search(e.dataService,e.renderFactory,t.searchForms,{allowFullSearch:t.allowFullSearch,maxRecords:t.maxRecords}).render({idRender:t.id,xpath:t.xpath,xpathContext:t.xpathContext,idPageCache:t.idPageCache}).done(function(t){e.setValue(t),e.submitData()})},showSlideSearch:function(){var e=this,t=e.getControl(),i=e.properties;li=$("li:[data-id]",t);var n=!0,r={container:e.getFormContainer().container};new bizagi.rendering.slide.search(e.dataService,e.renderFactory,i.searchForms,{allowFullSearch:i.allowFullSearch,maxRecords:i.maxRecords},r).render({idRender:i.id,xpath:i.xpath,xpathContext:i.xpathContext,idPageCache:i.idPageCache}).done(function(t){var i=[];$.each(t.label,function(e,t){"id"!=e&&i.push($(t).text())}),$.each(li,function(e,i){$(i).data("id")==t.id&&(n=!1)}),n&&e.appendFoundItem("",{item:{id:t.id,value:i.join(",")}}),e.submitData()})},renderReadOnly:function(){var e=this.getControl();this.postRender(),$(".biz-render-searchlist",e).undelegate(".removeItem"),$(".biz-render-searchlist",e).undelegate(".button-search"),$(".button-search",e).remove(),$(".biz-render-input-search li:last",e).remove(),$(".biz-render-input-search li .removeItem",e).remove()}}),bizagi.rendering.basicUserField.extend("bizagi.rendering.basicUserField",{},{init:function(e){(this._super(e),this.isSupported())||this.getFormContainer().addError(this.getResource("render-tablet-error-userfield"))},getEditableControl:function(){if(!this.isSupported())return bizagi.rendering.defaultUserField.prototype.getEditableControl.apply(this,arguments)},getReadonlyControl:function(){if(!this.isSupported())return bizagi.rendering.defaultUserField.prototype.getReadonlyControl.apply(this,arguments)},isSupported:function(){return!0}}),bizagi.rendering.basicUserField.extend("bizagi.rendering.defaultUserField",{},{getEditableControl:function(){var e=this.getControl(),t=this.properties.control.replace(/column/g,"");return this.input=$("<label>Userfield: "+t+" not found</label>").appendTo(e),this.input.addClass("ui-bizagi-render-userfield-notSupported"),this.input},getReadonlyControl:function(){return this.getEditableControl()},collectData:function(e){}}),bizagi.rendering.image.extend("bizagi.rendering.image",{},{postRender:function(){this.getControl();this._super(),bizagi.util.isCordovaSupported()&&this.activeUploadNative()},configureHandlers:function(){this._super()},configureDesignView:function(){this._super()},postRenderReadOnly:function(){var e=this,t=e.getControl(),i=e.renderFactory.getTemplate("image"),n=e.getMode();$.when(e.buildItemUrl()).done(function(r){var a=""!=r?r:a,o=$.fasttmpl(i,{xpath:bizagi.util.encodeXpath(e.getUploadXpath()),editable:!1,url:a,allowDelete:!1,mode:n});t.append(o)})},activeUploadNative:function(){var e=this,t=e.getControl(),i=$("body");e.itemAddfile=$(".image-file",t),e.itemResolutionUpload=$(".ui-bizagi-resolutionUploadFrame",t),0==e.itemAddfile.length&&(e.itemAddfile=$("img",t)),e.itemsUpload={image:$(".image",t),cimage:$(".cimage",t)},e.itemAddfile.bind("click",function(n){var r=$(".bz_rn_upload_container_upload_items",t);if(r.hasClass("bz_clone_active")){r.removeClass("bz_clone_active");var a=$("#bz_active_clone_Upload",i);return a.hide(),a.remove(),r.hide(),void e.removeListener()}if(r.is(":visible"))return r.hide(),void e.removeListener();try{var o=e.getContainerRender().parent();o&&o.find(".bz_rn_upload_container_upload_items:visible").hide()}catch(n){}r.show();var s=parseInt(r.css("height"));if(e.itemAddfile.offset().top-60-s>0)r.addClass("bottomArrow"),r.position({of:e.itemAddfile,my:"center bottom",at:"center top",offset:"-10px",collision:"flipfit flipfit"});else{r.hide(),r.addClass("bz_clone_active");var l=r.clone();l.attr("id","bz_active_clone_Upload"),l.addClass("upArrow"),l.appendTo(i),l.css("display","inline-block"),l.position({of:e.itemAddfile,my:"center top",at:"center bottom",offset:"5px",collision:"flipfit flipfit"}),e.itemsUpload={image:$(".image",l),cimage:$(".cimage",l)}}e.addListener()})},removeListener:function(){this.itemsUpload.image.unbind("click"),this.itemsUpload.cimage.unbind("click")},addListener:function(){var e=this,t=void 0!==bizagi.context.isOfflineForm&&bizagi.context.isOfflineForm||!1;e.itemsUpload.image.bind("click",function(){navigator.camera.getPicture(function(i){$.when(e.checkMaxSize(i)).done(function(n){if(n)if(e.dataImage=i,"android"==bizagi.detectSO()&&bizagi.util.detectAndroidVersion()<=422||t)e.saveImage(e,e.dataImage);else{var r=$(".ui-bizagi-resolution-container",e.getControl()).clone();$("body").append(r),$(r).css("display","block"),$(".ui-bizagi-resolution-button",r).bind("click",function(t){e.resolutionButtonHandler(this)}),$(".ui-bizagi-resolution-button-cancel",r).bind("click",function(e){$(".ui-bizagi-resolution-container").css("display","none"),bizagi.util.smartphone.stopLoading(),$("body>.ui-bizagi-resolution-container").remove()})}e.itemAddfile.click()})},e.onFail,{quality:e.Class.QUALITY_PICTURE,sourceType:Camera.PictureSourceType.PHOTOLIBRARY})}),e.itemsUpload.cimage.bind("click",function(){navigator.camera.getPicture(function(t){$.when(e.checkMaxSize(t)).done(function(i){i&&e.saveImage(e,t),e.itemAddfile.click()})},e.onFail,{quality:e.Class.QUALITY_PICTURE,targetWidth:1280,targetHeight:960})})},resolutionButtonHandler:function(e){var t=this,i=$(e).attr("data-bz-ordinal");bizagi.util.smartphone.startLoading();var n=0,r=0;1==i?(n=320,r=240):2==i?(n=640,r=480):3==i&&(n=1280,r=960),4==i?t.saveImage(t,t.dataImage):$.when(t.transformImageSize(t.dataImage,n,r)).done(function(){t.saveImage(t,t.dataImage)}).fail(function(){bizagi.util.smartphone.stopLoading()}),$(".ui-bizagi-resolution-container").css("display","none"),$("body>.ui-bizagi-resolution-container").remove()},saveImage:function(e,t){var i=e,n=i.properties,r=i.buildAddParams(),a=bizagi.util.isOfflineForm({context:i});r.queueID="q_"+bizagi.util.encodeXpath(i.getUploadXpath());var o=new FileUploadOptions;if(o.fileKey="file",o.fileName=t.substr(t.lastIndexOf("/")+1),o.mimeType="image/jpeg",o.params=r,i.editedImageURL&&(t=i.editedImageURL),t=bizagi.util.mobileImagePath(t),a){var s=new Image,l=i.getControl();$(s).on("load",function(){var e=document.createElement("canvas"),t=e.getContext("2d");e.width=this.width,e.height=this.height,t.drawImage(s,0,0);var n=e.toDataURL("image/png",1);n=n.replace(/^data:image\/(png|jpg|jpeg);base64,/,""),i.setValue(n)}),s.src=t,l.find("img").replaceWith(s),l.find(".bz-cm-icon.image-file").replaceWith(s),i.removeListener(),i.activeUploadNative(),i.canBeSent=function(){return $.forceCollectData=!0,!0}}else{(new FileTransfer).upload(t,n.addUrl,function(t){i.onUploadFileCompleted(e,JSON.parse(decodeURIComponent(t.response)))},function(e){bizagi.log("An error has occurred: Code = "+e.code),bizagi.util.smartphone.stopLoading()},o)}},onFail:function(e){bizagi.log("Error code: "+e.code)},onUploadFileCompleted:function(e,t){var i=e;try{i.submitOnChange(),i.editedImageURL=null,bizagi.util.smartphone.stopLoading()}catch(e){i.getFormContainer().refreshForm(),bizagi.util.smartphone.stopLoading()}},saveBlobToFile:function(e,t){var i=this;window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(n){var r=n.root,a=function(n){n.onwriteend=function(e){i.editedImageURL=n.localURL,t.resolve(),console.log("Write completed.")},n.onerror=function(e){console.log("Write failed: "+e.toString())},n.write(e)};r.getFile("bizagiImgTmp.jpg",{create:!0},function(e){e.createWriter(a,null)},null)},function(){})},transformImageSize:function(e,t,i){var n=this,r=new $.Deferred;return window.resolveLocalFileSystemURL(e,function(e){e.file(function(e){var a=new FileReader;a.onloadend=function(e){var a=new Image;a.onload=function(e){var o=a.width,s=a.height;0!=t&&(o>s?o>t&&(s*=t/o,o=t):s>i&&(o*=i/s,s=i));var l=document.createElement("canvas");l.width=o,l.height=s,l.getContext("2d").drawImage(this,0,0,o,s),n.value&&n.properties.value?n.value[0]=n.properties.value[0]=n.properties.url=l.toDataURL("image/jpeg",.5):n.properties.url=l.toDataURL("image/jpeg",.5);var u=n.properties.url.replace("data:image/jpeg;base64,",""),c=bizagi.util.b64toBlob(u);n.saveBlobToFile(c,r),a=null},a.src=e.target.result},a.readAsDataURL(e)})}),r.promise()},checkMaxSize:function(e){var t=this,i=t.properties,n=new $.Deferred;return"undefined"!=i.maxSize&&null!=i.maxSize&&""!=i.maxSize||n.resolve(!0),window.resolveLocalFileSystemURI(e,function(e){e.file(function(e){e.size>=i.maxSize?(bizagi.showMessageBox(t.getResource("render-upload-alert-maxsize").replace("{0}",i.maxSize),"Error"),n.resolve(!1)):n.resolve(!0)})}),n.promise()}}),bizagi.rendering.document.extend("bizagi.rendering.document",{},{postRender:function(){this.configureHelpText(),this.applyDocumentTemplatesFormat(),this.configureHandlers()},applyDocumentTemplatesFormat:function(){var e=this,t=e.getControl();t.addClass("ui-bizagi-render-display-block");var i=$(".ui-bizagi-document-upload-item",t);$.each(i,function(t,i){$(".ui-bizagi-document-type",i).addClass("ui-bizagi-document-extension");var n=$(".ui-bizagi-document-preview",i);n.attr("title",e.resources.getResource("render-document-preview-tooltip")),n.tooltip();var r=e.returnCssTypeFile($("a > span",i).html());$(".ui-bizagi-document-type",i).addClass(r),$(".ui-bizagi-button",i).remove(),$(".ui-bizagi-document-preview",i).attr("display","none")})},redrawDocuments:function(e,t,i){this._super(e,t,i),this.applyDocumentTemplatesFormat()},autoOpenDocuments:function(){},updateControlForPrintMode:function(){}}),bizagi.rendering.geolocation.extend("bizagi.rendering.geolocation",{},{postRender:function(){this._super();var e=this.getControl();this.cordinate=$(".ui-geolocation-cordinate",e),$(".bz-cm-icon",e).addClass("bz-rn-icon-geolocation")},isValid:function(e){this.properties;var t=this._super(e);this.getValue();return t},configureHandlers:function(){var e=this;if("execution"===e.getMode()){var t=e.getControl();null==e.value&&e.setDisplayValue(),$(".ui-bizagi-render-geolocation",t).bind("click",function(){e.cordinate.empty(),e.setDisplayValue().then(function(){}).fail(function(t){e.cordinate.html("<span style='color: red'>"+t+"</span>")})})}},setDisplayValue:function(e){var t=this,i=new $.Deferred;return null!=e&&""!=e?(t.cordinate||(t.cordinate=t.getControl()),t.cordinate.html(e),t.setValue(e,!1),i.resolve()):t.getCurrentPosition(function(e){t.cordinate.html(e.coords.latitude.toString()+" "+e.coords.longitude.toString()),t.setValue(e.coords.latitude.toString()+" "+e.coords.longitude.toString(),!1),i.resolve()},function(e){t.cordinate.html(t.properties.value),i.reject(e)}),i.promise()}}),bizagi.rendering.columns.combo.extend("bizagi.rendering.columns.combo",{},{setValue:function(e,t){var i=this,n=i.getDecorated(e),r=bizagi.util.isOfflineForm({context:i});if(r&&null!==t&&"string"==typeof t&&bizagi.util.isNumeric(t)&&(t=parseInt(t)),null!==n){if("summary"==e)return i._super(e,t);if(t&&t.length>0){var a={id:t[0][0],value:t[0].length>2?$.grep(t[0],function(e,t){return 0!=t}):t[0][1]};i._super(e,a),n.selectedValue=a.value}else t&&t.id&&t.value?(i._super(e,t),n.selectedValue=t.value):"columnRadio"==i.properties.type?(i._super(e,null),n.selectedValue=t):t&&"number"==typeof t?i._super(e,t):r&&null!==t&&"object"==typeof t&&t.value?(i._super(e,t.value),n.selectedValue=t.value):(i._super(e,null),n.selectedValue="")}}}),bizagi.rendering.columns.column.extend("bizagi.rendering.columns.document",{},{applyOverrides:function(e){var t=this.getMode();this._super(e),e.getControlHtml=this.getControlHtml,"design"!=t&&(this.surrogateKey=e.surrogateKey,e.getXpath=this.getXpath,e.getDocumentXpath=this.getDocumentXpath,e.getContextXpath=this.getContextXpath,e.documentTemplateGenerate=this.documentTemplateGenerate,e.preRenderControl=this.preRenderControl,e.properties.xpathContext=this.getContextXpath())},documentTemplateGenerate:function(){var e=this,t=e.properties;e.startLoading(),t.xpathcontext=e.getContextXpath(),t.xpath=e.getDocumentXpath(t.xpath);var i=e.parent;$.when(i.submitOnChange("",!1)).done(function(){$.when(e.dataService.generateDocumentTemplate(t)).done(function(t){$.when(i.refresh()).done(function(){e.autoOpenDocuments()}),e.endLoading()}).fail(function(){e.showErrorMessage(),e.endLoading()})}).fail(function(t){e.getFormContainer().addErrorMessage(t),e.endLoading()})},getControlHtml:function(e,t,i,n,r,a){for(var o=!0,s=0;s<this.parent.properties.data.rows.length;s++)if(this.parent.properties.data.rows[s][0]==this.surrogateKey){o=!1;break}return $.fasttmpl(e,{noActivateButton:o,editable:"execution"!=t,downloadalldocuments:i,required:r.required,allowgenerate:n,xpath:this.getXpath(r.xpath),append:!!r.append&&r.append,caption:r.caption,noFiles:a}).replace("ui-bizagi-document-upload-item-design","ui-bizagi-document-upload-item-design-column")},getXpath:function(e){var t=e,i=t.indexOf(this.grid.properties.xpath);return-1!=i&&(t=t.substr(i+this.grid.properties.xpath.length+1)),this.grid.properties.xpath+"[id="+this.surrogateKey+"]."+t},getDocumentXpath:function(e){var t=e,i=t.indexOf(this.grid.properties.xpath);return-1!=i&&(t=t.substr(i+this.grid.properties.xpath.length+1)),t},postRenderReadOnly:function(e,t,i){this._super(e,t,i)},getContextXpath:function(){return this.grid.properties.xpath+"[id="+this.surrogateKey+"]"},preRenderControl:function(){this.properties.value=this.value}}),bizagi.rendering.columns.column.extend("bizagi.rendering.columns.date",{},{applyOverrides:function(e){this._super(e)}}),bizagi.rendering.columns.column.extend("bizagi.rendering.columns.text",{},{}),bizagi.rendering.columns.column.extend("bizagi.rendering.columns.number",{},{}),bizagi.rendering.columns.column.extend("bizagi.rendering.columns.numberScientificNotation",{},{postRender:function(e,t){this._super(e,t);var i=$("input",t);this.applyColumnStyles(i)},renderSummary:function(e,t){return this.renderReadOnly(e,t)},postRenderSummary:function(e,t){return this.postRenderReadOnly(e,t),!0}}),bizagi.rendering.columns.column.extend("bizagi.rendering.columns.image",{},{applyOverrides:function(e){var t=this.properties;this._super(e),e.getUploadXpath=this.getUploadXpath,e.properties.xpathContext=t.xpathContext.length>0?t.xpathContext+"."+this.grid.properties.xpath+"[id="+e.surrogateKey+"]":this.grid.properties.xpath+"[id="+e.surrogateKey+"]"},getUploadXpath:function(){return(this.grid.properties.xpath||this.properties.xpath)+"[id="+this.surrogateKey+"]."+this.properties.xpath}}),bizagi.rendering.columns.column.extend("bizagi.rendering.columns.upload",{},{applyOverrides:function(e){this._super(e),e.getUploadXpath=this.getUploadXpath;e.applyUploadPlugin;e.getXpathContext=function(){this.surrogateKey;var e=this.properties;return e.xpathContext.length>0?e.xpathContext+"."+this.grid.properties.xpath+"[id="+this.surrogateKey+"]":this.grid.properties.xpath+"[id="+this.surrogateKey+"]"},e.buildItemUrl=function(e){var t=this.properties,i=this.getFormContainer(),n=this.getXpathContext();return this.dataService.getUploadFileUrl({idRender:t.id,xpath:t.xpath,xpathContext:n,idPageCache:t.idPageCache,fileId:e.id,sessionId:i.properties.sessionId,contexttype:t.contexttype})}},getUploadXpath:function(){return this.grid.properties.xpath+"[id="+this.surrogateKey+"]."+this.properties.xpath}}),bizagi.rendering.columns.column.extend("bizagi.rendering.columns.link",{},{applyOverrides:function(e){this._super(e);var t=this.getMode();"design"!=t&&"layout"!=t&&(this.surrogateKey=e.surrogateKey,e.getXpath=this.getXpath,e.getContextXpath=this.getContextXpath,e.properties.xpathContext=this.getContextXpath())},getXpath:function(e){var t=e,i=t.indexOf(this.grid.properties.xpath);return-1!=i&&(t=t.substr(i+this.grid.properties.xpath.length+1)),this.grid.properties.xpath+"[id="+this.surrogateKey+"]."+t},getContextXpath:function(){return this.grid.properties.xpath+"[id="+this.surrogateKey+"]"}}),bizagi.rendering.columns.column.extend("bizagi.rendering.columns.uploadecm",{},{applyOverrides:function(e){this._super(e),e&&e.getControl&&(this.originalGetControl=e.getControl,e.getControl=this.getControl),e.getUploadXpath=this.getUploadXpath,e.buildItemUrl=function(e){var t=this.properties,i=this.getFormContainer(),n=this.getUploadXpath(this.surrigateKey),r=(n=n.split("."))[n.length-1],a=this.getXpathContext(this.surrigateKey);return this.dataService.getUploadFileUrl({idRender:t.id,xpath:r,xpathContext:a,idPageCache:t.idPageCache,fileId:e.idFileUpload,sessionId:i.properties.sessionId,contexttype:t.contexttype})},e.getXpathContext=function(){var e=this.properties;return e.xpathContext.length>0?e.xpathContext+"."+this.grid.properties.xpath+"[id="+this.surrogateKey+"]":this.grid.properties.xpath+"[id="+this.surrogateKey+"]"}},renderReadOnly:function(e,t){var i="<div></div>",n=this.getDecorated(e);if(n.setValue(t),this.setValue(e,t),this.setSurrogateKey(e),this.applyOverrides(n),n.grid=this.grid,n.column=this,n.surrogateKey=e,this.readyDeferred=new $.Deferred,n.files.length>0){this.properties.editable;n.properties.editable=!1,i=n.render("cell.upload")}return i},getUploadXpath:function(e){return e=this.surrogateKey||e||"",this.grid.properties.xpath+"[id="+e+"]."+this.properties.xpath},getControl:function(){var e=this._super();return e&&0!=e.length?$(".ui-bizagi-render-control",this.element||this.observableElement):$(".ui-bizagi-cell-readonly",this.element||this.observableElement)}}),bizagi.rendering.columns.column.extend("bizagi.rendering.columns.button",{},{}),bizagi.rendering.columns.combo.extend("bizagi.rendering.columns.radio",{},{}),bizagi.rendering.columns.combo.extend("bizagi.rendering.columns.list",{},{}),bizagi.rendering.columns.column.extend("bizagi.rendering.columns.exclusiveCheck",{},{}),$.Class.extend("bizagi.rendering.base.factory",{},{init:function(e){this.templates={},this.dataService=e},loadOverrides:function(){},initAsyncStuff:function(){return $.when.apply($,[this.loadOverrides(),this.loadTemplates()])},loadTemplates:function(){},loadTemplate:function(e,t){var i=this;return bizagi.templateService.getTemplate(t,e).done(function(t){i.templates[e]=t})},getCommonTemplate:function(e){return this.templates[e]},getContainer:function(e){var t=e.type,i=e.data,n=$.extend(e,{renderFactory:this,dataService:e.dataService||this.dataService});return"form"==t?new bizagi.rendering.form(n):"mobileform"==t?new bizagi.rendering.mobileform(n):"template"==t?new bizagi.rendering.formTemplate(n):"queryForm"==t?new bizagi.rendering.queryForm(n):"layout"==t?new bizagi.rendering.layout(n):"usersForm"==t?new bizagi.rendering.usersForm(n):"panel"==t?new bizagi.rendering.panel(n):"contentPanel"==t||"contentpanel"==t?new bizagi.rendering.contentPanel(n):"nestedform"==t.toLowerCase()?new bizagi.rendering.nestedForm(n):"tab"==t?new bizagi.rendering.tab(n):"tabItem"==t||"tabitem"==t?new bizagi.rendering.tabItem(n):"horizontal"==t?new bizagi.rendering.horizontal(n):"accordion"==t?new bizagi.rendering.accordion(n):"accordionItem"==t?new bizagi.rendering.accordionItem(n):"group"==t?new bizagi.rendering.group(n):"mobilegroup"==t?new bizagi.rendering.mobilegroup(n):"searchForm"==t?(n.context="search",n.contexttype="metadata",new bizagi.rendering.searchForm(n)):(bizagi.log(t+" not supported in render factory",i,"error"),null)},getRender:function(e){var t=e.type,i=e.data,n=$.extend(e,{renderFactory:this,dataService:e.dataService||this.dataService});return t||(t="label"),"text"==t?bizagi.util.parseBoolean(i.properties.isExtended)||!1?new bizagi.rendering.extendedText(n):new bizagi.rendering.text(n):"mobiletext"==t?new bizagi.rendering.mobiletext(n):"association"==t?new bizagi.rendering.association(n):"label"==t?new bizagi.rendering.label(n):"hidden"==t?new bizagi.rendering.hidden(n):"number"==t?new bizagi.rendering.number(n):"money"==t?new bizagi.rendering.money(n):"date"==t?new bizagi.rendering.date(n):"boolean"==t?"check"==(i.properties.display||"option")?new bizagi.rendering.check(n):new bizagi.rendering.yesno(n):"combo"==t?new bizagi.rendering.combo(n):"cascadingCombo"==t?new bizagi.rendering.cascadingCombo(n):"list"==t?new bizagi.rendering.list(n):"multiSelect"==t?new bizagi.rendering.multiSelect(n):"radio"==t?new bizagi.rendering.radio(n):"image"==t?new bizagi.rendering.image(n):"uploadecm"==t?new bizagi.rendering.ecm(n):"upload"==t?new bizagi.rendering.upload(n):"grid"==t?new bizagi.rendering.grid(n):"groupedgrid"==t?new bizagi.rendering.grid(n):"search"==t?new bizagi.rendering.search(n):"suggest"==t?(n.data.properties.enableQuerySuggestBehavior=!0,new bizagi.rendering.search(n)):"searchList"==t?new bizagi.rendering.searchList(n):"letter"==t?new bizagi.rendering.letter(n):"button"==t?new bizagi.rendering.button(n):"formLink"==t?new bizagi.rendering.formLink(n):"link"==t?new bizagi.rendering.link(n):"layoutImage"==t?new bizagi.rendering.layoutImage(n):"layoutLink"==t?new bizagi.rendering.layoutLink(n):"layoutLabel"==t?new bizagi.rendering.layoutLabel(n):"layoutText"==t?new bizagi.rendering.layoutText(n):"layoutDateTime"==t?new bizagi.rendering.layoutDateTime(n):"layoutNumber"==t?new bizagi.rendering.layoutNumber(n):"layoutMoney"==t?new bizagi.rendering.layoutMoney(n):"layoutPlaceholder"==t?new bizagi.rendering.layoutPlaceholder(n):"actionLauncher"==t?new bizagi.rendering.actionLauncher(n):"layoutBoolean"==t?new bizagi.rendering.layoutBoolean(n):"layoutUpload"==t?new bizagi.rendering.layoutUpload(n):"entityTemplate"==t?new bizagi.rendering.entityTemplate(n):"polymorphicLauncher"==t?new bizagi.rendering.polymorphicLauncher(n):"userfield"==t?new bizagi.rendering.userfieldWrapper(n):0==t.indexOf("search")?this.getSearchRender(e):0==t.indexOf("query")?this.getQueryRender(e):"document"==t?new bizagi.rendering.document(n):"image"==t?new bizagi.rendering.image(n):"fileprint"==t?new bizagi.rendering.fileprint(n):"geolocation"==t?new bizagi.rendering.geolocation(n):"collectionnavigator"==t?new bizagi.rendering.collectionnavigator(n):"getUser"==t?new bizagi.rendering.getUser(n):"rangeDate"==t?new bizagi.rendering.rangeDate(n):"rangeMoney"==t?new bizagi.rendering.rangeMoney(n):"rangeNumber"==t?new bizagi.rendering.rangeNumber(n):"activityCheckList"==t?new bizagi.rendering.activityCheckList(n):(bizagi.log(t+" not supported in render factory",i,"error"),null)},getColumn:function(e){var t=e.type,i=e.data,n=$.extend(e,{renderFactory:this,dataService:e.dataService||this.dataService,singleInstance:!!bizagi.util.isEmpty(e.singleInstance)||e.singleInstance});if("columnText"==t){var r=bizagi.util.parseBoolean(i.properties.isExtended)||!1;return n.decorated=r?bizagi.rendering.extendedText:bizagi.rendering.text,new bizagi.rendering.columns.text(n)}if("columnSearchList"==t)return n.decorated=bizagi.rendering.searchList,new bizagi.rendering.columns.searchList(n);if("columnNumber"==t)return n.decorated=bizagi.rendering.number,new bizagi.rendering.columns.number(n);if("columnMoney"==t)return n.decorated=bizagi.rendering.money,new bizagi.rendering.columns.number(n);if("columnDate"==t)return n.decorated=bizagi.rendering.date,new bizagi.rendering.columns.date(n);if("columnBoolean"==t){if("check"==(i.properties.display||"option")){if(n.decorated=bizagi.rendering.check,e.data.properties.isExclusive)return new bizagi.rendering.columns.exclusiveCheck(n)}else n.decorated=bizagi.rendering.yesno;return new bizagi.rendering.columns.column(n)}return"columnCombo"==t?(n.decorated=bizagi.rendering.combo,new bizagi.rendering.columns.combo(n)):"columnRadio"==t?(n.decorated=bizagi.rendering.radio,new bizagi.rendering.columns.radio(n)):"columnList"==t?(n.decorated=bizagi.rendering.list,new bizagi.rendering.columns.list(n)):"columnHidden"==t?(n.decorated=bizagi.rendering.hidden,new bizagi.rendering.columns.column(n)):"columnUpload"==t?(n.decorated=bizagi.rendering.upload,new bizagi.rendering.columns.upload(n)):"columnImage"==t?(n.decorated=bizagi.rendering.image,new bizagi.rendering.columns.image(n)):"columnUploadEcm"==t?(n.decorated=bizagi.rendering.ecm,new bizagi.rendering.columns.uploadecm(n)):"columnLink"==t?(n.decorated=bizagi.rendering.link,new bizagi.rendering.columns.link(n)):"columnFormLink"==t?(n.decorated=bizagi.rendering.formLink,new bizagi.rendering.columns.link(n)):"columnUserfield"==t?(n.decorated=bizagi.rendering.userfieldWrapper,new bizagi.rendering.columns.column(n)):"columnSearch"==t?(n.decorated=bizagi.rendering.search,new bizagi.rendering.columns.search(n)):"columnLabel"==t?(n.decorated=bizagi.rendering.label,new bizagi.rendering.columns.column(n)):"columnReadonly"==t?(n.decorated=bizagi.rendering.label,new bizagi.rendering.columns.readonly(n)):"columnDocument"==t?(n.decorated=bizagi.rendering.document,new bizagi.rendering.columns.document(n)):"columnLetter"==t?(n.decorated=bizagi.rendering.letter,new bizagi.rendering.columns.letter(n)):"columnButton"==t?(n.decorated=bizagi.rendering.button,new bizagi.rendering.columns.button(n)):(bizagi.log(t+" not supported in render factory",i,"error"),null)},getSearchRender:function(e){var t=e.type,i=e.data,n=$.extend(e,{renderFactory:this,dataService:e.dataService||this.dataService});return"searchText"==t?bizagi.util.parseBoolean(i.properties.isExtended)||!1?new bizagi.rendering.extendedText(n):new bizagi.rendering.text(n):"searchBoolean"==t?"check"==(i.properties.display||"option")?new bizagi.rendering.check(n):new bizagi.rendering.yesno(n):"searchNumber"==t?29==i.properties.dataType?new bizagi.rendering.numberScientificNotation(n):new bizagi.rendering.number(n):"searchMoney"==t?new bizagi.rendering.money(n):"searchDate"==t?new bizagi.rendering.date(n):"searchCombo"==t?new bizagi.rendering.combo(n):"searchSuggest"==t?new bizagi.rendering.search(n):"searchLabel"==t?new bizagi.rendering.label(n):(bizagi.log(t+" not supported in render factory",i,"error"),null)},getQueryRender:function(e){var t=e.type,i=e.data,n=$.extend(e,{renderFactory:this,dataService:e.dataService||this.dataService});return"queryText"==t?bizagi.util.parseBoolean(i.properties.isExtended)||!1?new bizagi.rendering.queryExtendedText(n):new bizagi.rendering.queryText(n):"queryBoolean"==t?"check"==(i.properties.display||"option")?new bizagi.rendering.queryCheck(n):new bizagi.rendering.queryYesNo(n):"queryNumber"==t?new bizagi.rendering.queryNumber(n):"queryMoney"==t?new bizagi.rendering.queryMoney(n):"queryDate"==t?new bizagi.rendering.queryDate(n):"queryCombo"==t?new bizagi.rendering.queryCombo(n):"queryCascadingCombo"==t?new bizagi.rendering.queryCascadingCombo(n):"querySuggest"==t?new bizagi.rendering.querySuggest(n):"queryLabel"==t?new bizagi.rendering.queryLabel(n):"queryList"==t?new bizagi.rendering.queryList(n):"queryMultiSelect"==t?new bizagi.rendering.queryMultiSelect(n):"querySearch"==t?new bizagi.rendering.querySearch(n):"queryRadio"==t?new bizagi.rendering.queryRadio(n):"queryState"==t?new bizagi.rendering.queryState(n):"queryCaseState"==t?new bizagi.rendering.queryCaseState(n):"queryProcess"==t?new bizagi.rendering.queryProcess(n):"querySearchUser"==t?new bizagi.rendering.querySearchUser(n):"queryHidden"==t?new bizagi.rendering.hidden(n):(bizagi.log(t+" not supported in render factory",i,"error"),null)},getTemplate:function(e){return this.templates[e]}}),bizagi.rendering.base.factory.extend("bizagi.rendering.tablet.factory",{},{loadTemplates:function(){var e=this,t=new $.Deferred;return $.when(e.loadTemplate("form-error",bizagi.getTemplate("bizagi.rendering.tablet.form-error")),e.loadTemplate("form-waiting",bizagi.getTemplate("bizagi.rendering.tablet.form-waiting")),e.loadTemplate("form",bizagi.getTemplate("bizagi.rendering.tablet.form")+"#ui-bizagi-render-form"),e.loadTemplate("complexgateway",bizagi.getTemplate("bizagi.rendering.tablet.form")+"#ui-bizagi-render-complexGateway"),e.loadTemplate("panel",bizagi.getTemplate("bizagi.rendering.tablet.panel")),e.loadTemplate("tab",bizagi.getTemplate("bizagi.rendering.tablet.tab")),e.loadTemplate("tabItem",bizagi.getTemplate("bizagi.rendering.tablet.tabItem")),e.loadTemplate("horizontal",bizagi.getTemplate("bizagi.rendering.tablet.horizontal")),e.loadTemplate("accordion",bizagi.getTemplate("bizagi.rendering.tablet.accordion")),e.loadTemplate("accordionItem",bizagi.getTemplate("bizagi.rendering.tablet.accordionItem")),e.loadTemplate("group",bizagi.getTemplate("bizagi.rendering.tablet.group")),e.loadTemplate("searchForm",bizagi.getTemplate("bizagi.rendering.tablet.searchForm")),e.loadTemplate("contentPanel",bizagi.getTemplate("bizagi.rendering.tablet.contentPanel")),e.loadTemplate("render",bizagi.getTemplate("bizagi.rendering.tablet.render")),e.loadTemplate("text",bizagi.getTemplate("bizagi.rendering.tablet.text")),e.loadTemplate("extendedText",bizagi.getTemplate("bizagi.rendering.tablet.extendedText")),e.loadTemplate("number",bizagi.getTemplate("bizagi.rendering.tablet.number")),e.loadTemplate("numberScientificNotation",bizagi.getTemplate("bizagi.rendering.tablet.numberScientificNotation")),e.loadTemplate("date",bizagi.getTemplate("bizagi.rendering.tablet.date")),e.loadTemplate("yesno",bizagi.getTemplate("bizagi.rendering.tablet.yesno")),e.loadTemplate("check",bizagi.getTemplate("bizagi.rendering.tablet.check")),e.loadTemplate("combo",bizagi.getTemplate("bizagi.rendering.tablet.combo")),e.loadTemplate("list",bizagi.getTemplate("bizagi.rendering.tablet.list")),e.loadTemplate("radio",bizagi.getTemplate("bizagi.rendering.tablet.radio")),e.loadTemplate("image",bizagi.getTemplate("bizagi.rendering.tablet.image")+"#ui-bizagi-render-image"),e.loadTemplate("image-item",bizagi.getTemplate("bizagi.rendering.tablet.image")+"#ui-bizagi-render-image-item"),e.loadTemplate("upload",bizagi.getTemplate("bizagi.rendering.tablet.upload")),e.loadTemplate("uploadItem",bizagi.getTemplate("bizagi.rendering.tablet.uploadItem")),e.loadTemplate("uploadSlide",bizagi.getTemplate("bizagi.rendering.tablet.slide.upload")),e.loadTemplate("grid",bizagi.getTemplate("bizagi.rendering.tablet.grid")),e.loadTemplate("cell",bizagi.getTemplate("bizagi.rendering.tablet.cell")),e.loadTemplate("cell.readonly",bizagi.getTemplate("bizagi.rendering.tablet.cell.readonly")),e.loadTemplate("cell.upload",bizagi.getTemplate("bizagi.rendering.tablet.cell.upload")),e.loadTemplate("search",bizagi.getTemplate("bizagi.rendering.tablet.search")),e.loadTemplate("searchItem",bizagi.getTemplate("bizagi.rendering.tablet.searchItem")),e.loadTemplate("searchList",bizagi.getTemplate("bizagi.rendering.tablet.searchList")),e.loadTemplate("letter",bizagi.getTemplate("bizagi.rendering.tablet.letter")),e.loadTemplate("letter.readonly",bizagi.getTemplate("bizagi.rendering.tablet.letter.readonly")),e.loadTemplate("letter.dialog",bizagi.getTemplate("bizagi.rendering.tablet.dialog-letter")),e.loadTemplate("button",bizagi.getTemplate("bizagi.rendering.tablet.button")),e.loadTemplate("link",bizagi.getTemplate("bizagi.rendering.tablet.link")),e.loadTemplate("geolocation",bizagi.getTemplate("bizagi.rendering.tablet.geolocation")),e.loadTemplate("association",bizagi.getTemplate("bizagi.rendering.tablet.association")),e.loadTemplate("ecm",bizagi.getTemplate("bizagi.rendering.tablet.ecm")+"#bz-rn-ecm-view-default-item"),e.loadTemplate("ecm-metadata",bizagi.getTemplate("bizagi.rendering.tablet.ecm")+"#bz-rn-ecm-metadata"),e.loadTemplate("list-multiselect",bizagi.getTemplate("bizagi.rendering.tablet.multiSelect")),e.loadTemplate("document",bizagi.getTemplate("bizagi.rendering.tablet.document")+"#bz-document-generator"),e.loadTemplate("document-item",bizagi.getTemplate("bizagi.rendering.tablet.document")+"#bz-document-generator-item"),e.loadTemplate("document-item-preview",bizagi.getTemplate("bizagi.rendering.tablet.document")+"#bz-document-generator-item-preview"),e.loadTemplate("bizagi.grid.grid",bizagi.getTemplate("bizagi.rendering.tablet.grid.component")+"#ui-bizagi-grid"),e.loadTemplate("bizagi.grid.waiting",bizagi.getTemplate("bizagi.rendering.tablet.grid.component")+"#ui-bizagi-grid-waiting"),e.loadTemplate("bizagi.grid.table",bizagi.getTemplate("bizagi.rendering.tablet.grid.component")+"#ui-bizagi-grid-table"),e.loadTemplate("bizagi.grid.table.empty",bizagi.getTemplate("bizagi.rendering.tablet.grid.component")+"#ui-bizagi-grid-table-empty"),e.loadTemplate("bizagi.grid.column",bizagi.getTemplate("bizagi.rendering.tablet.grid.component")+"#ui-bizagi-grid-column"),e.loadTemplate("bizagi.grid.column.special",bizagi.getTemplate("bizagi.rendering.tablet.grid.component")+"#ui-bizagi-grid-column-special"),e.loadTemplate("bizagi.grid.row",bizagi.getTemplate("bizagi.rendering.tablet.grid.component")+"#ui-bizagi-grid-row"),e.loadTemplate("bizagi.grid.row.buttons",bizagi.getTemplate("bizagi.rendering.tablet.grid.component")+"#ui-bizagi-grid-row-buttons"),e.loadTemplate("bizagi.grid.cell",bizagi.getTemplate("bizagi.rendering.tablet.grid.component")+"#ui-bizagi-grid-cell"),e.loadTemplate("bizagi.grid.cell.special",bizagi.getTemplate("bizagi.rendering.tablet.grid.component")+"#ui-bizagi-grid-cell-special"),e.loadTemplate("bizagi.grid.pager",bizagi.getTemplate("bizagi.rendering.tablet.grid.component")+"#ui-bizagi-grid-pager"),e.loadTemplate("bizagi.grid.buttons",bizagi.getTemplate("bizagi.rendering.tablet.grid.component")+"#ui-bizagi-grid-buttons"),e.loadTemplate("bizagi.grid.dynamicpager",bizagi.getTemplate("bizagi.rendering.tablet.grid.component")+"#ui-bizagi-grid-dynamic-pager"),e.loadTemplate("bizagi.grid.buttons.offline",bizagi.getTemplate("bizagi.rendering.tablet.grid.component")+"#ui-bizagi-grid-buttons-offline"),e.loadTemplate("bizagi.grid.row.buttons.offline",bizagi.getTemplate("bizagi.rendering.tablet.grid.component")+"#ui-bizagi-grid-row-buttons-offline")).done(function(){t.resolve()}),t.promise()},getRender:function(e){var t,i=e.type,n=e.data,r=$.extend(e,{renderFactory:this,dataService:e.dataService||this.dataService});return"grid"==i?void 0!==bizagi.context.isOfflineForm&&bizagi.context.isOfflineForm?new bizagi.rendering.grid.offline(r):new bizagi.rendering.grid(r):"upload"==i?void 0!==bizagi.context.isOfflineForm&&bizagi.context.isOfflineForm?new bizagi.rendering.upload.offline(r):new bizagi.rendering.upload(r):"number"==i&&(t=n.properties)&&29===t.dataType?new bizagi.rendering.numberScientificNotation(r):this._super(e)},getColumn:function(e){var t=e.type,i=$.extend(e,{renderFactory:this,dataService:e.dataService||this.dataService,singleInstance:!!bizagi.util.isEmpty(e.singleInstance)||e.singleInstance});if("columnNumber"===t){var n=e.data.properties;if(n&&29===n.dataType)return i.decorated=bizagi.rendering.numberScientificNotation,new bizagi.rendering.columns.numberScientificNotation(i)}return this._super(e)}}),$.Class.extend("bizagi.rendering.device.factory",{},{init:function(e){this.device=bizagi.util.detectDevice(),this.cachedFactory=null},getRenderFactory:function(e,t){var i=this,n=new $.Deferred;if(null!=i.cachedFactory&&""==t)i.cachedFactory.printVersion=!1,n.resolve(i.cachedFactory);else{if("print"===t)return i.cachedFactory=new bizagi.rendering.print.factory(e),i.cachedFactory.initAsyncStuff().done(function(){n.resolve(i.cachedFactory)}),n.promise();if("desktop"===this.device)return i.cachedFactory=new bizagi.rendering.desktop.factory(e),i.cachedFactory.initAsyncStuff().done(function(){n.resolve(i.cachedFactory)}),n.promise();bizagi.util.isTabletDevice()?(i.cachedFactory=new bizagi.rendering.tablet.factory(e),i.cachedFactory.initAsyncStuff().done(function(){n.resolve(i.cachedFactory)})):bizagi.util.isSmartphoneDevice()?(i.cachedFactory=new bizagi.rendering.smartphone.factory(e),i.cachedFactory.initAsyncStuff().done(function(){n.resolve(i.cachedFactory)})):(bizagi.showMessageBox("Not supported device: "+this.device),n.resolve(""))}return n.promise()},getDataService:function(){return this.dataService}}),bizagi.rendering=bizagi.rendering||{},$.Class.extend("bizagi.rendering.facade",{form:void 0,executionDeferred:new $.Deferred},{init:function(e){e=e||{},this.observableElement=$({});var t=e.device||"";this.deviceFactory=new bizagi.rendering.device.factory,this.dataService=new bizagi.render.services.service(e),this.renderFactory=this.deviceFactory.getRenderFactory(this.dataService,t)},getFactory:function(){return{deviceFactory:this.deviceFactory,dataService:this.dataService,renderFactory:this.renderFactory}},subscribe:function(){this.observableElement.bind.apply(this.observableElement,arguments)},unsubscribe:function(){this.observableElement.unbind.apply(this.observableElement,arguments)},publish:function(){return this.observableElement.triggerHandler.apply(this.observableElement,arguments)},update:function(e){return e.mode&&(this.mode=e.mode),this.execute($.extend(e,{canvas:this.canvas,mode:this.mode}))},execute:function(e){var t=this,i=this.ownerDocument,n=$("body",i);if(e=e||{},t.executionDeferred&&t.executionDeferred.state?"resolved"==t.executionDeferred.state()&&(t.executionDeferred=$.Deferred()):t.executionDeferred=$.Deferred(),bizagi.chrono.initAndStart("rendering+data",!0),bizagi.rendering.render.startOptimization(),void 0===e.mode&&!bizagi.util.isEmpty(window.location.search)){var r=bizagi.util.getQueryString();e.mode=r.mode}var a=t.canvas=e.canvas=e.canvas||$("<div />").appendTo(n);return t.mode=e.mode,t.process(e).done(function(i){e.refreshing||a.empty(),a.append(i.container),$(i.pathProcess).insertBefore(i.container),t.form=i,t.form.setSize({width:t.lastWidth,height:t.lastHeight}),setTimeout(function(){t.lastWidth=$(window).width(),t.lastHeight=$(window).height(),window.self!==window.top&&t.resizeInPopUpHTML()},2e3),i.triggerHandler("ondomincluded"),t.publish("rendering-formRendered",{}),t.configureRefresh(i,a),t.configureRouting(i,a),t.configureRenderError(i,a),t.configureResize(i),t.configureGlobalHandlers(i),e.summaryForm&&i.container.addClass("ui-bizagi-summary-form"),bizagi.chrono.stopAndLog("rendering"),bizagi.chrono.stopAndLog("rendering+data"),bizagi.chrono.stopAndLog("submitForm"),bizagi.chrono.stopAndLog("submitForm-ajax"),bizagi.chrono.stopAndLog("waiting"),bizagi.rendering.render.stopOptimization(),bizagi.override.enableE2EInterface&&(t.Class.form=t.form,t.Class.executionDeferred.resolve(t.form)),t.executionDeferred.resolve(t.form)}).fail(function(e,i){$.when(t.renderFactory).done(function(i){void 0!==e&&""!==e||(e=bizagi.localization.getResource("render-error-unknown"));var n=i.getCommonTemplate("form-error");a.empty(),a.append($.tmpl(n,{message:e})),t.canvas.triggerHandler("errorform",e),bizagi.chrono.stopAndLog("rendering"),bizagi.chrono.stopAndLog("rendering+data"),t.executionDeferred.reject()})}),t.executionDeferred.promise()},ready:function(){return this.executionDeferred.promise()},process:function(e){var t=this,i=new $.Deferred,n=t.dataService.getFormData(e),r=t.canvas||e.canvas;return bizagi.showErrorAlertDialog=!1,$.when(n,t.renderFactory).done(function(n,a){if(bizagi.showErrorAlertDialog=!0,bizagi.util.isEmpty(n))return t.publish("no-data-found"),void i.fail();if(n&&"reload"==n.type)(l=t.form)&&(l.endLoading(),l.dispose()),r.triggerHandler("routing");else if(n&&"suspended"==n.type){var o=a.getTemplate("info-message"),s=bizagi.localization.getResource("render-case-suspended");$.tmpl(o,{message:s}).appendTo(r),i.fail()}else if(n&&"error"!=n.type){e.hasOwnProperty("printversion")&&((n=t.transformGridControl(n)).form.properties.editable="False"),bizagi.chrono.initAndStart("rendering"),e.type=n.form&&n.form.properties.type||e.type;var l=t.processForm(n.form,a,e);i.resolve(l)}else t.getFailDeferred(n,i)}).fail(function(e){t.getFailDeferred(e,i)}),i.promise()},transformGridControl:function(e){var t=this;return null==e?e:(e.hasOwnProperty("type")&&"grid"==e.type?(e.id=e.id+"-print",e.allowAdd="False",e.allowDelete="False",e.allowEdit="False",e.allowGrouping="False",e.allowMore="False",e.allowSearch="False"):$.each(e,function(i,n){"object"==typeof n&&(e[i]=t.transformGridControl(e[i]))}),e)},getFailDeferred:function(e,t){var i="",n={};try{n=JSON.parse(e.responseText)}catch(t){n={message:e.responseText,errorType:"ERRORUNKNOWN"}}n.message?(i+="<br>Error Type: "+n.errorType,i+="<br>Error Message: "+n.message):"JSharpNotSupportedException"==n.errorType&&(i+="<br>Error Message: "+bizagi.localization.getResource("jsharp-required")),"ERRORUNKNOWN"==n.errorType?t.reject(i,n.errorType):t.reject(i)},processForm:function(e,t,i){var n=t.getContainer($.extend(i,{type:i.type||"form",data:e}));if("undefined"!=typeof BIZAGI_ORIENTATION&&("rtl"==n.properties.orientation||"rtl"==BIZAGI_ORIENTATION)&&n.buttons.length>0){var r=n.buttons[0];n.buttons.splice(0,1),n.buttons.push(r)}return n.render(),n},resize:function(e){this.form&&this.form.trigger("renderresize",e)},configureRefresh:function(e,t){var i=this;e.bind("refresh",function(n,r){var a=e.container.parent(),o=(a=bizagi.util.scrollTop(a)).scrollTop();$(i.form).trigger("onRefreshStarted"),e.dispose(r),t.fastEmpty();var s=t.parent();s.find(".ui-bizagi-button-container").length>0&&s.find(".ui-bizagi-button-container").remove(),i.executionDeferred&&i.executionDeferred.state&&"resolved"==i.executionDeferred.state()&&(i.executionDeferred=$.Deferred());var l=i.form.getParams();return $.when(i.execute($.extend(r,{canvas:t,refreshing:!0,idCase:l.idCase,displayName:l.displayName}))).done(function(){setTimeout(function(){a.scrollTop(o),$(i.form).trigger("onRefreshFinished")},100)}),i.executionDeferred.promise()})},configureResize:function(e){var t=this;e.bind("renderresize",function(i,n){if(n=n||{},!t.resizeTimeout){t.resizeTimeout=setTimeout(function(){var i=$(window).width(),r=$(window).height();(n.forceResize||i!=t.lastWidth)&&(bizagi.chrono.initAndStart("resize"),e.resize({width:i,height:r}),t.lastWidth=i,t.lastHeight=r,bizagi.chrono.stopAndLog("resize"),bizagi.chrono.log("resize")),t.resizeTimeout=null},0)}}),t.resize()},configureRouting:function(e,t){e.bind("routing",function(i,n){e.dispose(),t.triggerHandler("routing",n)})},configureGlobalHandlers:function(e){var t=this;e.bind("globalHandler",function(e,i){return t.publish(i.eventType,i.data)})},configureRenderError:function(e,t){var i=this;e.bind("formRenderingError",function(e,n){$.when(i.renderFactory).done(function(e){var r="<br>Error: ";n=n.replace(/(\r\n|\n|\r)/gm,"");var a=JSON.parse(n);a.message&&(r+=a.message,r+="<br>Error Type: "+a.errorType);var o=e.getCommonTemplate("form-error");t.empty(),t.append($.tmpl(o,{message:r})),i.canvas.triggerHandler("errorform","renderItemError"),bizagi.chrono.stopAndLog("rendering+data"),bizagi.chrono.stopAndLog("rendering")})})},dispose:function(){this.form&&this.form.dispose(),bizagi.util.dispose(this)},resizeInPopUpHTML:function(){if($(".activitiFormContainer").length>0&&"cases"!=bizagi.util.getQueryString().type){var e=$(".activitiFormContainer").height()||0,t=$(".activitiFormContainer #ui-bizagi-webpart-render-container"),i=$(".ui-bizagi-button-container",".activitiFormContainer"),n=i.outerHeight()||0,r=bizagi.util.getQueryString().renderBehavior||"";if("PopUp"==(r=r.replace("#",""))){if(void 0===self.postMessageSocket){var a=$(".activitiFormContainer").height()-50||396;$("#render-canvas").height(a),$("#render-canvas").css("overflowY","scroll")}else $(".activitiFormContainer").height($(".activitiFormContainer").height()+$(".ui-bizagi-button-container").height()+30);$(".ui-bizagi-button-container").css("position","absolute"),$(".ui-bizagi-button-container").appendTo(".activitiFormContainer"),$(".ui-bizagi-button-container").length>1&&($(".ui-bizagi-button-container:first").hide(),t.css("marginTop","-17px"))}i.length>0&&t.height(e-97-n),0==$(".ui-bizagi-button-container").children().length?$("#render-canvas").height($("#render-canvas").height()+n):(i.width("100%"),i.css("marginLeft",0),i.css("bottom",0))}else"render"==bizagi.util.getQueryString().type&&($("html").css("overflowX","hidden"),$("#render").height()<=window.innerHeight+5?$("html").css("overflowY","hidden"):$("html").css("overflowY","scroll"),$(".ui-widget-overlay").height(650))}});
//# sourceMappingURL=../../../../Maps/tablet/rendering.tablet.production.js.map
