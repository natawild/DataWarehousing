bizagi.workportal=void 0!==bizagi.workportal?bizagi.workportal:{},bizagi.workportal.services=void 0!==bizagi.workportal.services?bizagi.workportal.services:{},bizagi.workportal.services.endPoints=[],bizagi.workportal.services.getEndPoints=function(e){return"workportal"==e.context?(bizagi="undefined"!=typeof bizagi?bizagi:{},bizagi.localization=void 0!==bizagi.localization?bizagi.localization:{},bizagi.localization.language=void 0!==bizagi.localization.language?bizagi.localization.language:bizagi.language,{"user-handler":e.proxyPrefix+"RestServices/UserHandler.ashx","process-handler":e.proxyPrefix+"RestServices/ProcessHandler.ashx","query-handler":e.proxyPrefix+"Rest/Handlers/Query","case-handler":e.proxyPrefix+"RestServices/CaseHandler.ashx","query-form":e.proxyPrefix+"App/ListaDetalle/QueryForm.aspx","query-form-edit":e.proxyPrefix+"App/ListaDetalle/SaveQuery.aspx","query-form-delete":e.proxyPrefix+"App/ListaDetalle/QueryForm.aspx","query-form-delete-cube":e.proxyPrefix+"Rest/Queries/Cubes/{idCube}","favorites-handler":e.proxyPrefix+"RestServices/FavoritesHandler.ashx","file-handler":e.proxyPrefix+"RestServices/EntityHandler.ashx","login-handler":e.proxyPrefix+"Rest/Users/UserAuthentication","login-handlerv10":e.proxyPrefix+"RestServices/UserHandler.ashx?action=authenticateUser&userName={0}&password={1}&domain={2}","logoff-handler":e.proxyPrefix+"RestServices/UserHandler.ashx?action=logOff","logoff-handlerv1":e.proxyPrefix+"Rest/Users/LogOff",overrides:e.proxyPrefix+"Rest/Util/Overrides","authorization-handler-getMenuAuthorization":e.proxyPrefix+"Rest/Authorization/MenuAuthorization","authorization-handler-isCaseCreationAuthorized":e.proxyPrefix+"Rest/Authorization/Processes/{0}/IsCaseCreationAuthorized","case-handler-getCaseSummary":e.proxyPrefix+"Rest/Cases/{idCase}/SummaryGuid","case-handler-getCaseSummaryByGuid":e.proxyPrefix+"Rest/Cases/{guid}/SummaryByGuid","case-handler-releaseActivity":e.proxyPrefix+"Rest/Cases/{idCase}/ReleaseActivity","case-handler-takeOwnershipActivity":e.proxyPrefix+"Rest/Cases/TakeOwnership","case-handler-getCasesList":e.proxyPrefix+"Rest/Processes/GetCases","offline-getProcessTree":e.proxyPrefix+"Rest/Processes/OfflineProcessTree","offline-getForms":e.proxyPrefix+"Rest/RenderForm/offlineForms","offline-sendForm":e.proxyPrefix+"Rest/Cases/SaveAsynchWorkItemOffLine","case-handler-getCaseTasks":e.proxyPrefix+"Rest/Cases/{idCase}/Tasks","case-handler-getCaseEvents":e.proxyPrefix+"Rest/Cases/{idCase}/Events","case-handler-getCaseSubprocesses":e.proxyPrefix+"Rest/Cases/{idCase}/Subprocesses","case-handler-getTaskAssignees":e.proxyPrefix+"Rest/Cases/{idCase}/Tasks/{idTask}/AssigneesGuid","case-handler-getCaseAssignees":e.proxyPrefix+"Rest/Cases/{idCase}/AssigneesGuid","case-handler-getCaseAssigneesPreview":e.proxyPrefix+"Rest/Cases/{idCase}/AssigneesPreview","case-handler-getWorkItems":e.proxyPrefix+"Rest/Cases/{idCase}/WorkItems","case-handler-getWorkItemsByGuid":e.proxyPrefix+"Rest/Cases/{guid}/WorkItemsByGuid","case-handler-getAsynchExecutionState":e.proxyPrefix+"Rest/Cases/{idCase}/AsynchExecutionState","case-handler-addNewCase":e.proxyPrefix+"Rest/Cases","case-handler-startProcess":e.proxyPrefix+"Rest/Processes/StartProcess/{idProcess}","case-handler-supportedLogTypes":e.proxyPrefix+"Rest/Cases/SupportedLogsTypes","case-handler-getActivityLog":e.proxyPrefix+"Rest/Cases/{idCase}/ActivityLog","case-handler-getActivityDetailLog":e.proxyPrefix+"Rest/Cases/{idCase}/Workitem/{idWorkItemFrom}/ActivityDetailLog","case-handler-getEntityLog":e.proxyPrefix+"Rest/Cases/{idCase}/EntityLog","case-handler-getEntityDetailLog":e.proxyPrefix+"Rest/Cases/{idCase}/EntityDetailLog","case-handler-getUserLog":e.proxyPrefix+"Rest/Cases/{idCase}/UserLog","case-handler-getUserDetailLog":e.proxyPrefix+"Rest/Cases/{idCase}/{idUser}/UserDetailLog","case-handler-getAdminLog":e.proxyPrefix+"Rest/Cases/{idCase}/AdminLog","case-handler-getCaseFormsRenderVersion":e.proxyPrefix+"Rest/Cases/{idCase}/FormsRenderVersion","case-handler-getCaseFormsRenderVersionByGuid":e.proxyPrefix+"Rest/Cases/{guid}/FormsRenderVersionByGuid","favorites-handler-saveFavorite":e.proxyPrefix+"Rest/Favorites","favorites-handler-deleteFavorite":e.proxyPrefix+"Rest/Favorites/{guidFavorite}","bamAnalytics-handler-getAnalisysQueries":e.proxyPrefix+"Rest/BAMAnalytics/AnalisysQueries","bamAnalytics-handler-updateQuery":e.proxyPrefix+"Rest/BAMAnalytics/Reports/Ids/{idQuery}","inbox-handler-getInboxSummary":e.proxyPrefix+"Rest/Inbox/Summary","MessageHandler-NewComment":e.proxyPrefix+"Rest/Cases/Comments","MessageHandler-GetComments":e.proxyPrefix+"Rest/Cases/Comments","MessageHandler-SetCategoryToComment":e.proxyPrefix+"Rest/Cases/Comments/{idComment}","MessageHandler-RemoveComment":e.proxyPrefix+"Rest/Cases/Comments/{idComment}","MessageHandler-ReplyComment":e.proxyPrefix+"Rest/Cases/Comments/{idComment}/Replies","MessageHandler-RemoveReply":e.proxyPrefix+"Rest/Cases/Comments/{idComment}/Replies/{idReply}","MessageHandler-GetCategoryColors":e.proxyPrefix+"Rest/Cases/Comments/CategoryColors","MessageHandler-RenameCategoryColor":e.proxyPrefix+"Rest/Cases/Comments/CategoryColors/{idColorCategory}","MessageHandler-CountNewComments":e.proxyPrefix+"Rest/Cases/Comments/{idComment}/NewComments/Count","process-handler-getAllProcesses":e.proxyPrefix+"Rest/Processes","process-handler-getFavourites":e.proxyPrefix+"Rest/Home/MyFavorites/Count","process-handler-getMyStuff":e.proxyPrefix+"Rest/Home/MyStuff","process-handler-getFavouriteCases":e.proxyPrefix+"Rest/Home/MyFavorites","process-handler-getActions":e.proxyPrefix+"Rest/Home/Actions","process-handler-getCustomizedColumnsData":e.proxyPrefix+"Rest/Processes/CustomizedColumnsData","process-handler-getCategory":e.proxyPrefix+"Rest/Processes/Categories","process-handler-getRecentProcesses":e.proxyPrefix+"Rest/Processes/RecentProcesses","process-handler-getCustomizedColumnsDataInfo":e.proxyPrefix+"Rest/Processes/CustomizedColumnsDataInfo","process-handler-getOrganizations":e.proxyPrefix+"Rest/Profile/Organizations","process-handler-getOrganizationsByUser":e.proxyPrefix+"Rest/Profile/OrganizationsByUser","process-handler-getActivitiesData":e.proxyPrefix+"Api/Processes/CasesData/MyActivities","process-handler-getPendingsData":e.proxyPrefix+"Api/Processes/CasesData/MyPendings","process-handler-getUsersCases":e.proxyPrefix+"Api/Cases/{caseId}/UsersGuid","process-handler-getActionsEvents":e.proxyPrefix+"Api/Cases/{caseId}/CurrentEvents","query-handler-getqueries":e.proxyPrefix+"Rest/Queries","query-handler-getqueries-definitions":e.proxyPrefix+"Rest/Queries/Definitions","query-handler-getQueryFormResponse":e.proxyPrefix+"Rest/Queries/Search","query-handler-getQueryFormExportExcel":e.proxyPrefix+"Rest/Queries/ExportToExcel","query-handler-getQueryForm":e.proxyPrefix+"Rest/Handlers/Render","query-handler-storedQueryForm":e.proxyPrefix+"Rest/StoredQueryForms","query-handler-storedQueryForm-id":e.proxyPrefix+"Rest/StoredQueryForms/{idStoredQueryForm}","preferences-handler-getPreferencesForm":e.proxyPrefix+"Rest/Handlers/Render","user-handler-getCurrentUser":e.proxyPrefix+"Rest/Users/CurrentUserGuid","old-render":e.proxyPrefix+"App/ListaDetalle/Detalle.aspx",Reports:e.proxyPrefix+"RestServices/BAMAnalyticsHandler.ashx","reports-handler-deleteQueries":e.proxyPrefix+"Rest/BAMAnalytics/Reports/{QueryId}","folders-handler-getUserQueries":e.proxyPrefix+"Rest/SmartFolders","folders-associate-deleteSmartFolder":e.proxyPrefix+"Rest/SmartFolders/{idSmartFolder}","folders-handler":e.proxyPrefix+"RestServices/SmartFoldersHandler.ashx","folders-associate":e.proxyPrefix+"App/Ajax/AJAXGateway.aspx","smartfolders-integration":e.proxyPrefix+"App/WorkPortal/ConfigureFilteredFolder.aspx",AlarmAdmin:e.proxyPrefix+"App/Admin/AlarmsAdmin.aspx",AnalyticsProcess:e.proxyPrefix+"App/Cockpit/AnalyticsProcess.aspx",AnalyticsSensor:e.proxyPrefix+"App/Cockpit/AnalyticsSensor.aspx",AnalyticsTask:e.proxyPrefix+"App/Cockpit/AnalyticsTask.aspx",AsynchronousWorkitemRetries:e.proxyPrefix+"App/Admin/AsynchDisabledWorkitems.aspx",AuthenticationLogQuery:e.proxyPrefix+"App/Admin/AuthLogQuery.aspx",BAMProcess:e.proxyPrefix+"App/Cockpit/BAMProcess.aspx",BAMTask:e.proxyPrefix+"App/Cockpit/BAMTask.aspx",BusinessPolicies:e.proxyPrefix+"App/Admin/BusinessPolicies/BusinessPoliciesSelector.aspx",CaseAdmin:e.proxyPrefix+"App/Admin/CaseSearch.aspx",adminReassignCases:"CaseAdmin",asyncECMUpload:"asyncECMUpload",CasesMonitor:e.proxyPrefix+"App/Admin/CasesMonitor.aspx",Closed:e.proxyPrefix+"App/ListaDetalle/listaitems.aspx?h_Location=Cerrados&I_ProcessState=Completed",CurrentUser:e.proxyPrefix+"App/Admin/CurrentUser.aspx",EncryptionAdmin:e.proxyPrefix+"App/Admin/Encrypt.aspx",MobileUpdatesAdmin:e.proxyPrefix+"App/MobileUpdates/default.aspx",EntityAdmin:e.proxyPrefix+"App/Admin/Entity.aspx",LocationResources:e.proxyPrefix+"App/Admin/AdminLocResources.aspx",NewCase:e.proxyPrefix+"App/Radicar/application.aspx",Pending:e.proxyPrefix+"App/ListaDetalle/listaitems.aspx?h_Location=Pendientes&I_processState=Running",Profiles:e.proxyPrefix+"App/Admin/ProfilesAdminSearch.aspx",Search:e.proxyPrefix+"App/ListaDetalle/Search.aspx",UserAdmin:e.proxyPrefix+"App/Admin/ListUsers.aspx",UserDefaultAssignation:e.proxyPrefix+"App/Admin/DefaultAssignationUser.aspx?h_AdminDefaultAssign=1",UserPendingRequests:e.proxyPrefix+"App/Admin/UserPendingRequests.aspx",ListPreferences:""!=bizagi.UserPreferencesUrl?e.proxyPrefix+bizagi.UserPreferencesUrl:e.proxyPrefix+"App/Admin/CurrentUser.aspx",GRDimensionAdmin:e.proxyPrefix+"App/Cockpit/DimensionEdit.aspx",Licenses:e.proxyPrefix+"App/Admin/Licenses.aspx",AnalysisQueries:e.proxyPrefix+"App/Inicio/WPAnalysisQuery.aspx",DocumentTemplates:e.proxyPrefix+"App/Admin/AdminDocumentTemplates.aspx",ProcessAdmin:e.proxyPrefix+"App/Admin/AdminProcess.aspx",ResourceBAM:e.proxyPrefix+"App/Cockpit/BAMResourceMonitor.aspx",WorkPortalVersion:e.proxyPrefix+"Rest/Util/Version",PreferenceFormOld:e.proxyPrefix+"App/Admin/CurrentUserByForm.aspx","entities-administration":"RestServices/EntityHandler.ashx",logout:e.proxyPrefix+"Rest/Authentication/logout",logoutDotNet:e.proxyPrefix+"App/Inicio/LogOff.aspx",authenticationConfig:e.proxyPrefix+"Api/Authentication/BizagiConfig","logout-oauth2":e.proxyPrefix+"Api/Authentication/OAuth2/IdentityProvider/Server/Logout",FederateLogoffUrl:e.proxyPrefix+"Api/Authentication/FederateLogoffUrl",oauth2AuthenticationConfig:e.proxyPrefix+"Api/Authentication/OAuth2/OAuth2AuthenticationConfig","massive-activity-assignments-getOrganizationInfo":e.proxyPrefix+"Rest/Users/OrganizationInfo","massive-activity-assignments-getCasesByOrganization":e.proxyPrefix+"Rest/Queries/GetCasesByOrganization","massive-activity-assignments-reassignCases":e.proxyPrefix+"Rest/Cases/ReassignCases","massive-activity-assignments-searchUsers":e.proxyPrefix+"Rest/Users","massive-activity-assignments-searchUsersById":e.proxyPrefix+"Rest/Users/ByIds","async-ecm-upload-baseService":e.proxyPrefix+"Rest/Handlers/Metadata",domains:e.proxyPrefix+"Rest/Authentication/Domains",ThemeBuilder:e.proxyPrefix+"ThemeBuilder/index.html?language="+bizagi.localization.language,getCurrentTheme:e.proxyPrefix+"Api/Theme/Current","admin-getAuthenticationLog":e.proxyPrefix+"Rest/Users/AuthLog","admin-getAuthenticationDomains":e.proxyPrefix+"Rest/Users/Domains","admin-getAuthenticationEventsTypes":e.proxyPrefix+"Rest/Users/EventTypes","admin-getAuthenticationEventSubTypes":e.proxyPrefix+"Rest/Users/EventSubTypes","admin-EncryptString":e.proxyPrefix+"Rest/Util/EncryptString","admin-UserPendingRequests":e.proxyPrefix+"Rest/Users/UserPendingRequests","admin-UserAuthenticationInfo":e.proxyPrefix+"Rest/Users/UserAuthenticationInfo","admin-updateUserAuthenticationInfo":e.proxyPrefix+"Rest/Users/UpdateUserAuthenticationInfo","admin-generateRandomPassword":e.proxyPrefix+"Rest/Util/GenerateRandomPassword","admin-GenerateDataToSendByEmail":e.proxyPrefix+"Rest/Users/GenerateDataToSendByEmail","admin-sendEmail":e.proxyPrefix+"Rest/Util/SendEmail/","admin-sendUserEmail":e.proxyPrefix+"Rest/Users/SendUserEmail","admin-getApplicationList":e.proxyPrefix+"Rest/Application","admin-getCaseSecurityApplicationList":e.proxyPrefix+"Api/CaseSecurity/Applications?idUser={userId}","admin-getApplicationProcesses":e.proxyPrefix+"Rest/Application/{idApp}/Process","admin-getProcessVersion":e.proxyPrefix+"Rest/Processes/Version","admin-getProcessTasks":e.proxyPrefix+"Rest/Processes/Version/{version}/Tasks","admin-userGetPositions":e.proxyPrefix+"Rest/Users/GetPositions","admin-usersform":e.proxyPrefix+"Rest/Handlers/Render","admin-getTaskAlarms":e.proxyPrefix+"Rest/Alarm/TaskAlarms","admin-getLapseMode":e.proxyPrefix+"Rest/Alarm/LapseMode","admin-getRecurrMode":e.proxyPrefix+"Rest/Alarm/RecurrMode","admin-getScheduleType":e.proxyPrefix+"Rest/Alarm/ScheduleType","admin-getBossList":e.proxyPrefix+"Rest/Alarm/Boss","admin-addAlarm":e.proxyPrefix+"Rest/Alarm","admin-editAlarm":e.proxyPrefix+"Rest/Alarm/{idAlarm}","admin-deleteAlarm":e.proxyPrefix+"Rest/Alarm","admin-alarmRecipients":e.proxyPrefix+"Rest/Alarm/{idAlarm}/Recipient","admin-deleteAlarmRecipients":e.proxyPrefix+"Rest/Alarm/Recipient","admin-recipientToAlarm":e.proxyPrefix+"Rest/Alarm/{idAlarm}/Recipient/{idRecipient}","admin-enableAlarm":e.proxyPrefix+"Rest/Alarm/Task/{idTask}/ToggleAlarm","admin-getUsersForAssignation":e.proxyPrefix+"Rest/Users/UsersForAssignation","admin-getUsersList":e.proxyPrefix+"Rest/Users/SearchUsers","admin-getUsersListForPlans":e.proxyPrefix+"Rest/Users/SearchUsersForPlansGuid","admin-getCategoriesList":e.proxyPrefix+"Rest/Application/Category","admin-getCaseSecurityCategoriesList":e.proxyPrefix+"Api/CaseSecurity/Applications/{idApp}/Categories?idUser={userId}","admin-getCasesList":e.proxyPrefix+"Rest/Queries/SearchCases","admin-invalidateCases":e.proxyPrefix+"Rest/Cases/Invalidate","admin-getProcessRunningInvalidateCases":e.proxyPrefix+"Rest/Util/operationStatus?opType=InvalidateCases","admin-abortItems":e.proxyPrefix+"Rest/Cases/Abort","admin-reassignItems":e.proxyPrefix+"Rest/Cases/Reassign","admin-reassignCurrent":e.proxyPrefix+"Rest/Cases/ReassignCurrent","admin-getDefaultAssignationUserToAllProcess":e.proxyPrefix+"Rest/Users/{serviceAction}/","admin-getDefaultAssignationUserToProcess":e.proxyPrefix+"Rest/Users/Process/{process}/AssignationUser","admin-setDefaultAssignationUserToProcess":e.proxyPrefix+"Rest/Users/Process/{process}/AssignationUser","admin-transferAllCaseSecuritypermissions":e.proxyPrefix+"Api/CaseSecurity/Processes/Permissions/Transfer","admin-transferCaseSecuritypermissions":e.proxyPrefix+"Api/CaseSecurity/Processes/{idProcess}/Permissions/Transfer","admin-revokeAllCaseSecuritypermissions":e.proxyPrefix+"Api/CaseSecurity/Processes/Permissions/Revoke","admin-revokeCaseSecuritypermissions":e.proxyPrefix+"Api/CaseSecurity/Processes/{idProcess}/Permissions/Revoke","admin-statusTransferCaseSecuritypermissions":e.proxyPrefix+"Rest/Cases/StatusTransferCaseSecuritypermissions","admin-getProfilesTypes":e.proxyPrefix+"Rest/Profile/Types","admin-searchProfiles":e.proxyPrefix+"Rest/Profile","admin-getUsersByProfile":e.proxyPrefix+"Rest/Users/Profile/{type}/{id}","admin-getUsersByProfile-report":e.proxyPrefix+"Rest/Users/Profile/{filterType}/{guidValueFilter}/Report","admin-removeUserFromProfile":e.proxyPrefix+"Rest/Profile/{type}/{id}/User/{idUser}/","admin-addUserToProfile":e.proxyPrefix+"Rest/Profile/{type}/{id}/User/{idUser}/","admin-async-activities-get-activities":e.proxyPrefix+"Rest/Cases/Asynchronous/Activities","admin-async-activities-get-retry-now":e.proxyPrefix+"Rest/Cases/{idCase}/Workitem/{idworkItem}/{idAsynchWorkitem}/RetryNow","admin-async-activities-get-activities-by-task":e.proxyPrefix+"Rest/Cases/Asynchronous/Activities/Task","admin-async-activities-enable-execution":e.proxyPrefix+"Rest/Cases/Asynchronous/Enable","admin-async-activities-enable-multiple":e.proxyPrefix+"Rest/Cases/Asynchronous/EnableMultiple","admin-async-activities-async-execution":e.proxyPrefix+"Rest/Cases/{idCase}/Workitem/{idWorkitem}/AsynchExecution","admin-async-activities-async-execution-log":e.proxyPrefix+"Rest/Cases/{idCase}/Workitem/{idworkItem}/{idAsynchWorkitem}/AsynchExecutionLog","admin-Licenses":e.proxyPrefix+"Rest/Licenses","admin-audit-license":e.proxyPrefix+"Rest/Licenses/auditLicense","admin-GetDimensions":e.proxyPrefix+"Rest/Dimensions","admin-EditDimension":e.proxyPrefix+"Rest/Dimensions/{id}","admin-CreateAdministrableDimension":e.proxyPrefix+"Rest/Dimensions/Administrable","admin-DeleteDimension":e.proxyPrefix+"Rest/Dimensions/{id}?isAdministrable={administrable}","admin-EntityPathChildNodesAction":e.proxyPrefix+"Rest/Dimensions/EntityChildNodes","admin-GetActiveWFClasses":e.proxyPrefix+"Rest/Dimensions/ActiveProcess","admin-document-templates-storeDocumentTemplates":e.proxyPrefix+"Rest/DocumentTemplates/StoreDocumentTemplates","admin-document-templates-restoreDocumentTemplates":e.proxyPrefix+"Rest/DocumentTemplates/RestoreDocumentTemplate","admin-document-templates-uploadDocumentTemplate":e.proxyPrefix+"Rest/DocumentTemplates/UploadDocumentTemplate","admin-processes-workflowClasses":e.proxyPrefix+"Rest/Processes/WorkflowClasses","admin-processes-tasksByWorkflow":e.proxyPrefix+"Rest/Processes/TasksByWorkflow","admin-processes-modifyProcessDuration":e.proxyPrefix+"Rest/Processes/{idWorkflow}/Duration/","admin-processes-modifyTaskDuration":e.proxyPrefix+"Rest/Processes/Task/{idTask}/Duration/","admin-entities-list":e.proxyPrefix+"Api/Entities/Parametrics","admin-stakeholders-list":e.proxyPrefix+"Api/Entities/Stakeholders","admin-entities-row-data":e.proxyPrefix+"Api/Entities/{guidEntity}/Data","admin-user-stakeholders":e.proxyPrefix+"Api/Users/{idUser}/Stakeholders","admin-entities-migrated-entity":e.proxyPrefix+"Rest/Entities/migratedEntity","admin-entities-get-form":e.proxyPrefix+"Rest/Handlers/Render","render-multiaction":e.proxyPrefix+"Rest/Handlers/MultiAction","admin-entity-simpleData":e.proxyPrefix+"Rest/Entities/{idEntity}/Instances/{idAttribute}/Brief","admin-language-bizagi-objects":e.proxyPrefix+"Rest/Multilanguage/BizagiObjects","admin-language-entities":e.proxyPrefix+"Rest/Multilanguage/Entities?xsrf="+bizagi.cookie(".BIZCSRF"),"admin-language-resource":e.proxyPrefix+"Rest/Multilanguage/Resource?xsrf="+bizagi.cookie(".BIZCSRF"),"admin-language-resource-download":e.proxyPrefix+"Rest/Multilanguage/LanguageExcel","admin-language-entities-download":e.proxyPrefix+"Rest/Multilanguage/EntitiesExcel","admin-language-languages":e.proxyPrefix+"Rest/Multilanguage/Languages","admin-language-reset":e.proxyPrefix+"Rest/Multilanguage/ResetPersonalization","admin-holidays-schemas":e.proxyPrefix+"Api/WorkingTimeSchema/Holidays","admin-holidays-schema":e.proxyPrefix+"Api/WorkingTimeSchema/Holidays/{schema}","admin-projectname":e.proxyPrefix+"Api/Project/Name","bam-resourcemonitor-myteam":e.proxyPrefix+"Rest/Reports/BAM/Resources/MyTeam","reports-analysisquery":e.proxyPrefix+"Rest/Reports/AnalysisQueries","reports-analysisquery-update":e.proxyPrefix+"Rest/Reports/AnalysisQueries","reports-analysisquery-delete":e.proxyPrefix+"Rest/Reports/AnalysisQueries","processviewer-processdefinition":e.proxyPrefix+"Rest/Reports/Components/ProcessDefinition","processviewer-processgraphicinfo":e.proxyPrefix+"Rest/Reports/Components/ProcessGraphicInfo","processviewer-paths":e.proxyPrefix+"Rest/Reports/Analytics/Process/FrequentPaths","mobile-getLastUpdate":e.proxyPrefix+"Rest/Util/mobileUpdates","admin-userslog":e.proxyPrefix+"Rest/Users/UserAdminLog","admin-userslicenses":e.proxyPrefix+"Rest/Licenses/CanAddNewUser","admin-createuserform":e.proxyPrefix+"Rest/Users/CreateUserAdminForm","graphicquery-trailusers":e.proxyPrefix+"Rest/Cases/TrailUsersGuid","admin-userpreferenceform-isnew":e.proxyPrefix+"Rest/Authorization/UserPreferenceForm","time-schemas-effectiveduration":e.proxyPrefix+"Api/WorkingTimeSchema/EffectiveDurationGuid?idUser={idUser}&fromDate={fromDate}&toDate={toDate}","time-schemas-end-hour-working-by-date":e.proxyPrefix+"Api/WorkingTimeSchema/EndHourWorkingByDateGuid?idUser={idUser}&date={date}","project-resource-action":e.proxyPrefix+"Api/CaseResource/{typeResource}","project-resource-get":e.proxyPrefix+"Api/CaseResource/{typeResource}?globalParent={globalParent}","project-resource-delete":e.proxyPrefix+"Api/CaseResource/{typeResource}/{idResource}","project-users-get":e.proxyPrefix+"Rest/Users/UserPicturesGuid","project-comments-get":e.proxyPrefix+"Api/CaseResource/{idParent}/CommentGuid?dateTime={dateTime}&count={count}","project-comments-count-by-parent":e.proxyPrefix+"Api/CaseResource/{idParent}/Comment/Count","project-util-current-time":e.proxyPrefix+"Api/CaseResource/Util/CurrentTime","project-comments-uploadfiles":e.proxyPrefix+"Api/CaseResource/Attachment","project-attachment-download":e.proxyPrefix+"Api/CaseResource/Attachment/{Attachment}?xsrf="+bizagi.cookie(".BIZCSRF"),"project-files-upload":e.proxyPrefix+"Api/CaseResource/FileGuid","project-files-list":e.proxyPrefix+"Api/CaseResource/FileGuid?globalParent={globalParent}","project-files-thumbnails":e.proxyPrefix+"Api/CaseResource/File/Thumbnails","project-plan-createactivity":e.proxyPrefix+"Api/Plans/{idPlan}/ActivitiesGuid","project-plan-get":e.proxyPrefix+"Api/Plans/Guid/{idPlan}","project-plan-get-case":e.proxyPrefix+"Api/Plans/{idPlan}/IdCase","project-plan-get-by-parent":e.proxyPrefix+"Api/Plans/Guid?parentWorkItem={parentWorkItem}","project-plan-execute":e.proxyPrefix+"Api/Plans/Execute","project-plan-close":e.proxyPrefix+"Api/Plans/Close","project-plan-delete":e.proxyPrefix+"Api/Plans/{idPlan}","project-plan-activities":e.proxyPrefix+"Api/Plans/{idPlan}/ActivitiesGuid","project-plan-workitems":e.proxyPrefix+"Api/Plans/{idPlan}/WorkItemsGuid","project-plan-parent":e.proxyPrefix+"Api/Plans/{idPlan}/ParentCase","project-plan-first-parent-plan":e.proxyPrefix+"Api/Plans/{idPlan}/FirstParentPlanGuid","project-plan-first-parent":e.proxyPrefix+"Api/Plans/{idPlan}/FirstParentCase","project-activity-update-progress":e.proxyPrefix+"Api/Plans/Activity/{idActivity}/Progress","project-plan-update":e.proxyPrefix+"Api/Plans/Guid/{idPlan}","project-plan-activity-tasks-get":e.proxyPrefix+"Api/Plans/{idPlan}/Activities/{idActivity}/Items","project-plan-activity-get":e.proxyPrefix+"Api/Plans/{idPlan}/ActivitiesGuid/{idActivity}","project-plan-activity-delete":e.proxyPrefix+"Api/Plans/{idPlan}/Activities/{id}","project-plan-activity-edit":e.proxyPrefix+"Api/Plans/{idPlan}/ActivitiesGuid/{id}","project-plan-transitions-get":e.proxyPrefix+"Api/Plans/{idPlan}/Activities/Transitions","project-plan-transitions-put":e.proxyPrefix+"Api/Plans/{idPlan}/Activities/Transitions","project-plan-template-create-by-plan":e.proxyPrefix+"Api/Plans/Templates","project-plan-template-get":e.proxyPrefix+"Api/Templates","project-timeline-events-get":e.proxyPrefix+"Api/CaseResource/TimeLineGuid?{idCaseParamValue}","project-workitem-assignees":e.proxyPrefix+"Api/CaseResource/{idWorkitem}/Assignees","project-workitem-assignees-items":e.proxyPrefix+"Api/CaseResource/{idWorkitem}/ItemAssigneeWorkItem","project-plan-create":e.proxyPrefix+"Api/Plans/Guid","project-plan-create-by-template":e.proxyPrefix+"Api/Templates/{idTemplate}/PlansGuid","project-plan-get-all":e.proxyPrefix+"Api/Plans/Templates/get",plans:e.proxyPrefix+"Api/Plans/Guid","stuff-handler-getUserStuff":e.proxyPrefix+"Api/CurrentUser/Collections","get-current-theme":e.proxyPrefix+"Api/CurrentUser/GetCurrentTheme","process-handler-getIdCasesOfProcessEntities":e.proxyPrefix+"Api/Entities/Cases","handler-get-myShortcuts":e.proxyPrefix+"Api/CurrentUser/Shortcuts","handler-execute-action-start":e.proxyPrefix+"Api/Cases/{processId}/Start","handler-validate-action-has-start-form":e.proxyPrefix+"Api/Processes/{processId}/StartContext","process-getIcon":e.proxyPrefix+"Api/Processes/{processId}/Icon","collections-getIcon":e.proxyPrefix+"Api/CurrentUser/Collections/{collectionId}/Icon","data-navigation-handler-collection":e.proxyPrefix+"Api/CurrentUser/Collections/{reference}/Data/{surrogateKey}","data-navigation-handler-entity":e.proxyPrefix+"Api/CurrentUser/Entities/{reference}/Data/{surrogateKey}/{xpath}","data-navigation-handler-entity-filters":e.proxyPrefix+"Api/CurrentUser/Entities/{reference}/Filters/{surrogateKey}/{xpath}","action-handler-getProcessAddAction":e.proxyPrefix+"Api/CurrentUser/Collections/{reference}/{surrogateKey}/Actions","entities-handler-getMapping":e.proxyPrefix+"Rest/Entities/Mapping","entities-handler-getActions":e.proxyPrefix+"Api/Entities/{guidEntity}/{surrogateKey}/actions","actions-handler-getDataForm":e.proxyPrefix+"Rest/Handlers/Render","actions-handler-hasStartForm":e.proxyPrefix+"Rest/Processes/HasStartForm","actions-handler-executeRule-simple":e.proxyPrefix+"Api/Rules/{ruleId}/Execute","actions-handler-executeRule-multiple":e.proxyPrefix+"Api/Rules/{ruleId}/ExecuteMultiple","sort-bar-getMultipleInstancesActions":e.proxyPrefix+"Rest/Entities/multipleInstancesActions","sort-bar-getMapping":e.proxyPrefix+"Rest/Entities/Mapping","sort-bar-execute":e.proxyPrefix+"Api/Action/Execute","activity-map":e.proxyPrefix+"Rest/Processes/ActivityMap/","activity-map-getActivitySummary":e.proxyPrefix+"Rest/Processes/ActivitySummary","subprocess-map":e.proxyPrefix+"Rest/Processes/SubProcessMap","shorcuts-getStakeHolderShorcuts":e.proxyPrefix+"/Api/Stakeholder/Shortcuts","my-search-getSearchLists":e.proxyPrefix+"Api/CurrentUser/Searches","my-search-getFilters":e.proxyPrefix+"Api/CurrentUser/Searches/{guidSearch}/Filters","my-search-getFiltersData":e.proxyPrefix+"Api/CurrentUser/Searches/{guidSearch}/FilterData","my-search-getData":e.proxyPrefix+"Api/CurrentUser/Searches/{guidSearch}/Data","admin-getAdhocProcessesList":e.proxyPrefix+"Api/AdhocProcesses/Search","admin-createAdhocProcess":e.proxyPrefix+"Api/AdhocProcesses/Create","admin-updateAdhocProcess":e.proxyPrefix+"Api/AdhocProcesses/Update","admin-updateAdhocTask":e.proxyPrefix+"Api/AdhocProcesses/{processId}/Activity","admin-deleteAdhocTask":e.proxyPrefix+"Api/AdhocProcesses/{processId}/Activity/{taskId}","admin-deleteAdhocProcess":e.proxyPrefix+"Api/AdhocProcesses/{processId}","admin-publishAdhocProcess":e.proxyPrefix+"Api/AdhocProcesses/Publish","admin-cloneAdhocProcess":e.proxyPrefix+"Api/AdhocProcesses/Clone","admin-getAdhocTask":e.proxyPrefix+"Api/AdhocProcesses/{processId}/Task/{taskId}","admin-getAllEntities":e.proxyPrefix+"Api/AdhocProcesses/Entities","admin-getAllCategories":e.proxyPrefix+"Api/AdhocProcesses/Categories","admin-createNewAdhocProcess":e.proxyPrefix+"Api/LiveProcesses","admin-getAdhocDataSchema":e.proxyPrefix+"Api/LiveProcesses/{processId}/DataSchema","admin-getAdhocProcessDiagram":e.proxyPrefix+"Api/LiveProcesses/{processId}/Diagram","admin-saveAdhocProcessDiagram":e.proxyPrefix+"Api/LiveProcesses/{processId}/Diagram","admin-adhoc-entities-list":e.proxyPrefix+"Api/AdhocProcesses/AdhocEntity/All","admin-saveAdhocEntity":e.proxyPrefix+"Api/AdhocProcesses/AdhocEntity/Save","admin-saveAdhocEntityInstance":e.proxyPrefix+"Api/AdhocProcesses/AdhocEntity/{entityId}/Instance/{isNew}","admin-adhoc-entity-instances":e.proxyPrefix+"Api/AdhocProcesses/AdhocEntity/{entityId}/Instances","admin-entity-values":e.proxyPrefix+"Api/AdhocProcesses/{context}/{entityId}/Values","admin-adhoc-user-group-list":e.proxyPrefix+"Api/LiveProcesses/UserGroups","admin-adhoc-user-group-save":e.proxyPrefix+"Api/LiveProcesses/UserGroups","admin-adhoc-user-group-delete":e.proxyPrefix+"Api/LiveProcesses/UserGroups/{groupId}","admin-adhoc-user-group-data-get":e.proxyPrefix+"Api/LiveProcesses/UserGroups/{groupId}/Users","admin-adhoc-user-group-data-add":e.proxyPrefix+"Api/LiveProcesses/UserGroups/{groupId}/Users/{userId}","admin-adhoc-user-group-data-remove":e.proxyPrefix+"Api/LiveProcesses/UserGroups/{groupId}/Users/{userId}","admin-adhoc-authorization-data-get":e.proxyPrefix+"Api/AdhocProcesses/Authorization","admin-adhoc-authorization-data-save":e.proxyPrefix+"Api/AdhocProcesses/{processId}/{isAdhocTask}/Authorization/Save","oauth2-getApplications":e.proxyPrefix+"oauth2/server/application","oauth2-getApplication":e.proxyPrefix+"oauth2/server/application/id/{applicationId}","oauth2-createApplication":e.proxyPrefix+"oauth2/server/application","oauth2-deleteApplication":e.proxyPrefix+"oauth2/server/application/{applicationId}","oauth2-updateApplication":e.proxyPrefix+"oauth2/server/application/{applicationId}","oauth2-updateClientSecretKeysApplication":e.proxyPrefix+"oauth2/server/application/{applicationId}/updateClientSecretKeys","login-qr-image64":e.proxyPrefix+"Api/Authentication/AccessQRCode","user-gdpr-downloadReportUser":e.proxyPrefix+"rest/users/{idUser}/Report?xsrf="+bizagi.cookie(".BIZCSRF"),"user-gdpr-anonymizeUser":e.proxyPrefix+"rest/users/{idUser}/Report",userDelegation:e.proxyPrefix+"rest/UserDelegate",userFilterOptions:e.proxyPrefix+"rest/UserFilters",catalogQL:e.proxyPrefix+"rest/CatalogQL/Query",currentUser:e.proxyPrefix+"rest/Users/CurrentUserGuid",getUsersForDelegation:e.proxyPrefix+"rest/UserFilters",downloadBPUsReport:e.proxyPrefix+"rest/Reports/BPU"}):"sharepoint"==e.context||"portal"==e.context?(void 0===e.sharepointProxyPrefix&&alert("sharepointProxyPrefix param is requiered to build endpoints when context is 'sharepoint'"),{"user-handler":e.sharepointProxyPrefix+"RestServices/UserHandler.ashx","process-handler":e.sharepointProxyPrefix+"RestServices/ProcessHandler.ashx","query-handler":e.sharepointProxyPrefix+"Rest/Handlers/Query","case-handler":e.sharepointProxyPrefix+"RestServices/CaseHandler.ashx","query-form":e.sharepointProxyPrefix+"App/ListaDetalle/QueryForm.aspx","query-form-edit":e.sharepointProxyPrefix+"App/ListaDetalle/SaveQuery.aspx","query-form-delete":e.sharepointProxyPrefix+"App/ListaDetalle/QueryForm.aspx","query-form-delete-cube":e.sharepointProxyPrefix+"Rest/Queries/Cubes/{idCube}","favorites-handler":e.sharepointProxyPrefix+"RestServices/FavoritesHandler.ashx","file-handler":e.sharepointProxyPrefix+"RestServices/EntityHandler.ashx","login-handler":e.sharepointProxyPrefix+"RestServices/UserHandler.ashx?action=authenticateUser&userName={0}&password={1}&domain={2}","logoff-handler":e.sharepointProxyPrefix+"RestServices/UserHandler.ashx?action=logOff",overrides:e.sharepointProxyPrefix+"Rest/Util/Overrides","authorization-handler-getMenuAuthorization":e.sharepointProxyPrefix+"Rest/Authorization/MenuAuthorization","authorization-handler-isCaseCreationAuthorized":e.sharepointProxyPrefix+"Rest/Authorization/Processes/{0}/IsCaseCreationAuthorized","case-handler-getCaseSummary":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Summary","case-handler-getCaseSummaryByGuid":e.sharepointProxyPrefix+"Rest/Cases/{guid}/SummaryByGuid","case-handler-releaseActivity":e.proxyPrefix+"Rest/Cases/{idCase}/ReleaseActivity","case-handler-getCaseTasks":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Tasks","case-handler-getCaseEvents":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Events","case-handler-getCaseSubprocesses":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Subprocesses","case-handler-getTaskAssignees":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Tasks/{idTask}/AssigneesGuid","case-handler-getCaseAssignees":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Assignees","case-handler-getWorkItems":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/WorkItems","case-handler-getWorkItemsByGuid":e.sharepointProxyPrefix+"Rest/Cases/{guid}/WorkItemsByGuid","case-handler-getAsynchExecutionState":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/AsynchExecutionState","case-handler-addNewCase":e.sharepointProxyPrefix+"Rest/Cases","case-handler-startProcess":e.sharepointProxyPrefix+"Rest/Processes/StartProcess/{idProcess}","case-handler-getActivityLog":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/ActivityLog","case-handler-getActivityDetailLog":e.sharepointProxyPrefix+"Rest/Cases/{idWorkItemFrom}/ActivityDetailLog","case-handler-getEntityLog":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/EntityLog","case-handler-getEntityDetailLog":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/EntityDetailLog","case-handler-getUserLog":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/UserLog","case-handler-getUserDetailLog":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/UserDetailLog","case-handler-getCaseFormsRenderVersion":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/FormsRenderVersion","case-handler-getCaseFormsRenderVersionByGuid":e.sharepointProxyPrefix+"Rest/Cases/{guid}/FormsRenderVersionByGuid","offline-getProcessTree":e.proxyPrefix+"Rest/Processes/OfflineProcessTree","offline-getForms":e.proxyPrefix+"Rest/RenderForm/offlineForms","offline-sendForm":e.proxyPrefix+"Rest/Cases/SaveAsynchWorkItemOffLine","case-handler-getCasesList":e.proxyPrefix+"Rest/Processes/GetCases","favorites-handler-saveFavorite":e.sharepointProxyPrefix+"Rest/Favorites","favorites-handler-deleteFavorite":e.sharepointProxyPrefix+"Rest/Favorites/{guidFavorite}","bamAnalytics-handler-getAnalisysQueries":e.sharepointProxyPrefix+"Rest/BAMAnalytics/AnalisysQueries","bamAnalytics-handler-updateQuery":e.sharepointProxyPrefix+"Rest/BAMAnalytics/Reports/Ids/{idQuery}","inbox-handler-getInboxSummary":e.sharepointProxyPrefix+"Rest/Inbox/Summary","MessageHandler-NewComment":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Comments","MessageHandler-GetComments":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Comments","MessageHandler-SetCategoryToComment":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Comments/{idComment}","MessageHandler-RemoveComment":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Comments/{idComment}","MessageHandler-ReplyComment":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Comments/{idComment}/Replies","MessageHandler-RemoveReply":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Comments/{idComment}/Replies/{idReply}","MessageHandler-GetCategoryColors":e.sharepointProxyPrefix+"Rest/Cases/Comments/CategoryColors","MessageHandler-RenameCategoryColor":e.sharepointProxyPrefix+"Rest/Cases/Comments/CategoryColors/{idColorCategory}","MessageHandler-CountNewComments":e.sharepointProxyPrefix+"Rest/Cases/{idCase}/Comments/{idLastComment}","process-handler-getAllProcesses":e.sharepointProxyPrefix+"Rest/Processes","process-handler-getCustomizedColumnsData":e.sharepointProxyPrefix+"Rest/Processes/CustomizedColumnsData","process-handler-getCategory":e.sharepointProxyPrefix+"Rest/Processes/Categories","process-handler-getRecentProcesses":e.sharepointProxyPrefix+"Rest/Processes/RecentProcesses","process-handler-getCustomizedColumnsDataInfo":e.sharepointProxyPrefix+"Rest/Processes/CustomizedColumnsDataInfo","process-handler-getActivitiesData":e.sharepointProxyPrefix+"Rest/Processes/CasesData/MyActivities","process-handler-getPendingsData":e.proxyPrefix+"Rest/Processes/CasesData/MyPendings","query-handler-getqueries":e.sharepointProxyPrefix+"Rest/Queries","user-handler-getCurrentUser":e.sharepointProxyPrefix+"Rest/Users/CurrentUser","old-render":e.sharepointProxyPrefix+"App/ListaDetalle/Detalle.aspx",Reports:e.sharepointProxyPrefix+"RestServices/BAMAnalyticsHandler.ashx","reports-handler-deleteQueries":e.sharepointProxyPrefix+"Rest/BAMAnalytics/Reports/{QueryId}","folders-handler-getUserQueries":e.sharepointProxyPrefix+"Rest/SmartFolders","folders-associate-deleteSmartFolder":e.sharepointProxyPrefix+"Rest/SmartFolders/{idSmartFolder}","folders-handler":e.sharepointProxyPrefix+"RestServices/SmartFoldersHandler.ashx","folders-associate":e.sharepointProxyPrefix+"App/Ajax/AJAXGateway.aspx","smartfolders-integration":e.sharepointProxyPrefix+"App/WorkPortal/ConfigureFilteredFolder.aspx",AlarmAdmin:e.sharepointProxyPrefix+"App/Admin/AlarmsAdmin.aspx",AnalyticsProcess:e.sharepointProxyPrefix+"App/Cockpit/AnalyticsProcess.aspx",AnalyticsSensor:e.sharepointProxyPrefix+"App/Cockpit/AnalyticsSensor.aspx",AnalyticsTask:e.sharepointProxyPrefix+"App/Cockpit/AnalyticsTask.aspx",AsynchronousWorkitemRetries:e.sharepointProxyPrefix+"App/Admin/AsynchDisabledWorkitems.aspx",AuthenticationLogQuery:e.sharepointProxyPrefix+"App/Admin/AuthLogQuery.aspx",BAMProcess:e.sharepointProxyPrefix+"App/Cockpit/BAMProcess.aspx",BAMTask:e.sharepointProxyPrefix+"App/Cockpit/BAMTask.aspx",BusinessPolicies:e.sharepointProxyPrefix+"App/Admin/BusinessPolicies/BusinessPoliciesSelector.aspx",CaseAdmin:e.sharepointProxyPrefix+"App/Admin/CaseSearch.aspx",CasesMonitor:e.sharepointProxyPrefix+"App/Admin/CasesMonitor.aspx",Closed:e.sharepointProxyPrefix+"App/ListaDetalle/listaitems.aspx?h_Location=Cerrados&I_ProcessState=Completed",CurrentUser:e.sharepointProxyPrefix+"App/Admin/CurrentUser.aspx",EncryptionAdmin:e.sharepointProxyPrefix+"App/Admin/Encrypt.aspx",MobileUpdatesAdmin:e.sharepointProxyPrefix+"App/MobileUpdates/default.aspx",EntityAdmin:e.sharepointProxyPrefix+"App/Admin/Entity.aspx",LocationResources:e.sharepointProxyPrefix+"App/Admin/AdminLocResources.aspx",NewCase:e.sharepointProxyPrefix+"App/Radicar/application.aspx",Pending:e.sharepointProxyPrefix+"App/ListaDetalle/listaitems.aspx?h_Location=Pendientes&I_processState=Running",Profiles:e.sharepointProxyPrefix+"App/Admin/ProfilesAdminSearch.aspx",Search:e.sharepointProxyPrefix+"App/ListaDetalle/Search.aspx",UserAdmin:e.sharepointProxyPrefix+"App/Admin/ListUsers.aspx",UserDefaultAssignation:e.sharepointProxyPrefix+"App/Admin/DefaultAssignationUser.aspx?h_AdminDefaultAssign=1",UserPendingRequests:e.sharepointProxyPrefix+"App/Admin/UserPendingRequests.aspx",ListPreferences:e.sharepointProxyPrefix+"App/Admin/CurrentUser.aspx",GRDimensionAdmin:e.sharepointProxyPrefix+"App/Cockpit/DimensionEdit.aspx",Licenses:e.sharepointProxyPrefix+"App/Admin/Licenses.aspx",AnalysisQueries:e.sharepointProxyPrefix+"App/Inicio/WPAnalysisQuery.aspx",ProcessAdmin:e.sharepointProxyPrefix+"App/Admin/AdminProcess.aspx",ResourceBAM:e.sharepointProxyPrefix+"App/Cockpit/BAMResourceMonitor.aspx",WorkPortalVersion:e.sharepointProxyPrefix+"Rest/Util/Version","entities-administration":"RestServices/EntityHandler.ashx",getCurrentTheme:e.sharepointProxyPrefix+"Api/Theme/Current","process-handler-getFavourites":e.proxyPrefix+"Rest/Home/MyFavorites/Count","process-handler-getFavouriteCases":e.proxyPrefix+"Rest/Home/MyFavorites","stuff-handler-getUserStuff":e.sharepointProxyPrefix+"Rest/Stakeholder/Collections","stuff-handler-getUserStuff-v2":e.sharepointProxyPrefix+"Rest/Stakeholder/Collections/v2","templates-handler-getCollectionData":e.proxyPrefix+"Api/Collection/{idFact}/Data","templates-handler-getVirtualCollectionData":e.proxyPrefix+"Api/Collection/{guidVirtualCollection}/VirtualData","entities-handler-getMapping":e.sharepointProxyPrefix+"Rest/Entities/Mapping","entities-handler-getActions":e.sharepointProxyPrefix+"Rest/Entities/Actions","actions-handler-getDataForm":e.sharepointProxyPrefix+"Rest/Handlers/Render","actions-handler-hasStartForm":e.sharepointProxyPrefix+"Rest/Processes/HasStartForm","actions-handler-executeRule":e.sharepointProxyPrefix+"Rest/Action/Rule","process-handler-getUsersAndEvents":e.sharepointProxyPrefix+"Rest/Processes/CasesData/UsersAndEvents"}):{}},bizagi.workportal.services.sessionTimeOut=function(e,t){var r,i,a,o=null,s=null;function n(e){c(),e?s=setTimeout(function(){d()},e):(o=setTimeout(function(){t.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SESSION_TIMEOUT,closeVisible:!1,maximize:!1,closeOnEscape:!1,modalParameters:{title:bizagi.localization.getResource("workportal-sessiontimeout-warn-title"),width:600,height:310}}),c(),s=setTimeout(function(){d()},a)},i-a),bizagi.cookie("syncTimerTimeout",Date.now()))}function c(){o&&clearTimeout(o),s&&clearTimeout(s)}function d(){var e=bizagi.cookie("syncTimerTimeout");e?parseInt(e)+i>Date.now()?n(parseInt(e)+i-Date.now()):l():l()}function l(){t.publish("closeCurrentDialog"),t.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SESSION_TIMEOUT_EXPIRED,closeVisible:!1,maximize:!1,closeOnEscape:!1,modalParameters:{title:bizagi.localization.getResource("workportal-sessiontimeout-expired-title"),width:500,height:310}}),c(),$(document).data("auto-save","")}return i=60*bizagiConfig.sessionTimeout*1e3,a=27e3,(r=!!i)&&n(),{keepSessionOpen:function(t){var i,a;r&&(n(),t||(i={idUser:bizagi.currentUser.idUser,fromDate:Date.now(),toDate:Date.now()},a=$.Deferred(),$.when(e.getEffectiveDuration(i)).done(function(e){a.resolve(e)}),a.promise()))}}},bizagi.injector.register("sessionTimeOutService",["dataService","globalHandlersService",bizagi.workportal.services.sessionTimeOut]),$.Class.extend("bizagi.workportal.services.context",{},{init:function(e){this.context=e.context,this.endPoints=bizagi.workportal.services.getEndPoints(e),this.proxyPrefix=bizagi.util.isEmpty(e.proxyPrefix)?"":e.proxyPrefix},getUrl:function(e){return null==this.endPoints[e]&&bizagi.log("Url not found","No endpoint defined for: "+e),this.endPoints[e]}}),$.Class.extend("bizagi.workportal.services.service",{BA_CONTEXT_PARAMETER_PREFIX:"h_",ENTITIES_QUERY_PAGE_SIZE:10},{init:function(e){(e="object"==typeof e?e:{}).context=bizagi.util.isEmpty(e.context)?"workportal":e.context,e.proxyPrefix=bizagi.util.isEmpty(e.proxyPrefix)?"":e.proxyPrefix,e.proxyPrefix=this.normalizeUrl(e.proxyPrefix),bizagi.RPproxyPrefix=e.proxyPrefix,e.sharepointProxyPrefix=bizagi.util.isEmpty(e.sharepointProxyPrefix)?"":e.sharepointProxyPrefix,e.sharepointProxyPrefix=this.normalizeUrl(e.sharepointProxyPrefix),this.serviceLocator=new bizagi.workportal.services.context(e),this.multiactionService=new bizagi.workportal.services.multiactionservice(this),this.pageSize=10,"undefined"!=typeof BIZAGI_INBOX_ROWS_PER_PAGE&&(this.pageSize=$.isNumeric(BIZAGI_INBOX_ROWS_PER_PAGE)?BIZAGI_INBOX_ROWS_PER_PAGE:this.pageSize),bizagi.injector.registerInstance("dataService",this)},multiaction:function(){return this.multiactionService},getUrl:function(e){return this.serviceLocator.getUrl(e.endPoint)},normalizeUrl:function(e){return""!=e&&("/"!=e[e.length-1]&&(e=e.concat("/")),-1==e.indexOf("http://")&&-1==e.indexOf("https://")&&(e="http://"+e)),e},getCurrentTheme:function(){var e=this.serviceLocator.getUrl("getCurrentTheme");return $.read(e)},getOverrides:function(){return $.ajax({url:this.serviceLocator.getUrl("overrides")}).pipe(function(e){return e=e||{},$.each(e,function(t,r){var i=r.toUpperCase();"TRUE"!=i&&"FALSE"!=i||(e[t]=bizagi.util.parseBoolean(r))}),e})},authenticatedUser:function(e){var t=this,r=t.serviceLocator.getUrl("login-handler");return $.read({url:r,data:{userName:BIZAGI_USER,password:BIZAGI_PASSWORD,domain:BIZAGI_DOMAIN}}).pipe(function(e){return e},function(e){return r=(r=(r=(r=t.serviceLocator.getUrl("login-handlerv10")).replace("{0}",BIZAGI_USER||"")).replace("{1}",BIZAGI_PASSWORD||"")).replace("{2}",BIZAGI_DOMAIN||""),$.ajax({url:r,type:"GET",dataType:"json"})})},logoutUser:function(e){var t=this.serviceLocator.getUrl("logoff-handlerv1");return $.read({url:t})},logOffUser:function(e){var t=this.serviceLocator.getUrl("logoff-handler");return $.read({url:t})},getCurrentUser:function(e){return $.read(this.serviceLocator.getUrl("user-handler-getCurrentUser"))},getInboxSummary:function(e){return $.read(this.serviceLocator.getUrl("inbox-handler-getInboxSummary")).pipe(function(e){return e.inboxSummary})},getAllProcesses:function(e){e=e||{};var t={},r=this.serviceLocator.getUrl("process-handler-getAllProcesses");return null!=e.taskState&&(t.taskState=e.taskState),null!=e.onlyFavorites&&""!=e.onlyFavorites&&(t.onlyFavorites=e.onlyFavorites),null!=e.myActivities&&""!=e.myActivities&&(t.myActivities=e.myActivities),null!=e.myPendings&&""!=e.myPendings&&(t.myPendings=e.myPendings),e.smartfoldersParameters&&(r=r+"?"+e.smartfoldersParameters),bizagi.isMobile()&&(t.mobileDevice=!0),$.read(r,t).pipe(function(t){if(e.skipAggrupate)return t;var r={},i={},a=bizagi.localization.getResource("workportal-widget-inbox-all-processes"),o={name:bizagi.localization.getResource("workportal-widget-inbox-all-cases"),path:"",category:a,isFavorite:e.onlyFavorites||!1,guidFavorite:"",idworkflow:"",guidWFClass:"",count:0};for(key in i[a]=[],i[a].workflows=[],i[a].workflows.push(o),t.workflows&&$.each(t.workflows.workflow,function(e,t){i[t.category]||(i[t.category]=[],i[t.category].workflows=[]),i[t.category].workflows.push(t),o.count+=Number(t.count)}),r.categories=[],i)r.categories.push({name:key,workflows:i[key].workflows});return r})},getProcessIcon:function(e){var t={processId:e.processId};return $.read({url:this.serviceLocator.getUrl("process-getIcon"),data:t,batchRequest:!0})},getCollectionIcon:function(e){var t={collectionId:e.collectionId};return $.read({url:this.serviceLocator.getUrl("collections-getIcon"),data:t,batchRequest:!0})},getFavourites:function(){var e=this.serviceLocator.getUrl("process-handler-getFavourites");return $.read(e,{}).pipe(function(e){return e})},getMyStuff:function(){var e=this.serviceLocator.getUrl("process-handler-getMyStuff");return $.read(e,{}).pipe(function(e){return e})},getFavouriteCases:function(e){var t={},r=this.serviceLocator.getUrl("process-handler-getFavouriteCases");return e=e||{},t.pageSize=e.pageSize||this.pageSize,t.page=e.page||1,bizagi.isMobile()&&(t.mobileDevice=!0),$.read(r,t).pipe(function(e){return e})},getActions:function(e){e=e||{};var t={},r=this.serviceLocator.getUrl("process-handler-getActions");return bizagi.isMobile()&&(t.mobileDevice=!0),$.read(r,t).pipe(function(e){return e})},getCasesList:function(e){e=e||{};var t={},r=this.serviceLocator.getUrl("case-handler-getCasesList");return t.pageSize=e.pageSize||10,t.page=e.page||1,t.numberOfFields=e.numberOfFields||"-1",t.idWfClass=e.idWfClass||"-1",$.read(r,t).pipe(function(e){for(var t={overdue:[],today:[],tomorrow:[],upcoming:[],page:e.page,totalPages:e.totalPages},r=new Date,i=r.getMonth(),a=r.getDate(),o=r.getYear(),s=0;e.elements.length>s;s++){var n=e.elements[s],c=new Date(n[3]),d=c.getDate(),l=c.getMonth(),u=c.getYear();a>d||i>l&&o>=u?(n[3]=bizagi.util.dateFormatter.formatDate(new Date(n[3]),"dd MMM"),t.overdue.push(n)):a==d?(n[3]=bizagi.util.dateFormatter.formatDate(new Date(n[3]),"hh:mm"),t.today.push(n)):a+1==d?(n[3]=bizagi.util.dateFormatter.formatDate(new Date(n[3]),"hh:mm"),t.tomorrow.push(n)):(n[3]=bizagi.util.dateFormatter.formatDate(new Date(n[3]),"dd MMM"),t.upcoming.push(n))}return t})},getAllAdministrableEntities:function(e){e=e||{};var t={action:"entitiesList",kind:"administrable"};return $.ajax({url:this.serviceLocator.getUrl("entities-administration"),data:t,type:"POST",dataType:"json"}).pipe(function(e){var t={entities:[]};return $.each(e,function(e,r){t.entities.push(r)}),t})},getEntitiesList:function(e){return(e=e||{}).action="entitiesList",e.kind="entitiesData",$.ajax({url:this.serviceLocator.getUrl("entities-administration"),data:e,type:"POST",dataType:"json"})},getCasesByWorkflow:function(e){e=e||{};var t={},r=this.serviceLocator.getUrl("process-handler-getCustomizedColumnsDataInfo");if(bizagi.util.isEmpty(e.taskState)||(t.taskState=e.taskState),bizagi.util.isEmpty(e.idWorkflow)||(t.idWorkflow=e.idWorkflow),1==e.onlyFavorites&&(t.onlyFavorites=!0,t.taskState="all"),t.pageSize=e.pageSize||this.pageSize,t.page=e.page||1,bizagi.isMobile()&&(t.mobileDevice=!0),e.smartfoldersParameters){var i=e.smartfoldersParameters.split("&");$.each(i,function(e,r){var i=r.split("=");t[i[0]]=i[1]})}return $.read(r,t).pipe(function(e){return $.each(e.cases.rows,function(t,r){var i=[];e.cases.rows[t].radnumber=r.id,$.each(r.fields,function(r,a){if(null!=a)try{null!=a.isRadNumber&&"true"==a.isRadNumber?e.cases.rows[t].radnumber=a.Value:null!=a.workitems?e.cases.rows[t].workitems=a.workitems:i.push(a)}catch(e){}}),e.cases.rows[t].fields=i}),e.cases})},getOrganizationsList:function(){var e=this.serviceLocator.getUrl("process-handler-getOrganizations"),t={type:12,name:""};return $.read(e,t)},getOrganizationsByUserList:function(){var e=this.serviceLocator.getUrl("process-handler-getOrganizationsByUser"),t={type:12,name:""};return $.read(e,t)},getCustomizedColumnsData:function(e){e=e||{};var t={},r=this.serviceLocator.getUrl("process-handler-getCustomizedColumnsData");t.pageSize=e.pageSize||this.pageSize,t.pageSize=t.pageSize<1?10:t.pageSize,t.page=e.page||1,t.orderFieldName=e.orderFieldName||"",t.orderType=e.orderType||"0",t.order=e.order||"",bizagi.isMobile()&&(t.mobileDevice=!0),e.taskState=e.taskState||"all";var i=e.taskState.toString().toLowerCase();if(""==i&&(e.taskState="all"),"red"==i&&(e.taskState="Red"),"yellow"==i&&(e.taskState="Yellow"),"green"==i&&(e.taskState="Green"),t.taskState=e.taskState,bizagi.util.isEmpty(e.idWorkflow)||(t.idWorkflow=e.idWorkflow),bizagi.util.isEmpty(e.idTask)||(t.idTask=e.idTask),bizagi.util.isEmpty(e.radNumber)||(t.radNumber=e.radNumber),1==e.onlyFavorites&&(t.onlyFavorites=!0,t.taskState="all"),e.smartfoldersParameters){var a=e.smartfoldersParameters.split("&");$.each(a,function(e,r){var i=r.split("=");t[i[0]]=i[1]})}return e.group&&(t.group=e.group),$.read(r,t)},getCategories:function(e){var t={};return(e=e||{}).idCategory&&(t.idCategory=e.idCategory),e.idApp&&(t.idApp=e.idApp),bizagi.isMobile()&&(t.mobileDevice=!0),t.groupByApp=e.groupByApp||!1,$.read(this.serviceLocator.getUrl("process-handler-getCategory"),t)},getRecentProcesses:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("process-handler-getRecentProcesses"),e)},getCaseSummary:function(e){return void 0!==(e=e||{}).idCase?$.read({url:this.serviceLocator.getUrl("case-handler-getCaseSummary"),data:{idCase:e.idCase,eventAsTasks:e.eventAsTasks||"false",onlyUserWorkItems:e.onlyUserWorkItems||"true",mobileDevice:bizagi.isMobile()||"false"},serviceType:"GETSUMMARY"}).pipe(function(e){return e.isAborted&&(e.isAborted=bizagi.util.parseBoolean(e.isAborted)),e}):void 0!==e.guid?$.read({url:this.serviceLocator.getUrl("case-handler-getCaseSummaryByGuid"),data:{guid:e.guid,eventAsTasks:e.eventAsTasks||"false",onlyUserWorkItems:e.onlyUserWorkItems||"true",mobileDevice:bizagi.isMobile()||"false"},serviceType:"GETSUMMARY"}).pipe(function(e){return e}):void 0},getCaseAssignees:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getCaseAssignees"),{idCase:e.idCase}).pipe(function(e){return e})},getCaseTasks:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getCaseTasks"),{idCase:e.idCase})},getCaseEvents:function(e){return e=e||{},$.read({url:this.serviceLocator.getUrl("case-handler-getCaseEvents"),data:{idCase:e.idCase},serviceType:"GETEVENTS"}).pipe(function(e){return e})},getCaseSubprocesses:function(e){return e=e||{},$.read({url:this.serviceLocator.getUrl("case-handler-getCaseSubprocesses"),data:{idCase:e.idCase},serviceType:"GETSUBPROCESSES"}).pipe(function(e){return e})},getCaseFormsRenderVersion:function(e){return void 0!==(e=e||{}).guid?$.read(this.serviceLocator.getUrl("case-handler-getCaseFormsRenderVersionByGuid"),{guid:e.guid}):$.read(this.serviceLocator.getUrl("case-handler-getCaseFormsRenderVersion"),{idCase:e.idCase})},getCaseFormsRenderVersionDataContent:function(e){var t=new $.Deferred;return $.when(this.getCaseFormsRenderVersion(e)).done(function(e){t.resolve(e)}),t.promise()},getTaskAssignees:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getTaskAssignees"),{idCase:e.idCase,idTask:e.idTask})},getWorkitems:function(e){var t={};void 0!==(e=e||{}).guid&&(t.guid=e.guid),t.idCase=e.idCase,"0"!=e.fromTask&&(t.fromTask=e.fromTask),""!=e.fromWorkItemId&&(t.fromWorkItemId=e.fromWorkItemId),t.mobileDevice=bizagi.isMobile(),e.eventAsTasks&&(t.eventAsTasks=e.eventAsTasks),void 0!==e.onlyUserWorkItems&&(t.onlyUserWorkItems=e.onlyUserWorkItems);var r=this.serviceLocator.getUrl("case-handler-getWorkItems");return void 0!==e.guid&&void 0===e.idCase&&(r=this.serviceLocator.getUrl("case-handler-getWorkItemsByGuid").replace("{guid}",e.guid)),$.read({url:r,data:t,serviceType:"GETWORKITEMS"})},getQueriesDefinitions:function(e){var t=this;if(t.hashQueriesDef&&e.idNode){if(bizagi.override.enableQueriesClassicMenu)return t.hashQueriesDef[e.idNode];if(-1==e.idNode||1!=t.hashQueriesDef[e.idNode].length||"00000000-0000-0000-0000-000000000000"!=t.hashQueriesDef[e.idNode][0].guidForm||t.hashQueriesDef[e.idNode][0].notMigratedUrl){if(-1!=e.idNode&&t.hashQueriesDef[e.idNode].length>1){var r=[];return $.each(t.hashQueriesDef[e.idNode],function(e,i){if(i.nodes.length>0){var a=t.getQueriesDefinitions({idNode:i.idNode});$.merge(r,a)}else r.push(i)}),r}return t.hashQueriesDef[e.idNode]}return t.getQueriesDefinitions({idNode:t.hashQueriesDef[e.idNode][0].idNode})}var i=new $.Deferred;return $.read(t.serviceLocator.getUrl("query-handler-getqueries-definitions")).done(function(e){t.hashQueriesDef={},t.hashQueriesDef[0]={},t.processQueriesDefinitions("-1",e.query),i.resolve(t.hashQueriesDef[-1])}),i.promise()},processQueriesDefinitions:function(e,t){var r=this;$.each(t,function(t,i){r.hashQueriesDef[e]||(r.hashQueriesDef[e]=[]),r.hashQueriesDef[e].push(i),i.nodes?r.processQueriesDefinitions(i.idNode,i.nodes):i.nodes={}})},getQueries:function(e){var t=this;if(t.hashQueries&&e.idElement)return t.hashQueries[e.idElement];var r=new $.Deferred;return $.read(t.serviceLocator.getUrl("query-handler-getqueries")).done(function(e){t.hashQueries={},t.hashQueries[0]={},t.processQueries(e.query),r.resolve(t.hashQueries[-1])}),r.promise()},processQueries:function(e){var t=this;$.each(e,function(e,r){t.hashQueries[r.idParent]||(t.hashQueries[r.idParent]=[]),t.hashQueries[r.idParent].push(r),r.nodes?t.processQueries(r.nodes):r.nodes={}})},createNewCase:function(e){var t={};return(e=e||{}).caseData&&(e.caseData=JSON.stringify(e.caseData)),e.idWfClass&&(t.idWfClass=e.idWfClass),e.idOrganization&&(t.idOrganization=e.idOrganization),$.create({url:this.serviceLocator.getUrl("case-handler-addNewCase"),data:t,serviceType:"NEWCASE"})},startProcess:function(e){var t;e=e||{},t=this.serviceLocator.getUrl("case-handler-startProcess");var r={};return e.idProcess&&(r.idProcess=e.idProcess),e.entityMapping&&(r.entityMapping=e.entityMapping),e.isAdhocProcess&&(r.isAdhocProcess=e.isAdhocProcess),e.idOrganization&&(r.idOrganization=e.idOrganization),$.create({url:t,data:r,serviceType:"STARTPROCESS"})},searchCases:function(e){e=e||{};var t={h_action:"SEARCHCASES",onlyUserCases:!1,active:!1};return t.page=e.page||1,e.radNumber&&(t.radNumber=$.trim(e.radNumber)),t.pageSize=e.pageSize||this.pageSize,$.ajax({url:this.serviceLocator.getUrl("query-handler"),data:t,type:"POST",dataType:"json"})},queryCases:function(e){e=e||{};var t={h_action:"QUERYCASES"};return t.onlyUserCases=e.onlyUserCases||!1,t.active=e.active&&!0,t.page=e.page||1,e.radNumber&&(t.radNumber=$.trim(e.radNumber)),t.pageSize=e.pageSize||this.pageSize,t.filter=e.filter,t.outputxpath=e.outputxpath,t.orderFieldName=e.orderFieldName||"",t.orderType="asc"==e.orderType||1==e.orderType?1:0,t.order=e.order||"",$.ajax({url:this.serviceLocator.getUrl("query-handler"),data:t,type:"POST",dataType:"json"})},queryEntities:function(e){e=e||{};var t={h_action:"QUERYENTITIES"};return t.page=e.page||1,t.pageSize=this.Class.ENTITIES_QUERY_PAGE_SIZE,t[this.Class.BA_CONTEXT_PARAMETER_PREFIX+"idEnt"]=e.idEntity,t.filter=e.filter,t.outputxpath=e.outputxpath,t.orderFieldName=e.orderFieldName||"",t.orderType=e.orderType||"",t.order=e.order||"",$.ajax({url:this.serviceLocator.getUrl("query-handler"),data:t,type:"POST",dataType:"json"})},getMenuAuthorization:function(){return $.read(this.serviceLocator.getUrl("authorization-handler-getMenuAuthorization"))},isCaseCreationAuthorized:function(e){var t=this.serviceLocator.getUrl("authorization-handler-isCaseCreationAuthorized");return t=t.replace("{0}",e.idWfClass||""),$.read({url:t})},getAsynchExecutionState:function(e){return(e=e||{}).idCase,$.read({url:this.serviceLocator.getUrl("case-handler-getAsynchExecutionState"),data:{idCase:e.idCase,idAsynchWorkitem:e.idAsynchWorkitem},serviceType:"ASYNCHEXECUTION"})},supportedLogTypes:function(){return $.read(this.serviceLocator.getUrl("case-handler-supportedLogTypes"))},getActivityLog:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getActivityLog"),{idCase:e.idCase,orden:e.sort||0,idActualPage:e.idActualPage||1,pageSize:e.pageSize||10}).pipe(function(e){var t=0;e.rows&&e.rows.length&&(t=e.rows.length);for(var r,i=0;i<t;i++)r=new Date(e.rows[i][4]),e.rows[i][4]="Invalid Date"==r?e.rows[i][4]:bizagi.util.dateFormatter.formatDate(r,bizagi.localization.getResource("dateFormat")+" "+bizagi.localization.getResource("timeFormat"));return e})},getActivityDetailLog:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getActivityDetailLog"),{idCase:e.idCase,idWorkItemFrom:e.idWorkItemFrom,idActualPage:e.idActualPage||1,pageSize:e.pageSize||10}).pipe(function(e){return e})},getEntityLog:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getEntityLog"),{idCase:e.idCase,orden:e.sort||0,idActualPage:e.idActualPage||1,pageSize:e.pageSize||10}).pipe(function(e){return e})},getEntityDetailLog:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getEntityDetailLog"),{idCase:e.idCase,idEntity:e.idEntity||-1,userFullName:e.userFullName||"",attribDisplayName:e.attribDisplayName||"",idActualPage:e.idActualPage||1,pageSize:e.pageSize||10}).pipe(function(e){return e})},getUserLog:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getUserLog"),{idCase:e.idCase,orden:e.sort||0,idActualPage:e.idActualPage||1,pageSize:e.pageSize||10}).pipe(function(e){return e})},getUserDetailLog:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getUserDetailLog"),{idCase:e.idCase,idUser:e.idUser,entDisplayName:e.entDisplayName||"",attribDisplayName:e.attribDisplayName||"",idActualPage:e.idActualPage||1,pageSize:e.pageSize||10}).pipe(function(e){return e})},getAdminLog:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getAdminLog"),{idCase:e.idCase,orden:e.sort||0,idActualPage:e.idActualPage||1,pageSize:e.pageSize||10}).pipe(function(e){return e})},addFavorite:function(e){return e=e||{},$.create(this.serviceLocator.getUrl("favorites-handler-saveFavorite"),{idObject:e.idObject,favoriteType:e.favoriteType}).pipe(function(e){return e})},delFavorite:function(e){return e=e||{},$.destroy(this.serviceLocator.getUrl("favorites-handler-deleteFavorite"),{guidFavorite:e.idObject}).pipe(function(e){return e})},summaryAssigness:function(e){var t=new $.Deferred,r={idCase:e.idCase||""},i=e.preview?this.getCaseAssigneesPreview(r):this.getCaseAssignees(r);return $.when(i).done(function(e){for(var r=e.assignees||[],i=r.length,a={showAssignees:!!(bizagi.override.showAssignees&&r.length>0),assignees:{},events:"",activities:""},o="",s="",n=[],c=[],d=0;d<i;d++)bizagi.util.parseBoolean(r[d].isEvent)?-1==n.indexOf(r[d].idUser)&&(n.push(r[d].idUser),o+=r[d].Name+", "):-1==c.indexOf(r[d].idUser)&&(c.push(r[d].idUser),s+=r[d].Name+", ");a.events=o.substring(0,o.length-2),a.activities=s.substring(0,s.length-2),t.resolve(a)}),t.promise()},summarySubProcess:function(e){var t=$.Deferred(),r=e.idCase||"";return $.when(this.getCaseSubprocesses({idCase:r})).done(function(e){if(e.showSubProcess=e.subProcesses.length>=1,e.showSubProcesColumns=void 0!==e.CustFields[0]&&e.CustFields[0][0].length>=1,e.showSubProcesColumns){var r;e.subProcPersonalized={};for(var i=0;i<e.CustFields.length;i++){r=0;for(var a=0;a<e.subProcesses.length;a++)e.subProcesses[a].idCustData==i&&(e.subProcPersonalized[i]=e.subProcPersonalized[i]||{},e.subProcPersonalized[i].subProcesses=e.subProcPersonalized[i].subProcesses||{},e.subProcPersonalized[i].subProcesses[r++]=e.subProcesses[a]);-1!=e.subProcesses[i].idCustData&&null!=e.subProcPersonalized[i]&&(e.subProcPersonalized[i].CustFields={0:e.CustFields[i][i]},e.subProcPersonalized[i].idCase=e.idCase)}}t.resolve(e)}),t.promise()},summaryCaseEvents:function(e){var t=$.Deferred(),r=e.idCase||"";return $.when(this.getCaseEvents({idCase:r})).done(function(e){e.showEvents=e.events.length>=1,t.resolve(e)}),t.promise()},summaryCaseDetails:function(e){var t=new $.Deferred,r=e.idWorkitem||0;return $.when(this.getCaseSummaryDataContent(e)).done(function(e){e.currentState=e.currentState||[];var a=e.currentState.length;for(e.showEvents=e.countEvents>=1,e.showParentProcess=e.idParentCase>=1,e.parentProcess={displayName:e.parentDisplayName,idCase:e.idParentCase},e.isClosedForAllUsers=bizagi.util.parseBoolean(e.isClosed),e.isClosed=!bizagi.util.parseBoolean(e.isOpen),e.showAssignees=!!(bizagi.override.showAssignees&&e.countAssigness>0),e.showSubProcess=e.countSubProcesses>0,e.showForm=!!bizagi.util.parseBoolean(e.hasGlobalForm),e.allowsReassign="false",i=0;i<a;i++)e.currentState[i].idWorkItem==r&&(e.allowsReassign=e.currentState[i].allowsReassign);var o=[],s=0;for(i=0;i<a;i++)!bizagi.util.parseBoolean(e.currentState[i].isEvent)&&bizagi.util.parseBoolean(e.currentState[i].assignToCurrentUser)&&e.currentState[i].idWorkItem!=r&&(o[s++]=e.currentState[i]);e.currentStateTypes=o,e.showActivities=o.length>0,t.resolve(e)}).fail(function(e){t.reject(e)}),t.promise()},releaseActivity:function(e){var t=this.serviceLocator.getUrl("case-handler-releaseActivity");t=t.replace("{idCase}",e.idCase);var r={};return e&&(r.idCase=e.idCase,r.idWorkItem=e.idWorkItem),$.ajax({url:t,data:r,type:"POST",dataType:"json"})},takeOwnershipActivity:function(e){var t=this.serviceLocator.getUrl("case-handler-takeOwnershipActivity"),r={};return e&&(r.idCase=e.idCase,r.idWorkItem=e.idWorkItem),$.ajax({url:t,data:r,type:"POST",dataType:"json"})},summaryActivities:function(e){var t={},r=e.data||{},i=i||e.idWorkitem||0;try{t.showActivities=r.currentStateTypes.length>=1,t.currentState=r.currentStateTypes,t.globalIdWorkitem=i,t.creationDate=r.creationDate}catch(e){}return t},getCaseSummaryDataContent:function(e){var t=this,r=new $.Deferred;return $.when(t.getCaseSummary(e)).done(function(e){e.taskState=t.icoTaskState,e.createdBy&&(e.createdByName=e.createdBy.Name,e.createdByUserName=e.createdBy.userName,e.caseDescription=""==e.caseDescription?"":e.caseDescription,e.processPath=e.processPath.replace(/\//g," > ")+e.process,e.showWorkOnIt=!0),r.resolve(e)}).fail(function(e){r.reject(e)}),r.promise()},getSmartFolders:function(e){var t=this,r={};return r.idFolder=e||"",$.read(t.serviceLocator.getUrl("folders-handler-getUserQueries"),r).pipe(function(r){return-1==e||""==e?r:t.searchFolders(e,r)||[]})},deleteSmartFolder:function(e){var t={action:"6"};return e=e||{},t.idSmartFolder=e.idSmartFolder||"",t.idUser=e.idUser||"",$.destroy(this.serviceLocator.getUrl("folders-associate-deleteSmartFolder"),t)},getFolders:function(e){var t=this,r={action:"getUserFolder"};return r.idFolder=e||"",$.ajax({url:t.serviceLocator.getUrl("folders-handler"),type:"POST",data:r,dataType:"json"}).pipe(function(r){return""==e?{folders:[{name:bizagi.localization.getResource("workportal-widget-folders"),id:"-1",idParent:0,childs:r}]}:-1==e?r:t.searchFolders(e,r)||[]})},searchFolders:function(e,t){for(var r=0;r<t.folders.length;r++){if(t.folders[r].id==e)return t.folders[r].childs}},getCasesByFolder:function(e){return e=e||"",$.ajax({cache:!0,url:"RestServices/"+e,type:"GET",dataType:"json"})},makeFolder:function(e){var t={action:"CreateUpdateFolder"};return t.folderName=e.folderName||"No Name",null!=e.idParentFolder&&e.idParentFolder>1&&(t.idParentFolder=e.idParentFolder),$.ajax({url:this.serviceLocator.getUrl("folders-handler"),data:t,type:"POST",dataType:"json"})},updateFolder:function(e){var t={};return e=e||{},t.action="CreateUpdateFolder",t.idFolder=e.idFolder||"",e.folderName&&(t.folderName=e.folderName),e.idParentFolder&&(t.idParentFolder=e.idParentFolder),$.ajax({url:this.serviceLocator.getUrl("folders-handler"),data:t,type:"POST",dataType:"json"})},associateCaseToFolder:function(e){var t={action:"4"};return e=e||{},t.idCase=e.idCase||"",t.idCustomFolder=e.idCustomFolder,$.ajax({url:this.serviceLocator.getUrl("folders-associate"),data:t,type:"POST",dataType:"json"})},dissasociateCaseFromFolder:function(e){var t={action:"DeleteCaseFromFolder"};return e=e||{},t.idFolder=e.idFolder,t.idCase=e.idCase,$.ajax({url:this.serviceLocator.getUrl("folders-handler"),data:t,type:"POST",dataType:"json"})},deleteFolder:function(e){var t={action:"5"};return e=e||{},t.idCustomFolder=e.idCustomFolder||"",$.ajax({url:this.serviceLocator.getUrl("folders-associate"),data:t,type:"POST",dataType:"json"})},getFile:function(e){var t={},r=this.serviceLocator.getUrl("file-handler");return e=e||{},t.action="getFileContent",t.uploadId=e.uploadId||"",t.entityId=e.entityId||"",t.entityKey=e.entityKey||"",bizagi.services.ajax.pathToBase+r+"?"+jQuery.param(t)},getComments:function(e){var t=this;return e=e||{},$.read(encodeURI(t.serviceLocator.getUrl("MessageHandler-GetComments")),{idCase:e.idCase||"",idColorCategory:"number"==typeof e.idColorCategory?e.idColorCategory:"",pag:e.pag||1,pagSize:e.pagSize||10}).pipe(function(e){var r=new $.Deferred,i="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";return e.comments?$.each(e.comments,function(t,r){e.comments[t].hasOwnProperty("CategoryColor")||(e.comments[t].CategoryColor="")}):e.comments=[],e.users?$.each(e.users,function(t,r){e.users[t].Picture=""===e.users[t].Picture?i:e.users[t].Picture}):$.when(t.getCurrentUser()).done(function(t){e.users=[],e.users.push({Id:t.idUser,Name:t.user,DisplayName:t.userName,Picture:i})}),r.resolve(e),r.promise()})},makeNewComment:function(e){return $.create(this.serviceLocator.getUrl("MessageHandler-NewComment"),{idCase:e.idCase||"",comment:e.comment.replace(/\n/g,"<br>")||""}).pipe(function(e){if(e.comments){var t=[e.comments];$.each(t,function(e,r){t[e].CategoryColor=""}),e.comments=t}if(e.users){var r=[e.users];$.each(r,function(e,t){r[e].Picture=""==r[e].Picture?"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":r[e].Picture}),e.users=r}return e})},makeNewReply:function(e){return e=e||{},$.create(this.serviceLocator.getUrl("MessageHandler-ReplyComment"),{idCase:e.idCase||"",idComment:e.idComment||"",comment:e.comment.replace(/\n/g,"<br>")||""}).pipe(function(e){if(e.comments&&(e.Replies=[e.comments]),e.users){var t=[e.users];$.each(t,function(e,r){t[e].Picture=""==t[e].Picture?"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":t[e].Picture}),e.users=t}return e})},removeComment:function(e){return e=e||{},$.destroy(this.serviceLocator.getUrl("MessageHandler-RemoveComment"),{idCase:e.idCase||"",idComment:e.idComment||""})},removeReply:function(e){return e=e||{},$.destroy(this.serviceLocator.getUrl("MessageHandler-RemoveReply"),{idCase:e.idCase||"",idComment:e.idComment||"",idReply:e.idReply||""})},renameCommentCategory:function(e){return e=e||{},$.update(this.serviceLocator.getUrl("MessageHandler-RenameCategoryColor"),{idColorCategory:e.idColorCategory>=0?e.idColorCategory:"",colorName:e.colorName||""})},setCommentCategory:function(e){return e=e||{},$.update(this.serviceLocator.getUrl("MessageHandler-SetCategoryToComment"),{idCase:e.idCase||"",idComment:e.idComment||"",idColorCategory:"number"==typeof e.idColorCategory?e.idColorCategory:""})},getCommentsCategories:function(){return $.read(this.serviceLocator.getUrl("MessageHandler-GetCategoryColors")).pipe(function(e){return e.length>1&&e[0].categories?e[0]:e})},getNewComments:function(e){var t={idCase:(e=e||{}).idCase||0,idComment:e.idComment||0};return $.read(this.serviceLocator.getUrl("MessageHandler-CountNewComments"),t)},getAnalisysQueries:function(){return $.read(this.serviceLocator.getUrl("bamAnalytics-handler-getAnalisysQueries"))},updateQueries:function(e){return $.update(this.serviceLocator.getUrl("bamAnalytics-handler-updateQuery"),{idQuery:e.idQuery>=0?e.idQuery:"",queryName:e.queryName||"",queryDescription:e.queryDescription||""})},deleteQueries:function(e){var t={action:"1612"};return t.QueryId=e||"",$.destroy(this.serviceLocator.getUrl("reports-handler-deleteQueries"),t)},getConfiguration:function(){var e=this.serviceLocator.getUrl("authenticationConfig");return $.read(e)},logout:function(e){var t=this,r={sourceLogout:"user"};sessionStorage.removeItem("bizagiAuthentication");try{$.when(t.getConfiguration()).done(function(i){if(i.redirectErrorPage)window.location.href=i.redirectErrorPage;else{var a=i.authenticationType,o=i.authenticationSubType;switch(a){case"Federate":var s=i.logOffURL,n=i.federationLogoutBindingProtocol;if("WSFederated"===o)$.when($.create(t.serviceLocator.getUrl("logout"),r)).done(function(){e&&""!=e&&(s=s.replace(/wreply=[^&]*/,"wreply="+e)),location.href=s}).fail(function(){bizagi.log("Error logging out")}).always(function(){location.href=i.logOffURL});else if("Saml"===o){$.when($.read(t.serviceLocator.getUrl("FederateLogoffUrl"),{})).done(function(e){e.federateLogoffUrl&&(s=e.federateLogoffUrl),$.when($.create(t.serviceLocator.getUrl("logout"),r)).done(function(){"POST"===n?(window.document.open("text/html"),window.document.write(s),window.document.close()):window.location.href=s}).fail(function(){bizagi.log("Error logging out")}).always(function(){})}).fail(function(){bizagi.log("Error logging out")}).always(function(){})}break;case"SAML":loader.nativeAjax(loader.getPathUrl(t.serviceLocator.getUrl("logout"),r),function(e){var t=JSON.parse(e.responseText);if(!0===t.logout)if(void 0!==t.samlUrlRedirect){var r=decodeURI(t.samlUrlRedirect),i=document.createElement("iframe");document.getElementsByTagName("body")[0].appendChild(i),$(i).on("load",function(){(bizagi.util.isIE8()?$(this.contentWindow.document.body):$(this.contentWindow.eval("document.body"))).text();location.reload()}),i.src=r}else location.reload();else bizagi.log("Error logging out")});break;case"OAuth2":$.when($.create(t.serviceLocator.getUrl("logout"),r)).done(function(r){$.when($.read(t.serviceLocator.getUrl("oauth2AuthenticationConfig"))).done(function(t){if(t.logoutUrl&&""!=t.logoutUrl){var i=t.logoutUrl;e&&(e.endsWith("/")||(e+="/"),i=i.replace(/post_logout_redirect_uri=[^&]*/,"post_logout_redirect_uri="+e)),r.invalidateAccessToken&&(i=i.replace(/invalidateAccessToken=[^&]*/,"invalidateAccessToken="+r.invalidateAccessToken)),r.idTokenHint&&i.indexOf("id_token_hint")>=0&&(i+=r.idTokenHint),location.href=i}else location.reload()}).fail(function(){bizagi.log("Error logging out")})}).fail(function(){bizagi.log("Error logging out")});break;default:$.when($.create(t.serviceLocator.getUrl("logout"),r)).done(function(){e?location.href=e:window.location=bizagi.services.ajax.loginPage}).fail(function(){bizagi.log("Error logging out")})}}}).fail(function(e){console.log(e)})}catch(e){console.log(e)}},logoutMobile:function(){sessionStorage.removeItem("bizagiAuthentication");var e=this.serviceLocator.getUrl("logout");return $.read(e)},logoutBeforeUnload:function(){sessionStorage.removeItem("bizagiAuthentication"),$.ajax({type:"POST",async:!1,data:{sourceLogout:"browser"},url:this.serviceLocator.getUrl("logout")})},getOrganizationInfo:function(e){var t={};return t.objectType=e,$.ajax({url:this.serviceLocator.getUrl("massive-activity-assignments-getOrganizationInfo"),data:t,type:"GET",dataType:"json"})},getCasesByOrganization:function(e){var t={};return t.roles=e.roles?"["+e.roles.toString()+"]":"[]",t.skills=e.skills?"["+e.skills.toString()+"]":"[]",t.locations=e.locations?"["+e.locations.toString()+"]":"[]",$.ajax({url:this.serviceLocator.getUrl("massive-activity-assignments-getCasesByOrganization"),data:t,type:"GET",dataType:"json"})},reassignCases:function(e){var t={};return t.users=e.user?"["+e.user.toString()+"]":"[]",t.roles=e.roles?"["+e.roles.toString()+"]":"[]",t.skills=e.skills?"["+e.skills.toString()+"]":"[]",t.locations=e.locations?"["+e.locations.toString()+"]":"[]",$.ajax({url:this.serviceLocator.getUrl("massive-activity-assignments-reassignCases"),data:t,type:"POST",dataType:"json"})},searchUsers:function(e){var t={};return t.userName=e.userName||"",t.fullName=e.fullName||"",t.domain=e.domain||"",$.ajax({url:this.serviceLocator.getUrl("massive-activity-assignments-searchUsers"),data:t,type:"GET",dataType:"json"})},searchUsersByID:function(e){var t={ids:"["+e.toString()+"]"};return $.ajax({url:this.serviceLocator.getUrl("massive-activity-assignments-searchUsersById"),data:t,type:"POST",dataType:"json"})},getUsersList:function(e){return $.read(this.serviceLocator.getUrl("admin-getUsersList"),e)},getUsersForAssignation:function(e){return $.read(this.serviceLocator.getUrl("admin-getUsersForAssignation"),e)},getOAuth2Applications:function(e){return $.read(this.serviceLocator.getUrl("admin-getUsersForAssignation"),e)},getAdhocProcessesList:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-getAdhocProcessesList"),data:e,type:"POST",dataType:"json"})},createAdhocProcess:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-createAdhocProcess"),data:e,type:"POST",dataType:"json"})},createNewAdhocProcess:function(e){return $.create({url:this.serviceLocator.getUrl("admin-createNewAdhocProcess"),data:JSON.stringify(e),dataType:"json",contentType:"application/json"})},updateAdhocProcess:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-updateAdhocProcess"),data:e,type:"POST",dataType:"json"})},publishAdhocProcess:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-publishAdhocProcess"),data:e,type:"POST",dataType:"json"})},deleteAdhocProcess:function(e){var t=this.serviceLocator.getUrl("admin-deleteAdhocProcess");return $.ajax({url:t.replace("{processId}",e),type:"DELETE",dataType:"json"})},cloneAdhocProcess:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-cloneAdhocProcess"),data:e,type:"POST",dataType:"json"})},deleteAdhocTask:function(e){var t=this.serviceLocator.getUrl("admin-deleteAdhocTask");return $.ajax({url:t.replace("{processId}",e.idProcess).replace("{taskId}",e.idTask),type:"DELETE",dataType:"json"})},updateAdhocTask:function(e){var t=this.serviceLocator.getUrl("admin-updateAdhocTask");return $.ajax({url:t.replace("{processId}",e.idProcess),data:e.task,type:"POST",dataType:"json"})},getAdhocDataSchema:function(e){var t=this.serviceLocator.getUrl("admin-getAdhocDataSchema");return $.ajax({url:t.replace("{processId}",e),type:"GET",dataType:"json"})},getAdhocProcessDiagram:function(e){var t=this.serviceLocator.getUrl("admin-getAdhocProcessDiagram");return $.ajax({url:t.replace("{processId}",e),type:"GET",dataType:"json"})},getAdhocTask:function(e,t){var r=this.serviceLocator.getUrl("admin-getAdhocTask");return $.ajax({url:r.replace("{processId}",e).replace("{taskId}",t),type:"GET",dataType:"json"})},saveAdhocProcessDiagram:function(e,t){var r=this.serviceLocator.getUrl("admin-saveAdhocProcessDiagram");return $.ajax({url:r.replace("{processId}",e),data:t,type:"POST",dataType:"json"})},getAdhocEntitiesList:function(){var e=this.serviceLocator.getUrl("admin-adhoc-entities-list");return $.read(e,{})},getAdhocUserGroupList:function(){var e=this.serviceLocator.getUrl("admin-adhoc-user-group-list");return $.read(e,{})},loadUsersByGroup:function(e){var t=this.serviceLocator.getUrl("admin-adhoc-user-group-data-get");return $.ajax({url:t.replace("{groupId}",e),type:"GET",dataType:"json"})},loadAuthItemInfoByInstance:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-adhoc-authorization-data-get"),data:e,type:"POST",dataType:"json"})},saveAdhocAuthorizationInfo:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-adhoc-authorization-data-save").replace("{processId}",e.processId).replace("{isAdhocTask}",e.isAdhocTask),data:e.auth,type:"POST",dataType:"json"})},deleteAdhocGroup:function(e){var t=this.serviceLocator.getUrl("admin-adhoc-user-group-delete");return $.ajax({url:t.replace("{groupId}",e),type:"DELETE",dataType:"json"})},saveAdhocGroup:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-adhoc-user-group-save"),data:e,type:"POST",dataType:"json"})},addUserToGroup:function(e){var t=this.serviceLocator.getUrl("admin-adhoc-user-group-data-add");return $.ajax({url:t.replace("{groupId}",e.groupId).replace("{userId}",e.userId),type:"POST",dataType:"json"})},removeUserFromGroup:function(e,t){var r=this.serviceLocator.getUrl("admin-adhoc-user-group-data-remove");return $.ajax({url:r.replace("{groupId}",e).replace("{userId}",t),type:"DELETE",dataType:"json"})},getAdhocEntityInstances:function(e){var t=this.serviceLocator.getUrl("admin-adhoc-entity-instances");return $.ajax({url:t.replace("{entityId}",e),type:"GET",dataType:"json"})},getEntityValues:function(e,t){var r=this.serviceLocator.getUrl("admin-entity-values");return $.ajax({url:r.replace("{context}",e).replace("{entityId}",t),type:"GET",dataType:"json"})},saveAdhocEntity:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-saveAdhocEntity"),data:e,type:"POST",dataType:"json"})},saveAdhocEntityInstance:function(e){return $.ajax({url:this.serviceLocator.getUrl("admin-saveAdhocEntityInstance").replace("{entityId}",e.entityId).replace("{isNew}",e.isNew),data:e.instance,type:"POST",dataType:"json"})},getAllEntities:function(){return $.ajax({url:this.serviceLocator.getUrl("admin-getAllEntities"),type:"GET",dataType:"json"})},getAllCategories:function(){return $.ajax({url:this.serviceLocator.getUrl("admin-getAllCategories"),type:"GET",dataType:"json"})},getDomainList:function(){var e=this.serviceLocator.getUrl("domains");return $.read(e)},getEcmAllScheduledJobs:function(){var e={action:"getEcmAllScheduledJobs"};return $.read(this.serviceLocator.getUrl("async-ecm-upload-baseService"),e)},retryECMPendingScheduledJob:function(e){var t={action:"retryECMPendingScheduledJob"};return t.idJob=e,$.read(this.serviceLocator.getUrl("async-ecm-upload-baseService"),t)},getWorkPortalVersion:function(){return $.ajax({url:this.serviceLocator.getUrl("WorkPortalVersion"),type:"GET",dataType:"json"}).always(function(e){return""==(e=e||{}).version&&(e.version=bizagi.loader.productBuild||""),e})},getAuthenticationLogData:function(e){var t="";return t="domains"==e.dataType?"admin-getAuthenticationDomains":"events"==e.dataType?"admin-getAuthenticationEventsTypes":"admin-getAuthenticationEventSubTypes",$.ajax({url:this.serviceLocator.getUrl(t),data:{},type:"GET",dataType:"json"})},getAuthenticationLogResult:function(e){var t={};return t.action=e.action,t.domain=e.domain,t.userName=e.userName,t.dtFrom=e.dtFrom,t.dtTo=e.dtTo,t.eventSubType=e.eventSubType,t.eventType=e.eventType,t.pag=e.pag,t.pagSize=e.pagSize,$.ajax({url:this.serviceLocator.getUrl("admin-getAuthenticationLog"),data:t,type:"GET",dataType:"json"}).pipe(function(e){for(var t=e.rows.length,r=0;r<t;r++){var i=e.rows[r][0],a=new Date(i),o=bizagi.util.dateFormatter.formatDate(a,bizagi.localization.getResource("dateFormat")+" "+bizagi.localization.getResource("timeFormat"));e.rows[r][0]="Invalid Date"==a?i:o}return e})},encryptString:function(e){var t={};return e=e||{},t.entry=e.entry,$.ajax({url:this.serviceLocator.getUrl("admin-EncryptString"),data:t,type:"POST",dataType:"json"})},userPendingRequests:function(e){var t={pag:e.pag,pagSize:e.pagSize};return $.read(this.serviceLocator.getUrl("admin-UserPendingRequests"),t)},userAuthenticationInfo:function(e){return $.read(this.serviceLocator.getUrl("admin-UserAuthenticationInfo"),{idUser:e.idUser})},updateUserAuthenticationInfo:function(e){return $.create(this.serviceLocator.getUrl("admin-updateUserAuthenticationInfo"),{idUser:e.idUser,password:e.password,enabled:e.enabled,expired:e.expired,locked:e.locked})},generateRandomPassword:function(e){return(e=e||{}).action="generateRandomPassword",$.ajax({url:this.serviceLocator.getUrl("admin-generateRandomPassword"),data:e,type:"POST",dataType:"json"})},generateDataToSendByEmail:function(e){e=e||{};var t={action:"GenerateDataToSendByEmail"};return t.idUser=e.idUser,t.password=e.password,$.ajax({url:this.serviceLocator.getUrl("admin-GenerateDataToSendByEmail"),data:e,type:"POST",dataType:"json"})},sendEmail:function(e){e=e||{};var t={action:"sendEmail"};return t.emailTo=e.emailTo,t.subject=e.subject,t.body=e.body,$.ajax({url:this.serviceLocator.getUrl("admin-sendEmail"),data:e,type:"POST",dataType:"json"})},sendUserEmail:function(e){e=e||{};var t={action:"SendUserEmail"};return t.emailTo=e.emailTo,t.subject=e.subject,t.body=e.body,$.ajax({url:this.serviceLocator.getUrl("admin-sendUserEmail"),data:e,type:"POST",dataType:"json"})},getApplicationCategoriesList:function(e){var t={},r="";if(e.userId&&(t.userId=e.userId),"Applications"==e.action&&e.userId){r=this.serviceLocator.getUrl("admin-getCaseSecurityApplicationList");return $.read(r,t)}if("Applications"==e.action&&!e.userId)return r="admin-getApplicationList",$.ajax({url:this.serviceLocator.getUrl(r),data:t,type:"GET",dataType:"json"});if("getCategories"==e.action&&e.userId){r=this.serviceLocator.getUrl("admin-getCaseSecurityCategoriesList");return t.idApp=e.idApp,t.idCategory=e.idCategory,e.authorizationContext&&(t.authorizationContext=e.authorizationContext),""==t.idCategory&&(t.idCategory=-1),void 0!==e.filterStartEvent&&(t.filterStartEvent=e.filterStartEvent),$.read(r,t)}return"getCategories"!=e.action||e.userId?void 0:(r="admin-getCategoriesList",t.idApp=e.idApp,t.idCategory=e.idCategory,e.authorizationContext&&(t.authorizationContext=e.authorizationContext),""==t.idCategory&&(t.idCategory=-1),void 0!==e.filterStartEvent&&(t.filterStartEvent=e.filterStartEvent),$.ajax({url:this.serviceLocator.getUrl(r),data:t,type:"GET",dataType:"json"}))},getAdminCasesList:function(e){var t=e||{};return $.ajax({cache:!0,url:this.serviceLocator.getUrl("admin-getCasesList"),data:t,type:"GET",dataType:"json"})},postAdminInvalidateCase:function(e){var t=e||{};return $.ajax({cache:!0,url:this.serviceLocator.getUrl("admin-invalidateCases"),data:t,type:"POST",dataType:"json"})},getResponseProcessRunningInvalidateCases:function(e){var t=e||{};return $.ajax({cache:!0,url:this.serviceLocator.getUrl("admin-getProcessRunningInvalidateCases"),data:t,type:"GET",dataType:"json"})},getApplicationProcesses:function(e){var t=this.serviceLocator.getUrl("admin-getApplicationProcesses"),r={};return r.idApp=e.idApp?e.idApp:-1,$.read(t,r)},getProcessVersion:function(e){var t=this.serviceLocator.getUrl("admin-getProcessVersion"),r={};return r.idWfClass=e.idWFClass,$.read(t,r)},getProcessTasks:function(e){var t=this.serviceLocator.getUrl("admin-getProcessTasks"),r={};return r.idWfClass=e.idWFClass,r.version=e.version?e.version:void 0,$.read(t,r)},getTaskAlarms:function(e){var t=this.serviceLocator.getUrl("admin-getTaskAlarms"),r={};return r.idTask=e.idTask,$.read(t,r)},getLapseMode:function(){var e=this.serviceLocator.getUrl("admin-getLapseMode");return $.read(e)},getRecurrMode:function(){var e=this.serviceLocator.getUrl("admin-getRecurrMode");return $.read(e)},getScheduleType:function(){var e=this.serviceLocator.getUrl("admin-getScheduleType");return $.read(e)},getBossList:function(e){var t=this.serviceLocator.getUrl("admin-getBossList");return $.read(t)},addAlarm:function(e){var t=this.serviceLocator.getUrl("admin-addAlarm"),r={};return r.idTask=e.idTask,r.idRecurrMode=e.idRecurrMode,r.idLapseMode=e.idLapseMode,r.scheduleType=e.scheduleType,r.alarmTime=e.alarmTime,r.alarmRecurrTime=e.alarmRecurrTime,r.sendToCurrentAssignee=e.sendToCurrentAssignee,$.update(t,r)},editAlarm:function(e){var t=this.serviceLocator.getUrl("admin-editAlarm"),r={};return r.idTask=e.idTask,r.idAlarm=e.idAlarm,r.idRecurrMode=e.idRecurrMode,r.idLapseMode=e.idLapseMode,r.scheduleType=e.scheduleType,r.alarmTime=e.alarmTime,r.alarmRecurrTime=e.alarmRecurrTime,r.sendToCurrentAssignee=e.sendToCurrentAssignee,$.update(t,r)},deleteAlarm:function(e){var t=this.serviceLocator.getUrl("admin-deleteAlarm");return e.idAlarm,$.destroy(t,e)},getAlarmRecipients:function(e){var t=this.serviceLocator.getUrl("admin-alarmRecipients"),r={};return r.idAlarm=e.idAlarm,$.read(t,r)},addRecipientToAlarm:function(e){var t=this.serviceLocator.getUrl("admin-recipientToAlarm"),r={};return r.idAlarm=e.idAlarm,r.idRecipient=e.idRecipient,$.update(t,r)},deleteRecipientsFromAlarm:function(e){var t=this.serviceLocator.getUrl("admin-deleteAlarmRecipients"),r={};return r.idRecipients=e.idRecipients,$.destroy(t,r)},enableAlarm:function(e){var t=this.serviceLocator.getUrl("admin-enableAlarm"),r={};return r.idTask=e.idTask,$.create(t,r)},abortReassignItems:function(e){var t=e||{},r="abort"==e.action?"admin-abortItems":"admin-reassignItems";return $.ajax({url:this.serviceLocator.getUrl(r),data:t,type:"POST",dataType:"json"})},reassignCurrent:function(e){var t=e||{};return $.ajax({url:this.serviceLocator.getUrl("admin-reassignCurrent"),data:t,type:"POST",dataType:"json"})},asyncActivitiesServices:function(e){var t=this,r=e,i="",a="GET";return"getActivities"==e.action?i=t.serviceLocator.getUrl("admin-async-activities-get-activities"):"retryNow"==e.action?(a="POST",i=(i=(i=(i=t.serviceLocator.getUrl("admin-async-activities-get-retry-now")).replace("{idCase}",e.idCase)).replace("{idworkItem}",e.idWorkitem)).replace("{idAsynchWorkitem}",e.idAsynchWorkitem)):"getActivitiesByTask"==e.action?i=t.serviceLocator.getUrl("admin-async-activities-get-activities-by-task"):"enableExecution"==e.action?(a="POST",i=t.serviceLocator.getUrl("admin-async-activities-enable-execution")):"enableMultiple"==e.action?(i=t.serviceLocator.getUrl("admin-async-activities-enable-multiple"),a="POST"):"asyncExecution"==e.action?i=t.serviceLocator.getUrl("admin-async-activities-async-execution"):"asyncExecutionLog"==e.action?i=(i=(i=(i=t.serviceLocator.getUrl("admin-async-activities-async-execution-log")).replace("{idCase}",e.idCase)).replace("{idworkItem}",e.idWorkItem)).replace("{idAsynchWorkitem}",e.idAsynchWorkitem):"getAsyncExecution"==e.action&&(i=t.serviceLocator.getUrl("admin-async-activities-async-get-current-execution-log")),$.ajax({url:i,data:r,type:a,dataType:"json"})},getDefaultAssignationUserToAllProcess:function(e){return $.read(this.serviceLocator.getUrl("admin-getDefaultAssignationUserToAllProcess"),{serviceAction:"getDefaultAssignationUserToAllProcess"})},getDefaultAssignationUserToProcess:function(e){var t;return t=""==e.idWFClass?-1:e.idWfClass,$.read(this.serviceLocator.getUrl("admin-getDefaultAssignationUserToProcess"),{serviceAction:"getDefaultAssignationUserToProcess",process:t})},setDefaultAssignationUserToProcess:function(e){return""==e.idWFClass?process=-1:process=e.idWfClass,$.create(this.serviceLocator.getUrl("admin-setDefaultAssignationUserToProcess"),{serviceAction:"setDefaultAssignationUserToProcess",process:process,idUser:e.idUser})},transferCaseSecuritypermissions:function(e){return e.allProcess?$.create(this.serviceLocator.getUrl("admin-transferAllCaseSecuritypermissions"),{serviceAction:"transferAllCaseSecuritypermissions",idUserSource:e.idUserSource,idUserTarget:e.idUserTarget}):$.create(this.serviceLocator.getUrl("admin-transferCaseSecuritypermissions"),{serviceAction:"transferCaseSecuritypermissions",idUserSource:e.idUserSource,idUserTarget:e.idUserTarget,idProcess:e.idProcess})},revokeCaseSecuritypermissions:function(e){return e.allProcess?$.create(this.serviceLocator.getUrl("admin-revokeAllCaseSecuritypermissions"),{serviceAction:"revokeAllCaseSecuritypermissions",idUserSource:e.idUserSource}):$.create(this.serviceLocator.getUrl("admin-revokeCaseSecuritypermissions"),{serviceAction:"revokeCaseSecuritypermissions",idUserSource:e.idUserSource,idProcess:e.idProcess})},statusTransferCaseSecuritypermissions:function(e){return $.create(this.serviceLocator.getUrl("admin-statusTransferCaseSecuritypermissions"),{serviceAction:"statusTransferCaseSecuritypermissions"})},getProfilesTypes:function(e){return $.read(this.serviceLocator.getUrl("admin-getProfilesTypes"))},searchProfiles:function(e){var t=this.serviceLocator.getUrl("admin-searchProfiles"),r={};return r.type=e.profileType,r.name=e.profileName,r.orgId=e.orgId?e.orgId:null,$.read(t,r)},getUsersByProfile:function(e){var t=this.serviceLocator.getUrl("admin-getUsersByProfile"),r={};return r.type=e.profileType,r.id=e.idProfile,$.read(t,r)},removeUserFromProfile:function(e){var t=this.serviceLocator.getUrl("admin-removeUserFromProfile"),r={};return r.type=e.profileType,r.id=e.idProfile,r.idUser=e.idUser,$.destroy(t,r)},addUserToProfile:function(e){var t=this.serviceLocator.getUrl("admin-addUserToProfile"),r={};return r.type=e.profileType,r.id=e.idProfile,r.idUser=e.idUser,$.update(t,r)},licenses:function(){var e=this.serviceLocator.getUrl("admin-Licenses");return $.read(e)},getDimensions:function(){var e=this.serviceLocator.getUrl("admin-GetDimensions");return $.read(e)},editDimension:function(e){e=e||{};var t={};t.id=e.id,t.displayName=e.displayName,t.name=e.name,t.idWfClass=e.idWfClass,t.entityPath=e.entityPath,t.description=e.description;var r=this.serviceLocator.getUrl("admin-EditDimension");return $.create(r,t)},createAdministrableDimension:function(e){e=e||{};var t={};return t.displayName=e.displayName,t.name=e.name,t.idWfClass=e.idWfClass,t.entityPath=e.entityPath,t.Description=e.description,$.ajax({url:this.serviceLocator.getUrl("admin-CreateAdministrableDimension"),data:e,type:"PUT",dataType:"json"})},deleteDimension:function(e){var t=this.serviceLocator.getUrl("admin-DeleteDimension");e=e||{};var r={};return r.id=e.id,r.idDimension=e.id,r.administrable=e.administrable,$.destroy(t,r)},entityPathChildNodesAction:function(e){e=e||{};var t={};return t.pathNodeType=e.nodeType,t.idNode=e.idNode,t.nodeDisplayPath=e.nodeDisplayPath,t.nodePath=e.nodePath,t.idWfClass=e.idWfClass,$.ajax({url:this.serviceLocator.getUrl("admin-EntityPathChildNodesAction"),data:e,type:"GET",dataType:"json"})},getActiveWFClasses:function(e){var t=e||{};return $.ajax({cache:!0,url:this.serviceLocator.getUrl("admin-GetActiveWFClasses"),data:t,type:"GET",dataType:"json"})},storeDocumentTemplates:function(){var e=this.serviceLocator.getUrl("admin-document-templates-storeDocumentTemplates");return $.read(e)},restoreDocumentTemplates:function(e){var t=this.serviceLocator.getUrl("admin-document-templates-restoreDocumentTemplates");return t+="?Guid="+e.Guid,$.read(t)},getWorkFlowClasses:function(){var e=this.serviceLocator.getUrl("admin-processes-workflowClasses");return $.read(e)},getTaskByWorkFlow:function(e){var t=this.serviceLocator.getUrl("admin-processes-tasksByWorkflow"),r={};return r.idWorkflow=e.idWorkflow,$.read(t,r)},modifyProcessDuration:function(e){var t=this.serviceLocator.getUrl("admin-processes-modifyProcessDuration"),r={};return r.idWorkflow=e.idWorkflow,r.duration=e.duration,$.create(t,r)},modifyTaskDuration:function(e){var t=this.serviceLocator.getUrl("admin-processes-modifyTaskDuration"),r={};return r.idTask=e.idTask,r.duration=e.duration,$.create(t,r)},processesHierarchy:function(){var e={removeOnlineItems:"true"};return $.ajax({url:this.serviceLocator.getUrl("offline-getProcessTree"),data:e,dataType:"json",type:"GET"})},syncOfflineCases:function(e){return $.ajax({url:this.serviceLocator.getUrl("offline-sendForm"),data:{idCase:e.idCase,idWFClass:e.idWfClass,awCaseCreationContext:JSON.stringify(e.objToSend),idWorkflow:e.idWfClass},type:"POST",dataType:"json",serviceType:"LOAD"})},processesHierarchyTofetchForms:function(e){var t={};return t.idChangeSet=e.changeSet,$.ajax({url:this.serviceLocator.getUrl("offline-getForms"),data:t,dataType:"json"})},getDataForMyTeam:function(){return $.ajax({url:this.serviceLocator.getUrl("bam-resourcemonitor-myteam"),type:"GET",dataType:"json"})},getReporstAnalysisQuery:function(){return $.read(this.serviceLocator.getUrl("reports-analysisquery"))},updateReportData:function(e){return $.update(this.serviceLocator.getUrl("reports-analysisquery-update"),e)},deleteReportData:function(e){return $.destroy(this.serviceLocator.getUrl("reports-analysisquery-delete")+"?"+e)},getAdminEntitiesList:function(){var e=this.serviceLocator.getUrl("admin-entities-list");return $.read(e,{})},getAdminStakeholdersList:function(){var e=this.serviceLocator.getUrl("admin-stakeholders-list");return $.read(e,{})},getAdminEntitiesRowData:function(e){var t=this.serviceLocator.getUrl("admin-entities-row-data"),r={guidEntity:e.guidEntity,pag:e.pag||1,pagSize:e.pagSize||10};return void 0!==e.orderField&&(r.orderField=e.orderField),void 0!==e.orderType&&(r.orderType=e.orderType),void 0!==e.filters&&$.isArray(e.filters)&&e.filters.length>0&&(r.filters=JSON.stringify(e.filters)),$.read(t,r)},getUserStakeholders:function(e){var t=this.serviceLocator.getUrl("admin-user-stakeholders"),r={idUser:e.idUser};return $.read(t,r)},getAdminEntityData:function(e){var t=this.serviceLocator.getUrl("admin-entity-simpleData"),r={};return r.idEntity=e.idEntity,r.idAttribute=e.idAttribute,$.read(t,r)},getAdminEntityMigrated:function(e){var t=this.serviceLocator.getUrl("admin-entities-migrated-entity"),r={};return r.guidEntity=e,$.read(t,r)},getAdminEntitiesForm:function(e){var t=this.serviceLocator.getUrl("admin-entities-get-form"),r={h_action:"LOADENTITYFORM",h_contexttype:"entity"};return void 0!==e.guid&&(r.h_guidEntity=e.guid),void 0!==e.guidForm&&(r.h_guidForm=e.guidForm),void 0!==e.idRow&&(r.h_surrogateKey=e.idRow),void 0!==e.idPageCache&&(r.h_pageCacheId=e.idPageCache,r.h_isRefresh=!0),void 0!==e.isStakeholder&&e.isStakeholder&&(r.h_showDisabled=!1,r.h_showAssociateUser=!0),e.prepare?r:$.ajax({url:t,data:r,type:"POST",dataType:"json"})},getBizagiObjects:function(){var e=this.serviceLocator.getUrl("admin-language-bizagi-objects");return $.read(e,{})},getEntitiesList:function(){var e=this.serviceLocator.getUrl("admin-language-entities");return $.read(e,{})},getStoreLanguageTemplates:function(){var e=this.serviceLocator.getUrl("admin-language-languages");return $.read(e,{})},setLanguages:function(e){var t=this.serviceLocator.getUrl("admin-language-languages"),r=e;return $.ajax({url:t,data:{languages:r},type:"POST",dataType:"json"})},resetPersonalization:function(){return $.ajax({url:this.serviceLocator.getUrl("admin-language-reset"),data:{},type:"DELETE",dataType:"json"})},getLanguageTemplate:function(e){var t,r="";e.elements?(t="admin-language-resource-download",r="&elements="+e.elements):e.entities?(t="admin-language-entities-download",r="&entities="+e.entities):t="admin-language-resource-download";var i="tablet_android"===this.device?"_system":"_self",a=encodeURI(this.serviceLocator.getUrl(t)+"?cultureName="+e.cultureName+r+"&xsrf="+bizagi.cookie(".BIZCSRF"));window.open(a,i,"location=yes")},getHolidaysSchemas:function(e){return $.read(this.serviceLocator.getUrl("admin-holidays-schemas"),e)},getHolidaysBySchema:function(e){return $.read(this.serviceLocator.getUrl("admin-holidays-schema"),e).pipe(function(e){e=e||{};return $.each(e,function(t,r){e[t].date=(r.date||"").split("T")[0]+"T00:00:00"}),e})},saveHolidaysBySchema:function(e){var t=this.serviceLocator.getUrl("admin-holidays-schema").replace("{schema}",e.schema);$.ajax({method:"POST",url:t,data:e.data,contentType:"application/json"})},getProjectName:function(){var e=this.serviceLocator.getUrl("admin-projectname");return $.read(e)},setProjectName:function(e){var t=this.serviceLocator.getUrl("admin-projectname"),r={projectName:e};return $.create(t,r)},downloadReportUser:function(e){var t=this,r=t.serviceLocator.getUrl("user-gdpr-downloadReportUser");bizagi.showErrorAlertDialog=!1,$.when(t.getDownloadReport(e,r)).done(function(t){0===$("#iframe-download").length?$("<iframe/>").attr({src:r.replace("{idUser}",e),style:"visibility:hidden;display:none",id:"iframe-download"}).appendTo("body"):$("#iframe-download").attr("src",r.replace("{idUser}",e))}).fail(function(e,r,i){var a=JSON.parse(e.responseText);t.notifier=bizagi.injector.get("notifier"),t.notifier.showErrorMessage(a.message)})},getDownloadReport:function(e,t){var r={idUser:e};return $.read(t,r)},anonymizeUser:function(e){var t=this.serviceLocator.getUrl("user-gdpr-anonymizeUser"),r={idUser:e};return $.destroy(t,r)},getAuditLicense:function(e){var t=$.Deferred(),r=this.serviceLocator.getUrl("admin-audit-license")+"?xsrf="+bizagi.cookie(".BIZCSRF");return t.resolve("OK"),document.location=r,t.promise()},processDefinition:function(e){return $.read(this.serviceLocator.getUrl("processviewer-processdefinition"),e)},graphicInfo:function(e){return $.read(this.serviceLocator.getUrl("processviewer-processgraphicinfo"),e)},getQueryFormResponse:function(e){return $.create(this.serviceLocator.getUrl("query-handler-getQueryFormResponse"),e)},exportToExcelProfiles:function(e){var t=encodeURI(this.serviceLocator.getUrl("admin-getUsersByProfile-report").replace("{filterType}",e.filterType).replace("{guidValueFilter}",e.guidValueFilter)+"?orgId="+e.orgId);window.location.assign(t)},getQueryFormExportExcel:function(e){var t=$.Deferred(),r="",i="_self";bizagi.util.isIE()&&(i="iframeExcel");var a=$("<form>",{action:this.serviceLocator.getUrl("query-handler-getQueryFormExportExcel")+"?xsrf="+bizagi.cookie(".BIZCSRF"),target:i,id:"formExportExcel",method:"POST",style:"display:none"});$(a).attr("enctype","application/x-www-form-urlencoded"),$(a).attr("accept-charset","UTF-8");var o=$("<iframe>",{name:"iframeExcel",id:"iframeExcel",style:"display:none"});return $.each(e,function(e,t){r=$("<input>",{name:e,value:t,type:"hidden"}),$(a).append(r)}),$("body").append(a),$("body").append(o),a.submit().remove(),o.submit().remove(),t.resolve("OK"),t.promise()},getQueryForm:function(e){return e=e||{},$.ajax({url:this.serviceLocator.getUrl("query-handler-getQueryForm"),data:e,type:"POST",dataType:e.dataType||"json"})},getPreferencesForm:function(e){return $.ajax({url:this.serviceLocator.getUrl("preferences-handler-getPreferencesForm"),data:e,type:"POST",dataType:"json"})},saveStoredQueryForm:function(e){return $.ajax({url:this.serviceLocator.getUrl("query-handler-storedQueryForm"),data:e,type:"POST",dataType:"json"})},updateStoredQueryForm:function(e){return $.ajax({url:this.serviceLocator.getUrl("query-handler-storedQueryForm"),data:e,type:"PUT",dataType:"json"})},deleteStoredQueryForm:function(e){var t=this.serviceLocator.getUrl("query-handler-storedQueryForm-id");return $.destroy(t,e)},getStoredQueryFormList:function(e){return $.ajax({url:this.serviceLocator.getUrl("query-handler-storedQueryForm"),data:e,type:"GET",dataType:"json"})},getStoredQueryFormResponse:function(e){var t=this.serviceLocator.getUrl("query-handler-storedQueryForm-id"),r={};return r.idStoredQueryForm=e,$.read(t,r)},getGraphicQueryInfo:function(e){return $.read("Rest/Cases/WorkitemsGuid",e)},getCasePath:function(e){return $.read("Rest/Cases/TransitionLog",e)},getUsersForm:function(e){return $.create(this.serviceLocator.getUrl("admin-usersform"),e)},getLastUpdateByMobile:function(){return $.read({url:this.serviceLocator.getUrl("mobile-getLastUpdate")})},getUsersAdministrationLog:function(e){return $.read({url:this.serviceLocator.getUrl("admin-userslog"),data:e})},queryUsersLicenses:function(){return $.read({url:this.serviceLocator.getUrl("admin-userslicenses")})},createUserAdministrationForm:function(){return $.get(this.serviceLocator.getUrl("admin-createuserform"))},getPreferenceFormParams:function(){return $.read(this.serviceLocator.getUrl("admin-userpreferenceform-isnew"))},getUserPositions:function(){return $.read(this.serviceLocator.getUrl("admin-userGetPositions"))},getAssignationQueues:function(){return $.read(this.serviceLocator.getUrl("admin-assignation-queues"))},getSegmentationQueues:function(){return $.read(this.serviceLocator.getUrl("admin-assignation-queues-segmentation"))},getQueueSuscribers:function(e){return $.read(this.serviceLocator.getUrl("admin-assignation-queues-suscribers"))},unsuscribeQueueUser:function(e){return $.destroy(this.serviceLocator.getUrl("admin-assignation-queues-unsuscribe"),{userId:e,segmentation:"x"})},getUserInfoByTask:function(e,t){var r={idCase:e,guidTask:t};return $.read(this.serviceLocator.getUrl("graphicquery-trailusers"),r)},getSearchLists:function(){return $.read(this.serviceLocator.getUrl("my-search-getSearchLists"),{})},defineFilterObject:function(e,t,r){var i=e.properties,a=i.xpath.split("@")[0],o=t.find(function(e){return e.xpath==a});if(o){if("from"==i.rangeQuery)o.value=o.value||{},o.searchType="range",o.value.min=e.value;else if("to"==i.rangeQuery)o.value=o.value||{},o.searchType="range",o.value.max=e.value;else{e.properties.typeSearch=o.searchType;var s=c(e);$.extend(o,s)}i.orderType&&(o.orderType=i.orderType),r&&r(bizagi.clone(o))}else{var n=i.defaultFilter||!1;o=c(e),i.orderType&&(o.orderType=i.orderType),"range"===o.searchType&&void 0===o.value&&(o.searchType="none"),(void 0!==o.value&&null!=o.value||o.orderType||n)&&(t.push(o),r&&r(bizagi.clone(o)))}function c(e){var t=e.properties,r=t.typeSearch,i=e.value;if("boolean"==t.type&&(void 0===i||"null"==typeof i?(i=null,r="Nullable"):(i=bizagi.util.parseBoolean(i),r="exact")),"number"!=t.type&&"money"!=t.type&&"date"!=t.type||(r="exact"),"object"==typeof e.value&&null!=e.value){if(i=[],Array.isArray(e.value))for(var o=0,s=e.value.length;o<s;o++){var n=parseInt(e.value[o].id);isNaN(n)||i.push(n)}else{n=parseInt(e.value.id);isNaN(n)||i.push(n)}r="exact",i=i.length>0?i:void 0}t.rangeQuery&&"none"!==t.rangeQuery&&(i={min:e.value,max:e.value},r="range");var c={xpath:a,searchType:r=r||"approx"};return"hidden"===t.type&&(c.isHidden=!0),void 0!==i&&(c.value=i),c}},serializeEntityData:function(e){var t=e;function r(e,t){var r={data:{},guid:t.guidEntity,timestamp:e.timestamp},i=e.columns,a=t.row;for(name in t)t.hasOwnProperty(name)&&"row"!==name.toString()&&"id"!==name.toString()&&(r[name]=t[name]);for(var o=0,s=i.length;o<s;o+=1)r.data[i[o]]=a[o];return r}t.entities=[];for(var i,a=-1;i=e.rows[++a];)for(var o,s=-1;o=e.cells[++s];)if(o.id===i.id){var n=r(o,i);t.entities.push(n);break}return t},getOAuth2Applications:function(){return $.ajax({url:this.serviceLocator.getUrl("oauth2-getApplications"),type:"GET",dataType:"json"})},getOAuth2Application:function(e){var t=this.serviceLocator.getUrl("oauth2-getApplication");return $.ajax({url:t.replace("{applicationId}",e),type:"GET",dataType:"json"})},createOAuth2Application:function(e){return $.ajax({url:this.serviceLocator.getUrl("oauth2-createApplication"),type:"POST",dataType:"json",data:e})},deleteOAuth2Application:function(e){var t=this.serviceLocator.getUrl("oauth2-deleteApplication");return $.ajax({url:t.replace("{applicationId}",e),type:"DELETE",dataType:"json"})},updateOAuth2Application:function(e,t){var r=this.serviceLocator.getUrl("oauth2-updateApplication");return $.ajax({url:r.replace("{applicationId}",t),data:e,type:"PUT",dataType:"json"})},updateClientSecretKeysOAuth2Application:function(e,t){var r=this.serviceLocator.getUrl("oauth2-updateClientSecretKeysApplication");return $.ajax({url:r.replace("{applicationId}",t),data:e,type:"PUT",dataType:"json"})},queryDelegations:function(e){var t=this.serviceLocator.getUrl("userDelegation")+"/"+e.idUser+"/delegates";return $.ajax({url:t,data:e,type:"GET",dataType:"json"})},saveDelegation:function(e){var t=this.serviceLocator.getUrl("userDelegation")+"/MultipleProcess";return $.ajax({url:t,data:e,type:"POST",dataType:"json",global:!1})},updateDelegation:function(e){var t=this.serviceLocator.getUrl("userDelegation")+"/"+e.idDelegation;return $.ajax({url:t,data:e,type:"PUT",dataType:"json",global:!1})},deleteDelegation:function(e){var t=this.serviceLocator.getUrl("userDelegation")+"/"+e.idDelegation;return $.ajax({url:t,data:e,type:"DELETE",dataType:"json"})},getUserFilterOptions:function(e){var t=this.serviceLocator.getUrl("userFilterOptions");return $.ajax({url:t,data:e,type:"GET",dataType:"json"})},getValuesFromCQL:function(e){var t=this.serviceLocator.getUrl("catalogQL");return $.ajax({url:t,data:JSON.stringify(e),processData:!1,type:"POST",contentType:"application/json"})},getPreferencesCurrentUser:function(){var e=this.serviceLocator.getUrl("currentUser");return $.ajax({url:e,type:"GET"})},getUsersForDelegation:function(e){var t=this.serviceLocator.getUrl("userFilterOptions")+"/SearchUser";return $.ajax({url:t,data:e,type:"GET",dataType:"json"})},getProcessToDelegate:function(e){var t=this.serviceLocator.getUrl("userFilterOptions")+"/"+e.idUser+"/process";return $.ajax({url:t,data:e,type:"GET",dataType:"json"})}}),$.Class.extend("bizagi.workportal.services.multiactionservice",{BA_CONTEXT_PARAMETER_PREFIX:"h_"},{init:function(e){this.service=e,this.batch={},this.batchTimer=50,this.replicateServiceMethods()},getService:function(){return this.service},replicateServiceMethods:function(){var self=this;self.getAdminEntitiesForm=eval("var tmp = function(){ return this.proxyMethod(this.getService().getAdminEntitiesForm, arguments);};tmp")},proxyMethod:function(e,arguments){var t=this.service;if(!arguments||1!=arguments.length)return e.apply(t,arguments);if("object"!=typeof arguments[0])return e.apply(t,arguments);var r=arguments[0];if(1==r.prepare)return e.apply(t,arguments);r.prepare=!0;var i=e.apply(t,arguments);return this.add(i)},add:function(e){var t=this,r=new $.Deferred;e.h_action;clearTimeout(t.batchTimeout);var i=e.tag=Math.guid(),a={action:e,deferred:r};return t.batch[i]=a,t.batchTimeout=setTimeout(function(){t.fire()},t.batchTimer),r.promise()},fire:function(){var e={},t=[];$.each(this.batch,function(r,i){t.push(i.action),e[r]=i}),this.batch={},$.when(this.execute({actions:t,rejectDeferreds:!1})).done(function(t){$.each(t,function(t,r){var i=r.tag;r.error?e[i].deferred.reject(r.error,r,r.error.message):e[i].deferred.resolve(r.result),delete e[i]}),$.each(e,function(e,t){t.deferred.reject({type:"not-processed",message:"Operation didn't executed"},"","Operation didn't executed")})}).fail(function(t,r,i){var a=void 0!==i?i.message:i||"Operation didn't executed";$.each(e,function(e,t){t.deferred.reject({type:"not-processed",message:a},"","Operation didn't executed")})})},execute:function(e){var t=this,r={},a=void 0===e.rejectDeferreds||e.rejectDeferreds;r[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"action"]="multiaction",$.each(e.actions,function(e,r){r[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"tag"]=r.tag||e,delete r.tag}),(e=e||{}).actions&&(r[t.Class.BA_CONTEXT_PARAMETER_PREFIX+"actions"]=JSON.encode(e.actions));var o=new $.Deferred;return $.ajax({url:t.getService().serviceLocator.getUrl("render-multiaction"),data:r,type:"POST",dataType:"json",serviceType:"MULTIACTION"}).done(function(e){for(i in e)if("function"!=typeof e[i]){var t=e[i];if(t.error&&a)return void o.reject(this,"servererror",t)}o.resolve(e)}).fail(function(e){var t,r=e.responseText||e;try{t=JSON.parse(r)}catch(e){}o.reject(e,"servererror",t)}),o.promise()}}),$.Class.extend("bizagi.workportal.services.routing",{},{init:function(e){var t=this;e=e||{},t.params=e.params||{},t.dataService=e.dataService||{},t.modules={projectDashboard:bizagi.util.isMobileDevice()?"activityform":"projectDashboard",oldRender:"oldrenderintegration",async:"async",activitySelector:"routing"},t.renderVersion=2,t.resetRouteInformation()},resetRouteInformation:function(){this.route={module:"",moduleParams:{}}},setRenderParams:function(e){this.params=this.getRenderParams(e)},getRenderParams:function(e){var t={idCase:parseInt(e.idCase||0),guid:e.guid,idWorkflow:parseInt(e.idWorkflow||0),idWorkitem:1==e.isOfflineForm?0:parseInt(e.idWorkItem||0),idTask:parseInt(e.idTask||0),eventAsTasks:e.eventAsTasks||!1,onlyUserWorkItems:e.onlyUserWorkItems||"true",formsRenderVersion:e.formsRenderVersion||0,referrer:e.referrer||"",isComplex:void 0!==e.isComplex,formsRenderVersion:2,onClose:e.onClose||"",isOfflineForm:e.isOfflineForm||!1,caseLink:e.caseLink};void 0!==t.guid&&0==t.idCase&&delete t.idCase;var r=!0;try{r=BIZAGI_SETTINGS.skipSubprocessGlobalForm||!0}catch(e){}return this.skipSubprocessGlobalForm="true"==r,t},getRoute:function(e){var t=this,r=new $.Deferred;if(t.params=e||t.params,e.data&&e.data.hasStartForm)r.resolve({module:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_START_FORM,moduleParams:{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_START_FORM,data:e.data}});else{var i=e.fromTask||e.idTask||"",a=e.fromWorkItemId||e.idWorkItem||"";$.when(t.getRenderVersion(t.params)).done(function(e){t.renderVersion=e,t.route.moduleParams=t.getRenderParams(t.params);var o={};o=void 0!==t.params.guid?{guid:t.params.guid,onlyUserWorkItems:t.params.onlyUserWorkItems,isOfflineForm:t.params.isOfflineForm,fromTask:i,fromWorkItemId:a}:{idCase:t.params.idCase,onlyUserWorkItems:t.params.onlyUserWorkItems,isOfflineForm:t.params.isOfflineForm,fromTask:i,fromWorkItemId:a},$.when(t.dataService.getWorkitems(o)).done(function(i){if(t.route.moduleParams.assignationEveryone={currentUserIsCurrentAsignee:i.currentUserIsCurrentAsignee||!1,enabledReadOnlyForAsigneeToEveryone:i.enabledReadOnlyForAsigneeToEveryone||!1,isAssignationMethodEveryone:i.isAssignationMethodEveryone||!1,canWorkOnThisTask:i.canWorkOnThisTask||!1},t.route.moduleParams.hasWorkItems=!!i.workItems.length,t.route.moduleParams.hasGlobalForm=bizagi.util.parseBoolean(i.hasGlobalForm),t.route.moduleParams.idWorkitem>0)t.setRenderModuleName(t.getRenderModuleName(e)),0==t.route.moduleParams.idTask&&(t.route.moduleParams.idTask=t.searchIdTask(t.route.moduleParams.idWorkitem)),t.route.moduleParams.radNumber=i.radNumber||"",t.route.moduleParams.idWorkflow=i.idWorkFlow||"",r.resolve(t.route),t.resetRouteInformation();else{var a=t.checkAsyncWorkItems(i);if(0==i.workItems.length)t.route.moduleParams.idWorkflow=i.idWorkFlow||"",t.route.moduleParams.radNumber=i.radNumber||"",""!==$.trim(i.msgTask)?r.resolve(t.routeToMessageForm(i.msgTask)):bizagi.util.parseBoolean(i.hasGlobalForm)?r.resolve(t.routeToGlobalForm(i)):r.resolve(t.routeToGlobalFormWithoutData());else if(1==i.workItems.length||a.length>0){var o=0;if(a.length>0)for(var s=0;s<i.workItems.length;s++)if("true"==i.workItems[s].isAsynch){o=s;break}t.route.moduleParams.guid,void 0!==i.workItems[o].guid?t.route.moduleParams.guid=i.workItems[o].guid:(t.route.moduleParams.idCase,t.route.moduleParams.idCase=i.workItems[o].idCase),t.route.moduleParams.idTask=i.workItems[o].idTask,t.route.moduleParams.fromTask=i.workItems[o].idTask,t.route.moduleParams.idWorkitem=i.workItems[o].idWorkItem,t.route.moduleParams.idWorkflow=i.workItems[o].idWorkFlow,t.route.moduleParams.displayName=i.workItems[o].displayName?i.workItems[o].displayName:"",t.route.moduleParams.radNumber=i.radNumber||"",a.length>0?t.setRenderModuleName(t.modules.async):t.setRenderModuleName(t.getRenderModuleName(e)),r.resolve(t.route),t.resetRouteInformation()}else i.checkProcess=!!(i.subProcesses.length>0&&t.skipSubprocessGlobalForm),i.checkWorkItems=i.workItems.length>1,i.fromSearchWidget="search"==t.params.referrer,t.setRenderModuleName(t.modules.activitySelector),t.route.moduleParams.data=i,r.resolve(t.route),t.resetRouteInformation()}}).fail(function(e){var i=bizagi.localization.getResource("workportal-menu-search-found-no-cases");r.resolve(t.routeToMessageForm(i))})})}return r.promise()},setRenderModuleName:function(e){this.route.module=e,this.route.moduleParams.widgetName=e},getRenderModuleName:function(e){return 1==e?this.modules.oldRender:this.modules.projectDashboard},searchIdTask:function(e,t){var r=0;e=e||[];for(var i=0;i<e.length;i++)if(parseInt(e[i].idWorkItem)==parseInt(t)){r=parseInt(e[i].idTask);break}return r},checkAsyncWorkItems:function(e){var t=[];return $.each(e.workItems,function(r){"true"==e.workItems[r].isAsynch&&t.push({idCase:e.idCase,idWorkitem:e.workItems[r].idWorkItem,idTask:e.workItems[r].idTask})}),t},routeToGlobalForm:function(e){var t=this;if(t.route.moduleParams.idCaseForGraphicQuery=t.route.moduleParams.idCase,t.route.moduleParams.idCase=$.isNumeric(e.idCaseForGlobalForm)&&e.idCaseForGlobalForm>0?e.idCaseForGlobalForm:t.route.moduleParams.idCase,t.route.moduleParams.idWorkflow=parseInt(e.idWorkFlow||0),1==t.renderVersion){var r=t.dataService.serviceLocator.getUrl("old-render")+"?PostBack=1&idCase=%s&idWorkitem=%s&idTask=%s",i=t.route.moduleParams.idCase||"",a=t.route.moduleParams.idWorkitem||"",o=t.route.moduleParams.idTask||"",s=printf(r,i,a,o);t.route.moduleParams.onlyUserWorkItems=t.route.moduleParams.idCase||"",t.setRenderModuleName(t.modules.oldRender),t.route.moduleParams.url=s}else t.setRenderModuleName(t.modules.projectDashboard);return t.route},routeToGlobalFormWithoutData:function(){return this.setRenderModuleName(this.modules.projectDashboard),this.route.moduleParams.withOutGlobalForm=!0,this.route},routeToMessageForm:function(e){var t=this;return e=e||"",t.setRenderModuleName(t.modules.projectDashboard),t.route.moduleParams.withOutGlobalForm=!0,t.route.moduleParams.messageForm=e,t.route},getRenderVersion:function(e){var t=new $.Deferred,r=e.formsRenderVersion||0;return 0!=r?t.resolve(r):$.when(this.dataService.getCaseFormsRenderVersion({idCase:e.idCase,guid:e.guid})).done(function(e){r=parseInt(e.formsRenderVersion),t.resolve(r)}),t.promise()}}),bizagi.workportal.services.routing.extend("bizagi.workportal.services.routing",{},{init:function(e){this._super(e)},getRoute:function(e){new $.Deferred;if(this.params=e||this.params,void 0!==e.offlineAction&&"next"==e.offlineAction){var t=new $.Deferred;return t.resolve(this.routeToGlobalFormWithoutData()),t.promise()}return this._super(e)}}),bizagi.workportal.services.loadtemplates=function(){var e=this;return e.tmpl={},e.loadTemplates=function(t){var r=e.templatesDeferred=new $.Deferred,i=[],a=null==t.useNewEngine||t.useNewEngine;for(var o in t)"useNewEngine"!=o&&i.push(e.loadTemplate({name:o,path:t[o],useNewEngine:a}));return $.when.apply($,i).done(function(){r.resolve()}),r.promise()},e.loadTemplate=function(t){return e.tmpl[t.name]?e.tmpl[t.name]:t.useNewEngine?bizagi.templateService.getTemplateWidget(t.path).done(function(r){e.tmpl[t.name]=r}):bizagi.templateService.getTemplate(t.path).done(function(r){e.tmpl[t.name]=r})},e.getTemplate=function(t){return e.tmpl.hasOwnProperty(t)?e.tmpl[t]:null},{loadTemplates:e.loadTemplates,getTemplate:e.getTemplate}},bizagi.injector.register("loadTemplatesService",[bizagi.workportal.services.loadtemplates]),bizagi.workportal.services.globalhandlers=function(e){return this.publish=function(e,t){$(document).triggerHandler(e,t)},this.showDialogWidget=function(t){return e.renderWidget(t),e},{publish:this.publish,showDialogWidget:this.showDialogWidget}},bizagi.injector.register("globalHandlersService",["dialogWidgets",bizagi.workportal.services.globalhandlers]),bizagi.workportal.services.behaviors=bizagi.workportal.services.behaviors||{},bizagi.workportal.services.behaviors.collapsiblepanels=function(){var e=this;return e.addClassesCollapseSideBar=function(t,r,i){$(window).width()>1366&&(void 0===bizagi.override.defaultHideRightColumn||0==bizagi.override.defaultHideRightColumn)?i?$("#ui-bizagi-wp-project-homeportal-main",e.content).removeClass("ui-bizagi-wp-project-collapse"+r):$("#ui-bizagi-wp-project-homeportal-main",e.content).toggleClass("ui-bizagi-wp-project-collapse"+r,function(){$(this).hasClass("ui-bizagi-wp-project-collapse"+r)?($("#ui-bizagi-wp-project-homeportal-main",e.content).removeClass("ui-bizagi-wp-project-open"+r),$(".ui-bizagi-wp-project-dashboard-breadcrumb-container",e.content).css("margin-bottom","1px")):($("#ui-bizagi-wp-project-homeportal-main",e.content).addClass("ui-bizagi-wp-project-open"+r),$(".ui-bizagi-wp-project-dashboard-breadcrumb-container",e.content).css("margin-bottom",""))}):i?$("#ui-bizagi-wp-project-homeportal-main",e.content).addClass("ui-bizagi-wp-project-open"+r):$("#ui-bizagi-wp-project-homeportal-main",e.content).toggleClass("ui-bizagi-wp-project-open"+r,function(){$(this).hasClass("ui-bizagi-wp-project-open"+r)?$("#ui-bizagi-wp-project-homeportal-main",e.content).removeClass("ui-bizagi-wp-project-collapse"+r):$("#ui-bizagi-wp-project-homeportal-main",e.content).addClass("ui-bizagi-wp-project-collapse"+r)}),e.calculateBarsDays(t)},e.collapseSideBar=function(t){$(window).width()>1366?$("#ui-bizagi-wp-project-homeportal-main",e.content).toggleClass("ui-bizagi-wp-project-collapse"+t,function(){$(this).hasClass("ui-bizagi-wp-project-collapse"+t)&&$("#ui-bizagi-wp-project-homeportal-main",e.content).removeClass("ui-bizagi-wp-project-open"+t)}):$("#ui-bizagi-wp-project-homeportal-main",e.content).toggleClass("ui-bizagi-wp-project-open"+t,function(){$(this).hasClass("ui-bizagi-wp-project-open"+t)&&$("#ui-bizagi-wp-project-homeportal-main",e.content).removeClass("ui-bizagi-wp-project-collapse"+t)})},e.calculateBarsDays=function(e){var t=$(".ui-bizagi-wp-project-plan-progress .remaining-days .time-remaining",e),r=$(".ui-bizagi-wp-project-plan-progress .remaining-days .days",e).width();t.css("padding-left",(r+7).toString()+"px"),t=$(".ui-bizagi-wp-project-plan-time .remaining-days .time-remaining",e),r=$(".ui-bizagi-wp-project-plan-time .remaining-days .days",e).width(),t.css("padding-left",(r+7).toString()+"px")},e.enableSideBar=function(){$("#ui-bizagi-wp-project-homeportal-main",this.content).removeClass("ui-bizagi-wp-project-collapse-right"),$("#ui-bizagi-wp-project-homeportal-main",this.content).addClass("ui-bizagi-wp-project-open-right"),$("#ui-bizagi-wp-project-dashboard-sidebar-right").show()},e.disableSideBar=function(){$("#ui-bizagi-wp-project-homeportal-main",this.content).addClass("ui-bizagi-wp-project-collapse-right"),$("#ui-bizagi-wp-project-homeportal-main",this.content).removeClass("ui-bizagi-wp-project-open-right"),$("#ui-bizagi-wp-project-dashboard-sidebar-right").hide()},{addClassesCollapseSideBar:e.addClassesCollapseSideBar,collapseSideBar:e.collapseSideBar,enableSideBar:e.enableSideBar,disableSideBar:e.disableSideBar}},bizagi.injector.register("behaviorCollapsiblePanels",[bizagi.workportal.services.behaviors.collapsiblepanels]),bizagi.workportal.services.behaviors=bizagi.workportal.services.behaviors||{},bizagi.workportal.services.behaviors.projectDashboard=function(e){var t=this;return t.dataService=e,t.TYPE_WORKITEM_ACTIVITY="ACTIVITY",t.TYPE_WORKITEM_TASK="TASK",t.NOTIFICATION_NAVIGATOR_BACK="NAVIGATOR_BACK",t.CONTEXT_HOME="HOME",t.CONTEXT_ACTIVITY="ACTIVITY",t.CONTEXT_OVERVIEW="OVERVIEW",t.CONTEXT_PLANACTIVITIES="PLANACTIVITIES",t.CONTEXT_PLANCREATE="PLANCREATE",t.CONTEXT_ACTIVITYPLAN="ACTIVITYPLAN",t.CONTEXT_ACTIVITYPLANCREATE="ACTIVITYPLANCREATE",t.CONTEXT_ACTIVITYPLANOVERVIEW="ACTIVITYPLANOVERVIEW",t.dataDashboard={},t.dataDashboard.params={},t.pendingContext="HOME",t.init=function(){},t.getRadNumber=function(e,r,i){var a=$.Deferred();return i?a.resolve(e.radNumber||e.idCase):$.when(t.getFirstParentPlan(r.idPlan)).done(function(e){e?a.resolve(e.id):a.resolve(r.idPlan)}),a.promise()},t.getRadNumberForPlanDashboard=function(e,t){var r=this,i=$.Deferred();return t?$.when(r.getFirstParentCase(e)).done(function(t){null===t?$.when(r.getFirstParentPlan(e)).done(function(e){i.resolve(e.id)}):i.resolve(t.radNumber)}):$.when(r.getFirstParentPlan(e)).done(function(e){i.resolve(e.id)}),i.promise()},t.getContextToShow=function(e){var r=$.Deferred();return e.idCase?$.when(t.callDataServicesForBehaviorDashboard(e)).done(function(){t.dataDashboard.params.menuDashboard=t.dataDashboard.menuDashboard,r.resolve(t.dataDashboard)}):$.when(t.getServerDateDifference()).then(function(){var e=bizagi.services.projectDashboardContext||t.CONTEXT_HOME;bizagi.services.projectDashboardContext="",r.resolve({contextToShow:e,params:{differenceMillisecondsServer:t.dataDashboard.params.differenceMillisecondsServer}})}),r.promise()},t.getTypeWorkItem=function(e){return e.idPlan?t.TYPE_WORKITEM_ACTIVITY:t.TYPE_WORKITEM_TASK},t.getIsCurrentUserAssignedToWorkitem=function(e,t,r){var i=[];return e.length>0?(i=e.filter(function(e){return e.idWorkItem==t})).length>0&&(r?$.extend(i[0],r):i[0]):null},t.getContextActionWhenClickButtonPlan=function(e,r){return e===t.TYPE_WORKITEM_TASK?r?t.CONTEXT_PLANACTIVITIES:t.CONTEXT_PLANCREATE:e===t.TYPE_WORKITEM_ACTIVITY?r?t.CONTEXT_PLANACTIVITIES:t.CONTEXT_ACTIVITYPLANCREATE:void 0},t.getIsVisibleButtonOverview=function(e,r){var i=!1;return e===t.TYPE_WORKITEM_TASK?i=bizagi.util.parseBoolean(r.showForm):e===t.TYPE_WORKITEM_ACTIVITY&&(i=!0),i},t.getIsVisibleButtonForm=function(e,r,i){return e===t.TYPE_WORKITEM_TASK?!!r&&i:e===t.TYPE_WORKITEM_ACTIVITY?r:void 0},t.callDataServicesForBehaviorDashboard=function(e){var r=$.Deferred();t.dataDashboard.menuDashboard={};var i=!1,a=!1,o=t.getCaseSummaryDetails(e),s=t.getServerDateDifference();return $.when(o,s).then(function(o){o.hasGlobalForm=e.hasGlobalForm;var s=t.getTypeWorkItem(o);t.dataDashboard.responseGetCaseSummaryDetails=o;var n=t.getIsCurrentUserAssignedToWorkitem(o.currentState,e.idWorkitem);if(!1!==o.hasAccessToCase)if(n&&(i=!0,a=!0),t.dataDashboard.params.belongCurrentUser=i,t.dataDashboard.menuDashboard.showFormOverview=t.getIsVisibleButtonOverview(s,o),t.dataDashboard.menuDashboard.showCommentsOptionMenu=t.getPropertiesByDataServices(s,i,a,!1,bizagi.menuSecurity).isVisibleButtonComments,t.dataDashboard.menuDashboard.showFilesOptionMenu=t.getPropertiesByDataServices(s,i,a,!1,bizagi.menuSecurity).isVisibleButtonFiles,t.dataDashboard.menuDashboard.showTimeLineOptionMenu=t.getPropertiesByDataServices(s,i,a,!1,bizagi.menuSecurity).isVisibleButtonTimeLine,t.dataDashboard.menuDashboard.showPlanOptionMenu=t.getPropertiesByDataServices(s,i,a,!1,bizagi.menuSecurity).isVisibleButtonPlan,t.dataDashboard.menuDashboard.showFormActivity=t.getPropertiesByDataServices(s,i,a,!1,bizagi.menuSecurity).isVisibleButtonForm,o.idPlan){var c=$.when(t.getWorkitemsPlan(o.idPlan));$.when(c).done(function(c){var d=t.getIsCurrentUserAssignedToWorkitem(c,e.idWorkitem,n);t.dataDashboard.params.guidWorkItem=d.guidWorkitem;var l=$.when(t.getPlanByParent(d.guidWorkitem));$.when(l).then(function(n){t.dataDashboard.menuDashboard.contextFormActivityOptionMenu=t.getPropertiesByDataServices(s,i,a,d).contextToShow,t.dataDashboard.contextToShow=t.dataDashboard.menuDashboard.contextFormActivityOptionMenu,t.dataDashboard.nameWorkItem=t.getPropertiesByDataServices(s,i,a,d).nameWorkItem;var c=n.length>0;t.dataDashboard.menuDashboard.contextPlanOptionMenu=t.getContextActionWhenClickButtonPlan(s,c),t.dataDashboard.params.plan={},$.when(t.getPlan(o.idPlan)).done(function(i){t.dataDashboard.params.plan=i,d&&(t.dataDashboard.params.plan.idActivitySelected=d.guidActivity),c&&(t.dataDashboard.params.planChild={},t.dataDashboard.params.planChild.id=n[0].id,t.dataDashboard.params.planChild.currentState=n[0].currentState);var a=$.when(t.getFirstParentCase(t.dataDashboard.params.plan.id));$.when(t.getRadNumber(e,o,i.contextualized),a).done(function(e,i){t.dataDashboard.params.radNumber=e,i&&i.idCase&&(t.dataDashboard.params.caseIdOfFirstParent=i.idCase,t.dataDashboard.params.workitemIdOfFirstParent=i.idWorkitem),r.resolve()})})})})}else $.when(t.getRadNumber(e,o,!0)).done(function(e){if(t.dataDashboard.params.radNumber=e,t.dataDashboard.params.plan={},n){t.dataDashboard.params.guidWorkItem=n.guidWorkItem;var o=$.when(t.getPlanByParent(n.guidWorkItem));$.when(o).then(function(e){t.dataDashboard.menuDashboard.contextFormActivityOptionMenu=t.getPropertiesByDataServices(s,i,a,n).contextToShow,t.dataDashboard.contextToShow=t.dataDashboard.menuDashboard.contextFormActivityOptionMenu,t.dataDashboard.nameWorkItem=t.getPropertiesByDataServices(s,i,a,n).nameWorkItem;var o=e.length>0;t.dataDashboard.menuDashboard.contextPlanOptionMenu=t.getContextActionWhenClickButtonPlan(s,o),o&&(t.dataDashboard.params.planChild={},t.dataDashboard.params.planChild.id=e[0].id,t.dataDashboard.params.planChild.currentState=e[0].currentState),r.resolve()})}else t.dataDashboard.menuDashboard.contextFormActivityOptionMenu=t.CONTEXT_ACTIVITY,t.dataDashboard.contextToShow=t.dataDashboard.menuDashboard.contextFormActivityOptionMenu,t.dataDashboard.nameWorkItem=t.getPropertiesByDataServices(s,i,a,n).nameWorkItem,r.resolve()});else r.resolve()}),r.promise()},t.getPropertiesByDataServices=function(e,r,i,a,o){o=o||{};var s={isVisibleButtonForm:null,isVisibleButtonComments:null,isVisibleButtonFiles:null,isVisibleButtonTimeLine:null,isVisibleButtonPlan:null,contextToShow:null,nameWorkItem:null};return $.extend(s,t.getMenuDashboardSecurity(o)),e===t.TYPE_WORKITEM_TASK?(s.isVisibleButtonForm=!0,r?i?(s.isVisibleButtonPlan=o.Plans||!1,s.contextToShow=t.CONTEXT_ACTIVITY,a&&(s.nameWorkItem=a.state)):(s.isVisibleButtonPlan=!1,a&&(s.nameWorkItem=a.state)):(s.isVisibleButtonPlan=!1,s.contextToShow=t.CONTEXT_OVERVIEW,s.nameWorkItem=bizagi.localization.getResource("workportal-project-casedashboard-activity"))):e===t.TYPE_WORKITEM_ACTIVITY&&(r?(i?(s.contextToShow=t.CONTEXT_ACTIVITYPLAN,a&&(s.nameWorkItem=a.displayName)):s.contextToShow=t.CONTEXT_OVERVIEW,s.isVisibleButtonForm=!0,s.isVisibleButtonPlan=o.Plans||!1):(s.isVisibleButtonForm=!1,s.isVisibleButtonPlan=!1,s.contextToShow=t.CONTEXT_ACTIVITYPLANOVERVIEW,s.nameWorkItem=bizagi.localization.getResource("workportal-project-casedashboard-activity"))),s},t.getMenuDashboardSecurity=function(e){e=e||{};var t={isVisibleButtonComments:null,isVisibleButtonFiles:null,isVisibleButtonTimeLine:null};return t.isVisibleButtonComments=e.Comments||!1,t.isVisibleButtonFiles=e.Files||!1,t.isVisibleButtonTimeLine=e.TimeLine||!1,t},t.getParamsByBackFromPlan=function(e,r,i){var a={paramsNotify:{}};return t.planCreatedFromActivity(e)?(a.typeContext=t.CONTEXT_ACTIVITYPLAN,a.paramsNotify.showContextByMenuDashboard=a.typeContext,a.paramsNotify.level=r-1,a.paramsNotify.isRefresh=!1,e.plan.id=e.planParent.id,e.plan.idActivitySelected=e.planParent.idActivitySelected,e.menuDashboard.contextPlanOptionMenu=t.CONTEXT_PLANACTIVITIES):t.planCreatedFromTask(e)?(a.typeContext=t.CONTEXT_ACTIVITY,a.paramsNotify.showContextByMenuDashboard=a.typeContext,a.paramsNotify.level=r-1,a.paramsNotify.isRefresh=!1):a.typeContext=t.NOTIFICATION_NAVIGATOR_BACK,i&&(delete e.planChild,e.menuDashboard=e.menuDashboard||{},e.planParent&&e.planParent.id?e.menuDashboard.contextPlanOptionMenu=t.CONTEXT_ACTIVITYPLANCREATE:e.menuDashboard.contextPlanOptionMenu=t.CONTEXT_PLANCREATE),a},t.planCreatedFromActivity=function(e){return e.planParent&&e.planParent.id},t.planCreatedFromTask=function(e){return 1==e.plan.contextualized&&void 0!==e.menuDashboard},t.planFromActivity=function(e){return!!e.plan.idActivitySelected},t.getCaseSummaryDetails=function(e){return this.dataService.summaryCaseDetails({idCase:e.idCase||0,eventAsTasks:e.eventAsTasks,onlyUserWorkItems:e.onlyUserWorkItems})},t.getWorkitemsPlan=function(e){return this.dataService.getWorkitemsPlan({idPlan:e})},t.getServerDateDifference=function(){var e=this;return e.dataService.getDateServer().done(function(t){e.dataDashboard.params.differenceMillisecondsServer=bizagi.util.dateFormatter.getDifferenceBetweenDates(new Date,new Date(t.date),"milliseconds")})},t.getPlanByParent=function(e){if(e){var t={parentWorkItem:e};return this.dataService.getPlanByParent(t)}return[]},t.getFirstParentPlan=function(e){var t={idPlan:e};return this.dataService.getFirstParentPlan(t)},t.getFirstParentCase=function(e){var t={idPlan:e};return this.dataService.getFirstParent(t)},t.getPlan=function(e){return this.dataService.getPlan({idPlan:e})},t.getCurrentTheme=function(){var e="/Api/CurrentUser/GetCurrentTheme?"+new Date;window.CURRENT_THEME_REMOVE_IT=window.CURRENT_THEME_REMOVE_IT||"theme1",$.mockjax({url:e,proxy:"jquery/workportal/test/data/dummy."+window.CURRENT_THEME_REMOVE_IT+".txt"});var t=$.Deferred();return $.when($.read({url:e,dataType:"json"})).done(function(e){t.resolve(e)}).fail(function(){t.resolve(null)}),t.promise()},t.setContextToShow=function(e){bizagi.services.projectDashboardContext=e},t.removeCurrentTheme=function(){$("#bizagi-theme-resources,[rel='bizagi-themes-templates']").remove()},t.setCustomizeTheme=function(){var e=this;e.getCurrentTheme().done(function(t){bizagi.loader.startAndThen("theme.base").then(function(){e.setCurrentTheme(t)})})},t.setCurrentTheme=function(e){$("#ui-bizagi-wp-application").remove(),$container=$("<div id='ui-bizagi-wp-application' ng-app='bizagi.services.module' ng-controller='bizagi.services.controller'><div id='ui-bizagi-wp-workarea' style='height: 100%;'></div></div>"),$("body").append($container),$workarea=$("#ui-bizagi-wp-workarea"),$("#bizagi-theme-resources,[rel='bizagi-themes-templates']").remove(),$themeResourcesContainer=$("<div id='bizagi-theme-resources'></div>");for(var t="",r=0;r<e.files.css.length;r++)t+="<style>"+e.files.css[r].content+"</style>";for(r=0;r<e.files.js.length;r++)t+="<script>"+e.files.js[r].content+"<\/script>";$themeResourcesContainer.append(t),$themeResourcesContainer.appendTo("body");var i="";for(r=0;r<e.files.html.length;r++){var a=e.files.html[r].name.toLowerCase();a.indexOf("main.html")>=0||a.indexOf("mainview.html")>=0?i+=e.files.html[r].content:i+='<script rel="bizagi-themes-templates" type="text/ng-template" id="'+e.files.html[r].name+'">'+e.files.html[r].content+"<\/script>"}$workarea.append(i),setTimeout(function(){$("#workportal-theme-layer").removeClass("workportal-theme-layer-visible")},300),setTimeout(function(){$("#workportal-theme-layer").remove()},600);var o=bizagi.injector.get("globalHandlersService");$("#ui-bizagi-wp-project-homeportal-main,body,html").show(),o.publish("showMainMenu");var s=$("[ng-controller='bizagi.services.controller']");s.data("$injector",""),angular.bootstrap(s[0],["bizagi.services.module"])},t},bizagi.injector.register("bizagi.workportal.services.behaviors.projectDashboard",["dataService",bizagi.workportal.services.behaviors.projectDashboard],!0),bizagi.workportal.services.behaviors=bizagi.workportal.services.behaviors||{},bizagi.workportal.services.behaviors.orderActivitiesByTransitions=function(){var e=this;return e.tools={getObjectTransition:function(e,t){return{idActivityFrom:e,idActivityTo:t}},permuteArray:function(e){var t,r,i=[];for(t=0,length=e.length;t<length;t++)for(r=0;r<length;r++)e[t]!=e[r]&&i.push(this.getObjectTransition(e[t],e[r]));return i},getTransitionsBeforeGroup:function(e,t){var r=this,i=[];return t.forEach(function(t){i.push(r.getObjectTransition(e,t))}),i},getTransitionsAfterGroup:function(e,t){var r=this,i=[];return t.forEach(function(t){i.push(r.getObjectTransition(t,e))}),i},arrayUnique:function(e){for(var t=e.concat(),r=0;r<t.length;++r)for(var i=r+1;i<t.length;++i)t[r]===t[i]&&t.splice(i--,1);return t}},e.getTransitionsOnGroup=function(e,t,r){var i=[];if(e&&r)i=i.concat.apply([],[i,this.tools.getTransitionsBeforeGroup(e,t),this.tools.getTransitionsAfterGroup(r,t)]);else if(e)i=i.concat.apply([],[i,this.tools.getTransitionsBeforeGroup(e,t)]);else{if(!r)return[];i=i.concat.apply([],[i,this.tools.getTransitionsAfterGroup(r,t)])}return i},e.getActualTransitionsByActivities=function(t){for(var r=[],i=[],a=null,o=0;o<t.length;o+=1){if(t[o].parallel)i.push(t[o].id),o<t.length-1&&!t[o+1].parallel?(i.length>1?(r.length>0&&r.splice(-1,1),r=r.concat.apply([],[r,e.getTransitionsOnGroup(a,i,t[o+1].id)])):r=r.concat.apply([],[r,[e.tools.getObjectTransition(t[o].id,t[o+1].id)]]),i=[]):o===t.length-1&&t[o].parallel&&(r.length>0&&r.splice(-1,1),r.push.apply(r,e.getTransitionsOnGroup(a,i,null)));else{if(void 0===t[o+1])break;t[o+1].parallel?(a=t[o].id,r.push.apply(r,[e.tools.getObjectTransition(t[o].id,t[o+1].id)])):void 0!==t[o+1]&&r.push.apply(r,[e.tools.getObjectTransition(t[o].id,t[o+1].id)])}if(o===t.length-2&&!t[o+1].parallel)break}return r},e.getActivitiesByTransitions=function(e,t){var r=[];if(0===t.length)r=e,e.length>1&&e.filter(function(e){e.parallel=!0});else{var i=this.getOrderActivitiesByTransitions(t,e);if(activityGuidsInOrder=i.activitiesInOrder,parallelActivitiesHash=i.parallelActivitiesHash,0===activityGuidsInOrder.length)return e;for(var a=0,o=activityGuidsInOrder.length;a<o;a+=1)r=r.concat(e.filter(function(e){return e.id==activityGuidsInOrder[a]&&parallelActivitiesHash[e.id]&&(e.parallel=!0),e.id==activityGuidsInOrder[a]}))}return r},e.getOrderActivitiesByTransitions=function(e,t){for(var r=this,i={},a=e.map(function(e){return e.idActivityFrom}),o=e.map(function(e){return e.idActivityTo}),s=[],n=0;n<a.length;n+=1)-1===o.indexOf(a[n])&&(s=r.tools.arrayUnique(s.concat([a[n]])));if(0===s.length&&1===t.length)return{activitiesInOrder:[t[0].id],parallelActivitiesHash:[]};s.length>1&&s.forEach(function(e){i[e]=!0});var c=[];return function t(a){var o=[];var s=[];var n=!1;a.forEach(function(t){var a=r.getTransitionsByFrom(e,t),c=a.length;c>0&&(n=!0,a.forEach(function(e){o.push(e.idActivityFrom),s.push(e.idActivityTo)}),c>1&&s.forEach(function(e){i[e]=!0}))});{if(!n)return;var d=r.tools.arrayUnique(o.concat(s));c=r.tools.arrayUnique(c.concat(d)),t(s)}}(s),{activitiesInOrder:c,parallelActivitiesHash:i}},e.getTransitionsByFrom=function(e,t){return e.filter(function(e){return e.idActivityFrom===t})},e.movePositionActivity=function(e,t,r){return e.move(t,r),e},e},bizagi.injector.register("bizagi.workportal.services.behaviors.orderActivitiesByTransitions",[bizagi.workportal.services.behaviors.orderActivitiesByTransitions],!0),bizagi.workportal.services.behaviors=bizagi.workportal.services.behaviors||{},bizagi.workportal.services.behaviors.loadDataPlan=function(e,t){var r=this;return r.observableElement=$({}),r.dataService=e,r.serviceOrderActivitiesByTransitions=t,r.loadData=function(e,t,i){r.getDateServer=t,r.params=i,$.when(r.callGetPlan(e)).then(function(e){$.extend(r.params.plan,e,{activities:[],users:[]});var t={idPlan:r.params.plan.id};$.when(r.callGetFirstParent(t)).then(function(e){r.params.plan.firstParent=e;var t={idPlan:r.params.plan.id},i={idPlan:r.params.plan.id},a={idPlan:r.params.plan.id};$.when(r.dataService.getActivities(t),r.dataService.getWorkitemsPlan(i),r.dataService.getTransitionsByPlan(a)).then(function(e,t,i){var a=e||[];r.mergePropertiesActivitiesWithWorkitems(a,t),r.params.plan.activities=r.calculateActivityStatus(a),a=r.serviceOrderActivitiesByTransitions.getActivitiesByTransitions(a,i),r.params.plan.activities=a,r.publish("loadedWithDataActivities")}),r.publish("loadedWithDataFirstParent")})})},r.mergePropertiesActivitiesWithWorkitems=function(e,t){e.forEach(function(e){var r=t.filter(function(t){return t.guidActivity==e.id});r.length>0&&$.extend(e,{startDate:r[0].wiEntryDate||null,finishDate:r[0].wiSolutionDate||null,idWorkItem:r[0].idWorkItem,workItemState:r[0].workItemState,idCase:r[0].idCase,estimatedFinishDate:r[0].wiEstimatedSolutionDate||e.estimatedFinishDate})})},r.calculateActivityStatus=function(e){var t=this;return $.each(e,function(e,r){if(r.status="nodisplay",r.startDate&&r.estimatedFinishDate){var i=t.getDateServer(),a=r.estimatedFinishDate-r.startDate,o=r.startDate+.33*a,s=r.startDate+.66*a;i<o?r.status="ontime":o<=i&&i<s?r.status="delayed":s<=i&&(r.status="atrisk")}var n=r.items.filter(function(e){return!0===e.resolved});r.numResolvedItems=n.length,r.numTotalItems=r.items.length,r.numTotalItems>0&&(r.progress=Math.floor(r.numResolvedItems/r.numTotalItems*100))}),e},r.callGetPlan=function(e){var t=$.Deferred();return this.dataService.getPlan(e).always(function(e){200===e.status||201===e.status||void 0===e.status?t.resolve(e):t.reject()}),t.promise()},r.callGetFirstParent=function(e){var t=$.Deferred();return this.dataService.getFirstParent(e).done(function(e){t.resolve(e)}),t.promise()},r.subscribe=function(){r.observableElement.on.apply(r.observableElement,arguments)},r.unsubscribe=function(){r.observableElement.off.apply(r.observableElement,arguments)},r.publish=function(){return r.observableElement.triggerHandler.apply(r.observableElement,arguments)},r},bizagi.injector.register("bizagi.workportal.services.behaviors.loadDataPlan",["dataService","bizagi.workportal.services.behaviors.orderActivitiesByTransitions",bizagi.workportal.services.behaviors.loadDataPlan],!0),bizagi.workportal.services.action=function(e,t,r,i,a,o){var s=this;return s.observableElement=$({}),s.requestsInProgressActionGuid={},s.init=function(){s.model={}},t.loadTemplates({actionsTemplate:bizagi.getTemplate("bizagi.workportal.services.actions").concat("#actions-wrapper"),actionsTooltip:bizagi.getTemplate("bizagi.workportal.services.actions").concat("#actions-tooltip")}),s.getActionsData=function(t){return e.getActionsData(t).then(function(t){var r=new $.Deferred;return $.when.apply($,$.map(t,function(t){return"Process"==t.type&&e.actionsHasStartForm({processId:t.reference})})).done(function(){var e=$.makeArray(arguments),i=t.length;if(i>1)for(var a=0;a<i;a++)t[a].hasStartForm=e[a]&&e[a][0].startForm,t[a].entityId=e[a]?e[a][0].entityId:"",t[a].entityName=e[a]?e[a][0].entityName:"",t[a].xpathContext=e[a]?e[a][0].xpath:"";else 1==i&&(t[0].hasStartForm=e[0]&&e[0].startForm,t[0].entityId=e[0]?e[0].entityId:"",t[0].entityName=e[0]?e[0].entityName:"",t[0].xpathContext=e[0]?e[0].xpath:"");r.resolve(t)}),r.promise()})},s.processActionsData=function(e){var t=e.actions,r=e.isRefresh,i=e.isCase,a=e.isEvent,o=e.actionData;s.model[o.guidEntity]=s.model[o.guidEntity]||{},s.model[o.guidEntity][o.surrogateKey]=s.model[o.guidEntity][o.surrogateKey]||{};for(var n=0,c=t.length;n<c;n++){var d=t[n];d.isCase=i;var l=d.id||d.reference;s.model[o.guidEntity][o.surrogateKey][l]=$.extend(d,{surrogateKey:o.surrogateKey,guidEntity:o.guidEntity,idCase:o.idCase,radNumber:o.radNumber,guidFact:o.guidFact,guidLeftEntity:o.guidLeftEntity,guidRightEntity:o.guidRightEntity,surrogateKeyLeftEntity:o.surrogateKeyLeftEntity,xpath:o.xpath})}r&&(delete s.model[o.guidEntity][o.surrogateKey].actions,delete s.model[o.guidEntity][o.surrogateKey].events),a||null!=s.model[o.guidEntity][o.surrogateKey].actions||(s.model[o.guidEntity][o.surrogateKey].actions=t||[]),a&&null==s.model[o.guidEntity][o.surrogateKey].events&&(s.model[o.guidEntity][o.surrogateKey].events=t||[],null==s.model[o.guidEntity][o.surrogateKey].actions&&(s.model[o.guidEntity][o.surrogateKey].actions=[]),s.model[o.guidEntity][o.surrogateKey].actions=s.model[o.guidEntity][o.surrogateKey].actions.concat(t)),s.model[o.guidEntity][o.surrogateKey].entityActions=$.grep(s.model[o.guidEntity][o.surrogateKey].actions,function(e){return 2!=e.multiplicity}),s.model[o.guidEntity][o.surrogateKey].batchActions=$.grep(s.model[o.guidEntity][o.surrogateKey].actions,function(e){return 2==e.multiplicity})},s.getAction=function(e){var t=s.model[e.guidEntity]||{};return(t=t[e.surrogateKey]||{})[e.guidAction]},s.getActions=function(e){e=e||{};var t={};for(var r in e){var i=e[r],a=s.model[i.guidEntity]||{},o=i.surrogateKey||i.idCase;a=a[o]||{},t[o]=a.actions||[]}return t},s.getActionsView=function(e){var r=new $.Deferred,a=e.actionData,o=e.isRefresh,n=e.loadEvents,c=!n||i.dataReady(),d=a.surrogateKey>=0?s.getActionsData(a):[];return $.when(d,c).then(function(e){if(e.length>0){var r=void 0!==a.idCase;s.processActionsData({actions:e,actionData:a,isRefresh:o,isCase:r})}return{actionTemplate:t.getTemplate("actionsTemplate"),actions:e,idCase:a.idCase,actionData:a,surrogateKey:a.surrogateKey}}).then(function(e){if(n){var t=i.getEvents(e.idCase);t.length>0&&(s.processActionsData({actions:t,actionData:e.actionData,idCase:e.idCase,isCase:!1,isEvent:!0}),e.idCaseEvent=t[0].idCaseEvent,e.actions=e.actions.concat(t))}return e}).done(function(e){if(i=null,e.actions.length>0){var t=s.getActionsModel(a.guidEntity,a.idCase,a.surrogateKey);t.idCaseEvent=e.idCaseEvent;var i=e.actionTemplate.render(t);i.on("click",".actions-container li",s.executeAction),i.find(".actions-container li").tooltip()}r.resolve({actionsView:i,actionsData:e.actions})}),r.promise()},s.getActionsModel=function(e,t,r){return{actions:s.model[e][r].entityActions||[],idCase:t,guidEntity:e,surrogateKey:r}},s.getAccummulativeContext=function(e){return{context:[{entityGuid:e.guidEntity,surrogateKey:[e.surrogateKey]}]}},s.displayTooltipActions=function(e){var r=$(e.target),i=r.closest(".template-actions-container").data("entityguid"),a=r.closest(".template-actions-container").data("idcase"),o=s.model[i][a].entityActions.slice(6),n=t.getTemplate("actionsTooltip").render({actions:o,idCase:a,guidEntity:i});return n.appendTo(r.parent()),setTimeout(function(){n.click(function(e){e.stopPropagation()}),$(document).one("click",function(){n.remove()})},100),n},s.executeAction=function(t,r){var a=$(t.target);(r=r||s.getAction({guidEntity:a.closest(".template-actions-container").data("entityguid"),idCase:a.closest(".template-actions-container").data("idcase"),surrogateKey:a.closest(".template-actions-container").data("surrogatekey"),guidAction:a.closest("li").data("guid")})).idCaseEvent=a.closest(".template-actions-container").data("idcaseevent");var n=s.getHashForActionOrEvent(r);if(!s.requestsInProgressActionGuid[n]){var c=a.closest(".wdg-tple-button");if(s.addLoadingButtonAction(c,n),r)if(r.isEvent)i.processEvent(r),s.removeLoadingButtonAction(c,n);else{var d=r.type;if("Process"===r.type)o.countContext()>0&&o.isValidData("entityGuid",a.closest(".template-actions-container").data("entityguid"))?o.updateLastPosition({key:"surrogateKey",value:[r.surrogateKey]}):o.addContext({entityGuid:a.closest(".template-actions-container").data("entityguid"),surrogateKey:[r.surrogateKey]}),$.when(e.getMapping({guidEntity:r.entityId||r.guidEntity,accumulatedContext:o.getContext({}),xpathContext:r.xpathContext||r.entityName})).done(function(e){"function"==typeof s["onExecute"+d]&&s["onExecute"+d].apply(s,[r,e,c])});else"function"==typeof s["onExecute"+d]&&s["onExecute"+d].apply(s,[r,void 0,c])}}},s.getHashForActionOrEvent=function(e){var t=e.id;return e.isEvent&&(t=e.idWorkitem),t},s.onExecuteProcess=function(e,t,r){e.hasStartForm,$.when(a.executeProcessAction({action:e,mappingData:t})).done(function(){s.removeLoadingButtonAction(r,e.id)})},s.onExecuteForm=function(e,t,r){$.when(a.executeFormAction({action:e})).done(function(t){s.publish("onFormActionExecuted",$.extend(t,e))}),s.removeLoadingButtonAction(r,e.id)},s.onExecuteRule=function(e,t,r){$.when(a.executeRuleAction({action:e})).done(function(){s.removeLoadingButtonAction(r,e.id)}).fail(function(){s.removeLoadingButtonAction(r,e.id)})},s.getCommonActions=function(e){var t=s.getActions(e),r=0,i=[],a=[];for(var o in t)0==r&&(i=t[o]),1==r&&(a=t[o],i=s.actionIntersection(i,a)),r>1&&(i=s.actionIntersection(i,t[o])),r++;return i},s.actionIntersection=function(e,t){var r=[];if(0==e.length)return r;if(0==t.length)return r;for(var i=0,a=e.length;i<a;i++)for(var o=e[i],s=0,n=t.length;s<n;s++)o.id==t[s].id&&r.push(o);return r},s.subscribe=function(){s.observableElement.on.apply(s.observableElement,arguments)},s.unsubscribe=function(){s.observableElement.off.apply(s.observableElement,arguments)},s.publish=function(){return s.observableElement.triggerHandler.apply(s.observableElement,arguments)},s.addLoadingButtonAction=function(e,t){e.addClass("state-loading"),e.prepend('<div class="ui-bizagi-loading-icon ui-bizagi-loading-button"></div>'),s.requestsInProgressActionGuid[t]=!0},s.removeLoadingButtonAction=function(e,t){e.removeClass("state-loading"),e.find(".ui-bizagi-loading-button").remove(),delete s.requestsInProgressActionGuid[t]},{getActionsView:s.getActionsView,getCommonActions:s.getCommonActions,getActions:s.getActions,getActionsData:s.getActionsData,executeAction:s.executeAction,subscribe:s.subscribe,unsubscribe:s.unsubscribe,publish:s.publish,init:s.init}},bizagi.injector.register("actionService",["dataService","loadTemplatesService","usersCasesService","actionsEventsService","processActionService","accumulatedcontext",bizagi.workportal.services.action],!0),bizagi.workportal.services.accumulatedcontext=function(){var e=this;return e.context=[],e.addContext=function(t){t.surrogateKey&&t.entityGuid&&e.context.push({entityGuid:t.entityGuid,surrogateKey:t.surrogateKey})},e.updateLastPosition=function(t){e.context[e.context.length-1][t.key]=t.value},e.deleteContext=function(t){e.context.pop()},e.getContext=function(t){return t.empty||!1?{context:[]}:{context:e.context}},e.clean=function(t){e.context=[]},e.cutContext=function(t){e.context.splice(t)},e.getSpecificValue=function(t,r){if(e.context.length>0)return t?e.context[r][t]:void 0},e.isValidData=function(t,r){return e.getSpecificValue(t,e.countContext()-1)==r},e.countContext=function(){return e.context.length},{addContext:e.addContext,updateLastPosition:e.updateLastPosition,deleteContext:e.deleteContext,clean:e.clean,getContext:e.getContext,cutContext:e.cutContext,getSpecificValue:e.getSpecificValue,isValidData:e.isValidData,countContext:e.countContext}},bizagi.injector.register("accumulatedcontext",[bizagi.workportal.services.accumulatedcontext]),bizagi.workportal.services.processaction=function(e,t,r,i,a,o){var s=this;return s.observableElement=$({}),s.dialogBox={},o.loadTemplates({"popup-notification-template":bizagi.getTemplate("bizagi.workportal.services.processactions").concat("#popup-notification-template"),"popup-notification-rules-template":bizagi.getTemplate("bizagi.workportal.services.processactions").concat("#popup-notification-rules-template")}),s.executeProcessAction=function(t){var r=t.action,i=t.mappingData,o=t.mappingstakeholders||"",n=t.guidprocess||r.reference,c=1===r.multiplicity&&t.parentId>0?t.parentId:r.isCase&&2!==r.multiplicity?r.idCase:void 0,d=new $.Deferred;return s.executingBatchActions=t.executingBatchActions,r.hasStartForm?(data={closeVisible:!1,modalParameters:{title:r.displayName},isMultiInstance:2==r.multiplicity,mapping:i,mappingstakeholders:o,guidprocess:n,idParentCase:c},data.widgetInstance=bizagi.injector.get("bizagi.workportal.widgets.createcase",data),data.widgetInstance.sub("closeDialog",function(e,t){$(document).data("auto-save",""),s.launchActionsAfterCreateCase($.extend(t,{action:r,showConfirmation:t.showConfirmation})),d.resolve({action:r}),a.close()}),data.widgetInstance.sub("createCaseDisposed",function(e,t){d.resolve({refreshTemplateData:!1})}),a.renderWidget(data)):$.when(e.actionCreateCase({idProcess:r.reference,entityMapping:JSON.stringify(i),idParentCase:c})).done($.proxy(function(e){$.when(s.launchActionsAfterCreateCase($.extend({idCase:e.caseId,caseNumber:e.caseNumber},{action:this,showConfirmation:t.showConfirmation}))).done(function(){d.resolve({idCase:e.caseId,caseNumber:e.caseNumber,action:r})})},r)),d.promise()},s.launchActionsAfterCreateCase=function(e){var t=new $.Deferred;return $.when(s.currentUserBelongNextActivity(e.idCase)).done(function(i){s.executingBatchActions=s.executingBatchActions||!1,1==i&&0==s.executingBatchActions?(r.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:e.idCase}),t.resolve()):0==s.executingBatchActions&&e.action.showConfirmation?$.when(s.sendNotification({caseInfo:{idCase:e.idCase,caseNumber:e.caseNumber,displayName:e.action.displayName,showConfirmation:e.action.showConfirmation}})).done(function(){t.resolve()}):t.resolve()}),t.promise()},s.currentUserBelongNextActivity=function(e){var t=$.Deferred();return $.when(this.getCaseAssignees(e)).done(function(e){var r=e.assignees,i=!1;if(r)for(var a=0;a<r.length;a++)if(r[a].idUser==bizagi.currentUser.idUser){i=!0;break}t.resolve(i)}),t.promise()},s.getCaseAssignees=function(t){var r=$.Deferred();return $.when(e.getCaseAssignees({idCase:t})).done(function(e){r.resolve(e)}),r.promise()},s.sendNotification=function(e){return s.showDialogNotification([{idCase:e.caseInfo.idCase,caseNumber:e.caseInfo.caseNumber}],e.caseInfo.displayName,e.caseInfo.showConfirmation)},s.executeFormAction=function(e){var t=e.action,r=new $.Deferred,i=e.mappingData,a=e.action.readonlyform||!1,o={closeVisible:!1,modalParameters:{title:t.displayName},guidForm:t.reference};void 0!==i?$.extend(o,{entityGuid:t.guidEntity,mapping:i}):$.extend(o,{entityGuid:t.guidEntity,surrogateKey:t.surrogateKey}),$.extend(o,{readonlyform:a});var s=bizagi.injector.get("dialogWidgets");return o.widgetInstance=bizagi.injector.get("bizagi.workportal.widgets.updateform",o),o.widgetInstance.sub("closeDialog",function(e,t){s.close(),$.forceCollectData=!1,r.resolve(t)}),$.forceCollectData=!0,s.renderWidget(o),r.promise()},s.executeRuleAction=function(t){var r=t.action,i=new $.Deferred;return $.when(e.executeRule({surrogateKey:r.surrogateKey,entityId:r.guidEntity,ruleId:r.reference})).done(function(e){"success"===e.result?$.when(s.showDialogNotificationRules([[{id:e.id},"success"]],t.action.displayName,t.action.showConfirmation)).done(function(){i.resolve(e),t.refresh=!0,s.publish("onFormRuleExecuted",$.extend(e,t))}):$.when(s.showDialogNotificationRules([[{id:e.id},"error"]],t.action.displayName,t.action.showConfirmation)).done(function(){i.resolve(e)})}).fail(function(){i.reject()}),i.promise()},s.executeBatchAction=function(t){var r=t.action,i=t.commonActionsmodel,a=i.surrogateKeys,o=$.Deferred();if("Process"===r.type)if(1===r.multiplicity){var n=i.parentsid?i.parentsid:[];$.when(s.resolveMultiplicityValidate(t,a,n)).always(function(){o.resolve()})}else $.when(s.multiplicityValidate(t,[],0)).always(function(){o.resolve()});else 1===r.multiplicity?$.when(s.resolveBatchRules(a,r)).always(function(){o.resolve()}):$.when(e.executeRuleMultiple({surrogateKey:i.surrogateKeys,entityId:r.guidEntity,ruleId:r.reference})).done(function(e){"success"===e.result?$.when(s.showDialogNotificationRules([[{id:e.id},"success"]],r.displayName,r.showConfirmation)).done(function(){s.publish("onFormRuleExecuted",{refresh:!0}),o.resolve()}):$.when(s.showDialogNotificationRules([[{id:e.id},"error"]],r.displayName,r.showConfirmation)).done(function(){o.resolve()})}).fail(function(){$.when(s.showDialogNotificationRules([[{id:data.id},"error"]],r.displayName,r.showConfirmation)).done(function(){o.resolve()})});return o.promise()},s.resolveMultiplicityValidate=function(e,t,r){for(var i=$.Deferred(),a=[],o=0,n=t.length;o<n;o++)!function(t,r,o,n,c){setTimeout(function(){var d=s.multiplicityValidate(o,[n[t]],c[t]);a.push(d),t===r-1&&$.when.apply($,a).done($.proxy(function(){var e=arguments;if(e.length>1){var t=e.length>0&&e[0].action.showConfirmation;$.when(s.showDialogNotification(e,this.displayName,t)).done(function(){i.resolve()})}else i.resolve()},e.action))},1e3*t)}(o,n,e,t,r);return i.promise()},s.multiplicityValidate=function(t,r,a){var o=$.Deferred(),n=t.action,c=t.commonActionsmodel;return i.isValidData("entityGuid",c.guidEntity)?i.updateLastPosition({key:"surrogateKey",value:r.length>0?r:c.surrogateKeys.map(function(e){return"string"==typeof e?parseInt(e):e})}):i.addContext({entityGuid:c.guidEntity,surrogateKey:r.length>0?r:c.surrogateKeys.map(function(e){return"string"==typeof e?parseInt(e):e})}),$.when(e.getMapping({guidEntity:n.entityId,accumulatedContext:i.getContext({}),xpathContext:n.entityName})).done(function(e){t.mappingData=e,t.parentId=a,1==t.action.multiplicity&&t.commonActionsmodel.surrogateKeys.length>1&&(t.executingBatchActions=!0),$.when(s.executeProcessAction(t)).done(function(e){o.resolve(e)})}),o.promise()},s.resolveBatchRules=function(t,r){for(var i=$.Deferred(),a=[],o=0,n=t.length;o<n;o++){var c=$.when(e.executeRule({surrogateKey:t[o],entityId:r.guidEntity,ruleId:r.reference}));a.push(c)}return $.when.apply($,a).done($.proxy(function(){var e=arguments;e[0].id?$.when(s.showDialogNotificationRules([e],this.displayName,this.showConfirmation)).done(function(){s.publish("onFormRuleExecuted",{refresh:!0}),i.resolve()}):$.when(s.showDialogNotificationRules(e,this.displayName,this.showConfirmation)).done(function(){s.publish("onFormRuleExecuted",{refresh:!0}),i.resolve()})},r)),i.promise()},s.showDialogNotification=function(e,t,i){var a=$.Deferred();if(i){var n,c=bizagi.localization.getResource("workportal-widget-templateengine-action-process-notification"),d=$.map(e,function(e){var t=e.caseNumber||e.idCase;return{caseCreated:c.replace("{0}","<a href='#' data-idcase='"+e.idCase+"'>"+t+"</a>"),icon:"check"}}),l=o.getTemplate("popup-notification-template");n=d.length>1?bizagi.localization.getResource("workportal-widget-templateengine-message-summary-create-cases-plural"):bizagi.localization.getResource("workportal-widget-templateengine-message-summary-create-cases-singular"),n=printf(n,d.length),messageActionGoToCase=bizagi.localization.getResource("workportal-widget-templateengine-message-action-go-to-case"),s.dialogBox.formContent=l.render({messageCreatedCases:d,messageSummary:n,messageActionGoToCase:messageActionGoToCase});var u=new NotificationMessage(t,{body:s.dialogBox.formContent.html(),iconType:_NOTIFICATION_ICON_TYPE.CSS});u.onShow=function(){a.resolve()},u.onClick=function(e){e.preventDefault();var t=$(e.target).data("idcase");return t&&$(e.target).is("a")&&($(e.currentTarget).unbind(e),r.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:t})),this.close(),!1},r.publish("notification",{notification:u,type:_NOTIFICATION_TYPE.MODAL})}else a.resolve();return a.promise()},s.showDialogNotificationRules=function(e,t,i){var a=$.Deferred();if(i){var n="workportal-widget-templateengine-action-rule-notification-";e.length>1?n+="plural":n+="singular";var c=printf(bizagi.localization.getResource(n),t,e.length),d=bizagi.localization.getResource("workportal-widget-templateengine-action-rule-success"),l=bizagi.localization.getResource("workportal-widget-templateengine-action-rule-error"),u=(e=$.map(e,function(e){return{type:e.length>1?e[1]:"success"}})).filter(function(e){return"success"==e.type}).length,p=e.length-u,g=[];g.push({result:printf(d,u),type:"success",icon:"check"}),p>0&&g.push({result:printf(l,p),type:"error",icon:"error"});var m=o.getTemplate("popup-notification-rules-template");s.dialogBox.formContent=m.render({messageSummary:c,resultTotalRules:g});var f=new NotificationMessage(t,{body:s.dialogBox.formContent.html(),iconType:_NOTIFICATION_ICON_TYPE.CSS});f.onShow=function(){a.resolve()},f.onClick=function(e){return e.preventDefault(),this.close(),!1},r.publish("notification",{notification:f,type:_NOTIFICATION_TYPE.MODAL})}else a.resolve();return a.promise()},s.subscribe=function(){s.observableElement.on.apply(s.observableElement,arguments)},s.unsubscribe=function(){s.observableElement.off.apply(s.observableElement,arguments)},s.publish=function(){return s.observableElement.triggerHandler.apply(s.observableElement,arguments)},{executeProcessAction:s.executeProcessAction,executeFormAction:s.executeFormAction,executeRuleAction:s.executeRuleAction,executeBatchAction:s.executeBatchAction,subscribe:s.subscribe,unsubscribe:s.unsubscribe,publish:s.publish,sendNotification:s.sendNotification,currentUserBelongNextActivity:s.currentUserBelongNextActivity,launchActionsAfterCreateCase:s.launchActionsAfterCreateCase}},bizagi.injector.register("processActionService",["dataService","notifier","globalHandlersService","accumulatedcontext","dialogWidgets","loadTemplatesService",bizagi.workportal.services.processaction]),bizagi.workportal.services.userscases=function(e,t){var r=this;return r.imgPrefix="data:image/png;base64,",r.defaultImg=r.imgPrefix+"iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wEbDjkJ6ALlYAAAB05JREFUeNrtndlyGzcQRS/WWUkpcpL//0PbJGfBngdSLscpO6QlDQGwbxWf+DCYwUF3owE0WEopgfSw4vQJCAASAUAiAEgEAIkAIBEAJAKARACQCAASAUAiAEgEAIkAIBEAJAKARACQCAASAUAiAEgEAIkAIBUuWeuLve52TykhhIgQI4y1mBcD5z2+3w3POQcDwAVH1zRoWw3BOLjg3/5jjFX5nVgt5wJ+7PCYEg6nCcZYhBh/7+MwQEqJ3dCj0QqccwjOL/8xAiCXjo8pwXsP7wOs8zicpg95VqM1xqEDZwxKSgghwFjZMBQLQEoJMSas1mJdDVZj4UPY7PmNVmgbjbZpoJUE55wA2EohBKzGYjEG82Jwz1eQUqBrGnRtg6bR4IVZg+IAMNbhOM1Y1hUx5tN0ITjGvsPY95BSEAAfoXlZz4Gdddm2sW8b7MYBbaORUso+PijGcRlj8eVwzLrzAWBeDT4fjnDeFxEcFgFACBFfjic4H4qA1VqHL4dTEW0tAoDjNGM1tqjg6tVdEQBvHU3OYV7WIqdY87JuOjWtEoBpXuG8LxIAYx2Op5kAqN2M/kqnacayGgLgVsUYizX9/3qPlDCvK3KdbWcLQIixuMDvZ1pXm20skC0Aq7GIlRQwCzHCZpq/yBKAlBKW1aCWCnY5v0+2AOQ+fbpV500oZAFuoKCq/r90PlkAEgFwnQuozgQgkQu4xVzW1/2gIPAmC1AhAQTA9caySn+bKAi83gLUiADFAIVPmd46+skFPHIMQC7gBrHLr7ppALmA6xrFKiSAIcszA1kCwBirzgAwMDBOAFxpATgqJOD8XgTAFY3iDLXZALIApCyRJgAeXAQAAUAiAHIMmSqcBeQYBWSaB6ivKBNnLMsoMNu1gJyKP7yHYkpZLgdmCYDzAbVdap7iuXoZAXANAM4hpliZBYgwzhEA15rLVOG28BjJAlwdA1QpWg6+0gLEVB8EKf12xdLHswAVbgeibeE3SHBeXR6AMQYhaDn4ukZdKnRXBcDlvQiAB7UAYIwAuFZKyipTwSrDErJZAiClKLb69q/cmpKSALg2YNqNfT2XMjCGoW+zfJ9sh1nfNkVV3f6lRRMcQ9flaZlyNplj31UBQN+14JwRALeqa5ss/eZto1+g79ps3VnWACgp8bQbio0FGGPYjwO0UvkGpyWYz65tigSg0QrjkLcb4yWMopenXbY+9OcxDMOn5z3dGPIeEkLgr5fnogD442kPWUD8Uky2RWtdjCtotEJfSFuLAYAzhpcCTCoA/PnyXEwms6h8qxQCf3/6I+s2/vXy/O16WQLgI1yBktiPQ5ZtG4cObaOLmrYWBwDnHPuxR9+1WbWrbTSedmNxi1hFLrkJIfA0DtmsFQjO8bQbIUV5axfFrrlqrbAf758lZAB244BGqyK/Y9GL7kPf3T3TNvQddkNXbLq6aAA4Y9gNPdpG3+X5SkmMQ1/05pXit90oKbHfDZuvGgpx9vulmv5qAACArmkw9NvOCoauw5DZTORhAXj1xVuNRiXl5sARAP8jKcRmbqDRClqpKo6vVbX1VkqxyYEScZnv17BptSoAzhVGP7ZTcj3iRQAA8OHjK4uklOB9IABy1FYFGHIs9EAAkB4bgBjjZtfNhhirKWBRDQDGOjjnN3mWdQ6rtQRATnLObxoDbAUbAXBlZO6C36ywTEqAr6SWYRUAOO9hzLY1+Ix1VUwHqwDAWocQtu0MH3yWhR8fDgDnPU7zcq7Fu+msI2Gal83BIwD+E5H7u5li5z1s4cFg0QDEGDHPy90KMIYQMS3r5taHAPguELv3CLQb5h8IgB988GleNsv+/coNHKe52ClhkQCkdA7AltVk0Z51Ndm0pXoAUkqYlhVfT1M2oy7EiK/HCaspLz3MUkG2K8aIw2nGcZqzXJKV8nxiqe+6YgpaFAFASgnOeXw+HLMfZZwzdG2LpztsVa8SAH9J9EzzeveA7xYpKTEOHca+y/rgSHYApJTAGEOMEauxOJwmWOeLjLIZY+jaBvuxR6M1AXCtpmXFNC8w1lWx/UoKgbbV2PU9dGYnibICwBiL4zRjWU3R2bWfSQiOoWuxH8dsdhZnAYBzHp+/HmGsrbLj/wMC5xj6Dvux/3bG4OEAiDEhxIDTtOBwmvCI4pzj0/MejdbgnN3loMmmAKR0vg3M+YDjacK0rCCdj7k/7Ub0XQshtr0tZTMAnPdwzmMxBqdpoV7/SQ7h9ci5FGIT9/BhAKR0vvzNew9rPaZlKTJVei8QurZF3zZotDpfovVBVuHdAUgpwYcAe1mqNdbCWEe9+oY8glYSjVZQUr67VXgTAK9JG+C8OSKEgNVazMsK70OWN2UWm0uQAlopDF0LpSQEF++y3vBmC2CsvYx0d96cGQNiTNRjHziFVEpCKwWtFVqt35RT+G0AVmNgrMO0rAg+PMT8PS/3cD4O3zQa7aWQ9u/UTbwJgBgjjtP87RhWTWfkSp9GSimh5Pl6mluqqP4Dgrqd72A90SkAAAAASUVORK5CYII=",r.globalHandlersService=bizagi.injector.get("globalHandlersService"),t.loadTemplates({assignees:bizagi.getTemplate("bizagi.workportal.services.userscases").concat("#usersrelated-wrapper")}),r.dataReady=function(){return r.promiseData},r.render=function(t){r.cases=[];var i=$.map(t,function(t){return e.getUsersCases({caseId:t}).done(function(e){var i={idCase:t,assignees:e.assignees,createdBy:e.createdBy,users:r.getUniqueUsers($.merge([e.createdBy],e.assignees))};r.cases.push(i)})});return r.promiseData=$.when.apply($,i).then(function(){return r.getAllUsers(r.cases)}),r.promiseData},r.getAllUsers=function(e){r.users=[];for(var t=[],i=0,a=e.length;i<a;i++)for(var o=e[i],s=0,n=o.users.length;s<n;s++){var c=o.users[s];r.users.find(function(e){return e.idUser==c.idUser})||(r.users.push(c),t.push(c.idUser))}return r.extendedUserInfo(t),r.users},r.getInitials=function(e){var t=e.split(" ");return((void 0!==t[0]?t[0].charAt(0):"")+(void 0!==t[1]?t[1].charAt(0):"")).toUpperCase()},r.getUniqueUsers=function(e){var t=[],i=[];return $.each(e,function(e,a){-1==$.inArray(a.idUser,i)?(t.push({idUser:a.idUser,guidUser:a.idUser,name:a.name,initials:r.getInitials(a.name),owner:e<=0,isAssignee:0!=e}),i.push(a.idUser)):t[0].isAssignee=t[0].idUser==a.idUser}),t},r.extendedUserInfo=function(t){var i={usersGuids:t.join(","),width:30,height:30,square:!0};""!==i.usersGuids&&(r.userInfoPromise=e.getUsersData(i).then(function(e){for(var t=0,i=e.length;t<i;t++){var a=r.users.find(function(r){return e[t].id==r.idUser});a&&(a.extendedInfo=e[t])}usersAdapter.matchUsersForExtendedInfoCase(r.cases,r.users)}))},r.getUser=function(e){return $.when(r.userInfoPromise).then(function(){return r.users.find(function(t){return t.idUser==e})})},r.getAssignees=function(e){var i=new $.Deferred;return $.when(r.dataReady()).done(function(){var a=r.cases.find(function(t){return t.idCase==e}),o=a.users.length,s=o>2?a.users.slice(0,2):a.users,n={defaultImg:r.defaultImg,assignees:s,idCase:e,totalAssignees:o},c=t.getTemplate("assignees").render(n);r.showModalUsers(i.promise(),c),r.displayUsersImages(s,c),c.on("mouseenter",".usersrelated-container li.users",function(e){var t=$(e.target).closest(".template-usersrelated-section");$(".usersrelated",t).length&&$(".usersrelated",t).remove(),r.showTooltipUsersAssignees(e)}),c.on("mouseenter",".usersrelated-container li.totalUsers",function(e){$("#userstooltip__container").stop(!0).fadeTo(400,1)}),i.resolve(c)}),i.promise()},r.getUsersArrayForSendData=function(e){for(var t=[],i=0;i<e.length;i++){var a="",o="";e[i].extendedInfo&&(a=e[i].extendedInfo.picture?r.imgPrefix+e[i].extendedInfo.picture:void 0,o=e[i].extendedInfo.email,e[i].initials,userAssigned=e[i].extendedInfo.email,e[i].userAssigned);var s=usersAdapter.createJsonUserInfo(userAssigned,e[i].name,e[i].extendedInfo.username,a,o,e[i].initials,e[i].isAssignee,e[i].owner,[],[]);t.push(s)}return t},r.showTooltipUsersAssignees=function(e){var r=$(e.target),i=r.closest(".template-usersrelated-section"),a=r.closest(".usersrelated-container").data("idcase"),o=r.closest("li.users").data("owner")||!1,s=this.cases.find(function(e){return e.idCase==a}).users;s=o?s.slice(0,1):s.slice(1,s.length);var n=usersAdapter.createJsonUserInfo(s[0].extendedInfo.userAssigned,s[0].extendedInfo.name,s[0].extendedInfo.username,s[0].extendedInfo.picture?this.imgPrefix+s[0].extendedInfo.picture:void 0,s[0].extendedInfo.email,s[0].initials,s[0].isAssignee,s[0].owner,[],[]);i.usertooltip(t,{target:r,user:n,closeOn:$("li.totalUsers",i)})},r.showModalUsers=function(e,t){e.done(function(){$(".totalUsers",t).click(function(e){var t=$(e.target).closest(".usersrelated-container").data("idcase"),i=r.cases.find(function(e){return e.idCase==t}).users;e.preventDefault(),e.stopPropagation(),r.globalHandlersService.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_USERS_MODAL,closeVisible:!0,data:r.getUsersArrayForSendData(i),maximize:!0,modalParameters:{title:bizagi.localization.getResource("workportal-project-users-title")+" ("+i.length+")",width:790,height:526,refreshInbox:!1}})})})},r.displayUsersImages=function(e,t){for(var i=[],a=0,o=e.length;a<o;a++)i.push(e[a].idUser);setTimeout(function(){for(var e=0,a=i.length;e<a;e++)$.when(r.getUser(i[e]),i[e]).done(function(e,i){e.extendedInfo.picture&&t.find(".userId-"+i).attr("src",r.imgPrefix+e.extendedInfo.picture).show("fast").parent().find("span.initials").hide()})},0)},{dataReady:r.dataReady,getAssignees:r.getAssignees,render:r.render}},bizagi.injector.register("usersCasesService",["dataService","loadTemplatesService",bizagi.workportal.services.userscases]),bizagi.workportal.services.actionsevents=function(e,t){var r=this;return r.render=function(t){r.cases=[];var i=$.map(t,function(t){return e.getActionsEvents({caseId:t}).done(function(e){var i=t;void 0!==e&&e.length>0&&e[0].length>0&&(i=e[0][0].idCase,e[0].forEach(function(e){e.idCaseEvent=i}));var a={idCase:t,idCaseEvent:i,events:e[0]||[]};r.cases.push(a)})});return r.promiseData=$.when.apply($,i).then(function(e){return r.cases}),r.promiseData},r.dataReady=function(){return r.promiseData},r.getEvents=function(e){var t=r.cases.find(function(t){return t.idCase==e});return t&&t.events?t.events:[]},r.processEvent=function(e){t.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:e.idCaseEvent,idWorkItem:e.idWorkitem,idTask:e.idTask,idWorkflow:e.idWorkflow})},{getEvents:r.getEvents,dataReady:r.dataReady,processEvent:r.processEvent,render:r.render}},bizagi.injector.register("actionsEventsService",["dataService","globalHandlersService",bizagi.workportal.services.actionsevents]),bizagi.workportal.services.casetoolbar=function(e,t,r,i){var a=this;return r.loadTemplates({casetoolbarTemplate:bizagi.getTemplate("bizagi.workportal.services.casetoolbar").concat("#casetoolbar-wrapper")}),a.configureHandlers=function(e){e.on("click",".btn-view",a.onClickViewPath),e.on("click",".btn-fallowing",a.onClickFavorite),e.on("click",".btn-workonit",a.onClickWorkOnIt),e.find(".casetoolbar ul li").tooltip()},a.getCaseToolbar=function(e){var t=r.getTemplate("casetoolbarTemplate").render(e);return a.configureHandlers(t),t},a.onClickFavorite=function(r){r.preventDefault();var i={},a="",o=$(r.target).parent().data("idcase");$(r.target).hasClass("on")?(i={idObject:$(r.target).parent().attr("data-guid"),favoriteType:"CASES"},$.when(e.delFavorite(i)).done(function(e){a=(a=bizagi.localization.getResource("workportal-service-casetoolbar-following-off")).replace("{0}",o),$(r.target).toggleClass("on"),t.showSucessMessage(a,"",{})})):(i={idObject:$(r.target).parent().data("idcase"),favoriteType:"CASES"},$.when(e.addFavorite(i)).done(function(e){a=(a=bizagi.localization.getResource("workportal-service-casetoolbar-following-on")).replace("{0}",o),$(r.target).parent().attr("data-guid",e.idFavorites),$(r.target).toggleClass("on"),t.showSucessMessage(a,"",{})}))},a.onClickViewPath=function(e){e.preventDefault();var t=$(e.target).closest(".btn-view"),r={idCase:t.data("idcase"),idWorkflow:t.data("idworkflow")};bizagi.loader.start("processviewer").then(function(){i.showDialogWidget({widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GRAPHIC_QUERY,data:r,modalParameters:{title:bizagi.localization.getResource("render-graphic-query"),refreshInbox:!1},maximizeOnly:!0})})},a.onClickWorkOnIt=function(e){var t=$(e.target).parent().data("idcase");t||(t=$(e.target).data("idcase")),i.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:t})},{getCaseToolbar:a.getCaseToolbar,onClickFavorite:a.onClickFavorite}},bizagi.injector.register("casetoolbar",["dataService","notifier","loadTemplatesService","globalHandlersService",bizagi.workportal.services.casetoolbar]),bizagi.workportal.services.relatedusers=function(e,t){var r=this;r.init=function(){r.auxNoRepeatTypesUser={},r.dataRelatedUsers=[]},r.init(),r.dataService=e,r.idCase,r.content,r.hashTypesUser={assigned:bizagi.localization.getResource("workportal-project-user-assigned"),owner:bizagi.localization.getResource("workportal-project-user-owner")},t.loadTemplates({relatedUsersTemplate:bizagi.getTemplate("bizagi.workportal.services.relatedusers").concat("#relatedusers-wrapper")}),r.render=function(e,t,i,a){r.init(),r.$wrapper=e,r.selector=t,r.idCase=i,r.dataService.getCaseAssignees({idCase:i}).done(function(e){var t=r.getCSVUserIds(e.assignees,a);$.when(r.getUsersData(t)).done(function(t){r.prepareData(t,a,e),r.printUsers(r.dataRelatedUsers),r.addEventHandlersTooltip()})})},r.getCSVUserIds=function(e,t){var r=$.map(e,function(e){return e.idUser});return t.length>0&&null!=t[0].id&&r.unshift(t[0].id.toString()),(r=r.filter(function(e,t,r){return r.indexOf(e)==t})).join(",")},r.getCSVUserGuids=function(e,t){return $.map(e,function(e){return e.guidUser}).join(",")},r.getUsersData=function(e){var t=$.Deferred(),r={userIds:e,width:50,height:50};return this.dataService.getUsersData(r).done(function(e){t.resolve(e)}).fail(function(){t.resolve([])}),t.promise()},r.prepareData=function(e,t,i){var a=[];if(e){r.mergeTypesToAssignUsers(t,i);for(var o=0,s=e.length;o<s;o++){var n=r.prepareDataUser(e[o],t,i);a.push(n)}}r.dataRelatedUsers=a},r.mergeTypesToAssignUsers=function(e,t){for(var i=0,a=t.assignees.length;i<a;i++){void 0===r.auxNoRepeatTypesUser[t.assignees[i].idUser.toString()+"assigned"]&&(r.auxNoRepeatTypesUser[t.assignees[i].idUser.toString()+"assigned"]="",e.push({id:t.assignees[i].idUser||-1,typeName:"assigned"}))}},r.printUsers=function(){r.content=t.getTemplate("relatedUsersTemplate").render({users:r.dataRelatedUsers}),$("span, li",r.content).removeClass("nodisplay"),$(r.selector,r.$wrapper).html(r.content)},r.prepareDataUser=function(e,t,i){var a=e.id,o={id:a,name:e.name,email:e.email,username:e.username,initials:e.name.getInitials(),picture:e.picture?"data:image/png;base64,"+e.picture:void 0,types:r.assignUserTypes(a.toString(),t),tasks:r.getTasksUser(i,a.toString())};return o.typesString=$.map(o.types,function(e){return r.hashTypesUser[e]}).join(","),o},r.getTasksUser=function(e,t){for(var r=[],i=e.assignees.filter(function(e){return e.idUser.toString()===t}),a=0,o=i.length;a<o;a+=1)r.push({taskType:bizagi.util.parseBoolean(i[a].isEvent)?bizagi.localization.getResource("workportal-project-user-event"):bizagi.localization.getResource("workportal-project-user-task"),taskName:i[a].taskName,type:bizagi.util.parseBoolean(i[a].isEvent)?"event":"activity"});return r},r.assignUserTypes=function(e,t){for(var r=[],i=0,a=t.length;i<a;i+=1)e===t[i].id.toString()&&r.push(t[i].typeName);return r},r.addEventHandlersTooltip=function(){var e=this;$("ul.ui-bizagi-wp-userlist > li",e.content).on("mouseenter",function(r){var i=$(r.target),a=$(this).data("userid"),o=e.dataRelatedUsers.filter(function(e){return e.id===a})[0],s=usersAdapter.createJsonUserInfo(o.id,o.name,o.username,o.picture,o.email,o.initials,e.getIsAssignee(o),e.getIsOwner(o),e.getActivities(o),e.getEvents(o));i.parent().usertooltip(t,{target:i,user:s})})},r.getActivities=function(e){for(var t=[],r=0;r<e.tasks.length;r++)"activity"===e.tasks[r].type&&t.push(e.tasks[r].taskName);return t},r.getEvents=function(e){for(var t=[],r=0;r<e.tasks.length;r++)"event"===e.tasks[r].type&&t.push(e.tasks[r].taskName);return t},r.getIsAssignee=function(e){return e.types.indexOf("assigned")>-1},r.getIsOwner=function(e){return e.types.indexOf("owner")>-1}},bizagi.injector.register("relatedusers",["dataService","loadTemplatesService",bizagi.workportal.services.relatedusers],!0),bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{}),bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getUserStuff:function(e){var t={},r=this.serviceLocator.getUrl("stuff-handler-getUserStuff");return e&&e.icon&&void 0!==e.icon&&(t.icon=!0),$.read(r,t)}}),bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getSearchData:function(e){var t=this,r=t.serviceLocator.getUrl("my-search-getData");r=r.replace("{guidSearch}",e.guidSearch);var i=e.filters||[],a={filters:JSON.stringify(i),pag:e.page||1,calculateFilters:e.calculateFilters||!1,pagSize:e.pageSize||10,onlyLocalResults:e.onlyLocalResults||!1};return $.read(r,a).then(function(e){return t.serializeEntityData(e)})},getCollectionEntityData:function(e){var t,r,i=this;void 0!==(e=e||{}).filters&&(r=e.filters.filter(function(e){return void 0===e.properties}));var a={templateType:"VIRTUAL"===e.referenceType||"FACT"===e.referenceType?"List":"Content",surrogateKey:e.surrogateKey,pag:e.page||1,pagSize:e.pageSize||10,defaultFilterApplied:void 0===e.defaultFilterApplied||e.defaultFilterApplied,filters:JSON.stringify(r)||[]};return"VIRTUAL"===e.referenceType?(t=i.serviceLocator.getUrl("data-navigation-handler-collection"),a.reference=e.reference):(t=i.serviceLocator.getUrl("data-navigation-handler-entity"),a.reference=e.guidEntityCurrent||e.entityId,a.xpath=e.xpath,a.collectionId=e.reference),$.read(t,a).then(function(t){return $.extend(i.serializeEntityData(t),{reference:e.reference})})},getFiltersEntityData:function(e){var t;void 0!==(e=e||{}).filters&&(t=e.filters.filter(function(e){return void 0===e.properties}));var r={reference:e.guidEntityCurrent,collectionId:e.reference,surrogateKey:e.surrogateKey,xpath:e.xpath,templateType:"List",defaultFilterApplied:e.defaultFilterApplied,filters:JSON.stringify(t)};return $.read({url:this.serviceLocator.getUrl("data-navigation-handler-entity-filters"),data:r}).then(function(t){return $.extend(t,{reference:e.reference})})},getMapping:function(e){var t={accumulatedContext:JSON.stringify(e.accumulatedContext)};return e.xpathContext&&(t.xpathContext=e.xpathContext),e.guidEntity&&(t.guidEntity=e.guidEntity),e.guidAction&&(t.guidAction=e.guidAction),$.ajax({url:this.serviceLocator.getUrl("entities-handler-getMapping"),data:t,type:"POST",dataType:"json"})},actionsHasStartForm:function(e){var t={processId:e.processId};return $.read({url:this.serviceLocator.getUrl("handler-validate-action-has-start-form"),data:t,batchRequest:!0})},actionCreateCase:function(e){var t={processId:e.idProcess};return e.entityMapping&&(t.entityMapping=e.entityMapping),e.parentCaseId?t.parentCaseId=e.parentCaseId:t.parentCaseId=0,$.create({url:this.serviceLocator.getUrl("handler-execute-action-start"),data:t})},getIdCasesOfProcessEntities:function(e){e=e||{};var t={ids:JSON.stringify(e)};return $.ajax({url:this.serviceLocator.getUrl("process-handler-getIdCasesOfProcessEntities"),data:t,type:"POST"})},createCase:function(e){var t={idProcess:e.idProcess,entityMapping:e.entityMapping};return e.idParentCase&&(t.idParentCase=e.idParentCase),$.create({url:this.serviceLocator.getUrl("case-handler-startProcess"),data:t})},executeRule:function(e){var t={surrogateKey:e.surrogateKey,entityId:e.entityId,ruleId:e.ruleId};return $.create({url:this.serviceLocator.getUrl("actions-handler-executeRule-simple"),data:t})},executeRuleMultiple:function(e){var t={surrogateKey:JSON.stringify(e.surrogateKey),entityId:e.entityId,ruleId:e.ruleId};return $.create({url:this.serviceLocator.getUrl("actions-handler-executeRule-multiple"),data:t})}}),bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getDiscussionsData:function(e){var t=this.serviceLocator.getUrl("project-resource-get");return $.read({batchRequest:!0,url:t,data:e,dataType:"json"}).pipe(function(e){return e})},postDiscussion:function(e){var t=this.serviceLocator.getUrl("project-resource-action");return $.create({url:t.replace("{typeResource}","DiscussionGuid"),data:JSON.stringify(e),dataType:"json",contentType:"application/json"})},postTag:function(e){var t=this.serviceLocator.getUrl("project-resource-action");return $.create({url:t.replace("{typeResource}","Tag"),data:JSON.stringify(e),dataType:"json",contentType:"application/json"})},deleteTag:function(e){var t=this.serviceLocator.getUrl("project-resource-delete");return t=(t=t.replace("{typeResource}","Tag")).replace("{idResource}",e.idTag),$.destroy({url:t,data:JSON.stringify(e),dataType:"json",contentType:"application/json"})},getCommentsData:function(e){var t=this.serviceLocator.getUrl("project-comments-get");return $.read({batchRequest:!0,url:t,data:e,dataType:"json",contentType:"application/json"}).pipe(function(e){return e})},getCommentsCountByParent:function(e){var t={};t.idParent=e;var r=this.serviceLocator.getUrl("project-comments-count-by-parent");return $.read({url:r,data:t,dataType:"json",contentType:"application/json"})},postComment:function(e){var t=this.serviceLocator.getUrl("project-resource-action");return $.create({url:t.replace("{typeResource}","CommentGuid"),data:JSON.stringify(e),dataType:"json",contentType:"application/json"})},deleteComment:function(e){var t=this.serviceLocator.getUrl("project-resource-action");return $.destroy({url:t.replace("{typeResource}","CommentGuid"),data:JSON.stringify(e),dataType:"json",contentType:"application/json"})},editDiscussion:function(e){var t=this.serviceLocator.getUrl("project-resource-action");return $.update({url:t.replace("{typeResource}","DiscussionGuid"),data:JSON.stringify(e),dataType:"json",contentType:"application/json"})},getDownloadAttachment:function(e){var t=this.serviceLocator.getUrl("project-attachment-download");t=t.replace("{Attachment}",e),$("#project-dashboard-download").prop("src",t)}}),bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getTimeLineActivities:function(e){var t=this.serviceLocator.getUrl("project-timeline-events-get");return $.read({url:encodeURI(t.replace("{idCaseParamValue}",e)),dataType:"json",contentType:"application/json"})},getAssigneePicture:function(e){var t={userIds:e.join(),width:50,height:50},r=this.serviceLocator.getUrl("project-users-get");return $.post(r,t||{})},getItemsAssignees:function(e){var t=this.serviceLocator.getUrl("project-workitem-assignees");return $.read({url:t.replace("{idWorkitem}",e),dataType:"json",contentType:"application/json"})},getItemsAssignees:function(e){var t=this.serviceLocator.getUrl("project-workitem-assignees-items");return $.read({url:t.replace("{idWorkitem}",e),dataType:"json",contentType:"application/json"})}}),bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getCurrentTimeDateServer:function(){var e=this.serviceLocator.getUrl("project-util-current-time");return $.read({url:e,dataType:"json",contentType:"application/json"})},getUserPlans:function(e){var t=this.serviceLocator.getUrl("plans");return $.read({url:t+"?"+jQuery.param(e),dataType:"json"})},getPlanParent:function(e){var t=this.serviceLocator.getUrl("project-plan-parent");return $.read({url:t,data:e,dataType:"json"})},getFirstParent:function(e){var t=this.serviceLocator.getUrl("project-plan-first-parent"),r=$.Deferred();return $.when($.read({url:t,data:e,dataType:"json"})).done(function(e){r.resolve(e)}).fail(function(){r.resolve(null)}),r.promise()},getCaseByPlan:function(e){var t=this.serviceLocator.getUrl("project-plan-get-case");return $.read({url:t,data:e,dataType:"json"})},getFirstParentPlan:function(e){var t=this.serviceLocator.getUrl("project-plan-first-parent-plan"),r=$.Deferred();return $.when($.read({url:t,data:e,dataType:"json"})).done(function(e){r.resolve(e)}).fail(function(){r.resolve(null)}),r.promise()}}),bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getDateServer:function(){var e=this.serviceLocator.getUrl("project-util-current-time");return $.read({url:e,dataType:"json",contentType:"application/json"})},getUsersData:function(e){e.userIds=e.usersGuids?e.usersGuids:e.userIds;var t=this.serviceLocator.getUrl("project-users-get");return $.read({url:t,data:e,dataType:"json"})},editActivityPlan:function(e){var t=this.serviceLocator.getUrl("project-plan-activity-edit").replace("{idPlan}",e.idPlan).replace("{id}",e.id);return $.update({url:t,data:JSON.stringify(e),dataType:"json",contentType:"application/json"})},getPlanByParent:function(e){var t=this.serviceLocator.getUrl("project-plan-get-by-parent"),r=$.Deferred();return $.when($.read({url:t,data:e,dataType:"json",contentType:"application/json"})).done(function(e){r.resolve(e)}),r.promise()},getEffectiveDuration:function(e){var t=this.serviceLocator.getUrl("time-schemas-effectiveduration");return $.read({url:t,data:e,dataType:"json",contentType:"application/json"})},getEndHourWorkingByDate:function(e){var t=this.serviceLocator.getUrl("time-schemas-end-hour-working-by-date");return $.read({url:t,data:e,dataType:"json",contentType:"application/json"})},getItemsByActivity:function(e){var t=this.serviceLocator.getUrl("project-plan-activity-tasks-get");return $.read({url:t,data:e,dataType:"json",contentType:"application/json"})}}),bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{deletePlan:function(e){var t=this.serviceLocator.getUrl("project-plan-delete");return $.destroy({url:t.replace("{idPlan}",e.id),data:e,contentType:"application/x-www-form-urlencoded"})},createTemplateByPlan:function(e){var t=this.serviceLocator.getUrl("project-plan-template-create-by-plan");return $.create({url:t,data:JSON.stringify(e),contentType:"application/json"})},getTemplatesByParentWorkItem:function(e){var t=this.serviceLocator.getUrl("project-plan-template-get");return $.read({url:t,data:e,dataType:"json"})}}),bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getMyShortcuts:function(e){var t={},r=this.serviceLocator.getUrl("handler-get-myShortcuts");return e&&e.icon&&void 0!==e.icon&&(t.icon=!0),$.read(r,t)},getMyShortcutsByCategory:function(e){var t=new $.Deferred,r=[];return this.getMyShortcuts(e).done(function(e){$.each(e,function(e,t){var i,a,o=(i=t.classification.displayName,a={},$.each(r,function(e,t){t.category==i&&(a=t)}),a),s={displayName:t.displayName,idProcess:t.idProcess,icon:void 0!==t.icon?t.icon:null,showConfirmation:t.showConfirmation};$.isEmptyObject(o)?r.push({category:t.classification.displayName,items:[s]}):o.items.push(s)}),t.resolve(r)}),t.promise()}}),bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{}),bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{createProjectFile:function(e){var t=this.serviceLocator.getUrl("project-files-upload");return $.create({url:t,data:JSON.stringify(e),dataType:"json",contentType:"application/json"})},updateProjectFile:function(e){var t=this.serviceLocator.getUrl("project-files-upload");return $.update({url:t,data:JSON.stringify(e),dataType:"json",contentType:"application/json"})},deleteFile:function(e){var t=this.serviceLocator.getUrl("project-resource-action");return $.destroy({url:t.replace("{typeResource}","Attachment"),data:JSON.stringify(e),dataType:"json",contentType:"application/json"})},getFilesThumbnails:function(e){var t=this.serviceLocator.getUrl("project-files-thumbnails");return $.read({url:t,data:e,dataType:"json",contentType:"application/json"})},getFilesListByRadNumber:function(e){var t=this.serviceLocator.getUrl("project-files-list");return $.read({url:t,data:e,dataType:"json",contentType:"application/json"})}}),bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{postPlan:function(e){var t;return e.idTemplate&&0!==e.idTemplate.length?(t=this.serviceLocator.getUrl("project-plan-create-by-template"),$.create({url:t.replace("{idTemplate}",e.idTemplate),data:JSON.stringify(e),dataType:"json",contentType:"application/json"})):(t=this.serviceLocator.getUrl("project-plan-create"),e.idTemplate=void 0,$.create({url:t,data:JSON.stringify(e),dataType:"json",contentType:"application/json"}))}}),bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getPlan:function(e){var t=this.serviceLocator.getUrl("project-plan-get");return $.read({url:t,data:e,dataType:"json",contentType:"application/json"})},getActivities:function(e){var t=this.serviceLocator.getUrl("project-plan-activities");return $.read({batchRequest:!0,url:t,data:e,dataType:"json"}).pipe(function(e){return e})},getWorkitemsPlan:function(e){var t=this.serviceLocator.getUrl("project-plan-workitems");return $.read({batchRequest:!0,url:t,data:e,dataType:"json"}).pipe(function(e){return e})},getTransitionsByPlan:function(e){var t=this.serviceLocator.getUrl("project-plan-transitions-get");return $.read({batchRequest:!0,url:t,data:e,dataType:"json",contentType:"application/json"}).pipe(function(e){return e})}}),bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{}),bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getCaseAssignees:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getCaseAssignees"),{idCase:e.idCase}).pipe(function(e){return e})},getCaseAssigneesPreview:function(e){return e=e||{},$.read(this.serviceLocator.getUrl("case-handler-getCaseAssigneesPreview"),{idCase:e.idCase}).pipe(function(e){return e})}}),bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{}),bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getActivityMap:function(e){var t=this.serviceLocator.getUrl("activity-map"),r={};return e.radNumber&&(r.radNumber=e.radNumber),$.read({url:t,data:r})},getActivitySummary:function(e){var t={};return t.guidWorkitem=e.guidWorkitem,$.ajax({url:this.serviceLocator.getUrl("activity-map-getActivitySummary"),data:t,type:"GET",dataType:"json"})},getSubProcessMap:function(e){var t=this.serviceLocator.getUrl("subprocess-map"),r={};return(e=e||{}).radNumber&&(r.radNumber=e.radNumber),$.read({url:t,data:r})}}),bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{createPlanActivity:function(e){var t=this.serviceLocator.getUrl("project-plan-createactivity").replace("{idPlan}",e.idPlan);return $.create({url:t,data:JSON.stringify(e),dataType:"json",contentType:"application/json"})},changeTransitions:function(e){var t=this.serviceLocator.getUrl("project-plan-transitions-put");return $.update({url:t.replace("{idPlan}",e.idPlan),data:JSON.stringify(e.transitions),dataType:"json",contentType:"application/json"})},putExecutePlan:function(e){var t=this.serviceLocator.getUrl("project-plan-execute");return $.create({url:t,data:e,contentType:"application/x-www-form-urlencoded"})},updatePlan:function(e){var t=this.serviceLocator.getUrl("project-plan-update");return $.update({url:t.replace("{idPlan}",e.id),data:JSON.stringify(e),dataType:"json",contentType:"application/json"})},deleteActivityPlan:function(e){var t=this.serviceLocator.getUrl("project-plan-activity-delete");return $.destroy({url:t,data:e,dataType:"json",contentType:"application/json"})},closePlan:function(e){var t=this.serviceLocator.getUrl("project-plan-close");return $.create({url:t,data:e,contentType:"application/x-www-form-urlencoded"})}}),bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getActivity:function(e){var t=this.serviceLocator.getUrl("project-plan-activity-get");return $.read({url:t,data:e,dataType:"json",contentType:"application/json"})}}),bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{}),bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{}),bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getStartForm:function(e){return $.create({url:this.serviceLocator.getUrl("actions-handler-getDataForm"),data:e})}}),bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getEntityForm:function(e){return e=e||{},$.create({url:this.serviceLocator.getUrl("actions-handler-getDataForm"),data:e})}}),bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getActivitiesData:function(e){var t=this,r=t.serviceLocator.getUrl("process-handler-getActivitiesData"),i={page:(e=e||{}).page||1,pagsize:e.pageSize||10};return void 0!==e.idworkflow&&e.idworkflow&&(i.idWorkflow=e.idworkflow),void 0!==e.idCase&&e.idCase&&(i.idCase=e.idCase),$.read(r,i).then(function(e){return t.serializeEntityData(e)})},getPendingsData:function(e){var t=this,r=t.serviceLocator.getUrl("process-handler-getPendingsData"),i={page:(e=e||{}).page||1,pagsize:e.pageSize||10};return void 0!==e.idworkflow&&e.idworkflow&&(i.idWorkflow=e.idworkflow),void 0!==e.idCase&&e.idCase&&(i.idCase=e.idCase),void 0!==e.taskState&&e.taskState&&(i.taskState=e.taskState),$.read(r,i).then(function(e){return t.serializeEntityData(e)})},getActionsData:function(e){var t={guidEntity:(e=e||{}).guidEntity,surrogateKey:e.surrogateKey};return void 0!==e.idCase&&e.idCase&&(t.caseId=e.idCase),void 0!==e.tags&&e.tags&&(t.tags=e.tags),$.read({url:this.serviceLocator.getUrl("entities-handler-getActions"),data:t,batchRequest:!0})},getActionsEvents:function(e){var t={caseId:(e=e||{}).caseId};return $.read({url:this.serviceLocator.getUrl("process-handler-getActionsEvents"),data:t,batchRequest:!0}).then(function(e){for(var t=[],r=0,i=e.length;r<i;r++)e[r].reference=Math.guid(),e[r].isEvent=!0,t.push(e);return t})},getUsersCases:function(e){var t={caseId:(e=e||{}).caseId};return $.read({url:this.serviceLocator.getUrl("process-handler-getUsersCases"),data:t,batchRequest:!0}).pipe(function(e){return e})},getUsersData:function(e){return e.userIds=e.usersGuids?e.usersGuids:e.userIds,$.post(this.serviceLocator.getUrl("project-users-get"),e||{})}}),bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getMultipleInstancesActions:function(e){var t={guidEntity:e.guidEntity};return $.ajax({url:this.serviceLocator.getUrl("sort-bar-getMultipleInstancesActions"),data:t,type:"GET",dataType:"json"})},getProcessAddAction:function(e){var t,r=this.serviceLocator.getUrl("action-handler-getProcessAddAction"),i={reference:e.args.reference,surrogateKey:e.args.surrogateKey};return t=e.args.reference,$.read(r,i).then(function(e){return $.extend(e,{referenceEntity:t})})},executeAction:function(e){var t={actionGuid:e.actionGuid,guidEntity:e.guidEntity,mapping:JSON.stringify(e.mapping)};return $.ajax({url:this.serviceLocator.getUrl("sort-bar-execute"),data:t,type:"POST",dataType:"json"})}}),$.Class.extend("bizagi.workportal.desktop.widgets.dialog",{DIALOG_WIDTH:1080,DIALOG_HEIGHT:710},{init:function(e,t){this.dataService=e,this.workportalFacade=t,this.triggerCloseCallback=!0},renderWidget:function(e){var t,r=this,i=window.document,a=new $.Deferred;e=e||{},r.dialogBox=e.dialogBox=$("<div />"),"timeline"===e.widgetName&&(e.showCurrentDate=!0);var o=e.widgetInstance?e.widgetInstance:r.workportalFacade.getWidget(e.widgetName,e);function s(){$.when(o).then(function(r){return(t=r).render(e)}).done(function(){var o=t.getContent();r.dialogBox.append(o).appendTo("body",i),e.widget=t||null,r.showDialogBox(r.dialogBox,e).done(function(e){a.resolve()})})}return e.guidForm?bizagi.loader.start("rendering").then(function(){s()}):s(),a.promise()},showDialogBox:function(e,t){var r=this,i=[],a=new $.Deferred,o=t.modalParameters||{},s=null==t.closeVisible||t.closeVisible,n=null==t.closeOnEscape||t.closeOnEscape,c=null==t.dialogClass?"":t.dialogClass;i=s?[{text:bizagi.localization.getResource("workportal-widget-dialog-box-close"),click:function(){e.dialog("close"),!1!==o.refreshInbox&&r.refreshInbox()}}]:[],t.buttons&&(t.buttons.length>0?i=$.merge(i,t.buttons):$.extend(i,i,t.buttons));var d=o.height||t.modalParameters&&r.getDialogSize(t.modalParameters.id).height||this.Class.DIALOG_HEIGHT;return d=d>$(window).height()?$(window).height():d,e.dialog({widget:t.widget,show:o.show||"fade",width:o.width||t.modalParameters&&r.getDialogSize(t.modalParameters.id).width||this.Class.DIALOG_WIDTH,height:d,modal:!0,dialogClass:c,closeOnEscape:n,draggable:!1,title:o.title||"",maximize:void 0===t.maximize||t.maximize,maximized:void 0!==t.maximized&&t.maximized,maximizeOnly:void 0!==t.maximizeOnly&&t.maximizeOnly,buttons:i,resizable:t.modalParameters&&r.getResizableState(t.modalParameters.id)||!1,close:function(i,o){void 0!==t.widget&&void 0!==t.widget.dispose&&(t.avoidDispose||t.widget.dispose()),e.dialog("destroy"),e.remove(),a.resolve(),t.onClose&&r.triggerCloseCallback&&t.onClose()},open:function(i,a){t.modalParameters&&r.getDialogSize(t.modalParameters.id).maximize&&(r.getDialogSize(t.modalParameters.id).maximizeOnly&&e.dialog("option",{maximizeOnly:!0}),e.dialog("maximize")),o.dialogOpened&&o.dialogOpened.resolve({widgetReference:t.widget})}}),a.promise()},refreshInbox:function(){var e,t=$.isFunction(bizagi.cookie)?bizagi.cookie("bizagiDefaultWidget"):a,r=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX,i=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL,a=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID;switch(t){case r:e=r;break;case i:e=i;break;case a:e=a;break;default:e=i}return $(document).triggerHandler("changeWidget",{widgetName:e})},close:function(){this.triggerCloseCallback=!1,this.dialogBox.dialog("close")},getResizableState:function(e){var t;switch(e=e||""){case"EntityAdmin":t=!0;break;default:t=!1}return t},getDialogSize:function(e){e=e||"";var t={height:this.Class.DIALOG_HEIGHT,width:this.Class.DIALOG_WIDTH,maximize:!1,maximizeOnly:!1};switch(e){case"BAMProcess":case"BAMTask":case"AnalyticsProcess":case"AnalyticsTask":case"AnalyticsSensor":case"GRDimensionAdmin":t.maximizeOnly=!0,t.width=this.Class.DIALOG_WIDTH+220;case"BusinessPolicies":case"ResourceBAM":t.maximize=!0;break;case"UserAdmin":t.height=this.Class.DIALOG_HEIGHT+100;break;case"AsynchronousWorkitemRetries":t.width=this.Class.DIALOG_WIDTH+200;break;case"AdhocProcessAdmin":t.maximize=!0}return t}}),bizagi.injector.register("dialogWidgets",["dataService","workportalFacade",bizagi.workportal.desktop.widgets.dialog]),$.Class.extend("bizagi.workportal.desktop.facade",{getWidgetImplementation:function(e){return void 0===bizagi.workportal.widgets||void 0===bizagi.workportal.widgets.widget?"":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INTEGRATION?"bizagi.workportal.widgets.integration":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX?"bizagi.workportal.widgets.inbox":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOME?"bizagi.workportal.widgets.home":e.toUpperCase()==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL.toUpperCase()?"bizagi.workportal.widgets.homeportal":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ACTIVITY?"bizagi.workportal.widgets.project.activity":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROJECT_DASHBOARD?"bizagi.workportal.widgets.homeportal":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADVANCE_SEARCH?"bizagi.workportal.widgets.advanceSearch":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID?"bizagi.workportal.widgets.inboxGrid":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ROUTING?"bizagi.workportal.widgets.routing":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDER?bizagi.override.enableProjectDashboard?"bizagi.workportal.widgets.project.activity":"bizagi.workportal.widgets.render":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_START_FORM?"bizagi.workportal.widgets.startForm":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_NEWCASE?"bizagi.workportal.widgets.newCase":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SUBMENU?"bizagi.workportal.widgets.subMenu":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ASYNC?"bizagi.workportal.widgets.async":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERIES?"bizagi.workportal.widgets.queries":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERIES_DEFINITION?"bizagi.workportal.widgets.queries.definition":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERIES_SHORTCUT?"bizagi.workportal.widgets.queries.shortcut":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM?"bizagi.workportal.widgets.queryform":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME?"bizagi.workportal.widgets.genericiframe":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH?"bizagi.workportal.widgets.search":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_FOLDERS?"bizagi.workportal.widgets.folders":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PRINT?"bizagi.workportal.widgets.print":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_FONTSIZE?"bizagi.workportal.widgets.fontsize":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION?"bizagi.workportal.widgets.oldrenderintegration":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PAGE?"bizagi.workportal.widgets.page":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ENTITIES?"bizagi.workportal.widgets.entities":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDERFORM?"bizagi.workportal.widgets.renderform":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS?"bizagi.workportal.widgets.reports":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS_MENU?"bizagi.workportal.widgets.reportsMenu":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS_CHART?"bizagi.workportal.widgets.reportsChart":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SMARTFOLDERS?"bizagi.workportal.widgets.smartfolders":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASES?"bizagi.workportal.widgets.admin.cases":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ASYNCECM_UPLOAD?"bizagi.workportal.widgets.asyncecm.upload":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ACTIVITY_LOG?"bizagi.workportal.widgets.activity.log":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_AUTHENTICATION_LOG?"bizagi.workportal.widgets.authentication.log":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENCRYPT_PASSWORDS?"bizagi.workportal.widgets.admin.encrypt.passwords":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_REQUESTS?"bizagi.workportal.widgets.admin.users.requests":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASE_SEARCH?"bizagi.workportal.widgets.admin.caseSearch":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_HOLIDAYS?"bizagi.workportal.widgets.admin.holidays":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROJECTNAME?"bizagi.workportal.widgets.admin.projectName":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_OAUTH2APPLICATIONS?"bizagi.workportal.widgets.admin.oauth2Applications":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROCESS_TREE?"bizagi.workportal.widgets.processtree":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ENTITIES_TREE?"bizagi.workportal.widgets.entitiestree":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_USERS_TABLE?"bizagi.workportal.widgets.userstable":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_DEFAULTS_ASSIGNATION_USER?"bizagi.workportal.widgets.admin.defaults.assignation.user":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_USERS_MODAL?"bizagi.workportal.widgets.users.modal":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PROFILES?"bizagi.workportal.widgets.admin.user.profiles":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ASYNC_ACTIVITIES?"bizagi.workportal.widgets.admin.async.activities":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ALARMS?"bizagi.workportal.widgets.admin.alarms":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_LICENSES?"bizagi.workportal.widgets.admin.user.licenses":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_DIMENSIONS?"bizagi.workportal.widgets.admin.dimensions":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_DOCUMENT_TEMPLATES?"bizagi.workportal.widgets.admin.document.templates":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROCESSES?"bizagi.workportal.widgets.admin.processes":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES?"bizagi.workportal.widgets.admin.business.policies":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_DECISION_TABLE?"bizagi.workportal.widgets.admin.business.policies.decision.table":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_RULES?"bizagi.workportal.widgets.admin.business.policies.rules":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_TABS?"bizagi.workportal.widgets.admin.business.policies.tabs":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_POLITICS?"bizagi.workportal.widgets.admin.business.policies.politics":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_VOCABULARIES?"bizagi.workportal.widgets.admin.business.policies.vocabularies":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_TREE?"bizagi.workportal.widgets.tree":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_LANGUAGE?"bizagi.workportal.widgets.admin.language":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENTITIES?"bizagi.workportal.widgets.admin.entities":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GRAPHIC_QUERY?"bizagi.workportal.widgets.graphicquery":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REASSIGN_CASE?"bizagi.workportal.widgets.reassigncase":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_ADMINISTRATION?"bizagi.workportal.widgets.admin.usersAdministration":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION?"bizagi.workportal.widgets.admin.usersDelegation":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION_SEARCH_USER?"bizagi.workportal.widgets.admin.usersDelegation.searchUser":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_STAKEHOLDERS?"bizagi.workportal.widgets.admin.stakeholders":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_PREFERENCES?"bizagi.workportal.widgets.admin.preferences":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_DISPLAY_OPTIONS?"bizagi.workportal.widgets.admin.displayOptions":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_START_PROCESS?"bizagi.workportal.widgets.createcase":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROJECT_PROCESS_MAP?"bizagi.workportal.widgets.project.processMap":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROJECT_PROCESS_DIAGRAM_HELPER?"bizagi.workportal.widgets.project.processDiagram.helper":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROJECT_ACTIVITY_MAP_TOOLTIP?"bizagi.workportal.widgets.project.activityMap.tooltip":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROJECT_USERSUMMARY?"bizagi.workportal.widgets.usersummary":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_MYSEARCHLIST?"bizagi.workportal.widgets.mySearchList":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_LOADFORM?"bizagi.workportal.widgets.loadForm":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_TEMPLATE_ENGINE?"bizagi.workportal.widgets.templates":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_DIALOGNAV?"bizagi.workportal.widgets.dialognav":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROCESS_MODELER_VIEW?"bizagi.workportal.widgets.processmodeler":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_TIMELINE?"bizagi.workportal.widgets.project.timeline":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_PROCESSES?"bizagi.workportal.widgets.admin.adhoc.processes":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_ENTITIES?"bizagi.workportal.widgets.admin.adhoc.entities":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_USER_GROUPS?"bizagi.workportal.widgets.admin.adhoc.usergroup":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_BOOLEAN_EXP?"bizagi.workportal.widgets.admin.adhoc.booleanexp":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADHOC_CREATE_PROCESS?"bizagi.workportal.widgets.adhoc.create.process":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROFLY?"bizagi.workportal.widgets.profly":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SESSION_TIMEOUT?"bizagi.workportal.widgets.sessionTimeout":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SESSION_TIMEOUT_EXPIRED?"bizagi.workportal.widgets.sessionTimeoutExpired":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_USER_PRIVACY?"bizagi.workportal.widgets.user.privacy":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ACCESS_DENIED?"bizagi.workportal.widgets.accessDenied":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICES?"bizagi.workportal.widgets.admin.business.polices":e==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_TRANSFER_CASE_SECURITY_PERMISSIONS?"bizagi.workportal.widgets.admin.transfer.case.security.permissions":null}},{init:function(e,t){this.templates={},this.workportal=e,this.dataService=t,this.getWorkPortalVersion(),bizagi.injector.registerInstance("workportalFacade",this)},getWorkportal:function(){return this.workportal},initAsyncStuff:function(e){var t=this;if(bizagi.enableCustomizations){return $.when(bizagi.templateService.loadCustomTemplates().pipe(function(r){return e?t.loadTemplates():r}),this.loadPersonalizedTheme(),bizagi.util.loadFile({src:bizagi.getJavaScript("bizagi.workportal.desktop.overrides"),type:"js"})).done(function(e,t,r){bizagi.util.loadFile({src:bizagi.getStyleSheet("bizagi.overrides.desktop.custom.styles"),type:"css"})})}return e?$.when(t.loadTemplates()):null},loadTemplates:function(){var e=this,t=new $.Deferred;return $.when(e.loadTemplate("workportal",bizagi.getTemplate("bizagi.workportal.desktop")),e.loadTemplate("workportal.notCompatibleIE",bizagi.getTemplate("bizagi.workportal.desktop.notCompatibleIE")),e.loadTemplate("menu",bizagi.getTemplate("bizagi.workportal.desktop.menu")+"#ui-bizagi-workportal-widget-menu"),e.loadTemplate("menu.custom-button",bizagi.getTemplate("bizagi.workportal.desktop.menu")+"#ui-bizagi-workportal-widget-menu-custom-button"),e.loadTemplate("menu.security",bizagi.getTemplate("bizagi.workportal.desktop.menu")+"#ui-bizagi-workportal-widget-menu-permissions"),e.loadTemplate("menu.submenu",bizagi.getTemplate("bizagi.workportal.desktop.menu")+"#ui-bizagi-workportal-widget-menu-submenu"),e.loadTemplate("menu.submenu.container",bizagi.getTemplate("bizagi.workportal.desktop.menu")+"#ui-bizagi-workportal-widget-menu-submenu"),e.loadTemplate("menu.submenu.list",bizagi.getTemplate("bizagi.workportal.desktop.menu")+"#ui-bizagi-workportal-widget-menu-submenu-list"),e.loadTemplate("popup",bizagi.getTemplate("bizagi.workportal.desktop.popup")),e.loadTemplate("menu.modal.widgets",bizagi.getTemplate("bizagi.workportal.desktop.menu.modal.widgets")),e.loadTemplate("menu.modal.user",bizagi.getTemplate("bizagi.workportal.desktop.menu.modal.user")),e.loadTemplate("menu.modal.about",bizagi.getTemplate("bizagi.workportal.desktop.menu.modal.about")),e.loadTemplate("menu.modal.qr",bizagi.getTemplate("bizagi.workportal.desktop.menu.modal.qr")),e.loadTemplate("inbox-common-pagination-grid",bizagi.getTemplate("bizagi.workportal.desktop.widget.inbox.common")+"#ui-bizagi-workportal-widget-inbox-common-pagination-grid"),e.loadTemplate("inbox-common-pagination-inbox",bizagi.getTemplate("bizagi.workportal.desktop.widget.inbox.common")+"#ui-bizagi-workportal-widget-inbox-common-pagination-inbox"),e.loadTemplate("inbox-common-header",bizagi.getTemplate("bizagi.workportal.desktop.widget.inbox.common")+"#ui-bizagi-workportal-widget-inbox-common-header"),e.loadTemplate("inbox-common-header-folders",bizagi.getTemplate("bizagi.workportal.desktop.widget.inbox.common")+"#ui-bizagi-workportal-widget-inbox-folders"),e.loadTemplate("inbox-common-case-summary-oldrender",bizagi.getTemplate("bizagi.workportal.desktop.widget.inbox.common")+"#ui-bizagi-workportal-widget-inbox-common-oldrender"),e.loadTemplate("loadForm",bizagi.getTemplate("bizagi.workportal.desktop.widget.loadForm")+"#ui-bizagi-workportal-widget-loadForm"),e.loadTemplate("print-frame",bizagi.getTemplate("bizagi.workportal.desktop.widget.print")+"#bz-wp-widget-print-frame"),e.loadTemplate("print-frame-header",bizagi.getTemplate("bizagi.workportal.desktop.widget.print")+"#bz-wp-widget-print-frame-header"),e.loadTemplate("render",bizagi.getTemplate("bizagi.workportal.desktop.widget.render")+"#ui-bizagi-workportal-widget-render"),e.loadTemplate("search",bizagi.getTemplate("bizagi.workportal.desktop.widget.search")+"#ui-bizagi-workportal-widget-search"),e.loadTemplate("info-message",bizagi.getTemplate("common.bizagi.desktop.info-message")),e.loadTemplate("bizagi.workportal.desktop.upload.dialog",bizagi.getTemplate("bizagi.workportal.desktop.upload.dialog")),e.loadTemplate("bizagi.workportal.desktop.fileupload.form",bizagi.getTemplate("bizagi.workportal.desktop.fileupload.form"))).done(function(){t.resolve()}),t.promise()},loadTemplate:function(e,t){var r=this;return bizagi.templateService.getTemplate(t).done(function(t){r.templates[e]=t})},loadTemplateWebpart:function(e,t){var r=this;return bizagi.templateService.getTemplateWebpart(t).done(function(t){r.templates[e]=t})},getTemplate:function(e){return this.templates[e]},getMainController:function(){return new bizagi.workportal.controllers.main(this,this.dataService)},getMenuController:function(){return new bizagi.workportal.controllers.menu(this,this.dataService)},getWorkareaController:function(){return new bizagi.workportal.controllers.workarea(this,this.dataService)},getWidget:function(widget,params){var self=this,widgetImplementation=this.Class.getWidgetImplementation(widget);if(widgetImplementation)try{var dynamicFunction="var baDynamicFn = function(facade, dataService, params){ \r\n";return dynamicFunction+="return new "+widgetImplementation+"(facade, dataService, params);\r\n",dynamicFunction+="}\r\n",dynamicFunction+="baDynamicFn",dynamicFunction=eval(dynamicFunction),dynamicFunction(this,this.dataService,params)}catch(e){}else{var defer=new $.Deferred,webpart=bizagi.getWebpart(widget);if(webpart){var loadTheme=function(){return void 0!==bizagi.theme?self.loadPersonalizedTheme():""};return $.when(loadTheme(),bizagi.util.initWebpart(webpart)).done(function(){defer.resolve(new bizagi.workportal.widgets.webpart(self,self.dataService,$.extend(params,{webpart:widget})))}),defer.promise()}}return bizagi.log(widget+" widget not supported",params,"error"),null},getAction:function(e,t){return e==bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING?new bizagi.workportal.actions.routing(this,this.dataService,t):e==bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH?new bizagi.workportal.actions.search(this,this.dataService,t):(bizagi.log(e+" action not supported",t,"error"),null)},loadWebpart:function(e){var t=this,r=new $.Deferred,i=e.webpart,a=bizagi.getWebpart(i);return a||bizagi.webparts.addConfigurationMessage(e,"bizagi-sharepoint-loading-webpart-error"),$.when(bizagi.util.initWebpart(a)).done(function(){$.when.apply(this,$.map(a.tmpl,function(e){return t.loadTemplateWebpart(e.originalAlias,bizagi.getTemplate(e.alias,!0))})).done(function(){r.resolve()})}),r.promise()},getWebpart:function(webpartName,params){var webpart=bizagi.getWebpart(webpartName),webpartImplementation=webpart.class;if(webpartImplementation)try{var dynamicFunction="var baDynamicFn = function(facade, dataService, params){ \r\n";return dynamicFunction+="return new "+webpartImplementation+"(facade, dataService, params);\r\n",dynamicFunction+="}\r\n",dynamicFunction+="baDynamicFn",dynamicFunction=eval(dynamicFunction),dynamicFunction(this,this.dataService,params)}catch(e){bizagi.log(e)}return bizagi.log(webpartName+" webpart not supported",params,"error"),null},getLogo:function(e){var t="";try{var r=JSON.parse(e);t=r.inbox}catch(r){t=e}return t},loadPersonalizedTheme:function(){var e=this;if("undefined"==typeof Windows){var t=$.Deferred();return $.when(e.dataService.getCurrentTheme()).done(function(r){if(r=r||[],bizagi.themeLogo=e.getLogo(r.logo)||"img/img/barra/logo-bizagi.svg",$("#ui-bizagi-wp-app-menu-logo-client img").attr("src",bizagi.themeLogo),r.css){if(bizagi.theme=r,bizagi.theme.value)try{bizagi.theme.value=JSON.parse(bizagi.theme.value)}catch(e){}for(var i,a=$('head link [rel="stylesheet"]'),o=0;o<a.length;o++){if(-1!=$(a[o]).attr("href").indexOf("bizagi.custom.styles.css")){i=$(a[o]);break}}i?$('<style id="bizagi-theme">'+r.css+"</style>").insertBefore(i):$("head").append('<style id="bizagi-theme">'+r.css+"</style>")}t.resolve()}),t.promise()}},getWorkPortalVersion:function(){bizagi.setWorkPortalVersion(bizagi.loader.version),sessionStorage.setItem("bizVersion",bizagi.loader.version),sessionStorage.setItem("bizBasePath",bizagi.loader.basePath)}}),bizagi.workportal=bizagi.workportal||{},bizagi.workportal.currentInboxView||(bizagi.workportal.currentInboxView="inbox"),bizagi.workportal.state=bizagi.workportal.state||{},$.Class.extend("bizagi.workportal.facade",{},{init:function(e){this.deviceFactory=new bizagi.workportal.device.factory(this),this.dataService=new bizagi.workportal.services.service(e),this.dataService.routing=new bizagi.workportal.services.routing({dataService:this.dataService}),this.defaultParams=e||{},this.timeoutID},loadDefaultWidget:function(){if(!this.defaultWidget&&!bizagi.util.isEmpty(window.location.hash)){var e=bizagi.util.getHashParams();"/"!=e[0]&&(this.defaultWidget=e[0])}if(!this.defaultWidget&&!bizagi.util.isEmpty(window.location.search)){var t=bizagi.util.getQueryString();"activityform"!==t.widget&&"activityform"!==this.defaultParams.widget||bizagi.util.isMobileDevice()?this.defaultWidget=t.widget:(this.defaultWidget="projectDashboard",this.defaultParams.caseLink=!0)}this.defaultWidget||bizagi.util.isEmpty(this.defaultParams.widget)||(this.defaultWidget=this.defaultParams.widget),this.defaultWidget||"undefined"==typeof BIZAGI_DEFAULT_WIDGET||bizagi.util.isEmpty(BIZAGI_DEFAULT_WIDGET)||(this.defaultWidget=BIZAGI_DEFAULT_WIDGET),!this.defaultWidget&&bizagi.cookie("bizagiDefaultWidget")&&(this.defaultWidget=bizagi.cookie("bizagiDefaultWidget")),this.defaultWidget||(this.defaultWidget="smartphone_ios"==bizagi.util.detectDevice()||"smartphone_android"==bizagi.util.detectDevice()?bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID),"projectDashboard"!==this.defaultWidget&&"homeportal"!==this.defaultWidget&&bizagi.cookie("bizagiDefaultWidget",this.defaultWidget,{expires:30}),"homeportal"===this.defaultWidget&&bizagi.cookie("bizagiDefaultWidget",bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID,{expires:30}),this.dataService&&!this.dataService.online&&bizagi.util.isTabletDevice()&&bizagi.cookie("bizagiDefaultWidget",bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX,{expires:30})},execute:function(e){var t=this,r=this.ownerDocument,i=$("body",r);return e=e||$("<div/>").appendTo(i),t.loadDefaultWidget(),t.executionDeferred=new $.Deferred,t.process().done(function(r){bizagi.util.replaceSelector(i,e,r),t.executionDeferred.resolve()})},createWebpart:function(e){return this.executeWebpart($.extend(e,{creating:!0}))},testWebpartConfiguration:function(e){var t=e.webpartConfiguration,r=this.ownerDocument,i=$("body",r);e.canvas||$("<div/>").appendTo(i);return!(!t.url||""==t.url)||(bizagi.webparts.addConfigurationMessage(e,"bizagi-sharepoint-configuration-error"),!1)},executeWebpart:function(e){var t=this.ownerDocument,r=$("body",t),i=e.canvas||$("<div/>").appendTo(r),a=!0;if(e.webpartConfiguration&&(a=this.testWebpartConfiguration(e)),a)return this.processWebpart(e).done(function(e){i.append(e.content)})},ready:function(){return this.executionDeferred.promise()},process:function(){var e=this,t=new $.Deferred,r=this.deviceFactory.getWorkportalFacade(e.dataService);return e.processOfflineData(),$.when(r).pipe(function(t){return e.processWorkportal(t)}).done(function(e){t.resolve(e)}),t.promise()},processOfflineData:function(){var e=this;void 0!==e.dataService.fetchOfflineData&&1==e.dataService.online&&$.when(e.dataService.pushOfflineData()).always(function(){e.dataService.fetchOfflineData()})},processWebpart:function(e){var t,r,i=new $.Deferred;bizagi.detectRealDevice();return t=this.deviceFactory.getWorkportalFacade(this.dataService,!1),$.extend(e,this.defaultParams),$.when(t).pipe(function(t){var r=new $.Deferred;return $.when(t.loadWebpart(e)).done(function(){r.resolve(t)}),r.promise()}).pipe(function(t){return(r=t.getWebpart(e.webpart,e)).render(e)}).done(function(e){i.resolve({webpart:r,content:e})}),i.promise()},processWorkportal:function(e){var t=this,r=this.mainController=e.getMainController();new $.Deferred;return r.render().then(function(e){return $.when(r.menu.isRendered()).then(function(){var e=t.getWidgetByDataUser(t.defaultParams);if("projectDashboard"===e&&t.defaultParams.caseLink){var i={action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:bizagi.util.getQueryString().idCase,guid:bizagi.util.getQueryString().guid,caseLink:!0};void 0!==bizagi.util.getQueryString().idWorkitem&&(i.idWorkItem=bizagi.util.getQueryString().idWorkitem),r.publish("executeAction",i)}else r.setWidget($.extend(t.defaultParams,{widgetName:e},bizagi.util.getQueryString()));r.menu&&(r.menu.performResizeLayout(),e!==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX&&e!==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID||t.mainController.publish("showMainMenu"))}),e})},getWidgetByDataUser:function(){var e=this,t=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID,r="projectDashboard"!==e.defaultWidget?bizagi.cookie("bizagiDefaultWidget"):"projectDashboard",i="",a=JSON.parse(bizagi.cookie("bizagiUserDisplayOptions"));if(a&&a.startPage)i={key:"userstartpage",value:a.startPage};else if(bizagi.currentUser.sUserProperties)for(var o=0,s=bizagi.currentUser.sUserProperties.length;o<s;o++)if("userstartpage"===bizagi.currentUser.sUserProperties[o].key){i=bizagi.currentUser.sUserProperties[o];break}return r!=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX&&r!=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID&&r!=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL?t=r:void 0===i||""===i||""===i.value||"1"===i.value?t=e.getWidgetByCookieAndStakeholders():"2"===i.value&&e.currentUserHaveStakeholderAssociated()?t=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL:"2"!==i.value||e.currentUserHaveStakeholderAssociated()?"3"===i.value&&(t=e.getWidgetByCookie(!0)):t=e.getWidgetByCookie(!0),t},getWidgetByCookieAndStakeholders:function(){return this.getWidgetByCookie(!1)},currentUserHaveStakeholderAssociated:function(){return bizagi.currentUser.associatedStakeholders&&bizagi.currentUser.associatedStakeholders.length>0},getWidgetByCookie:function(e){var t=bizagi.cookie("bizagiDefaultWidget");return e?t===bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX||t===bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID?t:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID:this.currentUserHaveStakeholderAssociated()?bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL:t&&t===bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX||t===bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID?t:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID},getMainController:function(){return this.mainController}}),$.Class.extend("bizagi.workportal.observable",{},{init:function(){this.observableElement=$({})},sub:function(e){var t=$._data(this.observableElement[0],"events");t&&t[e]||this.observableElement.on.apply(this.observableElement,arguments)},unsub:function(){this.observableElement.off.unbind?this.observableElement.off.unbind.apply(this.observableElement,arguments):this.observableElement.off.apply(this.observableElement,arguments)},pub:function(){return this.observableElement.triggerHandler.apply(this.observableElement,arguments)}}),bizagi.workportal.observable.extend("bizagi.workportal.widgets.manager",{createCase:"bizagi.workportal.widgets.createcase",updateForm:"bizagi.workportal.widgets.updateform"},{init:function(e,t,r,i){var a=this;a._super(),a._facade=e||null,a._dataService=t||null,a._notify=r,a._widgets={},a._innerWidgets={},a._mainWidgets={},a._context="none",a._layouts=[],a._supportNav=i&&i.supportNav,a._facade.workportal.mainController.subscribe("changeWidget",$.proxy(a._cleanOnChangeWidget,a))},_notifyChange:function(e,t){if("navigate"!=t.type)return this.pub("notifyChange",t);this.updateView(t.args)},_cleanOnChangeWidget:function(){this.clean()},_showDialogWidget:function(e,t){var r=new $.Deferred,i=this.Class[t.widgetName],a=new bizagi.workportal.desktop.widgets.dialog(this._dataService,this._facade);return t.widgetInstance=this._createWidgetInstance(i,t),t.widgetInstance.sub("closeDialog",function(e,t){a.close(),r.resolve(t)}),a.renderWidget(t),r.promise()},_showNotification:function(e,t){var r=t.type;"message"==r?this._notify.showSucessMessage(t.message,t.title,t.options):"error"==r&&this._notify.showErrorMessage(t.message,t.title,t.options)},_render:function(e,t,r){var i=this,a=i._widgets[e],o=a.widget[t],s=a.canvas,n=new $.Deferred;if(r||!o.isRendered()||!o.getContent().is(":visible"))return s.empty(),$(s).startLoading(),o.clean(),$.when(o.render()).pipe(function(e){return i._renderInnerWidgets(o,e)}).done(function(e){$(s).endLoading(),s.append(e),n.resolve()}),n.promise()},_renderInnerWidgets:function(e,t){var r=new $.Deferred,i=[];for(var a in e.innerWidgets){var o=e.innerWidgets[a];o.clean(),i.push($.when(o.render(),o.canvas).done(function(e,r){var i=t.find('.ui-bizagi-layout[layout="'+r+'"]');0==i.length&&(i=t.closest('.ui-bizagi-layout[layout="'+r+'"]')),i.empty(),i.append(e)}))}return $.when.apply($,i).done(function(){r.resolve(t)}),r.promise()},_createWidgetInstance:function(e,t,r){var i=this,a=r?bizagi.injector.getNewInstance(e,t):bizagi.injector.get(e,t);return a.sub("notify",$.proxy(i._notifyChange,i)),a.sub("showDialogWidget",$.proxy(i._showDialogWidget,i)),a.sub("showNotification",$.proxy(i._showNotification,i)),a},_changeWidget:function(e){var t=this,r=e.layout,i=e.widgetName,a=e.refresh,o=e.args,s=t._widgets[r],n=e.newInstance||!1;if(s.widget[i])t._innerWidgets[r]&&(c=s.widget[i],t._createInnerWidgets(r,c,o));else{var c=t._createWidgetInstance(i,o,n);t._createInnerWidgets(r,c,o),s.widget[i]=c}return s.active=i,t._render(r,i,a)},_createInnerWidgets:function(e,t,r){for(var i=this._innerWidgets[e]||[],a=t.innerWidgets||{},o=0,s=i.length;o<s;o++){var n=i[o],c=a[n.canvas];c?(c.clean(),(c=this._createWidgetInstance(n.widgetName,r,!0)).canvas=n.canvas,a[n.canvas]=c):((c=this._createWidgetInstance(n.widgetName,r)).canvas=n.canvas,a[n.canvas]=c)}t.innerWidgets=a},_supportNavigation:function(){return this._supportNav},_setContext:function(e){this._context=e},_isSameContext:function(e){return this._context==e},necesaryClean:function(){var e=this._widgets.content;if(null!=e){var t=e.widget["bizagi.workportal.widgets.project.content.dashboard"];if(null!=t){var r=t.innerWidgets.contentprincipal;null!=r&&r.clean()}}},emit:function(e){var t=this._widgets,r=[],i=e.context;for(var a in t){var o=t[a];if(!$.isEmptyObject(o.widget)){var s=o.widget[o.active],n=s.pub(i,e);for(var c in void 0!==n&&r.push(n),s.innerWidgets)void 0!==(n=s.innerWidgets[c].pub(i,e))&&r.push(n)}}return r},emitNavigate:function(e){var t=this._widgets.navigator,r=e.args||{};if(t){var i=t.widget[t.active];i&&!r.isRefresh&&$.when(i.isRendered()).done(function(){i.pub("NAVIGATE",e)})}},_searchWidgets:function(e){var t=this;for(var r in delete t._innerWidgets,t._innerWidgets={},delete t._mainWidgets,t._mainWidgets={},e){var i=e[r];if(-1==t._layouts.indexOf(i.layout)){var a=e[i.layout];t._innerWidgets[a.layout]=t._innerWidgets[a.layout]||[],t._innerWidgets[a.layout].push({widgetName:i.name,canvas:i.canvas,refresh:null==i.refresh||i.refresh})}else t._mainWidgets[i.layout]={widgetName:i.name,refresh:null==i.refresh||i.refresh,newInstance:null!=i.newInstance&&i.newInstance}}},updateView:function(e){var t=this,r=e.data,i=e.context,a=e.args||{},o=new $.Deferred,s=r.widgets;if(t._isSameContext(i)&&!a.refreshAllWidgets){e.args.refreshAllWidgets=void 0;var n=t.emit(e);return!a.stopNavigation&&t._supportNavigation()&&t.emitNavigate(e),n}return t._searchWidgets(s),$.when.apply($,$.map(t._mainWidgets,function(e,r){return t._changeWidget({layout:r,widgetName:e.widgetName,refresh:e.refresh,newInstance:e.newInstance,args:a})})).done(function(){t.emit(e),t._supportNavigation()&&t.emitNavigate(e),o.resolve()}),t._setContext(i),o.promise()},setLayout:function(e){var t=this;t._context="none",t._widgets={};for(var r=t.getLayouts(e)||[],i=0,a=r.length;i<a;i++){var o=r[i];t._widgets[o.name]={widget:{},canvas:o.layout,layout:o.name},t._layouts.push(o.name)}},getLayouts:function(e){return $.map($(".ui-bizagi-layout[layout]",e),function(e){return{name:$(e).attr("layout"),layout:$(e)}})},dispose:function(){},clean:function(){for(var e in this._widgets){var t=this._widgets[e].widget;for(var r in t){var i=t[r];for(var a in i.innerWidgets)i.innerWidgets[a].clean();i.clean()}}}}),bizagi.injector.register("widgetManager",["workportalFacade","dataService","notifier",bizagi.workportal.widgets.manager]),$.Class.extend("bizagi.workportal.device.factory",{},{init:function(e){this.device=bizagi.util.detectDevice(),this.workportal=e,this.cachedFacade=null},getWorkportalFacade:function(e,t){var r=this,i=new $.Deferred;return t=void 0===t||t,null!=r.cachedFacade?i.resolve(r.cachedFacade):"desktop"==this.device?$.when(r.getDesktopWorkportalFacade(e,t)).done(function(e){r.cachedFacade=e,i.resolve(e)}):"tablet"==this.device||"tablet_ios"==this.device||"tablet_android"==this.device?$.when(r.getTabletWorkportalFacade(e,t)).done(function(e){r.cachedFacade=e,i.resolve(e)}):"smartphone_ios"==this.device||"smartphone_android"==this.device?$.when(r.getSmartphoneWorkportalFacade(e,t)).done(function(e){r.cachedFacade=e,i.resolve(e)}):(alert("Not supported device: "+this.device),i.resolve("")),i.promise()},getDesktopWorkportalFacade:function(e,t){var r=$.Deferred(),i=new bizagi.workportal.desktop.facade(this.workportal,e);return $.when(i.initAsyncStuff(t)).done(function(){r.resolve(i)}),r.promise()},getTabletWorkportalFacade:function(e){var t=new $.Deferred,r=new bizagi.workportal.tablet.facade(this.workportal,e);return r.initAsyncStuff().done(function(){t.resolve(r)}),t.promise()},getSmartphoneWorkportalFacade:function(e){var t=new $.Deferred,r=new bizagi.workportal.smartphone.facade(e);return r.initAsyncStuff().done(function(){t.resolve(r)}),t.promise()},getDataService:function(){return this.dataService}}),function(e){var t=e.ajax,r=[],i=[],a=/=\?(&|$)/,o=(new Date).getTime();function s(t,r,i){(t.context?e(t.context):e.event).trigger(r,i)}function n(t,r){if(e.isFunction(t))return t(r);if(e.isFunction(t.url.test)){if(!t.url.test(r.url))return null}else{var i=t.url.indexOf("*");if(t.url!==r.url&&-1===i||!new RegExp(t.url.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace(/\*/g,".+")).test(r.url))return null}return t.data&&r.data&&!function t(r,i){var a=!0;return"string"==typeof i?e.isFunction(r.test)?r.test(i):r==i:(e.each(r,function(o){if(void 0===i[o])return a=!1;a="object"==typeof i[o]?a&&t(r[o],i[o]):e.isFunction(r[o].test)?a&&r[o].test(i[o]):a&&r[o]==i[o]}),a)}(t.data,r.data)?null:t&&t.type&&t.type.toLowerCase()!=r.type.toLowerCase()?null:t}function c(r,i,a){var o,s=(o=this,function(){return function(){var t;this.status=r.status,this.statusText=r.statusText,this.readyState=4,e.isFunction(r.response)&&r.response(a),r.mockjson&&(r.responseText=e.mockJSON.generateFromTemplate(JSON.parse(r.responseText))),e.isFunction(r.transform)&&(r.responseText=r.transform(r.responseText,a)),"json"==i.dataType&&"object"==typeof r.responseText?this.responseText=JSON.stringify(r.responseText):"xml"==i.dataType?"string"==typeof r.responseXML?(this.responseXML=function(t){null==window.DOMParser&&window.ActiveXObject&&(DOMParser=function(){},DOMParser.prototype.parseFromString=function(e){var t=new ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t});try{var r=(new DOMParser).parseFromString(t,"text/xml");if(!e.isXMLDoc(r))throw"Unable to parse XML";if(1==e("parsererror",r).length)throw"Error: "+e(r).text();return r}catch(t){var i=null==t.name?t:t.name+": "+t.message;return void e(document).trigger("xmlParseError",[i])}}(r.responseXML),this.responseText=r.responseXML):this.responseXML=r.responseXML:this.responseText=r.responseText,"number"!=typeof r.status&&"string"!=typeof r.status||(this.status=r.status),"string"==typeof r.statusText&&(this.statusText=r.statusText),t=this.onreadystatechange||this.onload,e.isFunction(t)?(r.isTimeout&&(this.status=-1),t.call(this,r.isTimeout?"timeout":void 0)):r.isTimeout&&(this.status=-1)}.apply(o)});r.mockjson&&(r.proxy=r.mockjson,r.proxyDataType="text"),r.proxy?t({global:!1,url:r.proxy,type:r.proxyType,data:r.data,dataType:r.proxyDataType||("script"===i.dataType?"text/plain":i.dataType),complete:function(e){r.responseXML=e.responseXML,r.responseText=e.responseText,r.status=e.status,r.statusText=e.statusText,this.responseTimer=setTimeout(s,r.responseTime||0)}}):!1===i.async?s():this.responseTimer=setTimeout(s,r.responseTime||50)}function d(t,r,i){var s;if("GET"===(s=t).type.toUpperCase()?a.test(s.url)||(s.url+=(/\?/.test(s.url)?"&":"?")+(s.jsonp||"callback")+"=?"):s.data&&a.test(s.data)||(s.data=(s.data?s.data+"&":"")+(s.jsonp||"callback")+"=?"),t.dataType="json",t.data&&a.test(t.data)||a.test(t.url)){!function(e,t,r){var i=r&&r.context||e,s=e.jsonpCallback||"jsonp"+o++;e.data&&(e.data=(e.data+"").replace(a,"="+s+"$1"));e.url=e.url.replace(a,"="+s+"$1"),window[s]=window[s]||function(r){data=r,l(e,i,t),u(e,i),window[s]=void 0;try{delete window[s]}catch(e){}head&&head.removeChild(script)}}(t,r,i);var n=/^(\w+:)?\/\/([^\/?#]+)/.exec(t.url),c=n&&(n[1]&&n[1]!==location.protocol||n[2]!==location.host);if(t.dataType="script","GET"===t.type.toUpperCase()&&c){var d=function(t,r,i){var a=i&&i.context||t,o=null;r.response&&e.isFunction(r.response)?r.response(i):"object"==typeof r.responseText?e.globalEval("("+JSON.stringify(r.responseText)+")"):e.globalEval("("+r.responseText+")");l(t,a,r),u(t,a),e.Deferred&&(o=new e.Deferred,"object"==typeof r.responseText?o.resolveWith(a,[r.responseText]):o.resolveWith(a,[e.parseJSON(r.responseText)]));return o}(t,r,i);return d||!0}}return null}function l(e,t,r){e.success&&e.success.call(t,r.responseText||"",status,{}),e.global&&s(e,"ajaxSuccess",[{},e])}function u(t,r){t.complete&&t.complete.call(r,{},status),t.global&&s("ajaxComplete",[{},t]),t.global&&!--e.active&&e.event.trigger("ajaxStop")}function p(e,t){if(e.url instanceof RegExp&&e.hasOwnProperty("urlParams")){var r=e.url.exec(t.url);if(1!==r.length){r.shift();for(var i=0,a=r.length,o=e.urlParams.length,s=Math.min(a,o),n={};i<s;i++){n[e.urlParams[i]]=r[i]}t.urlParams=n}}}e.extend({ajax:function(a,o){var s,l,u;"object"==typeof a?(o=a,a=void 0):o.url=a,l=e.extend(!0,{},e.ajaxSettings,o);for(var g=0;g<r.length;g++)if(r[g]&&(u=n(r[g],l)))return i.push(l),e.mockjaxSettings.log(u,l),"jsonp"===l.dataType&&(s=d(l,u,o))?s:(u.cache=l.cache,u.timeout=l.timeout,u.global=l.global,p(u,o),function(r,i,a,o){s=t.call(e,e.extend(!0,{},a,{xhr:function(){return t=r,s=i,n=a,d=o,void 0===(t=e.extend(!0,{},e.mockjaxSettings,t)).headers&&(t.headers={}),t.contentType&&(t.headers["content-type"]=t.contentType),{status:t.status,statusText:t.statusText,readyState:1,open:function(){},send:function(){d.fired=!0,c.call(this,t,s,n)},abort:function(){clearTimeout(this.responseTimer)},setRequestHeader:function(e,r){t.headers[e]=r},getResponseHeader:function(e){return t.headers&&t.headers[e]?t.headers[e]:"last-modified"==e.toLowerCase()?t.lastModified||(new Date).toString():"etag"==e.toLowerCase()?t.etag||"":"content-type"==e.toLowerCase()?t.contentType||"text/plain":void 0},getAllResponseHeaders:function(){var r="";return e.each(t.headers,function(e,t){r+=e+": "+t+"\n"}),r}};var t,s,n,d}}))}(u,l,o,r[g]),s);return t.apply(e,[o])}}),e.mockjaxSettings={log:function(t,r){if(!1!==t.logging&&(void 0!==t.logging||!1!==e.mockjaxSettings.logging)&&window.console&&console.log){var i="MOCK "+r.type.toUpperCase()+": "+r.url,a=e.extend({},r);if("function"==typeof console.log)console.log(i,a);else try{console.log(i+" "+JSON.stringify(a))}catch(e){console.log(i)}}},logging:!0,status:200,statusText:"OK",responseTime:500,isTimeout:!1,contentType:"text/plain",response:"",responseText:"",responseXML:"",proxy:"",proxyType:"GET",lastModified:null,etag:"",headers:{etag:"IJF@H#@923uf8023hFO@I#H#","content-type":"text/plain"}},e.mockjax=function(t){var i=r.length,a=!1;return e.each(r,function(e,i){i.url.toString()==t.url.toString()&&(r[e]=t,a=!0)}),a||(r[i]=t),i},e.mockjaxClear=function(e){1==arguments.length?r[e]=null:r=[],i=[]},e.mockjax.handler=function(e){if(1==arguments.length)return r[e]},e.mockjax.mockedAjaxCalls=function(){return i}}(jQuery),function(e){var t=[];e.mockJSON=function(r,i){for(var a=0;a<t.length;a++){if(t[a].request.toString()==r.toString()){t.splice(a,1);break}}return t.push({request:r,template:i}),e},e.mockJSON.random=!0;var r=e.ajax;function i(t){var r=(t=t.substr(1)).match(/\(([^\)]+)\)/g)||[];if(!(t in e.mockJSON.data))return console.log(t),console.log(r),t;var i=e.mockJSON.data[t];switch(a(i)){case"array":return i[Math.floor(i.length*n())];case"function":return i()}}function a(t){return e.isArray(t)?"array":null===t?"null":typeof t}function o(e){return e<10?"0"+e:e+""}e.ajax=function(i){if("json"===i.dataType)for(var a=0;a<t.length;a++){var o=t[a];if(o.request.test(i.url))return i.success(e.mockJSON.generateFromTemplate(o.template)),e}return r.apply(this,arguments)},e.mockJSON.generateFromTemplate=function(t,r){var o=0,s=(r||"").match(/\w+\|(\d+)-(\d+)/);if(s){var c=parseInt(s[1],10),d=parseInt(s[2],10);o=Math.round(n()*(d-c))+c}var l=null;switch(a(t)){case"array":if(null==s){for(var u in l=[],t)l[u.replace(/\|\d+-\d+/,"")]=e.mockJSON.generateFromTemplate(t[u],u);return l}l=[];for(var p=0;p<o;p++)l[p]=e.mockJSON.generateFromTemplate(t[0]);break;case"object":for(var u in l={},t){l[u.replace(/\|(\d+-\d+|\+\d+)/,"")]=e.mockJSON.generateFromTemplate(t[u],u);var g=u.match(/\w+\|\+(\d+)/);if(g&&"number"==a(t[u])){var m=parseInt(g[1],10);t[u]+=m}}break;case"number":l=s?o:t;break;case"boolean":l=s?n()>=.5:t;break;case"string":if(t.length){l="",o=o||1;for(p=0;p<o;p++)l+=t;var f=l.match(/@([A-Z_0-9\(\),]+)/g)||[];for(p=0;p<f.length;p++){var h=f[p],y=i(h);l=l.replace(h,y),"number"==a(y)&&(l=Number(l))}}else{l="";for(p=0;p<o;p++)l+=String.fromCharCode(Math.floor(255*n()))}break;default:l=t}return l};var s=[.021768910889510606,.23762323165420307,.9079616118204306,.6534305309997466,.22049697572443694,.07687466163364898,.8017428775547905,.16165353264404825,.5124345671670483,.19337327636624613,.39963994200698416,.8012592654139514,.22474962687229938,.9791396234452399,.7965428353317756,.9777664340629622,.5135216702983731,.7407128236192145,.12880984991420075,.8186600800491484,.5187691445438851,.034723021925916586,.5625092833040853,.02502838571997701,.663696305503698,.3481608684353138,.8991623585175106,.3640542564277087,.8320766874121723,.012778915627689846,.1427680370061336,.9774408289203956,.010229381207667587,.2596610885223093,.6150540104297127,.7130773919030915,.8638338302974085,.6178483032907357,.980312844391733,.5007277415012348,.6348672031113127,.4400097775503303,.8468458451408212,.38724997893647317,.690237920987028,.19850102297146477,.44895115941315766,.22283381913760725,.031228117310125314,.3367510872581615,.28155752394210787,.14696694832580504,.08164635161760991,.8837733477785624,.4590179148539142,.9613195413217465,.11263127577456922,.743695635896287,.0002424891439143373,.1964622832546613,.7333363138878922,.5575568682003356,.20426374168098604,.18030934250338893,.9792636408392759,.30121911048336913,.7734906886720265,.6984051127767527,.6638058511379343,.3310956256388182,.36632372827973203,.8996494702333895,.8235917663049763,.418496734118911,.8164648495097332,.9457831606354686,.2845227542117049,.42374718399151545,.3431728911657228,.5289314006219973,.6029243600407113,.6528301140700757,.6948768236197832,.7887302784092911,.8950274196119906,.6121642239166305,.31797481561514696,.34903732589844216,.3580320092281766,.8312225728434115,.32331010157206974,.16395388672837796,.6072960306003872,.6580526967999424,.23472961545632742,.6138637855489343,.3067303339060682,.44935935129958315,.24729465243280668,.8244189715967711];function n(){return e.mockJSON.random?Math.random():(s=s.concat(s.splice(0,1)))[0]}function c(){return new Date(Math.floor(n()*(new Date).valueOf()))}e.mockJSON.data={NUMBER:"0123456789".split(""),LETTER_UPPER:"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),LETTER_LOWER:"abcdefghijklmnopqrstuvwxyz".split(""),MALE_FIRST_NAME:["James","John","Robert","Michael","William","David","Richard","Charles","Joseph","Thomas","Christopher","Daniel","Paul","Mark","Donald","George","Kenneth","Steven","Edward","Brian","Ronald","Anthony","Kevin","Jason","Matthew","Gary","Timothy","Jose","Larry","Jeffrey","Frank","Scott","Eric"],FEMALE_FIRST_NAME:["Mary","Patricia","Linda","Barbara","Elizabeth","Jennifer","Maria","Susan","Margaret","Dorothy","Lisa","Nancy","Karen","Betty","Helen","Sandra","Donna","Carol","Ruth","Sharon","Michelle","Laura","Sarah","Kimberly","Deborah","Jessica","Shirley","Cynthia","Angela","Melissa","Brenda","Amy","Anna"],LAST_NAME:["Smith","Johnson","Williams","Brown","Jones","Miller","Davis","Garcia","Rodriguez","Wilson","Martinez","Anderson","Taylor","Thomas","Hernandez","Moore","Martin","Jackson","Thompson","White","Lopez","Lee","Gonzalez","Harris","Clark","Lewis","Robinson","Walker","Perez","Hall","Young","Allen"],EMAIL:function(){return i("@LETTER_LOWER")+"."+i("@LAST_NAME").toLowerCase()+"@"+i("@LAST_NAME").toLowerCase()+".com"},DATE_YYYY:function(){return c().getFullYear()+""},DATE_DD:function(){return o(c().getDate())},DATE_MM:function(){return o(c().getMonth()+1)},TIME_HH:function(){return o(c().getHours())},TIME_MM:function(){return o(c().getMinutes())},TIME_SS:function(){return o(c().getSeconds())},LOREM:function(){var e="lorem ipsum dolor sit amet consectetur adipisicing elit sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Ut enim ad minim veniam quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur Excepteur sint occaecat cupidatat non proident sunt in culpa qui officia deserunt mollit anim id est laborum".split(" ");return e[Math.floor(n()*e.length)]},LOREM_IPSUM:function(){for(var e="Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum".split(" "),t=[],r=Math.floor(n()*e.length/2),i=0;i<r;i++){var a=Math.floor(n()*e.length);t.push(e[a])}return t.join(" ")}}}(jQuery);
//# sourceMappingURL=../../../../Maps/desktop/bizagi.services.desktop.production.js.map
