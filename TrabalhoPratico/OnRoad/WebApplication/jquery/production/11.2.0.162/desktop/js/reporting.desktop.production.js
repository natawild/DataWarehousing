!function(t){var e=t.makeArray,i=t.isArray,n=t.isFunction,r=t.extend,o=t.String,s=t.each,a="prototype",l="constructor",h=Array[a].slice,c=function(e,i,r,o){return o?(u=o,p=i,f=r,(g=(d=e).delegate&&d.undelegate?d:t(n(d)?[d]:d)).delegate(u,p,f),function(){g.undelegate(u,p,f),g=d=p=f=u=null}):(a=i,l=r,c=(s=e).bind&&s.unbind?s:t(n(s)?[s]:s),0===a.indexOf(">")&&(a=a.substr(1),h=function(t){t.target===s&&l.apply(this,arguments)}),c.bind(a,h||l),function(){c.unbind(a,h||l),s=a=l=h=null});var s,a,l,h,c,d,u,p,f,g},d=function(e,i){var n="string"==typeof i?e[i]:i;return function(){return e.called=i,n.apply(e,[this.nodeName?t(this):this].concat(h.call(arguments,0)))}},u=/\./g,p=/_?controllers?/gi,f=function(t){return o.underscore(t.replace("jQuery.","").replace(u,"_").replace(p,""))},g=/[^\w]/,m=/\{([^\}]+)\}/g,v=/^(?:(.*?)\s)?([\w\.\:>]+)$/,y=function(e,i){return t.data(e,"controllers",i)};t.Class("jQuery.Controller",{setup:function(){if(this._super.apply(this,arguments),this.shortName&&"jQuery.Controller"!=this.fullName){this._fullName=f(this.fullName),this._shortName=f(this.shortName);var i,r=this,o=this.pluginName||this._fullName;for(i in t.fn[o]||(t.fn[o]=function(t){var i=e(arguments),s="string"==typeof t&&n(r[a][t]),l=i[0];return this.each(function(){var t=y(this),e=t&&t[o];e?s?e[l].apply(e,i.slice(1)):e.update.apply(e,i):r.newInstance.apply(r,[this].concat(i))})}),this.actions={},this[a])"constructor"!=i&&n(this[a][i])&&this._isAction(i)&&(this.actions[i]=this._action(i))}},hookup:function(t){return new this(t)},_isAction:function(e){return!!g.test(e)||(t.inArray(e,this.listensTo)>-1||t.event.special[e]||b[e])},_action:function(t,e){if(m.lastIndex=0,!e&&m.test(t))return null;var n=e?o.sub(t,[e,window]):t,r=i(n),s=(r?n[1]:n).match(v),a=s[2];return{processor:b[a]||w,parts:s,delegate:r?n[0]:void 0}},processors:{},listensTo:[],defaults:{}},{setup:function(e,i){var n=this[l];e=e.jquery?e[0]:e;var o=n.pluginName||n._fullName;return this.element=t(e).addClass(o),(y(e)||y(e,{}))[o]=this,this.options=r(r(!0,{},n.defaults),i),this.called="init",this.bind(),this.element},bind:function(e,i,n){if(void 0===e){this._bindings=[];var r=this[l],o=this._bindings,s=r.actions,a=this.element;for(funcName in s)s.hasOwnProperty(funcName)&&(ready=s[funcName]||r._action(funcName,this.options),o.push(ready.processor(ready.delegate||a,ready.parts[2],ready.parts[1],funcName,this)));var h=d(this,"destroy");return a.bind("destroyed",h),o.push(function(e){t(e).unbind("destroyed",h)}),o.length}return"string"==typeof e&&(n=i,i=e,e=this.element),this._binder(e,i,n)},_binder:function(t,e,i,n){return"string"==typeof i&&(i=d(this,i)),this._bindings.push(c(t,e,i,n)),this._bindings.length},_unbind:function(){var t=this.element[0];s(this._bindings,function(e,i){i(t)}),this._bindings=[]},delegate:function(t,e,i,n){return"string"==typeof t&&(n=i,i=e,e=t,t=this.element),this._binder(t,i,n,e)},update:function(t){r(this.options,t),this._unbind(),this.bind()},destroy:function(){if(this._destroyed)throw this[l].shortName+" controller already deleted";var e=this[l].pluginName||this[l]._fullName;this._destroyed=!0,this.element.removeClass(e),this._unbind(),delete this._actions,delete this.element.data("controllers")[e],t(this).triggerHandler("destroyed"),this.element=null},find:function(t){return this.element.find(t)},_set_called:!0});var b=t.Controller.processors,w=function(t,e,i,n,r){return c(t,e,d(r,n),i)};s("change click contextmenu dblclick keydown keyup keypress mousedown mousemove mouseout mouseover mouseup reset resize scroll select submit focusin focusout mouseenter mouseleave".split(" "),function(t,e){b[e]=w});var x,_=function(t,e){for(x=0;x<e.length;x++)if("string"==typeof e[x]?t[l]._shortName==e[x]:t instanceof e[x])return!0;return!1};t.fn.extend({controllers:function(){var i,n,r,o=e(arguments),s=[];return this.each(function(){for(r in i=t.data(this,"controllers"))i.hasOwnProperty(r)&&(n=i[r],o.length&&!_(n,o)||s.push(n))}),s},controller:function(t){return this.controllers.apply(this,arguments)[0]}})}(jQuery),bizagi.reporting=void 0!==bizagi.reporting?bizagi.reporting:{},bizagi.reporting.services=void 0!==bizagi.reporting.services?bizagi.reporting.services:{},bizagi.reporting.services.reporting=[],bizagi.reporting.services.getEndPoints=function(t){var e={"bam-process-loadanalysis":t.proxyPrefix+"Rest/Reports/BAM/Process/LoadAnalysis","bam-process-casestatus":t.proxyPrefix+"Rest/Reports/BAM/Process/CaseStatus","bam-process-casesgoingoverdue":t.proxyPrefix+"Rest/Reports/BAM/Process/CasesGoingOverdue","bam-task-taskgoingoverdue":t.proxyPrefix+"Rest/Reports/BAM/Task/TaskGoingOverdue","bam-task-loadanalysis":t.proxyPrefix+"Rest/Reports/BAM/Task/LoadAnalysis","bam-task-taskstatus":t.proxyPrefix+"Rest/Reports/BAM/Task/TaskStatus","bam-resourcemonitor-workinprogress":t.proxyPrefix+"Rest/Reports/BAM/Resources/Task","bam-resourcemonitor-workinprogressuser":t.proxyPrefix+"Rest/Reports/BAM/Resources/User","analytics-process-cycletime":t.proxyPrefix+"Rest/Reports/Analytics/Process/CycleTime","analytics-process-activitysummary":t.proxyPrefix+"Rest/Reports/Analytics/Process/ActivitySummary","analytics-process-activitytrend":t.proxyPrefix+"Rest/Reports/Analytics/Process/ActivityTrend","analytics-process-durationhistogram":t.proxyPrefix+"Rest/Reports/Analytics/Process/DurationHistogram","analytics-process-activationranking":t.proxyPrefix+"Rest/Reports/Analytics/Process/ActivationRanking","analytics-process-frecuentspaths":t.proxyPrefix+"Rest/Reports/Analytics/Process/FrequentPaths","analytics-task-cycletime":t.proxyPrefix+"Rest/Reports/Analytics/Task/CycleTime","sensors-list":t.proxyPrefix+"Rest/Reports/Sensors","sensors-updatecounter":t.proxyPrefix+"Rest/Reports/Sensors/Counter","sensors-addcounter":t.proxyPrefix+"Rest/Reports/Sensors/Counter","sensors-deletecounter":t.proxyPrefix+"Rest/Reports/Sensors/Counter","sensors-addstopwatch":t.proxyPrefix+"Rest/Reports/Sensors/Stopwatch","sensors-updatestopwatch":t.proxyPrefix+"Rest/Reports/Sensors/Stopwatch","sensors-deletestopwatch":t.proxyPrefix+"Rest/Reports/Sensors/Stopwatch","sensors-getdimensionslist":t.proxyPrefix+"Rest/Reports/Components/SensorDimensionsList","sensors-counter-summary":t.proxyPrefix+"Rest/Reports/Sensors/Process/CounterSummary","sensors-counterview-acttrend":t.proxyPrefix+"Rest/Reports/Sensors/CounterTrend","sensors-stopwatch-cycletimesummary":t.proxyPrefix+"Rest/Reports/Sensors/StopwatchSummary","sensors-stopwatch-lvservicesummary":t.proxyPrefix+"Rest/Reports/Sensors/StopwatchLevelOfService","sensors-stopwatch-durationhistogram":t.proxyPrefix+"Rest/Reports/Sensors/StopwatchDurationHistogram","sensors-stopwatch-durationtrend":t.proxyPrefix+"Rest/Reports/Sensors/StopwatchTrend","sensors-allpaths":t.proxyPrefix+"Rest/Reports/Components/AllPathsFromTask","components-processes":t.proxyPrefix+"Rest/Reports/Components/Processes","components-dimensions":t.proxyPrefix+"Rest/Reports/Components/DimensionsList","components-dimensions-system":t.proxyPrefix+"Rest/Reports/Components/SystemDimensionsList","components-dimensions-items":t.proxyPrefix+"Rest/Reports/Components/DimensionItems","components-processesversion":t.proxyPrefix+"Rest/Reports/Components/ProcessesVersion","components-processesversion-includeembedded":t.proxyPrefix+"Rest/Reports/Components/ProcessesVersion/IncludeEmbedded","process-definition":t.proxyPrefix+"Rest/Reports/Components/ProcessDefinition","process-graphicinfo":t.proxyPrefix+"Rest/Reports/Components/ProcessGraphicInfo","customreports-loaduserquery":t.proxyPrefix+"Rest/Reports/AnalysisQueries/Load","customreports-savequery":t.proxyPrefix+"Rest/Reports/AnalysisQueries","reports-exporttoexcel":t.proxyPrefix+"Rest/Reports/ReportToExcel","reports-detaillist":t.proxyPrefix+"Rest/Reports/caseList","reports-detaillist-exporttoexcel":t.proxyPrefix+"Rest/Reports/caseListToExcel","reports-detaillist-caseaccess":t.proxyPrefix+"Rest/Reports/caseAccess","processviewer-processdefinition":t.proxyPrefix+"Rest/Reports/Components/ProcessDefinition","processviewer-processgraphicinfo":t.proxyPrefix+"Rest/Reports/Components/ProcessGraphicInfo"};return t.proxy&&t.proxy.length>0?$.each(e,function(i,n){e[n]=t.proxy+i}):e},$.Controller.extend("bizagi.reporting.observer",{},{init:function(){this.observableElement=$({})},subscribe:function(){this.observableElement.bind.apply(this.observableElement,arguments)},unsubscribe:function(){this.observableElement.unbind.apply(this.observableElement,arguments)},publish:function(){this.observableElement.triggerHandler.apply(this.observableElement,arguments)}}),$.Class.extend("bizagi.reporting.services.context",{},{init:function(t){this.endPoints=bizagi.reporting.services.getEndPoints(t),this.proxyPrefix=bizagi.util.isEmpty(t.proxyPrefix)?"":t.proxyPrefix},getUrl:function(t){return null==this.endPoints[t]&&alert("No endpoint defined for: "+t),this.endPoints[t]}}),$.Class.extend("bizagi.reporting.services.service",{},{init:function(t){(t=t||{}).proxyPrefix=bizagi.util.isEmpty(t.proxyPrefix)?"":t.proxyPrefix,t.proxyPrefix=this.normalizeUrl(t.proxyPrefix),this.device=bizagi.util.detectDevice(),this.serviceLocator=new bizagi.reporting.services.context(t)},getUrl:function(t){return this.serviceLocator.getUrl(t)},normalizeUrl:function(t){return""!=t&&("/"!=t[t.length-1]&&(t=t.concat("/")),-1==t.indexOf("http://")&&-1==t.indexOf("https://")&&(t="http://"+t)),t},getBAMProcessAnalysisData:function(t){return $.read(this.getUrl("bam-process-loadanalysis"))},getProcessList:function(t){return $.read({url:this.getUrl("components-processes")})},getDimensionsList:function(t){return $.create(this.getUrl("components-dimensions"),t)},getCaseStatus:function(t){return $.create(this.getUrl("bam-process-casestatus"),t)},getCasesGoingOverdue:function(t){return $.create(this.getUrl("bam-process-casesgoingoverdue"),t)},getTaskStatus:function(t){return $.create(this.getUrl("bam-task-taskstatus"),t)},getTaskGoingOverdue:function(t){return $.create(this.getUrl("bam-task-taskgoingoverdue"),t)},getDimensionsItems:function(t){return $.create(this.getUrl("components-dimensions-items"),t)},getTaskLoadAnalysis:function(t){return $.create(this.getUrl("bam-task-loadanalysis"),t)},getCycleTime:function(t){return $.create(this.getUrl("analytics-process-cycletime"),t)},getProcessActivitySummary:function(t){return $.create(this.getUrl("analytics-process-activitysummary"),t)},getProcessActivityTrend:function(t){return $.create(this.getUrl("analytics-process-activitytrend"),t)},getProcessVersionList:function(t){return $.read(this.getUrl("components-processesversion"))},getProcessVersionListIncludeEmbedded:function(){return $.read(this.getUrl("components-processesversion-includeembedded"))},getDurationHistogram:function(t){return $.create(this.getUrl("analytics-process-durationhistogram"),t)},getActivationRanking:function(t){return $.create(this.getUrl("analytics-process-activationranking"),t)},getProcessDefinition:function(t){var e="processId="+t;return $.read(this.getUrl("process-definition"),e)},getProcessGraphicInfo:function(t){var e="processId="+t;return $.read(this.getUrl("process-graphicinfo"),e)},getFrecuentsPaths:function(t){return $.create(this.getUrl("analytics-process-frecuentspaths"),t)},getTaskCycleTime:function(t){return $.create(this.getUrl("analytics-task-cycletime"),t)},getResourceMonitorWorkInProgress:function(t){return $.create(this.getUrl("bam-resourcemonitor-workinprogress"),t)},getResourceMonitorWorkInProgressPerUser:function(t){return $.create(this.getUrl("bam-resourcemonitor-workinprogressuser"),t)},getSensorsList:function(){return $.read(this.getUrl("sensors-list"))},updateCounter:function(t){return $.update(this.getUrl("sensors-updatecounter"),t)},addCounter:function(t){return $.create(this.getUrl("sensors-addcounter"),t)},deleteCounter:function(t){return $.destroy(this.getUrl("sensors-deletecounter")+"?"+t)},addStopwatch:function(t){return $.create(this.getUrl("sensors-addstopwatch"),t)},updateStopwatch:function(t){return $.update(this.getUrl("sensors-updatestopwatch"),t)},deleteStopwatch:function(t){return $.destroy(this.getUrl("sensors-deletestopwatch")+"?"+t)},getSensorsDimensions:function(t){return $.create(this.getUrl("sensors-getdimensionslist"),t)},getCounterSummary:function(t){return $.create(this.getUrl("sensors-counter-summary"),t)},getCounterTrend:function(t){return $.create(this.getUrl("sensors-counterview-acttrend"),t)},getCycleTimeSummary:function(t){return $.create(this.getUrl("sensors-stopwatch-cycletimesummary"),t)},getLvSeviceSummary:function(t){return $.create(this.getUrl("sensors-stopwatch-lvservicesummary"),t)},getSwDurationHistogram:function(t){return $.create(this.getUrl("sensors-stopwatch-durationhistogram"),t)},getSwDurationTrend:function(t){return $.create(this.getUrl("sensors-stopwatch-durationtrend"),t)},getAllPaths:function(t){return $.get(this.getUrl("sensors-allpaths"),t)},getDetailList:function(t){return $.create(this.getUrl("reports-detaillist"),t)},getSystemDimensions:function(){return $.read(this.getUrl("components-dimensions-system"))},customReportsLoadUserQuery:function(){return $.create(this.getUrl("customreports-loaduserquery"))},customReportsSaveQuery:function(t){return $.create(this.getUrl("customreports-savequery"),t)},getExportExcelUrl:function(t){return encodeURI(this.getUrl("reports-exporttoexcel")+"?"+t)},exportToExcel:function(t){var e=encodeURI(this.getUrl("reports-exporttoexcel")+"?"+t);"desktop"!==this.device?window.parent.open(e,"_system","location=yes"):window.open(e,"_blank","location=yes")},exportDetailList:function(t){var e=encodeURI(this.getUrl("reports-detaillist-exporttoexcel")+"?"+t);"desktop"!==this.device?window.parent.open(e,"_system","location=yes"):window.location.assign(e)},checkCaseAccess:function(t){return $.read(this.getUrl("reports-detaillist-caseaccess"),t)},processDefinition:function(t){return $.read(this.getUrl("processviewer-processdefinition"),t)},graphicInfo:function(t){return $.read(this.getUrl("processviewer-processgraphicinfo"),t)}}),bizagi.reporting.observer.extend("bizagi.reporting.component.controller",{init:function(t){var e=this;e._super(),e.properties={},e.tmpl={},e.pstDeferred=$.Deferred(),e.canvas=t,e.device=bizagi.util.detectDevice(),e.resources=bizagi.localization},loadTemplate:function(t,e){var i=this,n=new $.Deferred;return i.tmpl[t]?(n.resolve(),n.promise()):bizagi.templateService.getTemplate(e).done(function(e){i.tmpl[t]=e})},loadTemplates:function(t){var e=this,i=new $.Deferred,n=[];return $.each(t,function(t,i){var r=e.loadTemplate(t,i);n.push(r)}),$.when.apply($,n).done(function(){i.resolve()}),i.promise()},getTemplate:function(t){return this.tmpl[t]?this.tmpl[t]:null},render:function(t){var e=this,i=$.Deferred();return t=t||{},e.options=$.extend(e.options,t.options),$.when(e.internalRender()).done(function(t){e.content=t,e.canvas.empty(),e.canvas.append(e.content),e.postRender(t)}),i},internalRender:function(){var t=this;return $.when(t.loadTemplates()).pipe(function(){return t.renderComponent()})},renderComponent:function(){bizagi.mustImplement("renderComponent")},getResource:function(t){return this.resources.getResource(t)},resolvePostRender:function(){this.pstDeferred.resolve()}}),bizagi.reporting.component.controller("bizagi.reporting.component.processfilter",{init:function(t,e){e=e||{},this._super(t),this.processes=e.model.processes,this.process=this.setDefaultProcess(e.process),this.render()},loadTemplates:function(){var t={processfilter:bizagi.getTemplate("bizagi.reporting.component.processfilter")+"#bz-rp-filters-process"};return this._super(t)},renderComponent:function(){var t=this.getTemplate("processfilter");return $.tmpl(t,this.model)},postRender:function(t){var e=this;$.when(e.renderCombo(t)).done(function(){e.resolvePostRender()})},setDefaultProcess:function(t){var e=[];return this.processes.length&&(e=$.isEmptyObject(t)?{process:{id:this.processes[0].id,guid:this.processes[0].guid}}:{process:t}),e},renderCombo:function(t){var e=this,i=e.getDataSourceForCombos(),n=$(t),r=$.Deferred();return n.uicombo({data:i,onChange:function(t){var i=t.ui.data("value");e.setProcess(i),e.publish("filterbyprocess",e.process)},onComplete:function(){r.resolve()},itemValue:function(t){return t.id},itemText:function(t){return t.name},initValue:i.dft}),r},getProcessId:function(){return this.process.process.id},setProcess:function(t){this.process.process={id:parseInt(t)}},getDataSourceForCombos:function(){for(var t=this,e={combo:[],label:t.getResource("bz-rp-components-process-label"),dft:0},i=0,n=t.processes.length;i<n;i++)e.combo.push(t.processes[i]),t.processes[i].id===t.process.process.id&&(e.dft=t.processes[i]);return e}}),bizagi.reporting.component.controller("bizagi.reporting.component.dimensionfilter",{init:function(t,e,i){i=i||{},this._super(t),this.model={},this.modal=[],this.srvActions=i.srvActions,this.services=e,this.process=i.process,this.dimensions=[],this.defaults=i.dftDimensions||[],this.dimension=[],this.edit=!1,this.editionList=[],this.load=!0,this.render()},loadTemplates:function(){var t={dimension:bizagi.getTemplate("bizagi.reporting.component.dimensionfilter")+"#bz-rp-filters-dimension","dimension-dialog":bizagi.getTemplate("bizagi.reporting.component.dimensionfilter")+"#bz-rp-filters-dimension-dialog","dimension-pills-wrapper":bizagi.getTemplate("bizagi.reporting.component.dimensionfilter")+"#bz-rp-filters-dimension-pills-wrapper","dimension-container":bizagi.getTemplate("bizagi.reporting.component.dimensionfilter")+"#bz-rp-filters-dimension-container"};return this._super(t)},setInitialDimension:function(){var t=this,e=t.model.dimensions[0].id||0,i=t.model.dimensions[0].guid,n=t.model.dimensions[0].type,r=t.model.dimensions[0].name;t.dimension={processId:t.process.process.id,guid:i,id:e,name:t.getResource(r),type:n}},renderComponent:function(){var t=this.getTemplate("dimension"),e=$.tmpl(t);return this.defaults.length&&this.setDefaults(),e},refresh:function(t){var e=this;e.dimension.processId=t.process.id,e.process=t,e.removeAllDimensions(),e.checkPills(),e.load=!0},postRender:function(){this.resolvePostRender(),this.eventHandlers()},appendModal:function(){if(!this.modal.length){var t=this.getTemplate("dimension-container");this.modal=$.tmpl(t),this.modal.appendTo("body")}},setDefaults:function(){var t=this,e=t.defaults,i=e.length;$.when(t.loadDimensions()).done(function(){for(var n=0;n<i;n++){var r=!!e[n].includeEmptyValues,o=t.model.dimensions.filter(function(t,i){var r=t.id===e[n].id&&t.type===e[n].type&&t.id>0,o=t.guid===e[n].guid&&t.type===e[n].type&&null!=t.guid&&null!=t.guid;return r||o});t.dimensions.push({id:o[0].id||0,guid:o[0].guid,name:t.getResource(o[0].name),values:e[n].values,type:o[0].type,includeEmptyValues:r}),t.buildPills({isNew:!0,position:[n]}),t.checkPills()}})},renderDialog:function(t){var e=this,i=new $.Deferred,n=e.getResource("bz-rp-components-dimension-dimensions-label");return t.dialog({resizable:!1,modal:!0,title:n,dialogClass:"bz-rp-dialog",draggable:!1,appendTo:e.modal,maximize:!1,width:"50%",open:function(){var t=.5*window.innerHeight,e=(window.innerHeight-t)/3;$(this).closest(".ui-dialog-content").css("maxHeight",t),$(this).parent(".bz-rp-dialog").css("top",e),i.resolve()},close:function(){$(this).remove()},buttons:[{text:e.getResource("workportal-general-button-label-apply"),click:function(){e.applyDimensionsFilter(),$(this).dialog("close")}},{text:e.getResource("render-form-dialog-box-close"),click:function(){$(this).dialog("close")}}]}),i},renderDescription:function(){var t=this,e=t.model.dimensions.filter(function(e,i){return t.dimension.id||0===t.dimension.id?e.guid===t.dimension.guid:e.id===t.dimension.id});e.length>0?$("#bz-rp-filters-dimension-description p",t.modal).html(t.getResource(e[0].description)):$("#bz-rp-filters-dimension-description p",t.modal).html("")},renderDimensions:function(){var t=this,e=t.getComboDataSource();$combo=$("#bz-rp-filters-dimension-list",t.modal),$combo.uicombo({data:e,disabled:t.edit,onChange:function(e){var i=e.ui.data("value").split("/");t.dimension.id=i[0]||0,t.dimension.name=i[1],t.dimension.type=i[2],t.dimension.guid=i[3],t.renderDescription(),$.when(t.getDimensionItems()).done(function(e){t.escapeQuotes(e),t.resetTabs(),t.refreshSearch(e.items),t.refreshTree(e.items)})},itemValue:function(t){return t.id+"/"+t.name+"/"+t.type+"/"+t.guid},itemText:function(t){return t.name},initValue:e.combo[e.dft]})},resetTabs:function(){var t=this.tabs.tabs("option","disabled");t&&t.length>0&&(this.tabs.tabs("enable"),this.tabs.tabs({active:0}))},escapeQuotes:function(t){t&&t.items&&t.items.length>0&&t.items.map(function(t){t.name&&(t.name=bizagi.replaceAll(t.name,'\\"','"'))})},renderTree:function(t){var e=this;if(t&&t.length>200)$("#bz-rp-filters-dimension-tree",e.modal).treeview({list:[],itemValue:function(t){return t.id+"/"+t.subtype+"/"+t.guid},itemText:function(t){return t.name}}),e.tabs.tabs({active:1}),e.tabs.tabs("disable",0);else{var i=e.getTreeviewDataSource(t);$("#bz-rp-filters-dimension-tree",e.modal).treeview({list:i,itemValue:function(t){return t.id+"/"+t.subtype+"/"+t.guid},itemText:function(t){return t.name}})}},getDimensionItems:function(){var t="dimension="+JSON.stringify(this.dimension);return $.when(this.services.getDimensionsItems(t))},renderSearch:function(t){$("#bz-rp-filters-dimension-search",this.modal).multiSelect({list:t,itemValue:function(t){return t.id+"/"+t.subtype+"/"+t.guid},itemText:function(t){return t.name},label:this.getResource("bz-rp-components-dimension-search-label")})},refreshSearch:function(t){$("#bz-rp-filters-dimension-search",this.modal).multiSelect("setList",t)},refreshTree:function(t){var e,i=this;if(t&&t.length>200)(e=$("#bz-rp-filters-dimension-tree",i.modal)).treeview("setList",[]),i.tabs.tabs({active:1}),i.tabs.tabs("disable",0);else{e=$("#bz-rp-filters-dimension-tree",i.modal);var n=i.getTreeviewDataSource(t);e.treeview("setList",n)}},applyDimensionsFilter:function(){var t=this,e=$("#bz-rp-filters-dimension-search",t.modal),i=$("#bz-rp-filters-dimension-tree",t.modal),n=e.multiSelect("getDataItems"),r=i.treeview("getDataItems"),o=$("#bz-rp-filters-dimension-nulls input",t.modal).prop("checked"),s=t.uniqueKeys(n,r,"value");if(s.length||t.edit||o){var a=t.buildDimensions(s,o),l=t.dimensions[a.position[0]];l.values.length||l.includeEmptyValues?t.buildPills(a):t.removeDimension(a.position),t.executeFilters()}},uniqueKeys:function(t,e,i){for(var n={},r=[].concat(t).concat(e),o=0,s=r.length;o<s;o++)n[r[o][i]]=r[o];if(r=new Array,"value"==i)for(y in n)data=n[y].value.split("/"),r.push({id:data[0],subType:data[1],name:n[y].text});else for(y in n)r.push(n[y]);return r},buildDimensions:function(t,e){var i=this,n=i.dimension.id,r=i.dimension.guid,o=!0,s=i.dimension.type,a=i.dimension.name,l={id:n,guid:r,name:a,values:[],type:s,includeEmptyValues:e},h=$.map(i.dimensions,function(t,e){if("0"==n&&""!=r){if(t.guid==r)return e}else if(t.id==n&&t.type==s&&""==r)return e});if(h.length){var c=i.dimensions[h[0]];o=!1,l.values=i.edit?t:i.uniqueKeys(t,c.values,"id"),c.values=l.values,c.includeEmptyValues=e}else l.values=t,i.dimensions.push(l),h.push(i.dimensions.length-1);return{isNew:o,position:h}},buildPills:function(t){var e=t.position,i=this.dimensions[e[0]],n="",r=this.getTemplate("dimension-pills-wrapper"),o=this.getPillsWrapper();if(t.isNew)(n=$.tmpl(r,i)).appendTo(o);else{var s=$(".bz-rp-filters-dimensions-pill",o).eq(e[0]);n=$.tmpl(r,i),s.replaceWith(n)}},checkPills:function(){var t=this.getPillsWrapper();$(".bz-rp-filters-dimensions-pill",t).length?t.addClass("bz-rp-filters-dimension-pills"):t.removeClass("bz-rp-filters-dimension-pills")},getPillsWrapper:function(){return $("#reports-canvas").find("#bz-rp-filters-dimension-pills")},getComboDataSource:function(){var t=this,e=[].concat(t.model.dimensions),i={combo:[],label:t.getResource("bz-rp-components-dimension-label"),dft:0};if(t.edit)i.combo.push({id:t.dimension.id||0,guid:t.dimension.guid,name:t.dimension.name,type:t.dimension.type});else for(var n=0,r=e.length;n<r;n++)i.combo.push({id:e[n].id||0,guid:e[n].guid,name:t.getResource(e[n].name),type:e[n].type});return i},getTreeviewDataSource:function(t){for(var e=[],i=this.editionList,n=[].concat(t),r=0,o=n.length;r<o;r++){n[r].defaults=!1;for(var s=0,a=i.length;s<a;s++)if(i[s].id==n[r].id){n[r].defaults=!0;break}if(0===n[r].parent)e.push(n[r]);else{var l=n.filter(function(t){return t.id===n[r].parent});void 0!==l[0].subitems?l[0].subitems.push(n[r]):l[0].subitems=new Array(n[r])}}return e},renderDimensionsDialog:function(t){var e=this,i=e.getTemplate("dimension-dialog"),n=void 0!==t&&e.dimensions[t].includeEmptyValues,r=$.tmpl(i,{nulls:n});$.when(e.renderDialog(r)).done(function(){if(e.renderDescription(),e.tabs=r.find("#bz-rp-filters-dimension-filters"),e.tabs.tabs(),void 0!==t){var i=e.dimensions[t];e.edit=!0,e.editionList=i.values,e.dimension.id=i.id,e.dimension.guid=i.guid,e.dimension.name=i.name,e.dimension.type=i.type}else e.edit=!1,e.editionList=[];e.renderDimensions(),$.when(e.getDimensionItems()).done(function(t){e.escapeQuotes(t),e.resetTabs(),e.renderTree(t.items),e.renderSearch(t.items)})})},renderNoDataDialog:function(){var t=this.getResource("bz-rp-components-dimension-nodata");bizagi.showMessageBox(t)},loadDimensions:function(){var t=this,e=$.Deferred();if(t.load){var i="filters="+JSON.stringify(t.process);$.when(t.services[t.srvActions.dimensionsList](i)).done(function(i){t.load=!1,t.model=i,e.resolve()})}else e.resolve();return e},eventHandlers:function(){var t=this,e=$(".bz-rp-filters-dimension-button",t.content),i=$("#reports-canvas");e.on("click",function(e,i){$.when(t.loadDimensions()).done(function(){t.model.dimensions.length?(t.setInitialDimension(),t.appendModal(),t.renderDimensionsDialog(i)):t.renderNoDataDialog()})}),i.off("click.dimension-delete").on("click.dimension-delete","#bz-rp-filters-dimension-pills .bz-rp-filters-dimensions-pill-delete",function(e){var i=$(this).parent(),n=i.data("id"),r=i.data("type"),o=i.data("guid"),s=$.map(t.dimensions,function(t,e){if("0"==n&&""!=o){if(t.guid==o)return e}else if(t.id==n&&t.type==r&&(bizagi.util.isEmpty(o)||"null"===o))return e});t.removeDimension(s),t.executeFilters()}),i.off("click.dimension-edit").on("click.dimension-edit","#bz-rp-filters-dimension-pills .bz-rp-filters-dimensions-pill-edit",function(i){var n=$(this).parent(),r=n.data("id"),o=n.data("type"),s=n.data("guid"),a=$.map(t.dimensions,function(t,e){if("0"==r&&""!=s){if(t.guid==s)return e}else if(t.id==r&&t.type==o&&""==s)return e});e.trigger("click",a)})},removeAllDimensions:function(){var t=this.getPillsWrapper();$(".bz-rp-filters-dimensions-pill",t).remove(),this.dimensions=[]},removeDimension:function(t){var e=this.getPillsWrapper();$(".bz-rp-filters-dimensions-pill",e).eq(t[0]).remove(),this.dimensions.splice(t[0],1)},executeFilters:function(){this.publish("filterbydimension",[this.dimensions]),this.checkPills()}}),$.Class.extend("bizagi.reporting.helper.components",{},{init:function(t){this.services=t,this.process=new Object,this.processversion=new Object,this.dimension=new Object,this.time=new Object,this.customrp=new Object},initProcessesComponent:function(t,e,i){return this.process=new bizagi.reporting.component.processfilter(t,{model:e,process:i}),this.process},initDimensionsComponent:function(t,e){return this.dimension=new bizagi.reporting.component.dimensionfilter(t,this.services,e),this.dimension},initProcessesVersionComponent:function(t,e,i){return this.processversion=new bizagi.reporting.component.processversionfilter(t,this.services,{model:e,process:i}),this.processversion},initTimeComponent:function(t,e){return this.time=new bizagi.reporting.component.timefilter(t,e),this.time},initCustomReportsComponent:function(t,e,i){return this.customrp=new bizagi.reporting.component.customreports(t,this.services,{info:e,filters:i}),this.customrp},initDetailListComponent:function(t){return this.detailList=new bizagi.reporting.component.detaillist(t,this.services),this.detailList},renderDetailList:function(t,e){this.detailList.renderDetailList(t,e)}}),$.Class.extend("bizagi.reporting.helper.graphics",{},{init:function(t){this.report=t},getDataVizObject:function(t){var e=this,i={theme:"metro",title:{font:"14px Arial, Helvetica Neue, Helvetica, sans-serif"},legend:{labels:{font:"12px Arial, Helvetica Neue, Helvetica, sans-serif",color:"#444"},position:"bottom",visible:!0},seriesDefaults:{labels:{visible:!0,background:"none",font:"12px Arial, Helvetica Neue, Helvetica, sans-serif",color:"#444"},tooltip:{visible:!0,font:"12px Arial, Helvetica Neue, Helvetica, sans-serif",color:"#ffffff",template:"#= category #: #= value #"},stack:!1,type:"column"},seriesColor:["blue"],seriesClick:function(t){if(e.refreshTimeout)clearTimeout(e.refreshTimeout);else{var i=$("input[type=radio][checked]",e.report.graphics.report.element);i.length&&(t.sender.options.detailList.caseBased="crtdate"===i.data("timerange")),e.report.callDetailList($.extend(t,{dtlType:"dataViz"}))}e.refreshTimeout=setTimeout(function(){delete e.refreshTimeout},300)},valueAxis:{title:{font:"12px Arial, Helvetica Neue, Helvetica, sans-serif",color:"#444",visible:!1},line:{visible:!1},minorGridLines:{visible:!1}},axisDefaults:{labels:{color:"#444"}},categoryAxis:{majorGridLines:{visible:!1},line:{visible:!1}}};return $.extend(!0,{},i,t)}}),bizagi.reporting.observer.extend("bizagi.reporting.report",{},{init:function(t){this._super(),this.templates={},this.content="",this.jCMP=t.components,this.canvas=t.canvas,this.info=t.info,this.services=t.dataService,this.components=new bizagi.reporting.helper.components(this.services),this.graphics=new bizagi.reporting.helper.graphics(this),this.widgetInstance=t.widgetInstance,bizagi.referrerParams=bizagi.referrerParams?bizagi.referrerParams:{},this.device=bizagi.util.detectDevice(),this.model=$.isEmptyObject(t.filters)?this.getFiltersObject():t.filters,this.resources=bizagi.localization,bizagi.referrerParams.referrer=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS,bizagi.referrerParams.reports||(bizagi.referrerParams.reports={})},getFiltersObject:function(){return{}},setReportNames:function(t,e){bizagi.referrerParams.reports.endPoint=t,bizagi.referrerParams.reports.tab=e},setReportParams:function(t,e){bizagi.referrerParams.reports.model=e,bizagi.referrerParams.reports.params=t},activateTab:function(t){$("#bz-rp-reports-menu li[data-report]").removeClass("ui-bizagi-wp-widget-reports-menu-active"),$("#bz-rp-reports-menu li[data-report="+t+"]").addClass("ui-bizagi-wp-widget-reports-menu-active")},callModalWindow:function(){bizagi.referrerParams.reports.params&&bizagi.referrerParams.reports.fromBackButton&&this.callDetailList(bizagi.referrerParams.reports.params)},cleanReferrerParams:function(){bizagi.referrerParams.reports={},bizagi.referrerParams.referrer="inboxGrid"},loadTemplate:function(t,e){var i=this,n=new $.Deferred;return i.templates[t]?(n.resolve(),n.promise()):bizagi.templateService.getTemplate(e).done(function(e){i.templates[t]=e})},loadProcessesComponent:function(){var t=this,e=t.getTemplateComponent(t.content,"filters-process");return $.when(t.services.getProcessList()).pipe(function(i){var n=t.components.initProcessesComponent(e,i,t.model.process);return $.extend(t.model,n.process),t.publish("initProcessBreadcrumb"),n.subscribe("initProcessBreadcrumb",function(e,i){t.publish("initProcessBreadcrumb")}),n.subscribe("filterbyprocess",function(e,i){$.extend(t.model,i),t.refreshDimensions(i),t.excecuteFilterChange()}),t.subscribe("initProcessBreadcrumb",function(){t.model.taskPathArray=[]}),n.pstDeferred})},loadTimeComponent:function(){var t=this,e=t.getTemplateComponent(t.content,"filters-time"),i=t.getResource("dateFormat"),n=t.components.initTimeComponent(e,{dateFormat:i,time:t.model.time});return $.extend(t.model,n.getValue()),n.subscribe("filterbytime",function(e,i){$.extend(t.model,i),t.excecuteFilterChange()}),n.pstDeferred},callDetailList:function(t){var e=this.getDetailListObject(t);if(e){var i=this.prepareExcelFilter(),n="filters="+JSON.stringify($.extend({},this.encodeUriFilter(i),e)),r=e.process||i.process;this.components.renderDetailList(n,r.id)}},loadProcessesVersionComponent:function(t){var e,i=this,n=i.getTemplateComponent(i.content,"filters-processversion");return e="SENSORS"===t?i.services.getProcessVersionListIncludeEmbedded():i.services.getProcessVersionList(),$.when(e).pipe(function(t){i.numberOfProcess=t.processes.length;var e=i.components.initProcessesVersionComponent(n,t,i.model.process.id?i.model.process:{});return $.extend(i.model,e.process),i.publish("initProcessBreadcrumb"),e.subscribe("initProcessBreadcrumb",function(t,e){i.publish("initProcessBreadcrumb")}),e.subscribe("filterbyprocessversion",function(t,e){"loading"!=i.state&&($.extend(i.model,e),i.refreshDimensions(e),i.excecuteFilterChange())}),e.pstDeferred})},loadCustomReportsComponent:function(){var t=this,e=t.getTemplateComponent(t.content,"customreports");t.components.initCustomReportsComponent(e,t.info,t.model)},loadDetailListComponent:function(){var t=this,e=t.getTemplateComponent(t.content,"detaillist"),i=t.components.initDetailListComponent(e);i.subscribe("rp-graphicquery",function(e,i){t.publish("graphicquery",i)}),i.subscribe("rp-caseadministration",function(e,i){t.publish("caseadministration",i)}),i.subscribe("rp-opencase",function(e,i){t.publish("opencase",i)})},refreshDimensions:function(t){$.isEmptyObject(this.components.dimension)||(this.model.dimension=[],this.components.dimension.refresh(t))},loadDimensionsComponent:function(t,e){var i=this,n=i.getTemplateComponent(i.content,"filters-dimension");e=e||"getDimensionsList";var r=i.components.initDimensionsComponent(n,{srvActions:{dimensionsList:e},process:t,dftDimensions:i.model.dimension});return i.publish("initProcessBreadcrumb"),r.subscribe("initProcessBreadcrumb",function(t,e){i.publish("initProcessBreadcrumb")}),r.subscribe("filterbydimension",function(e,n){$.extend(i.model,t),i.model.dimension=n,i.excecuteFilterChange()}),i.subscribe("initProcessBreadcrumb",function(){i.model.taskPathArray=[]}),r.pstDeferred},loadTemplates:function(t){var e=this,i=new $.Deferred,n=[];return $.each(t,function(t,i){var r=e.loadTemplate(t,i);n.push(r)}),$.when.apply($,n).done(function(){i.resolve()}),i.promise()},excecuteFilterChange:function(){var t=this,e="filters="+JSON.stringify(t.encodeUriFilter(t.model));t.publish("filterChange",t.model),t.drawReport(e)},getTemplate:function(t){return this.templates[t]?this.templates[t]:null},getResource:function(t){return this.resources.getResource(t)},getElement:function(){return this.element},getContent:function(){return this.content},initCommonTemplates:function(){return{component:bizagi.getTemplate("bizagi.reporting.component")+"#bz-rp-component-main","base-report-frame":bizagi.getTemplate("bizagi.reporting.report")+"#bz-rp-frame","report-detaillist":bizagi.getTemplate("bizagi.reporting.report")+"#bz-rp-detaillist","processviewer-nodata":bizagi.getTemplate("bizagi.reporting.component")+"#bz-rp-processviewer-nodata","process-breadcrumb":bizagi.getTemplate("bizagi.reporting.report.bamtaskloadanalysis")+"#bz-rp-process-breadcrumb"}},render:function(){var t=this,e=t.initializeTemplates?t.initializeTemplates():{};return $.extend(e,t.initCommonTemplates()),t.loadTemplates(e).pipe(function(){return t.internalRender()})},internalRender:function(){var t=this,e=t.getTemplate("base-report-frame"),i=$.tmpl(e);return $.when(t.renderContent()).pipe(function(e){return t.content=e,t.getReportContainer(i).append(e),t.element=i,t.element})},encodeUriFilter:function(t){var e=this,i=JSON.parse(JSON.stringify(t));return i.dimension&&i.dimension.length>0&&i.dimension.map(function(t){t.values&&t.values.map(function(t){t.name&&(t.name=encodeURIComponent(e.addBackSlashQuotes(t.name)))})}),i},addBackSlashQuotes:function(t){for(var e="",i=0;i<t.length;){var n=t.indexOf('"',i);-1==n?(e+=t.substring(i),i=t.length):("\\"!=(e+=t.substring(i,n-i))[e.length-1]&&(e+="\\"),e+='"',i=n+1)}return e},renderContent:function(){var t=this,e=t.getTemplate("main");return t.content=$.tmpl(e),t.content.appendTo("#canvas"),$.when(t.loadComponents()).pipe(function(){var e="filters="+JSON.stringify(t.encodeUriFilter(t.model));return t.drawReport(e),$(".bz-rp-processviewer-canvas",t.content).endLoadingMessage(),t.content})},loadComponents:function(){var t=this,e=t.getTemplate("component"),i=$.tmpl(e,{components:t.jCMP});t.content.prepend(i),t.loadCustomReportsComponent(),t.loadDetailListComponent()},postRender:function(){this.callModalWindow()},refresh:function(){var t=this;t.refreshTimeout&&clearTimeout(t.refreshTimeout),t.refreshTimeout=setTimeout(function(){delete t.refreshTimeout,$(".bz-rp-chart",t.canvas).each(function(){var t=$(this).data("kendoChart");t&&t.refresh()})},150)},getReportContainer:function(t){if(!this.reportContainer){var e=this.getTemplateComponent(t,"report");null!=e&&e.length>0&&(this.reportContainer=e)}return this.reportContainer},getTemplateComponent:function(t,e){return t.data("bizagi-component")==e?t:$("[data-bizagi-component="+e+"]",t)},renderProcessViewer:function(t){var e=this;if(e.model.process.hasOwnProperty("id")){var i="processId="+e.model.process.id;e.viewerPlugin&&e.viewerPlugin.processviewer("destroy"),$.when(e.services.processDefinition(i),e.services.graphicInfo(i)).done(function(i,n){e.viewerPlugin=t.processviewer({height:bizagi.util.isIE()?window.innerHeight-288:"calc(100vh - 288px)",width:"100%",jsonBizagi:{processDefinition:i[0],processGraphicsInfo:n[0]},zoomRange:5})}).fail(function(){e.renderPVNoData(t)})}else e.renderPVNoData(t)},renderPVNoData:function(t){var e=this.getTemplate("processviewer-nodata");t.html($.tmpl(e))},setFiltersForCustomRPComp:function(){var t=this.components.customrp;$.isEmptyObject(t)||t.setReportsFilters(this.model)},applyViewerTooltip:function(t,e){var i=this;t.tooltip({items:void 0!==e.items?e.items:".processviewer-hotspot",disabled:void 0!==e.disabled&&e.disabled,content:function(){return(!this.classList||!this.classList.contains("subprocessemb"))&&i.getTooltipContent(this)},hide:{delay:250,duration:120},tooltipClass:"biz-rp-tooltip",close:function(t,e){e.tooltip.hover(function(){$(this).stop(!0).fadeTo(120,1)},function(){$(this).fadeOut(120,function(){$(this).remove()})})}})},updateBreadcrumbData:function(t){this.model.taskPathArray||(this.model.taskPathArray=[]),!this.model.taskPathArray.filter(function(e){return e.id==t.id}).length>0&&this.model.taskPathArray.push({taskName:t.name,id:t.id})},bindDtlEvent:function(){var t=this;$(document).off("click.bz-rp-detaillist").on("click.bz-rp-detaillist",".bz-rp-processviewer-tooltip .bz-rp-icon-detail-list",function(e){var i=$(this),n=i.parent().data("type"),r=i.closest(".bz-rp-processviewer-tooltip").data("guid");if(i.closest(".ui-tooltip").remove(),"load_subprocess"==n){var o,s=i.parent().data("subprocessid"),a=i.parent().find(".bz-rp-processviewer-breadcrump-item").text(),l={process:{id:s}};t.model&&(t.model.dimension?l.dimension=[].concat(t.model.dimension):l.dimension=[],t.model.time&&(l.time=$.extend({},t.model.time))),o="filters="+JSON.stringify(l),t.updateBreadcrumbData(t.model.process),t.model.process={id:s,name:a},t.updateBreadcrumbData(t.model.process),t.publish("filterChange",t.model),t.drawReport(o)}else t.callDetailList({type:n,guid:r,tooltip:!0})})},setColumnsWidth:function(){var t=$(window).width(),e=$(".columns",this.content).removeClass();t>=1024?($(e[0]).addClass("medium-3 columns"),$(e[1]).addClass("medium-9 columns")):($(e[0]).addClass("medium-4 columns"),$(e[1]).addClass("medium-8 columns"))},loadReport:function(t){var e=new bizagi.reporting.facade({proxyPrefix:void 0!==bizagi.proxyPrefix?bizagi.proxyPrefix:""});$(".bz-rp-reports-wrapper",this.canvas).remove(),$.when(e.render({canvas:this.canvas,report:t,info:this.info,components:this.jCMP,widgetInstance:this.widgetInstance})).done(function(t){t.bindWindowResize(),t.widgetInstance.attachReportEvents.apply(t.widgetInstance,[t])})},bindWindowResize:function(){var t=this;$(window).off("resize.processviewer"),"tablet"===t.device||"tablet_ios"===t.device||"tablet_android"===t.device?$(window).off("orientationchange.report").on("orientationchange.report",function(e){e.preventDefault(),t.refresh()}):"desktop"===t.device&&$(window).off("resize.report").on("resize.report",function(e){e.preventDefault(),t.refresh()})},bindExportToExcel:function(t){var e=this;$(e.content).on("click",".bz-rp-export-excel",function(i){i.stopPropagation();var n="reportName="+t+"&filters="+JSON.stringify(e.prepareExcelFilter())+"&user="+bizagi.currentUser.idUser;e.services.exportToExcel(n)})},prepareExcelFilter:function(){var t=$.extend({},this.model);if(t.dimension)for(var e=0,i=t.dimension.length;e<i;e++){var n=t.dimension[e];delete n.name;for(var r=0,o=n.values.length;r<o;r++)n.values[r]}return t},bindToggleSummary:function(){$(this.content).on("click",".bz-rp-toggle-summary",function(t){t.stopPropagation(),$(this).closest(".bz-rp-summary").find("tbody").toggle()})},calculateGraphHeight:function(t){return t<3?{}:{chartArea:{height:115*t}}},setLabelSteps:function(t){var e=1;return t>6&&t<12?e=2:t>=12&&t<=19?e=3:t>=20&&(e=5),{categoryAxis:{labels:{step:e}}}},setNoDataAvailableLabel:function(t){t&&t.find(".bz-rp-chart .custom-overlay > .message").html(this.getResource("bz-rp-nodata"))}}),$.Class.extend("bizagi.reporting.factory",{},{init:function(t){this.dataService=t;var e=bizagi.localization.getResource("datePickerRegional");$.datepicker.setDefaults(e)},create:function(args){if(void 0===args.report)throw"The argument must contain a name to create the report";try{var fn=eval("var bafn = function(args) {  return new bizagi.reporting.report."+args.report+"(args);};bafn");args.dataService=this.dataService;var report=fn(args);return report}catch(t){throw"Can't create a report for "+args.report}}}),bizagi.reporting=bizagi.reporting||{},$.Class.extend("bizagi.reporting.facade",{},{init:function(t){t=t||{},this.dataService=new bizagi.reporting.services.service(t),this.reportFactory=new bizagi.reporting.factory(this.dataService)},render:function(t){var e,i=this.ownerDocument;if((t=t||{}).canvas||(t.canvas=$("body",i)),!t.report)throw"No report name was given";return $.when(this.reportFactory.create(t)).pipe(function(t){return e=t,t.render()}).pipe(function(i){return t.canvas.append(i),e.postRender(),e})}}),bizagi.reporting.report.extend("bizagi.reporting.report.bamprocessloadanalysis",{},{init:function(t){this._super(t),this.setReportNames("BAMProcess","bamprocessloadanalysis")},initializeTemplates:function(){return{main:bizagi.getTemplate("bizagi.reporting.report.bamprocessloadanalysis")+"#bz-rp-bam-process-loadanalysis-main",loadanalysis:bizagi.getTemplate("bizagi.reporting.report.bamprocessloadanalysis")+"#bz-rp-bam-process-loadanalysis"}},drawReport:function(){this.setFiltersForCustomRPComp(),this.drawProcessAnalysis()},getDetailListObject:function(t){this.setReportParams(t);var e={};return t.dataItem.embedded&&(e={task:{id:t.dataItem.embedded.taskId,guid:t.dataItem.embedded.taskGuid},parentProcess:{id:t.dataItem.embedded.parentProcessId}}),{process:{id:t.dataItem.processId},detailList:{reportName:t.sender.options.chartName,columnName:t.series.field,embedded:e}}},drawProcessAnalysis:function(){var t=this,e=t.getTemplate("loadanalysis"),i=$.tmpl(e),n=t.getTemplateComponent(t.content,"bam-process-loadanalysis");n.empty().append(i),$.when(t.services.getBAMProcessAnalysisData()).done(function(e){if(e.rows.length){var i,r={seriesDefaults:{type:"bar",tooltip:{visible:!1}},chartName:"BAM.Process.LoadAnalysis",dataSource:{data:e.rows,sort:[{field:"overdue",dir:"asc"},{field:"onrisk",dir:"asc"},{field:"ontime",dir:"asc"}]},legend:{position:"top"},series:[{field:"ontime",name:t.getResource("reports-general-ontime-label"),color:"#8bbc21"},{field:"onrisk",name:t.getResource("reports-general-onrisk-label"),color:"#FFCF40"},{field:"overdue",name:t.getResource("reports-general-overdue-label"),color:"#FF4040"}],categoryAxis:{field:"processName",reverse:!0}};$.extend(r,t.calculateGraphHeight(e.rows.length)),i=t.graphics.getDataVizObject(r),n.find(".bz-rp-chart").kendoChart(i)}else t.setNoDataAvailableLabel(n)}).fail(function(e){t.setNoDataAvailableLabel(n)})}}),bizagi.reporting.report.extend("bizagi.reporting.report.bamprocessworkinprogress",{},{init:function(t){this._super(t),this.setReportNames("BAMProcess","bamprocessworkinprogress")},getFiltersObject:function(){return{process:{},dimension:[]}},initializeTemplates:function(){return{main:bizagi.getTemplate("bizagi.reporting.report.bamprocessworkinprogress")+"#bz-rp-bam-process-workinprogress-main",casestatus:bizagi.getTemplate("bizagi.reporting.report.bamprocessworkinprogress")+"#bz-rp-bam-process-worinprogress-casestatus",casesgoingoverdue:bizagi.getTemplate("bizagi.reporting.report.bamprocessworkinprogress")+"#bz-rp-bam-process-worinprogress-casesgoingoverdue"}},loadComponents:function(){var t=this;return t._super(),$.when(t.loadProcessesVersionComponent()).pipe(function(){return t.loadDimensionsComponent({process:t.model.process})})},getDetailListObject:function(t){this.setReportParams(t,this.model),this.activateTab("bamprocessworkinprogress");var e=t.sender.options.chartName,i={},n={};"BAM.Process.CasesGoingOverdue"===e?(t.series.embedded&&(n={task:{id:t.series.embedded.taskId,guid:t.series.embedded.taskGuid},parentProcess:{id:t.series.embedded.parentProcessId}}),i={detailList:{reportName:e,columnIndex:$.inArray(t.category,t.sender.options.categoryAxis.categories),embedded:n}}):"BAM.Process.CaseStatus"===e&&(t.dataItem.embedded&&(n={task:{id:t.dataItem.embedded.taskId,guid:t.dataItem.embedded.taskGuid},parentProcess:{id:t.dataItem.embedded.parentProcessId}}),i={detailList:{reportName:e,columnName:t.dataItem.name,embedded:n}});return i},drawReport:function(t){var e=this;e.numberOfProcess>0?(e.setFiltersForCustomRPComp(),e.drawCaseStatus(t),e.drawCasesGoingOverdue(t)):e.drawNoDataAvailableLabel()},drawNoDataAvailableLabel:function(){var t=this,e=t.getTemplate("casesgoingoverdue"),i=t.getTemplateComponent(t.content,"bam-process-workinprogress-casesgoingoverdue"),n=$.tmpl(e);i.empty().append(n),t.setNoDataAvailableLabel(i);var r=t.getTemplate("casestatus"),o=$.tmpl(r),s=t.getTemplateComponent(t.content,"bam-process-workinprogress-casestatus");s.empty().append(o),t.setNoDataAvailableLabel(s)},drawCasesGoingOverdue:function(t){var e=this,i=e.getTemplate("casesgoingoverdue"),n=e.getTemplateComponent(e.content,"bam-process-workinprogress-casesgoingoverdue"),r=$.tmpl(i);n.empty().append(r),$.when(e.services.getCasesGoingOverdue(t)).done(function(t){if(t.rows.length){var i=e.getGraphData(t.rows),r=t.embedded?t.embedded:{},o={series:[{color:"#FF4040",data:i.series,embedded:r}],chartName:"BAM.Process.CasesGoingOverdue",categoryAxis:{categories:i.categories}},s=e.graphics.getDataVizObject(o);n.find(".bz-rp-chart").kendoChart(s)}else e.setNoDataAvailableLabel(n)}).fail(function(t){e.setNoDataAvailableLabel(n)})},drawCaseStatus:function(t){var e=this,i=e.getTemplate("casestatus"),n=$.tmpl(i),r=e.getTemplateComponent(e.content,"bam-process-workinprogress-casestatus");r.empty().append(n),$.when(e.services.getCaseStatus(t)).done(function(t){if(t.ontime||t.overdue||t.onrisk){var i=t.embedded?t.embedded:{},n={dataSource:{data:[{category:e.getResource("reports-general-ontime-label"),value:t.ontime,color:"#8bbc21",name:"ontime",embedded:i},{category:e.getResource("reports-general-overdue-label"),value:t.overdue,color:"#FF4040",name:"overdue",embedded:i},{category:e.getResource("reports-general-onrisk-label"),value:t.onrisk,color:"#FFCF40",name:"onrisk",embedded:i}]},chartName:"BAM.Process.CaseStatus",seriesDefaults:{labels:{template:"#= value# - #= kendo.format('{0:P}', percentage)#"},tooltip:{template:"#= category# - #= value#"},type:"pie"},series:[{field:"value",colorField:"color",categoryField:"category"}],legendItemClick:function(t){var e=$("#chart-case-status").data("kendoChart");e&&e.refresh()}},o=e.graphics.getDataVizObject(n);r.find(".bz-rp-chart").kendoChart(o)}else e.setNoDataAvailableLabel(r)}).fail(function(t){e.setNoDataAvailableLabel(r)})},getGraphData:function(t){for(var e=this.getResource("datePickerRegional").monthNamesShort,i=[0,0,0,0,0,0,0,0,0,0],n=[0,0,0,0,0,0,0,0,0],r=new Date,o=r.getDate(),s=r.getMonth(),a="",l=0,h=0;h<10;h++)void 0!==t[h]&&(t[h].daysLeft<10?i[t[h].daysLeft]=t[h].cases:l+=t[h].cases),a=e[s],n[h]=a+"/"+o,r.setDate(r.getDate()+1),o=r.getDate(),s=r.getMonth();return l>0&&(n.push(this.getResource("reports-general-moredays-label")),i.push(l)),{series:i,categories:n}}}),bizagi.reporting.report.extend("bizagi.reporting.report.bamtasksworkinprogress",{},{init:function(t){this._super(t),this.setReportNames("BAMTask","bamtasksworkinprogress")},getFiltersObject:function(){return{process:{},dimension:[]}},initializeTemplates:function(){return{main:bizagi.getTemplate("bizagi.reporting.report.bamtaskworkinprogress")+"#bz-rp-bam-task-workinprogress-main",taskstatus:bizagi.getTemplate("bizagi.reporting.report.bamtaskworkinprogress")+"#bz-rp-bam-task-worinprogress-taskstatus",taskgoingoverdue:bizagi.getTemplate("bizagi.reporting.report.bamtaskworkinprogress")+"#bz-rp-bam-task-worinprogress-taskgoingoverdue"}},loadComponents:function(){var t=this;return t._super(),$.when(t.loadProcessesVersionComponent()).pipe(function(){return t.loadDimensionsComponent({process:t.model.process})})},getDetailListObject:function(t){var e=t.sender.options.chartName,i={};(this.setReportParams(t,this.model),"BAM.Task.GoingOverdue"===e)?i={detailList:{reportName:e,columnIndex:$.inArray(t.category,t.sender.options.categoryAxis.categories)}}:"BAM.Task.TaskStatus"===e&&(i={detailList:{reportName:e,columnName:t.dataItem.name}});return i},drawReport:function(t){this.setFiltersForCustomRPComp(),this.drawTaskStatus(t),this.drawTaskGoingOverdue(t)},drawTaskGoingOverdue:function(t){var e=this,i=e.getTemplate("taskgoingoverdue"),n=$.tmpl(i),r=e.getTemplateComponent(e.content,"bam-task-workinprogress-taskgoingoverdue");r.empty().append(n),$.when(e.services.getTaskGoingOverdue(t)).done(function(t){if(t.rows.length){var i=e.getGraphData(t.rows),n={chartName:"BAM.Task.GoingOverdue",series:[{color:"#FF4040",data:i.series}],categoryAxis:{categories:i.categories}},o=e.graphics.getDataVizObject(n);r.find(".bz-rp-chart").empty().kendoChart(o)}else e.setNoDataAvailableLabel(r)}).fail(function(t){e.setNoDataAvailableLabel(r)})},drawTaskStatus:function(t){var e=this,i=e.getTemplate("taskstatus"),n=$.tmpl(i),r=e.getTemplateComponent(e.content,"bam-task-workinprogress-taskstatus");r.empty().append(n),$.when(e.services.getProcessVersionList()).pipe(function(i){0==i.processes.length?e.setNoDataAvailableLabel(r):$.when(e.services.getTaskStatus(t)).done(function(t){if(t.ontime>0||t.onrisk>0||t.overdue>0){var i={dataSource:{data:[{category:e.getResource("reports-general-ontime-label"),value:t.ontime,color:"#8bbc21",name:"ontime"},{category:e.getResource("reports-general-onrisk-label"),value:t.onrisk,color:"#FFCF40",name:"onrisk"},{category:e.getResource("reports-general-overdue-label"),value:t.overdue,color:"#FF4040",name:"overdue"}]},chartName:"BAM.Task.TaskStatus",seriesDefaults:{labels:{template:"#= value# - #= kendo.format('{0:P}', percentage)#"},tooltip:{template:"#= category# - #= value#"},type:"pie"},series:[{field:"value",colorField:"color",categoryField:"category"}]},n=e.graphics.getDataVizObject(i);r.find(".bz-rp-chart").empty().kendoChart(n)}else e.setNoDataAvailableLabel(r)}).fail(function(t){e.setNoDataAvailableLabel(r)})})},getGraphData:function(t){for(var e=this.getResource("datePickerRegional").monthNamesShort,i=new Array(10),n=new Array(10),r=new Date,o=r.getDate(),s=r.getMonth(),a="",l=0,h=0;h<10;h++)void 0!==t[h]&&(t[h].daysLeft<10?i[t[h].daysLeft]=t[h].tasks:l+=t[h].tasks),a=e[s],n[h]=a+"/"+o,r.setDate(r.getDate()+1),o=r.getDate(),s=r.getMonth();l>0&&(n.push(this.getResource("reports-general-moredays-label")),i.push(l));for(var c=0;c<i.length;c++)void 0===i[c]&&(i[c]=null);return{series:i,categories:n}}}),bizagi.reporting.report.extend("bizagi.reporting.report.bamtaskloadanalysis",{},{init:function(t){this._super(t),this.manualTasks=[],this.setReportNames("BAMTask","bamtaskloadanalysis")},getFiltersObject:function(){return{process:{},dimension:[]}},initializeTemplates:function(){return{main:bizagi.getTemplate("bizagi.reporting.report.bamtaskloadanalysis")+"#bz-rp-bam-task-loadanalysis-main",manualtasks:bizagi.getTemplate("bizagi.reporting.report.bamtaskloadanalysis")+"#bz-rp-bam-task-loadanalysis-manualtasks",tooltip:bizagi.getTemplate("bizagi.reporting.report.bamtaskloadanalysis")+"#bz-rp-bam-task-loadanalysis-tooltip","process-breadcrumb":bizagi.getTemplate("bizagi.reporting.report.bamtaskloadanalysis")+"#bz-rp-process-breadcrumb"}},loadComponents:function(){var t=this;return t._super(),$.when(t.loadProcessesVersionComponent()).pipe(function(){return t.loadDimensionsComponent({process:t.model.process})})},postRender:function(){this.eventHandlers(),this.activateTab("bamtaskloadanalysis"),this.callModalWindow()},getDetailListObject:function(t){return this.setReportParams(t,this.model),{detailList:{reportName:"BAM.Task.LoadAnalysis",columnName:t.type,task:t.guid}}},drawReport:function(t){var e=this;e.setFiltersForCustomRPComp(),$.when(e.services.getProcessVersionList()).pipe(function(i){0==i.processes.length?e.drawProcessModel():$.when(e.services.getTaskLoadAnalysis(t)).done(function(t){e.manualTasks=t,e.drawProcessModel(),e.drawProcessBreadcrumb()})})},drawProcessModel:function(){var t=$(".bz-rp-processviewer-canvas",this.content);this.renderProcessViewer(t)},drawManualTask:function(){var t=$(".bz-rp-bam-task-loadanalysis-manualtasks",this.content),e=this.getTemplate("manualtasks"),i=$.tmpl(e,this.manualTasks);t.empty().append(i)},drawProcessBreadcrumb:function(){var t=this,e=$(".bz-rp-processbreadcrumb-container",t.content);if(e.empty(),t.model.taskPathArray&&t.model.taskPathArray.length>1){var i=t.getTemplate("process-breadcrumb");$.tmpl(i,{taskData:t.model.taskPathArray}).appendTo(e),t.addBreadCrumbHandlers()}},refreshBreadCrumb:function(){var t,e,i=this;if(i.model.taskPathArray){for(t=i.model.taskPathArray.length;t-- >0;)parseInt(i.model.process.id)==parseInt(i.model.taskPathArray[t].id)&&(e=t);0==e?i.model.taskPathArray=[].concat(i.model.taskPathArray[0]):i.model.taskPathArray.splice(e+1,i.model.taskPathArray.length)}},addBreadCrumbHandlers:function(){var t=this,e=$(".bz-rp-processbreadcrumb-container",t.content);$("a",e).click(function(e){e.preventDefault();var i=$(e.currentTarget).data("taskid"),n=e.currentTarget.text;0==n.indexOf(" > ")&&(n=n.substring(3,n.length)),t.model.process={id:i,name:n},t.refreshBreadCrumb(),t.components.dimension.publish("filterbydimension",[])})},getTooltipContent:function(t){var e=t.id,i=this.getTemplate("tooltip"),n=this.manualTasks.rows.filter(function(t){return t.guid==e});return $.tmpl(i,n[0])},eventHandlers:function(){var t=this,e=$(".bz-rp-processviewer-canvas",t.content),i=$(".bz-rp-bam-task-loadanalysis-manualtasks",t.content);t.applyViewerTooltip(e,{items:".usertask, .abstracttask, .manualtask, .subprocess, .singletontask, .nonetask, .callactivity"}),t.bindDtlEvent(),t.bindToggleSummary(),i.on("click",".bz-rp-bam-task-loadanalysis-manualtasks-rows",function(e){var i=$(this),n=i.data("guid");i.siblings().removeClass(".bz-rp-summary-highlight"),i.addClass(".bz-rp-summary-highlight"),t.viewerPlugin.processviewer("unSelectAllShapes"),t.viewerPlugin.processviewer("selectShape",n)}),e.on("pvComplete",function(e){t.drawManualTask(),$(".abstracttask, .usertask, .manualtask, .subprocess, .singletontask, .nonetask, .callactivity").addClass("bz-rp-process-viewer-activate"),$(".subprocess.subprocessemb").removeClass("bz-rp-process-viewer-activate")})}}),bizagi.reporting.report.extend("bizagi.reporting.report.analyticsprocesscycletime",{},{init:function(t){this._super(t),this.cleanReferrerParams()},getFiltersObject:function(){return{process:{},dimension:[],time:{}}},initializeTemplates:function(){return{main:bizagi.getTemplate("bizagi.reporting.report.analyticsprocesscycletime")+"#bz-rp-analytics-process-cycletime-main",cycletimesummary:bizagi.getTemplate("bizagi.reporting.report.analyticsprocesscycletime")+"#bz-rp-analytics-process-cycletime-summary",caseduration:bizagi.getTemplate("bizagi.reporting.report.analyticsprocesscycletime")+"#bz-rp-analytics-process-cycletime-caseduration",casestatus:bizagi.getTemplate("bizagi.reporting.report.analyticsprocesscycletime")+"#bz-rp-analytics-process-cycletime-casestatus"}},loadComponents:function(){var t=this;return t._super(),$.when(t.loadProcessesVersionComponent()).pipe(function(){return t.loadDimensionsComponent({process:t.model.process})}).pipe(function(){return t.loadTimeComponent()})},postRender:function(){this.bindToggleSummary()},getReportExcelUrl:function(t){var e=$.extend({},this.taskGuid,this.model),i="reportName="+t+"&filters="+JSON.stringify(e)+"&user="+bizagi.currentUser.idUser;return this.services.getExportExcelUrl(i)},getDetailListObject:function(t){var e=t.sender.options.chartName,i=t.dataItem.name,n={};return t.dataItem.embedded&&(n={task:{id:t.dataItem.embedded.taskId,guid:t.dataItem.embedded.taskGuid},parentProcess:{id:t.dataItem.embedded.parentProcessId}}),"Analytics.Process.CycleTimeSummary"===e&&{detailList:{reportName:e,columnName:i,embedded:n}}},drawReport:function(t){var e=this;e.setFiltersForCustomRPComp();var i=$("#bizagi-reporting-wrapper");i.startLoading({overlay:!0,delay:150,opacity:.9}),$.when(e.services.getCycleTime(t)).done(function(t){i.endLoading(),e.drawCaseDuration([{averageDuration:t.summaryTable.averageDuration,expectedDuration:t.summaryTable.expectedDuration,embedded:t.embedded}]),e.drawCaseStatus(t.caseState,t.embedded),e.drawCycleTimeSummary(t.summaryTable,t.embedded)})},drawCycleTimeSummary:function(t,e){var i=this,n=i.getTemplate("cycletimesummary");t.embedded=e||{};var r=$.tmpl(n,t,{getReportExcelUrl:i.getReportExcelUrl("analytics.process.cycletime"),showExcelIcon:!i.device||"desktop"==i.device.toLowerCase()});i.getTemplateComponent(i.content,"analytics-process-cycletime-summary").empty().append(r)},drawCaseDuration:function(t,e){var i=this,n=i.getTemplate("caseduration"),r=$.tmpl(n),o=i.getTemplateComponent(i.content,"analytics-process-cycletime-caseduration");if(o.empty().append(r),t.embedded=e||{},t[0].averageDuration>0||t[0].expectedDuration>0){var s={dataSource:{data:t},seriesDefaults:{tooltip:{template:"#= series.name #: #= value #"},type:"column",spacing:.3},series:[{field:"averageDuration",name:i.getResource("analytics-process-cycletime-avgduration"),color:"#FF4040"},{field:"expectedDuration",name:i.getResource("analytics-process-cycletime-expduration"),color:"#b8c7e8"}]},a=i.graphics.getDataVizObject(s);o.find(".bz-rp-chart").empty().kendoChart(a)}else i.setNoDataAvailableLabel(o)},drawCaseStatus:function(t,e){var i=this,n=i.getTemplate("casestatus"),r=$.tmpl(n),o=i.getTemplateComponent(i.content,"analytics-process-cycletime-casestatus");if(o.empty().append(r),t.onTime>0||t.overdue>0){var s={dataSource:{data:[{category:i.getResource("reports-general-ontime-label"),value:t.onTime,color:"#8bbc21",name:"ontime",embedded:e},{category:i.getResource("reports-general-overdue-label"),value:t.overdue,color:"#FF4040",name:"overdue",embedded:e}]},chartName:"Analytics.Process.CycleTimeSummary",seriesDefaults:{labels:{template:"#= value# - #= kendo.format('{0:P}', percentage)#"},tooltip:{template:"#= category# - #= value#"},type:"pie"},series:[{field:"value",colorField:"color",categoryField:"category"}]},a=i.graphics.getDataVizObject(s);o.find(".bz-rp-chart").kendoChart(a)}else i.setNoDataAvailableLabel(o)}}),bizagi.reporting.component.controller("bizagi.reporting.component.processversionfilter",{init:function(t,e,i){i=i||{},this._super(t),this.processes=i.model.processes,this.services=e,this.process=this.setDefaultProcess(i.process),this.position=0,this.version=0,this.render()},loadTemplates:function(){var t={processversionfilter:bizagi.getTemplate("bizagi.reporting.component.processversionfilter")+"#bz-rp-filters-process-version"};return this._super(t)},renderComponent:function(){var t=this.getTemplate("processversionfilter");return $.tmpl(t)},postRender:function(t){var e=this;$.when(e.renderProcessCombo(t),e.renderVersionCombo(t)).done(function(){e.resolvePostRender()})},setDefaultProcess:function(t){var e=[];return this.processes.length&&(e=$.isEmptyObject(t)?{process:{id:this.processes[0].process[0].id,name:this.processes[0].name}}:{process:t}),e},getArrayPosFromBackButton:function(){return!!(bizagi.referrerParams.reports.model&&bizagi.referrerParams.reports.model.process&&bizagi.referrerParams.reports.fromBackButton)&&bizagi.referrerParams.reports.model.process.arrayPosition},renderProcessCombo:function(t){var e=this,i=$.Deferred(),n=e.getProcessDataForCombo();e.$processContainer=$("#process",t);var r=e.getArrayPosFromBackButton(),o=0==r?n.combo[e.position]:n.combo[r];return e.$processContainer.uicombo({data:n,itemValue:function(t){return t.process[0].id+"/"+t.position+"/"+t.process[0].guid},itemText:function(t){return t.name},onComplete:function(){i.resolve()},initValue:o,onChange:function(t){data=t.ui.data("value").split("/"),e.process.process.id=parseInt(data[0]),e.position=parseInt(data[1]),e.process.process.arrayPosition=e.position,e.version=0,e.renderVersionCombo(),e.publish("initProcessBreadcrumb"),e.publish("filterbyprocessversion",e.process)}}),i},renderVersionCombo:function(t){var e=this,i=$.Deferred(),n=e.getVersionDataForCombo();return e.$versionContainer=$("#version",t),e.$versionContainer.empty().uicombo({data:n,itemValue:function(t){return t.id},itemText:function(t){return t.version},initValue:n.combo[e.version],onComplete:function(t){i.resolve()},onChange:function(t){var i=t.ui.data("value");e.process.process.id=parseInt(i),e.publish("filterbyprocessversion",e.process)}}),i},getProcessDataForCombo:function(){for(var t=this,e={combo:[],label:t.getResource("bz-rp-components-process-label")},i=[].concat(t.processes),n=0,r=i.length;n<r;n++){i[n].position=n,e.combo.push(i[n]);for(var o=0,s=i[n].process.length;o<s;o++)i[n].process[o].id===t.process.process.id&&(t.position=n,t.version=o)}return e},getVersionDataForCombo:function(){return{combo:this.processes.length?[].concat(this.processes[this.position].process):[],label:this.getResource("bz-rp-components-process-version-label")}}}),function(t){"use strict";t.widget("ui.rangeSliderMouseTouch",t.ui.mouse,{enabled:!0,_mouseInit:function(){var e=this;t.ui.mouse.prototype._mouseInit.apply(this),this._mouseDownEvent=!1,this.element.bind("touchstart."+this.widgetName,function(t){return e._touchStart(t)})},_mouseDestroy:function(){t(document).unbind("touchmove."+this.widgetName,this._touchMoveDelegate).unbind("touchend."+this.widgetName,this._touchEndDelegate),t.ui.mouse.prototype._mouseDestroy.apply(this)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},destroy:function(){this._mouseDestroy(),t.ui.mouse.prototype.destroy.apply(this),this._mouseInit=null},_touchStart:function(e){if(!this.enabled)return!1;e.which=1,e.preventDefault(),this._fillTouchEvent(e);var i=this,n=this._mouseDownEvent;this._mouseDown(e),n!==this._mouseDownEvent&&(this._touchEndDelegate=function(t){i._touchEnd(t)},this._touchMoveDelegate=function(t){i._touchMove(t)},t(document).bind("touchmove."+this.widgetName,this._touchMoveDelegate).bind("touchend."+this.widgetName,this._touchEndDelegate))},_mouseDown:function(e){return!!this.enabled&&t.ui.mouse.prototype._mouseDown.apply(this,[e])},_touchEnd:function(e){this._fillTouchEvent(e),this._mouseUp(e),t(document).unbind("touchmove."+this.widgetName,this._touchMoveDelegate).unbind("touchend."+this.widgetName,this._touchEndDelegate),this._mouseDownEvent=!1,t(document).trigger("mouseup")},_touchMove:function(t){return t.preventDefault(),this._fillTouchEvent(t),this._mouseMove(t)},_fillTouchEvent:function(t){var e;e=void 0===t.targetTouches&&void 0===t.changedTouches?t.originalEvent.targetTouches[0]||t.originalEvent.changedTouches[0]:t.targetTouches[0]||t.changedTouches[0],t.pageX=e.pageX,t.pageY=e.pageY}})}(jQuery),function(t){"use strict";t.widget("ui.rangeSliderDraggable",t.ui.rangeSliderMouseTouch,{cache:null,options:{containment:null},_create:function(){t.ui.rangeSliderMouseTouch.prototype._create.apply(this),setTimeout(t.proxy(this._initElementIfNotDestroyed,this),10)},destroy:function(){this.cache=null,t.ui.rangeSliderMouseTouch.prototype.destroy.apply(this)},_initElementIfNotDestroyed:function(){this._mouseInit&&this._initElement()},_initElement:function(){this._mouseInit(),this._cache()},_setOption:function(e,i){"containment"===e&&(this.options.containment=null===i||0===t(i).length?null:t(i))},_mouseStart:function(t){return this._cache(),this.cache.click={left:t.pageX,top:t.pageY},this.cache.initialOffset=this.element.offset(),this._triggerMouseEvent("mousestart"),!0},_mouseDrag:function(t){var e=t.pageX-this.cache.click.left;return e=this._constraintPosition(e+this.cache.initialOffset.left),this._applyPosition(e),this._triggerMouseEvent("sliderDrag"),!1},_mouseStop:function(){this._triggerMouseEvent("stop")},_constraintPosition:function(t){return 0!==this.element.parent().length&&null!==this.cache.parent.offset&&(t=Math.min(t,this.cache.parent.offset.left+this.cache.parent.width-this.cache.width.outer),t=Math.max(t,this.cache.parent.offset.left)),t},_applyPosition:function(t){var e={top:this.cache.offset.top,left:t};this.element.offset({left:t}),this.cache.offset=e},_cacheIfNecessary:function(){null===this.cache&&this._cache()},_cache:function(){this.cache={},this._cacheMargins(),this._cacheParent(),this._cacheDimensions(),this.cache.offset=this.element.offset()},_cacheMargins:function(){this.cache.margin={left:this._parsePixels(this.element,"marginLeft"),right:this._parsePixels(this.element,"marginRight"),top:this._parsePixels(this.element,"marginTop"),bottom:this._parsePixels(this.element,"marginBottom")}},_cacheParent:function(){if(null!==this.options.parent){var t=this.element.parent();this.cache.parent={offset:t.offset(),width:t.width()}}else this.cache.parent=null},_cacheDimensions:function(){this.cache.width={outer:this.element.outerWidth(),inner:this.element.width()}},_parsePixels:function(t,e){return parseInt(t.css(e),10)||0},_triggerMouseEvent:function(t){var e=this._prepareEventData();this.element.trigger(t,e)},_prepareEventData:function(){return{element:this.element,offset:this.cache.offset||null}}})}(jQuery),function(t,e){"use strict";t.widget("ui.rangeSlider",{options:{bounds:{min:0,max:100},defaultValues:{min:20,max:50},wheelMode:null,wheelSpeed:4,arrows:!0,valueLabels:"show",formatter:null,durationIn:0,durationOut:400,delayOut:200,range:{min:!1,max:!1},step:!1,scales:!1,enabled:!0},_values:null,_valuesChanged:!1,bar:null,leftHandle:null,rightHandle:null,innerBar:null,container:null,arrows:null,labels:null,changing:{min:!1,max:!1},changed:{min:!1,max:!1},ruler:null,_create:function(){this._setDefaultValues(),this.labels={left:null,right:null,leftDisplayed:!0,rightDisplayed:!0},this.arrows={left:null,right:null},this.changing={min:!1,max:!1},this.changed={min:!1,max:!1},this._createElements(),this._bindResize(),setTimeout(t.proxy(this.resize,this),1),setTimeout(t.proxy(this._initValues,this),1)},_setDefaultValues:function(){this._values={min:this.options.defaultValues.min,max:this.options.defaultValues.max}},_bindResize:function(){var e=this;this._resizeProxy=function(t){e.resize(t)},t(window).resize(this._resizeProxy)},_initWidth:function(){this.container.css("width",this.element.width()-this.container.outerWidth(!0)+this.container.width()),this.innerBar.css("width",this.container.width()-this.innerBar.outerWidth(!0)+this.innerBar.width())},_initValues:function(){this.values(this._values.min,this._values.max)},_setOption:function(t,e){this._setWheelOption(t,e),this._setArrowsOption(t,e),this._setLabelsOption(t,e),this._setLabelsDurations(t,e),this._setFormatterOption(t,e),this._setBoundsOption(t,e),this._setRangeOption(t,e),this._setStepOption(t,e),this._setScalesOption(t,e),this._setEnabledOption(t,e)},_validProperty:function(t,e,i){return null===t||void 0===t[e]?i:t[e]},_setStepOption:function(t,e){"step"===t&&(this.options.step=e,this._leftHandle("option","step",e),this._rightHandle("option","step",e),this._changed(!0))},_setScalesOption:function(t,e){"scales"===t&&(!1===e||null===e?(this.options.scales=!1,this._destroyRuler()):e instanceof Array&&(this.options.scales=e,this._updateRuler()))},_setRangeOption:function(t,e){"range"===t&&(this._bar("option","range",e),this.options.range=this._bar("option","range"),this._changed(!0))},_setBoundsOption:function(t,e){"bounds"===t&&void 0!==e.min&&void 0!==e.max&&this.bounds(e.min,e.max)},_setWheelOption:function(t,e){("wheelMode"===t||"wheelSpeed"===t)&&(this._bar("option",t,e),this.options[t]=this._bar("option",t))},_setLabelsOption:function(t,e){if("valueLabels"===t){if("hide"!==e&&"show"!==e&&"change"!==e)return;this.options.valueLabels=e,"hide"!==e?(this._createLabels(),this._leftLabel("update"),this._rightLabel("update")):this._destroyLabels()}},_setFormatterOption:function(t,e){"formatter"===t&&null!==e&&"function"==typeof e&&(this.options.formatter=e,"hide"!==this.options.valueLabels&&(this._destroyLabels(),this._createLabels()))},_setArrowsOption:function(t,e){"arrows"!==t||!0!==e&&!1!==e||e===this.options.arrows||(!0===e?(this.element.removeClass("ui-rangeSlider-noArrow").addClass("ui-rangeSlider-withArrows"),this.arrows.left.css("display","block"),this.arrows.right.css("display","block"),this.options.arrows=!0):!1===e&&(this.element.addClass("ui-rangeSlider-noArrow").removeClass("ui-rangeSlider-withArrows"),this.arrows.left.css("display","none"),this.arrows.right.css("display","none"),this.options.arrows=!1),this._initWidth())},_setLabelsDurations:function(t,e){if("durationIn"===t||"durationOut"===t||"delayOut"===t){if(parseInt(e,10)!==e)return;null!==this.labels.left&&this._leftLabel("option",t,e),null!==this.labels.right&&this._rightLabel("option",t,e),this.options[t]=e}},_setEnabledOption:function(t,e){"enabled"===t&&this.toggle(e)},_createElements:function(){"absolute"!==this.element.css("position")&&this.element.css("position","relative"),this.element.addClass("ui-rangeSlider"),this.container=t("<div class='ui-rangeSlider-container' />").css("position","absolute").appendTo(this.element),this.innerBar=t("<div class='ui-rangeSlider-innerBar' />").css("position","absolute").css("top",0).css("left",0),this._createHandles(),this._createBar(),this.container.prepend(this.innerBar),this._createArrows(),"hide"!==this.options.valueLabels?this._createLabels():this._destroyLabels(),this._updateRuler(),this.options.enabled||this._toggle(this.options.enabled)},_createHandle:function(e){return t("<div />")[this._handleType()](e).bind("sliderDrag",t.proxy(this._changing,this)).bind("stop",t.proxy(this._changed,this))},_createHandles:function(){this.leftHandle=this._createHandle({isLeft:!0,bounds:this.options.bounds,value:this._values.min,step:this.options.step}).appendTo(this.container),this.rightHandle=this._createHandle({isLeft:!1,bounds:this.options.bounds,value:this._values.max,step:this.options.step}).appendTo(this.container)},_createBar:function(){this.bar=t("<div />").prependTo(this.container).bind("sliderDrag scroll zoom",t.proxy(this._changing,this)).bind("stop",t.proxy(this._changed,this)),this._bar({leftHandle:this.leftHandle,rightHandle:this.rightHandle,values:{min:this._values.min,max:this._values.max},type:this._handleType(),range:this.options.range,wheelMode:this.options.wheelMode,wheelSpeed:this.options.wheelSpeed}),this.options.range=this._bar("option","range"),this.options.wheelMode=this._bar("option","wheelMode"),this.options.wheelSpeed=this._bar("option","wheelSpeed")},_createArrows:function(){this.arrows.left=this._createArrow("left"),this.arrows.right=this._createArrow("right"),this.options.arrows?this.element.addClass("ui-rangeSlider-withArrows"):(this.arrows.left.css("display","none"),this.arrows.right.css("display","none"),this.element.addClass("ui-rangeSlider-noArrow"))},_createArrow:function(e){var i,n=t("<div class='ui-rangeSlider-arrow' />").append("<div class='ui-rangeSlider-arrow-inner' />").addClass("ui-rangeSlider-"+e+"Arrow").css("position","absolute").css(e,0).appendTo(this.element);return i="right"===e?t.proxy(this._scrollRightClick,this):t.proxy(this._scrollLeftClick,this),n.bind("mousedown touchstart",i),n},_proxy:function(t,e,i){var n=Array.prototype.slice.call(i);return t[e].apply(t,n)},_handleType:function(){return"rangeSliderHandle"},_barType:function(){return"rangeSliderBar"},_bar:function(){return this._proxy(this.bar,this._barType(),arguments)},_labelType:function(){return"rangeSliderLabel"},_leftLabel:function(){return this._proxy(this.labels.left,this._labelType(),arguments)},_rightLabel:function(){return this._proxy(this.labels.right,this._labelType(),arguments)},_leftHandle:function(){return this._proxy(this.leftHandle,this._handleType(),arguments)},_rightHandle:function(){return this._proxy(this.rightHandle,this._handleType(),arguments)},_getValue:function(t,e){return e===this.rightHandle&&(t-=e.outerWidth()),t*(this.options.bounds.max-this.options.bounds.min)/(this.container.innerWidth()-e.outerWidth(!0))+this.options.bounds.min},_trigger:function(t){var e=this;setTimeout(function(){e.element.trigger(t,{label:e.element,values:e.values()})},1)},_changing:function(){this._updateValues()&&(this._trigger("valuesChanging"),this._valuesChanged=!0)},_deactivateLabels:function(){"change"===this.options.valueLabels&&(this._leftLabel("option","show","hide"),this._rightLabel("option","show","hide"))},_reactivateLabels:function(){"change"===this.options.valueLabels&&(this._leftLabel("option","show","change"),this._rightLabel("option","show","change"))},_changed:function(t){!0===t&&this._deactivateLabels(),(this._updateValues()||this._valuesChanged)&&(this._trigger("valuesChanged"),!0!==t&&this._trigger("userValuesChanged"),this._valuesChanged=!1),!0===t&&this._reactivateLabels()},_updateValues:function(){var t=this._leftHandle("value"),e=this._rightHandle("value"),i=this._min(t,e),n=this._max(t,e),r=i!==this._values.min||n!==this._values.max;return this._values.min=this._min(t,e),this._values.max=this._max(t,e),r},_min:function(t,e){return Math.min(t,e)},_max:function(t,e){return Math.max(t,e)},_createLabel:function(e,i){var n;return null===e?(n=this._getLabelConstructorParameters(e,i),e=t("<div />").appendTo(this.element)[this._labelType()](n)):(n=this._getLabelRefreshParameters(e,i),e[this._labelType()](n)),e},_getLabelConstructorParameters:function(t,e){return{handle:e,handleType:this._handleType(),formatter:this._getFormatter(),show:this.options.valueLabels,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}},_getLabelRefreshParameters:function(){return{formatter:this._getFormatter(),show:this.options.valueLabels,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}},_getFormatter:function(){return!1===this.options.formatter||null===this.options.formatter?this._defaultFormatter:this.options.formatter},_defaultFormatter:function(t){return Math.round(t)},_destroyLabel:function(t){return null!==t&&(t[this._labelType()]("destroy"),t.remove(),t=null),t},_createLabels:function(){this.labels.left=this._createLabel(this.labels.left,this.leftHandle),this.labels.right=this._createLabel(this.labels.right,this.rightHandle),this._leftLabel("pair",this.labels.right)},_destroyLabels:function(){this.labels.left=this._destroyLabel(this.labels.left),this.labels.right=this._destroyLabel(this.labels.right)},_stepRatio:function(){return this._leftHandle("stepRatio")},_scrollRightClick:function(t){return!!this.options.enabled&&(t.preventDefault(),this._bar("startScroll"),this._bindStopScroll(),void this._continueScrolling("scrollRight",4*this._stepRatio(),1))},_continueScrolling:function(t,e,i,n){if(!this.options.enabled)return!1;this._bar(t,i),n=n||5,n--;var r=this,o=Math.max(1,4/this._stepRatio());this._scrollTimeout=setTimeout(function(){0===n&&(e>16?e=Math.max(16,e/1.5):i=Math.min(o,2*i),n=5),r._continueScrolling(t,e,i,n)},e)},_scrollLeftClick:function(t){return!!this.options.enabled&&(t.preventDefault(),this._bar("startScroll"),this._bindStopScroll(),void this._continueScrolling("scrollLeft",4*this._stepRatio(),1))},_bindStopScroll:function(){var e=this;this._stopScrollHandle=function(t){t.preventDefault(),e._stopScroll()},t(document).bind("mouseup touchend",this._stopScrollHandle)},_stopScroll:function(){t(document).unbind("mouseup touchend",this._stopScrollHandle),this._stopScrollHandle=null,this._bar("stopScroll"),clearTimeout(this._scrollTimeout)},_createRuler:function(){this.ruler=t("<div class='ui-rangeSlider-ruler' />").appendTo(this.innerBar)},_setRulerParameters:function(){this.ruler.ruler({min:this.options.bounds.min,max:this.options.bounds.max,scales:this.options.scales})},_destroyRuler:function(){null!==this.ruler&&t.fn.ruler&&(this.ruler.ruler("destroy"),this.ruler.remove(),this.ruler=null)},_updateRuler:function(){this._destroyRuler(),!1!==this.options.scales&&t.fn.ruler&&(this._createRuler(),this._setRulerParameters())},values:function(t,e){var i;return void 0!==t&&void 0!==e?(this._deactivateLabels(),i=this._bar("values",t,e),this._changed(!0),this._reactivateLabels()):i=this._bar("values",t,e),i},min:function(t){return this._values.min=this.values(t,this._values.max).min,this._values.min},max:function(t){return this._values.max=this.values(this._values.min,t).max,this._values.max},bounds:function(t,e){return this._isValidValue(t)&&this._isValidValue(e)&&e>t&&(this._setBounds(t,e),this._updateRuler(),this._changed(!0)),this.options.bounds},_isValidValue:function(t){return void 0!==t&&parseFloat(t)===t},_setBounds:function(t,e){this.options.bounds={min:t,max:e},this._leftHandle("option","bounds",this.options.bounds),this._rightHandle("option","bounds",this.options.bounds),this._bar("option","bounds",this.options.bounds)},zoomIn:function(t){this._bar("zoomIn",t)},zoomOut:function(t){this._bar("zoomOut",t)},scrollLeft:function(t){this._bar("startScroll"),this._bar("scrollLeft",t),this._bar("stopScroll")},scrollRight:function(t){this._bar("startScroll"),this._bar("scrollRight",t),this._bar("stopScroll")},resize:function(){this._initWidth(),this._leftHandle("update"),this._rightHandle("update"),this._bar("update")},enable:function(){this.toggle(!0)},disable:function(){this.toggle(!1)},toggle:function(t){void 0===t&&(t=!this.options.enabled),this.options.enabled!==t&&this._toggle(t)},_toggle:function(t){this.options.enabled=t,this.element.toggleClass("ui-rangeSlider-disabled",!t);var e=t?"enable":"disable";this._bar(e),this._leftHandle(e),this._rightHandle(e),this._leftLabel(e),this._rightLabel(e)},destroy:function(){this.element.removeClass("ui-rangeSlider-withArrows ui-rangeSlider-noArrow ui-rangeSlider-disabled"),this._destroyWidgets(),this._destroyElements(),this.element.removeClass("ui-rangeSlider"),this.options=null,t(window).unbind("resize",this._resizeProxy),this._resizeProxy=null,this._bindResize=null,t.Widget.prototype.destroy.apply(this,arguments)},_destroyWidget:function(t){this["_"+t]("destroy"),this[t].remove(),this[t]=null},_destroyWidgets:function(){this._destroyWidget("bar"),this._destroyWidget("leftHandle"),this._destroyWidget("rightHandle"),this._destroyRuler(),this._destroyLabels()},_destroyElements:function(){this.container.remove(),this.container=null,this.innerBar.remove(),this.innerBar=null,this.arrows.left.remove(),this.arrows.right.remove(),this.arrows=null}})}(jQuery),function(t){"use strict";t.widget("ui.rangeSliderHandle",t.ui.rangeSliderDraggable,{currentMove:null,margin:0,parentElement:null,options:{isLeft:!0,bounds:{min:0,max:100},range:!1,value:0,step:!1},_value:0,_left:0,_create:function(){t.ui.rangeSliderDraggable.prototype._create.apply(this),this.element.css("position","absolute").css("top",0).addClass("ui-rangeSlider-handle").toggleClass("ui-rangeSlider-leftHandle",this.options.isLeft).toggleClass("ui-rangeSlider-rightHandle",!this.options.isLeft),this.element.append("<div class='ui-rangeSlider-handle-inner' />"),this._value=this._constraintValue(this.options.value)},destroy:function(){this.element.empty(),t.ui.rangeSliderDraggable.prototype.destroy.apply(this)},_setOption:function(e,i){"isLeft"!==e||!0!==i&&!1!==i||i===this.options.isLeft?"step"===e&&this._checkStep(i)?(this.options.step=i,this.update()):"bounds"===e?(this.options.bounds=i,this.update()):"range"===e&&this._checkRange(i)&&(this.options.range=i,this.update()):(this.options.isLeft=i,this.element.toggleClass("ui-rangeSlider-leftHandle",this.options.isLeft).toggleClass("ui-rangeSlider-rightHandle",!this.options.isLeft),this._position(this._value),this.element.trigger("switch",this.options.isLeft)),t.ui.rangeSliderDraggable.prototype._setOption.apply(this,[e,i])},_checkRange:function(t){return!1===t||!this._isValidValue(t.min)&&!this._isValidValue(t.max)},_isValidValue:function(t){return void 0!==t&&!1!==t&&parseFloat(t)!==t},_checkStep:function(t){return!1===t||parseFloat(t)===t},_initElement:function(){t.ui.rangeSliderDraggable.prototype._initElement.apply(this),0===this.cache.parent.width||null===this.cache.parent.width?setTimeout(t.proxy(this._initElementIfNotDestroyed,this),500):(this._position(this._value),this._triggerMouseEvent("initialize"))},_bounds:function(){return this.options.bounds},_cache:function(){t.ui.rangeSliderDraggable.prototype._cache.apply(this),this._cacheParent()},_cacheParent:function(){var t=this.element.parent();this.cache.parent={element:t,offset:t.offset(),padding:{left:this._parsePixels(t,"paddingLeft")},width:t.width()}},_position:function(t){var e=this._getPositionForValue(t);this._applyPosition(e)},_constraintPosition:function(t){var e=this._getValueForPosition(t);return this._getPositionForValue(e)},_applyPosition:function(e){t.ui.rangeSliderDraggable.prototype._applyPosition.apply(this,[e]),this._left=e,this._setValue(this._getValueForPosition(e)),this._triggerMouseEvent("moving")},_prepareEventData:function(){var e=t.ui.rangeSliderDraggable.prototype._prepareEventData.apply(this);return e.value=this._value,e},_setValue:function(t){t!==this._value&&(this._value=t)},_constraintValue:function(t){if(t=Math.min(t,this._bounds().max),t=Math.max(t,this._bounds().min),t=this._round(t),!1!==this.options.range){var e=this.options.range.min||!1,i=this.options.range.max||!1;!1!==e&&(t=Math.max(t,this._round(e))),!1!==i&&(t=Math.min(t,this._round(i))),t=Math.min(t,this._bounds().max),t=Math.max(t,this._bounds().min)}return t},_round:function(t){return!1!==this.options.step&&this.options.step>0?Math.round(t/this.options.step)*this.options.step:t},_getPositionForValue:function(t){return this.cache&&this.cache.parent&&null!==this.cache.parent.offset?((t=this._constraintValue(t))-this.options.bounds.min)/(this.options.bounds.max-this.options.bounds.min)*(this.cache.parent.width-this.cache.width.outer)+this.cache.parent.offset.left:0},_getValueForPosition:function(t){var e=this._getRawValueForPositionAndBounds(t,this.options.bounds.min,this.options.bounds.max);return this._constraintValue(e)},_getRawValueForPositionAndBounds:function(t,e,i){return(t-(null===this.cache.parent.offset?0:this.cache.parent.offset.left))/(this.cache.parent.width-this.cache.width.outer)*(i-e)+e},value:function(t){return void 0!==t&&(this._cache(),t=this._constraintValue(t),this._position(t)),this._value},update:function(){this._cache();var t=this._constraintValue(this._value),e=this._getPositionForValue(t);t!==this._value?(this._triggerMouseEvent("updating"),this._position(t),this._triggerMouseEvent("update")):e!==this.cache.offset.left&&(this._triggerMouseEvent("updating"),this._position(t),this._triggerMouseEvent("update"))},position:function(t){return void 0!==t&&(this._cache(),t=this._constraintPosition(t),this._applyPosition(t)),this._left},add:function(t,e){return t+e},substract:function(t,e){return t-e},stepsBetween:function(t,e){return!1===this.options.step?e-t:(e-t)/this.options.step},multiplyStep:function(t,e){return t*e},moveRight:function(t){var e;return!1===this.options.step?(e=this._left,this.position(this._left+t),this._left-e):(e=this._value,this.value(this.add(e,this.multiplyStep(this.options.step,t))),this.stepsBetween(e,this._value))},moveLeft:function(t){return-this.moveRight(-t)},stepRatio:function(){if(!1===this.options.step)return 1;var t=(this.options.bounds.max-this.options.bounds.min)/this.options.step;return this.cache.parent.width/t}})}(jQuery),function(t){"use strict";function e(t,e){return void 0===t?e||!1:t}t.widget("ui.rangeSliderBar",t.ui.rangeSliderDraggable,{options:{leftHandle:null,rightHandle:null,bounds:{min:0,max:100},type:"rangeSliderHandle",range:!1,drag:function(){},stop:function(){},values:{min:0,max:20},wheelSpeed:4,wheelMode:null},_values:{min:0,max:20},_waitingToInit:2,_wheelTimeout:!1,_create:function(){t.ui.rangeSliderDraggable.prototype._create.apply(this),this.element.css("position","absolute").css("top",0).addClass("ui-rangeSlider-bar"),this.options.leftHandle.bind("initialize",t.proxy(this._onInitialized,this)).bind("mousestart",t.proxy(this._cache,this)).bind("stop",t.proxy(this._onHandleStop,this)),this.options.rightHandle.bind("initialize",t.proxy(this._onInitialized,this)).bind("mousestart",t.proxy(this._cache,this)).bind("stop",t.proxy(this._onHandleStop,this)),this._bindHandles(),this._values=this.options.values,this._setWheelModeOption(this.options.wheelMode)},destroy:function(){this.options.leftHandle.unbind(".bar"),this.options.rightHandle.unbind(".bar"),this.options=null,t.ui.rangeSliderDraggable.prototype.destroy.apply(this)},_setOption:function(t,e){"range"===t?this._setRangeOption(e):"wheelSpeed"===t?this._setWheelSpeedOption(e):"wheelMode"===t&&this._setWheelModeOption(e)},_setRangeOption:function(t){if(("object"!=typeof t||null===t)&&(t=!1),!1!==t||!1!==this.options.range){if(!1!==t){var i=e(t.min,this.options.range.min),n=e(t.max,this.options.range.max);this.options.range={min:i,max:n}}else this.options.range=!1;this._setLeftRange(),this._setRightRange()}},_setWheelSpeedOption:function(t){"number"==typeof t&&t>0&&(this.options.wheelSpeed=t)},_setWheelModeOption:function(t){(null===t||!1===t||"zoom"===t||"scroll"===t)&&(this.options.wheelMode!==t&&this.element.parent().unbind("mousewheel.bar"),this._bindMouseWheel(t),this.options.wheelMode=t)},_bindMouseWheel:function(e){"zoom"===e?this.element.parent().bind("mousewheel.bar",t.proxy(this._mouseWheelZoom,this)):"scroll"===e&&this.element.parent().bind("mousewheel.bar",t.proxy(this._mouseWheelScroll,this))},_setLeftRange:function(){if(!1===this.options.range)return!1;var t=this._values.max,e={min:!1,max:!1};e.max=!1!==(this.options.range.min||!1)&&this._leftHandle("substract",t,this.options.range.min),e.min=!1!==(this.options.range.max||!1)&&this._leftHandle("substract",t,this.options.range.max),this._leftHandle("option","range",e)},_setRightRange:function(){var t=this._values.min,e={min:!1,max:!1};e.min=!1!==(this.options.range.min||!1)&&this._rightHandle("add",t,this.options.range.min),e.max=!1!==(this.options.range.max||!1)&&this._rightHandle("add",t,this.options.range.max),this._rightHandle("option","range",e)},_deactivateRange:function(){this._leftHandle("option","range",!1),this._rightHandle("option","range",!1)},_reactivateRange:function(){this._setRangeOption(this.options.range)},_onInitialized:function(){this._waitingToInit--,0===this._waitingToInit&&this._initMe()},_initMe:function(){this._cache(),this.min(this._values.min),this.max(this._values.max);var t=this._leftHandle("position"),e=this._rightHandle("position")+this.options.rightHandle.width();this.element.offset({left:t}),this.element.css("width",e-t)},_leftHandle:function(){return this._handleProxy(this.options.leftHandle,arguments)},_rightHandle:function(){return this._handleProxy(this.options.rightHandle,arguments)},_handleProxy:function(t,e){var i=Array.prototype.slice.call(e);return t[this.options.type].apply(t,i)},_cache:function(){t.ui.rangeSliderDraggable.prototype._cache.apply(this),this._cacheHandles()},_cacheHandles:function(){this.cache.rightHandle={},this.cache.rightHandle.width=this.options.rightHandle.width(),this.cache.rightHandle.offset=this.options.rightHandle.offset(),this.cache.leftHandle={},this.cache.leftHandle.offset=this.options.leftHandle.offset()},_mouseStart:function(e){t.ui.rangeSliderDraggable.prototype._mouseStart.apply(this,[e]),this._deactivateRange()},_mouseStop:function(e){t.ui.rangeSliderDraggable.prototype._mouseStop.apply(this,[e]),this._cacheHandles(),this._values.min=this._leftHandle("value"),this._values.max=this._rightHandle("value"),this._reactivateRange(),this._leftHandle().trigger("stop"),this._rightHandle().trigger("stop")},_onDragLeftHandle:function(t,e){if(this._cacheIfNecessary(),e.element[0]===this.options.leftHandle[0]){if(this._switchedValues())return this._switchHandles(),void this._onDragRightHandle(t,e);this._values.min=e.value,this.cache.offset.left=e.offset.left,this.cache.leftHandle.offset=e.offset,this._positionBar()}},_onDragRightHandle:function(t,e){if(this._cacheIfNecessary(),e.element[0]===this.options.rightHandle[0]){if(this._switchedValues())return this._switchHandles(),void this._onDragLeftHandle(t,e);this._values.max=e.value,this.cache.rightHandle.offset=e.offset,this._positionBar()}},_positionBar:function(){var t=this.cache.rightHandle.offset.left+this.cache.rightHandle.width-this.cache.leftHandle.offset.left;this.cache.width.inner=t,this.element.css("width",t).offset({left:this.cache.leftHandle.offset.left})},_onHandleStop:function(){this._setLeftRange(),this._setRightRange()},_switchedValues:function(){if(this.min()>this.max()){var t=this._values.min;return this._values.min=this._values.max,this._values.max=t,!0}return!1},_switchHandles:function(){var t=this.options.leftHandle;this.options.leftHandle=this.options.rightHandle,this.options.rightHandle=t,this._leftHandle("option","isLeft",!0),this._rightHandle("option","isLeft",!1),this._bindHandles(),this._cacheHandles()},_bindHandles:function(){this.options.leftHandle.unbind(".bar").bind("sliderDrag.bar update.bar moving.bar",t.proxy(this._onDragLeftHandle,this)),this.options.rightHandle.unbind(".bar").bind("sliderDrag.bar update.bar moving.bar",t.proxy(this._onDragRightHandle,this))},_constraintPosition:function(e){var i,n={};return n.left=t.ui.rangeSliderDraggable.prototype._constraintPosition.apply(this,[e]),n.left=this._leftHandle("position",n.left),i=this._rightHandle("position",n.left+this.cache.width.outer-this.cache.rightHandle.width),n.width=i-n.left+this.cache.rightHandle.width,n},_applyPosition:function(e){t.ui.rangeSliderDraggable.prototype._applyPosition.apply(this,[e.left]),this.element.width(e.width)},_mouseWheelZoom:function(e,i,n,r){if(!this.enabled)return!1;var o=this._values.min+(this._values.max-this._values.min)/2,s={},a={};return!1===this.options.range||!1===this.options.range.min?(s.max=o,a.min=o):(s.max=o-this.options.range.min/2,a.min=o+this.options.range.min/2),!1!==this.options.range&&!1!==this.options.range.max&&(s.min=o-this.options.range.max/2,a.max=o+this.options.range.max/2),this._leftHandle("option","range",s),this._rightHandle("option","range",a),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(t.proxy(this._wheelStop,this),200),this.zoomOut(r*this.options.wheelSpeed),!1},_mouseWheelScroll:function(e,i,n,r){return!!this.enabled&&(!1===this._wheelTimeout?this.startScroll():clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(t.proxy(this._wheelStop,this),200),this.scrollLeft(r*this.options.wheelSpeed),!1)},_wheelStop:function(){this.stopScroll(),this._wheelTimeout=!1},min:function(t){return this._leftHandle("value",t)},max:function(t){return this._rightHandle("value",t)},startScroll:function(){this._deactivateRange()},stopScroll:function(){this._reactivateRange(),this._triggerMouseEvent("stop"),this._leftHandle().trigger("stop"),this._rightHandle().trigger("stop")},scrollLeft:function(t){return 0>(t=t||1)?this.scrollRight(-t):(t=this._leftHandle("moveLeft",t),this._rightHandle("moveLeft",t),this.update(),void this._triggerMouseEvent("scroll"))},scrollRight:function(t){return 0>(t=t||1)?this.scrollLeft(-t):(t=this._rightHandle("moveRight",t),this._leftHandle("moveRight",t),this.update(),void this._triggerMouseEvent("scroll"))},zoomIn:function(t){if(0>(t=t||1))return this.zoomOut(-t);var e=this._rightHandle("moveLeft",t);t>e&&(e/=2,this._rightHandle("moveRight",e)),this._leftHandle("moveRight",e),this.update(),this._triggerMouseEvent("zoom")},zoomOut:function(t){if(0>(t=t||1))return this.zoomIn(-t);var e=this._rightHandle("moveRight",t);t>e&&(e/=2,this._rightHandle("moveLeft",e)),this._leftHandle("moveLeft",e),this.update(),this._triggerMouseEvent("zoom")},values:function(t,e){if(void 0!==t&&void 0!==e){var i=Math.min(t,e),n=Math.max(t,e);this._deactivateRange(),this.options.leftHandle.unbind(".bar"),this.options.rightHandle.unbind(".bar"),this._values.min=this._leftHandle("value",i),this._values.max=this._rightHandle("value",n),this._bindHandles(),this._reactivateRange(),this.update()}return{min:this._values.min,max:this._values.max}},update:function(){this._values.min=this.min(),this._values.max=this.max(),this._cache(),this._positionBar()}})}(jQuery),function(t){"use strict";t.widget("ui.rangeSliderLabel",t.ui.rangeSliderMouseTouch,{options:{handle:null,formatter:!1,handleType:"rangeSliderHandle",show:"show",durationIn:0,durationOut:500,delayOut:500,isLeft:!1},cache:null,_positionner:null,_valueContainer:null,_innerElement:null,_create:function(){this.options.isLeft=this._handle("option","isLeft"),this.element.addClass("ui-rangeSlider-label").css("position","absolute").css("display","block"),this._createElements(),this._toggleClass(),this.options.handle.bind("moving.label",t.proxy(this._onMoving,this)).bind("update.label",t.proxy(this._onUpdate,this)).bind("switch.label",t.proxy(this._onSwitch,this)),"show"!==this.options.show&&this.element.hide(),this._mouseInit()},destroy:function(){this.options.handle.unbind(".label"),this.options.handle=null,this._valueContainer=null,this._innerElement=null,this.element.empty(),this._positionner&&(this._positionner.Destroy(),this._positionner=null),t.ui.rangeSliderMouseTouch.prototype.destroy.apply(this)},_createElements:function(){this._valueContainer=t("<div class='ui-rangeSlider-label-value' />").appendTo(this.element),this._innerElement=t("<div class='ui-rangeSlider-label-inner' />").appendTo(this.element)},_handle:function(){var t=Array.prototype.slice.apply(arguments);return this.options.handle[this.options.handleType].apply(this.options.handle,t)},_setOption:function(t,e){"show"===t?this._updateShowOption(e):("durationIn"===t||"durationOut"===t||"delayOut"===t)&&this._updateDurations(t,e)},_updateShowOption:function(t){this.options.show=t,"show"!==this.options.show?this.element.hide():(this.element.show(),this._display(this.options.handle[this.options.handleType]("value")),this._positionner.PositionLabels()),this._positionner.options.show=this.options.show},_updateDurations:function(t,e){parseInt(e,10)===e&&(this._positionner.options[t]=e,this.options[t]=e)},_display:function(t){!1===this.options.formatter?this._displayText(Math.round(t)):this._displayText(this.options.formatter(t))},_displayText:function(t){this._valueContainer.text(t)},_toggleClass:function(){this.element.toggleClass("ui-rangeSlider-leftLabel",this.options.isLeft).toggleClass("ui-rangeSlider-rightLabel",!this.options.isLeft)},_mouseDown:function(t){this.options.handle.trigger(t)},_mouseUp:function(t){this.options.handle.trigger(t)},_mouseMove:function(t){this.options.handle.trigger(t)},_onMoving:function(t,e){this._display(e.value)},_onUpdate:function(){"show"===this.options.show&&this.update()},_onSwitch:function(t,e){this.options.isLeft=e,this._toggleClass(),this._positionner.PositionLabels()},pair:function(e){null===this._positionner&&(this._positionner=new function(e,i,n,r){this.label1=e,this.label2=i,this.type=n,this.options=r,this.handle1=this.label1[this.type]("option","handle"),this.handle2=this.label2[this.type]("option","handle"),this.cache=null,this.left=e,this.right=i,this.moving=!1,this.initialized=!1,this.updating=!1,this.Init=function(){this.BindHandle(this.handle1),this.BindHandle(this.handle2),"show"===this.options.show?(setTimeout(t.proxy(this.PositionLabels,this),1),this.initialized=!0):setTimeout(t.proxy(this.AfterInit,this),1e3),this._resizeProxy=t.proxy(this.onWindowResize,this),t(window).resize(this._resizeProxy)},this.Destroy=function(){this._resizeProxy&&(t(window).unbind("resize",this._resizeProxy),this._resizeProxy=null,this.handle1.unbind(".positionner"),this.handle1=null,this.handle2.unbind(".positionner"),this.handle2=null,this.label1=null,this.label2=null,this.left=null,this.right=null),this.cache=null},this.AfterInit=function(){this.initialized=!0},this.Cache=function(){"none"!==this.label1.css("display")&&(this.cache={},this.cache.label1={},this.cache.label2={},this.cache.handle1={},this.cache.handle2={},this.cache.offsetParent={},this.CacheElement(this.label1,this.cache.label1),this.CacheElement(this.label2,this.cache.label2),this.CacheElement(this.handle1,this.cache.handle1),this.CacheElement(this.handle2,this.cache.handle2),this.CacheElement(this.label1.offsetParent(),this.cache.offsetParent))},this.CacheIfNecessary=function(){null===this.cache?this.Cache():(this.CacheWidth(this.label1,this.cache.label1),this.CacheWidth(this.label2,this.cache.label2),this.CacheHeight(this.label1,this.cache.label1),this.CacheHeight(this.label2,this.cache.label2),this.CacheWidth(this.label1.offsetParent(),this.cache.offsetParent))},this.CacheElement=function(t,e){this.CacheWidth(t,e),this.CacheHeight(t,e),e.offset=t.offset(),e.margin={left:this.ParsePixels("marginLeft",t),right:this.ParsePixels("marginRight",t)},e.border={left:this.ParsePixels("borderLeftWidth",t),right:this.ParsePixels("borderRightWidth",t)}},this.CacheWidth=function(t,e){e.width=t.width(),e.outerWidth=t.outerWidth()},this.CacheHeight=function(t,e){e.outerHeightMargin=t.outerHeight(!0)},this.ParsePixels=function(t,e){return parseInt(e.css(t),10)||0},this.BindHandle=function(e){e.bind("updating.positionner",t.proxy(this.onHandleUpdating,this)),e.bind("update.positionner",t.proxy(this.onHandleUpdated,this)),e.bind("moving.positionner",t.proxy(this.onHandleMoving,this)),e.bind("stop.positionner",t.proxy(this.onHandleStop,this))},this.PositionLabels=function(){if(this.CacheIfNecessary(),null!==this.cache){var t=this.GetRawPosition(this.cache.label1,this.cache.handle1),e=this.GetRawPosition(this.cache.label2,this.cache.handle2);this.ConstraintPositions(t,e),this.PositionLabel(this.label1,t.left,this.cache.label1),this.PositionLabel(this.label2,e.left,this.cache.label2)}},this.PositionLabel=function(t,e,i){var n,r=this.cache.offsetParent.offset.left+this.cache.offsetParent.border.left;r-e>=0?(t.css("right",""),t.offset({left:e})):(n=r+this.cache.offsetParent.width-(e+i.margin.left+i.outerWidth+i.margin.right),t.css("left",""),t.css("right",n))},this.ConstraintPositions=function(t,e){t.center<e.center&&t.outerRight>e.outerLeft?(t=this.getLeftPosition(t,e),e=this.getRightPosition(t,e)):t.center>e.center&&e.outerRight>t.outerLeft&&(e=this.getLeftPosition(e,t),t=this.getRightPosition(e,t))},this.getLeftPosition=function(t,e){var i=(e.center+t.center)/2-t.cache.outerWidth-t.cache.margin.right+t.cache.border.left;return t.left=i,t},this.getRightPosition=function(t,e){var i=(e.center+t.center)/2;return e.left=i+e.cache.margin.left+e.cache.border.left,e},this.ShowIfNecessary=function(){"show"===this.options.show||this.moving||!this.initialized||this.updating||(this.label1.stop(!0,!0).fadeIn(this.options.durationIn||0),this.label2.stop(!0,!0).fadeIn(this.options.durationIn||0),this.moving=!0)},this.HideIfNeeded=function(){!0===this.moving&&(this.label1.stop(!0,!0).delay(this.options.delayOut||0).fadeOut(this.options.durationOut||0),this.label2.stop(!0,!0).delay(this.options.delayOut||0).fadeOut(this.options.durationOut||0),this.moving=!1)},this.onHandleMoving=function(t,e){this.ShowIfNecessary(),this.CacheIfNecessary(),this.UpdateHandlePosition(e),this.PositionLabels()},this.onHandleUpdating=function(){this.updating=!0},this.onHandleUpdated=function(){this.updating=!1,this.cache=null},this.onHandleStop=function(){this.HideIfNeeded()},this.onWindowResize=function(){this.cache=null},this.UpdateHandlePosition=function(t){null!==this.cache&&(t.element[0]===this.handle1[0]?this.UpdatePosition(t,this.cache.handle1):this.UpdatePosition(t,this.cache.handle2))},this.UpdatePosition=function(t,e){e.offset=t.offset},this.GetRawPosition=function(t,e){var i=e.offset.left+e.outerWidth/2,n=i-t.outerWidth/2,r=n+t.outerWidth-t.border.left-t.border.right,o=n-t.margin.left-t.border.left;return{left:n,outerLeft:o,top:e.offset.top-t.outerHeightMargin,right:r,outerRight:o+t.outerWidth+t.margin.left+t.margin.right,cache:t,center:i}},this.Init()}(this.element,e,this.widgetName,{show:this.options.show,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}),e[this.widgetName]("positionner",this._positionner))},positionner:function(t){return void 0!==t&&(this._positionner=t),this._positionner},update:function(){this._positionner.cache=null,this._display(this._handle("value")),"show"===this.options.show&&this._positionner.PositionLabels()}})}(jQuery),function(t){"use strict";t.widget("ui.dateRangeSlider",t.ui.rangeSlider,{options:{bounds:{min:new Date(2010,0,1).valueOf(),max:new Date(2012,0,1).valueOf()},defaultValues:{min:new Date(2010,1,11).valueOf(),max:new Date(2011,1,11).valueOf()}},_create:function(){t.ui.rangeSlider.prototype._create.apply(this),this.element.addClass("ui-dateRangeSlider")},destroy:function(){this.element.removeClass("ui-dateRangeSlider"),t.ui.rangeSlider.prototype.destroy.apply(this)},_setDefaultValues:function(){this._values={min:this.options.defaultValues.min.valueOf(),max:this.options.defaultValues.max.valueOf()}},_setRulerParameters:function(){this.ruler.ruler({min:new Date(this.options.bounds.min),max:new Date(this.options.bounds.max),scales:this.options.scales})},_setOption:function(e,i){("defaultValues"===e||"bounds"===e)&&null!=i&&this._isValidDate(i.min)&&this._isValidDate(i.max)?t.ui.rangeSlider.prototype._setOption.apply(this,[e,{min:i.min.valueOf(),max:i.max.valueOf()}]):t.ui.rangeSlider.prototype._setOption.apply(this,this._toArray(arguments))},_handleType:function(){return"dateRangeSliderHandle"},option:function(e){if("bounds"===e||"defaultValues"===e){var i=t.ui.rangeSlider.prototype.option.apply(this,arguments);return{min:new Date(i.min),max:new Date(i.max)}}return t.ui.rangeSlider.prototype.option.apply(this,this._toArray(arguments))},_defaultFormatter:function(t){var e=t.getMonth()+1,i=t.getDate();return t.getFullYear()+"-"+(10>e?"0"+e:e)+"-"+(10>i?"0"+i:i)},_getFormatter:function(){var t,e=this.options.formatter;return(!1===this.options.formatter||null===this.options.formatter)&&(e=this._defaultFormatter),t=e,function(e){return t(new Date(e))}},values:function(e,i){var n;return n=this._isValidDate(e)&&this._isValidDate(i)?t.ui.rangeSlider.prototype.values.apply(this,[e.valueOf(),i.valueOf()]):t.ui.rangeSlider.prototype.values.apply(this,this._toArray(arguments)),{min:new Date(n.min),max:new Date(n.max)}},min:function(e){return this._isValidDate(e)?new Date(t.ui.rangeSlider.prototype.min.apply(this,[e.valueOf()])):new Date(t.ui.rangeSlider.prototype.min.apply(this))},max:function(e){return this._isValidDate(e)?new Date(t.ui.rangeSlider.prototype.max.apply(this,[e.valueOf()])):new Date(t.ui.rangeSlider.prototype.max.apply(this))},bounds:function(e,i){var n;return n=this._isValidDate(e)&&this._isValidDate(i)?t.ui.rangeSlider.prototype.bounds.apply(this,[e.valueOf(),i.valueOf()]):t.ui.rangeSlider.prototype.bounds.apply(this,this._toArray(arguments)),{min:new Date(n.min),max:new Date(n.max)}},_isValidDate:function(t){return void 0!==t&&t instanceof Date},_toArray:function(t){return Array.prototype.slice.call(t)}})}(jQuery),function(t){"use strict";t.widget("ui.dateRangeSliderHandle",t.ui.rangeSliderHandle,{_steps:!1,_boundsValues:{},_create:function(){this._createBoundsValues(),t.ui.rangeSliderHandle.prototype._create.apply(this)},_getValueForPosition:function(t){var e=this._getRawValueForPositionAndBounds(t,this.options.bounds.min.valueOf(),this.options.bounds.max.valueOf());return this._constraintValue(new Date(e))},_setOption:function(e,i){return"step"===e?(this.options.step=i,this._createSteps(),void this.update()):(t.ui.rangeSliderHandle.prototype._setOption.apply(this,[e,i]),void("bounds"===e&&this._createBoundsValues()))},_createBoundsValues:function(){this._boundsValues={min:this.options.bounds.min.valueOf(),max:this.options.bounds.max.valueOf()}},_bounds:function(){return this._boundsValues},_createSteps:function(){if(!1!==this.options.step&&this._isValidStep()){var t=new Date(this.options.bounds.min),e=new Date(this.options.bounds.max),i=t,n=0,r=new Date;for(this._steps=[];e>=i&&(1===n||r.valueOf()!==i.valueOf());)r=i,this._steps.push(i.valueOf()),i=this._addStep(t,n,this.options.step),n++;r.valueOf()===i.valueOf()&&(this._steps=!1)}else this._steps=!1},_isValidStep:function(){return"object"==typeof this.options.step},_addStep:function(t,e,i){var n=new Date(t.valueOf());return n=this._addThing(n,"FullYear",e,i.years),n=this._addThing(n,"Month",e,i.months),n=this._addThing(n,"Date",e,7*i.weeks),n=this._addThing(n,"Date",e,i.days),n=this._addThing(n,"Hours",e,i.hours),n=this._addThing(n,"Minutes",e,i.minutes),this._addThing(n,"Seconds",e,i.seconds)},_addThing:function(t,e,i,n){return 0===i||0===(n||0)?t:(t["set"+e](t["get"+e]()+i*(n||0)),t)},_round:function(t){if(!1===this._steps)return t;for(var e,i,n=this.options.bounds.max.valueOf(),r=this.options.bounds.min.valueOf(),o=Math.max(0,(t-r)/(n-r)),s=Math.floor(this._steps.length*o);this._steps[s]>t;)s--;for(;s+1<this._steps.length&&this._steps[s+1]<=t;)s++;return s>=this._steps.length-1?this._steps[this._steps.length-1]:0===s?this._steps[0]:(e=this._steps[s],(i=this._steps[s+1])-t>t-e?e:i)},update:function(){this._createBoundsValues(),this._createSteps(),t.ui.rangeSliderHandle.prototype.update.apply(this)},add:function(t,e){return this._addStep(new Date(t),1,e).valueOf()},substract:function(t,e){return this._addStep(new Date(t),-1,e).valueOf()},stepsBetween:function(t,e){if(!1===this.options.step)return e-t;var i=Math.min(t,e),n=Math.max(t,e),r=0,o=!1,s=t>e;for(this.add(i,this.options.step)-i<0&&(o=!0);n>i;)o?n=this.add(n,this.options.step):i=this.add(i,this.options.step),r++;return s?-r:r},multiplyStep:function(t,e){var i={};for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]*e);return i},stepRatio:function(){if(!1===this.options.step)return 1;var t=this._steps.length;return this.cache.parent.width/t}})}(jQuery),function(t){"use strict";t.widget("ui.editRangeSlider",t.ui.rangeSlider,{options:{type:"text",round:1},_create:function(){t.ui.rangeSlider.prototype._create.apply(this),this.element.addClass("ui-editRangeSlider")},destroy:function(){this.element.removeClass("ui-editRangeSlider"),t.ui.rangeSlider.prototype.destroy.apply(this)},_setOption:function(e,i){("type"===e||"step"===e)&&this._setLabelOption(e,i),"type"===e&&(this.options[e]=null===this.labels.left?i:this._leftLabel("option",e)),t.ui.rangeSlider.prototype._setOption.apply(this,[e,i])},_setLabelOption:function(t,e){null!==this.labels.left&&(this._leftLabel("option",t,e),this._rightLabel("option",t,e))},_labelType:function(){return"editRangeSliderLabel"},_createLabel:function(e,i){var n=t.ui.rangeSlider.prototype._createLabel.apply(this,[e,i]);return null===e&&n.bind("valueChange",t.proxy(this._onValueChange,this)),n},_addPropertiesToParameter:function(t){return t.type=this.options.type,t.step=this.options.step,t.id=this.element.attr("id"),t},_getLabelConstructorParameters:function(e,i){var n=t.ui.rangeSlider.prototype._getLabelConstructorParameters.apply(this,[e,i]);return this._addPropertiesToParameter(n)},_getLabelRefreshParameters:function(e,i){var n=t.ui.rangeSlider.prototype._getLabelRefreshParameters.apply(this,[e,i]);return this._addPropertiesToParameter(n)},_onValueChange:function(t,e){e.isLeft?this.min(e.value):this.max(e.value)}})}(jQuery),function(t){"use strict";t.widget("ui.editRangeSliderLabel",t.ui.rangeSliderLabel,{options:{type:"text",step:!1,id:""},_input:null,_text:"",_create:function(){t.ui.rangeSliderLabel.prototype._create.apply(this),this._createInput()},_setOption:function(e,i){"type"===e?this._setTypeOption(i):"step"===e&&this._setStepOption(i),t.ui.rangeSliderLabel.prototype._setOption.apply(this,[e,i])},_createInput:function(){this._input=t("<input type='"+this.options.type+"' />").addClass("ui-editRangeSlider-inputValue").appendTo(this._valueContainer),this._setInputName(),this._input.bind("keyup",t.proxy(this._onKeyUp,this)),this._input.blur(t.proxy(this._onChange,this)),"number"===this.options.type&&(!1!==this.options.step&&this._input.attr("step",this.options.step),this._input.click(t.proxy(this._onChange,this))),this._input.val(this._text)},_setInputName:function(){var t=this.options.isLeft?"left":"right";this._input.attr("name",this.options.id+t)},_onSwitch:function(e,i){t.ui.rangeSliderLabel.prototype._onSwitch.apply(this,[e,i]),this._setInputName()},_destroyInput:function(){this._input.remove(),this._input=null},_onKeyUp:function(t){return 13===t.which?(this._onChange(t),!1):void 0},_onChange:function(){var t=this._returnCheckedValue(this._input.val());!1!==t&&this._triggerValue(t)},_triggerValue:function(t){var e=this.options.handle[this.options.handleType]("option","isLeft");this.element.trigger("valueChange",[{isLeft:e,value:t}])},_returnCheckedValue:function(t){var e=parseFloat(t);return!isNaN(e)&&e.toString()===t&&e},_setTypeOption:function(t){"text"!==t&&"number"!==t||this.options.type===t||(this._destroyInput(),this.options.type=t,this._createInput())},_setStepOption:function(t){this.options.step=t,"number"===this.options.type&&this._input.attr("step",!1!==t?t:"any")},_displayText:function(t){this._input.val(t),this._text=t},enable:function(){t.ui.rangeSliderLabel.prototype.enable.apply(this),this._input.attr("disabled",null)},disable:function(){t.ui.rangeSliderLabel.prototype.disable.apply(this),this._input.attr("disabled","disabled")}})}(jQuery),function(t){"use strict";var e={first:function(t){return t},next:function(t){return t+1},format:function(){},label:function(t){return Math.round(t)},stop:function(){return!1}};t.widget("ui.ruler",{options:{min:0,max:100,scales:[]},_create:function(){this.element.addClass("ui-ruler"),this._createScales()},destroy:function(){this.element.removeClass("ui-ruler"),this.element.empty()},_regenerate:function(){this.element.empty(),this._createScales()},_setOption:function(t,e){return"min"===t||"max"===t&&e!==this.options[t]?(this.options[t]=e,void this._regenerate()):"scales"===t&&e instanceof Array?(this.options.scales=e,void this._regenerate()):void 0},_createScales:function(){if(this.options.max!==this.options.min)for(var t=0;t<this.options.scales.length;t++)this._createScale(this.options.scales[t],t)},_createScale:function(i,n){var r=t.extend({},e,i),o=t("<div class='ui-ruler-scale' />").appendTo(this.element);o.addClass("ui-ruler-scale"+n),this._createTicks(o,r)},_createTicks:function(t,e){var i,n,r,o=e.first(this.options.min,this.options.max),s=this.options.max-this.options.min,a=!0;do{i=o,o=e.next(i),n=(Math.min(o,this.options.max)-Math.max(i,this.options.min))/s,r=this._createTick(i,o,e),t.append(r),r.css("width",100*n+"%"),a&&i>this.options.min&&r.css("margin-left",100*(i-this.options.min)/s+"%"),a=!1}while(!this._stop(e,o))},_stop:function(t,e){return t.stop(e)||e>=this.options.max},_createTick:function(e,i,n){var r=t("<div class='ui-ruler-tick' style='display:inline-block' />"),o=t("<div class='ui-ruler-tick-inner' />").appendTo(r);return t("<span class='ui-ruler-tick-label' />").appendTo(o).text(n.label(e,i)),n.format(r,e,i),r}})}(jQuery),bizagi.reporting.component.controller("bizagi.reporting.component.timefilter",{init:function(t,e){this._super(t),this.properties=e,this.date=this.getInitialDateRange(e.time),this.render()},getInitialDateRange:function(t){var e=new Date,i=e;return{range:{from:new Date(e.getFullYear()-3,0,1),to:i},values:{min:t.dateFrom?bizagi.util.dateFormatter.getDateFromInvariant(t.dateFrom,!1):new Date(e.getFullYear(),0,1),max:t.dateTo?bizagi.util.dateFormatter.getDateFromInvariant(t.dateTo,!1):i}}},loadTemplates:function(){var t={timefilter:bizagi.getTemplate("bizagi.reporting.component.timefilter")+"#bz-rp-filters-time",datebuttons:bizagi.getTemplate("bizagi.reporting.component.timefilter")+"#bz-rp-filters-time-buttons"};return this._super(t)},renderComponent:function(){var t=this.getTemplate("timefilter");return $.tmpl(t)},postRender:function(){var t=this;$.when(t.loadDatePickers(),t.loadDateButtons(),t.loadDateSlider()).done(function(){t.resolvePostRender()})},loadDatePickers:function(){var t=this,e=t.getDateFormat(t.properties.dateFormat);t.$elementStart=$("#bz-rp-filters-time-start",t.canvas),t.$elementEnd=$("#bz-rp-filters-time-end",t.canvas),t.$elementStart.datepicker({dateFormat:e,defaultDate:t.date.values.min,minDate:t.date.range.from,maxDate:t.date.range.to,shortYearCutoff:"undefined"!=typeof BIZAGI_DEFAULT_DATETIME_INFO?"+"+BIZAGI_DEFAULT_DATETIME_INFO.twoDigitYearMaxDelta:"+10",changeYear:!0,changeMonth:!0,onSelect:function(){t.selectPicker()}}),t.$elementEnd.datepicker({dateFormat:e,defaultDate:t.date.values.max,minDate:t.date.values.min,maxDate:t.date.range.to,shortYearCutoff:"undefined"!=typeof BIZAGI_DEFAULT_DATETIME_INFO?"+"+BIZAGI_DEFAULT_DATETIME_INFO.twoDigitYearMaxDelta:"+10",changeYear:!0,changeMonth:!0,onSelect:function(){t.selectPicker()}}),t.$elementStart.val(bizagi.util.dateFormatter.formatDate(t.date.values.min,t.properties.dateFormat)),t.$elementEnd.val(bizagi.util.dateFormatter.formatDate(t.date.values.max,t.properties.dateFormat))},loadDateButtons:function(){var t=this,e=t.getTemplate("datebuttons"),i=$(".bz-rp-filters-time-buttons-container",t.content),n={day:t.getResource("reports-general-day").slice(0,1),month:t.getResource("reports-general-month").slice(0,1),year:t.getResource("reports-general-year").slice(0,1)};i.append($.tmpl(e,n)),i.on("click",".bz-rp-filters-time-buttons-list li",function(){$.proxy(t.setDateRange($(this)),t)})},loadDateSlider:function(){var t=this;t.dateSlider=$("#bz-rp-filters-time-slider",t.canvas),t.dateSlider.dateRangeSlider({bounds:{min:t.date.range.from,max:t.date.range.to},defaultValues:{min:t.date.values.min,max:t.date.values.max},formatter:function(e){return bizagi.util.dateFormatter.formatDate(e,t.properties.dateFormat)}}),t.dateSlider.bind("userValuesChanged",function(e,i){t.changeSlider(e,i)})},getDateFormat:function(t){var e,i=t;return-1==t.search("h")&&-1==t.search("H")||(e=-1!=t.search("h")?t.search("h"):t.search("H"),i=t.substring(0,e-1)),i.indexOf("MMMM")>=0?i=i.replaceAll("MMMM","MM"):i.indexOf("MMM")>=0?i=i.replaceAll("MMM","M"):i.indexOf("MM")>=0?i=i.replaceAll("MM","m"):i.indexOf("M")>=0&&(i=i.replaceAll("M","m")),-1!=i.search("yyyy")?i=i.replaceAll("yyyy","yy"):-1!=i.search("yy")&&(i=i.replaceAll("yy","y")),i=i.replaceAll("dddd","DD")},getValue:function(){return{time:{dateFrom:bizagi.util.dateFormatter.formatInvariant(this.date.values.min,!1),dateTo:bizagi.util.dateFormatter.formatInvariant(this.date.values.max,!1)}}},setValue:function(t,e){var i=this;i.$elementEnd.datepicker("option","minDate",t),i.$elementStart.datepicker("option","maxDate",e),i.date.values.min=t,i.date.values.max=e,i.$elementStart.datepicker("option","defaultDate",t),i.$elementEnd.datepicker("option","defaultDate",e),i.$elementStart.val(bizagi.util.dateFormatter.formatDate(t,i.properties.dateFormat)),i.$elementEnd.val(bizagi.util.dateFormatter.formatDate(e,i.properties.dateFormat)),i.dateSlider.dateRangeSlider("values",t,e),i.publish("filterbytime",i.getValue())},selectPicker:function(){var t=this.$elementEnd.datepicker("getDate"),e=this.$elementStart.datepicker("getDate");this.setValue(e,t)},changeSlider:function(t,e){var i=e.values.min,n=e.values.max;this.setValue(i,n)},setDateRange:function(t){var e=t.data("value").split("-"),i=new Date,n=new Date;switch(e[1]){case"day":n.setDate(i.getDate()-parseInt(e[0]));break;case"month":n.setMonth(i.getMonth()-parseInt(e[0]));break;case"year":n.setFullYear(i.getFullYear()-parseInt(e[0]))}this.setValue(n,i)}}),bizagi.reporting.report.extend("bizagi.reporting.report.analyticsprocessactivity",{},{init:function(t){this._super(t),this.cleanReferrerParams()},initializeTemplates:function(){return{main:bizagi.getTemplate("bizagi.reporting.report.analyticsprocessactivity")+"#bz-rp-analytics-process-processactivity-main",activitysummary:bizagi.getTemplate("bizagi.reporting.report.analyticsprocessactivity")+"#bz-rp-analytics-process-processactivity-activitysummary",processactivity:bizagi.getTemplate("bizagi.reporting.report.analyticsprocessactivity")+"#bz-rp-analytics-process-processactivity-processactivity",activitytrend:bizagi.getTemplate("bizagi.reporting.report.analyticsprocessactivity")+"#bz-rp-analytics-process-processactivity-trend"}},getFiltersObject:function(){return{process:{},dimension:[],time:{}}},loadComponents:function(){var t=this;return t._super(),$.when(t.loadProcessesVersionComponent()).pipe(function(){return t.loadDimensionsComponent({process:t.model.process})}).pipe(function(){return t.loadTimeComponent()})},getDetailListObject:function(t){var e=t.sender.options.chartName,i=t.dataItem.name,n={};return t.dataItem.embedded&&(n={task:{id:t.dataItem.embedded.taskId,guid:t.dataItem.embedded.taskGuid},parentProcess:{id:t.dataItem.embedded.parentProcessId}}),"Analytics.Process.ActivitySummary"===e&&{detailList:{reportName:e,columnName:i,embedded:n}}},postRender:function(){this.bindToggleSummary()},getReportExcelUrl:function(t){var e=$.extend({},this.taskGuid,this.model),i="reportName="+t+"&filters="+JSON.stringify(e)+"&user="+bizagi.currentUser.idUser;return this.services.getExportExcelUrl(i)},drawReport:function(t){var e=this;e.setFiltersForCustomRPComp(),e.drawActivityTrend(t),$.when(e.services.getProcessActivitySummary(t)).done(function(t){t.effectiveness=Math.round(t.effectiveness),e.drawActivitySummary(t),e.drawProcessActivity({newCases:t.newCases,closedCases:t.closedCases,abortedCases:t.abortedCases,embedded:t.embedded})})},drawActivitySummary:function(t){var e=this,i=e.getTemplate("activitysummary"),n=$.tmpl(i,t,{getReportExcelUrl:e.getReportExcelUrl("analytics.process.activity"),showExcelIcon:!e.device||"desktop"==e.device.toLowerCase()});e.getTemplateComponent(e.content,"analytics-process-processactivity-activitysummary").empty().append(n)},drawProcessActivity:function(t){var e=this,i=e.getTemplate("processactivity"),n=$.tmpl(i),r=e.getTemplateComponent(e.content,"analytics-process-processactivity-processactivity");if(r.empty().append(n),t.newCases>0||t.closedCases>0||t.abortedCases>0){var o=t.embedded?t.embedded:{},s={dataSource:{data:[{category:e.getResource("analytics-process-processactivity-newcases"),value:t.newCases,name:"open",embedded:o},{category:e.getResource("analytics-process-processactivity-closedcases"),value:t.closedCases,name:"closed",embedded:o},{category:e.getResource("analytics-process-processactivity-abortedcases"),value:t.abortedCases,name:"aborted",embedded:o}]},chartName:"Analytics.Process.ActivitySummary",series:[{color:"#B8c7E8",field:"value",name:e.getResource("analytics-process-processactivity-title")}],categoryAxis:{field:"category"}},a=e.graphics.getDataVizObject(s);r.find(".bz-rp-chart").empty().kendoChart(a)}else e.setNoDataAvailableLabel(r)},drawActivityTrend:function(t){var e=this,i=e.model.time.dateTo,n=e.model.time.dateFrom,r=e.getTemplate("activitytrend"),o=$.tmpl(r),s=e.getTemplateComponent(e.content,"analytics-process-processactivity-trend");s.empty().append(o),$.when(e.services.getProcessActivityTrend(t)).pipe(function(t){var r=new Date(n),o=new Date(i),s="",a=[];switch(t.scale){case"DAY":for(s="MM/dd";r<=o;r.setDate(r.getDate()+1))a.push(e.getDateRange(t.rows,r));break;case"MONTH":for(s="MM/yy";r<=o;r.setMonth(r.getMonth()+1))a.push(e.getDateRangeForMonthScale(t.rows,r));break;case"YEAR":for(s="yyyy";r<=o;r.setFullYear(r.getFullYear()+1))a.push(e.getDateRangeForYearScale(t.rows,r))}var l={dataSource:{data:a},seriesDefaults:{tooltip:{visible:!0,template:"#= kendo.format('{0:"+s+"}', category) #, #=value#"}},series:[{type:"line",field:"value",categoryField:"date",name:e.getResource("analytics-process-processactivity-trend-title")}],categoryAxis:{baseUnit:t.scale.toLowerCase()+"s",field:"date",labels:{format:s,padding:{left:-10}}}};return $.extend(!0,l,e.setLabelSteps(a.length)),e.graphics.getDataVizObject(l)}).done(function(t){s.find(".bz-rp-chart").kendoChart(t)}).fail(function(t){e.setNoDataAvailableLabel(s)})},getDateRange:function(t,e){for(var i,n={value:0,date:new Date(e)},r=0,o=t.length;r<o;r++)i=new Date(t[r].date.month+"/"+t[r].date.day+"/"+t[r].date.year),e.getTime()===i.getTime()&&(n.value=t[r].activations);return n},getDateRangeForMonthScale:function(t,e){var i;e.setDate(1);for(var n={value:0,date:new Date(e)},r=0,o=t.length;r<o;r++)i=new Date(t[r].date.month+"/01/"+t[r].date.year),e.getTime()===i.getTime()&&(n.value=t[r].activations);return n},getDateRangeForYearScale:function(t,e){var i;e.setDate(1),e.setMonth(0);for(var n={value:0,date:new Date(e)},r=0,o=t.length;r<o;r++)i=new Date("01/01/"+t[r].date.year),e.getTime()===i.getTime()&&(n.value=t[r].activations);return n}}),bizagi.reporting.report.extend("bizagi.reporting.report.analyticsprocessdurationhistogram",{},{init:function(t){this._super(t),this.cleanReferrerParams()},getFiltersObject:function(){return{process:{},dimension:[],time:{}}},initializeTemplates:function(){return{main:bizagi.getTemplate("bizagi.reporting.report.analyticsprocessdurationhistogram")+"#bz-rp-analytics-process-durationhistogram-main",durationhistogram:bizagi.getTemplate("bizagi.reporting.report.analyticsprocessdurationhistogram")+"#bz-rp-analytics-process-durationhistogram-graph"}},loadComponents:function(){var t=this;return t._super(),$.when(t.loadProcessesVersionComponent()).pipe(function(){return t.loadDimensionsComponent({process:t.model.process})}).pipe(function(){return t.loadTimeComponent()})},getDetailListObject:function(){return!1},drawReport:function(t){this.setFiltersForCustomRPComp(),this.drawDurationHistogram(t)},drawDurationHistogram:function(t){var e=this,i=e.getTemplate("durationhistogram"),n=$.tmpl(i),r=e.getTemplateComponent(e.content,"analytics-process-durationhistogram");r.empty().append(n),$.when(e.services.getDurationHistogram(t)).done(function(t){if(t.rows.length){var i=e.getGraphData(t),n={dataSource:{data:i.rows,sort:{field:"days",dir:"asc"}},seriesDefaults:{type:"area"},series:[{field:"cases",name:e.getResource("analytics-process-durationhistogram-foot-report-xaxis")}],categoryAxis:{notes:{icon:{visible:!1},label:{visible:!1},line:{dashType:"dashDot",width:4,color:"red",length:400},data:[{value:i.linePosition}]},field:"days"}},o=e.graphics.getDataVizObject(n);r.find(".bz-rp-chart").kendoChart(o)}else e.setNoDataAvailableLabel(r)}).fail(function(t){e.setNoDataAvailableLabel(r)})},getGraphData:function(t){for(var e=t.durationExpected,i=t.rows,n=i.length,r=i.splice(15,n-15),o=0,s=0,a=r.length;s<a;s++)i[14].cases+=r[s].cases;for(s=0,a=i.length;s<a;s++){if(i[s].days==e){o=s;break}if(i[s].days>e){var l=(i[(o=s)-1].cases+i[o].cases)/2;i.splice(s,0,{cases:l,days:e});break}}return n>=15&&(i[14].days=this.getResource("reports-general-nextdays")),{linePosition:o,rows:i}}}),bizagi.reporting.report.extend("bizagi.reporting.report.analyticsprocessactivationranking",{},{init:function(t){this._super(t),this.process={process:{id:0}},this.cleanReferrerParams()},getFiltersObject:function(){return{process:{},dimension:[],time:{}}},initializeTemplates:function(){return{main:bizagi.getTemplate("bizagi.reporting.report.analyticsprocessactivationranking")+"#bz-rp-analytics-process-activationranking-main",activationranking:bizagi.getTemplate("bizagi.reporting.report.analyticsprocessactivationranking")+"#bz-rp-analytics-process-activationranking-graph"}},loadComponents:function(){var t=this;return t._super(),$.when(t.loadDimensionsComponent(t.process)).pipe(function(){return t.loadTimeComponent()})},getDetailListObject:function(t){var e=t.sender.options.chartName,i=t.dataItem.id,n=t.dataItem.guid,r={};return t.dataItem.embedded&&(r={task:{id:t.dataItem.embedded.taskId,guid:t.dataItem.embedded.taskGuid},parentProcess:{id:t.dataItem.embedded.parentProcessId}}),{process:{id:i,guid:n},detailList:{reportName:e,embedded:r}}},drawReport:function(t){this.setFiltersForCustomRPComp(),this.drawActivationRanking(t)},drawActivationRanking:function(t){var e=this,i=e.getTemplate("activationranking"),n=$.tmpl(i),r=e.getTemplateComponent(e.content,"analytics-process-activationranking");r.empty().append(n),$.when(e.services.getProcessVersionList()).pipe(function(i){0==i.processes.length?e.setNoDataAvailableLabel(r):$.when(e.services.getActivationRanking(t)).done(function(t){if(t.processes.length){var i={dataSource:{data:t.processes},seriesDefaults:{type:"bar",tooltip:{visible:!1}},chartName:"Analytics.Process.ActivationRanking",series:[{field:"cases",name:e.getResource("analytics-process-activationranking-foot-report-xaxis")}],categoryAxis:{field:"name"}};$.extend(i,e.calculateGraphHeight(t.processes.length));var n=e.graphics.getDataVizObject(i);r.find(".bz-rp-chart").kendoChart(n)}else e.setNoDataAvailableLabel(r)}).fail(function(t){e.setNoDataAvailableLabel(r)})})}}),bizagi.reporting.report.extend("bizagi.reporting.report.analyticsprocessfrequentspaths",{},{init:function(t){this._super(t),this.frequentsPaths=[],this.path=0,this.total=0,this.cleanReferrerParams()},getFiltersObject:function(){return{process:{},dimension:[],time:{}}},initializeTemplates:function(){return{main:bizagi.getTemplate("bizagi.reporting.report.analyticsprocessfrequentspaths")+"#bz-rp-analytics-process-frequentspaths-main",header:bizagi.getTemplate("bizagi.reporting.report.analyticsprocessfrequentspaths")+"#bz-rp-analytics-process-frequentspaths-cases"}},loadComponents:function(){var t=this;return t._super(),$.when(t.loadProcessesVersionComponent()).pipe(function(){return t.loadDimensionsComponent({process:t.model.process})}).pipe(function(){return t.loadTimeComponent()})},postRender:function(){this.eventsHandlers()},getDetailListObject:function(){return{detailList:{reportName:"Analytics.Process.FrequentPaths",columnIndex:this.frequentsPaths[this.path].pathIndex}}},drawReport:function(t){var e=this;e.setFiltersForCustomRPComp(),$.when(e.services.getFrecuentsPaths(t)).done(function(t){e.frequentsPaths=t.paths,e.drawProcessModel(),e.renderHeader()})},drawProcessModel:function(){this.$processViewer=$(".bz-rp-processviewer-canvas",this.content),this.renderProcessViewer(this.$processViewer)},drawFrequentsPaths:function(){var t=this;if(t.frequentsPaths.length>0){var e=t.frequentsPaths[t.path].path;t.$processViewer.processviewer("clearRoute"),t.$processViewer.processviewer("drawRoute",e)}},renderHeader:function(){$(".bz-rp-processviewer .bz-rp-frequentspaths-header",this.content).remove();var t=this.getTemplate("header");$(".bz-rp-processviewer",this.content).prepend($.tmpl(t)),this.frequentsPathsControl()},frequentsPathsControl:function(){var t=this;if(t.frequentsPaths&&t.frequentsPaths.length)t.path=0,t.total=t.getTotalCases(),t.renderPathsControl(),t.renderCasesData();else{var e=$(".bz-rp-processviewer .bz-rp-frequentspaths-header");0==e.has("input[type=checkbox]").length&&e.hide()}},getTotalCases:function(){for(var t=0,e=[].concat(this.frequentsPaths),i=0,n=e.length;i<n;i++)t+=e[i].cases;return t},renderPathsControl:function(){var t=this,e=t.frequentsPaths.length;$spinner=$(".bz-rp-frecuentspaths-control",t.content);var i=$spinner.spinner({min:1,max:e,spin:function(e,i){var n=parseInt(i.value);t.path=n-1,t.drawFrequentsPaths(),t.renderCasesData()}}).data("ui-spinner");i._parse=function(t){return"string"==typeof t?parseInt(t):t},i._format=function(t){return t+"/"+e},$spinner.spinner("value","1/"+e)},renderCasesData:function(){var t=this.frequentsPaths[this.path].cases,e=t+" ( "+(100*t/this.total).toFixed(1)+"% )";$(".bz-rp-frequentspaths-data",this.content).html(e)},eventsHandlers:function(){var t=this;$(".bz-rp-processviewer",t.content).on("click",".bz-rp-frequentspaths-detaillist",function(e){t.callDetailList({})}),$(".bz-rp-processviewer",t.content).on("pvComplete",function(e){t.frequentsPaths.length&&t.drawFrequentsPaths()})}}),bizagi.reporting.component.controller("bizagi.reporting.component.detaillist",{init:function(t,e){this._super(t),this.services=e,this.modal=[],this.render(),this.process=0,this.rowsPerPages=20},loadTemplates:function(){var t={main:bizagi.getTemplate("bizagi.reporting.component.detaillist")+"#bz-rp-component-detaillist-main",content:bizagi.getTemplate("bizagi.reporting.component.detaillist")+"#bz-rp-component-detaillist-content",summary:bizagi.getTemplate("bizagi.reporting.component.detaillist")+"#bz-rp-component-detaillist-summary",pager:bizagi.getTemplate("bizagi.reporting.component.detaillist")+"#bz-rp-component-detaillist-pager",container:bizagi.getTemplate("bizagi.reporting.component.detaillist")+"#bz-rp-components-detaillist-container"};return this._super(t)},renderComponent:function(){var t=this.getTemplate("container");return this.modal=$.tmpl(t).appendTo("body"),[]},postRender:function(){this.eventsHandler()},renderDetailList:function(t,e){var i=this;i.filter=t,i.process=e;var n=i.getTemplate("main");i.content=$.tmpl(n),$.when(i.showDialog()).done(function(){i.setDetailList()})},setDetailList:function(){var t=this;return $.when(t.services.getDetailList(t.filter)).pipe(function(e){t.detailsTable=e.detailsTable,t.pages=Math.ceil(t.detailsTable.rows.length/t.rowsPerPages),t.renderContent(),t.bindPagerEvents()})},renderContent:function(){var t=this,e=t.getTemplate("content"),i=$.extend({},t.getSummaryJSON(1),t.getPagerJSON(1,"next"));t.removeDuplicatesInData(i);var n=$.tmpl(e,i,{device:t.device,showExcelIcon:!t.device||"desktop"==t.device.toLowerCase(),formatValue:function(t,e){return bizagi.util.isIE()?t:bizagi.util.formatValueByDataType(t,e.dataType)}});$("#bz-rp-detaillist-container",t.modal).html(n),t.fixedHeadTable(),t.validateBackButtonFromActivity()},validateBackButtonFromActivity:function(){bizagi.referrerParams.reports.fromBackButton&&bizagi.referrerParams.page?(bizagi.referrerParams.reports.fromBackButton=!1,this.updatePager(bizagi.referrerParams.page),this.updateSummary(bizagi.referrerParams.page)):bizagi.referrerParams.page=1},fixedHeadTable:function(){var t=$(".ui-bizagi-wp-app-component-detaillist-content-parent-tableHeadFixed > .ui-bizagi-wp-app-component-detaillist-content-tableHeadFixed",this.modal);t.find("table:first").floatThead({position:"fixed",zIndex:1,scrollContainer:function(){return t}})},removeDuplicatesInData:function(t){var e=[];return $.each(t.summary.headers,function(t,i){"DateTime"===i.dataType&&e.push(t)}),$.each(t.summary.rows,function(i,n){$.each(n.cells,function(n,r){var o,s=[];$.each(r,function(t,e){-1===$.inArray(e,s)&&s.push(e)}),t.summary.rows[i].cells[n].isFormated&&(o=!0),t.summary.rows[i].cells[n]=s,-1!==e.indexOf(n)&&(o||(t.summary.rows[i].cells[n]=r),t.summary.rows[i].cells[n].isFormated=!0)})}),t},getSummaryJSON:function(t){var e=(t-1)*this.rowsPerPages,i=e+this.rowsPerPages;return{summary:{headers:this.detailsTable.headers,rows:this.detailsTable.rows.slice(e,i)}}},getPagerJSON:function(t,e){var i=this,n=[],r=0;if(i.pages>1){r="next"===e?t+10>i.pages&&i.pages>10?i.pages-9:t:t-10<1?1:t-9;for(var o=i.pages>10?r+9:i.pages,s=r;s<=o;s++)n.push(s)}return{pager:{pages:n,page:t,total:i.pages}}},showDialog:function(){var t=$.Deferred();return this.content.dialog({resizable:!1,modal:!0,dialogClass:"bz-rp-dialog",appendTo:this.modal,title:this.getResource("bz-rp-components-detaillist-title"),draggable:!1,maximized:!0,maximizeOnly:!0,close:function(){$(this).remove()},open:function(e){e.stopPropagation(),t.resolve()}}),t.promise()},bindPagerEvents:function(){var t=this;t.modal.find("#bz-rp-detaillist-pagercnt").on("click",".bz-rp-detaillist-pagintation-page, .bz-rp-detaillist-pagination-firstpage, .bz-rp-detaillist-pagination-lastpage, .bz-rp-detaillist-pagination-nextpage, .bz-rp-detaillist-pagination-prevpage",function(e){if(e.stopPropagation(),$(this).hasClass("bz-rp-detaillist-pagintation-page")){var i=parseInt($(this).data("page"));t.highlightPage($(this)),t.updateSummary(i)}else if($(this).hasClass("bz-rp-detaillist-pagination-firstpage"))t.updateContent(1,"prev");else if($(this).hasClass("bz-rp-detaillist-pagination-lastpage"))t.updateContent(t.pages,"next");else if($(this).hasClass("bz-rp-detaillist-pagination-nextpage")){i=$(this).prev(".bz-rp-detaillist-pagintation-page").data("page");i=parseInt(i)+1,t.updateContent(i,"next")}else if($(this).hasClass("bz-rp-detaillist-pagination-prevpage")){i=$(this).next(".bz-rp-detaillist-pagintation-page").data("page");i=parseInt(i)-1,t.updateContent(i,"prev")}})},updateContent:function(t,e){this.updatePager(t,e),this.updateSummary(t)},updateSummary:function(t){var e=this,i=e.getTemplate("summary");bizagi.referrerParams.page=t;var n=e.getSummaryJSON(t);e.removeDuplicatesInData(n);var r=$.tmpl(i,n.summary,{device:e.device,formatValue:function(t,e){return bizagi.util.formatValueByDataType(t,e.dataType)}});$("#bz-rp-detaillist-summarycnt",e.modal).html(r),e.fixedHeadTable()},updatePager:function(t,e){var i=this.getTemplate("pager"),n=this.getPagerJSON(t,e),r=$.tmpl(i,n.pager);$("#bz-rp-detaillist-pagercnt",this.modal).html(r)},highlightPage:function(t){$(".bz-rp-detaillist-pagintation-page",this.modal).removeClass("bz-rp-detaillist-pagination-active"),t.addClass("bz-rp-detaillist-pagination-active")},eventsHandler:function(){var t=this;t.modal.on("click",".bz-rp-exportdtl-excel, .bz-rp-detaillist-summary-admincell, .bz-rp-detaillist-summary-viewcell, .bz-rp-detaillist-return, .bz-rp-detaillist-summary-opencase, .caseClicked, .activityClicked",function(e){e.stopPropagation();var i=$(this).closest("tr").data("case");if($(this).hasClass("bz-rp-exportdtl-excel"))t.exportExcel();else if($(this).hasClass("bz-rp-detaillist-summary-admincell")){var n=$(this).closest("span").data("radnumber");t.excAdminAction(n,this),$(this).closest("tr").addClass("bz-wp-detaillist-selectedcase")}else $(this).hasClass("bz-rp-detaillist-summary-viewcell")?t.excViewAction(i):$(this).hasClass("bz-rp-detaillist-return")?t.returnToDetailList():$(this).hasClass("bz-rp-detaillist-summary-opencase")?t.OpenCaseWithSecurity(i):($(this).hasClass("caseClicked")||$(this).hasClass("activityClicked"))&&(i=$(this)[0].getAttribute("data-idCase"),t.OpenCaseWithSecurity(i),t.content.dialog("close"))})},OpenCaseWithSecurity:function(t){var e=this;$.when(e.haveCaseAccess(t)).done(function(i){i.hasAccess?(e.content.dialog("close"),e.openCase({idCase:t})):e.showErrorMessage()})},showErrorMessage:function(){var t=this.getResource("bz-rp-components-detaillist-access-error");bizagi.showMessageBox(t)},haveCaseAccess:function(t){var e="idCase="+t+"&user="+bizagi.currentUser.idUser;return this.services.checkCaseAccess(e)},openCase:function(t){this.publish("rp-opencase",{caseData:t})},exportExcel:function(){var t=this.filter+"&user="+bizagi.currentUser.idUser;this.services.exportDetailList(t)},excAdminAction:function(t){this.publish("rp-caseadministration",{canvas:$("#bz-rp-detaillist-casesearch",this.modal),radNumber:t}),$("#bz-rp-detaillist-mainframe",this.modal).hide(),$("#bz-rp-detaillist-auxframe",this.modal).show()},excViewAction:function(t){this.publish("rp-graphicquery",{idCase:t,idWorkflow:this.process})},returnToDetailList:function(){var t=$("#bz-rp-detaillist-mainframe",this.modal),e=$("#bz-rp-detaillist-auxframe",this.modal);$(".bz-wp-casesearch-invalidation",e).length>0?$.when(this.setDetailList()).done(function(){t.show().trigger("scroll"),e.hide()}):($("tr.bz-wp-detaillist-selectedcase",t).removeClass("bz-wp-detaillist-selectedcase"),t.show(),e.hide())}}),$.bizagi||($.bizagi={processviewer:{}}),$.bizagi.processviewer={configuration:{constants:{ELEMENT_TYPE:{PROCESS:"Process",LANE:"Lane",MILESTONES:"Milestone",TEXTANNOTATION:"TextAnnotation",ASSOCIATION:"Association",SEQUENCEFLOW:"SequenceFlow"},CONDITION_TYPE:{SUBPROCESSEXP:"SubprocessException",CANCELLATION:"Cancellation",NORMAL:"Normal",RELATION:"Relation",COMPENSATION:"Compensation"},PROPERTIES:{WAYPOINTS:"waypoints",BOUNDS:"bounds"},LANESETS:"laneSets",LANES:"lanes",BPMNLABELSTYLES:"bpmnLabelStyles"},validTypeDefinitions:["artifacts","flowElements","laneSets","milestones"]},design:{markers:{normal:{type:"path",properties:{d:"M0.616,9.401  l2.05-4.4l-2.05-4.399l8.8,4.433L0.616,9.401",class:"normal"}},highlighted:{type:"path",properties:{d:"M0.616,9.401  l2.05-4.4l-2.05-4.399l8.8,4.433L0.616,9.401",class:"highlighted"}},selected:{type:"path",properties:{d:"M0.616,9.401  l2.05-4.4l-2.05-4.399l8.8,4.433L0.616,9.401",class:"highlighted"}},association:{type:"path",properties:{d:"M0.595,0.598  l8.8,4.132l-8.8,4.667",class:"association"}}}}},function(t){t.widget("ui.processviewer",{constants:t.bizagi.processviewer.configuration.constants,options:{image:null,zoomRange:50,hotspots:[],dragMessage:"Drag Image (Image Pane)",processMessage:"Process Image....",previewWidth:120,previewHeight:120,hotspotsCSS:"",draggable:!0,controls:!0,zoomImageOptions:!1,moveIncrement:20,isIE8:!1,device:"desktop",minZoom:.5,minZoomIE8:.5,maxZoomIE8:1.5,maxZoom:1.5,template:!1,unavailableImage:"img/unavailable_image.png",tmpl:"bizagi.processviewer.template",hotSpotsSVG:!1,formatStyles:{},milestonesHeight:25,width:"100%",height:150,dimentions:{width:100,height:150},animation:{path:[],interval:0,instance:0,time:200,counter:0},configuration:{localTemplate:"",processviewerStageId:"",processviewerStage:"",$processviewerStage:"",processviewerStageSet:"",processviewerImageStage:"",processviewerHotSpotsContainer:"",processviewerStagePathsSet:"",errorImageCSS:"processviewer-error-image",sliderOptions:{}},getTemplate:function(t){return bizagi.getTemplate(t)}},_create:function(){var e=this;t.support.touch="ontouchend"in document,e._isInWorkportal()?"undefined"!=typeof bizagi&&void 0!==bizagi.util&&(e.options.isIE8=bizagi.util.isIE8(),e.options.device=bizagi.util.detectDevice()):bizagi={workportal:!1},e.$el=t('<div class="wdg-processviewer"></div>'),e.$el.attr("role","widget.bizagi.processviewer"),e.element.append(e.$el),e.options.jsonBizagi?"string"==typeof e.options.jsonBizagi.processDefinition&&"string"==typeof e.options.jsonBizagi.processDefinition?t.when(t.get(e.options.jsonBizagi.processDefinition),t.get(e.options.jsonBizagi.processGraphicsInfo)).done(function(t,i){e._processDataForPlugin({definition:t[0],graphics:i[0]})}).fail(function(t){e.$el.text(t.message)}):e._processDataForPlugin({definition:e.options.jsonBizagi.processDefinition,graphics:e.options.jsonBizagi.processGraphicsInfo}):e._loadTemplate()},_processDataForPlugin:function(e){var i=this;e.definition.status||e.graphics.status?i._triggers.error({message:e.definition.message,json:e}):t.when(t(e).processviewerQueries()).done(function(e){t.extend(i.options,e),i._loadTemplate()})},_triggerError:function(t){},_loadTemplate:function(){var e=this,i=e.options.template;bizagi.workportal?(e.loader=new bizagi.ui.controls.tmplloader,i?i.indexOf(".html")&&t.when(e.loader.loadTemplates({processviewer:i})).done(function(){e.options.configuration.localTemplate=e.loader.getTemplate("processviewer"),e._buildprocessviewer()}):(i=e.options.getTemplate(e.options.tmpl),t.when(e.loader.loadTemplates({processviewer:i})).done(function(){e.options.configuration.localTemplate=e.loader.getTemplate("processviewer"),e._buildprocessviewer()}))):i?i.indexOf(".html")&&t.when(t.get(e.options.template)).done(function(t){e.options.configuration.localTemplate=t,e._buildprocessviewer()}):(i=e.options.getTemplate(e.options.tmpl),t.when(t.get(i)).done(function(t){e.options.configuration.localTemplate=t,e._buildprocessviewer()}))},_buildprocessviewer:function(){var e,i,n=this;n.$el.empty(),e=n.options.configuration.processviewerStageId=n._generateID(),i=t.tmpl(n.options.configuration.localTemplate,{id:e,isIE8:n.options.isIE8}),n.$el.append(i),n._createStage()},resize:function(t,e){e=e||this.options.width,h=t||this.options.height,this.$el.outerWidth(e),this.$el.outerHeight(t)},calculatePosition:function(t,e,i,n){return{top:n/2-(e+45)+"px",left:i/2-(t+67.5)+"px"}},setPosition:function(e,i){var n=document.getElementById(i),r=this._getStageContainer(),o=t("#bz-gq-processviewer-canvas"),s=t(r),a=parseInt(isNaN(e.css("left").replace("px",""))?0:e.css("left").replace("px","")),l=parseInt(isNaN(e.css("top").replace("px",""))?0:e.css("top").replace("px","")),h=this.calculatePosition(a,l,o.width(),o.height());s.animate({left:h.left,top:h.top},1500,function(){var t=!0,e=0,i=setInterval(function(){t?n.classList.remove("processviewer-shape-selected"):n.classList.add("processviewer-shape-selected"),t=!t,5==e&&clearInterval(i),e++},400)})},_createStage:function(){var e,i,n,r,o,s,a=this;e=a.options.width?a.options.width:"100%",i=a.options.height?a.options.height:150,a.$el.outerWidth(e),a.$el.outerHeight(i);var l=100*a.options.dimentions.width/150+a.options.dimentions.width,h=100*a.options.dimentions.height/150+a.options.dimentions.height,c=a._getStageContainer();a._ScrollZoomProcessViewer(c),a._setResetZoom(t("button#resetZoom"),c),a.options.configuration.processviewerStage=o=new Raphael(c,l,h),a.options.configuration.processviewerPathsStageGroup=o.group(),o.canvas.setAttribute("id",a._generateID()),o.canvas.setAttribute("id",a._generateID()),o.canvas.setAttribute("class","processviewer-zvg-container"),o.canvas.setAttribute("class","processviewer-zvg-nested"),a.options.configuration.processviewerStageSet=o.set(),a.options.configuration.processviewerstageHotSpotSet=o.set(),e.indexOf("%")&&(s=!0),s||a.options.dimentions.width<e?t("[data-processviewercontainer]",a.element).width("100%"):t("[data-processviewercontainer]",a.element).width(a.options.dimentions.width),a.options.dimentions.width<e&&t("[data-processviewercontainer]",a.element).width(e),a.options.image?t.when(a._verifyingImage(a.options.image)).done(function(t){n=t.width?t.width:"150",r=t.height?t.height:"150",a.options.configuration.processviewerImageStage=a.options.configuration.processviewerStage.image(t.src,0,0,n,r),a.options.configuration.processviewerStageSet.push(a.options.configuration.processviewerImageStage),a.options.configuration.processviewerRectStage.attr("fill","rgba(255,255,255,0)"),a.options.configuration.processviewerRectStage.attr("stroke","none"),a._createUIControls()}).fail(function(t){a._createUIFailView(t)}):(n=a.element.width()?a.element.width():"150",r=a.element.height()?a.element.height():"150",a.options.configuration.processviewerRectStage=a.options.configuration.processviewerStage.rect(0,0,2*e,2*i),a.options.configuration.processviewerRectStage.attr("fill","rgba(255,255,255,0)"),a.options.configuration.processviewerRectStage.attr("stroke","none"),a.options.configuration.processviewerRectStage[0].setAttribute("id","BaseStage"+a._generateID()),a._createUIControls())},_createUIControls:function(){var e=this;e.options.configuration.processviewerStage,e.options.configuration.processviewerImageStage;e.options.draggable&&e._setDraggable(),t.when(e._createSVGProcessPool(),e._createSVGLanes(),e._createSVGMilestones(),e._createSVGSequenceFlows()).done(function(){e._createStyleFormats(),e.options.isIE8||e._createMarkers(),e._addHandlers(),e._createSlider(),e.options.hotSpotsSVG?e._createSVGHotSpots():t.when(e._createHTMLHotSpots()).done(function(){e._adjustLabelsPosition();var t={type:"pvComplete",message:"processviewer complete",time:new Date,ui:e.$el};e.element.trigger(t)})})},_zoomProcessViewer:function(e,i){var n=this;n._updateOutputSlider(i);var r=t(i).val();n.options.configuration.processviewerPathsStageGroup.scale(r),n.options.configuration.processviewerHotSpotsContainer.css("font-size",r+"em");var o=t(n.options.configuration.processviewerStage.defs);t(n.options.configuration.processviewerStage.canvas).append(o),n._updateHotSpotsScale(r),e.preventDefault(),e.stopPropagation()},calcProcessViewerTo:function(t,e,i,n){var r=t*(e-n),o=t>0?r-i+n:i-n-r;return t>0?(o<0?"":"-")+Math.abs(o):o},_ScrollZoomProcessViewer:function(e){var i=this,n=t(e).closest(".processviewer-wrapper"),r=t("input[type='range']",i.element),o=t(e),s=null;e.addEventListener("wheel",function(t){null==s&&(s=o.find("[data-processviewerhotspots] > [data-processviewerhotspot]:first"));var e=parseInt(isNaN(o.css("left").replace("px",""))?0:o.css("left").replace("px","")),a=parseInt(isNaN(o.css("top").replace("px",""))?0:o.css("top").replace("px","")),l=Number(r.val()),h=(t.wheelDelta?t.wheelDelta:-1*t.deltaY)>=0;if(r.val(l+.1*(h?1:-1)),l!=r.val()){var c=n.offset(),d=parseInt(s.css("left").replace("px",""))+parseInt(s.css("width").replace("px",""))/2,u=parseInt(s.css("top").replace("px",""))+parseInt(s.css("height").replace("px",""))/2;i._zoomProcessViewer(t,r);var p=parseInt(s.css("left").replace("px",""))+parseInt(s.css("width").replace("px",""))/2,f=parseInt(s.css("top").replace("px",""))+parseInt(s.css("height").replace("px",""))/2,g=i.calcProcessViewerTo(p/d,t.clientX-e,t.clientX,c.left+10),m=i.calcProcessViewerTo(f/u,t.clientY-a,t.clientY,c.top+10);o.css({left:g+"px",top:m+"px"})}})},_setResetZoom:function(e,i){var n=this;e.click(function(e){var r=t("input[type='range']",n.element);r.val(1),t(i).css({left:"0px",top:"0px"}),n._zoomProcessViewer(e,r)})},_createSlider:function(){var e=this,i=e.validateHTML5Features.checkInput("range");if(t.support.touch||i){t(".ui-for-desktop",e.element).remove();var n=t("input[type='range']",e.element);n.attr("min",e.options.minZoom),n.attr("max",e.options.maxZoom),n.attr("step",.1),n.attr("value",1),t.support.touch&&"desktop"!==e.options.device?(n.change(function(){e._updateOutputSlider(this)}),n.bind("touchstart",function(){t(this).prev("output").addClass("is-visible-output"),e._updateOutputSlider(this)}),n.bind("touchend",function(){var i=t(this).val();t(this).prev("output").removeClass("is-visible-output"),e.options.configuration.processviewerPathsStageGroup.scale(i),e.options.configuration.processviewerHotSpotsContainer.css("font-size",i+"em"),e._updateHotSpotsScale(i),e._updateOutputSlider(this)})):(n.mouseenter(function(){t(this).prev("output").addClass("is-visible-output"),e._updateOutputSlider(this)}).mouseleave(function(){t(this).prev("output").removeClass("is-visible-output")}),n.change(function(t){e._zoomProcessViewer(t,this)}))}else{t(".ui-for-touch",e.element).remove();var r=t(".processviewer-zvg-nested",e.element);r.data("real-width",r.width()),r.data("real-height",r.height());var o=function(e,i){var n=i.value||1,r='<div class="tooltip"><div class="tooltip-inner">'+(Math.round(100*n)+"%")+"</div></div>";t(".sliderTooltip").html(r)};e.options.configuration.sliderOptions={min:e.options.minZoomIE8,max:e.options.maxZoomIE8,step:.1,value:1,create:o,slide:o,stop:function(t,i){i.value>1&&(r[0].setAttribute("width",r.data("real-width")*i.value),r[0].setAttribute("height",r.data("real-height")*i.value)),e.options.configuration.processviewerPathsStageGroup.scale(i.value),e.options.configuration.processviewerHotSpotsContainer.css("font-size",i.value+"em"),e._updateHotSpotsScale(i.value),e._setDraggable()}},t("[data-processviewerslider]",e.element).slider(e.options.configuration.sliderOptions)}},_updateOutputSlider:function(e){var i=t(e);i.prev("output").text(Math.round(100*i.val())+"%")},_updateHotSpotsScale:function(e){var i=this.options.configuration.hotspotsList,n=t("[data-processviewerhotspots]",this.element),r=n;if(n.length>1){r=n[0];for(var o=1;o<n.length;o++)t(n[o]).offset().left>t(r).offset().left&&(r=n[o]);i=t(r).find(".processviewer-hotspot")}t(r).hide(),t(".processviewer-hotspot-icon svg g",this.element).each(function(){this.setAttribute("transform","scale("+e/10+")")});for(var s=0;s<i.length;s++){var a=t(i[s]),l=a.data("real-width")*e,h=a.data("real-height")*e,c=a.data("real-left")*e,d=a.data("real-top")*e;a.outerWidth(l),a.outerHeight(h),a.css("left",c),a.css("top",d)}t(r).show()},_scaleSVG:function(){},_addHandlers:function(){var e=this;t(window).on("resize.processviewer",function(){e._setDraggable()})},_setDraggable:function(){var e=this;if(t.support.touch&&"desktop"!==e.options.device){var i=e.options.configuration.processviewerPathsStageGroup.getScale(),n=e.options.configuration.processviewerStage.canvas.getAttribute("width")*i,r=e.options.configuration.processviewerStage.canvas.getAttribute("height")*i;t(".processviewer-wrapper",e.element).addClass("ui-scroll-touch"),t("[data-processviewercontainer]",e.element).width(n),t("[data-processviewercontainer]",e.element).height(r)}else{e.options.configuration.$processviewerStage=t(e.options.configuration.processviewerStage.canvas).parent();var o=t("[data-processviewercontainer]",e.element).position();if(o){i=e.options.configuration.processviewerPathsStageGroup.getScale();var s=e.element.width(),a=e.element.height();n=e.options.configuration.processviewerStage.width*i,r=e.options.configuration.processviewerStage.height*i;maxleft=o.left,maxTop=o.top;var l=t("[data-processviewer-wrapper-container]",e.element).is(":ui-draggable");s<n||a<r?l||(e.$el.addClass(" processviewer-drag"),e._dragLimits(),e.options.configuration.$processviewerStage.draggable({refreshPositions:!0,drag:function(t,e){}})):l&&(e.options.configuration.$processviewerStage.draggable("destroy"),e.element.removeClass("processviewer-drag"),e.options.configuration.$processviewerStage.css({left:0,top:0}),e.options.configuration.processviewerHotSpotsContainer.css({left:0,top:0}))}}},_dragLimits:function(){var t=this,e=t.options.configuration.processviewerPathsStageGroup.getScale(),i=t.element.width(),n=t.element.height(),r=t.options.configuration.processviewerStage.width*e,o=t.options.configuration.processviewerStage.height*e,s=0,a=0;return i<r&&(s=i-r),n<o&&(a=n-o),{x:s,y:a}},_movePaths:function(t,e){this.options.configuration.processviewerStage.move(t,e)},_createMarkers:function(){var e=t.bizagi.processviewer.design.markers;if(e)for(var i in e){var n=e[i].properties,r={id:i,css:i,markerHeight:10,markerWidth:10,refX:10,refY:5,orient:"auto"},o=this.options.configuration.processviewerStage.marker();t(o.node).attrSVG(r),t(o.node.lastElementChild).attrSVG(n),this.options.configuration.processviewerMarkerEndArrow||(this.options.configuration.processviewerMarkerEndArrow=[]),this.options.configuration.processviewerMarkerEndArrow.push(o)}},_createStyleFormats:function(){var e=this.options.formatStyles,i=t("<div></div>"),n="<style>";for(var r in e){var o="."+r.toLowerCase()+"{";i.css(e[r].css),n+=o+=i.attr("style")+"}"}n+="</style>",t("head").append(t(n))},_asignLabelFormat:function(e,i){if(i.bpmnLabel&&i.bpmnLabel.labelStyle){var n=i.bpmnLabel.labelStyle,r=this.options.formatStyles[n];t(e).closest("svg").length>0&&t(e).css(r.css);var o=r.cssClass;o.push(n);for(var s=0;s<o.length;s++)t(e).addClass(o[s].toLowerCase())}},_createSVGProcessPool:function(){for(var t=this,e=[],i=t.options.configuration.processviewerPathsStageGroup,n=t.options.hotspots.length-1;n>=0;n--)t.options.hotspots[n].elementType===t.constants.ELEMENT_TYPE.PROCESS&&(e.push(t.options.hotspots[n]),t.options.hotspots.splice(n,1));t._createSVGRect(i,e,"processPool")},_createSVGLanes:function(){for(var t=this,e=[],i=t.options.configuration.processviewerPathsStageGroup,n=t.options.hotspots.length-1;n>=0;n--)t.options.hotspots[n].elementType===t.constants.ELEMENT_TYPE.LANE&&(e.push(t.options.hotspots[n]),t.options.hotspots.splice(n,1));t._createSVGRect(i,e,"lanes")},_createSVGMilestones:function(){for(var t=this,e=[],i=t.options.configuration.processviewerPathsStageGroup,n=t.options.hotspots.length-1;n>=0;n--)t.options.hotspots[n].elementType===t.constants.ELEMENT_TYPE.MILESTONES&&(e.push(t.options.hotspots[n]),t.options.hotspots.splice(n,1));t._createSVGRect(i,e,"milestones")},_createSVGSequenceFlows:function(){for(var t=this,e=[],i=t.options.configuration.processviewerPathsStageGroup,n=t.options.hotspots.length-1;n>=0;n--)t.options.hotspots[n].elementType!==t.constants.ELEMENT_TYPE.SEQUENCEFLOW&&t.options.hotspots[n].elementType!==t.constants.ELEMENT_TYPE.ASSOCIATION||!t.options.hotspots[n].hasOwnProperty(t.constants.PROPERTIES.WAYPOINTS)||(e.push(t.options.hotspots[n]),t.options.hotspots[n].conditionType===t.constants.CONDITION_TYPE.NORMAL&&t.options.hotspots.splice(n,1));t._createSVGPaths(i,e)},_createSVGRect:function(e,i,n){for(var r,o=this,s=0;s<i.length;s++){var a=i[s];if(void 0===a[o.constants.PROPERTIES.BOUNDS])console.log(a);else{var l=a[o.constants.PROPERTIES.BOUNDS],h=e.rect(l.x,l.y,l.width,l.height);if(a.bpmnElementRef?h[0].setAttribute("id",a.bpmnElementRef):a.bpmnElement&&a.bpmnElement.baref&&a.bpmnElement.baref.ref&&h[0].setAttribute("id",a.bpmnElement.baref.ref),""===a.displayName&&(a.displayName="Lane"),null===a.displayName&&(a.displayName=" "),a.displayName&&(r=e.text(l.height/2*-1,10,a.displayName)),a.elementType===o.constants.ELEMENT_TYPE.PROCESS&&(r.attr({"font-weight":"600",y:a.bounds.y+l.height/2,x:10}).data("rotation",-90),r.transform("r-90")),a.elementType===o.constants.ELEMENT_TYPE.MILESTONES){r.attr({"font-weight":"600",y:a.bounds.y+16,x:a.bounds.x+l.width/2}),h.attr("height",o.options.milestonesHeight);var c=a.bounds.x+a.bounds.width,d=a.bounds.y+o.options.milestonesHeight,u=a.bounds.height,p=o._getPathString([{x:c,y:d},{x:c,y:u}]);e.path(p).attr({stroke:"#CCC","stroke-dasharray":"--"});var f=c-1,g=o._getPathString([{x:f,y:a.bounds.y},{x:f+o.options.milestonesHeight,y:o.options.milestonesHeight/2},{x:f,y:o.options.milestonesHeight}]);e.path(g).attr({stroke:"#CCC",fill:"#FFF"})}if(a.elementType===o.constants.ELEMENT_TYPE.LANE){t(r.node).width(),a.bounds.height,t(r.node).height();r.attr({y:a.bounds.y+a.bounds.height/2,x:a.bounds.x+10,"font-weight":"600"}).data("rotation",-90),r.transform("r-90");var m=a.bounds.x+30,v=a.bounds.height,y=o._getPathString([{x:m,y:a.bounds.y+25},{x:m,y:v}]);e.path(y).attr({stroke:"#E6E6E6",fill:"none"})}t(h[0]).attr("id")&&a.displayName&&t(r[0]).data("id",a.id),h.attr({stroke:"#E6E6E6",fill:"none"}),o._asignLabelFormat(r[0],a)}}},_createSVGPaths:function(e,i){for(var n=this,r=0;r<i.length;r++){var o=i[r];if(void 0===o[n.constants.PROPERTIES.WAYPOINTS])console.log(o);else{var s=!1;o.elementType!==n.constants.ELEMENT_TYPE.TEXTANNOTATION&&o.conditionType!==n.constants.CONDITION_TYPE.RELATION&&o.conditionType!==n.constants.CONDITION_TYPE.COMPENSATION&&(s=!0);var a=n._getPathString(o[n.constants.PROPERTIES.WAYPOINTS]);a+=n.options.isIE8&&s?n._getArrowPathString(o[n.constants.PROPERTIES.WAYPOINTS]):"";var l=e.path(a);o.bpmnElementRef?l[0].setAttribute("id",o.bpmnElementRef):o.bpmnElement&&o.bpmnElement.baref&&o.bpmnElement.baref.ref&&l[0].setAttribute("id",o.bpmnElement.baref.ref),s&&t(l.node).setMarkerSVG("normal");var h=l.getTotalLength()/2,c=l.getPointAtLength(h);o.displayName&&(nText=e.text(c.x,c.y,o.displayName)),t(l[0]).attr("id")&&o.displayName&&t(nText[0]).data("id",o.id),o.conditionType!==n.constants.CONDITION_TYPE.RELATION&&o.conditionType!==n.constants.CONDITION_TYPE.COMPENSATION||l.attr({"stroke-dasharray":".","stroke-width":"2"}),n._asignLabelFormat(l[0],o)}}},_createHTMLHotSpots:function(){for(var e=this,i=[],n=e.options.hotspots,r=e.options.configuration.processviewerHotSpotsContainer=t('<div class="processviewer-hotspots-container" data-processviewerhotspots style="position:absolute;"></div>'),o=0;o<n.length;o++){var s=n[o];if(s.bounds||s.x){s.number=o;var a=e._createHotSpotDiv(s);i.push(a),r.append(a)}}t("[data-processviewer-wrapper-container]",e.element).prepend(r),r.on("click",".processviewer-hotspot",function(i){var n=t(this).data("number"),r=t(this);e.options.hotspots[n].onClick&&e.options.hotspots[n].onClick(i,r),e._triggers.click.apply(r,[e.element])}),r.on("mouseenter",".processviewer-hotspot",function(i){var n=t(this).data("number"),r=t(this);e.options.hotspots[n].onMouseOver&&e.options.hotspots[n].onMouseOver(i,r),e._triggers.onMouseOver.apply(r,[e.element])}),r.on("mouseout",".processviewer-hotspot",function(i){var n=t(this).data("number"),r=t(this);e.options.hotspots[n].onMouseOut&&e.options.hotspots[n].onMouseOut(i,r),e._triggers.onMouseOut.apply(r,[e.element])}),e.options.configuration.hotspotsList=t(".processviewer-hotspot",e.element)},_createHotSpotDiv:function(e){var i=t('<div class="processviewer-hotspot processviewer-hotspot-div" data-processviewerhotspot></div>'),n=t('<div class="processviewer-hotspot-label" data-processviewerlabel></div>'),r=this._getHotSpotData(e);return i.outerWidth(r.w),i.outerHeight(r.h),i.css("left",r.x+"px"),i.css("top",r.y+"px"),i.data("number",e.number),i.attr("number",e.number),e.bounds&&(i.data("real-width",e.bounds.width),i.data("real-height",e.bounds.height),i.data("real-left",e.bounds.x),i.data("real-top",e.bounds.y)),e.displayName&&e.elementType!==this.constants.ELEMENT_TYPE.SEQUENCEFLOW&&(n.text(e.displayName),i.append(n)),e.elementType&&this._createIconsForHotSpots(i,e),e.text&&e.text.content&&(n.text(e.text.content),i.append(n)),e.dataState&&e.dataState.displayName&&(n.text(e.dataState.displayName),i.append(n)),e.radius&&i.css("border-radius",e.radius),e.css&&i.addClass(e.css),e.loopCharacteristics&&(e.loopCharacteristics.isSequential?i.addClass("issequential"):e.loopCharacteristics.isSequential||i.addClass("isparallel")),this._asignLabelFormat(n[0],e),e.elementType&&i.addClass(e.elementType.toLowerCase()),e.conditionType&&i.addClass(e.conditionType.toLowerCase()),e.eventType&&i.addClass(e.eventType.toLowerCase()),e.subProcessType&&i.addClass(e.subProcessType.toLowerCase()),e.isForCompensation&&i.addClass("isforcompensation"),e.bpmnElementRef?i.attr("id",e.bpmnElementRef):e.bpmnElement&&e.bpmnElement.baref&&e.bpmnElement.baref.ref&&i.attr("id",e.bpmnElement.baref.ref),e.content&&i.append(e.content),i},_createIconsForHotSpots:function(e,i){var n=i.elementType.toLowerCase(),r=t('<div class="processviewer-hotspot-icon" data-processviewericon></div>');if(e.append(r),t.bizagi.processviewer.design.icons){var o=t.bizagi.processviewer.design.icons.scale,s=t.bizagi.processviewer.design.icons.bounds.width*o,a=t.bizagi.processviewer.design.icons.bounds.height*o,l=new Raphael(r[0],s,a).group();i.isForCompensation&&(n="isforcompensation");var h=t.bizagi.processviewer.design.icons.iconset[n];if(h){svgTmp=h.svg;for(var c=0;c<svgTmp.length;c++){var d=svgTmp[c],u=l[d.type]();for(var p in o<1&&l.node.setAttribute("transform","scale("+o+")"),d.properties)u[0].setAttribute(p,d.properties[p])}}}},_getPathString:function(t){for(var e="",i=0;i<t.length;i++)0===i&&(e+="M"),i>0&&(e+="L"),e+=t[i].x+",",e+=t[i].y+",";return e},_getArrowPathString:function(t){var e=t[t.length-1],i=t[t.length-2],n=i.x,r=e.x,o=i.y,s=e.y,a=Raphael.angle(r,s,n,o),l=Raphael.rad(a-135),h=Raphael.rad(a+135);return"M"+r+","+s+",L"+(r+10*Math.cos(l))+","+(s+10*Math.sin(l))+",M"+r+","+s+",L"+(r+10*Math.cos(h))+","+(s+10*Math.sin(h))},_getHotSpotData:function(t){var e={x:0,y:0,w:0,h:0};return t.x?e.x=t.x:t.bounds.x&&(e.x=t.bounds.x),t.y?e.y=t.y:t.bounds.y&&(e.y=t.bounds.y),t.w?e.w=t.w:t.bounds.width&&(e.w=t.bounds.width),t.h?e.h=t.h:t.bounds.height&&(e.h=t.bounds.height),e},_createSVGHotSpots:function(){for(var t=this,e=t.options.hotspots,i=0;i<e.length;i++){var n=e[i],r=t.options.configuration.processviewerStage.rect(n.x,n.y,50,50);r.id=n.id,"function"==typeof n.onClick?r.click(n.onClick):r.click(t._triggers.click);var o=t._triggers.onMouseOver,s=t._triggers.onMouseOut;"function"==typeof n.onMouseOver&&(o=n.onMouseOver),"function"==typeof n.onMouseOut&&(s=n.onMouseOut),r.hover(o,s),r.node.id=n.id,r.node.class=n.css,t.options.configuration.processviewerstageHotSpotSet.push(r)}t.options.configuration.processviewerStageSet.push(t.options.configuration.processviewerstageHotSpotSet)},_triggers:{click:function(e){var i={type:"pvClick",message:"hotspot clicked",time:new Date,ui:{control:this,id:t(this).attr("id")}};e.trigger(i)},onMouseOver:function(e){var i={type:"pvMouseIn",message:"hotspot mouse in",time:new Date,ui:{control:this,id:t(this).attr("id")}};e.trigger(i)},onMouseOut:function(e){var i={type:"pvMouseOut",message:"hotspot mouse out",time:new Date,ui:{control:this,id:t(this).attr("id")}};e.trigger(i)},error:function(e){var i={type:"pvError",time:new Date};t.extend(e,i),t.event.trigger(e)}},_createUIFailView:function(e){var i=t('<div class="'+this.options.configuration.errorImageCSS+' svg-error-content"><div class="processviewer-absolute-center"><img src="'+this.options.unavailableImage+'" class="processviewer-absolute-center"/></div><span class="processviewer-message">'+e+"</span></div>");t("[data-processviewercontainer]",this.element).append(i)},_verifyingImage:function(e){var i=t.Deferred(),n=document.createElement("img");return n.onload=function(){i.resolve(n)},n.onerror=function(){i.reject(e)},n.src=e,i.promise()},_getStageContainer:function(e){return t("[data-processviewer-wrapper-container]",this.element)[0]},_generateID:function(){var e=(new Date).getTime(),i="processviewer-xxxxxxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:7&i|8).toString(16)});return t("#"+i).length>0?this._generateID():i},_adjustLabelsPosition:function(){for(var e=t(".processviewer-hotspot-label",this.element),i=(e.closest(".processviewer-hotspot"),0);i<e.length;i++){var n=t(e[i]),r=n.closest(".processviewer-hotspot"),o=r.outerHeight();if(r.hasClass("subprocess")||r.hasClass("callactivity")||r.hasClass("dataobject")){var s=t._ptToem(o+10);n.css({paddingTop:s})}else this.options.isIE8&&n.css({paddingTop:"1.8em"})}},_setOption:function(t,e){this.options[t]=e,this._update()},_update:function(){var t=this.options.value+"%";this.element.text(t),100===this.options.value&&this._trigger("complete",null,{value:100})},_destroy:function(){this.element.empty().removeAttr("style","").removeAttr("role",""),clearInterval(this.options.animation.interval)},_getSelectedClassCSSByWorkitemState:function(t,e){var i;e&&e.filter&&(i=e.filter(function(e){return e.guidTask===t}));var n="processviewer-shape-selected";return i&&i.length>0&&14==i[0].wiState&&(n="processviewer-shape-selected-standby"),n},selectShape:function(e,i){for(var n=t.isArray(e)?e:[e],r=0,o=n.length;r<o;r++){var s=t("#"+n[r],this.$el);if(s.length){var a=this._getSelectedClassCSSByWorkitemState(n[r],i);"div"!==s.prop("tagName").toLowerCase()?(s.addClassSVG(a),s.setMarkerSVG("selected")):s.addClass(a)}}},unSelectShape:function(e,i){for(var n=t.isArray(e)?e:[e],r=0,o=n.length;r<o;r++){var s=t("#"+n[r],this.$el),a=s.prop("tagName").toLowerCase(),l=this._getSelectedClassCSSByWorkitemState(n[r],i);"div"!==a?(s.removeClassSVG(l),s.reverseMarkerSVG()):s.removeClass(l)}},unSelectAllShapes:function(){for(var e=t(".processviewer-shape-selected",this.$el),i=0;i<e.length;i++){var n=t(e[i]);"div"!==n.prop("tagName").toLowerCase()?(n.removeClassSVG("processviewer-shape-selected"),n.reverseMarkerSVG()):n.removeClass("processviewer-shape-selected")}},drawRoute:function(e){for(var i=[],n=0;n<e.length;n++){var r=t("#"+e[n],this.$el);if(r.length>0)"div"!==r.prop("tagName").toLowerCase()?(r.addClassSVG("processviewer-highlighted"),r.setMarkerSVG("highlighted")):r.addClass("processviewer-highlighted");else i.push(e[n])}this._triggers.error({message:"Doesn't find element",ui:i})},animateRoute:function(e){var i=this;i.option.counter;t.isArray(e)&&(i.options.animation.counter=0,i.options.animation.path=e,i.options.animation.status=0),0===i.options.animation.status?i._startRouteAnimation():i._stopRouteAnimation()},_startRouteAnimation:function(){var e=this,i=e.options.animation.path;e.options.animation.status=1,0===e.options.animation.counter&&e.clearRoute(),e.options.animation.interval=setInterval(function(){if(e.options.animation.counter<i.length){var n=t("[id="+i[e.options.animation.counter]+"]",e.$el).last();if(n.length>0)"div"!==n.prop("tagName").toLowerCase()?(n.addClassSVG("processviewer-highlighted"),n.setMarkerSVG("highlighted"),n[0].strokecolor="#FF7F00"):n.addClass("processviewer-highlighted");e.options.animation.counter++}else e.element.trigger({type:"animationComplete",message:"animation end!",time:new Date,ui:e.$el}),e.options.animation.counter=0,e._stopRouteAnimation()},e.options.animation.time)},_stopRouteAnimation:function(){this.options.animation.status=0,clearInterval(this.options.animation.interval)},_isInWorkportal:function(){var t=!1;return"undefined"!=typeof bizagi&&void 0!==bizagi.workportal&&(t=!0),t},clearRoute:function(){for(var e=t(".processviewer-highlighted",this.$el),i=0;i<e.length;i++){var n=t(e[i]);"div"!==n.prop("tagName").toLowerCase()?(n.removeClassSVG("processviewer-highlighted"),n[0].strokecolor="#000",n.reverseMarkerSVG()):n.removeClass("processviewer-highlighted")}},validateHTML5Features:{checkInput:function(t){var e=document.createElement("input");return e.setAttribute("type",t),e.type==t}}}),t.fn.addClassSVG=function(e){var i=arguments[0];return e=t.extend({},t.fn.addClassSVG.config,e),this.each(function(){var t=this.getAttribute("class"),e="";null===t&&(t=""),"string"==typeof i&&-1===t.indexOf(i)&&(e=t+" "+i,this.setAttribute("class",e))})},t.fn.addClassSVG.config={},t.fn.setMarkerSVG=function(e){var i="url(#"+arguments[0]+")";return e=t.extend({},t.fn.addClassSVG.config,e),this.each(function(){var t=this.getAttribute("marker-end");t!=i&&(this.setAttribute("marker-end",i),this.setAttribute("toggle-marker-end",t))})},t.fn.reverseMarkerSVG=function(){return this.each(function(){var t=this.getAttribute("marker-end"),e=this.getAttribute("toggle-marker-end");null!==e&&null!==t&&(this.setAttribute("marker-end",e),this.removeAttribute("toggle-marker-end"))})},t.fn.removeClassSVG=function(e){var i=arguments[0];return e=t.extend({},t.fn.addClassSVG.config,e),this.each(function(){var t=this.getAttribute("class"),e="";null!==t&&"string"==typeof i&&-1!==t.indexOf(i)&&(e=t.replace(i,"").replace("  "," "),this.setAttribute("class",e))})},t.fn.removeClassSVG.config={},t.fn.hasClassSVG=function(t){var e=arguments[0],i=this[0].getAttribute("class"),n=!1;return null!==i&&"string"==typeof e&&-1!==i.indexOf(e)&&(n=!0),n},t.fn.attrSVG=function(t){var e=this[0];for(var i in t)e.setAttribute(i,t[i]);return e},t._ptToem=function(t,e){return e||(e=12),t/e+"em"}}(jQuery),function(t){t.fn.processviewerQueries=function(){this.css("color","green");var e=this;return e.data=this[0],e.internalDataSource={elements:[]},e.datasource={hotspots:[],formatStyles:[]},e.deferred=t.Deferred(),e.padding=80,e.typeDefinitions=t.bizagi.processviewer.configuration.validTypeDefinitions,e.constants=t.bizagi.processviewer.configuration.constants,this.methods={init:function(){var e=this,i=t.Deferred();return e.typeDefinitions.unshift("owner"),e.data.definition.owner={processType:e.data.definition.processType,elementType:e.data.definition.elementType,displayName:e.data.definition.displayName,id:e.data.definition.id},t.when(e.methods.processElements.apply(e,[])).done(function(){i.resolve(e.datasource)}),i.promise()},processElements:function(){var e=this,i=[];for(var n in e.data.definition){var r=e.data.definition[n];if(e.methods.validateKindObject.apply(e,[n]))if(n===e.constants.LANESETS){if(r){var o=e.methods.getLanesFromLaneSet.apply(e,[r]);i=i.concat(o)}}else i=i.concat(r)}e.internalDataSource.elements=e.internalDataSource.elements.concat(i);for(var s=0;s<e.internalDataSource.elements.length;s++){var a=e.internalDataSource.elements[s].id,l=e.methods.getElementGraphicDataById.apply(e,[a]);if(l){var h=t.extend({},l,e.internalDataSource.elements[s]);e.datasource.hotspots.push(h)}}e.datasource.dimentions=e.methods._getMaxDimentions.apply(e,[]),e.datasource.formatStyles=e.methods.getStylesFormat.apply(e,[])},getStylesFormat:function(){var e,i={};if(this.data.graphics[this.constants.BPMNLABELSTYLES]){e=this.data.graphics[this.constants.BPMNLABELSTYLES];for(var n=0;n<e.length;n++){var r=e[n],o=r.font.size?t._ptToem(r.font.size):"1em";i[r.id]={css:{fontFamily:r.font.name||"Arial",fontSize:o,fontWeight:r.font.isBold?"bold":"normal",fontStyle:r.font.isItalic?"italic":"normal",color:r.font.color||"Black"},cssClass:["alignment-"+r.alignment]}}}return i},_getMaxDimentions:function(){var t,e=this,i=0,n=0,r=[];for(var o in e.data.definition){var s=e.data.definition[o];o===e.constants.LANESETS&&s&&(r=e.methods.getLanesFromLaneSet.apply(e,[s]))}for(var a=0;a<r.length;a++)r[a].id&&(t=e.methods.getElementGraphicDataById.apply(e,[r[a].id])),"object"==typeof t&&(i<t.bounds.width&&(i=t.bounds.width+e.padding),n+=t.bounds.height+e.padding);return{width:i,height:n}},_ptToEM:function(t){return t/e.pixelFontSize},getElementGraphicDataById:function(t){for(var e,i=this.data.graphics.bpmnPlane.diagramElements,n=0;n<i.length;n++){var r=this.methods.hasReferenceId(i[n]);if(r&&(localID=r,localID===t)){e=i[n];break}}return e},getLanesFromLaneSet:function(t){for(var e=[],i=0;i<t.length;i++)e=e.concat(t[i].lanes);return e},validateKindObject:function(t){for(var e=!1,i=0;i<this.typeDefinitions.length;i++)if(this.typeDefinitions[i]===t){e=!0;break}return e},hasReferenceId:function(t){var e=!1;return t.bpmnElement?t.bpmnElement.baref&&t.bpmnElement.baref.ref&&(e=t.bpmnElement.baref.ref):t.bpmnElementRef&&(e=t.bpmnElementRef),e}},this.methods.init.apply(this,[])}}(jQuery),function(t){if(t.support.touch="ontouchend"in document,t.support.touch){var e,i=t.ui.mouse.prototype,n=i._mouseInit;i._touchStart=function(t){!e&&this._mouseCapture(t.originalEvent.changedTouches[0])&&(e=!0,this._touchMoved=!1,r(t,"mouseover"),r(t,"mousemove"),r(t,"mousedown"))},i._touchMove=function(t){e&&(this._touchMoved=!0,r(t,"mousemove"))},i._touchEnd=function(t){e&&(r(t,"mouseup"),r(t,"mouseout"),this._touchMoved||r(t,"click"),e=!1)},i._mouseInit=function(){var e=this;e.element.bind("touchstart",t.proxy(e,"_touchStart")).bind("touchmove",t.proxy(e,"_touchMove")).bind("touchend",t.proxy(e,"_touchEnd")),n.call(e)}}function r(t,e){if(!(t.originalEvent.touches.length>1)){t.preventDefault();var i=t.originalEvent.changedTouches[0],n=document.createEvent("MouseEvents");n.initMouseEvent(e,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(n)}}}(jQuery),function(t){var e,i,n="hasOwnProperty",r=/[\.\/]/,o=function(){},s=function(t,e){return t-e},a={n:{}},l=function(t,n){t=String(t);var r,o=i,a=Array.prototype.slice.call(arguments,2),h=l.listeners(t),c=0,d=[],u={},p=[],f=e;e=t,i=0;for(var g=0,m=h.length;g<m;g++)"zIndex"in h[g]&&(d.push(h[g].zIndex),h[g].zIndex<0&&(u[h[g].zIndex]=h[g]));for(d.sort(s);d[c]<0;)if(r=u[d[c++]],p.push(r.apply(n,a)),i)return i=o,p;for(g=0;g<m;g++)if("zIndex"in(r=h[g]))if(r.zIndex==d[c]){if(p.push(r.apply(n,a)),i)break;do{if((r=u[d[++c]])&&p.push(r.apply(n,a)),i)break}while(r)}else u[r.zIndex]=r;else if(p.push(r.apply(n,a)),i)break;return i=o,e=f,p.length?p:null};l._events=a,l.listeners=function(t){var e,i,n,o,s,l,h,c,d=t.split(r),u=a,p=[u],f=[];for(o=0,s=d.length;o<s;o++){for(c=[],l=0,h=p.length;l<h;l++)for(i=[(u=p[l].n)[d[o]],u["*"]],n=2;n--;)(e=i[n])&&(c.push(e),f=f.concat(e.f||[]));p=c}return f},l.on=function(t,e){if(t=String(t),"function"!=typeof e)return function(){};for(var i=t.split(r),n=a,s=0,l=i.length;s<l;s++)n=(n=n.n).hasOwnProperty(i[s])&&n[i[s]]||(n[i[s]]={n:{}});for(n.f=n.f||[],s=0,l=n.f.length;s<l;s++)if(n.f[s]==e)return o;return n.f.push(e),function(t){+t==+t&&(e.zIndex=+t)}},l.f=function(t){var e=[].slice.call(arguments,1);return function(){l.apply(null,[t,null].concat(e).concat([].slice.call(arguments,0)))}},l.stop=function(){i=1},l.nt=function(t){return t?new RegExp("(?:\\.|\\/|^)"+t+"(?:\\.|\\/|$)").test(e):e},l.nts=function(){return e.split(r)},l.off=l.unbind=function(t,e){if(t){var i,o,s,h,c,d,u,p=t.split(r),f=[a];for(h=0,c=p.length;h<c;h++)for(d=0;d<f.length;d+=s.length-2){if(s=[d,1],i=f[d].n,"*"!=p[h])i[p[h]]&&s.push(i[p[h]]);else for(o in i)i[n](o)&&s.push(i[o]);f.splice.apply(f,s)}for(h=0,c=f.length;h<c;h++)for(i=f[h];i.n;){if(e){if(i.f){for(d=0,u=i.f.length;d<u;d++)if(i.f[d]==e){i.f.splice(d,1);break}!i.f.length&&delete i.f}for(o in i.n)if(i.n[n](o)&&i.n[o].f){var g=i.n[o].f;for(d=0,u=g.length;d<u;d++)if(g[d]==e){g.splice(d,1);break}!g.length&&delete i.n[o].f}}else for(o in delete i.f,i.n)i.n[n](o)&&i.n[o].f&&delete i.n[o].f;i=i.n}}else l._events=a={n:{}}},l.once=function(t,e){var i=function(){return l.unbind(t,i),e.apply(this,arguments)};return l.on(t,i)},l.version="0.4.2",l.toString=function(){return"You are running Eve 0.4.2"},"undefined"!=typeof module&&module.exports?module.exports=l:t.eve=l}(this),function(t,e){!function(t,e){function i(t){if(i.is(t,"function"))return y?t():e.on("raphael.DOMload",t);if(i.is(t,j))return i._engine.create[P](i,t.splice(0,3+i.is(t[0],U))).add(t);var n=Array.prototype.slice.call(arguments,0);if(i.is(n[n.length-1],"function")){var r=n.pop();return y?r.call(i._engine.create[P](i,n)):e.on("raphael.DOMload",function(){r.call(i._engine.create[P](i,n))})}return i._engine.create[P](i,arguments)}function n(t){if("function"==typeof t||Object(t)!==t)return t;var e=new t.constructor;for(var i in t)t[k](i)&&(e[i]=n(t[i]));return e}function r(t,e,i){return function n(){var r=Array.prototype.slice.call(arguments,0),o=r.join("␀"),s=n.cache=n.cache||{},a=n.count=n.count||[];if(s[k](o))return function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return t.push(t.splice(i,1)[0])}(a,o),i?i(s[o]):s[o];a.length>=1e3&&delete s[a.shift()];a.push(o);s[o]=t[P](e,r);return i?i(s[o]):s[o]}}function o(){return this.hex}function s(t,e){for(var i=[],n=0,r=t.length;r-2*!e>n;n+=2){var o=[{x:+t[n-2],y:+t[n-1]},{x:+t[n],y:+t[n+1]},{x:+t[n+2],y:+t[n+3]},{x:+t[n+4],y:+t[n+5]}];e?n?r-4==n?o[3]={x:+t[0],y:+t[1]}:r-2==n&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[r-2],y:+t[r-1]}:r-4==n?o[3]=o[2]:n||(o[0]={x:+t[n],y:+t[n+1]}),i.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return i}function a(t,e,i,n,r){var o=-3*e+9*i-9*n+3*r,s=t*o+6*e-12*i+6*n;return t*s-3*e+3*i}function l(t,e,i,n,r,o,s,l,h){null==h&&(h=1);for(var c=(h=h>1?1:h<0?0:h)/2,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],u=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,f=0;f<12;f++){var g=c*d[f]+c,m=a(g,t,i,r,s),v=a(g,e,n,o,l),y=m*m+v*v;p+=u[f]*R.sqrt(y)}return c*p}function h(t,e,i,n,r,o,s,a){if(!(O(t,i)<N(r,s)||N(t,i)>O(r,s)||O(e,n)<N(o,a)||N(e,n)>O(o,a))){var l=(t*n-e*i)*(r-s)-(t-i)*(r*a-o*s),h=(t*n-e*i)*(o-a)-(e-n)*(r*a-o*s),c=(t-i)*(o-a)-(e-n)*(r-s);if(c){var d=l/c,u=h/c,p=+d.toFixed(2),f=+u.toFixed(2);if(!(p<+N(t,i).toFixed(2)||p>+O(t,i).toFixed(2)||p<+N(r,s).toFixed(2)||p>+O(r,s).toFixed(2)||f<+N(e,n).toFixed(2)||f>+O(e,n).toFixed(2)||f<+N(o,a).toFixed(2)||f>+O(o,a).toFixed(2)))return{x:d,y:u}}}}function c(t,e,n){var r=i.bezierBBox(t),o=i.bezierBBox(e);if(!i.isBBoxIntersect(r,o))return n?0:[];for(var s=l.apply(0,t),a=l.apply(0,e),c=O(~~(s/5),1),d=O(~~(a/5),1),u=[],p=[],f={},g=n?0:[],m=0;m<c+1;m++){var v=i.findDotsAtSegment.apply(i,t.concat(m/c));u.push({x:v.x,y:v.y,t:m/c})}for(m=0;m<d+1;m++)v=i.findDotsAtSegment.apply(i,e.concat(m/d)),p.push({x:v.x,y:v.y,t:m/d});for(m=0;m<c;m++)for(var y=0;y<d;y++){var b=u[m],w=u[m+1],x=p[y],_=p[y+1],k=V(w.x-b.x)<.001?"y":"x",C=V(_.x-x.x)<.001?"y":"x",S=h(b.x,b.y,w.x,w.y,x.x,x.y,_.x,_.y);if(S){if(f[S.x.toFixed(4)]==S.y.toFixed(4))continue;f[S.x.toFixed(4)]=S.y.toFixed(4);var T=b.t+V((S[k]-b[k])/(w[k]-b[k]))*(w.t-b.t),P=x.t+V((S[C]-x[C])/(_[C]-x[C]))*(_.t-x.t);T>=0&&T<=1.001&&P>=0&&P<=1.001&&(n?g++:g.push({x:S.x,y:S.y,t1:N(T,1),t2:N(P,1)}))}}return g}function d(t,e,n){t=i._path2curve(t),e=i._path2curve(e);for(var r,o,s,a,l,h,d,u,p,f,g=n?0:[],m=0,v=t.length;m<v;m++){var y=t[m];if("M"==y[0])r=l=y[1],o=h=y[2];else{"C"==y[0]?(p=[r,o].concat(y.slice(1)),r=p[6],o=p[7]):(p=[r,o,r,o,l,h,l,h],r=l,o=h);for(var b=0,w=e.length;b<w;b++){var x=e[b];if("M"==x[0])s=d=x[1],a=u=x[2];else{"C"==x[0]?(f=[s,a].concat(x.slice(1)),s=f[6],a=f[7]):(f=[s,a,s,a,d,u,d,u],s=d,a=u);var _=c(p,f,n);if(n)g+=_;else{for(var k=0,C=_.length;k<C;k++)_[k].segment1=m,_[k].segment2=b,_[k].bez1=p,_[k].bez2=f;g=g.concat(_)}}}}}return g}function u(t,e,i,n,r,o){null!=t?(this.a=+t,this.b=+e,this.c=+i,this.d=+n,this.e=+r,this.f=+o):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function p(){return this.x+z+this.y+z+this.width+" × "+this.height}function f(t,e,i,n,r,o){function s(t){return((c*t+h)*t+l)*t}var a,l=3*e,h=3*(n-e)-l,c=1-l-h,d=3*i,u=3*(r-i)-d,p=1-d-u;return a=function(t,e){var i,n,r,o,a,d;for(r=t,d=0;d<8;d++){if(o=s(r)-t,V(o)<e)return r;if(V(a=(3*c*r+2*h)*r+l)<1e-6)break;r-=o/a}if(n=1,(r=t)<(i=0))return i;if(r>n)return n;for(;i<n;){if(o=s(r),V(o-t)<e)return r;t>o?i=r:n=r,r=(n-i)/2+i}return r}(t,1/(200*o)),((p*a+u)*a+d)*a}function g(t,e){var i=[],n={};if(this.ms=e,this.times=1,t){for(var r in t)t[k](r)&&(n[X(r)]=t[r],i.push(X(r)));i.sort(lt)}this.anim=n,this.top=i[i.length-1],this.percents=i}function m(t,n,r,o,s,a){r=X(r);var l,h,c,d,p,g,m=t.ms,v={},y={},b={};if(o)for(_=0,C=oe.length;_<C;_++){var x=oe[_];if(x.el.id==n.id&&x.anim==t){x.percent!=r?(oe.splice(_,1),c=1):h=x,n.attr(x.totalOrigin);break}}else o=+y;for(var _=0,C=t.percents.length;_<C;_++){if(t.percents[_]==r||t.percents[_]>o*t.top){r=t.percents[_],p=t.percents[_-1]||0,m=m/t.top*(r-p),d=t.percents[_+1],l=t.anim[r];break}o&&n.attr(t.anim[t.percents[_]])}if(l){if(h)h.initstatus=o,h.start=new Date-h.ms*o;else{for(var S in l)if(l[k](S)&&(tt[k](S)||n.paper.customAttributes[k](S)))switch(v[S]=n.attr(S),null==v[S]&&(v[S]=J[S]),y[S]=l[S],tt[S]){case U:b[S]=(y[S]-v[S])/m;break;case"colour":v[S]=i.getRGB(v[S]);var T=i.getRGB(y[S]);b[S]={r:(T.r-v[S].r)/m,g:(T.g-v[S].g)/m,b:(T.b-v[S].b)/m};break;case"path":var P=It(v[S],y[S]),D=P[1];for(v[S]=P[0],b[S]=[],_=0,C=v[S].length;_<C;_++){b[S][_]=[0];for(var z=1,L=v[S][_].length;z<L;z++)b[S][_][z]=(D[_][z]-v[S][_][z])/m}break;case"transform":var I=n._,B=Vt(I[S],y[S]);if(B)for(v[S]=B.from,y[S]=B.to,b[S]=[],b[S].real=!0,_=0,C=v[S].length;_<C;_++)for(b[S][_]=[v[S][_][0]],z=1,L=v[S][_].length;z<L;z++)b[S][_][z]=(y[S][_][z]-v[S][_][z])/m;else{var R=n.matrix||new u,O={_:{transform:I.transform},getBBox:function(){return n.getBBox(1)}};v[S]=[R.a,R.b,R.c,R.d,R.e,R.f],Ot(O,y[S]),y[S]=O._.transform,b[S]=[(O.matrix.a-R.a)/m,(O.matrix.b-R.b)/m,(O.matrix.c-R.c)/m,(O.matrix.d-R.d)/m,(O.matrix.e-R.e)/m,(O.matrix.f-R.f)/m]}break;case"csv":var N=E(l[S])[M](w),V=E(v[S])[M](w);if("clip-rect"==S)for(v[S]=V,b[S]=[],_=V.length;_--;)b[S][_]=(N[_]-v[S][_])/m;y[S]=N;break;default:for(N=[][A](l[S]),V=[][A](v[S]),b[S]=[],_=n.paper.customAttributes[S].length;_--;)b[S][_]=((N[_]||0)-(V[_]||0))/m}var F=l.easing,H=i.easing_formulas[F];if(!H)if((H=E(F).match(Y))&&5==H.length){var $=H;H=function(t){return f(t,+$[1],+$[2],+$[3],+$[4],m)}}else H=ht;if(g=l.start||t.start||+new Date,x={anim:t,percent:r,timestamp:g,start:g+(t.del||0),status:0,initstatus:o||0,stop:!1,ms:m,easing:H,from:v,diff:b,to:y,el:n,callback:l.callback,prev:p,next:d,repeat:a||t.times,origin:n.attr(),totalOrigin:s},oe.push(x),o&&!h&&!c&&(x.stop=!0,x.start=new Date-m*o,1==oe.length))return ae();c&&(x.start=new Date-x.ms*o),1==oe.length&&se(ae)}e("raphael.anim.start."+n.id,n,t)}}function v(t){for(var e=0;e<oe.length;e++)oe[e].el.paper==t&&oe.splice(e--,1)}i.version="2.1.2",i.eve=e;var y,b,w=/[, ]+/,x={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},_=/\{(\d+)\}/g,k="hasOwnProperty",C={doc:document,win:t},S={was:Object.prototype[k].call(C.win,"Raphael"),is:C.win.Raphael},T=function(){this.ca=this.customAttributes={}},P="apply",A="concat",D="ontouchstart"in C.win||C.win.DocumentTouch&&C.doc instanceof DocumentTouch,z=" ",E=String,M="split",L="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[M](z),I={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},B=E.prototype.toLowerCase,R=Math,O=R.max,N=R.min,V=R.abs,F=R.pow,H=R.PI,U="number",$="string",j="array",G=Object.prototype.toString,W=(i._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),q={NaN:1,Infinity:1,"-Infinity":1},Y=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Q=R.round,X=parseFloat,Z=parseInt,K=E.prototype.toUpperCase,J=i._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},tt=i._availableAnimAttrs={blur:U,"clip-rect":"csv",cx:U,cy:U,fill:"colour","fill-opacity":U,"font-size":U,height:U,opacity:U,path:"path",r:U,rx:U,ry:U,stroke:"colour","stroke-opacity":U,"stroke-width":U,transform:"transform",width:U,x:U,y:U},et=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,it={hs:1,rg:1},nt=/,?([achlmqrstvxz]),?/gi,rt=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ot=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,st=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,at=(i._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),lt=function(t,e){return X(t)-X(e)},ht=function(t){return t},ct=i._rectPath=function(t,e,i,n,r){return r?[["M",t+r,e],["l",i-2*r,0],["a",r,r,0,0,1,r,r],["l",0,n-2*r],["a",r,r,0,0,1,-r,r],["l",2*r-i,0],["a",r,r,0,0,1,-r,-r],["l",0,2*r-n],["a",r,r,0,0,1,r,-r],["z"]]:[["M",t,e],["l",i,0],["l",0,n],["l",-i,0],["z"]]},dt=function(t,e,i,n){return null==n&&(n=i),[["M",t,e],["m",0,-n],["a",i,n,0,1,1,0,2*n],["a",i,n,0,1,1,0,-2*n],["z"]]},ut=i._getPath={path:function(t){return t.attr("path")},circle:function(t){var e=t.attrs;return dt(e.cx,e.cy,e.r)},ellipse:function(t){var e=t.attrs;return dt(e.cx,e.cy,e.rx,e.ry)},rect:function(t){var e=t.attrs;return ct(e.x,e.y,e.width,e.height,e.r)},image:function(t){var e=t.attrs;return ct(e.x,e.y,e.width,e.height)},text:function(t){var e=t._getBBox();return ct(e.x,e.y,e.width,e.height)},set:function(t){var e=t._getBBox();return ct(e.x,e.y,e.width,e.height)}},pt=i.mapPath=function(t,e){if(!e)return t;var i,n,r,o,s,a,l;for(t=It(t),r=0,s=t.length;r<s;r++)for(l=t[r],o=1,a=l.length;o<a;o+=2)i=e.x(l[o],l[o+1]),n=e.y(l[o],l[o+1]),l[o]=i,l[o+1]=n;return t};if(i._g=C,i.type=C.win.SVGAngle||C.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==i.type){var ft,gt=C.doc.createElement("div");if(gt.innerHTML='<v:shape adj="1"/>',(ft=gt.firstChild).style.behavior="url(#default#VML)",!ft||"object"!=typeof ft.adj)return i.type="";gt=null}i.svg=!(i.vml="VML"==i.type),i._Paper=T,i.fn=b=T.prototype=i.prototype,i._id=0,i._oid=0,i.is=function(t,e){return"finite"==(e=B.call(e))?!q[k](+t):"array"==e?t instanceof Array:"null"==e&&null===t||e==typeof t&&null!==t||"object"==e&&t===Object(t)||"array"==e&&Array.isArray&&Array.isArray(t)||G.call(t).slice(8,-1).toLowerCase()==e},i.angle=function(t,e,n,r,o,s){if(null==o){var a=t-n,l=e-r;return a||l?(180+180*R.atan2(-l,-a)/H+360)%360:0}return i.angle(t,e,o,s)-i.angle(n,r,o,s)},i.rad=function(t){return t%360*H/180},i.deg=function(t){return 180*t/H%360},i.snapTo=function(t,e,n){if(n=i.is(n,"finite")?n:10,i.is(t,j)){for(var r=t.length;r--;)if(V(t[r]-e)<=n)return t[r]}else{var o=e%(t=+t);if(o<n)return e-o;if(o>t-n)return e-o+t}return e};i.createUUID=(mt=/[xy]/g,vt=function(t){var e=16*R.random()|0,i="x"==t?e:3&e|8;return i.toString(16)},function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(mt,vt).toUpperCase()});var mt,vt;i.setWindow=function(t){e("raphael.setWindow",i,C.win,t),C.win=t,C.doc=C.win.document,i._engine.initWin&&i._engine.initWin(C.win)};var yt=function(t){if(i.vml){var e,n=/^\s+|\s+$/g;try{var o=new ActiveXObject("htmlfile");o.write("<body>"),o.close(),e=o.body}catch(t){e=createPopup().document.body}var s=e.createTextRange();yt=r(function(t){try{e.style.color=E(t).replace(n,"");var i=s.queryCommandValue("ForeColor");return"#"+("000000"+(i=(255&i)<<16|65280&i|(16711680&i)>>>16).toString(16)).slice(-6)}catch(t){return"none"}})}else{var a=C.doc.createElement("i");a.title="Raphaël Colour Picker",a.style.display="none",C.doc.body.appendChild(a),yt=r(function(t){return a.style.color=t,C.doc.defaultView.getComputedStyle(a,"").getPropertyValue("color")})}return yt(t)},bt=function(){return"hsb("+[this.h,this.s,this.b]+")"},wt=function(){return"hsl("+[this.h,this.s,this.l]+")"},xt=function(){return this.hex},_t=function(t,e,n){if(null==e&&i.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(n=t.b,e=t.g,t=t.r),null==e&&i.is(t,$)){var r=i.getRGB(t);t=r.r,e=r.g,n=r.b}return(t>1||e>1||n>1)&&(t/=255,e/=255,n/=255),[t,e,n]},kt=function(t,e,n,r){var o={r:t*=255,g:e*=255,b:n*=255,hex:i.rgb(t,e,n),toString:xt};return i.is(r,"finite")&&(o.opacity=r),o};i.color=function(t){var e;return i.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(e=i.hsb2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):i.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(e=i.hsl2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):(i.is(t,"string")&&(t=i.getRGB(t)),i.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(e=i.rgb2hsl(t),t.h=e.h,t.s=e.s,t.l=e.l,e=i.rgb2hsb(t),t.v=e.b):(t={hex:"none"}).r=t.g=t.b=t.h=t.s=t.v=t.l=-1),t.toString=xt,t},i.hsb2rgb=function(t,e,i,n){var r,o,s,a,l;return this.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(i=t.b,e=t.s,t=t.h,n=t.o),a=(l=i*e)*(1-V((t=(t*=360)%360/60)%2-1)),r=o=s=i-l,kt(r+=[l,a,0,0,a,l][t=~~t],o+=[a,l,l,a,0,0][t],s+=[0,0,a,l,l,a][t],n)},i.hsl2rgb=function(t,e,i,n){var r,o,s,a,l;return this.is(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(i=t.l,e=t.s,t=t.h),(t>1||e>1||i>1)&&(t/=360,e/=100,i/=100),a=(l=2*e*(i<.5?i:1-i))*(1-V((t=(t*=360)%360/60)%2-1)),r=o=s=i-l/2,kt(r+=[l,a,0,0,a,l][t=~~t],o+=[a,l,l,a,0,0][t],s+=[0,0,a,l,l,a][t],n)},i.rgb2hsb=function(t,e,i){var n,r;return i=_t(t,e,i),t=i[0],e=i[1],i=i[2],n=O(t,e,i),r=n-N(t,e,i),{h:((0==r?null:n==t?(e-i)/r:n==e?(i-t)/r+2:(t-e)/r+4)+360)%6*60/360,s:0==r?0:r/n,b:n,toString:bt}},i.rgb2hsl=function(t,e,i){var n,r,o,s;return i=_t(t,e,i),t=i[0],e=i[1],i=i[2],r=O(t,e,i),o=N(t,e,i),n=(r+o)/2,{h:((0==(s=r-o)?null:r==t?(e-i)/s:r==e?(i-t)/s+2:(t-e)/s+4)+360)%6*60/360,s:0==s?0:n<.5?s/(2*n):s/(2-2*n),l:n,toString:wt}},i._path2string=function(){return this.join(",").replace(nt,"$1")};i._preload=function(t,e){var i=C.doc.createElement("img");i.style.cssText="position:absolute;left:-9999em;top:-9999em",i.onload=function(){e.call(this),this.onload=null,C.doc.body.removeChild(this)},i.onerror=function(){C.doc.body.removeChild(this)},C.doc.body.appendChild(i),i.src=t};i.getRGB=r(function(t){if(!t||(t=E(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:o};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none",toString:o};!it[k](t.toLowerCase().substring(0,2))&&"#"!=t.charAt()&&(t=yt(t));var e,n,r,s,a,l,h=t.match(W);return h?(h[2]&&(r=Z(h[2].substring(5),16),n=Z(h[2].substring(3,5),16),e=Z(h[2].substring(1,3),16)),h[3]&&(r=Z((a=h[3].charAt(3))+a,16),n=Z((a=h[3].charAt(2))+a,16),e=Z((a=h[3].charAt(1))+a,16)),h[4]&&(l=h[4][M](et),e=X(l[0]),"%"==l[0].slice(-1)&&(e*=2.55),n=X(l[1]),"%"==l[1].slice(-1)&&(n*=2.55),r=X(l[2]),"%"==l[2].slice(-1)&&(r*=2.55),"rgba"==h[1].toLowerCase().slice(0,4)&&(s=X(l[3])),l[3]&&"%"==l[3].slice(-1)&&(s/=100)),h[5]?(l=h[5][M](et),e=X(l[0]),"%"==l[0].slice(-1)&&(e*=2.55),n=X(l[1]),"%"==l[1].slice(-1)&&(n*=2.55),r=X(l[2]),"%"==l[2].slice(-1)&&(r*=2.55),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(e/=360),"hsba"==h[1].toLowerCase().slice(0,4)&&(s=X(l[3])),l[3]&&"%"==l[3].slice(-1)&&(s/=100),i.hsb2rgb(e,n,r,s)):h[6]?(l=h[6][M](et),e=X(l[0]),"%"==l[0].slice(-1)&&(e*=2.55),n=X(l[1]),"%"==l[1].slice(-1)&&(n*=2.55),r=X(l[2]),"%"==l[2].slice(-1)&&(r*=2.55),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(e/=360),"hsla"==h[1].toLowerCase().slice(0,4)&&(s=X(l[3])),l[3]&&"%"==l[3].slice(-1)&&(s/=100),i.hsl2rgb(e,n,r,s)):((h={r:e,g:n,b:r,toString:o}).hex="#"+(16777216|r|n<<8|e<<16).toString(16).slice(1),i.is(s,"finite")&&(h.opacity=s),h)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:o}},i),i.hsb=r(function(t,e,n){return i.hsb2rgb(t,e,n).hex}),i.hsl=r(function(t,e,n){return i.hsl2rgb(t,e,n).hex}),i.rgb=r(function(t,e,i){return"#"+(16777216|i|e<<8|t<<16).toString(16).slice(1)}),i.getColor=function(t){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},i=this.hsb2rgb(e.h,e.s,e.b);return e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})),i.hex},i.getColor.reset=function(){delete this.start},i.parsePathString=function(t){if(!t)return null;var e=Ct(t);if(e.arr)return Tt(e.arr);var n={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},r=[];return i.is(t,j)&&i.is(t[0],j)&&(r=Tt(t)),r.length||E(t).replace(rt,function(t,e,i){var o=[],s=e.toLowerCase();if(i.replace(st,function(t,e){e&&o.push(+e)}),"m"==s&&o.length>2&&(r.push([e][A](o.splice(0,2))),s="l",e="m"==e?"l":"L"),"r"==s)r.push([e][A](o));else for(;o.length>=n[s]&&(r.push([e][A](o.splice(0,n[s]))),n[s]););}),r.toString=i._path2string,e.arr=Tt(r),r},i.parseTransformString=r(function(t){if(!t)return null;var e=[];return i.is(t,j)&&i.is(t[0],j)&&(e=Tt(t)),e.length||E(t).replace(ot,function(t,i,n){var r=[];B.call(i);n.replace(st,function(t,e){e&&r.push(+e)}),e.push([i][A](r))}),e.toString=i._path2string,e});var Ct=function(t){var e=Ct.ps=Ct.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout(function(){for(var i in e)e[k](i)&&i!=t&&(e[i].sleep--,!e[i].sleep&&delete e[i])}),e[t]};i.findDotsAtSegment=function(t,e,i,n,r,o,s,a,l){var h=1-l,c=F(h,3),d=F(h,2),u=l*l,p=u*l,f=c*t+3*d*l*i+3*h*l*l*r+p*s,g=c*e+3*d*l*n+3*h*l*l*o+p*a,m=t+2*l*(i-t)+u*(r-2*i+t),v=e+2*l*(n-e)+u*(o-2*n+e),y=i+2*l*(r-i)+u*(s-2*r+i),b=n+2*l*(o-n)+u*(a-2*o+n),w=h*t+l*i,x=h*e+l*n,_=h*r+l*s,k=h*o+l*a,C=90-180*R.atan2(m-y,v-b)/H;return(m>y||v<b)&&(C+=180),{x:f,y:g,m:{x:m,y:v},n:{x:y,y:b},start:{x:w,y:x},end:{x:_,y:k},alpha:C}},i.bezierBBox=function(t,e,n,r,o,s,a,l){i.is(t,"array")||(t=[t,e,n,r,o,s,a,l]);var h=Lt.apply(null,t);return{x:h.min.x,y:h.min.y,x2:h.max.x,y2:h.max.y,width:h.max.x-h.min.x,height:h.max.y-h.min.y}},i.isPointInsideBBox=function(t,e,i){return e>=t.x&&e<=t.x2&&i>=t.y&&i<=t.y2},i.isBBoxIntersect=function(t,e){var n=i.isPointInsideBBox;return n(e,t.x,t.y)||n(e,t.x2,t.y)||n(e,t.x,t.y2)||n(e,t.x2,t.y2)||n(t,e.x,e.y)||n(t,e.x2,e.y)||n(t,e.x,e.y2)||n(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)},i.pathIntersection=function(t,e){return d(t,e)},i.pathIntersectionNumber=function(t,e){return d(t,e,1)},i.isPointInsidePath=function(t,e,n){var r=i.pathBBox(t);return i.isPointInsideBBox(r,e,n)&&d(t,[["M",e,n],["H",r.x2+10]],1)%2==1},i._removedFactory=function(t){return function(){e("raphael.log",null,"Raphaël: you are calling to method “"+t+"” of removed object",t)}};var St=i.pathBBox=function(t){var e=Ct(t);if(e.bbox)return n(e.bbox);if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0};t=It(t);for(var i,r=0,o=0,s=[],a=[],l=0,h=t.length;l<h;l++)if("M"==(i=t[l])[0])r=i[1],o=i[2],s.push(r),a.push(o);else{var c=Lt(r,o,i[1],i[2],i[3],i[4],i[5],i[6]);s=s[A](c.min.x,c.max.x),a=a[A](c.min.y,c.max.y),r=i[5],o=i[6]}var d=N[P](0,s),u=N[P](0,a),p=O[P](0,s),f=O[P](0,a),g=p-d,m=f-u,v={x:d,y:u,x2:p,y2:f,width:g,height:m,cx:d+g/2,cy:u+m/2};return e.bbox=n(v),v},Tt=function(t){var e=n(t);return e.toString=i._path2string,e},Pt=i._pathToRelative=function(t){var e=Ct(t);if(e.rel)return Tt(e.rel);i.is(t,j)&&i.is(t&&t[0],j)||(t=i.parsePathString(t));var n=[],r=0,o=0,s=0,a=0,l=0;"M"==t[0][0]&&(r=t[0][1],o=t[0][2],s=r,a=o,l++,n.push(["M",r,o]));for(var h=l,c=t.length;h<c;h++){var d=n[h]=[],u=t[h];if(u[0]!=B.call(u[0]))switch(d[0]=B.call(u[0]),d[0]){case"a":d[1]=u[1],d[2]=u[2],d[3]=u[3],d[4]=u[4],d[5]=u[5],d[6]=+(u[6]-r).toFixed(3),d[7]=+(u[7]-o).toFixed(3);break;case"v":d[1]=+(u[1]-o).toFixed(3);break;case"m":s=u[1],a=u[2];default:for(var p=1,f=u.length;p<f;p++)d[p]=+(u[p]-(p%2?r:o)).toFixed(3)}else{d=n[h]=[],"m"==u[0]&&(s=u[1]+r,a=u[2]+o);for(var g=0,m=u.length;g<m;g++)n[h][g]=u[g]}var v=n[h].length;switch(n[h][0]){case"z":r=s,o=a;break;case"h":r+=+n[h][v-1];break;case"v":o+=+n[h][v-1];break;default:r+=+n[h][v-2],o+=+n[h][v-1]}}return n.toString=i._path2string,e.rel=Tt(n),n},At=i._pathToAbsolute=function(t){var e=Ct(t);if(e.abs)return Tt(e.abs);if(i.is(t,j)&&i.is(t&&t[0],j)||(t=i.parsePathString(t)),!t||!t.length)return[["M",0,0]];var n=[],r=0,o=0,a=0,l=0,h=0;"M"==t[0][0]&&(r=+t[0][1],o=+t[0][2],a=r,l=o,h++,n[0]=["M",r,o]);for(var c,d,u=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),p=h,f=t.length;p<f;p++){if(n.push(c=[]),(d=t[p])[0]!=K.call(d[0]))switch(c[0]=K.call(d[0]),c[0]){case"A":c[1]=d[1],c[2]=d[2],c[3]=d[3],c[4]=d[4],c[5]=d[5],c[6]=+(d[6]+r),c[7]=+(d[7]+o);break;case"V":c[1]=+d[1]+o;break;case"H":c[1]=+d[1]+r;break;case"R":for(var g=[r,o][A](d.slice(1)),m=2,v=g.length;m<v;m++)g[m]=+g[m]+r,g[++m]=+g[m]+o;n.pop(),n=n[A](s(g,u));break;case"M":a=+d[1]+r,l=+d[2]+o;default:for(m=1,v=d.length;m<v;m++)c[m]=+d[m]+(m%2?r:o)}else if("R"==d[0])g=[r,o][A](d.slice(1)),n.pop(),n=n[A](s(g,u)),c=["R"][A](d.slice(-2));else for(var y=0,b=d.length;y<b;y++)c[y]=d[y];switch(c[0]){case"Z":r=a,o=l;break;case"H":r=c[1];break;case"V":o=c[1];break;case"M":a=c[c.length-2],l=c[c.length-1];default:r=c[c.length-2],o=c[c.length-1]}}return n.toString=i._path2string,e.abs=Tt(n),n},Dt=function(t,e,i,n){return[t,e,i,n,i,n]},zt=function(t,e,i,n,r,o){return[1/3*t+2/3*i,1/3*e+2/3*n,1/3*r+2/3*i,1/3*o+2/3*n,r,o]},Et=function(t,e,i,n,o,s,a,l,h,c){var d,u=120*H/180,p=H/180*(+o||0),f=[],g=r(function(t,e,i){var n=t*R.cos(i)-e*R.sin(i),r=t*R.sin(i)+e*R.cos(i);return{x:n,y:r}});if(c)C=c[0],S=c[1],_=c[2],k=c[3];else{d=g(t,e,-p),t=d.x,e=d.y,d=g(l,h,-p),l=d.x,h=d.y;R.cos(H/180*o),R.sin(H/180*o);var m=(t-l)/2,v=(e-h)/2,y=m*m/(i*i)+v*v/(n*n);y>1&&(y=R.sqrt(y),i*=y,n*=y);var b=i*i,w=n*n,x=(s==a?-1:1)*R.sqrt(V((b*w-b*v*v-w*m*m)/(b*v*v+w*m*m))),_=x*i*v/n+(t+l)/2,k=x*-n*m/i+(e+h)/2,C=R.asin(((e-k)/n).toFixed(9)),S=R.asin(((h-k)/n).toFixed(9));(C=t<_?H-C:C)<0&&(C=2*H+C),(S=l<_?H-S:S)<0&&(S=2*H+S),a&&C>S&&(C-=2*H),!a&&S>C&&(S-=2*H)}var T=S-C;if(V(T)>u){var P=S,D=l,z=h;S=C+u*(a&&S>C?1:-1),l=_+i*R.cos(S),h=k+n*R.sin(S),f=Et(l,h,i,n,o,0,a,D,z,[S,P,_,k])}T=S-C;var E=R.cos(C),L=R.sin(C),I=R.cos(S),B=R.sin(S),O=R.tan(T/4),N=4/3*i*O,F=4/3*n*O,U=[t,e],$=[t+N*L,e-F*E],j=[l+N*B,h-F*I],G=[l,h];if($[0]=2*U[0]-$[0],$[1]=2*U[1]-$[1],c)return[$,j,G][A](f);f=[$,j,G][A](f).join()[M](",");for(var W=[],q=0,Y=f.length;q<Y;q++)W[q]=q%2?g(f[q-1],f[q],p).y:g(f[q],f[q+1],p).x;return W},Mt=function(t,e,i,n,r,o,s,a,l){var h=1-l;return{x:F(h,3)*t+3*F(h,2)*l*i+3*h*l*l*r+F(l,3)*s,y:F(h,3)*e+3*F(h,2)*l*n+3*h*l*l*o+F(l,3)*a}},Lt=r(function(t,e,i,n,r,o,s,a){var l,h=r-2*i+t-(s-2*r+i),c=2*(i-t)-2*(r-i),d=t-i,u=(-c+R.sqrt(c*c-4*h*d))/2/h,p=(-c-R.sqrt(c*c-4*h*d))/2/h,f=[e,a],g=[t,s];return V(u)>"1e12"&&(u=.5),V(p)>"1e12"&&(p=.5),u>0&&u<1&&(l=Mt(t,e,i,n,r,o,s,a,u),g.push(l.x),f.push(l.y)),p>0&&p<1&&(l=Mt(t,e,i,n,r,o,s,a,p),g.push(l.x),f.push(l.y)),h=o-2*n+e-(a-2*o+n),d=e-n,u=(-(c=2*(n-e)-2*(o-n))+R.sqrt(c*c-4*h*d))/2/h,p=(-c-R.sqrt(c*c-4*h*d))/2/h,V(u)>"1e12"&&(u=.5),V(p)>"1e12"&&(p=.5),u>0&&u<1&&(l=Mt(t,e,i,n,r,o,s,a,u),g.push(l.x),f.push(l.y)),p>0&&p<1&&(l=Mt(t,e,i,n,r,o,s,a,p),g.push(l.x),f.push(l.y)),{min:{x:N[P](0,g),y:N[P](0,f)},max:{x:O[P](0,g),y:O[P](0,f)}}}),It=i._path2curve=r(function(t,e){var i=!e&&Ct(t);if(!e&&i.curve)return Tt(i.curve);for(var n=At(t),r=e&&At(e),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a=function(t,e,i){var n,r;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"][A](Et[P](0,[e.x,e.y][A](t.slice(1))));break;case"S":"C"==i||"S"==i?(n=2*e.x-e.bx,r=2*e.y-e.by):(n=e.x,r=e.y),t=["C",n,r][A](t.slice(1));break;case"T":"Q"==i||"T"==i?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"][A](zt(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"][A](zt(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"][A](Dt(e.x,e.y,t[1],t[2]));break;case"H":t=["C"][A](Dt(e.x,e.y,t[1],e.y));break;case"V":t=["C"][A](Dt(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"][A](Dt(e.x,e.y,e.X,e.Y))}return t},l=function(t,e){if(t[e].length>7){t[e].shift();for(var i=t[e];i.length;)t.splice(e++,0,["C"][A](i.splice(0,6)));t.splice(e,1),d=O(n.length,r&&r.length||0)}},h=function(t,e,i,o,s){t&&e&&"M"==t[s][0]&&"M"!=e[s][0]&&(e.splice(s,0,["M",o.x,o.y]),i.bx=0,i.by=0,i.x=t[s][1],i.y=t[s][2],d=O(n.length,r&&r.length||0))},c=0,d=O(n.length,r&&r.length||0);c<d;c++){n[c]=a(n[c],o),l(n,c),r&&(r[c]=a(r[c],s)),r&&l(r,c),h(n,r,o,s,c),h(r,n,s,o,c);var u=n[c],p=r&&r[c],f=u.length,g=r&&p.length;o.x=u[f-2],o.y=u[f-1],o.bx=X(u[f-4])||o.x,o.by=X(u[f-3])||o.y,s.bx=r&&(X(p[g-4])||s.x),s.by=r&&(X(p[g-3])||s.y),s.x=r&&p[g-2],s.y=r&&p[g-1]}return r||(i.curve=Tt(n)),r?[n,r]:n},null,Tt),Bt=(i._parseDots=r(function(t){for(var e=[],n=0,r=t.length;n<r;n++){var o={},s=t[n].match(/^([^:]*):?([\d\.]*)/);if(o.color=i.getRGB(s[1]),o.color.error)return null;o.color=o.color.hex,s[2]&&(o.offset=s[2]+"%"),e.push(o)}for(n=1,r=e.length-1;n<r;n++)if(!e[n].offset){for(var a=X(e[n-1].offset||0),l=0,h=n+1;h<r;h++)if(e[h].offset){l=e[h].offset;break}l||(l=100,h=r);for(var c=((l=X(l))-a)/(h-n+1);n<h;n++)a+=c,e[n].offset=a+"%"}return e}),i._tear=function(t,e){t==e.top&&(e.top=t.prev),t==e.bottom&&(e.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)}),Rt=(i._tofront=function(t,e){e.top!==t&&(Bt(t,e),t.next=null,t.prev=e.top,e.top.next=t,e.top=t)},i._toback=function(t,e){e.bottom!==t&&(Bt(t,e),t.next=e.bottom,t.prev=null,e.bottom.prev=t,e.bottom=t)},i._insertafter=function(t,e,i){Bt(t,i),e==i.top&&(i.top=t),e.next&&(e.next.prev=t),t.next=e.next,t.prev=e,e.next=t},i._insertbefore=function(t,e,i){Bt(t,i),e==i.bottom&&(i.bottom=t),e.prev&&(e.prev.next=t),t.prev=e.prev,e.prev=t,t.next=e},i.toMatrix=function(t,e){var i=St(t),n={_:{transform:""},getBBox:function(){return i}};return Ot(n,e),n.matrix}),Ot=(i.transformPath=function(t,e){return pt(t,Rt(t,e))},i._extractTransform=function(t,e){if(null==e)return t._.transform;e=E(e).replace(/\.{3}|\u2026/g,t._.transform||"");var n=i.parseTransformString(e),r=0,o=0,s=0,a=1,l=1,h=t._,c=new u;if(h.transform=n||[],n)for(var d=0,p=n.length;d<p;d++){var f,g,m,v,y,b=n[d],w=b.length,x=E(b[0]).toLowerCase(),_=b[0]!=x,k=_?c.invert():0;"t"==x&&3==w?_?(f=k.x(0,0),g=k.y(0,0),m=k.x(b[1],b[2]),v=k.y(b[1],b[2]),c.translate(m-f,v-g)):c.translate(b[1],b[2]):"r"==x?2==w?(y=y||t.getBBox(1),c.rotate(b[1],y.x+y.width/2,y.y+y.height/2),r+=b[1]):4==w&&(_?(m=k.x(b[2],b[3]),v=k.y(b[2],b[3]),c.rotate(b[1],m,v)):c.rotate(b[1],b[2],b[3]),r+=b[1]):"s"==x?2==w||3==w?(y=y||t.getBBox(1),c.scale(b[1],b[w-1],y.x+y.width/2,y.y+y.height/2),a*=b[1],l*=b[w-1]):5==w&&(_?(m=k.x(b[3],b[4]),v=k.y(b[3],b[4]),c.scale(b[1],b[2],m,v)):c.scale(b[1],b[2],b[3],b[4]),a*=b[1],l*=b[2]):"m"==x&&7==w&&c.add(b[1],b[2],b[3],b[4],b[5],b[6]),h.dirtyT=1,t.matrix=c}t.matrix=c,h.sx=a,h.sy=l,h.deg=r,h.dx=o=c.e,h.dy=s=c.f,1==a&&1==l&&!r&&h.bbox?(h.bbox.x+=+o,h.bbox.y+=+s):h.dirtyT=1}),Nt=function(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return 4==t.length?[e,0,t[2],t[3]]:[e,0];case"s":return 5==t.length?[e,1,1,t[3],t[4]]:3==t.length?[e,1,1]:[e,1]}},Vt=i._equaliseTransform=function(t,e){e=E(e).replace(/\.{3}|\u2026/g,t),t=i.parseTransformString(t)||[],e=i.parseTransformString(e)||[];for(var n,r,o,s,a=O(t.length,e.length),l=[],h=[],c=0;c<a;c++){if(o=t[c]||Nt(e[c]),s=e[c]||Nt(o),o[0]!=s[0]||"r"==o[0].toLowerCase()&&(o[2]!=s[2]||o[3]!=s[3])||"s"==o[0].toLowerCase()&&(o[3]!=s[3]||o[4]!=s[4]))return;for(l[c]=[],h[c]=[],n=0,r=O(o.length,s.length);n<r;n++)n in o&&(l[c][n]=o[n]),n in s&&(h[c][n]=s[n])}return{from:l,to:h}};i._getContainer=function(t,e,n,r){var o;if(null!=(o=null!=r||i.is(t,"object")?t:C.doc.getElementById(t)))return o.tagName?null==e?{container:o,width:o.style.pixelWidth||o.offsetWidth,height:o.style.pixelHeight||o.offsetHeight}:{container:o,width:e,height:n}:{container:1,x:t,y:e,width:n,height:r}},i.pathToRelative=Pt,i._engine={},i.path2curve=It,i.matrix=function(t,e,i,n,r,o){return new u(t,e,i,n,r,o)},function(t){function e(t){return t[0]*t[0]+t[1]*t[1]}function n(t){var i=R.sqrt(e(t));t[0]&&(t[0]/=i),t[1]&&(t[1]/=i)}t.add=function(t,e,i,n,r,o){var s,a,l,h,c=[[],[],[]],d=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],p=[[t,i,r],[e,n,o],[0,0,1]];for(t&&t instanceof u&&(p=[[t.a,t.c,t.e],[t.b,t.d,t.f],[0,0,1]]),s=0;s<3;s++)for(a=0;a<3;a++){for(h=0,l=0;l<3;l++)h+=d[s][l]*p[l][a];c[s][a]=h}this.a=c[0][0],this.b=c[1][0],this.c=c[0][1],this.d=c[1][1],this.e=c[0][2],this.f=c[1][2]},t.invert=function(){var t=this,e=t.a*t.d-t.b*t.c;return new u(t.d/e,-t.b/e,-t.c/e,t.a/e,(t.c*t.f-t.d*t.e)/e,(t.b*t.e-t.a*t.f)/e)},t.clone=function(){return new u(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(t,e){this.add(1,0,0,1,t,e)},t.scale=function(t,e,i,n){null==e&&(e=t),(i||n)&&this.add(1,0,0,1,i,n),this.add(t,0,0,e,0,0),(i||n)&&this.add(1,0,0,1,-i,-n)},t.rotate=function(t,e,n){t=i.rad(t),e=e||0,n=n||0;var r=+R.cos(t).toFixed(9),o=+R.sin(t).toFixed(9);this.add(r,o,-o,r,e,n),this.add(1,0,0,1,-e,-n)},t.x=function(t,e){return t*this.a+e*this.c+this.e},t.y=function(t,e){return t*this.b+e*this.d+this.f},t.get=function(t){return+this[E.fromCharCode(97+t)].toFixed(4)},t.toString=function(){return i.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var r=[[this.a,this.c],[this.b,this.d]];t.scalex=R.sqrt(e(r[0])),n(r[0]),t.shear=r[0][0]*r[1][0]+r[0][1]*r[1][1],r[1]=[r[1][0]-r[0][0]*t.shear,r[1][1]-r[0][1]*t.shear],t.scaley=R.sqrt(e(r[1])),n(r[1]),t.shear/=t.scaley;var o=-r[0][1],s=r[1][1];return s<0?(t.rotate=i.deg(R.acos(s)),o<0&&(t.rotate=360-t.rotate)):t.rotate=i.deg(R.asin(o)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(t){var e=t||this[M]();return e.isSimple?(e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4),(e.dx||e.dy?"t"+[e.dx,e.dy]:"")+(1!=e.scalex||1!=e.scaley?"s"+[e.scalex,e.scaley,0,0]:"")+(e.rotate?"r"+[e.rotate,0,0]:"")):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(u.prototype);var Ft=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);"Apple Computer, Inc."==navigator.vendor&&(Ft&&Ft[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&Ft&&Ft[1]<8?b.safari=function(){var t=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){t.remove()})}:b.safari=function(){};for(var Ht=function(){this.returnValue=!1},Ut=function(){return this.originalEvent.preventDefault()},$t=function(){this.cancelBubble=!0},jt=function(){return this.originalEvent.stopPropagation()},Gt=function(t){var e=C.doc.documentElement.scrollTop||C.doc.body.scrollTop,i=C.doc.documentElement.scrollLeft||C.doc.body.scrollLeft;return{x:t.clientX+i,y:t.clientY+e}},Wt=C.doc.addEventListener?function(t,e,i,n){var r=function(t){var e=Gt(t);return i.call(n,t,e.x,e.y)};return t.addEventListener(e,r,!1),D&&I[e]&&t.addEventListener(I[e],function(e){for(var r=Gt(e),o=e,s=0,a=e.targetTouches&&e.targetTouches.length;s<a;s++)if(e.targetTouches[s].target==t){(e=e.targetTouches[s]).originalEvent=o,e.preventDefault=Ut,e.stopPropagation=jt;break}return i.call(n,e,r.x,r.y)},!1),function(){return t.removeEventListener(e,r,!1),D&&I[e]&&t.removeEventListener(I[e],r,!1),!0}}:C.doc.attachEvent?function(t,e,i,n){var r=function(t){t=t||C.win.event;var e=C.doc.documentElement.scrollTop||C.doc.body.scrollTop,r=C.doc.documentElement.scrollLeft||C.doc.body.scrollLeft,o=t.clientX+r,s=t.clientY+e;return t.preventDefault=t.preventDefault||Ht,t.stopPropagation=t.stopPropagation||$t,i.call(n,t,o,s)};return t.attachEvent("on"+e,r),function(){return t.detachEvent("on"+e,r),!0}}:void 0,qt=[],Yt=function(t){for(var i,n=t.clientX,r=t.clientY,o=C.doc.documentElement.scrollTop||C.doc.body.scrollTop,s=C.doc.documentElement.scrollLeft||C.doc.body.scrollLeft,a=qt.length;a--;){if(i=qt[a],D&&t.touches){for(var l,h=t.touches.length;h--;)if((l=t.touches[h]).identifier==i.el._drag.id){n=l.clientX,r=l.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var c,d=i.el.node,u=d.nextSibling,p=d.parentNode,f=d.style.display;C.win.opera&&p.removeChild(d),d.style.display="none",c=i.el.paper.getElementByPoint(n,r),d.style.display=f,C.win.opera&&(u?p.insertBefore(d,u):p.appendChild(d)),c&&e("raphael.drag.over."+i.el.id,i.el,c),n+=s,r+=o,e("raphael.drag.move."+i.el.id,i.move_scope||i.el,n-i.el._drag.x,r-i.el._drag.y,n,r,t)}},Qt=function(t){i.unmousemove(Yt).unmouseup(Qt);for(var n,r=qt.length;r--;)(n=qt[r]).el._drag={},e("raphael.drag.end."+n.el.id,n.end_scope||n.start_scope||n.move_scope||n.el,t);qt=[]},Xt=i.el={},Zt=L.length;Zt--;)!function(t){i[t]=Xt[t]=function(e,n){return i.is(e,"function")&&(this.events=this.events||[],this.events.push({name:t,f:e,unbind:Wt(this.shape||this.node||C.doc,t,e,n||this)})),this},i["un"+t]=Xt["un"+t]=function(e){for(var n=this.events||[],r=n.length;r--;)n[r].name!=t||!i.is(e,"undefined")&&n[r].f!=e||(n[r].unbind(),n.splice(r,1),!n.length&&delete this.events);return this}}(L[Zt]);Xt.data=function(t,n){var r=at[this.id]=at[this.id]||{};if(0==arguments.length)return r;if(1==arguments.length){if(i.is(t,"object")){for(var o in t)t[k](o)&&this.data(o,t[o]);return this}return e("raphael.data.get."+this.id,this,r[t],t),r[t]}return r[t]=n,e("raphael.data.set."+this.id,this,n,t),this},Xt.removeData=function(t){return null==t?at[this.id]={}:at[this.id]&&delete at[this.id][t],this},Xt.getData=function(){return n(at[this.id]||{})},Xt.hover=function(t,e,i,n){return this.mouseover(t,i).mouseout(e,n||i)},Xt.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var Kt=[];Xt.drag=function(t,n,r,o,s,a){function l(l){(l.originalEvent||l).preventDefault();var h=l.clientX,c=l.clientY,d=C.doc.documentElement.scrollTop||C.doc.body.scrollTop,u=C.doc.documentElement.scrollLeft||C.doc.body.scrollLeft;if(this._drag.id=l.identifier,D&&l.touches)for(var p,f=l.touches.length;f--;)if(p=l.touches[f],this._drag.id=p.identifier,p.identifier==this._drag.id){h=p.clientX,c=p.clientY;break}this._drag.x=h+u,this._drag.y=c+d,!qt.length&&i.mousemove(Yt).mouseup(Qt),qt.push({el:this,move_scope:o,start_scope:s,end_scope:a}),n&&e.on("raphael.drag.start."+this.id,n),t&&e.on("raphael.drag.move."+this.id,t),r&&e.on("raphael.drag.end."+this.id,r),e("raphael.drag.start."+this.id,s||o||this,l.clientX+u,l.clientY+d,l)}return this._drag={},Kt.push({el:this,start:l}),this.mousedown(l),this},Xt.onDragOver=function(t){t?e.on("raphael.drag.over."+this.id,t):e.unbind("raphael.drag.over."+this.id)},Xt.undrag=function(){for(var t=Kt.length;t--;)Kt[t].el==this&&(this.unmousedown(Kt[t].start),Kt.splice(t,1),e.unbind("raphael.drag.*."+this.id));!Kt.length&&i.unmousemove(Yt).unmouseup(Qt),qt=[]},b.circle=function(t,e,n){var r=i._engine.circle(this,t||0,e||0,n||0);return this.__set__&&this.__set__.push(r),r},b.rect=function(t,e,n,r,o){var s=i._engine.rect(this,t||0,e||0,n||0,r||0,o||0);return this.__set__&&this.__set__.push(s),s},b.ellipse=function(t,e,n,r){var o=i._engine.ellipse(this,t||0,e||0,n||0,r||0);return this.__set__&&this.__set__.push(o),o},b.path=function(t){t&&!i.is(t,$)&&!i.is(t[0],j)&&(t+="");var e=i._engine.path(i.format[P](i,arguments),this);return this.__set__&&this.__set__.push(e),e},b.image=function(t,e,n,r,o){var s=i._engine.image(this,t||"about:blank",e||0,n||0,r||0,o||0);return this.__set__&&this.__set__.push(s),s},b.text=function(t,e,n){var r=i._engine.text(this,t||0,e||0,E(n));return this.__set__&&this.__set__.push(r),r},b.set=function(t){!i.is(t,"array")&&(t=Array.prototype.splice.call(arguments,0,arguments.length));var e=new he(t);return this.__set__&&this.__set__.push(e),e.paper=this,e.type="set",e},b.setStart=function(t){this.__set__=t||this.set()},b.setFinish=function(t){var e=this.__set__;return delete this.__set__,e},b.setSize=function(t,e){return i._engine.setSize.call(this,t,e)},b.setViewBox=function(t,e,n,r,o){return i._engine.setViewBox.call(this,t,e,n,r,o)},b.top=b.bottom=null,b.raphael=i;b.getElementByPoint=function(t,e){var i,n,r,o,s,a,l,h,c,d=this.canvas,u=C.doc.elementFromPoint(t,e);if(C.win.opera&&"svg"==u.tagName){var p=(n=(i=d).getBoundingClientRect(),r=i.ownerDocument,o=r.body,s=r.documentElement,a=s.clientTop||o.clientTop||0,l=s.clientLeft||o.clientLeft||0,h=n.top+(C.win.pageYOffset||s.scrollTop||o.scrollTop)-a,c=n.left+(C.win.pageXOffset||s.scrollLeft||o.scrollLeft)-l,{y:h,x:c}),f=d.createSVGRect();f.x=t-p.x,f.y=e-p.y,f.width=f.height=1;var g=d.getIntersectionList(f,null);g.length&&(u=g[g.length-1])}if(!u)return null;for(;u.parentNode&&u!=d.parentNode&&!u.raphael;)u=u.parentNode;return u==this.canvas.parentNode&&(u=d),u=u&&u.raphael?this.getById(u.raphaelid):null},b.getElementsByBBox=function(t){var e=this.set();return this.forEach(function(n){i.isBBoxIntersect(n.getBBox(),t)&&e.push(n)}),e},b.getById=function(t){for(var e=this.bottom;e;){if(e.id==t)return e;e=e.next}return null},b.forEach=function(t,e){for(var i=this.bottom;i;){if(!1===t.call(e,i))return this;i=i.next}return this},b.getElementsByPoint=function(t,e){var i=this.set();return this.forEach(function(n){n.isPointInside(t,e)&&i.push(n)}),i},Xt.isPointInside=function(t,e){var n=this.realPath=ut[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(n=i.transformPath(n,this.attr("transform"))),i.isPointInsidePath(n,t,e)},Xt.getBBox=function(t){if(this.removed)return{};var e=this._;return t?(!e.dirty&&e.bboxwt||(this.realPath=ut[this.type](this),e.bboxwt=St(this.realPath),e.bboxwt.toString=p,e.dirty=0),e.bboxwt):((e.dirty||e.dirtyT||!e.bbox)&&(!e.dirty&&this.realPath||(e.bboxwt=0,this.realPath=ut[this.type](this)),e.bbox=St(pt(this.realPath,this.matrix)),e.bbox.toString=p,e.dirty=e.dirtyT=0),e.bbox)},Xt.clone=function(){if(this.removed)return null;var t=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(t),t},Xt.glow=function(t){if("text"==this.type)return null;var e={width:((t=t||{}).width||10)+(+this.attr("stroke-width")||1),fill:t.fill||!1,opacity:t.opacity||.5,offsetx:t.offsetx||0,offsety:t.offsety||0,color:t.color||"#000"},i=e.width/2,n=this.paper,r=n.set(),o=this.realPath||ut[this.type](this);o=this.matrix?pt(o,this.matrix):o;for(var s=1;s<i+1;s++)r.push(n.path(o).attr({stroke:e.color,fill:e.fill?e.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(e.width/i*s).toFixed(3),opacity:+(e.opacity/i).toFixed(3)}));return r.insertBefore(this).translate(e.offsetx,e.offsety)};var Jt=function(t,e,n,r,o,s,a,h,c){return null==c?l(t,e,n,r,o,s,a,h):i.findDotsAtSegment(t,e,n,r,o,s,a,h,function(t,e,i,n,r,o,s,a,h){if(h<0||l(t,e,i,n,r,o,s,a)<h)return;var c,d=.5,u=1-d;c=l(t,e,i,n,r,o,s,a,u);for(;V(c-h)>.01;)c=l(t,e,i,n,r,o,s,a,u+=(c<h?1:-1)*(d/=2));return u}(t,e,n,r,o,s,a,h,c))},te=function(t,e){return function(n,r,o){n=It(n);for(var s,a,l,h,c,d="",u={},p=0,f=0,g=n.length;f<g;f++){if("M"==(l=n[f])[0])s=+l[1],a=+l[2];else{if(h=Jt(s,a,l[1],l[2],l[3],l[4],l[5],l[6]),p+h>r){if(e&&!u.start){if(c=Jt(s,a,l[1],l[2],l[3],l[4],l[5],l[6],r-p),d+=["C"+c.start.x,c.start.y,c.m.x,c.m.y,c.x,c.y],o)return d;u.start=d,d=["M"+c.x,c.y+"C"+c.n.x,c.n.y,c.end.x,c.end.y,l[5],l[6]].join(),p+=h,s=+l[5],a=+l[6];continue}if(!t&&!e)return{x:(c=Jt(s,a,l[1],l[2],l[3],l[4],l[5],l[6],r-p)).x,y:c.y,alpha:c.alpha}}p+=h,s=+l[5],a=+l[6]}d+=l.shift()+l}return u.end=d,(c=t?p:e?u:i.findDotsAtSegment(s,a,l[0],l[1],l[2],l[3],l[4],l[5],1)).alpha&&(c={x:c.x,y:c.y,alpha:c.alpha}),c}},ee=te(1),ie=te(),ne=te(0,1);i.getTotalLength=ee,i.getPointAtLength=ie,i.getSubpath=function(t,e,i){if(this.getTotalLength(t)-i<1e-6)return ne(t,e).end;var n=ne(t,i,1);return e?ne(n,e).end:n},Xt.getTotalLength=function(){var t=this.getPath();if(t)return this.node.getTotalLength?this.node.getTotalLength():ee(t)},Xt.getPointAtLength=function(t){var e=this.getPath();if(e)return ie(e,t)},Xt.getPath=function(){var t,e=i._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return e&&(t=e(this)),t},Xt.getSubpath=function(t,e){var n=this.getPath();if(n)return i.getSubpath(n,t,e)};var re=i.easing_formulas={linear:function(t){return t},"<":function(t){return F(t,1.7)},">":function(t){return F(t,.48)},"<>":function(t){var e=.48-t/1.04,i=R.sqrt(.1734+e*e),n=i-e,r=F(V(n),1/3)*(n<0?-1:1),o=-i-e,s=F(V(o),1/3)*(o<0?-1:1),a=r+s+.5;return 3*(1-a)*a*a+a*a*a},backIn:function(t){return t*t*(2.70158*t-1.70158)},backOut:function(t){return(t-=1)*t*(2.70158*t+1.70158)+1},elastic:function(t){return t==!!t?t:F(2,-10*t)*R.sin(2*(t-.075)*H/.3)+1},bounce:function(t){var e=7.5625,i=2.75;return t<1/i?e*t*t:t<2/i?e*(t-=1.5/i)*t+.75:t<2.5/i?e*(t-=2.25/i)*t+.9375:e*(t-=2.625/i)*t+.984375}};re.easeIn=re["ease-in"]=re["<"],re.easeOut=re["ease-out"]=re[">"],re.easeInOut=re["ease-in-out"]=re["<>"],re["back-in"]=re.backIn,re["back-out"]=re.backOut;var oe=[],se=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(t){setTimeout(t,16)},ae=function(){for(var t=+new Date,n=0;n<oe.length;n++){var r=oe[n];if(!r.el.removed&&!r.paused){var o,s,a=t-r.start,l=r.ms,h=r.easing,c=r.from,d=r.diff,u=r.to,p=(r.t,r.el),f={},g={};if(r.initstatus?(a=(r.initstatus*r.anim.top-r.prev)/(r.percent-r.prev)*l,r.status=r.initstatus,delete r.initstatus,r.stop&&oe.splice(n--,1)):r.status=(r.prev+(r.percent-r.prev)*(a/l))/r.anim.top,!(a<0))if(a<l){var v=h(a/l);for(var y in c)if(c[k](y)){switch(tt[y]){case U:o=+c[y]+v*l*d[y];break;case"colour":o="rgb("+[le(Q(c[y].r+v*l*d[y].r)),le(Q(c[y].g+v*l*d[y].g)),le(Q(c[y].b+v*l*d[y].b))].join(",")+")";break;case"path":o=[];for(var b=0,w=c[y].length;b<w;b++){o[b]=[c[y][b][0]];for(var x=1,_=c[y][b].length;x<_;x++)o[b][x]=+c[y][b][x]+v*l*d[y][b][x];o[b]=o[b].join(z)}o=o.join(z);break;case"transform":if(d[y].real)for(o=[],b=0,w=c[y].length;b<w;b++)for(o[b]=[c[y][b][0]],x=1,_=c[y][b].length;x<_;x++)o[b][x]=c[y][b][x]+v*l*d[y][b][x];else{var C=function(t){return+c[y][t]+v*l*d[y][t]};o=[["m",C(0),C(1),C(2),C(3),C(4),C(5)]]}break;case"csv":if("clip-rect"==y)for(o=[],b=4;b--;)o[b]=+c[y][b]+v*l*d[y][b];break;default:var S=[][A](c[y]);for(o=[],b=p.paper.customAttributes[y].length;b--;)o[b]=+S[b]+v*l*d[y][b]}f[y]=o}p.attr(f),function(t,i,n){setTimeout(function(){e("raphael.anim.frame."+t,i,n)})}(p.id,p,r.anim)}else{if(function(t,n,r){setTimeout(function(){e("raphael.anim.frame."+n.id,n,r),e("raphael.anim.finish."+n.id,n,r),i.is(t,"function")&&t.call(n)})}(r.callback,p,r.anim),p.attr(u),oe.splice(n--,1),r.repeat>1&&!r.next){for(s in u)u[k](s)&&(g[s]=r.totalOrigin[s]);r.el.attr(g),m(r.anim,r.el,r.anim.percents[0],null,r.totalOrigin,r.repeat-1)}r.next&&!r.stop&&m(r.anim,r.el,r.next,null,r.totalOrigin,r.repeat)}}}i.svg&&p&&p.paper&&p.paper.safari(),oe.length&&se(ae)},le=function(t){return t>255?255:t<0?0:t};Xt.animateWith=function(t,e,n,r,o,s){var a=this;if(a.removed)return s&&s.call(a),a;var l=n instanceof g?n:i.animation(n,r,o,s);m(l,a,l.percents[0],null,a.attr());for(var h=0,c=oe.length;h<c;h++)if(oe[h].anim==e&&oe[h].el==t){oe[c-1].start=oe[h].start;break}return a},Xt.onAnimation=function(t){return t?e.on("raphael.anim.frame."+this.id,t):e.unbind("raphael.anim.frame."+this.id),this},g.prototype.delay=function(t){var e=new g(this.anim,this.ms);return e.times=this.times,e.del=+t||0,e},g.prototype.repeat=function(t){var e=new g(this.anim,this.ms);return e.del=this.del,e.times=R.floor(O(t,0))||1,e},i.animation=function(t,e,n,r){if(t instanceof g)return t;!i.is(n,"function")&&n||(r=r||n||null,n=null),t=Object(t),e=+e||0;var o,s,a={};for(s in t)t[k](s)&&X(s)!=s&&X(s)+"%"!=s&&(o=!0,a[s]=t[s]);return o?(n&&(a.easing=n),r&&(a.callback=r),new g({100:a},e)):new g(t,e)},Xt.animate=function(t,e,n,r){var o=this;if(o.removed)return r&&r.call(o),o;var s=t instanceof g?t:i.animation(t,e,n,r);return m(s,o,s.percents[0],null,o.attr()),o},Xt.setTime=function(t,e){return t&&null!=e&&this.status(t,N(e,t.ms)/t.ms),this},Xt.status=function(t,e){var i,n,r=[],o=0;if(null!=e)return m(t,this,-1,N(e,1)),this;for(i=oe.length;o<i;o++)if((n=oe[o]).el.id==this.id&&(!t||n.anim==t)){if(t)return n.status;r.push({anim:n.anim,status:n.status})}return t?0:r},Xt.pause=function(t){for(var i=0;i<oe.length;i++)oe[i].el.id!=this.id||t&&oe[i].anim!=t||!1!==e("raphael.anim.pause."+this.id,this,oe[i].anim)&&(oe[i].paused=!0);return this},Xt.resume=function(t){for(var i=0;i<oe.length;i++)if(oe[i].el.id==this.id&&(!t||oe[i].anim==t)){var n=oe[i];!1!==e("raphael.anim.resume."+this.id,this,n.anim)&&(delete n.paused,this.status(n.anim,n.status))}return this},Xt.stop=function(t){for(var i=0;i<oe.length;i++)oe[i].el.id!=this.id||t&&oe[i].anim!=t||!1!==e("raphael.anim.stop."+this.id,this,oe[i].anim)&&oe.splice(i--,1);return this},e.on("raphael.remove",v),e.on("raphael.clear",v),Xt.toString=function(){return"Raphaël’s object"};var he=function(t){if(this.items=[],this.length=0,this.type="set",t)for(var e=0,i=t.length;e<i;e++)!t[e]||t[e].constructor!=Xt.constructor&&t[e].constructor!=he||(this[this.items.length]=this.items[this.items.length]=t[e],this.length++)},ce=he.prototype;for(var de in ce.push=function(){for(var t,e,i=0,n=arguments.length;i<n;i++)!(t=arguments[i])||t.constructor!=Xt.constructor&&t.constructor!=he||(this[e=this.items.length]=this.items[e]=t,this.length++);return this},ce.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},ce.forEach=function(t,e){for(var i=0,n=this.items.length;i<n;i++)if(!1===t.call(e,this.items[i],i))return this;return this},Xt)Xt[k](de)&&(ce[de]=function(t){return function(){var e=arguments;return this.forEach(function(i){i[t][P](i,e)})}}(de));return ce.attr=function(t,e){if(t&&i.is(t,j)&&i.is(t[0],"object"))for(var n=0,r=t.length;n<r;n++)this.items[n].attr(t[n]);else for(var o=0,s=this.items.length;o<s;o++)this.items[o].attr(t,e);return this},ce.clear=function(){for(;this.length;)this.pop()},ce.splice=function(t,e,i){t=t<0?O(this.length+t,0):t,e=O(0,N(this.length-t,e));var n,r=[],o=[],s=[];for(n=2;n<arguments.length;n++)s.push(arguments[n]);for(n=0;n<e;n++)o.push(this[t+n]);for(;n<this.length-t;n++)r.push(this[t+n]);var a=s.length;for(n=0;n<a+r.length;n++)this.items[t+n]=this[t+n]=n<a?s[n]:r[n-a];for(n=this.items.length=this.length-=e-a;this[n];)delete this[n++];return new he(o)},ce.exclude=function(t){for(var e=0,i=this.length;e<i;e++)if(this[e]==t)return this.splice(e,1),!0},ce.animate=function(t,e,n,r){(i.is(n,"function")||!n)&&(r=n||null);var o,s,a=this.items.length,l=a,h=this;if(!a)return this;r&&(s=function(){!--a&&r.call(h)}),n=i.is(n,$)?n:s;var c=i.animation(t,e,n,s);for(o=this.items[--l].animate(c);l--;)this.items[l]&&!this.items[l].removed&&this.items[l].animateWith(o,c,c),this.items[l]&&!this.items[l].removed||a--;return this},ce.insertAfter=function(t){for(var e=this.items.length;e--;)this.items[e].insertAfter(t);return this},ce.getBBox=function(){for(var t=[],e=[],i=[],n=[],r=this.items.length;r--;)if(!this.items[r].removed){var o=this.items[r].getBBox();t.push(o.x),e.push(o.y),i.push(o.x+o.width),n.push(o.y+o.height)}return{x:t=N[P](0,t),y:e=N[P](0,e),x2:i=O[P](0,i),y2:n=O[P](0,n),width:i-t,height:n-e}},ce.clone=function(t){t=this.paper.set();for(var e=0,i=this.items.length;e<i;e++)t.push(this.items[e].clone());return t},ce.toString=function(){return"Raphaël‘s set"},ce.glow=function(t){var e=this.paper.set();return this.forEach(function(i,n){var r=i.glow(t);null!=r&&r.forEach(function(t,i){e.push(t)})}),e},ce.isPointInside=function(t,e){var i=!1;return this.forEach(function(n){if(n.isPointInside(t,e))return i=!0,!1}),i},i.registerFont=function(t){if(!t.face)return t;this.fonts=this.fonts||{};var e={w:t.w,face:{},glyphs:{}},i=t.face["font-family"];for(var n in t.face)t.face[k](n)&&(e.face[n]=t.face[n]);if(this.fonts[i]?this.fonts[i].push(e):this.fonts[i]=[e],!t.svg)for(var r in e.face["units-per-em"]=Z(t.face["units-per-em"],10),t.glyphs)if(t.glyphs[k](r)){var o=t.glyphs[r];if(e.glyphs[r]={w:o.w,k:{},d:o.d&&"M"+o.d.replace(/[mlcxtrv]/g,function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"})+"z"},o.k)for(var s in o.k)o[k](s)&&(e.glyphs[r].k[s]=o.k[s])}return t},b.getFont=function(t,e,n,r){if(r=r||"normal",n=n||"normal",e=+e||{normal:400,bold:700,lighter:300,bolder:800}[e]||400,i.fonts){var o,s=i.fonts[t];if(!s){var a=new RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,"")+"(\\s|$)","i");for(var l in i.fonts)if(i.fonts[k](l)&&a.test(l)){s=i.fonts[l];break}}if(s)for(var h=0,c=s.length;h<c&&((o=s[h]).face["font-weight"]!=e||o.face["font-style"]!=n&&o.face["font-style"]||o.face["font-stretch"]!=r);h++);return o}},b.print=function(t,e,n,r,o,s,a,l){s=s||"middle",a=O(N(a||0,1),-1),l=O(N(l||1,3),1);var h,c=E(n)[M](""),d=0,u=0,p="";if(i.is(r,"string")&&(r=this.getFont(r)),r){h=(o||16)/r.face["units-per-em"];for(var f=r.face.bbox[M](w),g=+f[0],m=f[3]-f[1],v=0,y=+f[1]+("baseline"==s?m+ +r.face.descent:m/2),b=0,x=c.length;b<x;b++){if("\n"==c[b])d=0,k=0,u=0,v+=m*l;else{var _=u&&r.glyphs[c[b-1]]||{},k=r.glyphs[c[b]];d+=u?(_.w||r.w)+(_.k&&_.k[c[b]]||0)+r.w*a:0,u=1}k&&k.d&&(p+=i.transformPath(k.d,["t",d*h,v*h,"s",h,h,g,y,"t",(t-g)/h,(e-y)/h]))}}return this.path(p).attr({fill:"#000",stroke:"none"})},b.add=function(t){if(i.is(t,"array"))for(var e,n=this.set(),r=0,o=t.length;r<o;r++)e=t[r]||{},x[k](e.type)&&n.push(this[e.type]().attr(e));return n},i.format=function(t,e){var n=i.is(e,j)?[0][A](e):arguments;return t&&i.is(t,$)&&n.length-1&&(t=t.replace(_,function(t,e){return null==n[++e]?"":n[e]})),t||""},i.fullfill=(ge=/\{([^\}]+)\}/g,me=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(t,e){return String(t).replace(ge,function(t,i){return n=t,o=r=e,i.replace(me,function(t,e,i,n,r){e=e||n,o&&(e in o&&(o=o[e]),"function"==typeof o&&r&&(o=o()))}),o=(null==o||o==r?n:o)+"";var n,r,o})}),i.ninja=function(){return S.was?C.win.Raphael=S.is:delete Raphael,i},i.st=ce,ue=document,pe="DOMContentLoaded",null==ue.readyState&&ue.addEventListener&&(ue.addEventListener(pe,fe=function(){ue.removeEventListener(pe,fe,!1),ue.readyState="complete"},!1),ue.readyState="loading"),function t(){/in/.test(ue.readyState)?setTimeout(t,9):i.eve("raphael.DOMload")}(),e.on("raphael.DOMload",function(){y=!0}),function(){if(i.svg){var t="hasOwnProperty",e=String,n=parseFloat,r=parseInt,o=Math,s=o.max,a=o.abs,l=o.pow,h=/[, ]+/,c=i.eve,d="http://www.w3.org/1999/xlink",u={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},p={};i.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var f=function(n,r){if(r)for(var o in"string"==typeof n&&(n=f(n)),r)r[t](o)&&("xlink:"==o.substring(0,6)?n.setAttributeNS(d,o.substring(6),e(r[o])):n.setAttribute(o,e(r[o])));else(n=i._g.doc.createElementNS("http://www.w3.org/2000/svg",n)).style&&(n.style.webkitTapHighlightColor="rgba(0,0,0,0)");return n},g=function(t,r){var h="linear",c=t.id+r,d=.5,u=.5,p=t.node,g=t.paper,m=p.style,v=i._g.doc.getElementById(c);if(!v){if(r=(r=e(r).replace(i._radial_gradient,function(t,e,i){if(h="radial",e&&i){d=n(e);var r=2*((u=n(i))>.5)-1;l(d-.5,2)+l(u-.5,2)>.25&&(u=o.sqrt(.25-l(d-.5,2))*r+.5)&&.5!=u&&(u=u.toFixed(5)-1e-5*r)}return""})).split(/\s*\-\s*/),"linear"==h){var y=r.shift();if(y=-n(y),isNaN(y))return null;var b=[0,0,o.cos(i.rad(y)),o.sin(i.rad(y))],w=1/(s(a(b[2]),a(b[3]))||1);b[2]*=w,b[3]*=w,b[2]<0&&(b[0]=-b[2],b[2]=0),b[3]<0&&(b[1]=-b[3],b[3]=0)}var x=i._parseDots(r);if(!x)return null;if(c=c.replace(/[\(\)\s,\xb0#]/g,"_"),t.gradient&&c!=t.gradient.id&&(g.defs.removeChild(t.gradient),delete t.gradient),!t.gradient){v=f(h+"Gradient",{id:c}),t.gradient=v,f(v,"radial"==h?{fx:d,fy:u}:{x1:b[0],y1:b[1],x2:b[2],y2:b[3],gradientTransform:t.matrix.invert()}),g.defs.appendChild(v);for(var _=0,k=x.length;_<k;_++)v.appendChild(f("stop",{offset:x[_].offset?x[_].offset:_?"100%":"0%","stop-color":x[_].color||"#fff"}))}}return f(p,{fill:"url(#"+c+")",opacity:1,"fill-opacity":1}),m.fill="",m.opacity=1,m.fillOpacity=1,1},m=function(t){var e=t.getBBox(1);f(t.pattern,{patternTransform:t.matrix.invert()+" translate("+e.x+","+e.y+")"})},v=function(n,r,o){if("path"==n.type){for(var s,a,l,h,c,d=e(r).toLowerCase().split("-"),g=n.paper,m=o?"end":"start",v=n.node,y=n.attrs,b=y["stroke-width"],w=d.length,x="classic",_=3,k=3,C=5;w--;)switch(d[w]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":x=d[w];break;case"wide":k=5;break;case"narrow":k=2;break;case"long":_=5;break;case"short":_=2}if("open"==x?(_+=2,k+=2,C+=2,l=1,h=o?4:1,c={fill:"none",stroke:y.stroke}):(h=l=_/2,c={fill:y.stroke,stroke:"none"}),n._.arrows?o?(n._.arrows.endPath&&p[n._.arrows.endPath]--,n._.arrows.endMarker&&p[n._.arrows.endMarker]--):(n._.arrows.startPath&&p[n._.arrows.startPath]--,n._.arrows.startMarker&&p[n._.arrows.startMarker]--):n._.arrows={},"none"!=x){var S="raphael-marker-"+x,T="raphael-marker-"+m+x+_+k;i._g.doc.getElementById(S)?p[S]++:(g.defs.appendChild(f(f("path"),{"stroke-linecap":"round",d:u[x],id:S})),p[S]=1);var P,A=i._g.doc.getElementById(T);A?(p[T]++,P=A.getElementsByTagName("use")[0]):(A=f(f("marker"),{id:T,markerHeight:k,markerWidth:_,orient:"auto",refX:h,refY:k/2}),P=f(f("use"),{"xlink:href":"#"+S,transform:(o?"rotate(180 "+_/2+" "+k/2+") ":"")+"scale("+_/C+","+k/C+")","stroke-width":(1/((_/C+k/C)/2)).toFixed(4)}),A.appendChild(P),g.defs.appendChild(A),p[T]=1),f(P,c);var D=l*("diamond"!=x&&"oval"!=x);o?(s=n._.arrows.startdx*b||0,a=i.getTotalLength(y.path)-D*b):(s=D*b,a=i.getTotalLength(y.path)-(n._.arrows.enddx*b||0)),(c={})["marker-"+m]="url(#"+T+")",(a||s)&&(c.d=i.getSubpath(y.path,s,a)),f(v,c),n._.arrows[m+"Path"]=S,n._.arrows[m+"Marker"]=T,n._.arrows[m+"dx"]=D,n._.arrows[m+"Type"]=x,n._.arrows[m+"String"]=r}else o?(s=n._.arrows.startdx*b||0,a=i.getTotalLength(y.path)-s):(s=0,a=i.getTotalLength(y.path)-(n._.arrows.enddx*b||0)),n._.arrows[m+"Path"]&&f(v,{d:i.getSubpath(y.path,s,a)}),delete n._.arrows[m+"Path"],delete n._.arrows[m+"Marker"],delete n._.arrows[m+"dx"],delete n._.arrows[m+"Type"],delete n._.arrows[m+"String"];for(c in p)if(p[t](c)&&!p[c]){var z=i._g.doc.getElementById(c);z&&z.parentNode.removeChild(z)}}},y={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},b=function(t,i,n){if(i=y[e(i).toLowerCase()]){for(var r=t.attrs["stroke-width"]||"1",o={round:r,square:r,butt:0}[t.attrs["stroke-linecap"]||n["stroke-linecap"]]||0,s=[],a=i.length;a--;)s[a]=i[a]*r+(a%2?1:-1)*o;f(t.node,{"stroke-dasharray":s.join(",")})}},w=function(n,o){var l=n.node,c=n.attrs,u=l.style.visibility;for(var p in l.style.visibility="hidden",o)if(o[t](p)){if(!i._availableAttrs[t](p))continue;var y=o[p];switch(c[p]=y,p){case"blur":n.blur(y);break;case"title":var w=l.getElementsByTagName("title");if(w.length&&(w=w[0]))w.firstChild.nodeValue=y;else{w=f("title");var _=i._g.doc.createTextNode(y);w.appendChild(_),l.appendChild(w)}break;case"href":case"target":var k=l.parentNode;if("a"!=k.tagName.toLowerCase()){var C=f("a");k.insertBefore(C,l),C.appendChild(l),k=C}"target"==p?k.setAttributeNS(d,"show","blank"==y?"new":y):k.setAttributeNS(d,p,y);break;case"cursor":l.style.cursor=y;break;case"transform":n.transform(y);break;case"arrow-start":v(n,y);break;case"arrow-end":v(n,y,1);break;case"clip-rect":var S=e(y).split(h);if(4==S.length){n.clip&&n.clip.parentNode.parentNode.removeChild(n.clip.parentNode);var T=f("clipPath"),P=f("rect");T.id=i.createUUID(),f(P,{x:S[0],y:S[1],width:S[2],height:S[3]}),T.appendChild(P),n.paper.defs.appendChild(T),f(l,{"clip-path":"url(#"+T.id+")"}),n.clip=P}if(!y){var A=l.getAttribute("clip-path");if(A){var D=i._g.doc.getElementById(A.replace(/(^url\(#|\)$)/g,""));D&&D.parentNode.removeChild(D),f(l,{"clip-path":""}),delete n.clip}}break;case"path":"path"==n.type&&(f(l,{d:y?c.path=i._pathToAbsolute(y):"M0,0"}),n._.dirty=1,n._.arrows&&("startString"in n._.arrows&&v(n,n._.arrows.startString),"endString"in n._.arrows&&v(n,n._.arrows.endString,1)));break;case"width":if(l.setAttribute(p,y),n._.dirty=1,!c.fx)break;p="x",y=c.x;case"x":c.fx&&(y=-c.x-(c.width||0));case"rx":if("rx"==p&&"rect"==n.type)break;case"cx":l.setAttribute(p,y),n.pattern&&m(n),n._.dirty=1;break;case"height":if(l.setAttribute(p,y),n._.dirty=1,!c.fy)break;p="y",y=c.y;case"y":c.fy&&(y=-c.y-(c.height||0));case"ry":if("ry"==p&&"rect"==n.type)break;case"cy":l.setAttribute(p,y),n.pattern&&m(n),n._.dirty=1;break;case"r":"rect"==n.type?f(l,{rx:y,ry:y}):l.setAttribute(p,y),n._.dirty=1;break;case"src":"image"==n.type&&l.setAttributeNS(d,"href",y);break;case"stroke-width":1==n._.sx&&1==n._.sy||(y/=s(a(n._.sx),a(n._.sy))||1),n.paper._vbSize&&(y*=n.paper._vbSize),l.setAttribute(p,y),c["stroke-dasharray"]&&b(n,c["stroke-dasharray"],o),n._.arrows&&("startString"in n._.arrows&&v(n,n._.arrows.startString),"endString"in n._.arrows&&v(n,n._.arrows.endString,1));break;case"stroke-dasharray":b(n,y,o);break;case"fill":var z=e(y).match(i._ISURL);if(z){T=f("pattern");var E=f("image");T.id=i.createUUID(),f(T,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),f(E,{x:0,y:0,"xlink:href":z[1]}),T.appendChild(E),function(t){i._preload(z[1],function(){var e=this.offsetWidth,i=this.offsetHeight;f(t,{width:e,height:i}),f(E,{width:e,height:i}),n.paper.safari()})}(T),n.paper.defs.appendChild(T),f(l,{fill:"url(#"+T.id+")"}),n.pattern=T,n.pattern&&m(n);break}var M=i.getRGB(y);if(M.error){if(("circle"==n.type||"ellipse"==n.type||"r"!=e(y).charAt())&&g(n,y)){if("opacity"in c||"fill-opacity"in c){var L=i._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,""));if(L){var I=L.getElementsByTagName("stop");f(I[I.length-1],{"stop-opacity":("opacity"in c?c.opacity:1)*("fill-opacity"in c?c["fill-opacity"]:1)})}}c.gradient=y,c.fill="none";break}}else delete o.gradient,delete c.gradient,!i.is(c.opacity,"undefined")&&i.is(o.opacity,"undefined")&&f(l,{opacity:c.opacity}),!i.is(c["fill-opacity"],"undefined")&&i.is(o["fill-opacity"],"undefined")&&f(l,{"fill-opacity":c["fill-opacity"]});M[t]("opacity")&&f(l,{"fill-opacity":M.opacity>1?M.opacity/100:M.opacity});case"stroke":M=i.getRGB(y),l.setAttribute(p,M.hex),"stroke"==p&&M[t]("opacity")&&f(l,{"stroke-opacity":M.opacity>1?M.opacity/100:M.opacity}),"stroke"==p&&n._.arrows&&("startString"in n._.arrows&&v(n,n._.arrows.startString),"endString"in n._.arrows&&v(n,n._.arrows.endString,1));break;case"gradient":("circle"==n.type||"ellipse"==n.type||"r"!=e(y).charAt())&&g(n,y);break;case"opacity":c.gradient&&!c[t]("stroke-opacity")&&f(l,{"stroke-opacity":y>1?y/100:y});case"fill-opacity":if(c.gradient){(L=i._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,"")))&&(I=L.getElementsByTagName("stop"),f(I[I.length-1],{"stop-opacity":y}));break}default:"font-size"==p&&(y=r(y,10)+"px");var B=p.replace(/(\-.)/g,function(t){return t.substring(1).toUpperCase()});l.style[B]=y,n._.dirty=1,l.setAttribute(p,y)}}x(n,o),l.style.visibility=u},x=function(n,o){if("text"==n.type&&(o[t]("text")||o[t]("font")||o[t]("font-size")||o[t]("x")||o[t]("y"))){var s=n.attrs,a=n.node,l=a.firstChild?r(i._g.doc.defaultView.getComputedStyle(a.firstChild,"").getPropertyValue("font-size"),10):10;if(o[t]("text")){for(s.text=o.text;a.firstChild;)a.removeChild(a.firstChild);for(var h,c=e(o.text).split("\n"),d=[],u=0,p=c.length;u<p;u++)h=f("tspan"),u&&f(h,{dy:1.2*l,x:s.x}),h.appendChild(i._g.doc.createTextNode(c[u])),a.appendChild(h),d[u]=h}else for(u=0,p=(d=a.getElementsByTagName("tspan")).length;u<p;u++)u?f(d[u],{dy:1.2*l,x:s.x}):f(d[0],{dy:0});f(a,{x:s.x,y:s.y}),n._.dirty=1;var g=n._getBBox(),m=s.y-(g.y+g.height/2);m&&i.is(m,"finite")&&f(d[0],{dy:m})}},_=function(t,e){this[0]=this.node=t,t.raphael=!0,this.id=i._oid++,t.raphaelid=this.id,this.matrix=i.matrix(),this.realPath=null,this.paper=e,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!e.bottom&&(e.bottom=this),this.prev=e.top,e.top&&(e.top.next=this),e.top=this,this.next=null},k=i.el;_.prototype=k,k.constructor=_,i._engine.path=function(t,e){var i=f("path");e.canvas&&e.canvas.appendChild(i);var n=new _(i,e);return n.type="path",w(n,{fill:"none",stroke:"#000",path:t}),n},k.rotate=function(t,i,r){if(this.removed)return this;if((t=e(t).split(h)).length-1&&(i=n(t[1]),r=n(t[2])),t=n(t[0]),null==r&&(i=r),null==i||null==r){var o=this.getBBox(1);i=o.x+o.width/2,r=o.y+o.height/2}return this.transform(this._.transform.concat([["r",t,i,r]])),this},k.scale=function(t,i,r,o){if(this.removed)return this;if((t=e(t).split(h)).length-1&&(i=n(t[1]),r=n(t[2]),o=n(t[3])),t=n(t[0]),null==i&&(i=t),null==o&&(r=o),null==r||null==o)var s=this.getBBox(1);return r=null==r?s.x+s.width/2:r,o=null==o?s.y+s.height/2:o,this.transform(this._.transform.concat([["s",t,i,r,o]])),this},k.translate=function(t,i){return this.removed?this:((t=e(t).split(h)).length-1&&(i=n(t[1])),t=n(t[0])||0,i=+i||0,this.transform(this._.transform.concat([["t",t,i]])),this)},k.transform=function(e){var n=this._;if(null==e)return n.transform;if(i._extractTransform(this,e),this.clip&&f(this.clip,{transform:this.matrix.invert()}),this.pattern&&m(this),this.node&&f(this.node,{transform:this.matrix}),1!=n.sx||1!=n.sy){var r=this.attrs[t]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":r})}return this},k.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},k.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},k.remove=function(){if(!this.removed&&this.node.parentNode){var t=this.paper;for(var e in t.__set__&&t.__set__.exclude(this),c.unbind("raphael.*.*."+this.id),this.gradient&&t.defs.removeChild(this.gradient),i._tear(this,t),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node),this)this[e]="function"==typeof this[e]?i._removedFactory(e):null;this.removed=!0}},k._getBBox=function(){if("none"==this.node.style.display){this.show();var t=!0}var e={};try{e=this.node.getBBox()}catch(t){}finally{e=e||{}}return t&&this.hide(),e},k.attr=function(e,n){if(this.removed)return this;if(null==e){var r={};for(var o in this.attrs)this.attrs[t](o)&&(r[o]=this.attrs[o]);return r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r.transform=this._.transform,r}if(null==n&&i.is(e,"string")){if("fill"==e&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==e)return this._.transform;for(var s=e.split(h),a={},l=0,d=s.length;l<d;l++)(e=s[l])in this.attrs?a[e]=this.attrs[e]:i.is(this.paper.customAttributes[e],"function")?a[e]=this.paper.customAttributes[e].def:a[e]=i._availableAttrs[e];return d-1?a:a[s[0]]}if(null==n&&i.is(e,"array")){for(a={},l=0,d=e.length;l<d;l++)a[e[l]]=this.attr(e[l]);return a}if(null!=n){var u={};u[e]=n}else null!=e&&i.is(e,"object")&&(u=e);for(var p in u)c("raphael.attr."+p+"."+this.id,this,u[p]);for(p in this.paper.customAttributes)if(this.paper.customAttributes[t](p)&&u[t](p)&&i.is(this.paper.customAttributes[p],"function")){var f=this.paper.customAttributes[p].apply(this,[].concat(u[p]));for(var g in this.attrs[p]=u[p],f)f[t](g)&&(u[g]=f[g])}return w(this,u),this},k.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var t=this.paper;return t.top!=this&&i._tofront(this,t),this},k.toBack=function(){if(this.removed)return this;var t=this.node.parentNode;return"a"==t.tagName.toLowerCase()?t.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):t.firstChild!=this.node&&t.insertBefore(this.node,this.node.parentNode.firstChild),i._toback(this,this.paper),this.paper,this},k.insertAfter=function(t){if(this.removed)return this;var e=t.node||t[t.length-1].node;return e.nextSibling?e.parentNode.insertBefore(this.node,e.nextSibling):e.parentNode.appendChild(this.node),i._insertafter(this,t,this.paper),this},k.insertBefore=function(t){if(this.removed)return this;var e=t.node||t[0].node;return e.parentNode.insertBefore(this.node,e),i._insertbefore(this,t,this.paper),this},k.blur=function(t){var e=this;if(0!=+t){var n=f("filter"),r=f("feGaussianBlur");e.attrs.blur=t,n.id=i.createUUID(),f(r,{stdDeviation:+t||1.5}),n.appendChild(r),e.paper.defs.appendChild(n),e._blur=n,f(e.node,{filter:"url(#"+n.id+")"})}else e._blur&&(e._blur.parentNode.removeChild(e._blur),delete e._blur,delete e.attrs.blur),e.node.removeAttribute("filter");return e},i._engine.circle=function(t,e,i,n){var r=f("circle");t.canvas&&t.canvas.appendChild(r);var o=new _(r,t);return o.attrs={cx:e,cy:i,r:n,fill:"none",stroke:"#000"},o.type="circle",f(r,o.attrs),o},i._engine.rect=function(t,e,i,n,r,o){var s=f("rect");t.canvas&&t.canvas.appendChild(s);var a=new _(s,t);return a.attrs={x:e,y:i,width:n,height:r,r:o||0,rx:o||0,ry:o||0,fill:"none",stroke:"#000"},a.type="rect",f(s,a.attrs),a},i._engine.ellipse=function(t,e,i,n,r){var o=f("ellipse");t.canvas&&t.canvas.appendChild(o);var s=new _(o,t);return s.attrs={cx:e,cy:i,rx:n,ry:r,fill:"none",stroke:"#000"},s.type="ellipse",f(o,s.attrs),s},i._engine.image=function(t,e,i,n,r,o){var s=f("image");f(s,{x:i,y:n,width:r,height:o,preserveAspectRatio:"none"}),s.setAttributeNS(d,"href",e),t.canvas&&t.canvas.appendChild(s);var a=new _(s,t);return a.attrs={x:i,y:n,width:r,height:o,src:e},a.type="image",a},i._engine.text=function(t,e,n,r){var o=f("text");t.canvas&&t.canvas.appendChild(o);var s=new _(o,t);return s.attrs={x:e,y:n,"text-anchor":"middle",text:r,font:i._availableAttrs.font,stroke:"none",fill:"#000"},s.type="text",w(s,s.attrs),s},i._engine.setSize=function(t,e){return this.width=t||this.width,this.height=e||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},i._engine.create=function(){var t=i._getContainer.apply(0,arguments),e=t&&t.container,n=t.x,r=t.y,o=t.width,s=t.height;if(!e)throw new Error("SVG container not found.");var a,l=f("svg"),h="overflow:hidden;";return n=n||0,r=r||0,f(l,{height:s=s||342,version:1.1,width:o=o||512,xmlns:"http://www.w3.org/2000/svg"}),1==e?(l.style.cssText=h+"position:absolute;left:"+n+"px;top:"+r+"px",i._g.doc.body.appendChild(l),a=1):(l.style.cssText=h+"position:relative",e.firstChild?e.insertBefore(l,e.firstChild):e.appendChild(l)),(e=new i._Paper).width=o,e.height=s,e.canvas=l,e.clear(),e._left=e._top=0,a&&(e.renderfix=function(){}),e.renderfix(),e},i._engine.setViewBox=function(t,e,i,n,r){c("raphael.setViewBox",this,this._viewBox,[t,e,i,n,r]);var o,a,l=s(i/this.width,n/this.height),h=this.top,d=r?"xMidYMid meet":"xMinYMin";for(null==t?(this._vbSize&&(l=1),delete this._vbSize,o="0 0 "+this.width+" "+this.height):(this._vbSize=l,o=t+" "+e+" "+i+" "+n),f(this.canvas,{viewBox:o,preserveAspectRatio:d});l&&h;)a="stroke-width"in h.attrs?h.attrs["stroke-width"]:1,h.attr({"stroke-width":a}),h._.dirty=1,h._.dirtyT=1,h=h.prev;return this._viewBox=[t,e,i,n,!!r],this},i.prototype.renderfix=function(){var t,e=this.canvas,i=e.style;try{t=e.getScreenCTM()||e.createSVGMatrix()}catch(i){t=e.createSVGMatrix()}var n=-t.e%1,r=-t.f%1;(n||r)&&(n&&(this._left=(this._left+n)%1,i.left=this._left+"px"),r&&(this._top=(this._top+r)%1,i.top=this._top+"px"))},i.prototype.clear=function(){i.eve("raphael.clear",this);for(var t=this.canvas;t.firstChild;)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=f("desc")).appendChild(i._g.doc.createTextNode("Created with Raphaël "+i.version)),t.appendChild(this.desc),t.appendChild(this.defs=f("defs"))},i.prototype.remove=function(){for(var t in c("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[t]="function"==typeof this[t]?i._removedFactory(t):null};var C=i.st;for(var S in k)k[t](S)&&!C[t](S)&&(C[S]=function(t){return function(){var e=arguments;return this.forEach(function(i){i[t].apply(i,e)})}}(S))}}(),function(){if(i.vml){var t="hasOwnProperty",e=String,n=parseFloat,r=Math,o=r.round,s=r.max,a=r.min,l=r.abs,h="fill",c=/[, ]+/,d=i.eve,u={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},p=/([clmz]),?([^clmz]*)/gi,f=/ progid:\S+Blur\([^\)]+\)/g,g=/-?[^,\s-]+/g,m="position:absolute;left:0;top:0;width:1px;height:1px",v=21600,y={path:1,rect:1,image:1},b={circle:1,ellipse:1},w=function(t,e,n){var r=i.matrix();return r.rotate(-t,.5,.5),{dx:r.x(e,n),dy:r.y(e,n)}},x=function(t,e,i,n,r,o){var s=t._,a=t.matrix,c=s.fillpos,d=t.node,u=d.style,p=1,f="",g=v/e,m=v/i;if(u.visibility="hidden",e&&i){if(d.coordsize=l(g)+" "+l(m),u.rotation=o*(e*i<0?-1:1),o){var y=w(o,n,r);n=y.dx,r=y.dy}if(e<0&&(f+="x"),i<0&&(f+=" y")&&(p=-1),u.flip=f,d.coordorigin=n*-g+" "+r*-m,c||s.fillsize){var b=d.getElementsByTagName(h);b=b&&b[0],d.removeChild(b),c&&(y=w(o,a.x(c[0],c[1]),a.y(c[0],c[1])),b.position=y.dx*p+" "+y.dy*p),s.fillsize&&(b.size=s.fillsize[0]*l(e)+" "+s.fillsize[1]*l(i)),d.appendChild(b)}u.visibility="visible"}};i.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var _,k=function(t,i,n){for(var r=e(i).toLowerCase().split("-"),o=n?"end":"start",s=r.length,a="classic",l="medium",h="medium";s--;)switch(r[s]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":a=r[s];break;case"wide":case"narrow":h=r[s];break;case"long":case"short":l=r[s]}var c=t.node.getElementsByTagName("stroke")[0];c[o+"arrow"]=a,c[o+"arrowlength"]=l,c[o+"arrowwidth"]=h},C=function(r,l){r.attrs=r.attrs||{};var d=r.node,f=r.attrs,m=d.style,w=y[r.type]&&(l.x!=f.x||l.y!=f.y||l.width!=f.width||l.height!=f.height||l.cx!=f.cx||l.cy!=f.cy||l.rx!=f.rx||l.ry!=f.ry||l.r!=f.r),C=b[r.type]&&(f.cx!=l.cx||f.cy!=l.cy||f.r!=l.r||f.rx!=l.rx||f.ry!=l.ry),T=r;for(var P in l)l[t](P)&&(f[P]=l[P]);if(w&&(f.path=i._getPath[r.type](r),r._.dirty=1),l.href&&(d.href=l.href),l.title&&(d.title=l.title),l.target&&(d.target=l.target),l.cursor&&(m.cursor=l.cursor),"blur"in l&&r.blur(l.blur),(l.path&&"path"==r.type||w)&&(d.path=function(t){var n=/[ahqstv]/gi,r=i._pathToAbsolute;if(e(t).match(n)&&(r=i._path2curve),n=/[clmz]/g,r==i._pathToAbsolute&&!e(t).match(n)){var s=e(t).replace(p,function(t,e,i){var n=[],r="m"==e.toLowerCase(),s=u[e];return i.replace(g,function(t){r&&2==n.length&&(s+=n+u["m"==e?"l":"L"],n=[]),n.push(o(t*v))}),s+n});return s}var a,l,h=r(t);s=[];for(var c=0,d=h.length;c<d;c++){a=h[c],"z"==(l=h[c][0].toLowerCase())&&(l="x");for(var f=1,m=a.length;f<m;f++)l+=o(a[f]*v)+(f!=m-1?",":"");s.push(l)}return s.join(" ")}(~e(f.path).toLowerCase().indexOf("r")?i._pathToAbsolute(f.path):f.path),"image"==r.type&&(r._.fillpos=[f.x,f.y],r._.fillsize=[f.width,f.height],x(r,1,1,0,0,0))),"transform"in l&&r.transform(l.transform),C){var A=+f.cx,D=+f.cy,z=+f.rx||+f.r||0,E=+f.ry||+f.r||0;d.path=i.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",o((A-z)*v),o((D-E)*v),o((A+z)*v),o((D+E)*v),o(A*v)),r._.dirty=1}if("clip-rect"in l){var M=e(l["clip-rect"]).split(c);if(4==M.length){M[2]=+M[2]+ +M[0],M[3]=+M[3]+ +M[1];var L=d.clipRect||i._g.doc.createElement("div"),I=L.style;I.clip=i.format("rect({1}px {2}px {3}px {0}px)",M),d.clipRect||(I.position="absolute",I.top=0,I.left=0,I.width=r.paper.width+"px",I.height=r.paper.height+"px",d.parentNode.insertBefore(L,d),L.appendChild(d),d.clipRect=L)}l["clip-rect"]||d.clipRect&&(d.clipRect.style.clip="auto")}if(r.textpath){var B=r.textpath.style;l.font&&(B.font=l.font),l["font-family"]&&(B.fontFamily='"'+l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,"")+'"'),l["font-size"]&&(B.fontSize=l["font-size"]),l["font-weight"]&&(B.fontWeight=l["font-weight"]),l["font-style"]&&(B.fontStyle=l["font-style"])}if("arrow-start"in l&&k(T,l["arrow-start"]),"arrow-end"in l&&k(T,l["arrow-end"],1),null!=l.opacity||null!=l["stroke-width"]||null!=l.fill||null!=l.src||null!=l.stroke||null!=l["stroke-width"]||null!=l["stroke-opacity"]||null!=l["fill-opacity"]||null!=l["stroke-dasharray"]||null!=l["stroke-miterlimit"]||null!=l["stroke-linejoin"]||null!=l["stroke-linecap"]){var R=d.getElementsByTagName(h);if(!(R=R&&R[0])&&(R=_(h)),"image"==r.type&&l.src&&(R.src=l.src),l.fill&&(R.on=!0),null!=R.on&&"none"!=l.fill&&null!==l.fill||(R.on=!1),R.on&&l.fill){var O=e(l.fill).match(i._ISURL);if(O){R.parentNode==d&&d.removeChild(R),R.rotate=!0,R.src=O[1],R.type="tile";var N=r.getBBox(1);R.position=N.x+" "+N.y,r._.fillpos=[N.x,N.y],i._preload(O[1],function(){r._.fillsize=[this.offsetWidth,this.offsetHeight]})}else R.color=i.getRGB(l.fill).hex,R.src="",R.type="solid",i.getRGB(l.fill).error&&(T.type in{circle:1,ellipse:1}||"r"!=e(l.fill).charAt())&&S(T,l.fill,R)&&(f.fill="none",f.gradient=l.fill,R.rotate=!1)}if("fill-opacity"in l||"opacity"in l){var V=((+f["fill-opacity"]+1||2)-1)*((+f.opacity+1||2)-1)*((+i.getRGB(l.fill).o+1||2)-1);V=a(s(V,0),1),R.opacity=V,R.src&&(R.color="none")}d.appendChild(R);var F=d.getElementsByTagName("stroke")&&d.getElementsByTagName("stroke")[0],H=!1;!F&&(H=F=_("stroke")),(l.stroke&&"none"!=l.stroke||l["stroke-width"]||null!=l["stroke-opacity"]||l["stroke-dasharray"]||l["stroke-miterlimit"]||l["stroke-linejoin"]||l["stroke-linecap"])&&(F.on=!0),("none"==l.stroke||null===l.stroke||null==F.on||0==l.stroke||0==l["stroke-width"])&&(F.on=!1);var U=i.getRGB(l.stroke);F.on&&l.stroke&&(F.color=U.hex),V=((+f["stroke-opacity"]+1||2)-1)*((+f.opacity+1||2)-1)*((+U.o+1||2)-1);var $=.75*(n(l["stroke-width"])||1);if(V=a(s(V,0),1),null==l["stroke-width"]&&($=f["stroke-width"]),l["stroke-width"]&&(F.weight=$),$&&$<1&&(V*=$)&&(F.weight=1),F.opacity=V,l["stroke-linejoin"]&&(F.joinstyle=l["stroke-linejoin"]||"miter"),F.miterlimit=l["stroke-miterlimit"]||8,l["stroke-linecap"]&&(F.endcap="butt"==l["stroke-linecap"]?"flat":"square"==l["stroke-linecap"]?"square":"round"),"stroke-dasharray"in l){var j={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};F.dashstyle=j[t](l["stroke-dasharray"])?j[l["stroke-dasharray"]]:""}H&&d.appendChild(F)}if("text"==T.type){T.paper.canvas.style.display="";var G=T.paper.span,W=f.font&&f.font.match(/\d+(?:\.\d*)?(?=px)/);m=G.style,f.font&&(m.font=f.font),f["font-family"]&&(m.fontFamily=f["font-family"]),f["font-weight"]&&(m.fontWeight=f["font-weight"]),f["font-style"]&&(m.fontStyle=f["font-style"]),W=n(f["font-size"]||W&&W[0])||10,m.fontSize=100*W+"px",T.textpath.string&&(G.innerHTML=e(T.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var q=G.getBoundingClientRect();T.W=f.w=(q.right-q.left)/100,T.H=f.h=(q.bottom-q.top)/100,T.X=f.x,T.Y=f.y+T.H/2,("x"in l||"y"in l)&&(T.path.v=i.format("m{0},{1}l{2},{1}",o(f.x*v),o(f.y*v),o(f.x*v)+1));for(var Y=["x","y","text","font","font-family","font-weight","font-style","font-size"],Q=0,X=Y.length;Q<X;Q++)if(Y[Q]in l){T._.dirty=1;break}switch(f["text-anchor"]){case"start":T.textpath.style["v-text-align"]="left",T.bbx=T.W/2;break;case"end":T.textpath.style["v-text-align"]="right",T.bbx=-T.W/2;break;default:T.textpath.style["v-text-align"]="center",T.bbx=0}T.textpath.style["v-text-kern"]=!0}},S=function(t,o,s){t.attrs=t.attrs||{},t.attrs;var a=Math.pow,l="linear",h=".5 .5";if(t.attrs.gradient=o,o=(o=e(o).replace(i._radial_gradient,function(t,e,i){return l="radial",e&&i&&(e=n(e),i=n(i),a(e-.5,2)+a(i-.5,2)>.25&&(i=r.sqrt(.25-a(e-.5,2))*(2*(i>.5)-1)+.5),h=e+" "+i),""})).split(/\s*\-\s*/),"linear"==l){var c=o.shift();if(c=-n(c),isNaN(c))return null}var d=i._parseDots(o);if(!d)return null;if(t=t.shape||t.node,d.length){t.removeChild(s),s.on=!0,s.method="none",s.color=d[0].color,s.color2=d[d.length-1].color;for(var u=[],p=0,f=d.length;p<f;p++)d[p].offset&&u.push(d[p].offset+" "+d[p].color);s.colors=u.length?u.join():"0% "+s.color,"radial"==l?(s.type="gradientTitle",s.focus="100%",s.focussize="0 0",s.focusposition=h,s.angle=0):(s.type="gradient",s.angle=(270-c)%360),t.appendChild(s)}return 1},T=function(t,e){this[0]=this.node=t,t.raphael=!0,this.id=i._oid++,t.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=e,this.matrix=i.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!e.bottom&&(e.bottom=this),this.prev=e.top,e.top&&(e.top.next=this),e.top=this,this.next=null},P=i.el;T.prototype=P,P.constructor=T,P.transform=function(t){if(null==t)return this._.transform;var n,r=this.paper._viewBoxShift,o=r?"s"+[r.scale,r.scale]+"-1-1t"+[r.dx,r.dy]:"";r&&(n=t=e(t).replace(/\.{3}|\u2026/g,this._.transform||"")),i._extractTransform(this,o+t);var s,a=this.matrix.clone(),l=this.skew,h=this.node,c=~e(this.attrs.fill).indexOf("-"),d=!e(this.attrs.fill).indexOf("url(");if(a.translate(1,1),d||c||"image"==this.type)if(l.matrix="1 0 0 1",l.offset="0 0",s=a.split(),c&&s.noRotation||!s.isSimple){h.style.filter=a.toFilter();var u=this.getBBox(),p=this.getBBox(1),f=u.x-p.x,g=u.y-p.y;h.coordorigin=f*-v+" "+g*-v,x(this,1,1,f,g,0)}else h.style.filter="",x(this,s.scalex,s.scaley,s.dx,s.dy,s.rotate);else h.style.filter="",l.matrix=e(a),l.offset=a.offset();return n&&(this._.transform=n),this},P.rotate=function(t,i,r){if(this.removed)return this;if(null!=t){if((t=e(t).split(c)).length-1&&(i=n(t[1]),r=n(t[2])),t=n(t[0]),null==r&&(i=r),null==i||null==r){var o=this.getBBox(1);i=o.x+o.width/2,r=o.y+o.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",t,i,r]])),this}},P.translate=function(t,i){return this.removed?this:((t=e(t).split(c)).length-1&&(i=n(t[1])),t=n(t[0])||0,i=+i||0,this._.bbox&&(this._.bbox.x+=t,this._.bbox.y+=i),this.transform(this._.transform.concat([["t",t,i]])),this)},P.scale=function(t,i,r,o){if(this.removed)return this;if((t=e(t).split(c)).length-1&&(i=n(t[1]),r=n(t[2]),o=n(t[3]),isNaN(r)&&(r=null),isNaN(o)&&(o=null)),t=n(t[0]),null==i&&(i=t),null==o&&(r=o),null==r||null==o)var s=this.getBBox(1);return r=null==r?s.x+s.width/2:r,o=null==o?s.y+s.height/2:o,this.transform(this._.transform.concat([["s",t,i,r,o]])),this._.dirtyT=1,this},P.hide=function(){return!this.removed&&(this.node.style.display="none"),this},P.show=function(){return!this.removed&&(this.node.style.display=""),this},P._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},P.remove=function(){if(!this.removed&&this.node.parentNode){for(var t in this.paper.__set__&&this.paper.__set__.exclude(this),i.eve.unbind("raphael.*.*."+this.id),i._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[t]="function"==typeof this[t]?i._removedFactory(t):null;this.removed=!0}},P.attr=function(e,n){if(this.removed)return this;if(null==e){var r={};for(var o in this.attrs)this.attrs[t](o)&&(r[o]=this.attrs[o]);return r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r.transform=this._.transform,r}if(null==n&&i.is(e,"string")){if(e==h&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var s=e.split(c),a={},l=0,u=s.length;l<u;l++)(e=s[l])in this.attrs?a[e]=this.attrs[e]:i.is(this.paper.customAttributes[e],"function")?a[e]=this.paper.customAttributes[e].def:a[e]=i._availableAttrs[e];return u-1?a:a[s[0]]}if(this.attrs&&null==n&&i.is(e,"array")){for(a={},l=0,u=e.length;l<u;l++)a[e[l]]=this.attr(e[l]);return a}var p;for(var f in null!=n&&((p={})[e]=n),null==n&&i.is(e,"object")&&(p=e),p)d("raphael.attr."+f+"."+this.id,this,p[f]);if(p){for(f in this.paper.customAttributes)if(this.paper.customAttributes[t](f)&&p[t](f)&&i.is(this.paper.customAttributes[f],"function")){var g=this.paper.customAttributes[f].apply(this,[].concat(p[f]));for(var m in this.attrs[f]=p[f],g)g[t](m)&&(p[m]=g[m])}p.text&&"text"==this.type&&(this.textpath.string=p.text),C(this,p)}return this},P.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&i._tofront(this,this.paper),this},P.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),i._toback(this,this.paper)),this)},P.insertAfter=function(t){return this.removed?this:(t.constructor==i.st.constructor&&(t=t[t.length-1]),t.node.nextSibling?t.node.parentNode.insertBefore(this.node,t.node.nextSibling):t.node.parentNode.appendChild(this.node),i._insertafter(this,t,this.paper),this)},P.insertBefore=function(t){return this.removed?this:(t.constructor==i.st.constructor&&(t=t[0]),t.node.parentNode.insertBefore(this.node,t.node),i._insertbefore(this,t,this.paper),this)},P.blur=function(t){var e=this.node.runtimeStyle,n=e.filter;return n=n.replace(f,""),0!=+t?(this.attrs.blur=t,e.filter=n+"  progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+t||1.5)+")",e.margin=i.format("-{0}px 0 0 -{0}px",o(+t||1.5))):(e.filter=n,e.margin=0,delete this.attrs.blur),this},i._engine.path=function(t,e){var i=_("shape");i.style.cssText=m,i.coordsize=v+" "+v,i.coordorigin=e.coordorigin;var n=new T(i,e),r={fill:"none",stroke:"#000"};t&&(r.path=t),n.type="path",n.path=[],n.Path="",C(n,r),e.canvas.appendChild(i);var o=_("skew");return o.on=!0,i.appendChild(o),n.skew=o,n.transform(""),n},i._engine.rect=function(t,e,n,r,o,s){var a=i._rectPath(e,n,r,o,s),l=t.path(a),h=l.attrs;return l.X=h.x=e,l.Y=h.y=n,l.W=h.width=r,l.H=h.height=o,h.r=s,h.path=a,l.type="rect",l},i._engine.ellipse=function(t,e,i,n,r){var o=t.path();return o.attrs,o.X=e-n,o.Y=i-r,o.W=2*n,o.H=2*r,o.type="ellipse",C(o,{cx:e,cy:i,rx:n,ry:r}),o},i._engine.circle=function(t,e,i,n){var r=t.path();return r.attrs,r.X=e-n,r.Y=i-n,r.W=r.H=2*n,r.type="circle",C(r,{cx:e,cy:i,r:n}),r},i._engine.image=function(t,e,n,r,o,s){var a=i._rectPath(n,r,o,s),l=t.path(a).attr({stroke:"none"}),c=l.attrs,d=l.node,u=d.getElementsByTagName(h)[0];return c.src=e,l.X=c.x=n,l.Y=c.y=r,l.W=c.width=o,l.H=c.height=s,c.path=a,l.type="image",u.parentNode==d&&d.removeChild(u),u.rotate=!0,u.src=e,u.type="tile",l._.fillpos=[n,r],l._.fillsize=[o,s],d.appendChild(u),x(l,1,1,0,0,0),l},i._engine.text=function(t,n,r,s){var a=_("shape"),l=_("path"),h=_("textpath");n=n||0,r=r||0,s=s||"",l.v=i.format("m{0},{1}l{2},{1}",o(n*v),o(r*v),o(n*v)+1),l.textpathok=!0,h.string=e(s),h.on=!0,a.style.cssText=m,a.coordsize=v+" "+v,a.coordorigin="0 0";var c=new T(a,t),d={fill:"#000",stroke:"none",font:i._availableAttrs.font,text:s};c.shape=a,c.path=l,c.textpath=h,c.type="text",c.attrs.text=e(s),c.attrs.x=n,c.attrs.y=r,c.attrs.w=1,c.attrs.h=1,C(c,d),a.appendChild(h),a.appendChild(l),t.canvas.appendChild(a);var u=_("skew");return u.on=!0,a.appendChild(u),c.skew=u,c.transform(""),c},i._engine.setSize=function(t,e){var n=this.canvas.style;return this.width=t,this.height=e,t==+t&&(t+="px"),e==+e&&(e+="px"),n.width=t,n.height=e,n.clip="rect(0 "+t+" "+e+" 0)",this._viewBox&&i._engine.setViewBox.apply(this,this._viewBox),this},i._engine.setViewBox=function(t,e,n,r,o){i.eve("raphael.setViewBox",this,this._viewBox,[t,e,n,r,o]);var a,l,h=this.width,c=this.height,d=1/s(n/h,r/c);return o&&(n*(a=c/r)<h&&(t-=(h-n*a)/2/a),r*(l=h/n)<c&&(e-=(c-r*l)/2/l)),this._viewBox=[t,e,n,r,!!o],this._viewBoxShift={dx:-t,dy:-e,scale:d},this.forEach(function(t){t.transform("...")}),this},i._engine.initWin=function(t){var e=t.document;e.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!e.namespaces.rvml&&e.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),_=function(t){return e.createElement("<rvml:"+t+' class="rvml">')}}catch(t){_=function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},i._engine.initWin(i._g.win),i._engine.create=function(){var t=i._getContainer.apply(0,arguments),e=t.container,n=t.height,r=t.width,o=t.x,s=t.y;if(!e)throw new Error("VML container not found.");var a=new i._Paper,l=a.canvas=i._g.doc.createElement("div"),h=l.style;return o=o||0,s=s||0,r=r||512,n=n||342,a.width=r,a.height=n,r==+r&&(r+="px"),n==+n&&(n+="px"),a.coordsize=216e5+" 21600000",a.coordorigin="0 0",a.span=i._g.doc.createElement("span"),a.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",l.appendChild(a.span),h.cssText=i.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",r,n),1==e?(i._g.doc.body.appendChild(l),h.left=o+"px",h.top=s+"px",h.position="absolute"):e.firstChild?e.insertBefore(l,e.firstChild):e.appendChild(l),a.renderfix=function(){},a},i.prototype.clear=function(){i.eve("raphael.clear",this),this.canvas.innerHTML="",this.span=i._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},i.prototype.remove=function(){for(var t in i.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[t]="function"==typeof this[t]?i._removedFactory(t):null;return!0};var A=i.st;for(var D in P)P[t](D)&&!A[t](D)&&(A[D]=function(t){return function(){var e=arguments;return this.forEach(function(i){i[t].apply(i,e)})}}(D))}}(),S.was?C.win.Raphael=i:Raphael=i,i;var ue,pe,fe;var ge,me}(t,t.eve)}(this),function(t){Raphael.fn.nestedSVG=function(e,i,n){var r=this;arguments[0]instanceof Array||arguments[0];return function(o,s){r.set(s);var a,l=new Raphael(e,i,n);return l.canvas.setAttribute("x",0),l.canvas.setAttribute("y",0),r.canvas.appendChild(l.canvas),a={move:function(t,e){l.canvas.setAttribute("x",t),l.canvas.setAttribute("y",e)}},t.extend(l,a),l}(0,arguments[0]instanceof Array?arguments[0]:arguments[1])}}(jQuery),jQuery,Raphael.fn.marker=function(){var t=this;return arguments[0]instanceof Array||arguments[0],function(e,i){t.set(i);var n=t.raphael.vml?document.createElement("marker"):document.createElementNS("http://www.w3.org/2000/svg","marker"),r=t.path("M2,2 L2,10 L10,6 L2,2");return r.node.setAttribute("fill","black"),t.defs.appendChild(n),n.appendChild(r.node),{scale:function(t,e){var i=n.getAttribute("transform");return n.attr("transform",updateScale(i,t,e)),this},move:function(t,e){n.setAttribute("x",t),n.setAttribute("y",e)},attr:function(t,e){n.setAttribute(t,e)},attrs:function(t){for(var e in t)n.setAttribute(e,t[e])},type:"marker",node:n}}(0,arguments[0]instanceof Array?arguments[0]:arguments[1])},function(t){Raphael.fn.group=function(){var e=this;arguments[0]instanceof Array||arguments[0];return function(i,n){e.set(n);var r,o=e.raphael.vml?document.createElement("group"):document.createElementNS("http://www.w3.org/2000/svg","g");return e.canvas.appendChild(o),o.canvas=o,r={setScale:function(t){return e.raphael.vml?this.forEach(function(e){var i=e.data("rotation")||0;e.transform("S"+t+","+t+", 0, 0, r"+i)}):o.setAttribute("transform","scale("+t+")"),this},getScale:function(){var t=o.getAttribute("transform");return null===t&&(t="scale(1)"),t.replace("scale(","").replace(")","")}},t.extend(r,e),r.scale=r.setScale,r.canvas=o,r[0]=o,r.type="group",r.node=o,r}(0,arguments[0]instanceof Array?arguments[0]:arguments[1])}}(jQuery),bizagi.reporting.report.analyticsprocessfrequentspaths.extend("bizagi.reporting.report.analyticstaskcycletime",{},{init:function(t){this._super(t),this.tasks=[],this.cleanReferrerParams()},initializeTemplates:function(){return{main:bizagi.getTemplate("bizagi.reporting.report.analyticstaskcycletime")+"#bz-rp-analytics-task-cycletime-main",header:bizagi.getTemplate("bizagi.reporting.report.analyticstaskcycletime")+"#bz-rp-analytics-task-cycletime-cases",tooltip:bizagi.getTemplate("bizagi.reporting.report.analyticstaskcycletime")+"#bz-rp-analytics-task-cycletime-tooltip"}},getDetailListObject:function(t){return t.tooltip?{detailList:{reportName:"Analytics.Task.Tasks",task:t.guid,columnName:t.type}}:{detailList:{reportName:"Analytics.Process.FrequentPaths",columnIndex:this.frequentsPaths[this.path].pathIndex}}},drawReport:function(t){var e=this;e.setFiltersForCustomRPComp();var i=$("#bizagi-reporting-wrapper");i.startLoading({overlay:!0,delay:150,opacity:.9,maxZIndex:!0}),e.state="loading",e.lastFilter=t,$.when(e.services.getTaskCycleTime(t)).done(function(t){e.state="loaded",i.endLoading(),e.frequentsPaths=void 0,e.tasks=t.tasks,e.renderHeader(),e.drawProcessModel(),e.drawProcessBreadcrumb()})},drawProcessBreadcrumb:function(){var t=$(".bz-rp-processbreadcrumb-container",this.content);if(t.empty(),this.model.taskPathArray&&this.model.taskPathArray.length>1){var e=this.getTemplate("process-breadcrumb");$.tmpl(e,{taskData:this.model.taskPathArray}).appendTo(t),this.addBreadCrumbHandlers()}},getTooltipContent:function(t){var e=t.id,i=this.getTemplate("tooltip"),n=this.tasks.filter(function(t){return t.guid==e});return($(t).hasClass("usertask")||$(t).hasClass("abstracttask")||$(t).hasClass("manualtask")||$(t).hasClass("nonetask")||$(t).hasClass("subprocess"))&&(n[0].showAll=!0),$.tmpl(i,n[0])},toggleFrequentPaths:function(t,e){var i=this,n=0==i.frequentsPaths.length?".bz-rp-analytics-task-cycletime-frecuentspaths-cases-message-no-data":".bz-rp-analytics-task-cycletime-frecuentspaths-cases",r=e.siblings(n),o=e.find("input[type=checkbox]");r.slideToggle("fast",function(){"none"==$(this).css("display")?(o.prop("checked",!1),t.processviewer("clearRoute")):(o.prop("checked",!0),i.drawFrequentsPaths())})},eventsHandlers:function(){var t=this,e=$(".bz-rp-processviewer-canvas",t.content);t.applyViewerTooltip(e,{}),t.bindDtlEvent(),$(".bz-rp-processviewer",t.content).on("click",".bz-rp-analytics-task-cycletime-frequentspaths-showcontrol",function(i){var n=$(this);return null==t.frequentsPaths?$.when(t.services.getFrecuentsPaths(t.lastFilter)).done(function(i){t.frequentsPaths=i.paths,t.frequentsPathsControl(),t.toggleFrequentPaths(e,n)}):t.toggleFrequentPaths(e,n),!1}),$(".bz-rp-processviewer",t.content).on("click",".bz-rp-taskcycletime-detaillist",function(e){t.callDetailList({})}),$(".bz-rp-processviewer",t.content).on("pvComplete",function(t){$(".abstracttask, .usertask, .nonetask, .manualtask, .subprocess, .scripttask").addClass("bz-rp-process-viewer-activate")})},addBreadCrumbHandlers:function(){var t=this,e=$(".bz-rp-processbreadcrumb-container",t.content);$("a",e).click(function(e){e.preventDefault();var i=$(e.currentTarget).data("taskid"),n=e.currentTarget.text;0==n.indexOf(" > ")&&(n=n.substring(3,n.length)),t.model.process={id:i,name:n},t.refreshBreadCrumb(),t.components.processversion.publish("filterbyprocessversion",{process:t.model.process})})},refreshBreadCrumb:function(){var t,e;if(this.model.taskPathArray){for(t=this.model.taskPathArray.length;t-- >0;)parseInt(this.model.process.id)==parseInt(this.model.taskPathArray[t].id)&&(e=t);0==e?this.model.taskPathArray=[].concat(this.model.taskPathArray[0]):this.model.taskPathArray.splice(e+1,this.model.taskPathArray.length)}}}),bizagi.reporting.report.extend("bizagi.reporting.report.bamresourcemonitorworkinprogress",{},{init:function(t){this._super(t),this.taskGuid={},this.cacheProcess=-1,this.users=[],this.setReportNames("ResourceBAM","bamresourcemonitorworkinprogress")},getFiltersObject:function(){return{process:{},dimension:[]}},initializeTemplates:function(){return{main:bizagi.getTemplate("bizagi.reporting.report.bamresourcemonitorworkinprogress")+"#bz-rp-bam-resourcemonitor-workinprogress-main",chart:bizagi.getTemplate("bizagi.reporting.report.bamresourcemonitorworkinprogress")+"#bz-rp-bam-resourcemonitor-workinprogress-chart",exportexcel:bizagi.getTemplate("bizagi.reporting.report")+"#bz-rp-exportexcel"}},loadComponents:function(){var t=this;return t._super(),$.when(t.loadProcessesVersionComponent()).pipe(function(){return t.loadDimensionsComponent({process:t.model.process})})},postRender:function(){this.eventHandlers(),this.callModalWindow()},getDetailListObject:function(t){return this.setReportParams(t,this.model),{detailList:{reportName:t.sender.options.chartName,columnName:t.series.field.toLowerCase(),task:t.dataItem.guidTask,user:t.dataItem.id}}},drawReport:function(){var t=this,e={},i="filters=";t.setFiltersForCustomRPComp(),t.cacheProcess===t.model.process.id&&t.taskGuid.task?e=$.extend({},t.model,t.taskGuid):(e=t.model,t.taskGuid={},t.drawProcessModel()),t.cacheProcess=t.model.process.id,i+=JSON.stringify(e),t.callService(i)},callService:function(t){var e=this,i=$(".bz-rp-bam-resourcemonitor-workinprogress-charts",e.content);$.when(e.services.getProcessVersionList()).pipe(function(n){0==n.processes.length?e.setNoDataAvailableLabel(i):$.when(e.services.getResourceMonitorWorkInProgress(t)).done(function(t){var n=e.getTemplate("exportexcel"),r=e.groupDataChart(t.users);$.isEmptyObject(r)?e.setNoDataAvailableLabel(i):(i.empty(),i.append($.tmpl(n,{},{getReportExcelUrl:e.getReportExcelUrl("bam.resources.task"),showExcelIcon:!e.device||"desktop"==e.device.toLowerCase()})),$.each(r,function(t,n){e.drawCharts(n,i)}))}).fail(function(t){e.setNoDataAvailableLabel(i)})})},drawProcessModel:function(){var t=$(".bz-rp-processviewer-canvas",this.content);this.renderProcessViewer(t)},drawCharts:function(t,e){var i=this.getTemplate("chart");e.append($.tmpl(i,t[0]));var n={dataSource:{data:t},legend:{position:"top"},chartName:"BAM.Resource.Task",seriesDefaults:{tooltip:{visible:!1},type:"bar"},series:[{field:"onTime",name:this.getResource("reports-general-ontime-label"),color:"#8bbc21"},{field:"onRisk",name:this.getResource("reports-general-onrisk-label"),color:"#FFCF40"},{field:"overdue",name:this.getResource("reports-general-overdue-label"),color:"#FF4040"}],categoryAxis:{field:"fullName",reverse:!0}};$.extend(n,this.calculateGraphHeight(t.length));var r=this.graphics.getDataVizObject(n);$(".bz-rp-chart",e).last().kendoChart(r)},groupDataChart:function(t){for(var e,i={},n=t.length;--n>=0;)"object"==typeof i[e="-"+t[n].idTask+"-"]?i[e].push(t[n]):i[e]=new Array(t[n]);return i},eventHandlers:function(){var t=this,e=$(".bz-rp-processviewer-canvas",t.content);e.on("click",".usertask, .abstracttask, .manualtask, .nonetask, svg",function(i){var n="filters=",r={};$(this).is("svg")?(e.processviewer("unSelectAllShapes"),r=t.model,t.taskGuid={}):(t.taskGuid={task:{guid:this.id}},r=$.extend({},t.model,t.taskGuid),e.processviewer("unSelectAllShapes").processviewer("selectShape",this.id)),n+=JSON.stringify(r),t.callService(n)})},getReportExcelUrl:function(t){var e=$.extend({},this.taskGuid,this.model),i="reportName="+t+"&filters="+JSON.stringify(e)+"&user="+bizagi.currentUser.idUser;return this.services.getExportExcelUrl(i)}}),bizagi.reporting.report.extend("bizagi.reporting.report.bamresourcemonitorworkinprogressuser",{},{init:function(t){this._super(t),this.process={process:{id:0}},this.reportName="BAM.Resource.User",this.setReportNames("ResourceBAM","bamresourcemonitorworkinprogressuser")},initializeTemplates:function(){return{main:bizagi.getTemplate("bizagi.reporting.report.bamresourcemonitorworkinprogressuser")+"#bz-rp-bam-resourcemonitor-workinprogressuser-main",chart:bizagi.getTemplate("bizagi.reporting.report.bamresourcemonitorworkinprogressuser")+"#bz-rp-bam-resourcemonitor-workinprogressuser-chart",message:bizagi.getTemplate("bizagi.reporting.report.bamresourcemonitorworkinprogressuser")+"#bz-rp-bam-resourcemonitor-workinprogressuser-message",exportexcel:bizagi.getTemplate("bizagi.reporting.report")+"#bz-rp-exportexcel"}},renderContent:function(){var t=this,e=t.getTemplate("main");return t.content=$.tmpl(e),$.when(t.loadComponents()).pipe(function(){if($.isEmptyObject(t.model))t.renderMessage(1);else{var e="filters="+JSON.stringify(t.model);t.drawReport(e)}return t.content})},loadComponents:function(){return this._super(),$.when(this.loadDimensionsComponent(this.process,"getSystemDimensions"))},postRender:function(){this.activateTab("bamresourcemonitorworkinprogressuser"),this.callModalWindow()},getDetailListObject:function(t){this.setReportParams(t,this.model);var e=t.series.field.toLowerCase(),i=t.dataItem.guidTask,n=t.dataItem.id,r={detailList:{reportName:this.reportName,columnName:e,task:i,user:n}};return this.process.process.id=t.dataItem.processId,$.extend({},this.process,r)},drawReport:function(t){var e=this;e.setFiltersForCustomRPComp(),$.when(e.services.getResourceMonitorWorkInProgressPerUser(t)).done(function(t){if(t.users.length){var i=e.getTemplate("exportexcel"),n=e.groupDataChart(t.users),r=$(".bz-rp-bam-resourcemonitor-workinprogressuser-charts",e.content).empty();$.isEmptyObject(n)||(r.append($.tmpl(i,{},{getReportExcelUrl:e.getReportExcelUrl("bam.resources.user"),showExcelIcon:!e.device||"desktop"==e.device.toLowerCase()})),$.each(n,function(t,i){e.drawCharts(i,r)}))}else{var o=e.components.dimension.dimensions.length?2:1;e.renderMessage(o)}})},excecuteFilterChange:function(){var t="filters="+JSON.stringify(this.model);this.drawReport(t)},drawCharts:function(t,e){var i=this.getTemplate("chart");e.append($.tmpl(i,t[0]));var n={dataSource:{data:t},legend:{position:"top"},seriesDefaults:{tooltip:{visible:!1},type:"bar"},series:[{field:"onTime",name:this.getResource("reports-general-ontime-label"),color:"#8bbc21"},{field:"onRisk",name:this.getResource("reports-general-onrisk-label"),color:"#FFCF40"},{field:"overdue",name:this.getResource("reports-general-overdue-label"),color:"#FF4040"}],categoryAxis:{field:"fieldName",reverse:!0}};$.extend(n,this.calculateGraphHeight(t.length));var r=this.graphics.getDataVizObject(n);$(".bz-rp-chart",e).last().kendoChart(r)},groupDataChart:function(t){for(var e,i={},n=t.length;--n>=0;)e="-"+t[n].id+"-",t[n].fieldName=t[n].processName+" - "+t[n].taskName,"object"==typeof i[e]?i[e].push(t[n]):i[e]=new Array(t[n]);return i},renderMessage:function(t){var e=this.getTemplate("message");$(".bz-rp-bam-resourcemonitor-workinprogressuser-charts",this.content).html($.tmpl(e,{msg:t}))},getReportExcelUrl:function(t){var e=$.extend({},this.taskGuid,this.model),i="reportName="+t+"&filters="+JSON.stringify(e)+"&user="+bizagi.currentUser.idUser;return this.services.getExportExcelUrl(i)}}),bizagi.reporting.report.bamresourcemonitorworkinprogressuser.extend("bizagi.reporting.report.bamresourcemonitorworkinprogressteam",{},{init:function(t){this._super(t);var e=t.myTeam.id,i=t.myTeam.guid,n=t.myTeam.items;$.isEmptyObject(t.filters)&&(this.model={dimension:[{id:e,guid:i,values:n,includeEmptyValues:!1,type:"system"}]}),this.setReportNames("ResourceBAM","bamresourcemonitorworkinprogressteam")},renderContent:function(){var t=this,e=t.getTemplate("main");return t.content=$.tmpl(e),$.when(t.loadComponents()).pipe(function(){var e="filters="+JSON.stringify(t.model);return t.drawReport(e),t.content})},drawReport:function(t){var e=this;e.setFiltersForCustomRPComp(),$.when(e.services.getResourceMonitorWorkInProgressPerUser(t)).done(function(t){if(t.users.length){var i=e.getTemplate("exportexcel"),n=e.groupDataChart(t.users),r=$(".bz-rp-bam-resourcemonitor-workinprogressuser-charts",e.content).empty();$.isEmptyObject(n)||(r.append($.tmpl(i,{},{getReportExcelUrl:e.getReportExcelUrl("bam.resources.myteam"),showExcelIcon:!e.device||"desktop"==e.device.toLowerCase()})),$.each(n,function(t,i){e.drawCharts(i,r)}))}else{var o=e.components.dimension.dimensions.length?2:1;e.renderMessage(o)}})},postRender:function(){this.activateTab("bamresourcemonitorworkinprogressteam"),this.callModalWindow()},getReportExcelUrl:function(t){var e=$.extend({},this.taskGuid,this.model),i="reportName="+t+"&filters="+JSON.stringify(e)+"&user="+bizagi.currentUser.idUser;return this.services.getExportExcelUrl(i)}}),bizagi.reporting.report.extend("bizagi.reporting.report.sensors",{},{init:function(t){this._super(t),this.view="process.stopwatch",this.total=0,this.acttab="stopwatch",this.counter={sensor:{type:"counter",caseBased:!0}},this.stopwatch=-1,this.allSensors=[],this.dspSensors=[],this.cleanReferrerParams()},getFiltersObject:function(){return{process:{},dimension:[],time:{}}},initializeTemplates:function(){return{main:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-main",list:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-list",summaryAct:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-counters-actdate",summaryCrt:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-counters-crtdate",countdiagram:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-counters-countsgraph",acttrend:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-counters-acttrend",processview:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-processview",stopwatches:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-stopwatches",counters:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-counters",countersdata:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-counters-data",summaryCycleTime:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-stopwatches-cycletimesummary",summayLvService:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-stopwatches-lvservicesummary",durationHistogram:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-stopwatches-durationhistogram",durationTrend:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-stopwatches-durationtrend",actVsClose:bizagi.getTemplate("bizagi.reporting.report.sensors")+"#bz-rp-sensors-stopwatches-actvsclose"}},renderContent:function(){var t=this,e=t.getTemplate("main");return t.content=$.tmpl(e),$.when(t.loadComponents()).pipe(function(){return t.total&&(t.renderProcessList(),t.renderProcessView(),t.drawReport()),t.content})},postRender:function(){this.eventsHandlers(),this.appendTooltip(),this.setColumnsSize()},getDetailListObject:function(t){var e="dataViz"===t.dtlType?this.getGraphDtlObject(t):this.getSensorDtlObject(t);return e||!1},getGraphDtlObject:function(t){var e=t.sender.options.chartName;return"Sensors.Process.CounterSummary"===e&&{sensor:{id:t.dataItem.id,type:t.sender.options.detailList.type,caseBased:t.sender.options.detailList.caseBased},detailList:{reportName:e}}},getSensorDtlObject:function(t){return{sensor:t.sensor,detailList:t.detailList}},excecuteFilterChange:function(){var t="filters="+JSON.stringify(this.model);this.drawReport(t)},drawReport:function(){this.setFiltersForCustomRPComp(),"counter"===this.view||"process.counter"===this.view?this.renderCounters():"stopwatch"!==this.view&&"process.stopwatch"!==this.view||this.renderStopwatchData()},loadComponents:function(){var t=this,e=t.getTemplate("component"),i=$.tmpl(e,{components:t.jCMP});return t.content.prepend(i),t.loadDetailListComponent(),$.when(t.services.getSensorsList()).pipe(function(e){return t.allSensors=e,t.total=t.allSensors.processes.length,t.total&&(t.loadCustomReportsComponent(),t.model.process.id||t.updateModel(e.processes[0].id)),t.loadDimensionsComponent(t.getProcessObject(),"getSensorsDimensions")}).pipe(function(){return t.loadTimeComponent()})},renderProcessView:function(){var t=this.getTemplate("processview"),e=this.getTemplateComponent(this.content,"sensors-processview"),i=$.tmpl(t);e.html(i)},renderProcessList:function(){var t=this.getTemplate("list");$("#bz-rp-reports-sensors-list",this.content).html($.tmpl(t,this.allSensors,this.model.process))},renderCounters:function(){var t=this.getTemplate("counters");this.getTemplateComponent(this.content,"sensors-content").html($.tmpl(t,{caseBased:this.counter.sensor.caseBased})),this.renderCountersData()},renderCountersData:function(){var t=this,e=t.getCounterFilter();$.when(t.services.getCounterSummary(e)).done(function(i){var n=t.getTemplate("countersdata");t.getTemplateComponent(t.content,"sensors-counter-data").html($.tmpl(n)),t.renderCounterSummary(e,i),t.updateTables(),"process.counter"===t.view?t.paintCountDiagram(i):"counter"===t.view&&t.paintActivationTrend(e)})},renderStopwatchData:function(){var t=this,e=t.getTemplate("stopwatches"),i=t.getTemplateComponent(t.content,"sensors-content").empty();$.when(t.renderStopwatchTables()).done(function(){i.html($.tmpl(e)),t.renderStopwatchGraphs()})},updateTables:function(){var t=this,e=$(".table-wrapper",t.content).length;!e&&$(window).width()<1067?$("table.responsive",t.content).each(function(e,i){t.splitTable($(i))}):e&&$(window).width()>1067&&$("table.responsive",t.content).each(function(e,i){t.unsplitTable($(i))})},splitTable:function(t){t.wrap("<div class='table-wrapper' />");var e=t.clone();e.find("td:not(:first-child), th:not(:first-child)").css("display","none"),e.removeClass("responsive"),t.closest(".table-wrapper").append(e),e.wrap("<div class='pinned' />"),t.wrap("<div class='scrollable' />")},unsplitTable:function(t){t.closest(".table-wrapper").find(".pinned").remove(),t.unwrap(),t.unwrap()},renderStopwatchGraphs:function(){var t=this;if("stopwatch"===t.view){var e="filters="+JSON.stringify($.extend({},t.model,{sensor:{id:t.stopwatch,type:"stopwatch"}}));$.when(t.services.getSwDurationHistogram(e),t.services.getSwDurationTrend(e)).done(function(e,i){t.paintDurationHistogram(e[0]),t.paintDurationTrend(i[0]),t.paintActivationVsClosing(i[0])})}},renderStopwatchTables:function(){var t=this,e=$.Deferred(),i={},n={};"process.stopwatch"===t.view?n=i=$.extend({},t.model,{sensor:{}}):(i=$.extend({},t.model,{sensor:{id:t.stopwatch,type:"stopwatch",caseBased:!0}}),n=$.extend({},t.model,{sensor:{id:t.stopwatch,type:"stopwatch"}}));var r="filters="+JSON.stringify(i),o="filters="+JSON.stringify(n);return $.when(t.services.getCycleTimeSummary(r),t.services.getLvSeviceSummary(o)).done(function(i,n){e.resolve(),t.renderLvServiceSummary(n[0]),t.renderCycleTimeSummary(i[0]),t.updateTables()}),e},renderCycleTimeSummary:function(t){var e=this.getTemplate("summaryCycleTime"),i=this.getTemplateComponent(this.content,"sensors-stopwatch-cycletimesummary"),n={day:this.getResource("reports-general-day").toUpperCase().slice(0,1),hour:this.getResource("reports-general-hour").toUpperCase().slice(0,1),minute:this.getResource("reports-general-minute").toUpperCase().slice(0,1),getReportExcelUrl:this.getReportExcelUrl("sensor.stopwatch.summary"),showExcelIcon:!this.device||"desktop"==this.device.toLowerCase()};i.append($.tmpl(e,t,n))},renderLvServiceSummary:function(t){var e=this.getTemplate("summayLvService"),i=this.getTemplateComponent(this.content,"sensors-stopwatch-lvservicesummary"),n={getReportExcelUrl:this.getReportExcelUrl("sensor.stopwatch.levelofservice"),showExcelIcon:!this.device||"desktop"==this.device.toLowerCase()};i.html($.tmpl(e,t,n))},renderCounterSummary:function(t,e){var i=this.getTemplateComponent(this.content,"sensors-counters-summary"),n=this.counter.sensor.caseBased?this.getTemplate("summaryCrt"):this.getTemplate("summaryAct"),r={getReportExcelUrl:this.getReportExcelUrl("sensor.counters.summary"),showExcelIcon:!this.device||"desktop"==this.device.toLowerCase()};i.html($.tmpl(n,e,r))},paintDurationTrend:function(t){var e=this,i=e.getTemplate("durationTrend"),n=new Date(e.model.time.dateFrom),r=new Date(e.model.time.dateTo),o="",s=[],a=e.getTemplateComponent(e.content,"sensors-stopwatch-durationtrend");switch(a.html($.tmpl(i)),t.range){case"Days":for(o="MM/dd";n<=r;n.setDate(n.getDate()+1))s.push(e.getDateRange(t.durationTrend,n,"durationDays"));break;case"Months":for(o="MM/yy";n<=r;n.setMonth(n.getMonth()+1))s.push(e.getDateRange(t.durationTrend,n,"durationDays"));break;case"Years":for(o="yyyy";n<=r;n.setFullYear(n.getFullYear()+1))s.push(e.getDateRange(t.durationTrend,n,"durationDays"))}var l={dataSource:{data:s},seriesDefaults:{tooltip:{visible:!0,template:"#= kendo.format('{0:"+o+"}', category) #, #=value#"}},series:[{type:"line",field:"value",categoryField:"date",name:e.getResource("bz-rp-sensors-stopwatches-drttrend-name")}],categoryAxis:{baseUnit:t.range?t.range.toLowerCase()+"s":"",field:"date",labels:{format:o,padding:{left:-10}}}};$.extend(!0,l,e.setLabelSteps(s.length));var h=e.graphics.getDataVizObject(l);a.find(".bz-rp-chart").kendoChart(h)},paintActivationVsClosing:function(t){var e=this,i=e.getTemplate("actVsClose"),n=new Date(e.model.time.dateFrom),r=new Date(e.model.time.dateTo),o="",s=[],a=e.getTemplateComponent(e.content,"sensors-stopwatch-actvscls");switch(a.html($.tmpl(i)),t.range){case"Days":for(o="MM/dd";n<=r;n.setDate(n.getDate()+1))s.push(e.getActivationVsClosingData(t.activationClosingTrend,n));break;case"Months":for(o="MM/yy";n<=r;n.setMonth(n.getMonth()+1))s.push(e.getActivationVsClosingData(t.activationClosingTrend,n));break;case"Years":for(o="yyyy";n<=r;n.setFullYear(n.getFullYear()+1))s.push(e.getActivationVsClosingData(t.activationClosingTrend,n))}var l={dataSource:{data:s},seriesDefaults:{tooltip:{visible:!0,template:"#= kendo.format('{0:"+o+"}', category) #, #=value#"},labels:{visible:!1,background:"none"}},series:[{type:"line",field:"activations",categoryField:"date",name:e.getResource("bz-rp-sensors-stopwatches-actvsclose-name1")},{type:"line",field:"closings",categoryField:"date",name:e.getResource("bz-rp-sensors-stopwatches-actvsclose-name2")}],categoryAxis:{baseUnit:t.range?t.range.toLowerCase()+"s":"",field:"date",labels:{format:o,padding:{left:-10}}}};$.extend(!0,l,e.setLabelSteps(s.length));var h=e.graphics.getDataVizObject(l);a.find(".bz-rp-chart").kendoChart(h)},getActivationVsClosingData:function(t,e){for(var i,n={activations:0,closings:0,date:new Date(e)},r=0,o=t.length;r<o;r++)i=new Date(t[r].date.month+"/"+t[r].date.day+"/"+t[r].date.year),e.getTime()===i.getTime()&&(n.activations=t[r].activations,n.closings=t[r].closings);return n},paintActivationTrend:function(t){var e=this,i=e.getTemplateComponent(e.content,"sensors-countersgraph"),n=e.model.time.dateTo,r=e.model.time.dateFrom,o=e.getTemplate("acttrend"),s=$.tmpl(o);i.empty().append(s),$.when(e.services.getCounterTrend(t)).pipe(function(t){var i=new Date(r),o=new Date(n),s="",a=[];switch(t.scale){case"DAY":for(s="MM/dd";i<=o;i.setDate(i.getDate()+1))a.push(e.getDateRange(t.rows,i,"activations"));break;case"MONTH":for(s="MM/yy";i<=o;i.setMonth(i.getMonth()+1))a.push(e.getDateRange(t.rows,i,"activations"));break;case"YEAR":for(s="yyyy";i<=o;i.setFullYear(i.getFullYear()+1))a.push(e.getDateRange(t.rows,i,"activations"))}var l={dataSource:{data:a},seriesDefaults:{tooltip:{visible:!0,template:"#= kendo.format('{0:"+s+"}', category) #, #=value#"}},series:[{type:"line",field:"value",categoryField:"date",name:e.getResource("bz-rp-sensors-counters-countertrend-name")}],categoryAxis:{baseUnit:t.scale.toLowerCase()+"s",field:"date",labels:{format:s,padding:{left:-10}}}};return $.extend(!0,l,e.setLabelSteps(a.length)),e.graphics.getDataVizObject(l)}).done(function(t){i.find(".bz-rp-chart").kendoChart(t)}).fail(function(t){e.setNoDataAvailableLabel(i)})},paintDurationHistogram:function(t){var e=this.getTemplate("durationHistogram"),i=this.getTemplateComponent(this.content,"sensors-stopwatch-durationhistogram");if(i.html($.tmpl(e)),t.items.length){var n=this.getDurationtHistogramData(t),r={dataSource:{data:n.items,sort:{field:"days",dir:"asc"}},seriesDefaults:{type:"area"},series:[{field:"stopwatches",name:this.getResource("bz-rp-sensors-stopwatches-drthistogram-name")}],categoryAxis:{notes:{icon:{visible:!1},label:{visible:!1},line:{dashType:"dashDot",width:4,color:"red",length:400},data:[{value:n.linePosition}]},field:"days"}},o=this.graphics.getDataVizObject(r);i.find(".bz-rp-chart").kendoChart(o)}else this.setNoDataAvailableLabel(i)},getDurationtHistogramData:function(t){for(var e=t.expectedDuration,i=t.items,n=i.length,r=i.splice(15,n-15),o=0,s=0,a=r.length;s<a;s++)i[14].cases+=r[s].stopwatches;for(s=0,a=i.length;s<a;s++){if(i[s].days===e){o=s;break}if(i[s].days>e){var l=(i[(o=s)-1].stopwatches+i[o].stopwatches)/2;i.splice(s,0,{stopwatches:l,days:e});break}}return n>=15&&(i[14].days="Next Days"),{linePosition:o,items:i}},getCounterFilter:function(){var t=$.extend({},this.counter,this.model);return"filters="+JSON.stringify(t)},getProcessObject:function(){return{process:this.model.process}},loadSensorsDimensions:function(t){var e=this,i=e.getTemplateComponent(e.content,"filters-dimension");return $.when(e.services.getSensorsDimensions(t)).pipe(function(t){e.components.initDimensionsComponent(i,t,e.getProcessObject(),e.model.dimension).subscribe("filterbydimension",function(t,i){e.model.dimension=i;var n="filters="+JSON.stringify(e.model);e.drawReport(n)})})},refreshProcessView:function(){var t=$("ul.ui-bizagi-wp-widget-reports-menu",this.content);this.view="process."+this.acttab,this.counter.sensor={type:this.counter.sensor.type,caseBased:this.counter.sensor.caseBased},this.stopwatch=-1,t.removeClass("bz-rp-disabled"),this.drawReport()},refreshSensorsView:function(t,e){$("ul.ui-bizagi-wp-widget-reports-menu",this.content).addClass("bz-rp-disabled"),"counter"===e?(this.counter.sensor.id=t,this.view="counter"):"stopwatch"===e&&(this.stopwatch=t,this.view="stopwatch"),this.drawReport()},getDateRange:function(t,e,i){for(var n,r={value:0,date:new Date(e)},o=0,s=t.length;o<s;o++)n=new Date(t[o].date.month+"/"+t[o].date.day+"/"+t[o].date.year),e.getTime()===n.getTime()&&(r.value=t[o][i]);return r},paintCountDiagram:function(t){var e=t.counters.length,i=this.getTemplateComponent(this.content,"sensors-countersgraph"),n=this.getTemplate("countdiagram");if(i.html($.tmpl(n)),e){for(var r=[],o=0;o<e;o+=1)r.push({serie:"",categoryAxis:"",id:""}),void 0!==t.counters[o].percentage?r[o].categoryAxis=t.counters[o].name+" ("+t.counters[o].percentage+")":r[o].categoryAxis=t.counters[o].name,r[o].serie=t.counters[o].instances,r[o].id=t.counters[o].id;var s={dataSource:{data:r},seriesDefaults:{type:"column"},chartName:"Sensors.Process.CounterSummary",detailList:{type:"counter",caseBased:!0},series:[{field:"serie",name:this.getResource("bz-rp-sensors-counters-countsdiagram-name"),color:"#8bbc21"}],categoryAxis:{field:"categoryAxis"}},a=this.graphics.getDataVizObject(s);i.find(".bz-rp-chart").kendoChart(a)}else this.setNoDataAvailableLabel(i)},highlightItem:function(t){$("#bz-rp-sensors-processlist .bz-rp-sensors-sltitem",this.content).removeClass("bz-rp-sensors-sltitem"),t.addClass("bz-rp-sensors-sltitem")},updateModel:function(t){this.model.dimension=[],this.model.process.id=t},eventsHandlers:function(){var t=this,e=$("#bz-rp-sensors-processlist div.bz-rp-sensors-sltitem",t.content).parent();$("#bz-rp-sensors-processlist",t.content).on("click",".bz-rp-sensors-processlist-row",function(i){var n=$(this).parent(),r=n.data("id");n.find("ul").slideToggle("fast",function(){"none"===$(this).css("display")?n.find("i").removeClass("bz-rp-sensors-open"):n.find("i").addClass("bz-rp-sensors-open")}),t.highlightItem($(this)),e.data("id")!==r?(e.find("ul").slideUp("fast"),e.find("i").removeClass("bz-rp-sensors-open"),t.updateModel(r),t.refreshProcessView(),t.refreshDimensions(t.getProcessObject()),e=n):t.refreshProcessView()}),$(".bz-rp-reports-sensors-header button.bz-rp-sensors-button-edit",t.content).on("click",function(e){t.loadReport("sensorsedt")}),$("#bz-rp-sensors-processlist ul",t.content).on("click","li",function(e){e.stopPropagation();var i=$(this);t.highlightItem(i),t.refreshSensorsView(i.data("id"),i.data("type"))}),$("#bz-rp-sensors-processview li",t.content).on("click",function(e){var i=$(this);i.hasClass("active")||(t.acttab=i.data("sensor"),t.view="process."+t.acttab,t.drawReport(),i.siblings("li").removeClass("ui-bizagi-wp-widget-reports-menu-active").end().addClass("ui-bizagi-wp-widget-reports-menu-active"))}),$("#bz-rp-sensors-content",t.content).on("click","#bz-rp-sensors-counters-cbcontainer li",function(e){e.stopPropagation();var i=$(this),n=($(e.target),i.find("input[type=radio]"));i.closest("ul").find("li input[type=radio]").attr("checked",!1),n.prop("checked",!0),n.attr("checked",!0),t.counter.sensor.caseBased="crtdate"===n.data("timerange"),t.renderCountersData()}),t.bindDtlSummaryEvents(),$("#bz-rp-sensors-content",t.content).on("click",".bz-rp-sensors-summary tr > td",function(i){if(i.stopPropagation(),"process.stopwatch"===t.view||"process.counter"===t.view){var n=$(this).parent(),r=n.data("id"),o=n.closest("table").data("type");t.refreshSensorsView(r,o);var s=e.find("li[data-type="+o+"][data-id="+r+"]");e.find("ul").slideDown(),t.highlightItem(s)}})},getReportExcelUrl:function(t){var e="reportName="+(t=t||"")+"&filters=",i=$.extend({},this.model,{sensor:{}});if(-1!==this.view.indexOf("counter")){var n=this.counter.sensor.caseBased;i.sensor={type:"counter",caseBased:n}}return e+=JSON.stringify(i)+"&user="+bizagi.currentUser.idUser,this.services.getExportExcelUrl(e)},bindDtlSummaryEvents:function(){var t=this;$("#bz-rp-sensors-content",t.content).on("click","#bz-rp-sensors-stopwatches-cycletimesummary .bz-rp-sensors-detaillist",function(e){e.stopPropagation();var i=$(this),n={detailList:{},sensor:{}},r=i.closest("tr").data("id"),o=i.closest("table").data("type"),s="Sensors.Stopwatch.CycleTimeSummary",a=i.parent().data("column");n.detailList=a?{columnName:a,reportName:s}:{reportName:s},n.sensor={id:r,type:o},n.dtlType="sensors",t.callDetailList(n)}),$("#bz-rp-sensors-content",t.content).on("click","#bz-rp-sensors-counters-summary .bz-rp-sensors-detaillist",function(e){e.stopPropagation();var i=$(this),n=i.closest("tr").data("id");i.closest("table").data("type");t.callDetailList({dtlType:"sensors",sensor:{id:n,type:"counter",caseBased:!0},detailList:{reportName:"Sensors.Process.CounterSummary"}})}),$("#bz-rp-sensors-content",t.content).on("click","#bz-rp-sensors-stopwatches-levelofservice .bz-rp-sensors-detaillist",function(e){e.stopPropagation();var i=$(this),n=i.closest("tr").data("id"),r=i.closest("table").data("type"),o=i.parent().data("daycount");t.callDetailList({dtlType:"sensors",sensor:{id:n,type:r},detailList:{reportName:"Sensors.Stopwatch.CycleTimeSummary",dayCount:o}})})},setColumnsSize:function(){this.setColumnsWidth()},refresh:function(){var t=this;t.refreshTimeout&&clearTimeout(t.refreshTimeout),t.refreshTimeout=setTimeout(function(){delete t.refreshTimeout,t.setColumnsSize(),t.updateTables(),$(".bz-rp-chart").each(function(){var t=$(this).data("kendoChart");t&&t.redraw()})},150)},appendTooltip:function(){$("#bz-rp-sensors-processview",this.content).tooltip({items:".bz-rp-summary-title-icon",tooltipClass:"biz-rp-tooltip"})}}),bizagi.reporting.report.extend("bizagi.reporting.report.sensorsedt",{},{init:function(t){this._super(t),this.allSensors=[],this.dspSensors=[],this.cacheId=-999,this.swStart=0,this.swEnd=0,this.cntGuid=0,this.FROM_SECTION="SENSORS",this.cleanReferrerParams()},getFiltersObject:function(){return{process:{}}},initializeTemplates:function(){return{main:bizagi.getTemplate("bizagi.reporting.report.sensorsedt")+"#bz-rp-sensorsedt-main",list:bizagi.getTemplate("bizagi.reporting.report.sensorsedt")+"#bz-rp-sensorsedt-list",newcounter:bizagi.getTemplate("bizagi.reporting.report.sensorsedt")+"#bz-rp-sensorsedt-countertable-create",newstopwatch:bizagi.getTemplate("bizagi.reporting.report.sensorsedt")+"#bz-rp-sensorsedt-stopwatchtable-create",stopwatchtooltip:bizagi.getTemplate("bizagi.reporting.report.sensorsedt")+"#bz-rp-sensorsedt-stopwatchtooltip",errormsg:bizagi.getTemplate("bizagi.reporting.report.sensorsedt")+"#bz-rp-sensorsedt-errormsg"}},renderContent:function(){var t=this,e=t.getTemplate("main");return t.content=$.tmpl(e),t.$processViewer=$(".bz-rp-processviewer-canvas",t.content),$.when(t.loadComponents(),t.services.getSensorsList()).pipe(function(e,i){return t.allSensors=i[0].processes,t.drawReport(),t.content})},postRender:function(){this.tooltipEvents(),this.eventsHandler(),this.setColumnsSize()},loadComponents:function(){return this.loadProcessesVersionComponent(this.FROM_SECTION)},drawReport:function(){this.enableCreation(),this.drawProcessModel(),this.renderSensorsList()},renderSensorsList:function(t){var e=t||{name:"",type:""},i=this.getTemplate("list"),n=this.model.process,r=this.getSensorsByProcessId(n);this.dspSensors=void 0!==r?r.sensors:[],$("#bz-rp-reports-sensors-create ul",this.content).remove(),$("#bz-rp-reports-sensors-list",this.content).html($.tmpl(i,r,e))},drawProcessModel:function(){this.$processViewer.data("sensor","none"),this.renderProcessViewer(this.$processViewer)},setColumnsSize:function(){this.setColumnsWidth()},getSensorsByProcessId:function(t){return this.allSensors.filter(function(e,i){return e.id===t.id})[0]},getSensorById:function(t){return this.dspSensors.filter(function(e,i){return e.id===t})[0]},toggleEdition:function(t){t.find(".bz-rp-sensors-form").toggleClass("bz-rp-form-edition").toggleClass("bz-rp-form-readonly")},applyEditionForCounters:function(t){var e=this,i=t.find(".bz-rp-sensors-form").find("input, textarea"),n=t.data("id"),r=e.cntGuid?e.cntGuid:t.data("guid"),o=i[0].value,s=i[1].value,a=i[2].value;if(e.isValidForm(i)){JSON.stringify({id:n,name:o});var l={id:n,name:o,displayName:s,description:a,guidTask:r},h="sensor="+JSON.stringify(l);$.when(e.services.updateCounter(h)).done(function(t){var n=$(i[0]),r=n.siblings(".bz-rp-errormsg");if(!0!==t.result){var s=e.getResource("bz-rp-sensorsedt-formvalidation-rptcounter");e.showErrorMessage(n,r,s)}else e.removeErrorMessage(n,r),e.cntGuid=0,e.$processViewer.data("sensor","none"),e.enableCreation(),e.resetSensorsList({name:o,type:"counter"})})}},applyEditionForStopwatches:function(t){var e=this,i=t.find(".bz-rp-sensors-form").find("input, textarea"),n=i[0].value,r=t.data("id"),o=i[1].value,s=e.swStart?e.swStart:t.data("guidfrom"),a=e.swEnd?e.swEnd:t.data("guidto"),l=i[2].value,h=i[3].value,c=i[4].value,d=i[5].value;if(e.isValidForm(i)){JSON.stringify({id:r,name:n});var u={id:r,name:n,displayName:o,description:l,guidTaskFrom:s,guidTaskTo:a,slaDate:{days:h,hours:c,minutes:d}},p="sensor="+JSON.stringify(u);$.when(e.services.updateStopwatch(p)).done(function(t){var r=$(i[0]),o=r.siblings(".bz-rp-errormsg");if(!0!==t.result){var s=e.getResource("bz-rp-sensorsedt-formvalidation-rptstopwatch");e.showErrorMessage(r,o,s)}else e.removeErrorMessage(r,o),e.swStart=0,e.swEnd=0,e.$processViewer.data("sensor","none").processviewer("unSelectAllShapes"),e.enableCreation(),e.resetSensorsList({name:n,type:"stopwatch"})})}},resetForm:function(t){var e=$(".bz-rp-sensors-form",t);e.find(".bz-rp-errormsg").empty(),e[0].reset()},appendForm:function(t){var e=this.getTemplate(t),i=$("#bz-rp-reports-sensors-create > form",this.content);return i.html($.tmpl(e)),i},resetSensorsList:function(t){var e=this;$.when(e.services.getSensorsList()).done(function(i){e.allSensors=i.processes,e.renderSensorsList(t)})},createCounter:function(t){var e=this,i=$("#bz-rp-reports-sensors-create form",e.content),n=i.find("input, textarea"),r=n[0].value,o=n[1].value,s=n[2].value;if(e.isValidForm(n)){JSON.stringify({name:r});var a={name:r,displayName:o,description:s,guidTask:t},l="sensor="+JSON.stringify(a);$.when(e.services.addCounter(l)).done(function(t){var o=$(n[0]),s=o.siblings(".bz-rp-errormsg");if(!0!==t.result){var a=e.getResource("bz-rp-sensorsedt-formvalidation-rptcounter");e.showErrorMessage(o,s,a)}else e.removeErrorMessage(o,s),i.empty(),e.$processViewer.data("sensor","none"),e.cacheId=-999,e.resetSensorsList({name:r,type:"counter"})})}},createStopwatch:function(t,e){var i=this,n=$("#bz-rp-reports-sensors-create form",i.content),r=n.find("input, textarea"),o=r[0].value,s=r[1].value,a=r[2].value,l=r[3].value,h=r[4].value,c=r[5].value;if(i.isValidForm(r)){JSON.stringify({name:o});var d={name:o,displayName:s,description:a,guidTaskFrom:t,guidTaskTo:e,slaDate:{days:l,hours:h,minutes:c}},u="sensor="+JSON.stringify(d);$.when(i.services.addStopwatch(u)).done(function(t){var e=$(r[0]),s=e.siblings(".bz-rp-errormsg");if(!0!==t.result){var a=i.getResource("bz-rp-sensorsedt-formvalidation-rptstopwatch");i.showErrorMessage(e,s,a)}else i.removeErrorMessage(e,s),n.empty(),i.cacheId=-999,i.$processViewer.data("sensor","none").processviewer("unSelectAllShapes"),i.resetSensorsList({name:o,type:"stopwatch"})})}},cancelCntCreation:function(){this.cntGuid=0,$("#bz-rp-reports-sensors-create ul",this.content).remove(),this.$processViewer.data("sensor","none").processviewer("unSelectAllShapes")},cancelSwCreation:function(){this.swStart=this.swEnd=0,$("#bz-rp-reports-sensors-create ul",this.content).remove(),this.$processViewer.data("sensor","none").processviewer("unSelectAllShapes").processviewer("clearRoute")},deleteCounters:function(t){var e=this,i=e.getResource("bz-rp-sensorsedt-deleteconfirmation"),n=t.data("id");$.when(bizagi.showConfirmationBox(i,"Bizagi","warning")).done(function(){var t="id="+n;$.when(e.services.deleteCounter(t)).done(function(){"none"===e.$processViewer.data("sensor")&&e.$processViewer.processviewer("unSelectAllShapes"),e.resetSensorsList()})})},deleteStopwatches:function(t){var e=this,i=e.getResource("bz-rp-sensorsedt-deleteconfirmation"),n=t.data("id");$.when(bizagi.showConfirmationBox(i,"Bizagi","warning")).done(function(){var t="id="+n;$.when(e.services.deleteStopwatch(t)).done(function(){"none"===e.$processViewer.data("sensor")&&e.$processViewer.processviewer("clearRoute"),e.resetSensorsList()})})},isValidForm:function(t){for(var e=!0,i=0,n=t.length;i<n;i++){var r=$(t[i]).siblings(".bz-rp-errormsg"),o=!0;$(t[i]).is("input[type=text]")?this.validateRequired($(t[i]),r)&&this.validatePattern($(t[i]),r)||(o=!1):$(t[i]).is("input[type=number]")?this.validateNumber($(t[i]),r)||(o=!1):$(t[i]).is("textarea")&&(this.validateRequired($(t[i]),r)||(o=!1)),o?this.removeErrorMessage(r):e=!1}return e},validateRequired:function(t,e){var i=!0;return""===t.val()&&(i=!1,this.showErrorMessage(t,e,this.getResource("bz-rp-sensorsedt-formvalidation-required"))),i},validatePattern:function(t,e){var i=!0;return-1!==t.val().search(/[$\\@\\\#%\^\&\*\(\)\[\]\+\_\{\}\`\~\=\|]/)&&(i=!1,this.showErrorMessage(t,e,this.getResource("bz-rp-sensorsedt-formvalidation-invalidcharts"))),i},validateNumber:function(t,e){var i=!0,n=parseInt(t.val()),r=parseInt(t.prop("min")),o=parseInt(t.prop("max"));return isNaN(n)?(i=!1,this.showErrorMessage(t,e,this.getResource("bz-rp-sensorsedt-formvalidation-number"))):(n<r||n>o)&&(i=!1,this.showErrorMessage(t,e,this.getResource("bz-rp-sensorsedt-formvalidation-invalidnumber")+" "+r+" - "+o)),i},showErrorMessage:function(t,e,i){if(e.length)e.html(i);else{var n=this.getTemplate("errormsg");t.after($.tmpl(n,{message:i})),t.parent().addClass("ui-bizagi-render-control-required")}},removeErrorMessage:function(t){t.parent().removeClass("ui-bizagi-render-control-required"),t.remove()},getTooltipContent:function(t){if("stopwatch"===this.$processViewer.data("sensor")){var e=t.id,i=$(t).find(".processviewer-hotspot-label").html(),n=this.getTemplate("stopwatchtooltip");return $.tmpl(n,{guid:e,taskName:i})}return""},enableApplyButton:function(){$("#bz-rp-reports-sensors-create .bz-rp-sensors-button-apply",this.content).removeAttr("disabled")},removeCrtMsg:function(){$("#bz-rp-reports-sensors-create span.bz-rp-errormsg:first-of-type",this.content).remove()},showAllPaths:function(t,e){var i=this,n="processId="+i.model.process.id+"&taskFrom="+t+"&taskTo="+e;i.$processViewer.processviewer("clearRoute"),$.when(i.services.getAllPaths(n)).done(function(n){var r=n.paths.length;if(r)for(var o=0;o<r;o++)i.$processViewer.processviewer("drawRoute",n.paths[o].codedPath);else i.$processViewer.processviewer("drawRoute",[t,e])})},disableCreation:function(){$("#bz-rp-reports-sensors-buttons button").attr("disabled","disabled")},enableCreation:function(){$("#bz-rp-reports-sensors-buttons button").removeAttr("disabled")},collpaseList:function(){var t=$("#bz-rp-reports-sensors-list li.bz-rp-sensors-selected",this.content);return t.removeClass("bz-rp-sensors-selected"),$(".bz-rp-sensors-form-container",t).slideUp("fast")},tooltipEvents:function(){var t=this;t.applyViewerTooltip(t.$processViewer,{}),$(document).off("click.swtooltip").on("click.swtooltip","button.bz-rp-sensors-tooltip-stopwathstarts, button.bz-rp-sensors-tooltip-stopwathends",function(e){var i=$(this),n=i.closest(".ui-tooltip"),r=i.closest(".bz-rp-sensors-tooltip-container").data("guid");if(r!==t.swStart&&r!==t.swEnd){switch(i.data("type")){case"swstarts":t.swStart&&t.$processViewer.processviewer("unSelectShape",t.swStart),t.$processViewer.processviewer("selectShape",r),t.swStart=r;break;case"swends":t.swEnd&&t.$processViewer.processviewer("unSelectShape",t.swEnd),t.$processViewer.processviewer("selectShape",r),t.swEnd=r}0!==t.swEnd&&0!==t.swStart&&(t.enableApplyButton(),t.showAllPaths(t.swStart,t.swEnd),t.removeCrtMsg())}n.remove()})},eventsHandler:function(){var t=this;$("#bz-rp-reports-sensors-buttons",t.content).on("click","button",function(e){var i=$(this);t.cntGuid=0,t.swStart=0,t.swEnd=0,t.$processViewer.processviewer("unSelectAllShapes").processviewer("clearRoute"),t.collpaseList(),i.hasClass("bz-rp-sensors-button-newstopwatch")?(t.$processViewer.data("sensor","stopwatch"),t.appendForm("newstopwatch"),t.requiredHandler(t)):i.hasClass("bz-rp-sensors-button-newcounter")&&(t.$processViewer.data("sensor","counter"),t.appendForm("newcounter"),t.requiredHandler(t))}),$("#bz-rp-reports-sensors-create",t.content).on("click",".bz-rp-sensors-form-createcounter button",function(e){var i=$(this);e.preventDefault(),i.hasClass("bz-rp-sensors-button-apply")?t.createCounter(t.cntGuid):i.hasClass("bz-rp-sensors-button-cancel")&&t.cancelCntCreation()}),$("#bz-rp-reports-sensors-create",t.content).on("click",".bz-rp-sensors-form-createstopwatch button",function(e){var i=$(this);e.preventDefault(),i.hasClass("bz-rp-sensors-button-apply")?t.createStopwatch(t.swStart,t.swEnd):i.hasClass("bz-rp-sensors-button-cancel")&&t.cancelSwCreation()}),$("#bz-rp-reports-sensors-list",t.content).on("click",".bz-rp-sensors-list-header",function(e){if(!$(e.target).is("button")&&"none"===t.$processViewer.data("sensor")){var i=$(this).closest("li"),n=i.data("id");t.cacheId!==n?$.when(t.collpaseList()).done(t.slideFormContainer(i)):t.slideFormContainer(i),t.cacheId=n}}),$("#bz-rp-reports-sensors-list",t.content).on("click","button",function(e){e.preventDefault();var i=$(this),n=i.closest("li"),r=n.data("type");i.hasClass("bz-rp-sensors-button-edit")?t.editionEvent(n,r):i.hasClass("bz-rp-sensors-button-cancel")?t.cancelEvent(n,r):i.hasClass("bz-rp-sensors-button-apply")?t.applyEvent(n,r):i.hasClass("bz-rp-sensors-button-delete")&&t.deleteEvent(n,r)}),t.$processViewer.on("click",".processviewer-hotspot",function(e){var i=$(this),n=t.$processViewer.data("sensor"),r=t.cntGuid=i.prop("id");"counter"===n&&(t.$processViewer.processviewer("unSelectAllShapes").processviewer("selectShape",r),t.enableApplyButton(),t.removeCrtMsg())}),t.$processViewer.on("pvComplete",function(e){t.setProcessViewerHeight()}),$(".bz-rp-reports-sensors-header button.bz-rp-sensors-button-back").on("click",function(){t.loadReport("sensors")})},requiredHandler:function(t){$(".bz-rp-sensors-form .ui-required",t.content).on("focusout","input",function(e){e.preventDefault();var i=$(this),n=i.siblings(".bz-rp-errormsg"),r=!0;i.is("input[type=text]")?t.validateRequired(i,n)&&t.validatePattern(i,n)||(r=!1):i.is("input[type=number]")&&(t.validateNumber(i,n)||(r=!1)),r&&t.removeErrorMessage(n)}),$(".bz-rp-sensors-form .ui-required",t.content).on("focusout","textarea",function(e){e.preventDefault();var i=$(this),n=i.siblings(".bz-rp-errormsg");value=i.val(),""!=value&&t.removeErrorMessage(n)})},slideFormContainer:function(t){var e=this;$(".bz-rp-sensors-form-container",t).slideToggle("fast",function(){"none"===$(this).css("display")?t.removeClass("bz-rp-sensors-selected"):t.addClass("bz-rp-sensors-selected"),e.$processViewer.processviewer("unSelectAllShapes").processviewer("clearRoute"),t.hasClass("bz-rp-sensors-selected")&&("counter"===t.data("type")?e.$processViewer.processviewer("selectShape",t.data("guid")):"stopwatch"===t.data("type")&&e.showAllPaths(t.data("guidfrom"),t.data("guidto")))})},editionEvent:function(t,e){"none"===this.$processViewer.data("sensor")&&("stopwatch"===e?(this.swStart=t.data("guidfrom"),this.swEnd=t.data("guidto")):this.cntGuid=t.data("guid"),this.disableCreation(),this.$processViewer.data("sensor",e),this.toggleEdition(t))},cancelEvent:function(t,e){this.$processViewer.data("sensor","none").processviewer("unSelectAllShapes"),"stopwatch"===e?(this.swStart=0,this.swEnd=0,this.showAllPaths(t.data("guidfrom"),t.data("guidto"))):(this.cntGuid=0,this.$processViewer.processviewer("selectShape",t.data("guid"))),this.enableCreation(),this.resetForm(t),this.toggleEdition(t)},applyEvent:function(t,e){"counter"===e?this.applyEditionForCounters(t):this.applyEditionForStopwatches(t)},refresh:function(){var t=this;t.refreshTimeout&&clearTimeout(t.refreshTimeout),t.refreshTimeout=setTimeout(function(){delete t.refreshTimeout,t.setColumnsSize(),t.setProcessViewerHeight(t.$processViewer)},150)},setProcessViewerHeight:function(){var t=$(document).height(),e=this.$processViewer.offset().top;this.$processViewer.processviewer("resize",t-e-50)},deleteEvent:function(t,e){"counter"===e?this.deleteCounters(t):this.deleteStopwatches(t)}}),bizagi.reporting.component.controller("bizagi.reporting.component.customreports",{init:function(t,e,i){i=i||{},this._super(t),this.reportSet=i.info.reportSet,this.reportName=i.info.reportName,this.filters=i.filters,this.services=e,this.modal=[],this.render()},loadTemplates:function(){var t={button:bizagi.getTemplate("bizagi.reporting.component.customreports")+"#bz-rp-components-customreports-button",form:bizagi.getTemplate("bizagi.reporting.component.customreports")+"#bz-rp-components-customreports-form","modal-container":bizagi.getTemplate("bizagi.reporting.component.customreports")+"#bz-rp-components-customreports-container",message:bizagi.getTemplate("bizagi.reporting.component.customreports")+"#bz-rp-components-customreports-message"};return this._super(t)},renderComponent:function(){var t=this.getTemplate("button");return $.tmpl(t)},postRender:function(){this.eventsHandler()},appendModal:function(){if(!this.modal.length){var t=this.getTemplate("modal-container");this.modal=$.tmpl(t),this.modal.appendTo("body")}},showCustomReportsDialog:function(t){var e=this;e.modal.append(t);t.dialog({resizable:!1,dialogClass:"bz-rp-components-custom-reports-dialog",modal:!0,appendTo:e.modal,title:e.getResource("bz-rp-components-customreports-title"),draggable:!1,maximize:!1,close:function(){$(this).remove()},buttons:[{text:e.getResource("confirmation-savebox-save"),click:function(t){var i=$(t.target).closest("button");t.preventDefault(),$.when(e.saveQuery()).done(function(){i.remove()})}},{text:e.getResource("render-form-dialog-box-close"),click:function(){$(this).dialog("close")}}]})},saveQuery:function(){var t=this,e=$.Deferred(),i=$("#bz-rp-components-customereports-form",t.modal)[0].elements,n=t.getJSON(i);return t.validateFields(i)?($.when(t.services.customReportsSaveQuery(n,$(".bz-rp-components-customreports-message",t.modal))).done(function(n){!1===n.status?"filterTooLong"==n.message?(t.showMessage(t.getResource("bz-rp-components-customreports-filtertoolong"),$(i[0]).siblings(".bz-rp-messagecnt")),e.reject()):(t.showMessage(t.getResource("bz-rp-components-customreports-alreadyexist"),$(i[0]).siblings(".bz-rp-messagecnt")),e.reject()):($("#bz-rp-components-custom-reports-warpper",t.modal).remove(),$("#bz-rp-components-customreports-message",t.modal).show().append(t.getResource("bz-rp-components-customreports-sucessfulsave")),e.resolve())}),e.promise()):e.reject()},validateFields:function(t){for(var e=!0,i=0,n=t.length;i<n;i++){var r=$(t[i]).siblings(".bz-rp-messagecnt");this.validateRequired($(t[i]))?this.validateSpecialCharacters($(t[i]))?this.removeMessage(r):(e=!1,this.showMessage(this.getResource("bz-rp-components-customreports-invalidvalue"),r)):(e=!1,this.showMessage(this.getResource("bz-rp-components-customreports-required"),r))}return e},validateRequired:function(t){var e=!0;return t.attr("required")&&""===t.val()&&(e=!1),e},validateSpecialCharacters:function(t){var e=!0;return new RegExp(/^[a-zA-Z0-9- ]*$/).test(t.val())||(e=!1),e},showMessage:function(t,e){var i=this.getTemplate("message");e.html($.tmpl(i,{message:t}))},removeMessage:function(t){$(".bz-rp-errormsg",t).remove()},setReportsFilters:function(t){this.filters=t},getJSON:function(t){var e={name:t[0].value,description:t[1].value,reportSet:this.reportSet,filterParameters:this.filters};return"parameters="+JSON.stringify(e)},eventsHandler:function(){var t=this,e=t.getTemplate("form");$("#bz-rp-custom-reports-button",t.content).on("click",function(){var i=$.tmpl(e,{name:t.reportName});t.appendModal(),t.showCustomReportsDialog(i)})}}),function(t,e){var i,n=window.kendo=window.kendo||{cultures:{}},r=t.extend,o=t.each,s=t.isArray,a=t.proxy,l=t.noop,h=Math,c=window.JSON||{},d={},u=/%/,p=/\{(\d+)(:[^\}]+)?\}/g,f=/(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+)?/i,g=/^(\+|-?)\d+(\.?)\d*$/,m="function",v="string",y="number",b="object",w="null",x="boolean",_="undefined",k={},C={},S=[].slice,T=window.Globalize;function P(){}n.version="2014.1.416",P.extend=function(t){var e,i,n=function(){},o=this,s=t&&t.init?t.init:function(){o.apply(this,arguments)};for(e in n.prototype=o.prototype,i=s.fn=s.prototype=new n,t)null!=t[e]&&t[e].constructor===Object?i[e]=r(!0,{},n.prototype[e],t[e]):i[e]=t[e];return i.constructor=s,s.extend=o.extend,s},P.prototype._initOptions=function(t){this.options=U({},this.options,t)};var A=n.isFunction=function(t){return"function"==typeof t},D=function(){this._defaultPrevented=!0},z=function(){return!0===this._defaultPrevented},E=P.extend({init:function(){this._events={}},bind:function(t,i,n){var r,o,s,a,l=this,h=typeof t===v?[t]:t,c=typeof i===m;if(i===e){for(r in t)l.bind(r,t[r]);return l}for(r=0,o=h.length;r<o;r++)t=h[r],(a=c?i:i[t])&&(n&&(s=a,(a=function(){l.unbind(t,a),s.apply(l,arguments)}).original=s),(l._events[t]=l._events[t]||[]).push(a));return l},one:function(t,e){return this.bind(t,e,!0)},first:function(t,e){var i,n,r,o=typeof t===v?[t]:t,s=typeof e===m;for(i=0,n=o.length;i<n;i++)t=o[i],(r=s?e:e[t])&&(this._events[t]=this._events[t]||[]).unshift(r);return this},trigger:function(t,e){var i,n,r=this._events[t];if(r){for((e=e||{}).sender=this,e._defaultPrevented=!1,e.preventDefault=D,e.isDefaultPrevented=z,i=0,n=(r=r.slice()).length;i<n;i++)r[i].call(this,e);return!0===e._defaultPrevented}return!1},unbind:function(t,i){var n,r=this._events[t];if(t===e)this._events={};else if(r)if(i)for(n=r.length-1;n>=0;n--)r[n]!==i&&r[n].original!==i||r.splice(n,1);else this._events[t]=[];return this}});function M(t,e){if(e)return"'"+t.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'";var i=t.charAt(0),n=t.substring(1);return"="===i?"+("+n+")+":":"===i?"+e("+n+")+":";"+t+";o+="}var L=/^\w+/,I=/\$\{([^}]*)\}/g,B=/\\\}/g,R=/__CURLY__/g,O=/\\#/g,N=/__SHARP__/g,V=["","0","00","000","0000"];function F(t,e,i){return(i=(e=e||2)-(t+="").length)?V[e].substring(0,i)+t:t}function H(t){var e=t.css(n.support.transitions.css+"box-shadow")||t.css("box-shadow"),i=e&&e.match(f)||[0,0,0,0,0],r=h.max(+i[3],+(i[4]||0));return{left:-i[1]+r,right:+i[1]+r,bottom:+i[2]+r}}function U(t){var e=1,i=arguments.length;for(e=1;e<i;e++)$(t,arguments[e]);return t}function $(t,e){var i,r,o,s,a=n.data.ObservableArray,l=n.data.DataSource,h=n.data.HierarchicalDataSource;for(i in e)(o=typeof(r=e[i]))===b&&null!==r&&r.constructor!==Array&&r.constructor!==a&&r.constructor!==l&&r.constructor!==h?r instanceof Date?t[i]=new Date(r.getTime()):A(r.clone)?t[i]=r.clone():(s=t[i],t[i]=typeof s===b&&s||{},$(t[i],r)):o!==_&&(t[i]=r);return t}function j(t,i,n){for(var r in i)if(i.hasOwnProperty(r)&&i[r].test(t))return r;return n!==e?n:t}function G(t){return t.replace(/\-(\w)/g,function(t,e){return e.toUpperCase()})}i={paramName:"data",useWithBlock:!0,render:function(t,e){var i,n,r="";for(i=0,n=e.length;i<n;i++)r+=t(e[i]);return r},compile:function(e,i){var o,s,a,l=r({},this,i),h=l.paramName,c=h.match(L)[0],d=l.useWithBlock,u="var o,e=kendo.htmlEncode;";if(A(e))return 2===e.length?function(i){return e(t,{data:i}).join("")}:e;for(u+=d?"with("+h+"){":"",u+="o=",s=e.replace(B,"__CURLY__").replace(I,"#=e($1)#").replace(R,"}").replace(O,"__SHARP__").split("#"),a=0;a<s.length;a++)u+=M(s[a],a%2==0);u+=d?";}":";",u=(u+="return o;").replace(N,"#");try{return(o=new Function(c,u))._slotCount=Math.floor(s.length/2),o}catch(t){throw new Error(n.format("Invalid template:'{0}' Generated code:'{1}'",e,u))}}},function(){var t,e,i,n=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},o={}.toString;function s(t){return n.lastIndex=0,n.test(t)?'"'+t.replace(n,function(t){var e=r[t];return typeof e===v?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}typeof Date.prototype.toJSON!==m&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?F(this.getUTCFullYear(),4)+"-"+F(this.getUTCMonth()+1)+"-"+F(this.getUTCDate())+"T"+F(this.getUTCHours())+":"+F(this.getUTCMinutes())+":"+F(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),typeof c.stringify!==m&&(c.stringify=function(n,r,a){var l;if(t="",e="",typeof a===y)for(l=0;l<a;l+=1)e+=" ";else typeof a===v&&(e=a);if(i=r,r&&typeof r!==m&&(typeof r!==b||typeof r.length!==y))throw new Error("JSON.stringify");return function n(r,a){var l,h,c,d,u,p,f=t,g=a[r];if(g&&typeof g===b&&typeof g.toJSON===m&&(g=g.toJSON(r)),typeof i===m&&(g=i.call(a,r,g)),(p=typeof g)===v)return s(g);if(p===y)return isFinite(g)?String(g):w;if(p===x||p===w)return String(g);if(p===b){if(!g)return w;if(t+=e,u=[],"[object Array]"===o.apply(g)){for(d=g.length,l=0;l<d;l++)u[l]=n(l,g)||w;return c=0===u.length?"[]":t?"[\n"+t+u.join(",\n"+t)+"\n"+f+"]":"["+u.join(",")+"]",t=f,c}if(i&&typeof i===b)for(d=i.length,l=0;l<d;l++)typeof i[l]===v&&(c=n(h=i[l],g))&&u.push(s(h)+(t?": ":":")+c);else for(h in g)Object.hasOwnProperty.call(g,h)&&(c=n(h,g))&&u.push(s(h)+(t?": ":":")+c);return c=0===u.length?"{}":t?"{\n"+t+u.join(",\n"+t)+"\n"+f+"}":"{"+u.join(",")+"}",t=f,c}}("",{"":n})})}(),function(){var i=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|"[^"]*"|'[^']*'/g,r=/^(n|c|p|e)(\d*)$/i,o=/(\\.)|(['][^']*[']?)|(["][^"]*["]?)/g,s=/\,/g,a="",l=".",c=",",d="#",u="0",f="??",g={}.toString;function m(t){if(t){if(t.numberFormat)return t;if(typeof t===v){var e=n.cultures;return e[t]||e[t.split("-")[0]]||null}return null}return null}function b(t){return t&&(t=m(t)),t||n.cultures.current}n.cultures["en-US"]={name:"en-US",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSize:[3],percent:{pattern:["-n %","n %"],decimals:2,",":",",".":".",groupSize:[3],symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,",":",",".":".",groupSize:[3],symbol:"$"}},calendars:{standard:{days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December"],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},AM:["AM","am","AM"],PM:["PM","pm","PM"],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",F:"dddd, MMMM dd, yyyy h:mm:ss tt",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",m:"MMMM dd",M:"MMMM dd",s:"yyyy'-'MM'-'ddTHH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"},"/":"/",":":":",firstDay:0,twoDigitYearMax:2029}}},n.culture=function(t){var i,r,o=n.cultures;if(t===e)return o.current;(i=m(t)||o["en-US"]).calendar=i.calendars.standard,o.current=i,T&&((r=i.numberFormat).groupSizes=r.groupSize,r.percent.groupSizes=r.percent.groupSize,r.currency.groupSizes=r.currency.groupSize)},n.findCulture=m,n.getCulture=b,n.culture("en-US");var w=function(t,e){return e=e||0,t=t.toString().split("e"),(t=+((t=(t=Math.round(+(t[0]+"e"+(t[1]?+t[1]+e:e)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]-e:-e))).toFixed(e)},x=function(t,n,p){if(n){if("[object Date]"===g.call(t))return m=t,v=n,x=b(p).calendars.standard,_=x.days,k=x.months,(v=x.patterns[v]||v).replace(i,function(t){var i;return"d"===t?i=m.getDate():"dd"===t?i=F(m.getDate()):"ddd"===t?i=_.namesAbbr[m.getDay()]:"dddd"===t?i=_.names[m.getDay()]:"M"===t?i=m.getMonth()+1:"MM"===t?i=F(m.getMonth()+1):"MMM"===t?i=k.namesAbbr[m.getMonth()]:"MMMM"===t?i=k.names[m.getMonth()]:"yy"===t?i=F(m.getFullYear()%100):"yyyy"===t?i=F(m.getFullYear(),4):"h"===t?i=m.getHours()%12||12:"hh"===t?i=F(m.getHours()%12||12):"H"===t?i=m.getHours():"HH"===t?i=F(m.getHours()):"m"===t?i=m.getMinutes():"mm"===t?i=F(m.getMinutes()):"s"===t?i=m.getSeconds():"ss"===t?i=F(m.getSeconds()):"f"===t?i=h.floor(m.getMilliseconds()/100):"ff"===t?((i=m.getMilliseconds())>99&&(i=h.floor(i/10)),i=F(i)):"fff"===t?i=F(m.getMilliseconds(),3):"tt"===t&&(i=m.getHours()<12?x.AM[0]:x.PM[0]),i!==e?i:t.slice(1,t.length-1)});if(typeof t===y)return function(t,i,n){var h,p,g,m,v,y,x,_,k,C,S,T,P,A,D,z,E,M,L,I,B,R=(n=b(n)).numberFormat,O=R.groupSize[0],N=R[c],V=R[l],F=R.decimals,H=R.pattern[0],U=[],$=t<0,j=a,G=a,W=-1;if(t===e)return a;if(!isFinite(t))return t;if(!i)return n.name.length?t.toLocaleString():t.toString();if(v=r.exec(i)){if(g="p"===(i=v[1].toLowerCase()),((p="c"===i)||g)&&(O=(R=p?R.currency:R.percent).groupSize[0],N=R[c],V=R[l],F=R.decimals,h=R.symbol,H=R.pattern[$?0:1]),(m=v[2])&&(F=+m),"e"===i)return m?t.toExponential(F):t.toExponential();if(g&&(t*=100),$=(t=w(t,F))<0,y=(t=t.split(l))[0],x=t[1],$&&(y=y.substring(1)),G=y,(_=y.length)>=O)for(G=a,k=0;k<_;k++)k>0&&(_-k)%O==0&&(G+=N),G+=y.charAt(k);if(x&&(G+=V+x),"n"===i&&!$)return G;for(t=a,k=0,C=H.length;k<C;k++)t+="n"===(S=H.charAt(k))?G:"$"===S||"%"===S?h:S;return t}if($&&(t=-t),(i.indexOf("'")>-1||i.indexOf('"')>-1||i.indexOf("\\")>-1)&&(i=i.replace(o,function(t){var e=t.charAt(0).replace("\\",""),i=t.slice(1).replace(e,"");return U.push(i),f})),i=i.split(";"),$&&i[1])i=i[1],P=!0;else if(0===t){if(-1==(i=i[2]||i[0]).indexOf(d)&&-1==i.indexOf(u))return i}else i=i[0];if((g=-1!=i.indexOf("%"))&&(t*=100),(p=-1!=(L=i.indexOf("$")))&&"\\"===i[L-1]&&(i=i.split("\\").join(""),p=!1),(p||g)&&(O=(R=p?R.currency:R.percent).groupSize[0],N=R[c],V=R[l],F=R.decimals,h=R.symbol),(T=i.indexOf(c)>-1)&&(i=i.replace(s,a)),A=i.indexOf(l),C=i.length,-1!=A?(x=(x=(x=t.toString().split("e"))[1]?w(t,Math.abs(x[1])):x[0]).split(l)[1]||a,E=(z=i.lastIndexOf(u)-A)>-1,M=(D=i.lastIndexOf(d)-A)>-1,k=x.length,E||M||(C=(i=i.substring(0,A)+i.substring(A+1)).length,A=-1,k=0),E&&z>D?k=z:D>z&&(M&&k>D?k=D:E&&k<z&&(k=z)),k>-1&&(t=w(t,k))):t=w(t),D=i.indexOf(d),I=z=i.indexOf(u),W=-1==D&&-1!=z?z:-1!=D&&-1==z?D:D>z?z:D,D=i.lastIndexOf(d),z=i.lastIndexOf(u),B=-1==D&&-1!=z?z:-1!=D&&-1==z?D:D>z?D:z,W==C&&(B=W),-1!=W){if(y=(G=t.toString().split(l))[0],x=G[1]||a,_=y.length,x.length,$&&-1*t>=0&&($=!1),T)if(_===O&&_<A-I)y=N+y;else if(_>O){for(G=a,k=0;k<_;k++)k>0&&(_-k)%O==0&&(G+=N),G+=y.charAt(k);y=G}for(t=i.substring(0,W),$&&!P&&(t+="-"),k=W;k<C;k++){if(S=i.charAt(k),-1==A){if(B-k<_){t+=y;break}}else if(-1!=z&&z<k&&(j=a),A-k<=_&&A-k>-1&&(t+=y,k=A),A===k){t+=(x?V:a)+x,k+=B-A+1;continue}S===u?(t+=S,j=S):S===d&&(t+=j)}if(B>=W&&(t+=i.substring(B+1)),p||g){for(G=a,k=0,C=t.length;k<C;k++)G+="$"===(S=t.charAt(k))||"%"===S?h:S;t=G}if(C=U.length)for(k=0;k<C;k++)t=t.replace(f,U[k])}return t}(t,n,p)}var m,v,x,_,k;return t!==e?t:""};T&&(x=function(e,i,n){return t.isPlainObject(n)&&(n=n.name),T.format(e,i,n)}),n.format=function(t){var e=arguments;return t.replace(p,function(t,i,n){var r=e[parseInt(i,10)+1];return x(r,n?n.substring(1):"")})},n._extractFormat=function(t){return"{0:"===t.slice(0,3)&&(t=t.slice(3,t.length-1)),t},n._activeElement=function(){try{return document.activeElement}catch(t){return document.documentElement.activeElement}},n._round=w,n.toString=x}(),function(){var i=/\u00A0/g,r=/[eE][\-+]?[0-9]+/,o=/[+|\-]\d{1,2}/,a=/[+|\-]\d{1,2}:\d{2}/,l=/^\/Date\((.*?)\)\/$/,h=/[+-]/,c=["G","g","d","F","D","y","m","T","t"],d={2:/^\d{1,2}/,3:/^\d{1,3}/,4:/^\d{4}/},u={}.toString;function p(t,e,i){return!(t>=e&&t<=i)}function f(t){return t.charAt(0)}function g(e){return t.map(e,f)}function m(t){for(var e=0,i=t.length,n=[];e<i;e++)n[e]=(t[e]+"").toLowerCase();return n}function v(t){var e,i={};for(e in t)i[e]=m(t[e]);return i}function b(t,i,n){if(!t)return null;var r,s,l,h,c,u,f,m,y,b,w,x,_,k,C=function(t){for(var e=0;i[R]===t;)e++,R++;return e>0&&(R-=1),e},S=function(e){var i=d[e]||new RegExp("^\\d{1,"+e+"}"),n=t.substr(O,e).match(i);return n?(n=n[0],O+=n.length,parseInt(n,10)):null},T=function(e,i){for(var n,r,o,s=0,a=e.length;s<a;s++)if(r=(n=e[s]).length,o=t.substr(O,r),i&&(o=o.toLowerCase()),o==n)return O+=r,s+1;return null},P=function(){var e=!1;return t.charAt(O)===i[R]&&(O++,e=!0),e},A=n.calendars.standard,D=null,z=null,E=null,M=null,L=null,I=null,B=null,R=0,O=0,N=!1,V=new Date,F=A.twoDigitYearMax||2029,H=V.getFullYear();for(i||(i="d"),(h=A.patterns[i])&&(i=h),l=(i=i.split("")).length;R<l;R++)if(r=i[R],N)"'"===r?N=!1:P();else if("d"===r){if(s=C("d"),A._lowerDays||(A._lowerDays=v(A.days)),null===(E=s<3?S(2):T(A._lowerDays[3==s?"namesAbbr":"names"],!0))||p(E,1,31))return null}else if("M"===r){if(s=C("M"),A._lowerMonths||(A._lowerMonths=v(A.months)),null===(z=s<3?S(2):T(A._lowerMonths[3==s?"namesAbbr":"names"],!0))||p(z,1,12))return null;z-=1}else if("y"===r){if(null===(D=S(s=C("y"))))return null;2==s&&("string"==typeof F&&(F=H+parseInt(F,10)),(D=H-H%100+D)>F&&(D-=100))}else if("h"===r){if(C("h"),12==(M=S(2))&&(M=0),null===M||p(M,0,11))return null}else if("H"===r){if(C("H"),null===(M=S(2))||p(M,0,23))return null}else if("m"===r){if(C("m"),null===(L=S(2))||p(L,0,59))return null}else if("s"===r){if(C("s"),null===(I=S(2))||p(I,0,59))return null}else if("f"===r){if(s=C("f"),_=t.substr(O,s).match(d[3]),null!==(B=S(s))&&((_=_[0].length)<3&&(B*=Math.pow(10,3-_)),s>3&&(B=parseInt(B.toString().substring(0,3),10))),null===B||p(B,0,999))return null}else if("t"===r){if(s=C("t"),y=A.AM,b=A.PM,1===s&&(y=g(y),b=g(b)),!(c=T(b))&&!T(y))return null}else if("z"===r){if(u=!0,s=C("z"),"Z"===t.substr(O,1)){if(!f)return null;P();continue}if(!(m=t.substr(O,6).match(s>2?a:o)))return null;if(m=m[0],O=m.length,m=m.split(":"),p(w=parseInt(m[0],10),-12,13))return null;if(s>2&&(x=parseInt(m[1],10),isNaN(x)||p(x,0,59)))return null}else if("T"===r)f=P();else if("'"===r)N=!0,P();else if(!P())return null;return null===D&&null===z&&null===E&&(null!==M||null!==L||I||null)?(D=H,z=V.getMonth(),E=V.getDate()):(null===D&&(D=H),null===E&&(E=1)),c&&M<12&&(M+=12),u?(w&&(M+=-w),x&&(L+=-x),t=new Date(Date.UTC(D,z,E,M,L,I,B))):(t=new Date(D,z,E,M,L,I,B),k=t,M||23!==k.getHours()||k.setHours(k.getHours()+2)),D<100&&t.setFullYear(D),t.getDate()!==E&&u===e?null:t}n.parseDate=function(t,e,i){if("[object Date]"===u.call(t))return t;var r,o,a,d=0,p=null;if(t&&0===t.indexOf("/D")&&(p=l.exec(t)))return a=p=p[1],p=parseInt(p,10),(a=a.substring(1).split(h)[1])&&(p-=parseInt(a,10)*n.date.MS_PER_MINUTE),new Date(p);if(i=n.getCulture(i),!e){for(e=[],o=i.calendar.patterns,r=c.length;d<r;d++)e[d]=o[c[d]];d=0,e=["yyyy/MM/dd HH:mm:ss","yyyy/MM/dd HH:mm","yyyy/MM/dd","ddd MMM dd yyyy HH:mm:ss","yyyy-MM-ddTHH:mm:ss.fffffffzzz","yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mmzzz","yyyy-MM-ddTHH:mmzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-dd HH:mm:ss","yyyy-MM-dd HH:mm","yyyy-MM-dd","HH:mm:ss","HH:mm"].concat(e)}for(r=(e=s(e)?e:[e]).length;d<r;d++)if(p=b(t,e[d],i))return p;return p},n.parseInt=function(t,e){var i=n.parseFloat(t,e);return i&&(i|=0),i},n.parseFloat=function(t,e,o){if(!t&&0!==t)return null;if(typeof t===y)return t;t=t.toString();var s,a,l=(e=n.getCulture(e)).numberFormat,h=l.percent,c=l.currency,d=c.symbol,u=h.symbol,p=t.indexOf("-");return r.test(t)?(t=parseFloat(t.replace(l["."],".")),isNaN(t)&&(t=null),t):p>0?null:(p=p>-1,t.indexOf(d)>-1||o&&o.toLowerCase().indexOf("c")>-1?(s=(l=c).pattern[0].replace("$",d).split("n"),t.indexOf(s[0])>-1&&t.indexOf(s[1])>-1&&(t=t.replace(s[0],"").replace(s[1],""),p=!0)):t.indexOf(u)>-1&&(a=!0,l=h,d=u),t=t.replace("-","").replace(d,"").replace(i," ").split(l[","].replace(i," ")).join("").replace(l["."],"."),t=parseFloat(t),isNaN(t)?t=null:p&&(t*=-1),t&&a&&(t/=100),t)},T&&(n.parseDate=function(t,e,i){return"[object Date]"===u.call(t)?t:T.parseDate(t,e,i)},n.parseFloat=function(i,n){return typeof i===y?i:i===e||null===i?null:(t.isPlainObject(n)&&(n=n.name),i=T.parseFloat(i,n),isNaN(i)?null:i)})}(),function(){d.scrollbar=function(){var t,e=document.createElement("div");return e.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both",e.innerHTML="&nbsp;",document.body.appendChild(e),t=e.offsetWidth-e.scrollWidth,document.body.removeChild(e),t},d.isRtl=function(e){return t(e).closest(".k-rtl").length>0};var i=document.createElement("table");try{i.innerHTML="<tr><td></td></tr>",d.tbodyInnerHtml=!0}catch(t){d.tbodyInnerHtml=!1}d.touch="ontouchstart"in window,d.msPointers=window.MSPointerEvent,d.pointers=window.PointerEvent;var n=d.transitions=!1,r=d.transforms=!1,s="HTMLElement"in window?HTMLElement.prototype:[];d.hasHW3D="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix||"MozPerspective"in document.documentElement.style||"msPerspective"in document.documentElement.style,o(["Moz","webkit","O","ms"],function(){var t=this.toString(),e=typeof i.style[t+"Transition"]===v;if(e||typeof i.style[t+"Transform"]===v){var o=t.toLowerCase();return r={css:"ms"!=o?"-"+o+"-":"",prefix:t,event:"o"===o||"webkit"===o?o:""},e&&((n=r).event=n.event?n.event+"TransitionEnd":"transitionend"),!1}}),i=null,d.transforms=r,d.transitions=n,d.devicePixelRatio=window.devicePixelRatio===e?1:window.devicePixelRatio;try{d.screenWidth=window.outerWidth||window.screen?window.screen.availWidth:window.innerWidth,d.screenHeight=window.outerHeight||window.screen?window.screen.availHeight:window.innerHeight}catch(t){d.screenWidth=window.screen.availWidth,d.screenHeight=window.screen.availHeight}d.detectOS=function(t){var e,i=!1,n=[],r=!/mobile safari/i.test(t),o={fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.(\d+(\.\d+)?)/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},s={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},a={tablet:/playbook|ipad|fire/i},l={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,chrome:/chrome|crios/i,webkit:/webkit/i,ie:/MSIE|Windows\sPhone/i};for(var h in o)if(o.hasOwnProperty(h)&&(n=t.match(o[h]))){if("windows"==h&&"plugins"in navigator)return!1;(i={}).device=h,i.tablet=j(h,a,!1),i.browser=j(t,l,"default"),i.name=j(h,s),i[i.name]=!0,i.majorVersion=n[2],i.minorVersion=n[3].replace("_","."),e=i.minorVersion.replace(".","").substr(0,2),i.flatVersion=i.majorVersion+e+new Array(3-(e.length<3?e.length:2)).join("0"),i.cordova=typeof window.PhoneGap!==_||typeof window.cordova!==_,i.appMode=window.navigator.standalone||/file|local|wmapp/.test(window.location.protocol)||i.cordova,i.android&&(d.devicePixelRatio<1.5&&i.flatVersion<400||r)&&(d.screenWidth>800||d.screenHeight>800)&&(i.tablet=h);break}return i};var a,l,h,c,u=d.mobileOS=d.detectOS(navigator.userAgent);d.wpDevicePixelRatio=u.wp?screen.width/320:0,d.kineticScrollNeeded=u&&(d.touch||d.msPointers||d.pointers),d.hasNativeScrolling=!1,(u.ios||u.android&&u.majorVersion>2||u.wp)&&(d.hasNativeScrolling=u),d.mouseAndTouchPresent=d.touch&&!(d.mobileOS.ios||d.mobileOS.android),d.detectBrowser=function(t){var e=!1,i=[],n={webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(var r in n)if(n.hasOwnProperty(r)&&(i=t.match(n[r]))){(e={})[r]=!0,e[i[1].toLowerCase()]=!0,e.version=parseInt(document.documentMode||i[2],10);break}return e},d.browser=d.detectBrowser(navigator.userAgent),d.zoomLevel=function(){try{return d.touch?document.documentElement.clientWidth/window.innerWidth:d.browser.msie&&d.browser.version>=10?(top||window).document.documentElement.offsetWidth/(top||window).innerWidth:1}catch(t){return 1}},d.cssBorderSpacing=void 0!==document.documentElement.style.borderSpacing&&!(d.browser.msie&&d.browser.version<8),a=d.browser,l="",h=t(document.documentElement),c=parseInt(a.version,10),a.msie?l="ie":a.mozilla?l="ff":a.safari?l="safari":a.webkit?l="webkit":a.opera&&(l="opera"),l&&(l="k-"+l+" k-"+l+c),d.mobileOS&&(l+=" k-mobile"),h.addClass(l),d.eventCapture=document.documentElement.addEventListener;var p=document.createElement("input");d.placeholder="placeholder"in p,d.propertyChangeEvent="onpropertychange"in p,d.input=function(){for(var t,e=["number","date","time","month","week","datetime","datetime-local"],i=e.length,n={},r=0;r<i;r++)t=e[r],p.setAttribute("type",t),p.value="test",n[t.replace("-","")]="text"!==p.type&&"test"!==p.value;return n}(),p.style.cssText="float:left;",d.cssFloat=!!p.style.cssFloat,p=null,d.stableSort=function(){for(var t=[{index:0,field:"b"}],e=1;e<513;e++)t.push({index:e,field:"a"});return t.sort(function(t,e){return t.field>e.field?1:t.field<e.field?-1:0}),1===t[0].index}(),d.matchesSelector=s.webkitMatchesSelector||s.mozMatchesSelector||s.msMatchesSelector||s.oMatchesSelector||s.matchesSelector||function(e){for(var i=document.querySelectorAll?(this.parentNode||document).querySelectorAll(e)||[]:t(e),n=i.length;n--;)if(i[n]==this)return!0;return!1},d.pushState=window.history&&window.history.pushState;var f=document.documentMode;d.hashChange="onhashchange"in window&&!(d.browser.msie&&(!f||f<=8))}();var W={};function q(e,i,n,o,s){for(var a,h=0,c=e.length;h<c;h++)(a=t(e[h])).queue(function(){var t,e,h,c;W.promise(a,(e=n,h=o,c=s,typeof(t=i)===v&&(A(e)&&(c=e,e=400,h=!1),A(h)&&(c=h,h=!1),typeof e===x&&(h=e,e=400),t={effects:t,duration:e,reverse:h,complete:c}),r({effects:{},duration:400,reverse:!1,init:l,teardown:l,hide:!1},t,{completeCallback:t.complete,complete:l})))});return e}t.extend(W,{enabled:!0,Element:function(e){this.element=t(e)},promise:function(t,e){t.is(":visible")||t.css({display:t.data("olddisplay")||"block"}).css("display"),e.hide&&t.data("olddisplay",t.css("display")).hide(),e.init&&e.init(),e.completeCallback&&e.completeCallback(t),t.dequeue()},disable:function(){this.enabled=!1,this.promise=this.promiseShim},enable:function(){this.enabled=!0,this.promise=this.animatedPromise}}),W.promiseShim=W.promise,"kendoAnimate"in t.fn||r(t.fn,{kendoStop:function(t,e){return this.stop(t,e)},kendoAnimate:function(t,e,i,n){return q(this,t,e,i,n)},kendoAddClass:function(t,e){return n.toggleClass(this,t,e,!0)},kendoRemoveClass:function(t,e){return n.toggleClass(this,t,e,!1)},kendoToggleClass:function(t,e,i){return n.toggleClass(this,t,e,i)}});var Y=/&/g,Q=/</g,X=/"/g,Z=/'/g,K=/>/g;var J=function(t){return t.target};d.touch&&(J=function(t){var e="originalEvent"in t?t.originalEvent.changedTouches:"changedTouches"in t?t.changedTouches:null;return e?document.elementFromPoint(e[0].clientX,e[0].clientY):t.target},o(["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap"],function(e,i){t.fn[i]=function(t){return this.bind(i,t)}})),d.touch?d.mobileOS?(d.mousedown="touchstart",d.mouseup="touchend",d.mousemove="touchmove",d.mousecancel="touchcancel",d.click="touchend",d.resize="orientationchange"):(d.mousedown="mousedown touchstart",d.mouseup="mouseup touchend",d.mousemove="mousemove touchmove",d.mousecancel="mouseleave touchcancel",d.click="click",d.resize="resize"):d.pointers?(d.mousemove="pointermove",d.mousedown="pointerdown",d.mouseup="pointerup",d.mousecancel="pointercancel",d.click="pointerup",d.resize="orientationchange resize"):d.msPointers?(d.mousemove="MSPointerMove",d.mousedown="MSPointerDown",d.mouseup="MSPointerUp",d.mousecancel="MSPointerCancel",d.click="MSPointerUp",d.resize="orientationchange resize"):(d.mousemove="mousemove",d.mousedown="mousedown",d.mouseup="mouseup",d.mousecancel="mouseleave",d.click="click",d.resize="resize");var tt=/^([a-z]+:)?\/\//i;r(n,{ui:n.ui||{},fx:n.fx||function(t){return new n.effects.Element(t)},effects:n.effects||W,mobile:n.mobile||{},data:n.data||{},dataviz:n.dataviz||{ui:{roles:{}}},keys:{INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_DOT:110},support:n.support||d,animate:n.animate||q,ns:"",attr:function(t){return"data-"+n.ns+t},getShadows:H,wrap:function(e,i){var n,r=d.browser,o="rtl"==e.css("direction");if(e.parent().hasClass("k-animation-container")){var s=e.parent(".k-animation-container"),a=s[0].style;s.is(":hidden")&&s.show(),(n=u.test(a.width)||u.test(a.height))||s.css({width:e.outerWidth(),height:e.outerHeight(),boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"})}else{var l=H(e),c=e[0].style.width,p=e[0].style.height,f=u.test(c),g=u.test(p);r.opera&&(l.left=l.right=l.bottom=5),n=f||g,!f&&(!i||i&&c)&&(c=e.outerWidth()),!g&&(!i||i&&p)&&(p=e.outerHeight()),e.wrap(t("<div/>").addClass("k-animation-container").css({width:c,height:p,marginLeft:l.left*(o?1:-1),paddingLeft:l.left,paddingRight:l.right,paddingBottom:l.bottom})),n&&e.css({width:"100%",height:"100%",boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"})}return r.msie&&h.floor(r.version)<=7&&(e.css({zoom:1}),e.children(".k-menu").width(e.width())),e.parent()},deepExtend:U,getComputedStyles:function(e,i){var r,o={};return document.defaultView&&document.defaultView.getComputedStyle?(r=document.defaultView.getComputedStyle(e,""),i&&t.each(i,function(t,e){o[e]=r.getPropertyValue(e)})):(r=e.currentStyle,i&&t.each(i,function(t,e){o[e]=r[G(e)]})),n.size(o)||(o=r),o},size:function(t){var e,i=0;for(e in t)t.hasOwnProperty(e)&&"toJSON"!=e&&i++;return i},toCamelCase:G,toHyphens:function(t){return t.replace(/([a-z][A-Z])/g,function(t){return t.charAt(0)+"-"+t.charAt(1).toLowerCase()})},getOffset:n.getOffset||function(t,e,i){e||(e="offset");var n=t[e]();return d.mobileOS,d.browser.msie&&(d.pointers||d.msPointers)&&!i&&(n.top-=window.pageYOffset-document.documentElement.scrollTop,n.left-=window.pageXOffset-document.documentElement.scrollLeft),n},parseEffects:n.parseEffects||function(t){var e={};return o("string"==typeof t?t.split(" "):t,function(t){e[t]=this}),e},toggleClass:n.toggleClass||function(t,e,i,n){return e&&(e=e.split(" "),o(e,function(e,i){t.toggleClass(i,n)})),t},directions:n.directions||{left:{reverse:"right"},right:{reverse:"left"},down:{reverse:"up"},up:{reverse:"down"},top:{reverse:"bottom"},bottom:{reverse:"top"},in:{reverse:"out"},out:{reverse:"in"}},Observable:E,Class:P,Template:i,template:a(i.compile,i),render:a(i.render,i),stringify:a(c.stringify,c),eventTarget:J,htmlEncode:function(t){return(""+t).replace(Y,"&amp;").replace(Q,"&lt;").replace(K,"&gt;").replace(X,"&quot;").replace(Z,"&#39;")},isLocalUrl:function(t){return t&&!tt.test(t)},expr:function(t,e,i){return typeof e==v&&(i=e,e=!1),i=i||"d",(t=t||"")&&"["!==t.charAt(0)&&(t="."+t),t=e?function(t,e){var i,n,r,o,s=e||"d",a=1;for(n=0,r=t.length;n<r;n++)""!==(o=t[n])&&(0!==(i=o.indexOf("["))&&(-1==i?o="."+o:(a++,o="."+o.substring(0,i)+" || {})"+o.substring(i))),a++,s+=o+(n<r-1?" || {})":")"));return new Array(a).join("(")+s}(t.split("."),i):i+t},getter:function(t,e){return k[t]=k[t]||new Function("d","return "+n.expr(t,e))},setter:function(t){return C[t]=C[t]||new Function("d,value",n.expr(t)+"=value")},accessor:function(t){return{get:n.getter(t),set:n.setter(t)}},guid:function(){var t,e,i="";for(t=0;t<32;t++)e=16*h.random()|0,8!=t&&12!=t&&16!=t&&20!=t||(i+="-"),i+=(12==t?4:16==t?3&e|8:e).toString(16);return i},roleSelector:function(t){return t.replace(/(\S+)/g,"["+n.attr("role")+"=$1],").slice(0,-1)},triggeredByInput:function(t){return/^(label|input|textarea|select)$/i.test(t.target.tagName)},logToConsole:function(t){var e=window.console;void 0!==e&&e.log&&e.log(t)}});var et=E.extend({init:function(t,e){var i=this;i.element=n.jQuery(t).handler(i),E.fn.init.call(i),e=i.options=r(!0,{},i.options,e),i.element.attr(n.attr("role"))||i.element.attr(n.attr("role"),(e.name||"").toLowerCase()),i.element.data("kendo"+e.prefix+e.name,i),i.bind(i.events,e)},events:[],options:{prefix:""},_hasBindingTarget:function(){return!!this.element[0].kendoBindingTarget},_tabindex:function(t){t=t||this.wrapper;var e=this.element,i="tabindex",n=t.attr(i)||e.attr(i);e.removeAttr(i),t.attr(i,isNaN(n)?0:n)},setOptions:function(e){this._setEvents(e),t.extend(this.options,e)},_setEvents:function(t){for(var e,i=0,n=this.events.length;i<n;i++)e=this.events[i],this.options[e]&&t[e]&&this.unbind(e,this.options[e]);this.bind(this.events,t)},resize:function(t){var e=this.getSize(),i=this._size;!t&&i&&e.width===i.width&&e.height===i.height||(this._resize(e),this.trigger("resize",e),this._size=e)},getSize:function(){return n.dimensions(this.element)},size:function(t){if(!t)return this.getSize();this.setSize(t)},setSize:t.noop,_resize:t.noop,destroy:function(){this.element.removeData("kendo"+this.options.prefix+this.options.name),this.element.removeData("handler"),this.unbind()}});n.dimensions=function(t,e){var i=t[0];return e&&t.css(e),{width:i.offsetWidth,height:i.offsetHeight}},n.notify=l;var it=/template$/i,nt=/^\s*(?:\{(?:.|\r\n|\n)*\}|\[(?:.|\r\n|\n)*\])\s*$/,rt=/^\{(\d+)(:[^\}]+)?\}|^\[[A-Za-z_]*\]$/,ot=/([A-Z])/g;function st(t,i){var r;return 0===i.indexOf("data")&&(i=(i=i.substring(4)).charAt(0).toLowerCase()+i.substring(1)),i=i.replace(ot,"-$1"),null===(r=t.getAttribute("data-"+n.ns+i))?r=e:"null"===r?r=null:"true"===r?r=!0:"false"===r?r=!1:g.test(r)?r=parseFloat(r):nt.test(r)&&!rt.test(r)&&(r=new Function("return ("+r+")")()),r}function at(i,r){var o,s,a={};for(o in r)(s=st(i,o))!==e&&(it.test(o)&&(s=n.template(t("#"+s).html())),a[o]=s);return a}function lt(e,i){return t.contains(e,i)?-1:1}function ht(){var e=t(this);return t.inArray(e.attr("data-role"),["slider","rangeslider"])>0||e.is(":visible")}n.initWidget=function(i,r,o){var s,a,l,h,c,d,u,p;if(o?o.roles&&(o=o.roles):o=n.ui.roles,(d=(i=i.nodeType?i:i[0]).getAttribute("data-"+n.ns+"role"))&&(l=-1===d.indexOf(".")?o[d]:n.getter(d)(window))){for(p=st(i,"dataSource"),r=t.extend({},at(i,l.fn.options),r),p&&(r.dataSource=typeof p===v?n.getter(p)(window):p),h=0,c=l.fn.events.length;h<c;h++)(u=st(i,a=l.fn.events[h]))!==e&&(r[a]=n.getter(u)(window));return(s=t(i).data("kendo"+l.fn.options.prefix+l.fn.options.name))?s.setOptions(r):s=new l(i,r),s}},n.rolesFromNamespaces=function(t){var e,i,o=[];for(t[0]||(t=[n.ui,n.dataviz.ui]),e=0,i=t.length;e<i;e++)o[e]=t[e].roles;return r.apply(null,[{}].concat(o.reverse()))},n.init=function(e){var i=n.rolesFromNamespaces(S.call(arguments,1));t(e).find("[data-"+n.ns+"role]").addBack().each(function(){n.initWidget(this,{},i)})},n.destroy=function(e){t(e).find("[data-"+n.ns+"role]").addBack().each(function(){var e=n.widgetInstance(t(this));e&&e.destroy()})},n.resize=function(e){var i=t(e).find("[data-"+n.ns+"role]").addBack().filter(ht);if(i.length){var r=t.makeArray(i);r.sort(lt),t.each(r,function(){var e=n.widgetInstance(t(this));e&&e.resize()})}},n.parseOptions=at,r(n.ui,{Widget:et,roles:{},progress:function(e,i){var r,o,s,a,l=e.find(".k-loading-mask"),h=n.support,c=h.browser;i?l.length||(o=(r=h.isRtl(e))?"right":"left",a=e.scrollLeft(),s=c.webkit&&r?e[0].scrollWidth-e.width()-2*a:0,l=t("<div class='k-loading-mask'><span class='k-loading-text'>Loading...</span><div class='k-loading-image'/><div class='k-loading-color'/></div>").width("100%").height("100%").css("top",e.scrollTop()).css(o,Math.abs(a)+s).prependTo(e)):l&&l.remove()},plugin:function(i,r,o){var s,a=i.fn.options.name;o=o||"",(r=r||n.ui)[a]=i,r.roles[a.toLowerCase()]=i,s="getKendo"+o+a,a="kendo"+o+a,t.fn[a]=function(r){var o,s=this;return typeof r===v?(o=S.call(arguments,1),this.each(function(){var i,l,h=t.data(this,a);if(!h)throw new Error(n.format("Cannot call method '{0}' of {1} before it is initialized",r,a));if(typeof(i=h[r])!==m)throw new Error(n.format("Cannot find method '{0}' of {1}",r,a));if((l=i.apply(h,o))!==e)return s=l,!1})):this.each(function(){new i(this,r)}),s},t.fn[s]=function(){return this.data(a)}}});var ct={bind:function(){return this},nullObject:!0},dt=et.extend({init:function(t,e){et.fn.init.call(this,t,e),this.element.autoApplyNS(),this.wrapper=this.element,this.element.addClass("km-widget")},destroy:function(){et.fn.destroy.call(this),this.element.kendoDestroy()},options:{prefix:"Mobile"},events:[],view:function(){var t=this.element.closest(n.roleSelector("view splitview modalview drawer"));return n.widgetInstance(t,n.mobile.ui)||ct},viewHasNativeScrolling:function(){var t=this.view();return t&&t.options.useNativeScrolling},container:function(){var t=this.element.closest(n.roleSelector("view layout modalview drawer"));return n.widgetInstance(t,n.mobile.ui)||ct}});function ut(e,i){var n=e.nodeName.toLowerCase();return(/input|select|textarea|button|object/.test(n)?!e.disabled:"a"===n&&e.href||i)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")||t.expr.filters.hidden(this)}).length}r(n.mobile,{init:function(t){n.init(t,n.mobile.ui,n.ui,n.dataviz.ui)},appLevelNativeScrolling:function(){return n.mobile.application&&n.mobile.application.options&&n.mobile.application.options.useNativeScrolling},ui:{Widget:dt,roles:{},plugin:function(t){n.ui.plugin(t,n.mobile.ui,"Mobile")}}}),n.touchScroller=function(e,i){return t(e).map(function(e,r){return r=t(r),!(!d.kineticScrollNeeded||!n.mobile.ui.Scroller||r.data("kendoMobileScroller"))&&(r.kendoMobileScroller(i),r.data("kendoMobileScroller"))})[0]},n.preventDefault=function(t){t.preventDefault()},n.widgetInstance=function(t,e){var i,r,o=t.data(n.ns+"role"),s=[];if(o){if("content"===o&&(o="scroller"),e)if(e[0])for(i=0,r=e.length;i<r;i++)s.push(e[i].roles[o]);else s.push(e.roles[o]);else s=[n.ui.roles[o],n.dataviz.ui.roles[o],n.mobile.ui.roles[o]];for(o.indexOf(".")>=0&&(s=[n.getter(o)(window)]),i=0,r=s.length;i<r;i++){var a=s[i];if(a){var l=t.data("kendo"+a.fn.options.prefix+a.fn.options.name);if(l)return l}}}},n.onResize=function(e){var i=e;return d.mobileOS.android&&(i=function(){setTimeout(e,600)}),t(window).on(d.resize,i),i},n.unbindResize=function(e){t(window).off(d.resize,e)},n.attrValue=function(t,e){return t.data(n.ns+e)},n.days={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},t.extend(t.expr[":"],{kendoFocusable:function(e){var i=t.attr(e,"tabindex");return ut(e,!isNaN(i)&&i>-1)}});var pt=["mousedown","mousemove","mouseenter","mouseleave","mouseover","mouseout","mouseup","click"],ft={setupMouseMute:function(){var e=0,i=pt.length,n=document.documentElement;if(!ft.mouseTrap&&d.eventCapture){ft.mouseTrap=!0,ft.bustClick=!1,ft.captureMouse=!1;for(var r=function(e){ft.captureMouse&&("click"===e.type?ft.bustClick&&!t(e.target).is("label, input, [data-rel=external]")&&(e.preventDefault(),e.stopPropagation()):e.stopPropagation())};e<i;e++)n.addEventListener(pt[e],r,!0)}},muteMouse:function(t){ft.captureMouse=!0,t.data.bustClick&&(ft.bustClick=!0),clearTimeout(ft.mouseTrapTimeoutID)},unMuteMouse:function(){clearTimeout(ft.mouseTrapTimeoutID),ft.mouseTrapTimeoutID=setTimeout(function(){ft.captureMouse=!1,ft.bustClick=!1},400)}},gt={down:"touchstart mousedown",move:"mousemove touchmove",up:"mouseup touchend touchcancel",cancel:"mouseleave touchcancel"};d.touch&&(d.mobileOS.ios||d.mobileOS.android)?gt={down:"touchstart",move:"touchmove",up:"touchend touchcancel",cancel:"touchcancel"}:d.pointers?gt={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"}:d.msPointers&&(gt={down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp",cancel:"MSPointerCancel MSPointerLeave"}),!d.msPointers||"onmspointerenter"in window||t.each({MSPointerEnter:"MSPointerOver",MSPointerLeave:"MSPointerOut"},function(e,i){t.event.special[e]={delegateType:i,bindType:i,handle:function(e){var n,r=e.relatedTarget,o=e.handleObj;return r&&(r===this||t.contains(this,r))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=i),n}}});var mt=function(t){return gt[t]||t},vt=/([^ ]+)/g;n.applyEventMap=function(t,e){return t=t.replace(vt,mt),e&&(t=t.replace(vt,"$1."+e)),t};var yt=t.fn.on;function bt(t,e){return new bt.fn.init(t,e)}r(!0,bt,t),bt.fn=bt.prototype=new t,bt.fn.constructor=bt,bt.fn.init=function(e,i){return i&&i instanceof t&&!(i instanceof bt)&&(i=bt(i)),t.fn.init.call(this,e,i,wt)},bt.fn.init.prototype=bt.fn;var wt=bt(document);r(bt.fn,{handler:function(t){return this.data("handler",t),this},autoApplyNS:function(t){return this.data("kendoNS",t||n.guid()),this},on:function(){var t=this.data("kendoNS");if(1===arguments.length)return yt.call(this,arguments[0]);var e=this,i=S.call(arguments);typeof i[i.length-1]===_&&i.pop();var r=i[i.length-1],o=n.applyEventMap(i[0],t);if(d.mouseAndTouchPresent&&o.search(/mouse|click/)>-1&&this[0]!==document.documentElement){ft.setupMouseMute();var s=2===i.length?null:i[1],a=o.indexOf("click")>-1&&o.indexOf("touchend")>-1;yt.call(this,{touchstart:ft.muteMouse,touchend:ft.unMuteMouse},s,{bustClick:a})}return typeof r===v&&(e=this.data("handler"),r=e[r],i[i.length-1]=function(t){r.call(e,t)}),i[0]=o,yt.apply(this,i),this},kendoDestroy:function(t){return(t=t||this.data("kendoNS"))&&this.off("."+t),this}}),n.jQuery=bt,n.eventMap=gt,n.timezone=function(){var t={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},e={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6};function i(i,n){var r,o,s,a=n[3],l=n[4],h=n[5],c=n[8];return c||(n[8]=c={}),c[i]?c[i]:(isNaN(l)?0===l.indexOf("last")?(r=new Date(Date.UTC(i,t[a]+1,1,h[0]-24,h[1],h[2],0)),o=e[l.substr(4,3)],s=r.getUTCDay(),r.setUTCDate(r.getUTCDate()+o-s-(o>s?7:0))):l.indexOf(">=")>=0&&(r=new Date(Date.UTC(i,t[a],l.substr(5),h[0],h[1],h[2],0)),o=e[l.substr(0,3)],s=r.getUTCDay(),r.setUTCDate(r.getUTCDate()+o-s+(o<s?7:0))):r=new Date(Date.UTC(i,t[a],l,h[0],h[1],h[2],0)),c[i]=r)}function n(t,e,n,r){typeof t!=y&&(t=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));var o=function(t,e,i){var n=e[i];if("string"==typeof n&&(n=e[n]),!n)throw new Error('Timezone "'+i+'" is either incorrect, or kendo.timezones.min.js is not included.');for(var r=n.length-1;r>=0;r--){var o=n[r][3];if(o&&t>o)break}var s=n[r+1];if(!s)throw new Error('Timezone "'+i+'" not found on '+t+".");return s}(t,e,r);return{zone:o,rule:function(t,e,n){if(!(e=e[n])){var r=n.split(":"),o=0;return r.length>1&&(o=60*r[0]+Number(r[1])),[-1e6,"max","-","Jan",1,[0,0,0],o,"-"]}var s=new Date(t).getUTCFullYear();(e=jQuery.grep(e,function(t){var e=t[0],i=t[1];return e<=s&&(i>=s||e==s&&"only"==i||"max"==i)})).push(t),e.sort(function(t,e){return"number"!=typeof t&&(t=Number(i(s,t))),"number"!=typeof e&&(e=Number(i(s,e))),t-e});var a=e[jQuery.inArray(t,e)-1]||e[e.length-1];return isNaN(a)?a:null}(t,n,o[1])}}return{zones:{},rules:{},offset:function(t,e){if("Etc/UTC"==e||"Etc/GMT"==e)return 0;var i=n(t,this.zones,this.rules,e),r=i.zone,o=i.rule;return o?r[0]-o[6]:r[0]},convert:function(t,e,i){typeof e==v&&(e=this.offset(t,e)),typeof i==v&&(i=this.offset(t,i));var n=t.getTimezoneOffset(),r=(t=new Date(t.getTime()+6e4*(e-i))).getTimezoneOffset();return new Date(t.getTime()+6e4*(r-n))},apply:function(t,e){return this.convert(t,t.getTimezoneOffset(),e)},remove:function(t,e){return this.convert(t,e,t.getTimezoneOffset())},abbr:function(t,e){var i=n(t,this.zones,this.rules,e),r=i.zone,o=i.rule,s=r[2];return s.indexOf("/")>=0?s.split("/")[o&&+o[6]?1:0]:s.indexOf("%s")>=0?s.replace("%s",o&&"-"!=o[7]?o[7]:""):s},toLocalDate:function(t){return this.apply(new Date(t),"Etc/UTC")}}}(),n.date=function(){var t=6e4,e=864e5;function i(t,e){return 0===e&&23===t.getHours()&&(t.setHours(t.getHours()+2),!0)}function n(t,e,n){var r=t.getHours();n=n||1,e=(e-t.getDay()+7*n)%7,t.setDate(t.getDate()+e),i(t,r)}function r(t){return new Date(t.getFullYear(),t.getMonth(),1)}function o(t){return i(t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0),0),t}function s(t){return t.getTime()-o(t)}function a(t,n){var r=t.getHours();return l(t=new Date(t),n*e),i(t,r),t}function l(e,i,n){var r,o=e.getTimezoneOffset();e.setTime(e.getTime()+i),n||(r=e.getTimezoneOffset()-o,e.setTime(e.getTime()+r*t))}function h(){return o(new Date)}return{adjustDST:i,dayOfWeek:function(t,e,i){return n(t=new Date(t),e,i),t},setDayOfWeek:n,getDate:o,isInDateRange:function(t,i,n){var r,o=i.getTime(),s=n.getTime();return o>=s&&(s+=e),(r=t.getTime())>=o&&r<=s},isInTimeRange:function(t,i,n){var r,o=s(i),a=s(n);return!t||o==a||(i>=n&&(n+=e),o>(r=s(t))&&(r+=e),a<o&&(a+=e),r>=o&&r<=a)},isToday:function(t){return o(t).getTime()==h().getTime()},nextDay:function(t){return a(t,1)},previousDay:function(t){return a(t,-1)},toUtcTime:function(t){return Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())},MS_PER_DAY:e,MS_PER_HOUR:60*t,MS_PER_MINUTE:t,setTime:l,addDays:a,today:h,toInvariantTime:function(t){var e=new Date(1980,1,1,0,0,0);return t&&e.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),e},firstDayOfMonth:r,lastDayOfMonth:function(t){var e=new Date(t.getFullYear(),t.getMonth()+1,0),i=r(t),n=Math.abs(e.getTimezoneOffset()-i.getTimezoneOffset());return n&&e.setHours(i.getHours()+n/60),e},getMilliseconds:s}}(),n.stripWhitespace=function(t){if(document.createNodeIterator)for(var e=document.createNodeIterator(t,NodeFilter.SHOW_TEXT,function(e){return e.parentNode==t?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},!1);e.nextNode();)e.referenceNode&&!e.referenceNode.textContent.trim()&&e.referenceNode.parentNode.removeChild(e.referenceNode);else for(var i=0;i<t.childNodes.length;i++){var r=t.childNodes[i];3!=r.nodeType||/\S/.test(r.nodeValue)||(t.removeChild(r),i--),1==r.nodeType&&n.stripWhitespace(r)}};var xt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)};n.animationFrame=function(t){xt.call(window,t)};var _t=[];n.queueAnimation=function(t){_t[_t.length]=t,1===_t.length&&n.runNextAnimation()},n.runNextAnimation=function(){n.animationFrame(function(){_t[0]&&(_t.shift()(),_t[0]&&n.runNextAnimation())})},n.parseQueryStringParams=function(t){for(var e={},i=(t.split("?")[1]||"").split(/&|=/),n=i.length,r=0;r<n;r+=2)""!==i[r]&&(e[decodeURIComponent(i[r])]=decodeURIComponent(i[r+1]));return e},n.elementUnderCursor=function(t){return document.elementFromPoint(t.x.client,t.y.client)},n.wheelDeltaY=function(t){var i,n=t.originalEvent,r=n.wheelDeltaY;return n.wheelDelta?(r===e||r)&&(i=n.wheelDelta):n.detail&&n.axis===n.VERTICAL_AXIS&&(i=10*-n.detail),i},n.caret=function(i,n,r){var o,s=n!==e;if(r===e&&(r=n),i[0]&&(i=i[0]),!s||!i.disabled){try{if(i.selectionStart!==e)s?(i.focus(),i.setSelectionRange(n,r)):n=[i.selectionStart,i.selectionEnd];else if(document.selection)if(t(i).is(":visible")&&i.focus(),o=i.createTextRange(),s)o.collapse(!0),o.moveStart("character",n),o.moveEnd("character",r-n),o.select();else{var a,l,h=o.duplicate();o.moveToBookmark(document.selection.createRange().getBookmark()),h.setEndPoint("EndToStart",o),l=(a=h.text.length)+o.text.length,n=[a,l]}}catch(t){n=[]}return n}}}(jQuery),function(t,e){var i=window.kendo,n=i.effects,r=t.each,o=t.extend,s=t.proxy,a=i.support,l=a.browser,h=a.transforms,c=a.transitions,d={scale:0,scalex:0,scaley:0,scale3d:0},u={translate:0,translatex:0,translatey:0,translate3d:0},p=void 0!==document.documentElement.style.zoom&&!h,f=/matrix3?d?\s*\(.*,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?/i,g=/^(-?[\d\.\-]+)?[\w\s]*,?\s*(-?[\d\.\-]+)?[\w\s]*/i,m=/translatex?$/i,v=/(zoom|fade|expand)(\w+)/,y=/(zoom|fade|expand)/,b=/[xy]$/i,w=["perspective","rotate","rotatex","rotatey","rotatez","rotate3d","scale","scalex","scaley","scalez","scale3d","skew","skewx","skewy","translate","translatex","translatey","translatez","translate3d","matrix","matrix3d"],x=["rotate","scale","scalex","scaley","skew","skewx","skewy","translate","translatex","translatey","matrix"],_={rotate:"deg",scale:"",skew:"px",translate:"px"},k=h.css,C=Math.round,S="none",T="width",P="height",A="origin",D="overflow",z="translate",E="position",M="completeCallback",L=k+"transition",I=k+"transform",B=k+"backface-visibility",R=k+"perspective",O="1500px",N="perspective(1500px)",V=(a.mobileOS&&a.mobileOS.majorVersion,{left:{reverse:"right",property:"left",transition:"translatex",vertical:!1,modifier:-1},right:{reverse:"left",property:"left",transition:"translatex",vertical:!1,modifier:1},down:{reverse:"up",property:"top",transition:"translatey",vertical:!0,modifier:1},up:{reverse:"down",property:"top",transition:"translatey",vertical:!0,modifier:-1},top:{reverse:"bottom"},bottom:{reverse:"top"},in:{reverse:"out",modifier:-1},out:{reverse:"in",modifier:1},vertical:{reverse:"vertical"},horizontal:{reverse:"horizontal"}});if(i.directions=V,o(t.fn,{kendoStop:function(t,e){return c?n.stopQueue(this,t||!1,e||!1):this.stop(t,e)}}),h&&!c){r(x,function(e,i){t.fn[i]=function(e){if(void 0===e)return G(this,i);var n=t(this)[0],r=i+"("+e+_[i.replace(b,"")]+")";return-1==n.style.cssText.indexOf(I)?t(this).css(I,r):n.style.cssText=n.style.cssText.replace(new RegExp(i+"\\(.*?\\)","i"),r),this},t.fx.step[i]=function(e){t(e.elem)[i](e.now)}});var F=t.fx.prototype.cur;t.fx.prototype.cur=function(){return-1!=x.indexOf(this.prop)?parseFloat(t(this.elem)[this.prop]()):F.apply(this,arguments)}}function H(t){return parseInt(t,10)}function U(t,e){return H(t.css(e))}function $(t){for(var e in t)-1!=w.indexOf(e)&&-1==x.indexOf(e)&&delete t[e];return t}function j(t,e){var i,n,r,o,s=[],l={};for(n in e)i=n.toLowerCase(),o=h&&-1!=w.indexOf(i),!a.hasHW3D&&o&&-1==x.indexOf(i)?delete e[n]:(r=e[n],o?s.push(n+"("+r+")"):l[n]=r);return s.length&&(l[I]=s.join(" ")),l}function G(t,e){if(h){var i=t.css(I);if(i==S)return"scale"==e?1:0;var n=i.match(new RegExp(e+"\\s*\\(([\\d\\w\\.]+)")),r=0;return n?r=H(n[1]):(n=i.match(f)||[0,0,0,0,0],e=e.toLowerCase(),m.test(e)?r=parseFloat(n[3]/n[2]):"translatey"==e?r=parseFloat(n[4]/n[2]):"scale"==e?r=parseFloat(n[2]):"rotate"==e&&(r=parseFloat(Math.atan2(n[2],n[1])))),r}return parseFloat(t.css(e))}i.toggleClass=function(t,e,i,n){return e&&(e=e.split(" "),c&&(i=o({exclusive:"all",duration:400,ease:"ease-out"},i),t.css(L,i.exclusive+" "+i.duration+"ms "+i.ease),setTimeout(function(){t.css(L,"").css(P)},i.duration)),r(e,function(e,i){t.toggleClass(i,n)})),t},i.parseEffects=function(t,e){var i={};return"string"==typeof t?r(t.split(" "),function(t,n){var r=!y.test(n),o=n.replace(v,function(t,e,i){return e+":"+i.toLowerCase()}).split(":"),s=o[1],a={};o.length>1&&(a.direction=e&&r?V[s].reverse:s),i[o[0]]=a}):r(t,function(t){var n=this.direction;n&&e&&!y.test(t)&&(this.direction=V[n].reverse),i[t]=this}),i},c&&o(n,{transition:function(e,i,n){var r,s,a=0,l=e.data("keys")||[];n=o({duration:200,ease:"ease-out",complete:null,exclusive:"all"},n);var h=!1,d=function(){h||(h=!0,s&&(clearTimeout(s),s=null),e.removeData("abortId").dequeue().css(L,"").css(L),n.complete.call(e))};n.duration=t.fx&&t.fx.speeds[n.duration]||n.duration,r=j(0,i),t.merge(l,function(t){var e=[];for(var i in t)e.push(i);return e}(r)),e.data("keys",t.unique(l)).height(),e.css(L,n.exclusive+" "+n.duration+"ms "+n.ease).css(L),e.css(r).css(I),c.event&&(e.one(c.event,d),0!==n.duration&&(a=500)),s=setTimeout(d,n.duration+a),e.data("abortId",s),e.data(M,d)},stopQueue:function(t,e,n){var r,o=t.data("keys"),s=!n&&o,a=t.data(M);return s&&(r=i.getComputedStyles(t[0],o)),a&&a(),s&&t.css(r),t.removeData("keys").stop(e)}});var W=i.Class.extend({init:function(t,e){this.element=t,this.effects=[],this.options=e,this.restore=[]},run:function(e){var i,r,s,a,l,d,u=e.length,p=this.element,f=this.options,g=t.Deferred(),m={},v={};for(this.effects=e,g.then(t.proxy(this,"complete")),p.data("animating",!0),r=0;r<u;r++)for((i=e[r]).setReverse(f.reverse),i.setOptions(f),this.addRestoreProperties(i.restore),i.prepare(m,v),s=0,d=(l=i.children()).length;s<d;s++)l[s].duration(f.duration).run();for(var y in f.effects)o(v,f.effects[y].properties);for(p.is(":visible")||o(m,{display:p.data("olddisplay")||"block"}),h&&!f.reset&&(a=p.data("targetTransform"))&&(m=o(a,m)),m=j(0,m),h&&!c&&(m=$(m)),p.css(m).css(I),r=0;r<u;r++)e[r].setup();return f.init&&f.init(),p.data("targetTransform",v),n.animate(p,v,o({},f,{complete:g.resolve})),g.promise()},stop:function(){t(this.element).kendoStop(!0,!0)},addRestoreProperties:function(t){for(var e,i=this.element,n=0,r=t.length;n<r;n++)e=t[n],this.restore.push(e),i.data(e)||i.data(e,i.css(e))},restoreCallback:function(){for(var t=this.element,e=0,i=this.restore.length;e<i;e++){var n=this.restore[e];t.css(n,t.data(n))}},complete:function(){var e=0,i=this.element,n=this.options,r=this.effects,o=r.length;for(i.removeData("animating").dequeue(),n.hide&&i.data("olddisplay",i.css("display")).hide(),this.restoreCallback(),p&&!h&&setTimeout(t.proxy(this,"restoreCallback"),0);e<o;e++)r[e].teardown();n.completeCallback&&n.completeCallback(i)}});n.promise=function(t,e){var r,o,s=[],a=new W(t,e),l=i.parseEffects(e.effects);for(var h in e.effects=l,l)(r=n[Y(h)])&&(o=new r(t,l[h].direction),s.push(o));s[0]?a.run(s):(t.is(":visible")||t.css({display:t.data("olddisplay")||"block"}).css("display"),e.init&&e.init(),t.dequeue(),a.complete())},o(n,{animate:function(e,i,s){var a=!1!==s.transition;delete s.transition,c&&"transition"in n&&a?n.transition(e,i,s):h?e.animate($(i),{queue:!1,show:!1,hide:!1,duration:s.duration,complete:s.complete}):e.each(function(){var e=t(this),n={};r(w,function(t,r){var s,a=i?i[r]+" ":null;if(a){var l=i;if(r in d&&void 0!==i[r])s=a.match(g),h&&o(l,{scale:+s[0]});else if(r in u&&void 0!==i[r]){var c=e.css(E),p="absolute"==c||"fixed"==c;e.data(z)||(p?e.data(z,{top:U(e,"top")||0,left:U(e,"left")||0,bottom:U(e,"bottom"),right:U(e,"right")}):e.data(z,{top:U(e,"marginTop")||0,left:U(e,"marginLeft")||0}));var f=e.data(z);if(s=a.match(g)){var m=r==z+"y"?0:+s[1],v=r==z+"y"?+s[1]:+s[2];p?(isNaN(f.right)?isNaN(m)||o(l,{left:f.left+m}):isNaN(m)||o(l,{right:f.right-m}),isNaN(f.bottom)?isNaN(v)||o(l,{top:f.top+v}):isNaN(v)||o(l,{bottom:f.bottom-v})):(isNaN(m)||o(l,{marginLeft:f.left+m}),isNaN(v)||o(l,{marginTop:f.top+v}))}}!h&&"scale"!=r&&r in l&&delete l[r],l&&o(n,l)}}),l.msie&&delete n.scale,e.animate(n,{queue:!1,show:!1,hide:!1,duration:s.duration,complete:s.complete})})}}),n.animatedPromise=n.promise;var q=i.Class.extend({init:function(t,e){this.element=t,this._direction=e,this.options={},this._additionalEffects=[],this.restore||(this.restore=[])},reverse:function(){return this._reverse=!0,this.run()},play:function(){return this._reverse=!1,this.run()},add:function(t){return this._additionalEffects.push(t),this},direction:function(t){return this._direction=t,this},duration:function(t){return this._duration=t,this},compositeRun:function(){var t=new W(this.element,{reverse:this._reverse,duration:this._duration}),e=this._additionalEffects.concat([this]);return t.run(e)},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var e,i,r=this.element,s=0,a=this.restore,l=a.length,d=t.Deferred(),u={},p={},f=this.children(),g=f.length;for(d.then(t.proxy(this,"_complete")),r.data("animating",!0),s=0;s<l;s++)e=a[s],r.data(e)||r.data(e,r.css(e));for(s=0;s<g;s++)f[s].duration(this._duration).run();return this.prepare(u,p),r.is(":visible")||o(u,{display:r.data("olddisplay")||"block"}),h&&(i=r.data("targetTransform"))&&(u=o(i,u)),u=j(0,u),h&&!c&&(u=$(u)),r.css(u).css(I),this.setup(),r.data("targetTransform",p),n.animate(r,p,{duration:this._duration,complete:d.resolve}),d.promise()},stop:function(){var e=0,i=this.children(),n=i.length;for(e=0;e<n;e++)i[e].stop();return t(this.element).kendoStop(!0,!0),this},restoreCallback:function(){for(var t=this.element,e=0,i=this.restore.length;e<i;e++){var n=this.restore[e];t.css(n,t.data(n))}},_complete:function(){var e=this.element;e.removeData("animating").dequeue(),this.restoreCallback(),this.shouldHide()&&e.data("olddisplay",e.css("display")).hide(),p&&!h&&setTimeout(t.proxy(this,"restoreCallback"),0),this.teardown()},setOptions:function(t){o(!0,this.options,t)},children:function(){return[]},shouldHide:t.noop,setup:t.noop,prepare:t.noop,teardown:t.noop,directions:[],setReverse:function(t){return this._reverse=t,this}});function Y(t){return t.charAt(0).toUpperCase()+t.substring(1)}function Q(t,e){var i=q.extend(e),o=i.prototype.directions;n[Y(t)]=i,n.Element.prototype[t]=function(t,e,n,r){return new i(this.element,t,e,n,r)},r(o,function(e,r){n.Element.prototype[t+Y(r)]=function(t,e,n){return new i(this.element,r,t,e,n)}})}var X=["left","right","up","down"],Z=["in","out"];function K(t,e,i,n){Q(t,{directions:Z,startValue:function(t){return this._startValue=t,this},endValue:function(t){return this._endValue=t,this},shouldHide:function(){return this._shouldHide},prepare:function(t,r){var o,s,a="out"===this._direction,l=this.element.data(e);o=!(isNaN(l)||l==i)?l:void 0!==this._startValue?this._startValue:a?i:n,s=void 0!==this._endValue?this._endValue:a?n:i,this._reverse?(t[e]=s,r[e]=o):(t[e]=o,r[e]=s),this._shouldHide=r[e]===n}})}Q("slideIn",{directions:X,divisor:function(t){return this.options.divisor=t,this},prepare:function(t,e){var i,n=this.element,r=V[this._direction],o=-r.modifier*(r.vertical?n.outerHeight():n.outerWidth())/(this.options&&this.options.divisor||1)+"px";this._reverse&&(i=t,t=e,e=i),h?(t[r.transition]=o,e[r.transition]="0px"):(t[r.property]=o,e[r.property]="0px")}}),Q("tile",{directions:X,init:function(t,e,i){q.prototype.init.call(this,t,e),this.options={previous:i}},previousDivisor:function(t){return this.options.previousDivisor=t,this},children:function(){var t=this._reverse,e=this.options.previous,n=this.options.previousDivisor||1,r=this._direction,o=[i.fx(this.element).slideIn(r).setReverse(t)];return e&&o.push(i.fx(e).slideIn(V[r].reverse).divisor(n).setReverse(!t)),o}}),K("fade","opacity",1,0),K("zoom","scale",1,.01),Q("slideMargin",{prepare:function(t,e){var i,n=this.element,r=this.options,o=n.data(A),s=r.offset,a=this._reverse;a||null!==o||n.data(A,parseFloat(n.css("margin-"+r.axis))),i=n.data(A)||0,e["margin-"+r.axis]=a?i:i+s}}),Q("slideTo",{prepare:function(t,e){var i=this.element,n=this.options.offset.split(","),r=this._reverse;h?(e.translatex=r?0:n[0],e.translatey=r?0:n[1]):(e.left=r?0:n[0],e.top=r?0:n[1]),i.css("left")}}),Q("expand",{directions:["horizontal","vertical"],restore:[D],prepare:function(t,e){var i=this.element,n=this.options,r=this._reverse,o="vertical"===this._direction?P:T,s=i[0].style[o],a=i.data(o),l=parseFloat(a||s),h=C(i.css(o,"auto")[o]());t.overflow="hidden",l=n&&n.reset?h||l:l||h,e[o]=(r?0:l)+"px",t[o]=(r?l:0)+"px",void 0===a&&i.data(o,s)},shouldHide:function(){return this._reverse},teardown:function(){var t=this.element,e="vertical"===this._direction?P:T,i=t.data(e);"auto"!=i&&""!==i||setTimeout(function(){t.css(e,"auto").css(e)},0)}});var J={position:"absolute",marginLeft:0,marginTop:0,scale:1};Q("transfer",{init:function(t,e){this.element=t,this.options={target:e},this.restore=[]},setup:function(){this.element.appendTo(document.body)},prepare:function(t,e){var i,n=this.element,r=this.options,s=this._reverse,a=r.target,l=G(n,"scale"),h=a.offset(),c=a.outerHeight()/n.outerHeight();o(t,J),e.scale=1,n.css(I,"scale(1)").css(I),i=n.offset(),n.css(I,"scale("+l+")");var d=h.left-i.left,u=h.top-i.top,p=0+n.outerWidth(),f=(u-0)/(d-0),g=(u-0)/(d+a.outerWidth()-p),m=(0-0*f+g*p)/(g-f),v=0+f*(m-0);t.top=i.top,t.left=i.left,t.transformOrigin=m+"px "+v+"px",s?t.scale=c:e.scale=c}});var tt={top:"rect(auto auto $size auto)",bottom:"rect($size auto auto auto)",left:"rect(auto $size auto auto)",right:"rect(auto auto auto $size)"},et={top:{start:"rotatex(0deg)",end:"rotatex(180deg)"},bottom:{start:"rotatex(-180deg)",end:"rotatex(0deg)"},left:{start:"rotatey(0deg)",end:"rotatey(-180deg)"},right:{start:"rotatey(180deg)",end:"rotatey(0deg)"}};function it(t,e){var n=t[i.directions[e].vertical?P:T]()/2+"px";return tt[e].replace("$size",n)}Q("turningPage",{directions:X,init:function(t,e,i){q.prototype.init.call(this,t,e),this._container=i},prepare:function(t,e){var n=this._reverse,r=n?V[this._direction].reverse:this._direction,o=et[r];t.zIndex=1,this._clipInHalf&&(t.clip=it(this._container,i.directions[r].reverse)),t[B]="hidden",e[I]=N+(n?o.start:o.end),t[I]=N+(n?o.end:o.start)},setup:function(){this._container.append(this.element)},face:function(t){return this._face=t,this},shouldHide:function(){var t=this._reverse,e=this._face;return t&&!e||!t&&e},clipInHalf:function(t){return this._clipInHalf=t,this},temporary:function(){return this.element.addClass("temp-page"),this}}),Q("staticPage",{directions:X,init:function(t,e,i){q.prototype.init.call(this,t,e),this._container=i},restore:["clip"],prepare:function(t,e){var i=this._reverse?V[this._direction].reverse:this._direction;t.clip=it(this._container,i),t.opacity=.999,e.opacity=1},shouldHide:function(){var t=this._reverse,e=this._face;return t&&!e||!t&&e},face:function(t){return this._face=t,this}}),Q("pageturn",{directions:["horizontal","vertical"],init:function(t,e,i,n){q.prototype.init.call(this,t,e),this.options={},this.options.face=i,this.options.back=n},children:function(){var t,e=this.options,n="horizontal"===this._direction?"left":"top",r=i.directions[n].reverse,o=this._reverse,s=e.face.clone(!0).removeAttr("id"),a=e.back.clone(!0).removeAttr("id"),l=this.element;return o&&(t=n,n=r,r=t),[i.fx(e.face).staticPage(n,l).face(!0).setReverse(o),i.fx(e.back).staticPage(r,l).setReverse(o),i.fx(s).turningPage(n,l).face(!0).clipInHalf(!0).temporary().setReverse(o),i.fx(a).turningPage(r,l).clipInHalf(!0).temporary().setReverse(o)]},prepare:function(t,e){t[R]=O,t.transformStyle="preserve-3d",t.opacity=.999,e.opacity=1},teardown:function(){this.element.find(".temp-page").remove()}}),Q("flip",{directions:["horizontal","vertical"],init:function(t,e,i,n){q.prototype.init.call(this,t,e),this.options={},this.options.face=i,this.options.back=n},children:function(){var t,e=this.options,n="horizontal"===this._direction?"left":"top",r=i.directions[n].reverse,o=this._reverse,s=this.element;return o&&(t=n,n=r,r=t),[i.fx(e.face).turningPage(n,s).face(!0).setReverse(o),i.fx(e.back).turningPage(r,s).setReverse(o)]},prepare:function(t){t[R]=O,t.transformStyle="preserve-3d"}});var nt=!a.mobileOS.android;Q("replace",{init:function(e,i,n){q.prototype.init.call(this,e),this._previous=t(i),this._transitionClass=n},duration:function(){throw new Error("The replace effect does not support duration setting; the effect duration may be customized through the transition class rule")},_both:function(){return t().add(this._element).add(this._previous)},_containerClass:function(){var t=this._direction,e="k-fx k-fx-start k-fx-"+this._transitionClass;return t&&(e+=" k-fx-"+t),this._reverse&&(e+=" k-fx-reverse"),e},complete:function(){if(this.deferred){var t=this.container;t.removeClass("k-fx-end").removeClass(this._containerClass()),this._previous.hide().removeClass("k-fx-current"),this.element.removeClass("k-fx-next"),nt&&t.css(D,""),this.isAbsolute||this._both().css(E,""),this.deferred.resolve(),delete this.deferred}},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var e=this.element,n=this._previous,r=(this._direction,e.parents().filter(n.parents()).first()),o=this._both(),s=t.Deferred(),a=e.css(E);return r.length||(r=e.parent()),this.container=r,this.deferred=s,this.isAbsolute="absolute"==a,this.isAbsolute||o.css(E,"absolute"),nt&&(r.css(D),r.css(D,"hidden")),c?(e.addClass("k-fx-hidden"),r.addClass(this._containerClass()),r.one(c.event,t.proxy(this,"complete")),i.animationFrame(function(){e.removeClass("k-fx-hidden").addClass("k-fx-next"),n.css("display","").addClass("k-fx-current"),i.animationFrame(function(){r.removeClass("k-fx-start").addClass("k-fx-end")})})):this.complete(),s.promise()},stop:function(){this.complete()}});var rt=i.Class.extend({init:function(){this._tickProxy=s(this._tick,this),this._started=!1},tick:t.noop,done:t.noop,onEnd:t.noop,onCancel:t.noop,start:function(){this.enabled()&&(this.done()?this.onEnd():(this._started=!0,i.animationFrame(this._tickProxy)))},enabled:function(){return!0},cancel:function(){this._started=!1,this.onCancel()},_tick:function(){this._started&&(this.tick(),this.done()?(this._started=!1,this.onEnd()):i.animationFrame(this._tickProxy))}}),ot=rt.extend({init:function(t){o(this,t),rt.fn.init.call(this)},done:function(){return this.timePassed()>=this.duration},timePassed:function(){return Math.min(this.duration,new Date-this.startDate)},moveTo:function(t){var e=this,i=e.movable;e.initial=i[e.axis],e.delta=t.location-e.initial,e.duration="number"==typeof t.duration?t.duration:300,e.tick=e._easeProxy(t.ease),e.startDate=new Date,e.start()},_easeProxy:function(t){var e=this;return function(){e.movable.moveAxis(e.axis,t(e.timePassed(),e.initial,e.delta,e.duration))}}});o(ot,{easeOutExpo:function(t,e,i,n){return t==n?e+i:i*(1-Math.pow(2,-10*t/n))+e},easeOutBack:function(t,e,i,n,r){return 1.70158,i*((t=t/n-1)*t*(2.70158*t+1.70158)+1)+e}}),n.Animation=rt,n.Transition=ot,n.createEffect=Q}(window.kendo.jQuery),function(t,e){var i=window.kendo,n="change",r=i.support,o=window.location,s=window.history,a=i.support.browser.msie,l=/^#*/,h=window.document;function c(t,e){return e?(t+"/"===e&&(t=e),new RegExp("^"+e,"i").test(t)||(t=e+"/"+t),o.protocol+"//"+(o.host+"/"+t).replace(/\/\/+/g,"/")):t}function d(t){return t?"#!":"#"}function u(t){var e=o.href;return"#!"===t&&e.indexOf("#")>-1&&e.indexOf("#!")<0?null:e.split(t)[1]||""}function p(t,e){return 0===e.indexOf(t)?e.substr(t.length).replace(/\/\//g,"/"):e}var f=i.Class.extend({back:function(){a?setTimeout(function(){s.back()}):s.back()},forward:function(){a?setTimeout(function(){s.forward()}):s.forward()},length:function(){return s.length},replaceLocation:function(t){o.replace(t)}}),g=f.extend({init:function(t){this.root=t},navigate:function(t){s.pushState({},h.title,c(t,this.root))},replace:function(t){s.replaceState({},h.title,c(t,this.root))},normalize:function(t){return p(this.root,t)},current:function(){var t=o.pathname;return o.search&&(t+=o.search),p(this.root,t)},change:function(e){t(window).bind("popstate.kendo",e)},stop:function(){t(window).unbind("popstate.kendo")},normalizeCurrent:function(t){var e,i=t.root,n=o.pathname,r=u(d(t.hashBang));i===n+"/"&&(e=i),i===n&&r&&(e=c(r.replace(l,""),i)),e&&s.pushState({},h.title,e)}});function m(t){return t.replace(/^(#)?/,"#")}function v(t){return t.replace(/^(#(!)?)?/,"#!")}var y=f.extend({init:function(t){this._id=i.guid(),this.prefix=d(t),this.fix=t?v:m},navigate:function(t){o.hash=this.fix(t)},replace:function(t){this.replaceLocation(this.fix(t))},normalize:function(t){return t.indexOf(this.prefix)<0?t:t.split(this.prefix)[1]},change:function(e){r.hashChange?t(window).on("hashchange."+this._id,e):this._interval=setInterval(e,50)},stop:function(){t(window).off("hashchange."+this._id),clearInterval(this._interval)},current:function(){return u(this.prefix)},normalizeCurrent:function(t){var e=o.pathname,i=t.root;return!(!t.pushState||i===e)&&(this.replaceLocation(i+this.prefix+p(i,e)),!0)}}),b=i.Observable.extend({start:function(e){if(e=e||{},this.bind([n,"back","same"],e),!this._started){this._started=!0,e.root=e.root||"/";var i,r=this.createAdapter(e);r.normalizeCurrent(e)||(i=r.current(),t.extend(this,{adapter:r,root:e.root,historyLength:r.length(),current:i,locations:[i]}),r.change(t.proxy(this,"_checkUrl")))}},createAdapter:function(t){return r.pushState&&t.pushState?new g(t.root):new y(t.hashBang)},stop:function(){this._started&&(this.adapter.stop(),this.unbind(n),this._started=!1)},change:function(t){this.bind(n,t)},replace:function(t,e){this._navigate(t,e,function(e){e.replace(t),this.locations[this.locations-1]=this.current})},navigate:function(t,e){"#:back"!==t?this._navigate(t,e,function(e){e.navigate(t),this.locations.push(this.current)}):this.adapter.back()},_navigate:function(t,e,i){var r=this.adapter;t=r.normalize(t),this.current!==t&&this.current!==decodeURIComponent(t)?!e&&this.trigger(n,{url:t})||(this.current=t,i.call(this,r),this.historyLength=r.length()):this.trigger("same")},_checkUrl:function(){var t=this.adapter,e=t.current(),i=t.length(),r=this.historyLength===i,o=e===this.locations[this.locations.length-2]&&r,s=this.current;return null===e||this.current===e||this.current===decodeURIComponent(e)||(this.historyLength=i,this.current=e,o&&this.trigger("back",{url:s,to:e})?(t.forward(),void(this.current=s)):this.trigger(n,{url:e})?(o?t.forward():(t.back(),this.historyLength--),void(this.current=s)):void(o?this.locations.pop():this.locations.push(e)))}});i.History=b,i.History.HistoryAdapter=f,i.History.HashAdapter=y,i.History.PushStateAdapter=g,i.absoluteURL=c,i.history=new b}(window.kendo.jQuery),function(){var t=window.kendo,e=t.history,i=t.Observable,n="routeMissing",r="change",o=/\((.*?)\)/g,s=/(\(\?)?:\w+/g,a=/\*\w+/g,l=/[\-{}\[\]+?.,\\\^$|#\s]/g;function h(t,e){return e?t:"([^/]+)"}function c(t){return t.replace(/(\?.*)|(#.*)/g,"")}var d=t.Class.extend({init:function(t,e){t instanceof RegExp||(t=new RegExp("^"+t.replace(l,"\\$&").replace(o,"(?:$1)?").replace(s,h).replace(a,"(.*?)")+"$")),this.route=t,this._callback=e},callback:function(e){var i,n,r=0,o=t.parseQueryStringParams(e);for(e=c(e),n=(i=this.route.exec(e).slice(1)).length;r<n;r++)void 0!==i[r]&&(i[r]=decodeURIComponent(i[r]));i.push(o),this._callback.apply(null,i)},worksWith:function(t){return!!this.route.test(c(t))&&(this.callback(t),!0)}}),u=i.extend({init:function(t){t||(t={}),i.fn.init.call(this),this.routes=[],this.pushState=t.pushState,this.hashBang=t.hashBang,this.root=t.root,this.bind(["init",n,r,"same"],t)},destroy:function(){e.unbind(r,this._urlChangedProxy),e.unbind("same",this._sameProxy),e.unbind("back",this._backProxy),this.unbind()},start:function(){var t=this,i=function(e){t._back(e)},n=function(e){t._urlChanged(e)};e.start({same:function(){t._same()},change:n,back:i,pushState:t.pushState,hashBang:t.hashBang,root:t.root});var r={url:e.current||"/",preventDefault:$.noop};t.trigger("init",r)||t._urlChanged(r),this._urlChangedProxy=n,this._backProxy=i},route:function(t,e){this.routes.push(new d(t,e))},navigate:function(e,i){t.history.navigate(e,i)},replace:function(e,i){t.history.replace(e,i)},_back:function(t){this.trigger("back",{url:t.url,to:t.to})&&t.preventDefault()},_same:function(t){this.trigger("same")},_urlChanged:function(e){var i=e.url;if(i||(i="/"),this.trigger(r,{url:e.url,params:t.parseQueryStringParams(e.url)}))e.preventDefault();else{for(var o=0,s=this.routes,a=s.length;o<a;o++)if(s[o].worksWith(i))return;this.trigger(n,{url:i,params:t.parseQueryStringParams(i)})&&e.preventDefault()}}});t.Router=u}(),function(t,e){var i=window.kendo,n=t.extend,r={eq:"eq",neq:"ne",gt:"gt",gte:"ge",lt:"lt",lte:"le",contains:"substringof",doesnotcontain:"substringof",endswith:"endswith",startswith:"startswith"},o={pageSize:t.noop,page:t.noop,filter:function(n,o){o&&(n.$filter=function n(o){var s,a,l,h,c,d,u,p,f=[],g=o.logic||"and",m=o.filters;for(s=0,a=m.length;s<a;s++)o=m[s],l=o.field,u=o.value,d=o.operator,o.filters?o=n(o):(p=o.ignoreCase,l=l.replace(/\./g,"/"),(o=r[d])&&u!==e&&("string"===(h=t.type(u))?(c="'{1}'",u=u.replace(/'/g,"''"),!0===p&&(l="tolower("+l+")")):c="date"===h?"datetime'{1:yyyy-MM-ddTHH:mm:ss}'":"{1}",o.length>3?"substringof"!==o?c="{0}({2},"+c+")":(c="{0}("+c+",{2})","doesnotcontain"===d&&(c+=" eq false")):c="{2} {0} "+c,o=i.format(c,o,u,l))),f.push(o);o=f.join(" "+g+" ");f.length>1&&(o="("+o+")");return o}(o))},sort:function(e,i){var n=t.map(i,function(t){var e=t.field.replace(/\./g,"/");return"desc"===t.dir&&(e+=" desc"),e}).join(",");n&&(e.$orderby=n)},skip:function(t,e){e&&(t.$skip=e)},take:function(t,e){e&&(t.$top=e)}},s={read:{dataType:"jsonp"}};n(!0,i.data,{schemas:{odata:{type:"json",data:function(t){return t.d.results||[t.d]},total:"d.__count"}},transports:{odata:{read:{cache:!0,dataType:"jsonp",jsonp:"$callback"},update:{cache:!0,dataType:"json",contentType:"application/json",type:"PUT"},create:{cache:!0,dataType:"json",contentType:"application/json",type:"POST"},destroy:{cache:!0,dataType:"json",type:"DELETE"},parameterMap:function(t,e){var n,r,a,l;if(t=t||{},e=e||"read",l=(l=(this.options||s)[e])?l.dataType:"json","read"===e)for(a in n={$inlinecount:"allpages"},"json"!=l&&(n.$format="json"),t)o[a]?o[a](n,t[a]):n[a]=t[a];else{if("json"!==l)throw new Error("Only json dataType can be used for "+e+" operation.");if("destroy"!==e){for(a in t)"number"==typeof(r=t[a])&&(t[a]=r+"");n=i.stringify(t)}}return n}}}})}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=t.isArray,r=t.isPlainObject,o=t.map,s=t.each,a=t.extend,l=i.getter,h=i.Class.extend({init:function(t){var e=this,l=t.total,h=t.model,c=t.parse,d=t.errors,u=t.serialize,p=t.data;if(h){if(r(h)){var f=t.modelBase||i.data.Model;h.fields&&s(h.fields,function(t,i){i=r(i)&&i.field?a(i,{field:e.getter(i.field)}):{field:e.getter(i)},h.fields[t]=i});var g=h.id;if(g){var m={};m[e.xpathToMember(g,!0)]={field:e.getter(g)},h.fields=a(m,h.fields),h.id=e.xpathToMember(g)}h=f.define(h)}e.model=h}if(l&&("string"==typeof l?(l=e.getter(l),e.total=function(t){return parseInt(l(t),10)}):"function"==typeof l&&(e.total=l)),d&&("string"==typeof d?(d=e.getter(d),e.errors=function(t){return d(t)||null}):"function"==typeof d&&(e.errors=d)),p&&("string"==typeof p?(p=e.xpathToMember(p),e.data=function(t){var i,r=e.evaluate(t,p);return r=n(r)?r:[r],e.model&&h.fields?(i=new e.model,o(r,function(t){if(t){var e,n={};for(e in h.fields)n[e]=i._parse(e,h.fields[e].field(t));return n}})):r}):"function"==typeof p&&(e.data=p)),"function"==typeof c){var v=e.parse;e.parse=function(t){var i=c.call(e,t);return v.call(e,i)}}"function"==typeof u&&(e.serialize=u)},total:function(t){return this.data(t).length},errors:function(t){return t?t.errors:null},serialize:function(t){return t},parseDOM:function(t){var e,i,r,o,s,a,l,h={},c=t.attributes,d=c.length;for(l=0;l<d;l++)h["@"+(a=c[l]).nodeName]=a.nodeValue;for(i=t.firstChild;i;i=i.nextSibling)3===(r=i.nodeType)||4===r?h["#text"]=i.nodeValue:1===r&&(e=this.parseDOM(i),s=h[o=i.nodeName],n(s)?s.push(e):s=void 0!==s?[s,e]:e,h[o]=s);return h},evaluate:function(t,e){for(var i,r,o,s,a,l=e.split(".");i=l.shift();)if(t=t[i],n(t)){for(r=[],e=l.join("."),a=0,o=t.length;a<o;a++)s=this.evaluate(t[a],e),s=n(s)?s:[s],r.push.apply(r,s);return r}return t},parse:function(e){var i,n,r={};return i=e.documentElement||t.parseXML(e).documentElement,n=this.parseDOM(i),r[i.nodeName]=n,r},xpathToMember:function(t,e){return t?(t=t.replace(/^\//,"").replace(/\//g,".")).indexOf("@")>=0?t.replace(/\.?(@.*)/,e?"$1":'["$1"]'):t.indexOf("text()")>=0?t.replace(/(\.?text\(\))/,e?"#text":'["#text"]'):t:""},getter:function(t){return l(this.xpathToMember(t),!0)}});t.extend(!0,i.data,{XmlDataReader:h,readers:{xml:h}})}(window.kendo.jQuery),function(t,e){var i,n=t.extend,r=t.proxy,o=t.isPlainObject,s=t.isEmptyObject,a=t.isArray,l=t.grep,h=t.ajax,c=t.each,d=t.noop,u=window.kendo,p=u.isFunction,f=u.Observable,g=u.Class,m="string",v="function",y="change",b="error",w="requestStart",x="progress",_="requestEnd",k=["create","read","update","destroy"],C=function(t){return t},S=u.getter,T=u.stringify,P=Math,A=[].push,D=[].join,z=[].pop,E=[].splice,M=[].shift,L=[].slice,I=[].unshift,B={}.toString,R=u.support.stableSort,O=/^\/Date\((.*?)\)\/$/,N=/(\r+|\n+)/g,V=/(?=['\\])/g,F=f.extend({init:function(t,e){this.type=e||U,f.fn.init.call(this),this.length=t.length,this.wrapAll(t,this)},toJSON:function(){var t,e,i=this.length,n=new Array(i);for(t=0;t<i;t++)(e=this[t])instanceof U&&(e=e.toJSON()),n[t]=e;return n},parent:d,wrapAll:function(t,e){var i,n,r=this,o=function(){return r};for(e=e||[],i=0,n=t.length;i<n;i++)e[i]=r.wrap(t[i],o);return e},wrap:function(t,e){var i=this;return null!==t&&"[object Object]"===B.call(t)&&(t instanceof i.type||t instanceof G||(t=t instanceof U?t.toJSON():t,t=new i.type(t)),t.parent=e,t.bind(y,function(t){i.trigger(y,{field:t.field,node:t.node,index:t.index,items:t.items||[this],action:t.node&&t.action||"itemchange"})})),t},push:function(){var t,e=this.length,i=this.wrapAll(arguments);return t=A.apply(this,i),this.trigger(y,{action:"add",index:e,items:i}),t},slice:L,join:D,pop:function(){var t=this.length,e=z.apply(this);return t&&this.trigger(y,{action:"remove",index:t-1,items:[e]}),e},splice:function(t,e,i){var n,r,o,s=this.wrapAll(L.call(arguments,2));if((n=E.apply(this,[t,e].concat(s))).length)for(this.trigger(y,{action:"remove",index:t,items:n}),r=0,o=n.length;r<o;r++)n[r].children&&n[r].unbind(y);return i&&this.trigger(y,{action:"add",index:t,items:s}),n},shift:function(){var t=this.length,e=M.apply(this);return t&&this.trigger(y,{action:"remove",index:0,items:[e]}),e},unshift:function(){var t,e=this.wrapAll(arguments);return t=I.apply(this,e),this.trigger(y,{action:"add",index:0,items:e}),t},indexOf:function(t){var e,i;for(e=0,i=this.length;e<i;e++)if(this[e]===t)return e;return-1},forEach:function(t){for(var e=0,i=this.length;e<i;e++)t(this[e],e,this)},map:function(t){for(var e=0,i=[],n=this.length;e<n;e++)i[e]=t(this[e],e,this);return i},filter:function(t){for(var e,i=0,n=[],r=this.length;i<r;i++)t(e=this[i],i,this)&&(n[n.length]=e);return n},find:function(t){for(var e,i=0,n=this.length;i<n;i++)if(t(e=this[i],i,this))return e},every:function(t){for(var e=0,i=this.length;e<i;e++)if(!t(this[e],e,this))return!1;return!0},some:function(t){for(var e=0,i=this.length;e<i;e++)if(t(this[e],e,this))return!0;return!1},remove:function(t){this.splice(this.indexOf(t),1)},empty:function(){this.splice(0,this.length)}});function H(t,e,i,n){return function(r){var o,s={};for(o in r)s[o]=r[o];s.field=n?i+"."+r.field:i,e==y&&t._notifyChange&&t._notifyChange(s),t.trigger(e,s)}}var U=f.extend({init:function(t){var e,i,n=this,r=function(){return n};for(i in f.fn.init.call(this),t)e=t[i],"_"!=i.charAt(0)&&(e=n.wrap(e,i,r)),n[i]=e;n.uid=u.guid()},shouldSerialize:function(t){return this.hasOwnProperty(t)&&"_events"!==t&&typeof this[t]!==v&&"uid"!==t},forEach:function(t){for(var e in this)this.shouldSerialize(e)&&t(this[e],e)},toJSON:function(){var t,e,i={};for(e in this)this.shouldSerialize(e)&&(((t=this[e])instanceof U||t instanceof F)&&(t=t.toJSON()),i[e]=t);return i},get:function(t){return this.trigger("get",{field:t}),"this"===t?this:u.getter(t,!0)(this)},_set:function(t,e){var i=t.indexOf(".")>=0;if(i)for(var n=t.split("."),r="";n.length>1;){r+=n.shift();var o=u.getter(r,!0)(this);if(o instanceof U)return o.set(n.join("."),e),i;r+="."}return u.setter(t)(this,e),i},set:function(t,e){var i=this,n=t.indexOf(".")>=0;u.getter(t,!0)(i)!==e&&(i.trigger("set",{field:t,value:e})||(n||(e=i.wrap(e,t,function(){return i})),(!i._set(t,e)||t.indexOf("(")>=0||t.indexOf("[")>=0)&&i.trigger(y,{field:t})))},parent:d,wrap:function(t,e,i){var n=B.call(t);if(null!=t&&("[object Object]"===n||"[object Array]"===n)){var r=t instanceof F,o=t instanceof wt;"[object Object]"!==n||o||r?("[object Array]"===n||r||o)&&(r||o||(t=new F(t)),t.parent()!=i()&&t.bind(y,H(this,y,e,!1))):(t instanceof U||(t=new U(t)),t.parent()!=i()&&(t.bind("get",H(this,"get",e,!0)),t.bind(y,H(this,y,e,!0)))),t.parent=i}return t}});var $={number:function(t){return u.parseFloat(t)},date:function(t){return u.parseDate(t)},boolean:function(t){return typeof t===m?"true"===t.toLowerCase():null!=t?!!t:t},string:function(t){return null!=t?t+"":t},default:function(t){return t}},j={string:"",number:0,date:new Date,boolean:!1,default:""};var G=U.extend({init:function(i){var n=this;i&&!t.isEmptyObject(i)||(i=t.extend({},n.defaults,i)),U.fn.init.call(n,i),n.dirty=!1,n.idField&&(n.id=n.get(n.idField),n.id===e&&(n.id=n._defaultId))},shouldSerialize:function(t){return U.fn.shouldSerialize.call(this,t)&&"uid"!==t&&!("id"!==this.idField&&"id"===t)&&"dirty"!==t&&"_accessors"!==t},_parse:function(t,e){var i,n=t,r=this.fields||{};return(t=r[t])||(t=function(t,e){var i,n;for(n in t){if(i=t[n],o(i)&&i.field&&i.field===e)return i;if(i===e)return i}return null}(r,n)),t&&!(i=t.parse)&&t.type&&(i=$[t.type.toLowerCase()]),i?i(e):e},_notifyChange:function(t){var e=t.action;"add"!=e&&"remove"!=e||(this.dirty=!0)},editable:function(t){return!(t=(this.fields||{})[t])||!1!==t.editable},set:function(e,i,n){this.editable(e)&&(function e(i,n){if(i===n)return!0;var r,o=t.type(i);if(o!==t.type(n))return!1;if("date"===o)return i.getTime()===n.getTime();if("object"!==o&&"array"!==o)return!1;for(r in i)if(!e(i[r],n[r]))return!1;return!0}(i=this._parse(e,i),this.get(e))||(this.dirty=!0,U.fn.set.call(this,e,i,n)))},accept:function(t){var e,i=this,n=function(){return i};for(e in t){var r=t[e];"_"!=e.charAt(0)&&(r=i.wrap(t[e],e,n)),i._set(e,r)}i.idField&&(i.id=i.get(i.idField)),i.dirty=!1},isNew:function(){return this.id===this._defaultId}});G.define=function(t,i){i===e&&(i=t,t=G);var r,o,s,a,l,h,c,d,u=n({defaults:{}},i),p={},f=u.id;if(f&&(u.idField=f),u.id&&delete u.id,f&&(u.defaults[f]=u._defaultId=""),"[object Array]"===B.call(u.fields)){for(h=0,c=u.fields.length;h<c;h++)typeof(s=u.fields[h])===m?p[s]={}:s.field&&(p[s.field]=s);u.fields=p}for(o in u.fields)a=(s=u.fields[o]).type||"default",l=null,d=o,o=typeof s.field===m?s.field:o,s.nullable||(l=u.defaults[d!==o?d:o]=s.defaultValue!==e?s.defaultValue:j[a.toLowerCase()]),i.id===o&&(u._defaultId=l),u.defaults[d!==o?d:o]=l,s.parse=s.parse||$[a];return(r=t.extend(u)).define=function(t){return G.define(r,t)},u.fields&&(r.fields=u.fields,r.idField=u.idField),r};var W={selector:function(t){return p(t)?t:S(t)},compare:function(t){var e=this.selector(t);return function(t,i){return t=e(t),i=e(i),null==t&&null==i?0:null==t?-1:null==i?1:t.localeCompare?t.localeCompare(i):t>i?1:t<i?-1:0}},create:function(t){var e=t.compare||this.compare(t.field);return"desc"==t.dir?function(t,i){return e(i,t,!0)}:e},combine:function(t){return function(e,i){var n,r,o=t[0](e,i);for(n=1,r=t.length;n<r;n++)o=o||t[n](e,i);return o}}},q=n({},W,{asc:function(t){var e=this.selector(t);return function(t,i){var n=e(t),r=e(i);return n&&n.getTime&&r&&r.getTime&&(n=n.getTime(),r=r.getTime()),n===r?t.__position-i.__position:null==n?-1:null==r?1:n.localeCompare?n.localeCompare(r):n>r?1:-1}},desc:function(t){var e=this.selector(t);return function(t,i){var n=e(t),r=e(i);return n&&n.getTime&&r&&r.getTime&&(n=n.getTime(),r=r.getTime()),n===r?t.__position-i.__position:null==n?1:null==r?-1:r.localeCompare?r.localeCompare(n):n<r?1:-1}},create:function(t){return this[t.dir](t.field)}});i=function(t,e){var i,n=t.length,r=new Array(n);for(i=0;i<n;i++)r[i]=e(t[i],i,t);return r};var Y=function(){function t(t){return t.replace(V,"\\").replace(N,"")}function e(e,i,n,r){var o;return null!=n&&(typeof n===m&&(n=t(n),(o=O.exec(n))?n=new Date(+o[1]):r?(n="'"+n.toLowerCase()+"'",i="("+i+" || '').toLowerCase()"):n="'"+n+"'"),n.getTime&&(i="("+i+"?"+i+".getTime():"+i+")",n=n.getTime())),i+" "+e+" "+n}return{eq:function(t,i,n){return e("==",t,i,n)},neq:function(t,i,n){return e("!=",t,i,n)},gt:function(t,i,n){return e(">",t,i,n)},gte:function(t,i,n){return e(">=",t,i,n)},lt:function(t,i,n){return e("<",t,i,n)},lte:function(t,i,n){return e("<=",t,i,n)},startswith:function(e,i,n){return n&&(e="("+e+" || '').toLowerCase()",i&&(i=i.toLowerCase())),i&&(i=t(i)),e+".lastIndexOf('"+i+"', 0) == 0"},endswith:function(e,i,n){return n&&(e="("+e+" || '').toLowerCase()",i&&(i=i.toLowerCase())),i&&(i=t(i)),e+".indexOf('"+i+"', "+e+".length - "+(i||"").length+") >= 0"},contains:function(e,i,n){return n&&(e="("+e+" || '').toLowerCase()",i&&(i=i.toLowerCase())),i&&(i=t(i)),e+".indexOf('"+i+"') >= 0"},doesnotcontain:function(e,i,n){return n&&(e="("+e+" || '').toLowerCase()",i&&(i=i.toLowerCase())),i&&(i=t(i)),e+".indexOf('"+i+"') == -1"}}}();function Q(t){this.data=t||[]}function X(t,i){if(t){var n=typeof t===m?{field:t,dir:i}:t,r=a(n)?n:n!==e?[n]:[];return l(r,function(t){return!!t.dir})}}Q.filterExpr=function(t){var i,n,r,o,s,a,l=[],h=[],c=[],d=t.filters;for(i=0,n=d.length;i<n;i++)s=(r=d[i]).field,a=r.operator,r.filters?(r=(o=Q.filterExpr(r)).expression.replace(/__o\[(\d+)\]/g,function(t,e){return e=+e,"__o["+(c.length+e)+"]"}).replace(/__f\[(\d+)\]/g,function(t,e){return e=+e,"__f["+(h.length+e)+"]"}),c.push.apply(c,o.operators),h.push.apply(h,o.fields)):(typeof s===v?(o="__f["+h.length+"](d)",h.push(s)):o=u.expr(s),typeof a===v?(r="__o["+c.length+"]("+o+", "+r.value+")",c.push(a)):r=Y[(a||"eq").toLowerCase()](o,r.value,r.ignoreCase===e||r.ignoreCase)),l.push(r);return{expression:"("+l.join({and:" && ",or:" || "}[t.logic])+")",fields:h,operators:c}};var Z={"==":"eq",equals:"eq",isequalto:"eq",equalto:"eq",equal:"eq","!=":"neq",ne:"neq",notequals:"neq",isnotequalto:"neq",notequalto:"neq",notequal:"neq","<":"lt",islessthan:"lt",lessthan:"lt",less:"lt","<=":"lte",le:"lte",islessthanorequalto:"lte",lessthanequal:"lte",">":"gt",isgreaterthan:"gt",greaterthan:"gt",greater:"gt",">=":"gte",isgreaterthanorequalto:"gte",greaterthanequal:"gte",ge:"gte",notsubstringof:"doesnotcontain"};function K(t){if(t&&!s(t))return!a(t)&&t.filters||(t={logic:"and",filters:a(t)?t:[t]}),function t(e){var i,n,r,o,s=e.filters;if(s)for(i=0,n=s.length;i<n;i++)(o=(r=s[i]).operator)&&typeof o===m&&(r.operator=Z[o.toLowerCase()]||o),t(r)}(t),t}function J(t,n){var r=typeof t===m?{field:t,dir:n}:t,o=a(r)?r:r!==e?[r]:[];return i(o,function(t){return{field:t.field,dir:t.dir||"asc",aggregates:t.aggregates}})}function tt(t,e){return t&&t.getTime&&e&&e.getTime?t.getTime()===e.getTime():t===e}function et(t,e,i,n,r,o){var s,a,l,h=(e=e||[]).length;for(s=0;s<h;s++){l=(a=e[s]).aggregate;var c=a.field;t[c]=t[c]||{},o[c]=o[c]||{},o[c][l]=o[c][l]||{},t[c][l]=it[l.toLowerCase()](t[c][l],i,u.accessor(c),n,r,o[c][l])}}Q.normalizeFilter=K,Q.prototype={toArray:function(){return this.data},range:function(t,e){return new Q(this.data.slice(t,t+e))},skip:function(t){return new Q(this.data.slice(t))},take:function(t){return new Q(this.data.slice(0,t))},select:function(t){return new Q(i(this.data,t))},order:function(t,e){var i={dir:e};return t&&(t.compare?i.compare=t.compare:i.field=t),new Q(this.data.slice(0).sort(W.create(i)))},orderBy:function(t){return this.order(t,"asc")},orderByDescending:function(t){return this.order(t,"desc")},sort:function(t,e,i){var n,r,o=X(t,e),s=[];if(i=i||W,o.length){for(n=0,r=o.length;n<r;n++)s.push(i.create(o[n]));return this.orderBy({compare:i.combine(s)})}return this},filter:function(t){var e,i,n,r,o,s,a,l,h=this.data,c=[];if(!(t=K(t))||0===t.filters.length)return this;for(r=Q.filterExpr(t),s=r.fields,a=r.operators,o=l=new Function("d, __f, __o","return "+r.expression),(s.length||a.length)&&(l=function(t){return o(t,s,a)}),e=0,n=h.length;e<n;e++)l(i=h[e])&&c.push(i);return new Q(c)},group:function(t,e){t=J(t||[]),e=e||this.data;var i,n=new Q(this.data);return t.length>0&&(i=t[0],n=n.groupBy(i).select(function(n){var r=new Q(e).filter([{field:n.field,operator:"eq",value:n.value,ignoreCase:!1}]);return{field:n.field,value:n.value,items:t.length>1?new Q(n.items).group(t.slice(1),r.toArray()).toArray():n.items,hasSubgroups:t.length>1,aggregates:r.aggregate(i.aggregates)}})),n},groupBy:function(t){if(s(t)||!this.data.length)return new Q([]);var e,i,n,r,o=t.field,a=this._sortForGrouping(o,t.dir||"asc"),l=u.accessor(o),h=l.get(a[0],o),c={field:o,value:h,items:[]},d=[c];for(n=0,r=a.length;n<r;n++)e=a[n],tt(h,i=l.get(e,o))||(c={field:o,value:h=i,items:[]},d.push(c)),c.items.push(e);return new Q(d)},_sortForGrouping:function(t,e){var i,n,r=this.data;if(!R){for(i=0,n=r.length;i<n;i++)r[i].__position=i;for(i=0,n=(r=new Q(r).sort(t,e,q).toArray()).length;i<n;i++)delete r[i].__position;return r}return this.sort(t,e).toArray()},aggregate:function(t){var e,i,n={},r={};if(t&&t.length)for(e=0,i=this.data.length;e<i;e++)et(n,t,this.data[e],e,i,r);return n}};var it={sum:function(t,e,i){var n=i.get(e);return nt(t)?nt(n)&&(t+=n):t=n,t},count:function(t){return(t||0)+1},average:function(t,i,n,r,o,s){var a=n.get(i);return s.count===e&&(s.count=0),nt(t)?nt(a)&&(t+=a):t=a,nt(a)&&s.count++,r==o-1&&nt(t)&&(t/=s.count),t},max:function(t,e,i){var n=i.get(e);return nt(t)||(t=n),t<n&&nt(n)&&(t=n),t},min:function(t,e,i){var n=i.get(e);return nt(t)||(t=n),t>n&&nt(n)&&(t=n),t}};function nt(t){return"number"==typeof t&&!isNaN(t)}function rt(t,e){e=e||{};var i=new Q(t),n=e.aggregate,r=e.filter;return r&&(i=i.filter(r)),i.aggregate(n)}Q.process=function(t,i){i=i||{};var n,r=new Q(t),o=i.group,s=J(o||[]).concat(X(i.sort||[])),a=i.filter,l=i.skip,h=i.take;return a&&(n=(r=r.filter(a)).toArray().length),s&&(r=r.sort(s),o&&(t=r.toArray())),l!==e&&h!==e&&(r=r.range(l,h)),o&&(r=r.group(o,t)),{total:n,data:r.toArray()}};var ot=g.extend({init:function(t){this.data=t.data},read:function(t){t.success(this.data)},update:function(t){t.success(t.data)},create:function(t){t.success(t.data)},destroy:function(t){t.success(t.data)}}),st=g.extend({init:function(t){var e;t=this.options=n({},this.options,t),c(k,function(e,i){typeof t[i]===m&&(t[i]={url:t[i]})}),this.cache=t.cache?at.create(t.cache):{find:d,add:d},e=t.parameterMap,p(t.push)&&(this.push=t.push),this.push||(this.push=C),this.parameterMap=p(e)?e:function(t){var i={};return c(t,function(t,n){t in e&&(t=e[t],o(t)&&(n=t.value(n),t=t.key)),i[t]=n}),i}},options:{parameterMap:C},create:function(t){return h(this.setup(t,"create"))},read:function(i){var n,r,o=this.cache;i=this.setup(i,"read"),n=i.success||d,i.error,(r=o.find(i.data))!==e?n(r):(i.success=function(t){o.add(i.data,t),n(t)},t.ajax(i))},update:function(t){return h(this.setup(t,"update"))},destroy:function(t){return h(this.setup(t,"destroy"))},setup:function(t,e){t=t||{};var i,r=this.options[e],o=p(r.data)?r.data(t.data):r.data;return t=n(!0,{},r,t),i=n(!0,{},o,t.data),t.data=this.parameterMap(i,e),p(t.url)&&(t.url=t.url(i)),t}}),at=g.extend({init:function(){this._store={}},add:function(t,i){t!==e&&(this._store[T(t)]=i)},find:function(t){return this._store[T(t)]},clear:function(){this._store={}},remove:function(t){delete this._store[T(t)]}});function lt(t,e,i,n,r){var o,s,a,l,h;for(l=0,h=t.length;l<h;l++)for(s in o=t[l],e)(a=r[s])&&a!==s&&(o[a]=e[s](o),delete o[s])}function ht(t,e,i,n,r){var o,s,a,l,h;for(l=0,h=t.length;l<h;l++)for(s in o=t[l],e)o[s]=i._parse(s,e[s](o)),(a=r[s])&&a!==s&&delete o[a]}function ct(t,e,i,n,r){var o,s,a,l;for(s=0,l=t.length;s<l;s++)(a=n[(o=t[s]).field])&&a!=o.field&&(o.field=a),o.value=i._parse(o.field,o.value),o.hasSubgroups?ct(o.items,e,i,n,r):ht(o.items,e,i,0,r)}function dt(t,e,i,n,r,o){return function(a){return(a=t(a))&&!s(n)&&("[object Array]"===B.call(a)||a instanceof F||(a=[a]),i(a,n,new e,r,o)),a||[]}}at.create=function(t){var e={inmemory:function(){return new at}};return o(t)&&p(t.find)?t:!0===t?new at:e[t]()};var ut=g.extend({init:function(t){var e,i,n,s,a=this;for(e in t=t||{})i=t[e],a[e]=typeof i===m?S(i):i;if(s=t.modelBase||G,o(a.model)&&(a.model=n=s.define(a.model)),a.model){var l,h=r(a.data,a),d=r(a.groups,a),u=r(a.serialize,a),p={},f={},g={},v={},y=!1;(n=a.model).fields&&(c(n.fields,function(t,e){var i;l=t,o(e)&&e.field?l=e.field:typeof e===m&&(l=e),o(e)&&e.from&&(i=e.from),y=y||i&&i!==t||l!==t,f[t]=S(i||l),g[t]=S(t),p[i||l]=t,v[t]=i||l}),!t.serialize&&y&&(a.serialize=dt(u,n,lt,g,p,v))),a._dataAccessFunction=h,a.data=dt(h,n,ht,f,p,v),a.groups=dt(d,n,ct,f,p,v)}},errors:function(t){return t?t.errors:null},parse:C,data:C,total:function(t){return t.length},groups:C,aggregates:function(){return{}},serialize:function(t){return t}});function pt(t,e){var i,n;for(i=0,n=t.length;i<n;i++)if(t[i].uid==e.uid)return e=t[i],t.splice(i,1),e}function ft(t,e){var i,n,r;for(r=t.length-1,0;r>=0;r--)n=t[r],i={value:e.get(n.field),field:n.field,items:i?[i]:[e],hasSubgroups:!!i,aggregates:{}};return i}function gt(t,e){return e?vt(t,function(t){return t[e.idField]===e.id}):-1}function mt(t,e){return e?vt(t,function(t){return t.uid==e.uid}):-1}function vt(t,e){var i,n;for(i=0,n=t.length;i<n;i++)if(e(t[i]))return i;return-1}function yt(t,e){if(t&&!s(t)){var i,n=t[e];return i=o(n)?n.from||n.field||e:t[e]||e,p(i)?e:i}return e}function bt(t,e){var i,n,r,o,s=[];for(i=0,n=t.length;i<n;i++){for(var l in r={},o=t[i])r[l]=o[l];r.field=yt(e.fields,r.field),r.aggregates&&a(r.aggregates)&&(r.aggregates=bt(r.aggregates,e)),s.push(r)}return s}var wt=f.extend({init:function(t){var i,o=this;t&&(i=t.data),t=o.options=n({},o.options,t),o._map={},o._prefetch={},o._data=[],o._pristineData=[],o._ranges=[],o._view=[],o._pristineTotal=0,o._destroyed=[],o._pageSize=t.pageSize,o._page=t.page||(t.pageSize?1:e),o._sort=X(t.sort),o._filter=K(t.filter),o._group=J(t.group),o._aggregate=t.aggregate,o._total=t.total,f.fn.init.call(o),o.transport=xt.create(t,i),p(o.transport.push)&&o.transport.push({pushCreate:r(o._pushCreate,o),pushUpdate:r(o._pushUpdate,o),pushDestroy:r(o._pushDestroy,o)}),o.reader=new u.data.readers[t.schema.type||"json"](t.schema),o.reader.model,o._data=o._observe(o._data),o.bind(["push",b,y,w,"sync",_,x],t)},options:{data:[],schema:{modelBase:G},serverSorting:!1,serverPaging:!1,serverFiltering:!1,serverGrouping:!1,serverAggregates:!1,batch:!1},_isServerGrouped:function(){var t=this.group()||[];return this.options.serverGrouping&&t.length},_pushCreate:function(t){this._push(t,"pushCreate")},_pushUpdate:function(t){this._push(t,"pushUpdate")},_pushDestroy:function(t){this._push(t,"pushDestroy")},_push:function(t,e){var i=this._readData(t);i||(i=t),this[e](i)},_flatData:function(t){return this._isServerGrouped()?function t(e){var i,n,r=[];for(i=0,n=e.length;i<n;i++)r=e[i].hasSubgroups?r.concat(t(e[i].items)):r.concat(e[i].items.slice());return r}(t):t},parent:d,get:function(t){var e,i,n=this._flatData(this._data);for(e=0,i=n.length;e<i;e++)if(n[e].id==t)return n[e]},getByUid:function(t){var e,i,n=this._flatData(this._data);if(n)for(e=0,i=n.length;e<i;e++)if(n[e].uid==t)return n[e]},indexOf:function(t){return mt(this._data,t)},at:function(t){return this._data[t]},data:function(t){var i=this;if(t===e)return i._data;i._data=this._observe(t),i._pristineData=t.slice(0),i._ranges=[],i._addRange(i._data),i._total=i._data.length,i._pristineTotal=i._total,i._process(i._data)},view:function(){return this._view},add:function(t){return this.insert(this._data.length,t)},_createNewModel:function(t){return this.reader.model?new this.reader.model(t):new U(t)},insert:function(t,e){return e||(e=t,t=0),e instanceof G||(e=this._createNewModel(e)),this._isServerGrouped()?this._data.splice(t,0,ft(this.group(),e)):this._data.splice(t,0,e),e},pushCreate:function(t){a(t)||(t=[t]);for(var e=[],i=0;i<t.length;i++){var n=t[i],r=this.add(n);e.push(r);var o=r.toJSON();this._isServerGrouped()&&(o=ft(this.group(),o)),this._pristineData.push(o)}e.length&&this.trigger("push",{type:"create",items:e})},pushUpdate:function(t){a(t)||(t=[t]);for(var e=[],i=0;i<t.length;i++){var n=t[i],r=this._createNewModel(n),o=this.get(r.id);o?(e.push(o),o.accept(n),o.trigger("change"),this._updatePristineForModel(o,n)):this.pushCreate(n)}e.length&&this.trigger("push",{type:"update",items:e})},pushDestroy:function(t){a(t)||(t=[t]);var e=[],i=this.options.autoSync;this.options.autoSync=!1;try{for(var n=0;n<t.length;n++){var r=t[n],o=this._createNewModel(r),s=!1;this._eachItem(this._data,function(t){for(var i=0;i<t.length;i++)if(t[i].id===o.id){e.push(t[i]),t.splice(i,1),s=!0;break}}),s&&(this._removePristineForModel(o),this._destroyed.pop())}}finally{this.options.autoSync=i}e.length&&this.trigger("push",{type:"destroy",items:e})},remove:function(t){var e,i=this,n=i._isServerGrouped();return this._eachItem(i._data,function(r){if((e=pt(r,t))&&n)return e.isNew&&e.isNew()||i._destroyed.push(e),!0}),this._removeModelFromRanges(t),this._updateRangesLength(),t},sync:function(){var e,i,n=this,r=[],o=[],s=n._destroyed,a=n._flatData(n._data);if(n.reader.model){for(e=0,i=a.length;e<i;e++)a[e].isNew()?r.push(a[e]):a[e].dirty&&o.push(a[e]);var l=n._send("create",r);l.push.apply(l,n._send("update",o)),l.push.apply(l,n._send("destroy",s)),t.when.apply(null,l).then(function(){var t,e;for(t=0,e=arguments.length;t<e;t++)n._accept(arguments[t]);n._change({action:"sync"}),n.trigger("sync")})}},cancelChanges:function(t){t instanceof u.data.Model?this._cancelModel(t):(this._destroyed=[],this._data=this._observe(this._pristineData),this.options.serverPaging&&(this._total=this._pristineTotal),this._change())},hasChanges:function(){var t,e,i=this._data;if(this._destroyed.length)return!0;for(t=0,e=i.length;t<e;t++)if(i[t].isNew()||i[t].dirty)return!0;return!1},_accept:function(e){var i,n=this,r=e.models,o=e.response,l=0,h=n._isServerGrouped(),c=n._pristineData,d=e.type;if(n.trigger(_,{response:o,type:d}),o&&!s(o)){if(o=n.reader.parse(o),n._handleCustomErrors(o))return;o=n.reader.data(o),a(o)||(o=[o])}else o=t.map(r,function(t){return t.toJSON()});for("destroy"===d&&(n._destroyed=[]),l=0,i=r.length;l<i;l++)"destroy"!==d?(r[l].accept(o[l]),"create"===d?c.push(h?ft(n.group(),r[l]):o[l]):"update"===d&&n._updatePristineForModel(r[l],o[l])):n._removePristineForModel(r[l])},_updatePristineForModel:function(t,e){this._executeOnPristineForModel(t,function(t,i){u.deepExtend(i[t],e)})},_executeOnPristineForModel:function(t,e){this._eachPristineItem(function(i){var n=gt(i,t);if(n>-1)return e(n,i),!0})},_removePristineForModel:function(t){this._executeOnPristineForModel(t,function(t,e){e.splice(t,1)})},_readData:function(t){return(this._isServerGrouped()?this.reader.groups:this.reader.data)(t)},_eachPristineItem:function(t){this._eachItem(this._pristineData,t)},_eachItem:function(t,e){t&&t.length&&(this._isServerGrouped()?function t(e,i){var n,r;for(n=0,r=e.length;n<r;n++)if(e[n].hasSubgroups){if(t(e[n].items,i))return!0}else if(i(e[n].items,e[n]))return!0}(t,e):e(t))},_pristineForModel:function(t){var e,i;return this._eachPristineItem(function(n){if((i=gt(n,t))>-1)return e=n[i],!0}),e},_cancelModel:function(t){var e,i=this._pristineForModel(t);this._eachItem(this._data,function(n){-1!=(e=mt(n,t))&&(!t.isNew()&&i?n[e].accept(i):n.splice(e,1))})},_promise:function(e,i,r){var o=this,s=o.transport;return t.Deferred(function(t){o.trigger(w,{type:r}),s[r].call(s,n({success:function(e){t.resolve({response:e,models:i,type:r})},error:function(e,i,n){t.reject(e),o.error(e,i,n)}},e))}).promise()},_send:function(t,e){var i,n,r=[],o=this.reader.serialize(function(t){var e,i=t.length,n=new Array(i);for(e=0;e<i;e++)n[e]=t[e].toJSON();return n}(e));if(this.options.batch)e.length&&r.push(this._promise({data:{models:o}},e,t));else for(i=0,n=e.length;i<n;i++)r.push(this._promise({data:o[i]},[e[i]],t));return r},read:function(t){var e=this,i=e._params(t);e._queueRequest(i,function(){e.trigger(w,{type:"read"})?e._dequeueRequest():(e.trigger(x),e._ranges=[],e.transport.read({data:i,success:r(e.success,e),error:r(e.error,e)}))})},success:function(t){var e=this,i=e.options;e.trigger(_,{response:t,type:"read"}),t=e.reader.parse(t),e._handleCustomErrors(t)?e._dequeueRequest():(e._total=e.reader.total(t),e._pristineTotal=e._total,e._aggregate&&i.serverAggregates&&(e._aggregateResult=e.reader.aggregates(t)),t=e._readData(t),e._pristineData=t.slice(0),e._data=e._observe(t),e._addRange(e._data),e._process(e._data),e._dequeueRequest())},_addRange:function(t){var e=this._skip||0,i=e+this._flatData(t).length;this._ranges.push({start:e,end:i,data:t}),this._ranges.sort(function(t,e){return t.start-e.start})},error:function(t,e,i){this._dequeueRequest(),this.trigger(_,{}),this.trigger(b,{xhr:t,status:e,errorThrown:i})},_params:function(t){var e=this,i=n({take:e.take(),skip:e.skip(),page:e.page(),pageSize:e.pageSize(),sort:e._sort,filter:e._filter,group:e._group,aggregate:e._aggregate},t);return e.options.serverPaging||(delete i.take,delete i.skip,delete i.page,delete i.pageSize),e.options.serverGrouping?e.reader.model&&i.group&&(i.group=bt(i.group,e.reader.model)):delete i.group,e.options.serverFiltering?e.reader.model&&i.filter&&(i.filter=function t(e,i){var n,r,o={};for(var s in e)"filters"!==s&&(o[s]=e[s]);if(e.filters)for(o.filters=[],n=0,r=e.filters.length;n<r;n++)o.filters[n]=t(e.filters[n],i);else o.field=yt(i.fields,o.field);return o}(i.filter,e.reader.model)):delete i.filter,e.options.serverSorting?e.reader.model&&i.sort&&(i.sort=bt(i.sort,e.reader.model)):delete i.sort,e.options.serverAggregates?e.reader.model&&i.aggregate&&(i.aggregate=bt(i.aggregate,e.reader.model)):delete i.aggregate,i},_queueRequest:function(t,i){this._requestInProgress?this._pending={callback:r(i,this),options:t}:(this._requestInProgress=!0,this._pending=e,i())},_dequeueRequest:function(){this._requestInProgress=!1,this._pending&&this._queueRequest(this._pending.options,this._pending.callback)},_handleCustomErrors:function(t){if(this.reader.errors){var e=this.reader.errors(t);if(e)return this.trigger(b,{xhr:null,status:"customerror",errorThrown:"custom error",errors:e}),!0}return!1},_observe:function(t){var e=this,i=e.reader.model,n=!1;return i&&t.length&&(n=!(t[0]instanceof i)),t instanceof F?n&&(t.type=e.reader.model,t.wrapAll(t,t)):(t=new F(t,e.reader.model)).parent=function(){return e.parent()},e._isServerGrouped()&&function t(e,i){var n,r,o,s;if(i)for(n=0,r=e.length;n<r;n++)s=(o=e[n]).items,o.hasSubgroups?t(s,i):!s.length||s[0]instanceof i||(s.type=i,s.wrapAll(s,s))}(t,i),e._changeHandler&&e._data&&e._data instanceof F?e._data.unbind(y,e._changeHandler):e._changeHandler=r(e._change,e),t.bind(y,e._changeHandler)},_change:function(t){var e,i,n=this,r=t?t.action:"";if("remove"===r)for(e=0,i=t.items.length;e<i;e++)t.items[e].isNew&&t.items[e].isNew()||n._destroyed.push(t.items[e]);if(!n.options.autoSync||"add"!==r&&"remove"!==r&&"itemchange"!==r){var o=parseInt(n._total||n._pristineTotal,10);"add"===r?o+=t.items.length:"remove"===r?o-=t.items.length:"itemchange"===r||"sync"===r||n.options.serverPaging?"sync"===r&&(o=n._pristineTotal=parseInt(n._total,10)):o=n._pristineTotal,n._total=o,n._process(n._data,t)}else n.sync()},_process:function(t,i){var n,r=this,o={};!0!==r.options.serverPaging&&(o.skip=r._skip,o.take=r._take||r._pageSize,o.skip===e&&r._page!==e&&r._pageSize!==e&&(o.skip=(r._page-1)*r._pageSize)),!0!==r.options.serverSorting&&(o.sort=r._sort),!0!==r.options.serverFiltering&&(o.filter=r._filter),!0!==r.options.serverGrouping&&(o.group=r._group),!0!==r.options.serverAggregates&&(o.aggregate=r._aggregate,r._aggregateResult=rt(t,o)),n=Q.process(t,o),r._view=n.data,n.total===e||r.options.serverFiltering||(r._total=n.total),(i=i||{}).items=i.items||r._view,r.trigger(y,i)},_mergeState:function(t){var i,n=this;return t!==e&&(n._pageSize=t.pageSize,n._page=t.page,n._sort=t.sort,n._filter=t.filter,n._group=t.group,n._aggregate=t.aggregate,n._skip=t.skip,n._take=t.take,n._skip===e&&(n._skip=n.skip(),t.skip=n.skip()),n._take===e&&n._pageSize!==e&&(n._take=n._pageSize,t.take=n._take),t.sort&&(n._sort=t.sort=X(t.sort)),t.filter&&(n._filter=t.filter=K(t.filter)),t.group&&(n._group=t.group=J(t.group)),t.aggregate&&(n._aggregate=t.aggregate=(i=t.aggregate,a(i)?i:[i]))),t},query:function(t){var i,n=this;n.options.serverSorting||n.options.serverPaging||n.options.serverFiltering||n.options.serverGrouping||n.options.serverAggregates||(n._data===e||0===n._data.length)&&!n._destroyed.length?n.read(n._mergeState(t)):n.trigger(w,{type:"read"})||(n.trigger(x),i=Q.process(n._data,n._mergeState(t)),n.options.serverFiltering||(i.total!==e?n._total=i.total:n._total=n._data.length),n._view=i.data,n._aggregateResult=rt(n._data,t),n.trigger(_,{}),n.trigger(y,{items:i.data}))},fetch:function(e){var i=this;return t.Deferred(function(t){var n=function(e){t.reject(e)};i.one(y,function(r){i.unbind(b,n),t.resolve(),e&&e.call(i,r)}),i.one(b,n),i._query()}).promise()},_query:function(t){this.query(n({},{page:this.page(),pageSize:this.pageSize(),sort:this.sort(),filter:this.filter(),group:this.group(),aggregate:this.aggregate()},t))},next:function(t){var e=this.page(),i=this.total();if(t=t||{},e&&!(i&&e+1>this.totalPages()))return this._skip=e*this.take(),e+=1,t.page=e,this._query(t),e},prev:function(t){var e=this.page();if(t=t||{},e&&1!==e)return this._skip=this._skip-this.take(),e-=1,t.page=e,this._query(t),e},page:function(t){var i;return t!==e?(t=P.max(P.min(P.max(t,1),this.totalPages()),1),void this._query({page:t})):(i=this.skip())!==e?P.round((i||0)/(this.take()||1))+1:e},pageSize:function(t){if(t===e)return this.take();this._query({pageSize:t,page:1})},sort:function(t){if(t===e)return this._sort;this._query({sort:t})},filter:function(t){if(t===e)return this._filter;this._query({filter:t,page:1})},group:function(t){if(t===e)return this._group;this._query({group:t})},total:function(){return parseInt(this._total||0,10)},aggregate:function(t){if(t===e)return this._aggregate;this._query({aggregate:t})},aggregates:function(){return this._aggregateResult},totalPages:function(){var t=this.pageSize()||this.total();return P.ceil((this.total()||0)/t)},inRange:function(t,e){var i=P.min(t+e,this.total());return!this.options.serverPaging&&this._data.length>0||this._findRange(t,i).length>0},lastRange:function(){var t=this._ranges;return t[t.length-1]||{start:0,end:0,data:[]}},firstItemUid:function(){var t=this._ranges;return t.length&&t[0].data.length&&t[0].data[0].uid},range:function(t,i){t=P.min(t||0,this.total());var n,r=this,o=P.max(P.floor(t/i),0)*i,s=P.min(o+i,r.total());if((n=r._findRange(t,P.min(t+i,r.total()))).length){r._skip=t>r.skip()?P.min(s,(r.totalPages()-1)*r.take()):o,r._take=i;var a=r.options.serverPaging,l=r.options.serverSorting,h=r.options.serverFiltering,c=r.options.serverAggregates;try{r.options.serverPaging=!0,r._isServerGrouped()||r.group()&&r.group().length||(r.options.serverSorting=!0),r.options.serverFiltering=!0,r.options.serverPaging=!0,r.options.serverAggregates=!0,a&&(r._data=n=r._observe(n)),r._process(n)}finally{r.options.serverPaging=a,r.options.serverSorting=l,r.options.serverFiltering=h,r.options.serverAggregates=c}}else i!==e&&(r._rangeExists(o,s)?o<t&&r.prefetch(s,i,function(){r.range(t,i)}):r.prefetch(o,i,function(){t>o&&s<r.total()&&!r._rangeExists(s,P.min(s+i,r.total()))?r.prefetch(s,i,function(){r.range(t,i)}):r.range(t,i)}))},_findRange:function(t,i){var n,r,o,s,a,l,h,c,d,u,p,f=this._ranges,g=[],m=this.options,v=m.serverSorting||m.serverPaging||m.serverFiltering||m.serverGrouping||m.serverAggregates;for(r=0,p=f.length;r<p;r++)if(t>=(n=f[r]).start&&t<=n.end){for(u=0,o=r;o<p;o++)if(n=f[o],(d=this._flatData(n.data)).length&&t+u>=n.start){if(l=n.data,h=n.end,!v){var y=J(this.group()||[]).concat(X(this.sort()||[]));d=l=(c=Q.process(n.data,{sort:y,filter:this.filter()})).data,c.total!==e&&(h=c.total)}if(s=0,t+u>n.start&&(s=t+u-n.start),a=d.length,h>i&&(a-=h-i),u+=a-s,g=this._mergeGroups(g,l,s,a),i<=n.end&&u==i-t)return g}break}return[]},_mergeGroups:function(t,e,i,n){if(this._isServerGrouped()){var r,o=e.toJSON();return t.length&&(r=t[t.length-1]),function t(e,i,n,r){for(var o,s,a=0;i.length&&r;){var l=(s=(o=i[a]).items).length;if(e&&e.field===o.field&&e.value===o.value?(e.hasSubgroups&&e.items.length?t(e.items[e.items.length-1],o.items,n,r):(s=s.slice(n,n+r),e.items=e.items.concat(s)),i.splice(a--,1)):o.hasSubgroups&&s.length?t(o,s,n,r):(s=s.slice(n,n+r),o.items=s,o.items.length||i.splice(a--,1)),0===s.length?n-=l:(n=0,r-=s.length),++a>=i.length)break}a<i.length&&i.splice(a,i.length-a)}(r,o,i,n),t.concat(o)}return t.concat(e.slice(i,n))},skip:function(){return this._skip===e?this._page!==e?(this._page-1)*(this.take()||1):e:this._skip},take:function(){return this._take||this._pageSize},_prefetchSuccessHandler:function(t,e,i){var n=this;return function(r){var o,s,a,l=!1,h={start:t,end:e,data:[]};if(n._dequeueRequest(),n.trigger(_,{response:r,type:"read"}),r=n.reader.parse(r),(a=n._readData(r)).length){for(o=0,s=n._ranges.length;o<s;o++)if(n._ranges[o].start===t){l=!0,h=n._ranges[o];break}l||n._ranges.push(h)}h.data=n._observe(a),h.end=h.start+n._flatData(h.data).length,n._ranges.sort(function(t,e){return t.start-e.start}),n._total=n.reader.total(r),i&&a.length?i():n.trigger(y,{})}},prefetch:function(t,e,i){var n=this,r=P.min(t+e,n.total()),o={take:e,skip:t,page:t/e+1,pageSize:e,sort:n._sort,filter:n._filter,group:n._group,aggregate:n._aggregate};n._rangeExists(t,r)?i&&i():(clearTimeout(n._timeout),n._timeout=setTimeout(function(){n._queueRequest(o,function(){n.trigger(w,{type:"read"})?n._dequeueRequest():n.transport.read({data:n._params(o),success:n._prefetchSuccessHandler(t,r,i)})})},100))},_rangeExists:function(t,e){var i,n,r=this._ranges;for(i=0,n=r.length;i<n;i++)if(r[i].start<=t&&r[i].end>=e)return!0;return!1},_removeModelFromRanges:function(t){for(var e,i,n=0,r=this._ranges.length;n<r&&(i=this._ranges[n],this._eachItem(i.data,function(i){pt(i,t)&&(e=!0)}),!e);n++);},_updateRangesLength:function(){for(var t,e,i=0,n=0,r=this._ranges.length;n<r;n++)(t=this._ranges[n]).start=t.start-i,e=this._flatData(t.data).length,i=t.end-e,t.end=t.start+e}}),xt={};xt.create=function(t,e){var i,r=t.transport;return r?(r.read=typeof r.read===m?{url:r.read}:r.read,t.type&&(u.data.transports[t.type]&&!o(u.data.transports[t.type])?i=new u.data.transports[t.type](n(r,{data:e})):r=n(!0,{},u.data.transports[t.type],r),t.schema=n(!0,{},u.data.schemas[t.type],t.schema)),i||(i=p(r.read)?r:new st(r))):i=new ot({data:t.data}),i},wt.create=function(e){(a(e)||e instanceof F)&&(e={data:e});var i,r,o,l=e||{},h=l.data,c=l.fields,d=l.table,p=l.select,f={};if(h||!c||l.transport||(d?h=function(e,i){var n,r,o,s,a,l,h,c=t(e)[0].tBodies[0],d=c?c.rows:[],u=i.length,p=[];for(n=0,r=d.length;n<r;n++){for(a={},h=!0,s=d[n].cells,o=0;o<u;o++)"th"!==(l=s[o]).nodeName.toLowerCase()&&(h=!1,a[i[o].field]=l.innerHTML);h||p.push(a)}return p}(d,c):p&&(h=function(e,i){var n,r,o,s,a,l=t(e)[0].children,h=[],c=i[0],d=i[1];for(n=0,r=l.length;n<r;n++)o={},(a=l[n]).disabled||(o[c.field]=a.text,s=(s=a.attributes.value)&&s.specified?a.value:a.text,o[d.field]=s,h.push(o));return h}(p,c))),u.data.Model&&c&&(!l.schema||!l.schema.model)){for(i=0,r=c.length;i<r;i++)(o=c[i]).type&&(f[o.field]=o);s(f)||(l.schema=n(!0,l.schema,{model:{fields:f}}))}return l.data=h,d=null,l.table=null,l instanceof wt?l:new wt(l)};var _t=G.define({init:function(t){var e=this,i=e.hasChildren||t&&t.hasChildren,r="items",o={};u.data.Model.fn.init.call(e,t),typeof e.children===m&&(r=e.children),o={schema:{data:r,model:{hasChildren:i,id:e.idField}}},typeof e.children!==m&&n(o,e.children),o.data=t,i||(i=o.schema.data),typeof i===m&&(i=u.getter(i)),p(i)&&(e.hasChildren=!!i.call(e,e)),e._childrenOptions=o,e.hasChildren&&e._initChildren(),e._loaded=!(!t||!t[r]&&!t._loaded)},_initChildren:function(){var t,e,i,n=this;n.children instanceof Ct||(e=(t=n.children=new Ct(n._childrenOptions)).transport,i=e.parameterMap,e.parameterMap=function(t,e){return t[n.idField||"id"]=n.id,i&&(t=i(t,e)),t},t.parent=function(){return n},t.bind(y,function(t){t.node=t.node||n,n.trigger(y,t)}),t.bind(b,function(t){var e=n.parent();e&&(t.node=t.node||n,e.trigger(b,t))}),n._updateChildrenField())},append:function(t){this._initChildren(),this.loaded(!0),this.children.add(t)},hasChildren:!1,level:function(){for(var t=this.parentNode(),e=0;t&&t.parentNode;)e++,t=t.parentNode?t.parentNode():null;return e},_updateChildrenField:function(){this[this._childrenOptions.schema.data||"items"]=this.children.data()},_childrenLoaded:function(){this._loaded=!0,this._updateChildrenField()},load:function(){var t,i={},n="_query";this.hasChildren?(this._initChildren(),t=this.children,i[this.idField||"id"]=this.id,this._loaded||(t._data=e,n="read"),t.one(y,r(this._childrenLoaded,this)),t[n](i)):this.loaded(!0)},parentNode:function(){return this.parent().parent()},loaded:function(t){if(t===e)return this._loaded;this._loaded=t},shouldSerialize:function(t){return G.fn.shouldSerialize.call(this,t)&&"children"!==t&&"_loaded"!==t&&"hasChildren"!==t&&"_childrenOptions"!==t}});function kt(t){return function(){var e=this._data,i=wt.fn[t].apply(this,L.call(arguments));return this._data!=e&&this._attachBubbleHandlers(),i}}var Ct=wt.extend({init:function(t){var e=_t.define({children:t});wt.fn.init.call(this,n(!0,{},{schema:{modelBase:e,model:e}},t)),this._attachBubbleHandlers()},_attachBubbleHandlers:function(){var t=this;t._data.bind(b,function(e){t.trigger(b,e)})},remove:function(t){var e,i=t.parentNode(),n=this;return i&&i._initChildren&&(n=i.children),e=wt.fn.remove.call(n,t),i&&!n.data().length&&(i.hasChildren=!1),e},success:kt("success"),data:kt("data"),insert:function(t,e){var i=this.parent();return i&&i._initChildren&&(i.hasChildren=!0,i._initChildren()),wt.fn.insert.call(this,t,e)},_find:function(t,e){var i,n,r,o,s;if(r=wt.fn[t].call(this,e))return r;if(o=this._flatData(this.data()))for(i=0,n=o.length;i<n;i++)if((s=o[i].children)instanceof Ct&&(r=s[t](e)))return r},get:function(t){return this._find("get",t)},getByUid:function(t){return this._find("getByUid",t)}});Ct.create=function(e){var i=(e=e&&e.push?{data:e}:e)||{},n=i.data,r=i.fields,o=i.list;return n&&n._dataSource?n._dataSource:(n||!r||i.transport||o&&(n=function e(i,n){var r,o,s,a,l,h,c,d,u=t(i).children(),p=[],f=n[0].field,g=n[1]&&n[1].field,m=n[2]&&n[2].field,v=n[3]&&n[3].field;function y(t,e){return t.filter(e).add(t.find(e))}for(r=0,o=u.length;r<o;r++)s={_loaded:!0},h=(a=u.eq(r))[0].firstChild,i=(d=a.children()).filter("ul"),d=d.filter(":not(ul)"),(l=a.attr("data-id"))&&(s.id=l),h&&(s[f]=3==h.nodeType?h.nodeValue:d.text()),g&&(s[g]=y(d,"a").attr("href")),v&&(s[v]=y(d,"img").attr("src")),m&&(c=y(d,".k-sprite").prop("className"),s[m]=c&&t.trim(c.replace("k-sprite",""))),i.length&&(s.items=e(i.eq(0),n)),"true"==a.attr("data-hasChildren")&&(s.hasChildren=!0),p.push(s);return p}(o,r)),i.data=n,i instanceof Ct?i:new Ct(i))};var St=u.Observable.extend({init:function(t,e,i){u.Observable.fn.init.call(this),this._prefetching=!1,this.dataSource=t,this.prefetch=!i;var n=this;t.bind("change",function(){n._change()}),this._syncWithDataSource(),this.setViewSize(e)},setViewSize:function(t){this.viewSize=t,this._recalculate()},at:function(t){var i,n=this.pageSize;if(!(t>=this.total())){if(!this.useRanges)return this.dataSource.view()[t];if(this.useRanges){if(t<this.dataOffset||t>this.skip+n){var r=Math.floor(t/n)*n;this.range(r)}t===this.prefetchThreshold&&this._prefetch(),t===this.midPageThreshold?this.range(this.nextMidRange):t===this.nextPageThreshold?this.range(this.nextFullRange):t===this.pullBackThreshold&&(this.offset===this.skip?this.range(this.previousMidRange):this.range(this.previousFullRange)),i=this.dataSource.at(t-this.dataOffset)}return i===e&&this.trigger("endreached",{index:t}),i}this.trigger("endreached",{index:t})},indexOf:function(t){return this.dataSource.data().indexOf(t)+this.dataOffset},total:function(){return parseInt(this.dataSource.total(),10)},next:function(){var t=this,e=t.pageSize,i=t.skip-t.viewSize,n=P.max(P.floor(i/e),0)*e+e;this.offset=i,this.dataSource.prefetch(n,e,function(){t._goToRange(i,!0)})},range:function(t){if(this.offset!==t){var e=this,i=this.pageSize,n=P.max(P.floor(t/i),0)*i+i,r=this.dataSource;this.offset=t,this._recalculate(),r.inRange(t,i)?this._goToRange(t):this.prefetch&&r.prefetch(n,i,function(){e._goToRange(t,!0)})}},syncDataSource:function(){var t=this.offset;this.offset=null,this.range(t)},destroy:function(){this.unbind()},_prefetch:function(){var t=this,e=this.pageSize,i=this.skip+e,n=this.dataSource;n.inRange(i,e)||this._prefetching||!this.prefetch||(this._prefetching=!0,this.trigger("prefetching",{skip:i,take:e}),n.prefetch(i,e,function(){t._prefetching=!1,t.trigger("prefetched",{skip:i,take:e})}))},_goToRange:function(t,e){this.offset===t&&(this.dataOffset=t,this._expanding=e,this.dataSource.range(t,this.pageSize))},_change:function(){var t=this.dataSource,e=t.firstItemUid();this.length=this.useRanges?t.lastRange().end:t.view().length,this._firstItemUid===e&&this.useRanges||(this._syncWithDataSource(),this._recalculate(),this.trigger("reset",{offset:this.offset})),this.trigger("resize"),this._expanding&&this.trigger("expand"),delete this._expanding},_syncWithDataSource:function(){var t=this.dataSource;this._firstItemUid=t.firstItemUid(),this.dataOffset=this.offset=t.skip()||0,this.pageSize=t.pageSize(),this.useRanges=t.options.serverPaging},_recalculate:function(){var t=this.pageSize,e=this.offset,i=this.viewSize,n=Math.ceil(e/t)*t;this.skip=n,this.midPageThreshold=n+t-1,this.nextPageThreshold=n+i-1,this.prefetchThreshold=n+Math.floor(t/3*2),this.pullBackThreshold=this.offset-1,this.nextMidRange=n+t-i,this.nextFullRange=n,this.previousMidRange=e-i,this.previousFullRange=n-t}}),Tt=u.Observable.extend({init:function(t,e){var i=this;u.Observable.fn.init.call(i),this.dataSource=t,this.batchSize=e,this._total=0,this.buffer=new St(t,3*e),this.buffer.bind({endreached:function(t){i.trigger("endreached",{index:t.index})},prefetching:function(t){i.trigger("prefetching",{skip:t.skip,take:t.take})},prefetched:function(t){i.trigger("prefetched",{skip:t.skip,take:t.take})},reset:function(){i._total=0,i.trigger("reset")},resize:function(){i._total=Math.ceil(this.length/i.batchSize),i.trigger("resize",{total:i.total(),offset:this.offset})}})},syncDataSource:function(){this.buffer.syncDataSource()},at:function(t){var i,n=this.buffer,r=t*this.batchSize,o=this.batchSize,s=[];n.offset>r&&n.at(n.offset-1);for(var a=0;a<o&&(i=n.at(r+a))!==e;a++)s.push(i);return s},total:function(){return this._total},destroy:function(){this.buffer.destroy(),this.unbind()}});n(!0,u.data,{readers:{json:ut},Query:Q,DataSource:wt,HierarchicalDataSource:Ct,Node:_t,ObservableObject:U,ObservableArray:F,LocalTransport:ot,RemoteTransport:st,Cache:at,DataReader:ut,Model:G,Buffer:St,BatchBuffer:Tt})}(window.kendo.jQuery),function(t,e){var i,n=window.kendo,r=(n.support.browser,n.Observable),o=n.data.ObservableObject,s=n.data.ObservableArray,a={}.toString,l={},h=(Array.prototype.slice,n.Class),c=t.proxy,d="value",u="source",p="checked",f=!0,g="change";!function(){var t=document.createElement("a");t.innerText!==e?i="innerText":t.textContent!==e&&(i="textContent");try{delete t.test}catch(t){f=!1}}();var m=r.extend({init:function(t,e){var i=this;r.fn.init.call(i),i.source=t[0],i.parents=t,i.path=e,i.dependencies={},i.dependencies[e]=!0,i.observable=i.source instanceof r,i._access=function(t){i.dependencies[t.field]=!0},i.observable&&(i._change=function(t){i.change(t)},i.source.bind(g,i._change))},_parents:function(){var e=this.parents,i=this.get();if(i&&"function"==typeof i.parent){var n=i.parent();t.inArray(n,e)<0&&(e=[n].concat(e))}return e},change:function(t){var e,i,n=t.field;if("this"===this.path)this.trigger(g,t);else for(e in this.dependencies)if(0===e.indexOf(n)&&(!(i=e.charAt(n.length))||"."===i||"["===i)){this.trigger(g,t);break}},start:function(t){t.bind("get",this._access)},stop:function(t){t.unbind("get",this._access)},get:function(){var t=this,i=t.source,n=0,r=t.path,s=i;if(!t.observable)return s;for(t.start(t.source),s=i.get(r);s===e&&i;)(i=t.parents[++n])instanceof o&&(s=i.get(r));if(s===e)for(i=t.source;s===e&&i;)(i=i.parent())instanceof o&&(s=i.get(r));return"function"==typeof s&&((n=r.lastIndexOf("."))>0&&(i=i.get(r.substring(0,n))),t.start(i),s=i!==t.source?s.call(i,t.source):s.call(i),t.stop(i)),i&&i!==t.source&&(t.currentSource=i,i.unbind(g,t._change).bind(g,t._change)),t.stop(t.source),s},set:function(t){var e=this.currentSource||this.source,i=n.getter(this.path)(e);"function"==typeof i?e!==this.source?i.call(e,this.source,t):i.call(e,t):e.set(this.path,t)},destroy:function(){this.observable&&this.source.unbind(g,this._change)}}),v=m.extend({get:function(){var t,e=this.source,i=this.path,n=0;for(t=e.get(i);!t&&e;)(e=this.parents[++n])instanceof o&&(t=e.get(i));return c(t,e)}}),y=m.extend({init:function(t,e,i){m.fn.init.call(this,t,e),this.template=i},render:function(t){var e;return this.start(this.source),e=n.render(this.template,t),this.stop(this.source),e}}),b=h.extend({init:function(t,e,i){this.element=t,this.bindings=e,this.options=i},bind:function(t,e){var i=this;(t=e?t[e]:t).bind(g,function(t){i.refresh(e||t)}),i.refresh(e)},destroy:function(){}});l.attr=b.extend({refresh:function(t){this.element.setAttribute(t,this.bindings.attr[t].get())}}),l.style=b.extend({refresh:function(t){this.element.style[t]=this.bindings.style[t].get()||""}}),l.enabled=b.extend({refresh:function(){this.bindings.enabled.get()?this.element.removeAttribute("disabled"):this.element.setAttribute("disabled","disabled")}}),l.readonly=b.extend({refresh:function(){this.bindings.readonly.get()?this.element.setAttribute("readonly","readonly"):this.element.removeAttribute("readonly")}}),l.disabled=b.extend({refresh:function(){this.bindings.disabled.get()?this.element.setAttribute("disabled","disabled"):this.element.removeAttribute("disabled")}}),l.events=b.extend({init:function(t,e,i){b.fn.init.call(this,t,e,i),this.handlers={}},refresh:function(e){var i=t(this.element),n=this.bindings.events[e],r=this.handlers[e];r&&i.off(e,r),r=this.handlers[e]=n.get(),i.on(e,n.source,r)},destroy:function(){var e,i=t(this.element);for(e in this.handlers)i.off(e,this.handlers[e])}}),l.text=b.extend({refresh:function(){var t=this.bindings.text.get();null==t&&(t=""),this.element[i]=t}}),l.visible=b.extend({refresh:function(){this.bindings.visible.get()?this.element.style.display="":this.element.style.display="none"}}),l.invisible=b.extend({refresh:function(){this.bindings.invisible.get()?this.element.style.display="none":this.element.style.display=""}}),l.html=b.extend({refresh:function(){this.element.innerHTML=this.bindings.html.get()}}),l.value=b.extend({init:function(e,i,n){b.fn.init.call(this,e,i,n),this._change=c(this.change,this),this.eventName=n.valueUpdate||g,t(this.element).on(this.eventName,this._change),this._initChange=!1},change:function(){this._initChange=this.eventName!=g;var t=this.element.value,e=this.element.type;"date"==e?t=n.parseDate(t,"yyyy-MM-dd"):"datetime-local"==e?t=n.parseDate(t,["yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm"]):"number"==e&&(t=n.parseFloat(t)),this.bindings[d].set(t),this._initChange=!1},refresh:function(){if(!this._initChange){var t=this.bindings[d].get();null==t&&(t="");var e=this.element.type;"date"==e?t=n.toString(t,"yyyy-MM-dd"):"datetime-local"==e&&(t=n.toString(t,"yyyy-MM-ddTHH:mm:ss")),this.element.value=t}this._initChange=!1},destroy:function(){t(this.element).off(this.eventName,this._change)}}),l.source=b.extend({init:function(t,e,i){b.fn.init.call(this,t,e,i);var r=this.bindings.source.get();r instanceof n.data.DataSource&&!1!==i.autoBind&&r.fetch()},refresh:function(t){var e=this.bindings.source.get();e instanceof s||e instanceof n.data.DataSource?"add"==(t=t||{}).action?this.add(t.index,t.items):"remove"==t.action?this.remove(t.index,t.items):"itemchange"!=t.action&&this.render():this.render()},container:function(){var t=this.element;return"table"==t.nodeName.toLowerCase()&&(t.tBodies[0]||t.appendChild(document.createElement("tbody")),t=t.tBodies[0]),t},template:function(){var t=this.options,e=t.template,i=this.container().nodeName.toLowerCase();return e||(e="select"==i?t.valueField||t.textField?n.format('<option value="#:{0}#">#:{1}#</option>',t.valueField||t.textField,t.textField||t.valueField):"<option>#:data#</option>":"tbody"==i?"<tr><td>#:data#</td></tr>":"ul"==i||"ol"==i?"<li>#:data#</li>":"#:data#",e=n.template(e)),e},add:function(e,i){var r,o,s,a,l=this.container(),h=l.cloneNode(!1),c=l.children[e];if(t(h).html(n.render(this.template(),i)),h.children.length)for(r=this.bindings.source._parents(),o=0,s=i.length;o<s;o++)a=h.children[0],l.insertBefore(a,c||null),T(a,i[o],this.options.roles,[i[o]].concat(r))},remove:function(t,e){var i,n=this.container();for(i=0;i<e.length;i++){var r=n.children[t];D(r),n.removeChild(r)}},render:function(){var e,i,r,o=this.bindings.source.get(),l=this.container(),h=this.template();if(o instanceof n.data.DataSource&&(o=o.view()),o instanceof s||"[object Array]"===a.call(o)||(o=[o]),this.bindings.template){if(z(l),t(l).html(this.bindings.template.render(o)),l.children.length)for(e=this.bindings.source._parents(),i=0,r=o.length;i<r;i++)T(l.children[i],o[i],this.options.roles,[o[i]].concat(e))}else t(l).html(n.render(h,o))}}),l.input={checked:b.extend({init:function(e,i,n){b.fn.init.call(this,e,i,n),this._change=c(this.change,this),t(this.element).change(this._change)},change:function(){var t=this.element,e=this.value();if("radio"==t.type)this.bindings[p].set(e);else if("checkbox"==t.type){var i,n=this.bindings[p].get();n instanceof s?"on"!==(e=this.element.value)&&"off"!==e&&((i=n.indexOf(e))>-1?n.splice(i,1):n.push(e)):this.bindings[p].set(e)}},refresh:function(){var t=this.bindings[p].get(),e=t,i=this.element;"checkbox"==i.type?(e instanceof s&&(t=this.element.value,e.indexOf(t)>=0&&(t=!0)),i.checked=!0===t):"radio"==i.type&&null!=t&&i.value===t.toString()&&(i.checked=!0)},value:function(){var t=this.element,e=t.value;return"checkbox"==t.type&&(e=t.checked),e},destroy:function(){t(this.element).off(g,this._change)}})},l.select={value:b.extend({init:function(e,i,n){b.fn.init.call(this,e,i,n),this._change=c(this.change,this),t(this.element).change(this._change)},change:function(){var t,e,i,n,r,a,l=[],h=this.element,c=this.options.valueField||this.options.textField,u=this.options.valuePrimitive;for(r=0,a=h.options.length;r<a;r++)(e=h.options[r]).selected&&(n=(n=e.attributes.value)&&n.specified?e.value:e.text,l.push(n));if(c)for(t=this.bindings.source.get(),i=0;i<l.length;i++)for(r=0,a=t.length;r<a;r++)if(t[r].get(c)==l[i]){l[i]=t[r];break}(n=this.bindings[d].get())instanceof s?n.splice.apply(n,[0,n.length].concat(l)):u||!(n instanceof o)&&c?this.bindings[d].set(l[0].get(c)):this.bindings[d].set(l[0])},refresh:function(){var t,e,i=this.element,n=i.options,r=this.bindings[d].get(),a=r,l=this.options.valueField||this.options.textField;a instanceof s||(a=new s([r])),i.selectedIndex=-1;for(var h=0;h<a.length;h++)for(r=a[h],l&&r instanceof o&&(r=r.get(l)),t=0;t<n.length;t++)""===(e=n[t].value)&&""!==r&&(e=n[t].text),e==r&&(n[t].selected=!0,!0)},destroy:function(){t(this.element).off(g,this._change)}})},l.widget={events:b.extend({init:function(t,e,i){b.fn.init.call(this,t.element[0],e,i),this.widget=t,this.handlers={}},refresh:function(t){var e=this.bindings.events[t],i=this.handlers[t];i&&this.widget.unbind(t,i),i=e.get(),this.handlers[t]=function(t){t.data=e.source,i(t),t.data===e.source&&delete t.data},this.widget.bind(t,this.handlers[t])},destroy:function(){var t;for(t in this.handlers)this.widget.unbind(t,this.handlers[t])}}),checked:b.extend({init:function(t,e,i){b.fn.init.call(this,t.element[0],e,i),this.widget=t,this._change=c(this.change,this),this.widget.bind(g,this._change)},change:function(){this.bindings[p].set(this.value())},refresh:function(){this.widget.check(!0===this.bindings[p].get())},value:function(){var t=this.element,e=t.value;return"on"!=e&&"off"!=e||(e=t.checked),e},destroy:function(){this.widget.unbind(g,this._change)}}),visible:b.extend({init:function(t,e,i){b.fn.init.call(this,t.element[0],e,i),this.widget=t},refresh:function(){var t=this.bindings.visible.get();this.widget.wrapper[0].style.display=t?"":"none"}}),invisible:b.extend({init:function(t,e,i){b.fn.init.call(this,t.element[0],e,i),this.widget=t},refresh:function(){var t=this.bindings.invisible.get();this.widget.wrapper[0].style.display=t?"none":""}}),enabled:b.extend({init:function(t,e,i){b.fn.init.call(this,t.element[0],e,i),this.widget=t},refresh:function(){this.widget.enable&&this.widget.enable(this.bindings.enabled.get())}}),disabled:b.extend({init:function(t,e,i){b.fn.init.call(this,t.element[0],e,i),this.widget=t},refresh:function(){this.widget.enable&&this.widget.enable(!this.bindings.disabled.get())}}),source:b.extend({init:function(t,e,i){var n=this;b.fn.init.call(n,t.element[0],e,i),n.widget=t,n._dataBinding=c(n.dataBinding,n),n._dataBound=c(n.dataBound,n),n._itemChange=c(n.itemChange,n)},itemChange:function(t){T(t.item[0],t.data,this._ns(t.ns),[t.data].concat(this.bindings.source._parents()))},dataBinding:function(){var t,e,i=this.widget.items();for(t=0,e=i.length;t<e;t++)D(i[t])},_ns:function(e){e=e||n.ui;var i=[n.ui,n.dataviz.ui,n.mobile.ui];return i.splice(t.inArray(e,i),1),i.unshift(e),n.rolesFromNamespaces(i)},dataBound:function(t){var e,i,n,r=this.widget,o=r.items(),s=r.dataSource,a=s.view(),l=s.group()||[];if(o.length)for(l.length&&(a=function t(e){var i,n,r,o,s=[];for(i=0,n=e.length;i<n;i++)if(e[i].hasSubgroups)s=s.concat(t(e[i].items));else for(r=e[i].items,o=0;o<r.length;o++)s.push(r[o]);return s}(a)),n=this.bindings.source._parents(),e=0,i=a.length;e<i;e++)T(o[e],a[e],this._ns(t.ns),[a[e]].concat(n))},refresh:function(t){var e,i=this.widget;(t=t||{}).action||(this.destroy(),i.bind("dataBinding",this._dataBinding),i.bind("dataBound",this._dataBound),i.bind("itemChange",this._itemChange),e=this.bindings.source.get(),i.dataSource instanceof n.data.DataSource&&i.dataSource!=e&&(e instanceof n.data.DataSource?i.setDataSource(e):e&&e._dataSource?i.setDataSource(e._dataSource):i.dataSource.data(e)))},destroy:function(){var t=this.widget;t.unbind("dataBinding",this._dataBinding),t.unbind("dataBound",this._dataBound),t.unbind("itemChange",this._itemChange)}}),value:b.extend({init:function(e,i,n){b.fn.init.call(this,e.element[0],i,n),this.widget=e,this._change=t.proxy(this.change,this),this.widget.first(g,this._change);var r=this.bindings.value.get();this._valueIsObservableObject=!n.valuePrimitive&&(null==r||r instanceof o),this._valueIsObservableArray=r instanceof s,this._initChange=!1},change:function(){var t,e,i,r,o,s,l,h=this.widget.value(),c=this.options.dataValueField||this.options.dataTextField,d="[object Array]"===a.call(h),u=this._valueIsObservableObject,p=[];if(this._initChange=!0,c)if(this.bindings.source&&(l=this.bindings.source.get()),""===h&&(u||this.options.valuePrimitive))h=null;else{for((!l||l instanceof n.data.DataSource)&&(l=this.widget.dataSource.view()),d&&(e=h.length,p=h.slice(0)),o=0,s=l.length;o<s;o++)if(r=(i=l[o]).get(c),d){for(t=0;t<e;t++)if(r==p[t]){p[t]=i;break}}else if(r==h){h=u?i:r;break}p[0]&&(h=this._valueIsObservableArray?p:u||!c?p[0]:p[0].get(c))}this.bindings.value.set(h),this._initChange=!1},refresh:function(){if(!this._initChange){var t,i=this.options.dataValueField||this.options.dataTextField,n=this.bindings.value.get(),r=0,a=[];if(n===e&&(n=null),i)if(n instanceof s){for(t=n.length;r<t;r++)a[r]=n[r].get(i);n=a}else n instanceof o&&(n=n.get(i));this.widget.value(n)}this._initChange=!1},destroy:function(){this.widget.unbind(g,this._change)}}),multiselect:{value:b.extend({init:function(e,i,n){b.fn.init.call(this,e.element[0],i,n),this.widget=e,this._change=t.proxy(this.change,this),this.widget.first(g,this._change),this._initChange=!1},change:function(){var t=this.bindings[d].get(),e=this.options.valuePrimitive,i=e?this.widget.value():this.widget.dataItems(),n=this.options.dataValueField||this.options.dataTextField;if(i=i.slice(0),this._initChange=!0,t instanceof s){for(var r,o,a,l=[],h=i.length,c=0,u=0,p=t[c];p;){for(a=!1,u=0;u<h;u++)if(e?i[u]==p:(o=(o=i[u]).get?o.get(n):o)==(p.get?p.get(n):p)){i.splice(u,1),h-=1,a=!0;break}a?c+=1:(l.push(p),w(t,c,1),r=c),p=t[c]}w(t,t.length,0,i),l.length&&t.trigger("change",{action:"remove",items:l,index:r}),i.length&&t.trigger("change",{action:"add",items:i,index:t.length-1})}else this.bindings[d].set(i);this._initChange=!1},refresh:function(){if(!this._initChange){var t,i,n=this.options.dataValueField||this.options.dataTextField,r=this.bindings.value.get(),a=0,l=[];if(r===e&&(r=null),n)if(r instanceof s){for(t=r.length;a<t;a++)i=r[a],l[a]=i.get?i.get(n):i;r=l}else r instanceof o&&(r=r.get(n));this.widget.value(r)}},destroy:function(){this.widget.unbind(g,this._change)}})}};var w=function(t,e,i,n){i=i||0;var r,o=(n=n||[]).length,s=t.length,a=[].slice.call(t,e+i),l=a.length;if(o){for(o=e+o,r=0;e<o;e++)t[e]=n[r],r++;t.length=o}else if(i)for(t.length=e,i+=e;e<i;)delete t[--i];if(l){for(l=e+l,r=0;e<l;e++)t[e]=a[r],r++;t.length=l}for(e=t.length;e<s;)delete t[e],e++},x=h.extend({init:function(t,e){this.target=t,this.options=e,this.toDestroy=[]},bind:function(t){var e,i,n,r,o=this.target.nodeName.toLowerCase(),s=l[o]||{};for(e in t)e==d?i=!0:e==u?n=!0:"events"==e?r=!0:this.applyBinding(e,t,s);n&&this.applyBinding(u,t,s),i&&this.applyBinding(d,t,s),r&&this.applyBinding("events",t,s)},applyBinding:function(t,e,i){var n,r=i[t]||l[t],o=this.toDestroy,s=e[t];if(r)if(r=new r(this.target,e,this.options),o.push(r),s instanceof m)r.bind(s),o.push(s);else for(n in s)r.bind(s,n),o.push(s[n]);else if("template"!==t)throw new Error("The "+t+" binding is not supported by the "+this.target.nodeName.toLowerCase()+" element")},destroy:function(){var t,e,i=this.toDestroy;for(t=0,e=i.length;t<e;t++)i[t].destroy()}}),_=x.extend({bind:function(t){var e,i=!1,n=!1,r=l.widget[this.target.options.name.toLowerCase()]||{};for(e in t)e==d?i=!0:e==u?n=!0:this.applyBinding(e,t,r);n&&this.applyBinding(u,t,r),i&&this.applyBinding(d,t,r)},applyBinding:function(t,e,i){var n,r=i[t]||l.widget[t],o=this.toDestroy,s=e[t];if(!r)throw new Error("The "+t+" binding is not supported by the "+this.target.options.name+" widget");if(r=new r(this.target,e,this.target.options),o.push(r),s instanceof m)r.bind(s),o.push(s);else for(n in s)r.bind(s,n),o.push(s[n])}});var k=/[A-Za-z0-9_\-]+:(\{([^}]*)\}|[^,}]+)/g,C=/\s/g;function S(t,e,i){var n,r={};for(n in t)r[n]=new i(e,t[n]);return r}function T(t,e,i,r){var o,s,a,l=t.getAttribute("data-"+n.ns+"role"),h=t.getAttribute("data-"+n.ns+"bind"),c=t.children,d=[],u=!0,p={};if(r=r||[e],(l||h)&&A(t),l&&(a=function(t,e){var i=n.initWidget(t,{},e);if(i)return new _(i)}(t,i)),h&&(h=function t(e){var i,n,r,o,s,a,l,h={};for(i=0,n=(l=e.match(k)).length;i<n;i++)o=(r=l[i]).indexOf(":"),s=r.substring(0,o),"{"==(a=r.substring(o+1)).charAt(0)&&(a=t(a)),h[s]=a;return h}(h.replace(C,"")),a||((p=n.parseOptions(t,{textField:"",valueField:"",template:"",valueUpdate:g,valuePrimitive:!1,autoBind:!0})).roles=i,a=new x(t,p)),a.source=e,s=S(h,r,m),p.template&&(s.template=new y(r,"",p.template)),s.click&&(h.events=h.events||{},h.events.click=h.click,delete s.click),s.source&&(u=!1),h.attr&&(s.attr=S(h.attr,r,m)),h.style&&(s.style=S(h.style,r,m)),h.events&&(s.events=S(h.events,r,v)),a.bind(s)),a&&(t.kendoBindingTarget=a),u&&c){for(o=0;o<c.length;o++)d[o]=c[o];for(o=0;o<d.length;o++)T(d[o],e,i,r)}}function P(e,i){var r,o,s,a=n.rolesFromNamespaces([].slice.call(arguments,2));for(i=n.observable(i),r=0,o=(e=t(e)).length;r<o;r++)1===(s=e[r]).nodeType&&T(s,i,a)}function A(t){var e=t.kendoBindingTarget;e&&(e.destroy(),f?delete t.kendoBindingTarget:t.removeAttribute?t.removeAttribute("kendoBindingTarget"):t.kendoBindingTarget=null)}function D(t){A(t),z(t)}function z(t){var e=t.children;if(e)for(var i=0,n=e.length;i<n;i++)D(e[i])}n.unbind=function(e){var i,n;for(i=0,n=(e=t(e)).length;i<n;i++)D(e[i])},n.bind=P,n.data.binders=l,n.data.Binder=b,n.notify=function(t,e){var i=t.element,n=i[0].kendoBindingTarget;n&&P(i,n.source,e)},n.observable=function(t){return t instanceof o||(t=new o(t)),t},n.observableHierarchy=function(t){var e=n.data.HierarchicalDataSource.create(t);return e.fetch(),function t(e){var i,n;for(i=0;i<e.length;i++)e[i]._initChildren(),(n=e[i].children).fetch(),e[i].items=n.data(),t(e[i].items)}(e.data()),e._data._dataSource=e,e._data}}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=i.Observable,r=/unrecognized expression/,o=n.extend({init:function(t,e){e=e||{},n.fn.init.call(this),this.content=t,this.id=i.guid(),this.tagName=e.tagName||"div",this.model=e.model,this._wrap=!1!==e.wrap,this._fragments={},this.bind(["init","show","hide"],e)},render:function(e){var n=this,r=!n.element;return r&&(n.element=n._createElement()),e&&t(e).append(n.element),r&&(i.bind(n.element,n.model),n.trigger("init")),e&&(n._eachFragment("attach"),n.trigger("show")),n.element},clone:function(t){return new s(this)},triggerBeforeShow:function(){return!0},showStart:function(){this.element.css("display","")},showEnd:function(){},hideStart:function(){},hideEnd:function(){this.hide()},hide:function(){this._eachFragment("detach"),this.element.detach(),this.trigger("hide")},destroy:function(){var t=this.element;t&&(i.unbind(t),i.destroy(t),t.remove())},fragments:function(e){t.extend(this._fragments,e)},_eachFragment:function(t){for(var e in this._fragments)this._fragments[e][t](this,e)},_createElement:function(){var e,n,o=this,s=o._wrap,a="<"+o.tagName+" />";try{"SCRIPT"===(n=t(document.getElementById(o.content)||o.content))[0].tagName&&(n=n.html())}catch(t){r.test(t.message)&&(n=o.content)}return"string"==typeof n?(e=t(a).append(n),i.stripWhitespace(e[0]),s||(e=e.contents())):(e=n,s&&(e=e.wrapAll(a).parent())),e}}),s=i.Class.extend({init:function(e){t.extend(this,{element:e.element.clone(!0),transition:e.transition,id:e.id}),e.element.parent().append(this.element)},hideStart:t.noop,hideEnd:function(){this.element.remove()}}),a=o.extend({init:function(t,e){o.fn.init.call(this,t,e),this.containers={}},container:function(t){var e=this.containers[t];return e||(e=this._createContainer(t),this.containers[t]=e),e},showIn:function(t,e,i){this.container(t).show(e,i)},_createContainer:function(t){var e,i=this.render(),n=i.find(t);if(!n.length&&i.is(t)){if(!i.is(t))throw new Error("can't find a container with the specified "+t+" selector");n=i}return(e=new c(n)).bind("accepted",function(t){t.view.render(n)}),e}}),l=o.extend({attach:function(t,e){t.element.find(e).replaceWith(this.render())},detach:function(){console.log("detach",arguments)}}),h=/^(\w+)(:(\w+))?( (\w+))?$/;var c=n.extend({init:function(t){n.fn.init.call(this),this.container=t,this.history=[],this.view=null,this.running=!1},after:function(){this.running=!1,this.trigger("complete",{view:this.view}),this.trigger("after")},end:function(){this.view.showEnd(),this.previous.hideEnd(),this.after()},show:function(t,e,n){if(!t.triggerBeforeShow())return this.trigger("after"),!1;n=n||t.id;var r=this,o=t===r.view?t.clone():r.view,s=r.history,a=(s[s.length-2]||{}).id===n,l=e||(a?s[s.length-1].transition:t.transition),c=function(t){if(!t)return{};var e=t.match(h)||[];return{type:e[1],direction:e[3],reverse:"reverse"===e[5]}}(l);return r.running&&r.effect.stop(),"none"===l&&(l=null),r.trigger("accepted",{view:t}),r.view=t,r.previous=o,r.running=!0,a?s.pop():s.push({id:n,transition:l}),o?(o.hideStart(),t.showStart(),l&&i.effects.enabled?(a&&!e&&(c.reverse=!c.reverse),r.effect=i.fx(t.element).replace(o.element,c.type).direction(c.direction).setReverse(c.reverse),r.effect.run().then(function(){r.end()})):r.end(),!0):(t.showStart(),t.showEnd(),r.after(),!0)}});i.ViewContainer=c,i.Fragment=l,i.Layout=a,i.View=o,i.ViewClone=s}(window.kendo.jQuery),kendo.data.transports.signalr=kendo.data.RemoteTransport.extend({init:function(t){var e=t&&t.signalr?t.signalr:{},i=e.promise;if(!i)throw new Error('The "promise" option must be set.');if("function"!=typeof i.done||"function"!=typeof i.fail)throw new Error('The "promise" option must be a Promise.');this.promise=i;var n=e.hub;if(!n)throw new Error('The "hub" option must be set.');if("function"!=typeof n.on||"function"!=typeof n.invoke)throw new Error('The "hub" option is not a valid SignalR hub proxy.');this.hub=n,kendo.data.RemoteTransport.fn.init.call(this,t)},push:function(t){var e=this.options.signalr.client||{};e.create&&this.hub.on(e.create,t.pushCreate),e.update&&this.hub.on(e.update,t.pushUpdate),e.destroy&&this.hub.on(e.destroy,t.pushDestroy)},_crud:function(t,e){var i=this.hub,n=this.options.signalr.server;if(!n||!n[e])throw new Error(kendo.format('The "server.{0}" option must be set.',e));var r=[n[e]],o=this.parameterMap(t.data,e);$.isEmptyObject(o)||r.push(o),this.promise.done(function(){i.invoke.apply(i,r).done(t.success).fail(t.error)})},read:function(t){this._crud(t,"read")},create:function(t){this._crud(t,"create")},update:function(t){this._crud(t,"update")},destroy:function(t){this._crud(t,"destroy")}}),function(t,e){var i=window.kendo,n=i.support,r=window.document,o=i.Class,s=i.Observable,a=t.now,l=t.extend,h=n.mobileOS,c=h&&h.android,d=800,u=n.browser.msie?5:0,p="gesturechange",f="gestureend",g="gesturetap";function m(t,e){var i=t.x.location,n=t.y.location,r=e.x.location,o=e.y.location,s=i-r,a=n-o;return{center:{x:(i+r)/2,y:(n+o)/2},distance:Math.sqrt(s*s+a*a)}}function v(t){var e,i,r,o=[],s=t.originalEvent,a=t.currentTarget,l=0;if(t.api)o.push({id:2,event:t,target:t.target,currentTarget:t.target,location:t});else if(t.type.match(/touch/))for(e=(i=s?s.changedTouches:[]).length;l<e;l++)r=i[l],o.push({location:r,event:t,target:r.target,currentTarget:a,id:r.identifier});else n.pointers||n.msPointers?o.push({location:s,event:t,target:t.target,currentTarget:a,id:s.pointerId}):o.push({id:1,event:t,target:t.target,currentTarget:a,location:t});return o}var y=o.extend({init:function(t,e){this.axis=t,this._updateLocationData(e),this.startLocation=this.location,this.velocity=this.delta=0,this.timeStamp=a()},move:function(t){var e=this,i=t["page"+e.axis],n=a(),r=n-e.timeStamp||1;!i&&c||(e.delta=i-e.location,e._updateLocationData(t),e.initialDelta=i-e.startLocation,e.velocity=e.delta/r,e.timeStamp=n)},_updateLocationData:function(t){var e=this.axis;this.location=t["page"+e],this.client=t["client"+e],this.screen=t["screen"+e]}}),b=o.extend({init:function(t,e,i){l(this,{x:new y("X",i.location),y:new y("Y",i.location),userEvents:t,target:e,currentTarget:i.currentTarget,initialTouch:i.target,id:i.id,pressEvent:i,_moved:!1,_finished:!1})},press:function(){this._holdTimeout=setTimeout(t.proxy(this,"_hold"),this.userEvents.minHold),this._trigger("press",this.pressEvent)},_hold:function(){this._trigger("hold",this.pressEvent)},move:function(t){var e=this;if(!e._finished){if(e.x.move(t.location),e.y.move(t.location),!e._moved){if(e._withinIgnoreThreshold())return;if(x.current&&x.current!==e.userEvents)return e.dispose();e._start(t)}e._finished||e._trigger("move",t)}},end:function(t){this.endTime=a(),this._finished||(this._finished=!0,this._moved?this._trigger("end",t):this._trigger("tap",t),clearTimeout(this._holdTimeout),this._trigger("release",t),this.dispose())},dispose:function(){var e=this.userEvents.touches;this._finished=!0,this.pressEvent=null,clearTimeout(this._holdTimeout),e.splice(t.inArray(this,e),1)},skip:function(){this.dispose()},cancel:function(){this.dispose()},isMoved:function(){return this._moved},_start:function(t){clearTimeout(this._holdTimeout),this.startTime=a(),this._moved=!0,this._trigger("start",t)},_trigger:function(t,e){var i=e.event,n={touch:this,x:this.x,y:this.y,target:this.target,event:i};this.userEvents.notify(t,n)&&i.preventDefault()},_withinIgnoreThreshold:function(){var t=this.x.initialDelta,e=this.y.initialDelta;return Math.sqrt(t*t+e*e)<=this.userEvents.threshold}});function w(t){for(var e=i.eventMap.up.split(" "),n=0,r=e.length;n<r;n++)t(e[n])}var x=s.extend({init:function(e,o){var a,h=this,c=i.guid();if(o=o||{},a=h.filter=o.filter,h.threshold=o.threshold||u,h.minHold=o.minHold||d,h.touches=[],h._maxTouches=o.multiTouch?2:1,h.allowSelection=o.allowSelection,h.captureUpIfMoved=o.captureUpIfMoved,h.eventNS=c,e=t(e).handler(h),s.fn.init.call(h),l(h,{element:e,surface:o.global?t(r.documentElement):t(o.surface||e),stopPropagation:o.stopPropagation,pressed:!1}),h.surface.handler(h).on(i.applyEventMap("move",c),"_move").on(i.applyEventMap("up cancel",c),"_end"),e.on(i.applyEventMap("down",c),a,"_start"),(n.pointers||n.msPointers)&&e.css("-ms-touch-action","pinch-zoom double-tap-zoom"),o.preventDragEvent&&e.on(i.applyEventMap("dragstart",c),i.preventDefault),e.on(i.applyEventMap("mousedown selectstart",c),a,{root:e},"_select"),h.captureUpIfMoved&&n.eventCapture){var m=h.surface[0],v=t.proxy(h.preventIfMoving,h);w(function(t){m.addEventListener(t,v,!0)})}h.bind(["press","hold","tap","start","move","end","release","cancel","gesturestart",p,f,g,"select"],o)},preventIfMoving:function(t){this._isMoved()&&t.preventDefault()},destroy:function(){var t=this;if(!t._destroyed){if(t._destroyed=!0,t.captureUpIfMoved&&n.eventCapture){var e=t.surface[0];w(function(i){e.removeEventListener(i,t.preventIfMoving)})}t.element.kendoDestroy(t.eventNS),t.surface.kendoDestroy(t.eventNS),t.element.removeData("handler"),t.surface.removeData("handler"),t._disposeAll(),t.unbind(),delete t.surface,delete t.element,delete t.currentTarget}},capture:function(){x.current=this},cancel:function(){this._disposeAll(),this.trigger("cancel")},notify:function(t,e){var i=this.touches;if(this._isMultiTouch()){switch(t){case"move":t=p;break;case"end":t=f;break;case"tap":t=g}l(e,{touches:i},m(i[0],i[1]))}return this.trigger(t,e)},press:function(t,e,i){this._apiCall("_start",t,e,i)},move:function(t,e){this._apiCall("_move",t,e)},end:function(t,e){this._apiCall("_end",t,e)},_isMultiTouch:function(){return this.touches.length>1},_maxTouchesReached:function(){return this.touches.length>=this._maxTouches},_disposeAll:function(){for(var t=this.touches;t.length>0;)t.pop().dispose()},_isMoved:function(){return t.grep(this.touches,function(t){return t.isMoved()}).length},_select:function(e){this.allowSelection&&!this.trigger("select",{event:e})||function(e){e.preventDefault();var i=t(e.data.root),n=i.closest(".k-widget").parent();n[0]||(n=i.parent());var r=t.extend(!0,{},e,{target:i[0]});n.trigger(t.Event(e.type,r))}(e)},_start:function(e){var i,n,r=this,o=0,s=r.filter,a=v(e),l=a.length,h=e.which;if(!(h&&h>1||r._maxTouchesReached()))for(x.current=null,r.currentTarget=e.currentTarget,r.stopPropagation&&e.stopPropagation();o<l&&!r._maxTouchesReached();o++)n=a[o],(i=s?t(n.currentTarget):r.element).length&&(n=new b(r,i,n),r.touches.push(n),n.press(),r._isMultiTouch()&&r.notify("gesturestart",{}))},_move:function(t){this._eachTouch("move",t)},_end:function(t){this._eachTouch("end",t)},_eachTouch:function(t,e){var i,n,r,o,s={},a=v(e),l=this.touches;for(i=0;i<l.length;i++)s[(n=l[i]).id]=n;for(i=0;i<a.length;i++)(o=s[(r=a[i]).id])&&o[t](r)},_apiCall:function(e,i,n,r){this[e]({api:!0,pageX:i,pageY:n,clientX:i,clientY:n,target:t(r||this.element)[0],stopPropagation:t.noop,preventDefault:t.noop})}});x.minHold=function(t){d=t},i.getTouches=v,i.touchDelta=m,i.UserEvents=x}(window.kendo.jQuery),function(t,e){var i,n=window.kendo,r=n.support,o=window.document,s=n.Class,a=n.ui.Widget,l=n.Observable,h=n.UserEvents,c=t.proxy,d=t.extend,u=n.getOffset,p={},f={},g={},m=n.elementUnderCursor,v="change",y="dragcancel",b="dragenter",w="dragleave";function x(t,e){return parseInt(t.css(e),10)||0}function _(t,e){return Math.min(Math.max(t,e.min),e.max)}function k(t,e){var i=u(t),n=i.left+x(t,"borderLeftWidth")+x(t,"paddingLeft"),r=i.top+x(t,"borderTopWidth")+x(t,"paddingTop");return{x:{min:n,max:n+t.width()-e.outerWidth(!0)},y:{min:r,max:r+t.height()-e.outerHeight(!0)}}}var C,S=l.extend({init:function(e,i){var r=this,o=e[0];r.capture=!1,o.addEventListener?(t.each(n.eventMap.down.split(" "),function(){o.addEventListener(this,c(r._press,r),!0)}),t.each(n.eventMap.up.split(" "),function(){o.addEventListener(this,c(r._release,r),!0)})):(t.each(n.eventMap.down.split(" "),function(){o.attachEvent(this,c(r._press,r))}),t.each(n.eventMap.up.split(" "),function(){o.attachEvent(this,c(r._release,r))})),l.fn.init.call(r),r.bind(["press","release"],i||{})},captureNext:function(){this.capture=!0},cancelCapture:function(){this.capture=!1},_press:function(t){this.trigger("press"),this.capture&&t.preventDefault()},_release:function(t){this.trigger("release"),this.capture&&(t.preventDefault(),this.cancelCapture())}}),T=l.extend({init:function(e){var i=this;l.fn.init.call(i),i.forcedEnabled=!1,t.extend(i,e),i.scale=1,i.horizontal?(i.measure="offsetWidth",i.scrollSize="scrollWidth",i.axis="x"):(i.measure="offsetHeight",i.scrollSize="scrollHeight",i.axis="y")},makeVirtual:function(){t.extend(this,{virtual:!0,forcedEnabled:!0,_virtualMin:0,_virtualMax:0})},virtualSize:function(t,e){this._virtualMin===t&&this._virtualMax===e||(this._virtualMin=t,this._virtualMax=e,this.update())},outOfBounds:function(t){return t>this.max||t<this.min},forceEnabled:function(){this.forcedEnabled=!0},getSize:function(){return this.container[0][this.measure]},getTotal:function(){return this.element[0][this.scrollSize]},rescale:function(t){this.scale=t},update:function(t){var e=this,i=e.virtual?e._virtualMax:e.getTotal(),n=i*e.scale,r=e.getSize();e.max=e.virtual?-e._virtualMin:0,e.size=r,e.total=n,e.min=Math.min(e.max,r-n),e.minScale=r/i,e.centerOffset=(n-r)/2,e.enabled=e.forcedEnabled||n>r,t||e.trigger(v,e)}}),P=l.extend({init:function(t){l.fn.init.call(this),this.x=new T(d({horizontal:!0},t)),this.y=new T(d({horizontal:!1},t)),this.container=t.container,this.forcedMinScale=t.minScale,this.maxScale=t.maxScale||100,this.bind(v,t)},rescale:function(t){this.x.rescale(t),this.y.rescale(t),this.refresh()},centerCoordinates:function(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}},refresh:function(){var t=this;t.x.update(),t.y.update(),t.enabled=t.x.enabled||t.y.enabled,t.minScale=t.forcedMinScale||Math.min(t.x.minScale,t.y.minScale),t.fitScale=Math.max(t.x.minScale,t.y.minScale),t.trigger(v)}}),A=l.extend({init:function(t){d(this,t),l.fn.init.call(this)},outOfBounds:function(){return this.dimension.outOfBounds(this.movable[this.axis])},dragMove:function(t){var e=this.dimension,i=this.axis,n=this.movable,r=n[i]+t;e.enabled&&((r<e.min&&t<0||r>e.max&&t>0)&&(t*=this.resistance),n.translateAxis(i,t),this.trigger(v,this))}}),D=s.extend({init:function(t){var e,i,n,r,o=this;d(o,{elastic:!0},t),n=o.elastic?.5:0,r=o.movable,o.x=e=new A({axis:"x",dimension:o.dimensions.x,resistance:n,movable:r}),o.y=i=new A({axis:"y",dimension:o.dimensions.y,resistance:n,movable:r}),o.userEvents.bind(["move","end","gesturestart","gesturechange"],{gesturestart:function(t){o.gesture=t,o.offset=o.dimensions.container.offset()},gesturechange:function(t){var n,s=o.gesture,a=s.center,l=t.center,h=t.distance/s.distance,c=o.dimensions.minScale,d=o.dimensions.maxScale;r.scale<=c&&h<1&&(h+=.8*(1-h)),r.scale*h>=d&&(h=d/r.scale);var u=r.x+o.offset.left,p=r.y+o.offset.top;n={x:(u-a.x)*h+l.x-u,y:(p-a.y)*h+l.y-p},r.scaleWith(h),e.dragMove(n.x),i.dragMove(n.y),o.dimensions.rescale(r.scale),o.gesture=t,t.preventDefault()},move:function(t){t.event.target.tagName.match(/textarea|input/i)||(e.dimension.enabled||i.dimension.enabled?(e.dragMove(t.x.delta),i.dragMove(t.y.delta),t.preventDefault()):t.touch.skip())},end:function(t){t.preventDefault()}})}}),z=r.transitions.prefix+"Transform";C=r.hasHW3D?function(t,e,i){return"translate3d("+t+"px,"+e+"px,0) scale("+i+")"}:function(t,e,i){return"translate("+t+"px,"+e+"px) scale("+i+")"};var E=l.extend({init:function(e){var i=this;l.fn.init.call(i),i.element=t(e),i.element[0].style.webkitTransformOrigin="left top",i.x=0,i.y=0,i.scale=1,i._saveCoordinates(C(i.x,i.y,i.scale))},translateAxis:function(t,e){this[t]+=e,this.refresh()},scaleTo:function(t){this.scale=t,this.refresh()},scaleWith:function(t){this.scale*=t,this.refresh()},translate:function(t){this.x+=t.x,this.y+=t.y,this.refresh()},moveAxis:function(t,e){this[t]=e,this.refresh()},moveTo:function(t){d(this,t),this.refresh()},refresh:function(){var t,e=this,i=e.x,r=e.y;e.round&&(i=Math.round(i),r=Math.round(r)),(t=C(i,r,e.scale))!=e.coordinates&&(n.support.browser.msie&&n.support.browser.version<10?(e.element[0].style.position="absolute",e.element[0].style.left=e.x+"px",e.element[0].style.top=e.y+"px"):e.element[0].style[z]=t,e._saveCoordinates(t),e.trigger(v))},_saveCoordinates:function(t){this.coordinates=t}}),M=a.extend({init:function(t,e){a.fn.init.call(this,t,e);var i=this.options.group;i in f?f[i].push(this):f[i]=[this]},events:[b,w,"drop"],options:{name:"DropTarget",group:"default"},destroy:function(){var t,e=this.options.group,i=f[e]||g[e];if(i.length>1){for(a.fn.destroy.call(this),t=0;t<i.length;t++)if(i[t]==this){i.splice(t,1);break}}else M.destroyGroup(e)},_trigger:function(t,e){var i=p[this.options.group];if(i)return this.trigger(t,d({},e.event,{draggable:i,dropTarget:e.dropTarget}))},_over:function(t){this._trigger(b,t)},_out:function(t){this._trigger(w,t)},_drop:function(t){var e=p[this.options.group];e&&(e.dropped=!this._trigger("drop",t))}});M.destroyGroup=function(t){var e,i=f[t]||g[t];if(i){for(e=0;e<i.length;e++)a.fn.destroy.call(i[e]);i.length=0,delete f[t],delete g[t]}},M._cache=f;var L=M.extend({init:function(t,e){a.fn.init.call(this,t,e);var i=this.options.group;i in g?g[i].push(this):g[i]=[this]},options:{name:"DropTargetArea",group:"default",filter:null}}),I=a.extend({init:function(t,e){var i=this;a.fn.init.call(i,t,e),i._activated=!1,i.userEvents=new h(i.element,{global:!0,allowSelection:!0,stopPropagation:!0,filter:i.options.filter,threshold:i.options.distance,start:c(i._start,i),hold:c(i._hold,i),move:c(i._drag,i),end:c(i._end,i),cancel:c(i._cancel,i),select:c(i._select,i)}),i._afterEndHandler=c(i._afterEnd,i),i.captureEscape=function(t){t.keyCode===n.keys.ESC&&(i._trigger(y,{event:t}),i.userEvents.cancel())}},events:["hold","dragstart","drag","dragend",y],options:{name:"Draggable",distance:5,group:"default",cursorOffset:null,axis:null,container:null,filter:null,ignore:null,holdToDrag:!1,dropped:!1},cancelHold:function(){this._activated=!1},_updateHint:function(e){var i,n=this.options,r=this.boundaries,o=n.axis,s=this.options.cursorOffset;s?i={left:e.x.location+s.left,top:e.y.location+s.top}:(this.hintOffset.left+=e.x.delta,this.hintOffset.top+=e.y.delta,i=t.extend({},this.hintOffset)),r&&(i.top=_(i.top,r.y),i.left=_(i.left,r.x)),"x"===o?delete i.top:"y"===o&&delete i.left,this.hint.css(i)},_shouldIgnoreTarget:function(e){var i=this.options.ignore;return i&&t(e).is(i)},_select:function(t){this._shouldIgnoreTarget(t.event.target)||t.preventDefault()},_start:function(e){var i=this,r=i.options,s=r.container,a=r.hint;if(this._shouldIgnoreTarget(e.touch.initialTouch)||r.holdToDrag&&!i._activated)i.userEvents.cancel();else{if(i.currentTarget=e.target,i.currentTargetOffset=u(i.currentTarget),a){i.hint&&i.hint.stop(!0,!0).remove(),i.hint=n.isFunction(a)?t(a.call(i,i.currentTarget)):a;var l=u(i.currentTarget);i.hintOffset=l,i.hint.css({position:"absolute",zIndex:2e4,left:l.left,top:l.top}).appendTo(o.body)}p[r.group]=i,i.dropped=!1,s&&(i.boundaries=k(s,i.hint)),i._trigger("dragstart",e)&&(i.userEvents.cancel(),i._afterEnd()),t(o).on("keyup",i.captureEscape)}},_hold:function(t){this.currentTarget=t.target,this._trigger("hold",t)?this.userEvents.cancel():this._activated=!0},_drag:function(e){e.preventDefault(),this._withDropTarget(e,function(n,r){if(n){if(i){if(r===i.targetElement)return;i._trigger(w,d(e,{dropTarget:t(i.targetElement)}))}n._trigger(b,d(e,{dropTarget:t(r)})),i=d(n,{targetElement:r})}else i&&(i._trigger(w,d(e,{dropTarget:t(i.targetElement)})),i=null)}),this._trigger("drag",e),this.hint&&this._updateHint(e)},_end:function(e){this._withDropTarget(e,function(n,r){n&&(n._drop(d({},e,{dropTarget:t(r)})),i=null)}),this._trigger("dragend",e),this._cancel(e.event)},_cancel:function(){var t=this;t._activated=!1,t.hint&&!t.dropped?setTimeout(function(){t.hint.stop(!0,!0).animate(t.currentTargetOffset,"fast",t._afterEndHandler)},0):t._afterEnd()},_trigger:function(t,e){return this.trigger(t,d({},e.event,{x:e.x,y:e.y,currentTarget:this.currentTarget,dropTarget:e.dropTarget}))},_withDropTarget:function(i,n){var o,s,a=this.options,l=f[a.group],h=g[a.group];(l&&l.length||h&&h.length)&&(o=m(i),this.hint&&function(e,i){try{return t.contains(e,i)||e==i}catch(t){return!1}}(this.hint[0],o)&&(this.hint.hide(),(o=m(i))||(o=m(i)),this.hint.show()),(s=function(t,i,n){for(var o,s,a=0,l=i&&i.length,h=n&&n.length;t&&t.parentNode;){for(a=0;a<l;a++)if((o=i[a]).element[0]===t)return{target:o,targetElement:t};for(a=0;a<h;a++)if(s=n[a],r.matchesSelector.call(t,s.options.filter))return{target:s,targetElement:t};t=t.parentNode}return e}(o,l,h))?n(s.target,s.targetElement):n())},destroy:function(){a.fn.destroy.call(this),this._afterEnd(),this.userEvents.destroy(),this.currentTarget=null},_afterEnd:function(){this.hint&&this.hint.remove(),delete p[this.options.group],this.trigger("destroy"),t(o).off("keyup",this.captureEscape)}});n.ui.plugin(M),n.ui.plugin(L),n.ui.plugin(I),n.TapCapture=S,n.containerBoundaries=k,d(n.ui,{Pane:D,PaneDimensions:P,Movable:E})}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=i.mobile,r=i.effects,o=n.ui,s=t.proxy,a=t.extend,l=o.Widget,h=i.Class,c=i.ui.Movable,d=i.ui.Pane,u=i.ui.PaneDimensions,p=r.Transition,f=r.Animation,g=Math.abs,m="km-scroller-release",v="km-scroller-refresh",y="change",b=f.extend({init:function(t){f.fn.init.call(this),a(this,t),this.userEvents.bind("gestureend",s(this.start,this)),this.tapCapture.bind("press",s(this.cancel,this))},enabled:function(){return this.movable.scale<this.dimensions.minScale},done:function(){return this.dimensions.minScale-this.movable.scale<.01},tick:function(){var t=this.movable;t.scaleWith(1.1),this.dimensions.rescale(t.scale)},onEnd:function(){var t=this.movable;t.scaleTo(this.dimensions.minScale),this.dimensions.rescale(t.scale)}}),w=f.extend({init:function(t){var e=this;f.fn.init.call(e),a(e,t,{transition:new p({axis:t.axis,movable:t.movable,onEnd:function(){e._end()}})}),e.tapCapture.bind("press",function(){e.cancel()}),e.userEvents.bind("end",s(e.start,e)),e.userEvents.bind("gestureend",s(e.start,e)),e.userEvents.bind("tap",s(e.onEnd,e))},onCancel:function(){this.transition.cancel()},freeze:function(t){this.cancel(),this._moveTo(t)},onEnd:function(){this.paneAxis.outOfBounds()?this._snapBack():this._end()},done:function(){return g(this.velocity)<1},start:function(t){var e;this.dimension.enabled&&(this.paneAxis.outOfBounds()?this._snapBack():(e=2===t.touch.id?0:t.touch[this.axis].velocity,this.velocity=Math.max(Math.min(e*this.velocityMultiplier,55),-55),this.tapCapture.captureNext(),f.fn.start.call(this)))},tick:function(){var t=this,e=t.dimension,i=t.paneAxis.outOfBounds()?.5:t.friction,n=t.velocity*=i,r=t.movable[t.axis]+n;!t.elastic&&e.outOfBounds(r)&&(r=Math.max(Math.min(r,e.max),e.min),t.velocity=0),t.movable.moveAxis(t.axis,r)},_end:function(){this.tapCapture.cancelCapture(),this.end()},_snapBack:function(){var t=this.dimension,e=this.movable[this.axis]>t.max?t.max:t.min;this._moveTo(e)},_moveTo:function(t){this.transition.moveTo({location:t,duration:500,ease:p.easeOutExpo})}}),x=f.extend({init:function(t){i.effects.Animation.fn.init.call(this),a(this,t,{origin:{},destination:{},offset:{}})},tick:function(){this._updateCoordinates(),this.moveTo(this.origin)},done:function(){return g(this.offset.y)<5&&g(this.offset.x)<5},onEnd:function(){this.moveTo(this.destination)},setCoordinates:function(t,e){this.offset={},this.origin=t,this.destination=e},_updateCoordinates:function(){this.offset={x:(this.destination.x-this.origin.x)/4,y:(this.destination.y-this.origin.y)/4},this.origin={y:this.origin.y+this.offset.y,x:this.origin.x+this.offset.x}}}),_=h.extend({init:function(e){var i="x"===e.axis,n=t('<div class="km-touch-scrollbar km-'+(i?"horizontal":"vertical")+'-scrollbar" />');a(this,e,{element:n,elementSize:0,movable:new c(n),scrollMovable:e.movable,size:i?"width":"height"}),this.scrollMovable.bind(y,s(this._move,this)),this.container.append(n)},_move:function(){var t=this.axis,e=this.dimension,i=e.size,n=this.scrollMovable,r=i/e.total,o=Math.round(-n[t]*r),s=Math.round(i*r);o+s>i?s=i-o:o<0&&(s+=o,o=0),this.elementSize!=s&&(this.element.css(this.size,s+"px"),this.elementSize=s),this.movable.moveAxis(t,o)},show:function(){this.element.css({opacity:.7,visibility:"visible"})},hide:function(){this.element.css({opacity:0})}}),k=l.extend({init:function(e,n){var r=this;if(l.fn.init.call(r,e,n),e=r.element,r._native=r.options.useNative&&i.support.hasNativeScrolling,r._native)return e.addClass("km-native-scroller").prepend('<div class="km-scroll-header"/>'),void a(r,{scrollElement:e,fixedContainer:e.children().first()});e.css("overflow","hidden").addClass("km-scroll-wrapper").wrapInner('<div class="km-scroll-container"/>').prepend('<div class="km-scroll-header"/>');var o=e.children().eq(1),h=new i.TapCapture(e),p=new c(o),f=new u({element:o,container:e,forcedEnabled:r.options.zoom}),m=this.options.avoidScrolling,v=new i.UserEvents(e,{allowSelection:!0,preventDragEvent:!0,captureUpIfMoved:!0,multiTouch:r.options.zoom,start:function(e){f.refresh();var i=g(e.x.velocity),n=g(e.y.velocity),o=2*i>=n,s=2*n>=i;!t.contains(r.fixedContainer[0],e.event.target)&&!m(e)&&r.enabled&&(f.x.enabled&&o||f.y.enabled&&s)?v.capture():v.cancel()}}),w=new d({movable:p,dimensions:f,userEvents:v,elastic:r.options.elastic}),_=new b({movable:p,dimensions:f,userEvents:v,tapCapture:h}),k=new x({moveTo:function(t){r.scrollTo(t.x,t.y)}});p.bind(y,function(){r.scrollTop=-p.y,r.scrollLeft=-p.x,r.trigger("scroll",{scrollTop:r.scrollTop,scrollLeft:r.scrollLeft})}),r.options.mousewheelScrolling&&e.on("DOMMouseScroll mousewheel",s(this,"_wheelScroll")),a(r,{movable:p,dimensions:f,zoomSnapBack:_,animatedScroller:k,userEvents:v,pane:w,tapCapture:h,pulled:!1,enabled:!0,scrollElement:o,scrollTop:0,scrollLeft:0,fixedContainer:e.children().first()}),r._initAxis("x"),r._initAxis("y"),r._wheelEnd=function(){r._wheel=!1,r.userEvents.end(0,r._wheelY)},f.refresh(),r.options.pullToRefresh&&r._initPullToRefresh()},_wheelScroll:function(t){this._wheel||(this._wheel=!0,this._wheelY=0,this.userEvents.press(0,this._wheelY)),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(this._wheelEnd,50);var e=i.wheelDeltaY(t);e&&(this._wheelY+=e,this.userEvents.move(0,this._wheelY)),t.preventDefault()},makeVirtual:function(){this.dimensions.y.makeVirtual()},virtualSize:function(t,e){this.dimensions.y.virtualSize(t,e)},height:function(){return this.dimensions.y.size},scrollHeight:function(){return this.scrollElement[0].scrollHeight},scrollWidth:function(){return this.scrollElement[0].scrollWidth},options:{name:"Scroller",zoom:!1,pullOffset:140,elastic:!0,useNative:!1,mousewheelScrolling:!0,avoidScrolling:function(){return!1},pullToRefresh:!1,pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"},events:["pull","scroll","resize"],_resize:function(){this._native||this.contentResized()},setOptions:function(t){l.fn.setOptions.call(this,t),t.pullToRefresh&&this._initPullToRefresh()},reset:function(){this._native?this.scrollElement.scrollTop(0):(this.movable.moveTo({x:0,y:0}),this._scale(1))},contentResized:function(){this.dimensions.refresh(),this.pane.x.outOfBounds()&&this.movable.moveAxis("x",this.dimensions.x.min),this.pane.y.outOfBounds()&&this.movable.moveAxis("y",this.dimensions.y.min)},zoomOut:function(){var t=this.dimensions;t.refresh(),this._scale(t.fitScale),this.movable.moveTo(t.centerCoordinates())},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},scrollTo:function(t,e){this._native?(this.scrollElement.scrollLeft(g(t)),this.scrollElement.scrollTop(g(e))):(this.dimensions.refresh(),this.movable.moveTo({x:t,y:e}))},animatedScrollTo:function(t,e){var i,n;this._native?this.scrollTo(t,e):(i={x:this.movable.x,y:this.movable.y},n={x:t,y:e},this.animatedScroller.setCoordinates(i,n),this.animatedScroller.start())},pullHandled:function(){this.refreshHint.removeClass(v),this.hintContainer.html(this.pullTemplate({})),this.yinertia.onEnd(),this.xinertia.onEnd(),this.userEvents.cancel()},destroy:function(){l.fn.destroy.call(this),this.userEvents&&this.userEvents.destroy()},_scale:function(t){this.dimensions.rescale(t),this.movable.scaleTo(t)},_initPullToRefresh:function(){var t=this;t.dimensions.y.forceEnabled(),t.pullTemplate=i.template(t.options.pullTemplate),t.releaseTemplate=i.template(t.options.releaseTemplate),t.refreshTemplate=i.template(t.options.refreshTemplate),t.scrollElement.prepend('<span class="km-scroller-pull"><span class="km-icon"></span><span class="km-loading-left"></span><span class="km-loading-right"></span><span class="km-template">'+t.pullTemplate({})+"</span></span>"),t.refreshHint=t.scrollElement.children().first(),t.hintContainer=t.refreshHint.children(".km-template"),t.pane.y.bind("change",s(t._paneChange,t)),t.userEvents.bind("end",s(t._dragEnd,t))},_dragEnd:function(){this.pulled&&(this.pulled=!1,this.refreshHint.removeClass(m).addClass(v),this.hintContainer.html(this.refreshTemplate({})),this.yinertia.freeze(this.options.pullOffset/2),this.trigger("pull"))},_paneChange:function(){var t=this;t.movable.y/.5>t.options.pullOffset?t.pulled||(t.pulled=!0,t.refreshHint.removeClass(v).addClass(m),t.hintContainer.html(t.releaseTemplate({}))):t.pulled&&(t.pulled=!1,t.refreshHint.removeClass(m),t.hintContainer.html(t.pullTemplate({})))},_initAxis:function(t){var e=this,i=e.movable,n=e.dimensions[t],r=e.tapCapture,o=e.pane[t],s=new _({axis:t,movable:i,dimension:n,container:e.element});o.bind(y,function(){s.show()}),e[t+"inertia"]=new w({axis:t,paneAxis:o,movable:i,tapCapture:r,userEvents:e.userEvents,dimension:n,elastic:e.options.elastic,friction:e.options.friction||.96,velocityMultiplier:e.options.velocityMultiplier||10,end:function(){s.hide(),e.trigger("scrollEnd",{axis:t,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft})}})}});o.plugin(k)}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=i.ui,r=n.Widget,o=i.support,s=i.getOffset,a=i._activeElement,l="deactivate",h="center",c="right",d="bottom",u="absolute",p="body",f="location",g="position",m="k-state-active",v="k-state-border",y=/k-state-border-(\w+)/,b=".k-picker-wrap, .k-dropdown-wrap, .k-link",w="down",x=t(window),_=t(document.documentElement),k="resize scroll",C=o.transitions.css+"transform",S=t.extend,T=".kendoPopup",P=["font-size","font-family","font-stretch","font-style","font-weight","line-height"];function A(e,i){return e===i||t.contains(e,i)}var D=r.extend({init:function(e,n){var o,s=this;(n=n||{}).isRtl&&(n.origin=n.origin||d+" "+c,n.position=n.position||"top "+c),r.fn.init.call(s,e,n),e=s.element,n=s.options,s.collisions=n.collision?n.collision.split(" "):[],1===s.collisions.length&&s.collisions.push(s.collisions[0]),o=t(s.options.anchor).closest(".k-popup,.k-group").filter(":not([class^=km-])"),n.appendTo=t(t(n.appendTo)[0]||o[0]||p),s.element.hide().addClass("k-popup k-group k-reset").toggleClass("k-rtl",!!n.isRtl).css({position:u}).appendTo(n.appendTo).on("mouseenter"+T,function(){s._hovered=!0}).on("mouseleave"+T,function(){s._hovered=!1}),s.wrapper=t(),!1===n.animation&&(n.animation={open:{effects:{}},close:{hide:!0,effects:{}}}),S(n.animation.open,{complete:function(){s.wrapper.css({overflow:"visible"}),s.trigger("activate")}}),S(n.animation.close,{complete:function(){s.wrapper.hide();var r,o,a=s.wrapper.data(f),h=t(n.anchor);a&&s.wrapper.css(a),n.anchor!=p&&(r=(h[0].className.match(y)||["","down"])[1],o=v+"-"+r,h.removeClass(o).children(b).removeClass(m).removeClass(o),e.removeClass(v+"-"+i.directions[r].reverse)),s._closing=!1,s.trigger(l)}}),s._mousedownProxy=function(t){s._mousedown(t)},s._resizeProxy=function(t){s._resize(t)},n.toggleTarget&&t(n.toggleTarget).on(n.toggleEvent+T,t.proxy(s.toggle,s))},events:["open","activate","close",l],options:{name:"Popup",toggleEvent:"click",origin:d+" left",position:"top left",anchor:p,collision:"flip fit",viewport:window,copyAnchorStyles:!0,autosize:!1,modal:!1,animation:{open:{effects:"slideIn:down",transition:!0,duration:200},close:{duration:100,hide:!0}}},destroy:function(){var e,n=this.options,o=this.element.off(T);r.fn.destroy.call(this),n.toggleTarget&&t(n.toggleTarget).off(T),n.modal||(_.unbind(w,this._mousedownProxy),x.unbind(k,this._resizeProxy)),i.destroy(this.element.children()),o.removeData(),n.appendTo[0]===document.body&&((e=o.parent(".k-animation-container"))[0]?e.remove():o.remove())},open:function(e,n){var r,s,a=this,l={isFixed:!isNaN(parseInt(n,10)),x:e,y:n},h=a.element,c=a.options,d="down",f=t(c.anchor),y=h[0]&&h.hasClass("km-widget");if(!a.visible()){if(c.copyAnchorStyles&&(y&&"font-size"==P[0]&&P.shift(),h.css(i.getComputedStyles(f[0],P))),h.data("animating")||a.trigger("open"))return;if(c.modal||(_.unbind(w,a._mousedownProxy).bind(w,a._mousedownProxy),o.mobileOS.ios||o.mobileOS.android||x.unbind(k,a._resizeProxy).bind(k,a._resizeProxy)),a.wrapper=s=i.wrap(h,c.autosize).css({overflow:"hidden",display:"block",position:u}),o.mobileOS.android&&s.add(f).css(C,"translatez(0)"),s.css(g),t(c.appendTo)[0]==document.body&&s.css("top","-10000px"),r=S(!0,{},c.animation.open),a.flipped=a._position(l),r.effects=i.parseEffects(r.effects,a.flipped),d=r.effects.slideIn?r.effects.slideIn.direction:d,c.anchor!=p){var T=v+"-"+d;h.addClass(v+"-"+i.directions[d].reverse),f.addClass(T).children(b).addClass(m).addClass(T)}h.data("effects",r.effects).kendoStop(!0).kendoAnimate(r)}},toggle:function(){this[this.visible()?"close":"open"]()},visible:function(){return this.element.is(":visible")},close:function(){var e,n,r,o,s=this,a=s.options;if(s.visible()){if(e=s.wrapper[0]?s.wrapper:i.wrap(s.element).hide(),s._closing||s.trigger("close"))return;s.element.find(".k-popup").each(function(){var e=t(this).data("kendoPopup");e&&e.close()}),_.unbind(w,s._mousedownProxy),x.unbind(k,s._resizeProxy),n=S(!0,{},a.animation.close),r=s.element.data("effects"),!(o=n.effects)&&!i.size(o)&&r&&i.size(r)&&(n.effects=r,n.reverse=!0),s._closing=!0,s.element.kendoStop(!0),e.css({overflow:"hidden"}),s.element.kendoAnimate(n)}},_resize:function(t){var e=this;"resize"===t.type?(clearTimeout(e._resizeTimeout),e._resizeTimeout=setTimeout(function(){e._position(),e._resizeTimeout=null},50)):e._hovered||A(e.element[0],a())||e.close()},_mousedown:function(e){var n=this.element[0],r=this.options,o=t(r.anchor)[0],s=r.toggleTarget,a=i.eventTarget(e),l=t(a).closest(".k-popup"),h=l.parent().parent(".km-shim").length;l=l[0],!h&&l&&l!==this.element[0]||"popover"!==t(e.target).closest("a").data("rel")&&(A(n,a)||A(o,a)||s&&A(t(s)[0],a)||this.close())},_fit:function(t,e,i){var n=0;return t+e>i&&(n=i-(t+e)),t<0&&(n=-t),n},_flip:function(t,e,i,n,r,o,s){var a=0;return s=s||e,o!==r&&o!==h&&r!==h&&(t+s>n&&(a+=-(i+e)),t+a<0&&(a+=i+e)),a},_position:function(e){var i,n,r,a,l,h,c=this,d=c.element.css(g,""),p=c.wrapper,m=c.options,v=t(m.viewport),y=v.offset(),b=t(m.anchor),w=m.origin.toLowerCase().split(" "),x=m.position.toLowerCase().split(" "),_=c.collisions,k=o.zoomLevel(),C=10002,T=!!(v[0]==window&&window.innerWidth&&k<=1.02),P=0;if(l=T?window.innerWidth:v.width(),h=T?window.innerHeight:v.height(),(i=b.parents().filter(p.siblings()))[0])if(r=Number(t(i).css("zIndex")))C=r+1;else for(a=(n=b.parentsUntil(i)).length;P<a;P++)(r=Number(t(n[P]).css("zIndex")))&&C<r&&(C=r+1);p.css("zIndex",C),e&&e.isFixed?p.css({left:e.x,top:e.y}):p.css(c._align(w,x));var A=s(p,g,b[0]===p.offsetParent()[0]),D=s(p);b.offsetParent().parent(".k-animation-container,.k-popup,.k-group").length&&(A=s(p,g,!0),D=s(p)),v[0]===window?(D.top-=window.pageYOffset||document.documentElement.scrollTop||0,D.left-=window.pageXOffset||document.documentElement.scrollLeft||0):(D.top-=y.top,D.left-=y.left),c.wrapper.data(f)||p.data(f,S({},A));var z=S({},D),E=S({},A);"fit"===_[0]&&(E.top+=c._fit(z.top,p.outerHeight(),h/k)),"fit"===_[1]&&(E.left+=c._fit(z.left,p.outerWidth(),l/k));var M=S({},E);return"flip"===_[0]&&(E.top+=c._flip(z.top,d.outerHeight(),b.outerHeight(),h/k,w[0],x[0],p.outerHeight())),"flip"===_[1]&&(E.left+=c._flip(z.left,d.outerWidth(),b.outerWidth(),l/k,w[1],x[1],p.outerWidth())),d.css(g,u),p.css(E),E.left!=M.left||E.top!=M.top},_align:function(e,i){var n,r=this.wrapper,o=t(this.options.anchor),a=e[0],l=e[1],u=i[0],p=i[1],f=s(o),g=t(this.options.appendTo),m=r.outerWidth(),v=r.outerHeight(),y=o.outerWidth(),b=o.outerHeight(),w=f.top,x=f.left,_=Math.round;return g[0]!=document.body&&(w-=(n=s(g)).top,x-=n.left),a===d&&(w+=b),a===h&&(w+=_(b/2)),u===d&&(w-=v),u===h&&(w-=_(v/2)),l===c&&(x+=y),l===h&&(x+=_(y/2)),p===c&&(x-=m),p===h&&(x-=_(m/2)),{top:w,left:x}}});n.plugin(D)}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=i.ui.Widget,r=i.ui.Popup,o=i.isFunction,s=t.isPlainObject,a=t.extend,l=t.proxy,h=t(document),c=i.isLocalUrl,d="_tt_active",u="aria-describedby",p="contentLoad",f="requestStart",g="k-content-frame",m=i.template("<iframe frameborder='0' class='"+g+"' src='#= content.url #'>This page requires frames in order to show content</iframe>"),v=".kendoTooltip",y={bottom:{origin:"bottom center",position:"top center"},top:{origin:"top center",position:"bottom center"},left:{origin:"center left",position:"center right",collision:"fit flip"},right:{origin:"center right",position:"center left",collision:"fit flip"},center:{position:"center center",origin:"center center"}},b={top:"bottom",bottom:"top",left:"right",right:"left",center:"center"},w={bottom:"n",top:"s",left:"e",right:"w",center:"n"},x={horizontal:{offset:"top",size:"outerHeight"},vertical:{offset:"left",size:"outerWidth"}};function _(t){for(;t.length;)k(t),t=t.parent()}function k(t){var e=t.data(i.ns+"title");e&&(t.attr("title",e),t.removeData(i.ns+"title"))}function C(t){for(;t.length&&!t.is("body");)void 0,(n=(e=t).attr("title"))&&(e.data(i.ns+"title",n),e.attr("title","")),t=t.parent();var e,n}var S=n.extend({init:function(t,e){var i,r=this;n.fn.init.call(r,t,e),i=r.options.position.match(/left|right/)?"horizontal":"vertical",r.dimensions=x[i],r._documentKeyDownHandler=l(r._documentKeyDown,r),r.element.on(r.options.showOn+v,r.options.filter,l(r._showOn,r)).on("mouseenter"+v,r.options.filter,l(r._mouseenter,r)),this.options.autoHide&&r.element.on("mouseleave"+v,r.options.filter,l(r._mouseleave,r))},options:{name:"Tooltip",filter:"",content:function(t){return t.target.data(i.ns+"title")},showAfter:100,callout:!0,position:"bottom",showOn:"mouseenter",autoHide:!0,width:null,height:null,animation:{open:{effects:"fade:in",duration:0},close:{effects:"fade:out",duration:40,hide:!0}}},events:["show","hide",p,"error",f],_mouseenter:function(e){C(t(e.currentTarget))},_showOn:function(e){var i=this,n=t(e.currentTarget);i.options.showOn&&i.options.showOn.match(/click|focus/)?i._show(n):(clearTimeout(i.timeout),i.timeout=setTimeout(function(){i._show(n)},i.options.showAfter))},_appendContent:function(t){var e,n=this,r=n.options.content,a=n.content,l=n.options.iframe;s(r)&&r.url?("iframe"in n.options||(l=!c(r.url)),n.trigger(f,{options:r,target:t}),l?(a.hide(),(e=a.find("."+g)[0])?e.src=r.url||e.src:a.html(m({content:r})),a.find("."+g).off("load"+v).on("load"+v,function(){n.trigger(p),a.show()})):(a.empty(),i.ui.progress(a,!0),n._ajaxRequest(r))):r&&o(r)?(r=r({sender:this,target:t}),n.content.html(r||"")):n.content.html(r)},_ajaxRequest:function(t){var e=this;jQuery.ajax(a({type:"GET",dataType:"html",cache:!1,error:function(t,n){i.ui.progress(e.content,!1),e.trigger("error",{status:n,xhr:t})},success:l(function(t){i.ui.progress(e.content,!1),e.content.html(t),e.trigger(p)},e)},t))},_documentKeyDown:function(t){t.keyCode===i.keys.ESC&&this.hide()},refresh:function(){var t=this.popup;t&&t.options.anchor&&this._appendContent(t.options.anchor)},hide:function(){this.popup&&this.popup.close()},show:function(t){C(t=t||this.element),this._show(t)},_show:function(t){var e=this,i=e.target();e.popup||e._initPopup(),i&&i[0]!=t[0]&&(e.popup.close(),e.popup.element.kendoStop(!0,!0)),i&&i[0]==t[0]||(e._appendContent(t),e.popup.options.anchor=t),e.popup.one("deactivate",function(){_(t),t.removeAttr(u),this.element.removeAttr("id").attr("aria-hidden",!0),h.off("keydown"+v,e._documentKeyDownHandler)}),e.popup.open()},_initPopup:function(){var e=this,n=e.options,o=t(i.template('<div role="tooltip" class="k-widget k-tooltip#if (!autoHide) {# k-tooltip-closable#}#">#if (!autoHide) {# <div class="k-tooltip-button"><a href="\\#" class="k-icon k-i-close">close</a></div> #}#<div class="k-tooltip-content"></div>#if (callout){ #<div class="k-callout k-callout-#=dir#"></div>#}#</div>')({callout:n.callout&&"center"!==n.position,dir:w[n.position],autoHide:n.autoHide}));e.popup=new r(o,a({activate:function(){var t=this.options.anchor,i=t[0].id||e.element[0].id;i&&(t.attr(u,i+d),this.element.attr("id",i+d)),n.callout&&e._positionCallout(),this.element.removeAttr("aria-hidden"),h.on("keydown"+v,e._documentKeyDownHandler),e.trigger("show")},close:function(){e.trigger("hide")},copyAnchorStyles:!1,animation:n.animation},y[n.position])),o.css({width:n.width,height:n.height}),e.content=o.find(".k-tooltip-content"),e.arrow=o.find(".k-callout"),n.autoHide?o.on("mouseleave"+v,l(e._mouseleave,e)):o.on("click"+v,".k-tooltip-button",l(e._closeButtonClick,e))},_closeButtonClick:function(t){t.preventDefault(),this.hide()},_mouseleave:function(e){if(this.popup){var i=t(e.currentTarget),n=i.offset(),r=e.pageX,o=e.pageY;if(n.right=n.left+i.outerWidth(),n.bottom=n.top+i.outerHeight(),r>n.left&&r<n.right&&o>n.top&&o<n.bottom)return;this.popup.close()}else _(t(e.currentTarget));clearTimeout(this.timeout)},_positionCallout:function(){var e=this.options.position,i=this.dimensions,n=i.offset,r=this.popup,o=r.options.anchor,s=t(o).offset(),a=parseInt(this.arrow.css("border-top-width"),10),l=t(r.element).offset(),h=w[r.flipped?b[e]:e],c=s[n]-l[n]+t(o)[i.size]()/2-a;this.arrow.removeClass("k-callout-n k-callout-s k-callout-w k-callout-e").addClass("k-callout-"+h).css(n,c)},target:function(){return this.popup?this.popup.options.anchor:null},destroy:function(){var t=this.popup;t&&(t.element.off(v),t.destroy()),this.element.off(v),h.off("keydown"+v,this._documentKeyDownHandler),n.fn.destroy.call(this)}});i.ui.plugin(S)}(window.kendo.jQuery),function(t,e){var i=document,n=window.kendo,r=n.dataviz={},o=n.Class,s=n.template,a=t.map,l=t.noop,h=t.inArray,c=Math,d=n.deepExtend,u="axisLabelClick",p="#000",f="bottom",g="center",m=3,v="circle",y="12px sans-serif",b=6,w=c.PI/180,x=/\{\d+:?/,_="left",k="linear",C=Number.MAX_VALUE,S=-Number.MAX_VALUE,T="outside",P="radial",A="right",D="swing",z="top",E="undefined",M=/([A-Z])/g,L="#fff",I="x",B="y";function R(t,e){var i={top:0,right:0,bottom:0,left:0};return e=e||0,"number"==typeof t?i[z]=i[A]=i[f]=i[_]=t:(i[z]=t[z]||e,i[A]=t[A]||e,i[f]=t[f]||e,i[_]=t[_]||e),i}var O=o.extend({init:function(t,e,i,n,r,o){this.a=t||0,this.b=e||0,this.c=i||0,this.d=n||0,this.e=r||0,this.f=o||0},times:function(t){return new O(this.a*t.a+this.c*t.b,this.b*t.a+this.d*t.b,this.a*t.c+this.c*t.d,this.b*t.c+this.d*t.d,this.a*t.e+this.c*t.f+this.e,this.b*t.e+this.d*t.f+this.f)}});d(O,{translate:function(t,e){var i=new O;return i.a=1,i.b=0,i.c=0,i.d=1,i.e=t,i.f=e,i},unit:function(){return new O(1,0,0,1,0,0)},rotate:function(t,e,i){var n=new O;return n.a=c.cos(t*w),n.b=c.sin(t*w),n.c=-n.b,n.d=n.a,n.e=e-e*n.a+i*n.b||0,n.f=i-i*n.a-e*n.b||0,n},scale:function(t,e){var i=new O;return i.a=t,i.b=0,i.c=0,i.d=e,i.e=0,i.f=0,i}}),n.dataviz.Matrix=O;var N=function(t,e){if(!(this instanceof N))return new N(t,e);this.x=t||0,this.y=e||0};N.fn=N.prototype={clone:function(){return new N(this.x,this.y)},equals:function(t){return t&&t.x===this.x&&t.y===this.y},rotate:function(t,e){var i=e*w,n=c.cos(i),r=c.sin(i),o=t.x,s=t.y,a=this.x,l=this.y;return this.x=Lt(o+(a-o)*n+(l-s)*r,m),this.y=Lt(s+(l-s)*n-(a-o)*r,m),this},multiply:function(t){return this.x*=t,this.y*=t,this},distanceTo:function(t){var e=this.x-t.x,i=this.y-t.y;return c.sqrt(e*e+i*i)},transform:function(t){return this.x=t.a*this.x+t.c*this.y+t.e,this.y=t.b*this.x+t.d*this.y+t.f,this}},N.onCircle=function(t,e,i){return e*=w,new N(t.x-i*c.cos(e),t.y-i*c.sin(e))};var V=function(t,e,i,n){if(!(this instanceof V))return new V(t,e,i,n);this.x1=t||0,this.x2=i||0,this.y1=e||0,this.y2=n||0};V.fn=V.prototype={width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1},translate:function(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},move:function(t,e){var i=this.height(),n=this.width();return Ot(t)&&(this.x1=t,this.x2=this.x1+n),Ot(e)&&(this.y1=e,this.y2=this.y1+i),this},wrap:function(t){return this.x1=c.min(this.x1,t.x1),this.y1=c.min(this.y1,t.y1),this.x2=c.max(this.x2,t.x2),this.y2=c.max(this.y2,t.y2),this},wrapPoint:function(t){return this.wrap(new V(t.x,t.y,t.x,t.y)),this},snapTo:function(t,e){return e!=I&&e||(this.x1=t.x1,this.x2=t.x2),e!=B&&e||(this.y1=t.y1,this.y2=t.y2),this},alignTo:function(t,e){var i=this,n=i.height(),r=i.width(),o=e==z||e==f?B:I,s=o==B?n:r;if(e===g){var a=t.center(),l=i.center();i.x1+=a.x-l.x,i.y1+=a.y-l.y}else i[o+1]=e===z||e===_?t[o+1]-s:t[o+2];return i.x2=i.x1+r,i.y2=i.y1+n,i},shrink:function(t,e){return this.x2-=t,this.y2-=e,this},expand:function(t,e){return this.shrink(-t,-e),this},pad:function(t){var e=R(t);return this.x1-=e.left,this.x2+=e.right,this.y1-=e.top,this.y2+=e.bottom,this},unpad:function(t){var e=R(t);return e.left=-e.left,e.top=-e.top,e.right=-e.right,e.bottom=-e.bottom,this.pad(e)},clone:function(){return new V(this.x1,this.y1,this.x2,this.y2)},center:function(){return new N(this.x1+this.width()/2,this.y1+this.height()/2)},containsPoint:function(t){return t.x>=this.x1&&t.x<=this.x2&&t.y>=this.y1&&t.y<=this.y2},points:function(){return[new N(this.x1,this.y1),new N(this.x2,this.y1),new N(this.x2,this.y2),new N(this.x1,this.y2)]},getHash:function(){return[this.x1,this.y1,this.x2,this.y2].join(",")},overlaps:function(t){return!(t.y2<this.y1||this.y2<t.y1||t.x2<this.x1||this.x2<t.x1)}};var F=o.extend({init:function(t,e,i,n,r){this.c=t,this.ir=e,this.r=i,this.startAngle=n,this.angle=r},clone:function(){return new F(this.c,this.ir,this.r,this.startAngle,this.angle)},middle:function(){return this.startAngle+this.angle/2},radius:function(t,e){return e?this.ir=t:this.r=t,this},point:function(t,e){var i=t*w,n=c.cos(i),r=c.sin(i),o=e?this.ir:this.r,s=Lt(this.c.x-n*o,m),a=Lt(this.c.y-r*o,m);return new N(s,a)},adjacentBox:function(t,e,i){var n=this.clone().expand(t),r=n.middle(),o=n.point(r),s=e/2,a=i/2,l=o.x-s,h=o.y-a,d=c.sin(r*w),u=c.cos(r*w);return c.abs(d)<.9&&(l+=s*-u/c.abs(u)),c.abs(u)<.9&&(h+=a*-d/c.abs(d)),new V(l,h,l+e,h+i)},containsPoint:function(t){var e=this.c,i=this.ir,n=this.r,r=this.startAngle,o=this.startAngle+this.angle,s=t.x-e.x,a=t.y-e.y,l=new N(s,a),h=this.point(r),c=new N(h.x-e.x,h.y-e.y),d=this.point(o),u=new N(d.x-e.x,d.y-e.y),p=Lt(s*s+a*a,m);return(c.equals(l)||$t(c,l))&&!$t(u,l)&&p>=i*i&&p<=n*n},getBBox:function(){var t,e,i,n=new V(C,C,S,S),r=Lt(this.startAngle%360),o=Lt((r+this.angle)%360),s=this.ir,a=[0,90,180,270,r,o].sort(Vt),l=h(r,a),c=h(o,a);for(t=r==o?a:l<c?a.slice(l,c+1):[].concat(a.slice(0,c+1),a.slice(l,a.length)),e=0;e<t.length;e++)i=this.point(t[e]),n.wrapPoint(i),n.wrapPoint(i,s);return s||n.wrapPoint(this.c),n},expand:function(t){return this.r+=t,this}}),H=F.extend({init:function(t,e,i,n){F.fn.init.call(this,t,0,e,i,n)},expand:function(t){return F.fn.expand.call(this,t)},clone:function(){return new H(this.c,this.r,this.startAngle,this.angle)},radius:function(t){return F.fn.radius.call(this,t)},point:function(t){return F.fn.point.call(this,t)}}),U=o.extend({init:function(t){d(this,{height:40,rotation:90,radius:10,arcAngle:10},t)}}),$=o.extend({init:function(t){this.children=[],this.options=d({},this.options,t),this.id=this.options.id},reflow:function(t){var e,i,n,r=this.children;for(i=0;i<r.length;i++)(n=r[i]).reflow(t),e=e?e.wrap(n.box):n.box.clone();this.box=e||t},getViewElements:function(t){var e,i,n,r=this.modelId,o=[],s=this.children,a=s.length;for(i=0;i<a;i++)(n=s[i]).discoverable||(n.options=n.options||{},n.modelId=r),o.push.apply(o,n.getViewElements(t));return this.discoverable&&(e=this.getRoot())&&(e.modelMap[r]=this),o},enableDiscovery:function(){this.modelId=mt.current.alloc(),this.discoverable=!0},destroy:function(){var t,e=this.children,i=this.getRoot(),n=this.modelId,r=this.id,o=mt.current;for(r&&o.free(r),n&&(o.free(n),i&&i.modelMap[n]&&(i.modelMap[n]=void 0)),t=0;t<e.length;t++)e[t].destroy()},getRoot:function(){var t=this.parent;return t?t.getRoot():null},translateChildren:function(t,e){var i,n=this.children,r=n.length;for(i=0;i<r;i++)n[i].box.translate(t,e)},append:function(){var t,e=arguments.length;for(zt(this.children,arguments),t=0;t<e;t++)arguments[t].parent=this}}),j=$.extend({init:function(t){this.modelMap={},$.fn.init.call(this,t)},options:{width:600,height:400,background:L,border:{color:p,width:0},margin:R(5),zIndex:-2},reflow:function(){var t=this.options,e=this.children,i=new V(0,0,t.width,t.height);this.box=i.unpad(t.margin);for(var n=0;n<e.length;n++)e[n].reflow(i),i=Tt(i,e[n].box)},getViewElements:function(t){var e=this.options,i=e.border||{},n=this.box.clone().pad(e.margin).unpad(i.width);return[t.createRect(n,{stroke:i.width?i.color:"",strokeWidth:i.width,dashType:i.dashType,fill:e.background,fillOpacity:e.opacity,zIndex:e.zIndex})].concat($.fn.getViewElements.call(this,t))},getRoot:function(){return this}}),G=$.extend({options:{align:_,vAlign:z,margin:{},padding:{},border:{color:p,width:0},background:"",shrinkToFit:!1,width:0,height:0,visible:!0},reflow:function(t){var e,i,n,r,o=this,s=o.options,a=R(s.margin),l=R(s.padding),h=s.border.width,c=o.children;function d(){o.align(t,I,s.align),o.align(t,B,s.vAlign),o.paddingBox=e.clone().unpad(a).unpad(h)}for($.fn.reflow.call(o,t),e=s.width&&s.height?o.box=new V(0,0,s.width,s.height):o.box,s.shrinkToFit?(d(),i=o.contentBox=o.paddingBox.clone().unpad(l)):(i=o.contentBox=e.clone(),e.pad(l).pad(h).pad(a),d()),o.translateChildren(e.x1-i.x1+a.left+h+l.left,e.y1-i.y1+a.top+h+l.top),n=0;n<c.length;n++)(r=c[n]).reflow(r.box)},align:function(t,e,i){var n=this.box,r=e+1,o=e+2,s=e===I?"width":"height",a=n[s]();At(i,[_,z])?(n[r]=t[r],n[o]=n[r]+a):At(i,[A,f])?(n[o]=t[o],n[r]=n[o]-a):i==g&&(n[r]=t[r]+(t[s]()-a)/2,n[o]=n[r]+a)},hasBox:function(){var t=this.options;return t.border.width||t.background},getViewElements:function(t,e){var i=[];return this.options.visible?(this.hasBox()&&i.push(t.createRect(this.paddingBox,d(this.elementStyle(),e))),i.concat($.fn.getViewElements.call(this,t))):[]},elementStyle:function(){var t=this.options,e=t.border||{};return{id:this.id,stroke:e.width?e.color:"",strokeWidth:e.width,dashType:e.dashType,strokeOpacity:Nt(e.opacity,t.opacity),fill:t.background,fillOpacity:t.opacity,animation:t.animation,zIndex:t.zIndex,data:{modelId:this.modelId}}}}),W=$.extend({init:function(t,e){$.fn.init.call(this,e),this.content=t,this.reflow(V())},options:{font:y,color:p,align:_,vAlign:""},reflow:function(t){var e,i,n=this,r=n.options;e=r.size=xt(n.content,{font:r.font},r.rotation),n.baseline=e.baseline,r.align==_?n.box=new V(t.x1,t.y1,t.x1+e.width,t.y1+e.height):r.align==A?n.box=new V(t.x2-e.width,t.y1,t.x2,t.y1+e.height):r.align==g&&(i=(t.width()-e.width)/2,n.box=new V(Lt(t.x1+i,m),t.y1,Lt(t.x2-i,m),t.y1+e.height)),r.vAlign==g?(i=(t.height()-e.height)/2,n.box=new V(n.box.x1,t.y1+i,n.box.x2,t.y2-i)):r.vAlign==f?n.box=new V(n.box.x1,t.y2-e.height,n.box.x2,t.y2):r.vAlign==z&&(n.box=new V(n.box.x1,t.y1,n.box.x2,t.y1+e.height))},getViewElements:function(t){var e=this.options;return $.fn.getViewElements.call(this,t),[t.createText(this.content,d({},e,{id:this.id,x:this.box.x1,y:this.box.y1,baseline:this.baseline,data:{modelId:this.modelId}}))]}}),q=G.extend({init:function(t,e){var i;G.fn.init.call(this,e),e=this.options,i=new W(t,d({},e,{align:_,vAlign:z})),this.append(i),this.content=t,this.hasBox()&&(i.id=Ct()),this.reflow(new V)}}),Y=$.extend({init:function(t){$.fn.init.call(this,t),t=this.options,this.append(new q(t.text,d({},t,{vAlign:t.position})))},options:{color:p,position:z,align:g,margin:R(5),padding:R(5)},reflow:function(t){$.fn.reflow.call(this,t),this.box.snapTo(t,I)}});Y.buildTitle=function(t,e,i){var n;return"string"==typeof t&&(t={text:t}),(t=d({visible:!0},i,t))&&t.visible&&t.text&&(n=new Y(t),e.append(n)),n};var Q=q.extend({init:function(t,e,i,n,r){this.text=e,this.value=t,this.index=i,this.dataItem=n,q.fn.init.call(this,e,d({id:Ct()},r)),this.enableDiscovery()},click:function(e,i){e.trigger(u,{element:t(i.target),value:this.value,text:this.text,index:this.index,dataItem:this.dataItem,axis:this.parent.options})}});function X(t,e,i){var n,r,o=e.tickX,s=e.tickY,a=e.position;return e.vertical?(n=N(o,a),r=N(o+i.size,a)):(n=N(a,s),r=N(a,s+i.size)),t.createLine(n.x,n.y,r.x,r.y,{strokeWidth:i.width,stroke:i.color,align:e._alignLines})}function Z(t,e,i){var n,r,o=e.lineStart,s=e.lineEnd,a=e.position;return e.vertical?(n=N(o,a),r=N(s,a)):(n=N(a,o),r=N(a,s)),t.createLine(n.x,n.y,r.x,r.y,{data:{modelId:e.modelId},strokeWidth:i.width,stroke:i.color,dashType:i.dashType,zIndex:-1})}var K=$.extend({init:function(t){var e=this;$.fn.init.call(e,t),e.options.visible||(e.options=d({},e.options,{labels:{visible:!1},line:{visible:!1},margin:0,majorTickSize:0,minorTickSize:0})),e.options.minorTicks=d({},{color:e.options.line.color,width:e.options.line.width,visible:"none"!=e.options.minorTickType},e.options.minorTicks,{size:e.options.minorTickSize,align:e.options.minorTickType}),e.options.majorTicks=d({},{color:e.options.line.color,width:e.options.line.width,visible:"none"!=e.options.majorTickType},e.options.majorTicks,{size:e.options.majorTickSize,align:e.options.majorTickType}),e.createLabels(),e.createTitle(),e.createNotes()},options:{labels:{visible:!0,rotation:0,mirror:!1,step:1,skip:0},line:{width:1,color:p,visible:!0},title:{visible:!0,position:g},majorTicks:{align:T,size:4,skip:0,step:1},minorTicks:{align:T,size:3,skip:0,step:1},axisCrossingValue:0,majorTickType:T,minorTickType:"none",majorGridLines:{skip:0,step:1},minorGridLines:{visible:!1,width:1,color:p,skip:0,step:1},margin:5,visible:!0,reverse:!1,justified:!0,notes:{label:{text:""}},_alignLines:!0},createLabels:function(){var t=this.options,e=t.vertical?A:g,i=d({},t.labels,{align:e,zIndex:t.zIndex,modelId:this.modelId}),n=i.step;if(this.labels=[],i.visible){var r,o,s=this.labelsCount();for(o=i.skip;o<s;o+=n)(r=this.createAxisLabel(o,i))&&(this.append(r),this.labels.push(r))}},destroy:function(){var t,e=this.labels;for(t=0;t<e.length;t++)e[t].destroy();$.fn.destroy.call(this)},lineBox:function(){var t=this.options,e=this.box,i=t.vertical,n=this.labels,r=i?"height":"width",o=t.justified,s=t.labels.mirror,a=s?e.x1:e.x2,l=s?e.y2:e.y1,h=0,c=t.line.width;return o&&n.length>1&&(h=n[0].box[r]()/2,c=Dt(n).box[r]()/2),i?V(a,e.y1+h,a,e.y2-c):V(e.x1+h,l,e.x2-c,l)},createTitle:function(){var t,e=this.options,i=d({rotation:e.vertical?-90:0,text:"",zIndex:1},e.title);i.visible&&i.text&&(t=new q(i.text,i),this.append(t),this.title=t)},createNotes:function(){var t,e,i,n=this.options,r=n.notes,o=r.data||[];for(this.notes=[],t=0;t<o.length;t++)(e=d({},r,o[t])).value=this.parseNoteValue(e.value),(i=new J(e.value,e.label.text,null,null,null,e)).options.visible&&(Ot(i.options.position)?n.vertical&&!At(i.options.position,[_,A])?i.options.position=n.reverse?_:A:n.vertical||At(i.options.position,[z,f])||(i.options.position=n.reverse?f:z):n.vertical?i.options.position=n.reverse?_:A:i.options.position=n.reverse?f:z,this.append(i),this.notes.push(i))},parseNoteValue:function(t){return t},renderTicks:function(t){var e=[],i=this.options,n=this.lineBox(),r=i.labels.mirror,o=i.majorTicks.visible?i.majorUnit:0,s={_alignLines:i._alignLines,vertical:i.vertical};function a(i,o){var a,l=i.length;if(o.visible)for(a=o.skip;a<l;a+=o.step)a%o.skipUnit!=0&&(s.tickX=r?n.x2:n.x2-o.size,s.tickY=r?n.y1-o.size:n.y1,s.position=i[a],e.push(X(t,s,o)))}return a(this.getMajorTickPositions(),i.majorTicks),a(this.getMinorTickPositions(),d({},{skipUnit:o/i.minorUnit},i.minorTicks)),e},renderLine:function(t){var e,i=this.options,n=i.line,r=this.lineBox(),o=[];return n.width>0&&n.visible&&(e={strokeWidth:n.width,stroke:n.color,dashType:n.dashType,zIndex:n.zIndex,align:i._alignLines},o.push(t.createLine(r.x1,r.y1,r.x2,r.y2,e)),zt(o,this.renderTicks(t))),o},getViewElements:function(t){var e=$.fn.getViewElements.call(this,t);return zt(e,this.renderLine(t)),zt(e,this.renderPlotBands(t)),zt(e,this.renderBackground(t)),e},getActualTickSize:function(){var t=this.options,e=0;return t.majorTicks.visible&&t.minorTicks.visible?e=c.max(t.majorTicks.size,t.minorTicks.size):t.majorTicks.visible?e=t.majorTicks.size:t.minorTicks.visible&&(e=t.minorTicks.size),e},renderBackground:function(t){var e=this.options.background,i=this.box,n=[];return e&&n.push(t.createRect(i,{fill:e,zIndex:-1})),n},renderPlotBands:function(t){var e,i,n=this,r=n.options,o=r.plotBands||[],s=r.vertical,l=[],h=n.plotArea;return o.length&&(l=a(o,function(r){return Nt(r.from,S),Nt(r.to,C),s?(e=h.axisX.lineBox(),i=n.getSlot(r.from,r.to,!0)):(e=n.getSlot(r.from,r.to,!0),i=h.axisY.lineBox()),t.createRect(V(e.x1,i.y1,e.x2,i.y2),{fill:r.color,fillOpacity:r.opacity,zIndex:-1})})),l},renderGridLines:function(t,e){var i,n=[],r=this.options,o=e.options.line.visible,s=r.majorGridLines.visible?r.majorUnit:0,a=r.vertical,l=e.lineBox(),h=l[a?"y1":"x1"],c={lineStart:l[a?"x1":"y1"],lineEnd:l[a?"x2":"y2"],vertical:a,modelId:this.plotArea.modelId},u=[];function p(e,r){var s,a=e.length;if(r.visible)for(s=r.skip;s<a;s+=r.step)At(i=Lt(e[s]),u)||s%r.skipUnit==0||o&&h===i||(c.position=i,n.push(Z(t,c,r)),u.push(i))}return p(this.getMajorTickPositions(),r.majorGridLines),p(this.getMinorTickPositions(),d({},{skipUnit:s/r.minorUnit},r.minorGridLines)),n},reflow:function(t){var e,i,n=this.options,r=n.vertical,o=this.labels,s=o.length,a=this.getActualTickSize()+n.margin,l=0,h=0,d=this.title;for(i=0;i<s;i++)e=o[i],l=c.max(l,e.box.height()),h=c.max(h,e.box.width());d&&(r?h+=d.box.width():l+=d.box.height()),this.box=r?V(t.x1,t.y1,t.x1+h+a,t.y2):V(t.x1,t.y1,t.x2,t.y1+l+a),this.arrangeTitle(),this.arrangeLabels(),this.arrangeNotes()},arrangeLabels:function(){var t,e,i,n=this.options,r=this.labels,o=!n.justified,s=n.vertical,a=this.lineBox(),l=n.labels.mirror,h=this.getMajorTickPositions(),c=this.getActualTickSize()+n.margin;for(i=0;i<r.length;i++){var d,u,p,f=r[i],g=f.index,m=s?f.box.height():f.box.width(),v=h[g]-m/2;s?(o&&(v=(d=h[g])+((u=h[g+1])-d)/2-m/2),p=a.x2,l?p+=c:p-=c+f.box.width(),t=f.box.move(p,v)):(o?(d=h[g],u=h[g+1]):(d=v,u=v+m),e=a.y1,l?e-=c+f.box.height():e+=c,t=V(d,e,u,e+f.box.height())),f.reflow(t)}},arrangeTitle:function(){var t=this.options,e=t.labels.mirror,i=t.vertical,n=this.title;n&&(i?(n.options.align=e?A:_,n.options.vAlign=n.options.position):(n.options.align=n.options.position,n.options.vAlign=e?z:f),n.reflow(this.box))},arrangeNotes:function(){var t,e,i,n;for(t=0;t<this.notes.length;t++)Ot(n=(e=this.notes[t]).options.value)?(this.shouldRenderNote(n)?e.show():e.hide(),i=this.getSlot(n)):e.hide(),e.reflow(i||this.lineBox())},alignTo:function(t){var e=this,i=t.lineBox(),n=e.options.vertical,r=n?B:I;e.box.snapTo(i,r),n?e.box.shrink(0,e.lineBox().height()-i.height()):e.box.shrink(e.lineBox().width()-i.width(),0),e.box[r+1]-=e.lineBox()[r+1]-i[r+1],e.box[r+2]-=e.lineBox()[r+2]-i[r+2]},axisLabelText:function(t,e,i){var r=t;i.template?r=s(i.template)({value:t,dataItem:e}):i.format&&(r=i.format.match(x)?n.format(i.format,t):n.toString(t,i.format,i.culture));return r}}),J=G.extend({init:function(t,e,i,n,r,o){G.fn.init.call(this,o),this.enableDiscovery(),this.value=t,this.text=e,this.dataItem=i,this.category=n,this.series=r,this.render()},options:{icon:{zIndex:1,visible:!0,type:v},label:{zIndex:2,position:"inside",visible:!0,align:g,vAlign:g},line:{visible:!0,zIndex:2},visible:!0,position:z},hide:function(){this.options.visible=!1},show:function(){this.options.visible=!0},render:function(){var t,e,i,n=this,r=n.options,o=r.label,a=n.text,l=r.icon,h=l.size,u={data:{modelId:n.modelId}},p=V();r.visible&&(Ot(o)&&o.visible&&(o.template?a=s(o.template)({dataItem:n.dataItem,category:n.category,value:n.value,text:a,series:n.series}):o.format&&(a=Ht(o.format,a)),n.label=new q(a,d({},o,u)),n.append(n.label),"inside"===o.position&&(l.type===v?h=c.max(n.label.box.width(),n.label.box.height()):(e=n.label.box.width(),i=n.label.box.height()),p.wrap(n.label.box))),l.width=e||h,l.height=i||h,t=new tt(d({},l,u)),n.marker=t,n.append(t),t.reflow(V()),n.wrapperBox=p.wrap(t.box))},reflow:function(t){var e,i,n,r=this,o=r.options,s=t.center(),a=r.wrapperBox,l=o.line.length,h=o.position,d=r.label,u=r.marker;o.visible&&(At(h,[_,A])?h===_?(n=a.alignTo(t,h).translate(-l,t.center().y-a.center().y),o.line.visible&&(e=N(c.floor(t.x1),s.y),r.linePoints=[e,N(c.floor(n.x2),s.y)],i=n.clone().wrapPoint(e))):(n=a.alignTo(t,h).translate(l,t.center().y-a.center().y),o.line.visible&&(e=N(c.floor(t.x2),s.y),r.linePoints=[e,N(c.floor(n.x1),s.y)],i=n.clone().wrapPoint(e))):h===f?(n=a.alignTo(t,h).translate(t.center().x-a.center().x,l),o.line.visible&&(e=N(c.floor(s.x),c.floor(t.y2)),r.linePoints=[e,N(c.floor(s.x),c.floor(n.y1))],i=n.clone().wrapPoint(e))):(n=a.alignTo(t,h).translate(t.center().x-a.center().x,-l),o.line.visible&&(e=N(c.floor(s.x),c.floor(t.y1)),r.linePoints=[e,N(c.floor(s.x),c.floor(n.y2))],i=n.clone().wrapPoint(e))),u&&u.reflow(n),d&&(d.reflow(n),u&&(o.label.position===T&&d.box.alignTo(u.box,h),d.reflow(d.box))),r.contentBox=n,r.box=i||n)},getViewElements:function(t){var e=G.fn.getViewElements.call(this,t),i=t.createGroup({data:{modelId:this.modelId},zIndex:1});return this.options.visible&&zt(e,this.createLine(t)),i.children=e,[i]},createLine:function(t){var e=this.options.line;return[t.createPolyline(this.linePoints,!1,{stroke:e.color,strokeWidth:e.width,dashType:e.dashType,zIndex:e.zIndex})]},click:function(t,e){var i=this.eventArgs(e);t.trigger("noteClick",i)||e.preventDefault()},hover:function(t,e){var i=this.eventArgs(e);t.trigger("noteHover",i)||e.preventDefault()},leave:function(t){t._unsetActivePoint()},eventArgs:function(e){var i=this.options;return{element:t(e.target),text:Ot(i.label)?i.label.text:"",dataItem:this.dataItem,series:this.series,value:this.value,category:this.category}}}),tt=G.extend({options:{type:v,align:g,vAlign:g},getViewElements:function(t,e){var i,n,r,o,s=this.options,a=s.type,l=s.rotation,h=this.paddingBox,c=h.center(),u=h.width()/2;if($.fn.getViewElements.call(this,t),!(!0===(e||{}).visible||s.visible&&this.hasBox()))return[];if(n=d(this.elementStyle(),e),a===v?i=t.createCircle(N(Lt(h.x1+u,m),Lt(h.y1+h.height()/2,m)),u,n):"triangle"===a?r=[N(h.x1+u,h.y1),N(h.x1,h.y2),N(h.x2,h.y2)]:"cross"===a?((i=t.createGroup()).children.push(t.createPolyline([N(h.x1,h.y1),N(h.x2,h.y2)],!0,n)),i.children.push(t.createPolyline([N(h.x1,h.y2),N(h.x2,h.y1)],!0,n))):r=h.points(),r){if(l)for(o=0;o<r.length;o++)r[o].rotate(c,l);i=t.createPolyline(r,!0,n)}return[i]}}),et=G.extend({init:function(t){G.fn.init.call(this,t),this.createTextBox()},options:{arcAngle:300,border:{width:1,color:"red"},label:{zIndex:2,margin:R(2),border:{width:1,color:"green"}}},createTextBox:function(){var t=this.options,e=new q(t.code,t.label);this.append(e),this.textBox=e},reflow:function(t){var e=this.textBox;this.box=V(0,0,e.box.height(),1.5*e.box.height()),G.fn.reflow.call(this,t)},getViewElements:function(t){var e=this.options,i=this.box.center(),n=[t.createPin(new U({origin:new N(i.x,i.y),radius:this.textBox.box.height()/2,height:1.5*this.textBox.box.height(),rotation:0,arcAngle:e.arcAngle}),d({},{fill:"red",zIndex:1,kur:1,id:"111"},e))];return zt(n,G.fn.getViewElements.call(this,t)),n}}),it=K.extend({init:function(t,e,i){var n=this.initDefaults(t,e,i);K.fn.init.call(this,n)},startValue:function(){return 0},options:{type:"numeric",min:0,max:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:p},zIndex:1},initDefaults:function(t,e,i){var n,r=i.narrowRange,o=this.autoAxisMin(t,e,r),s=this.autoAxisMax(t,e,r),a=_t(o,s),l={majorUnit:a};return!1!==i.roundToMajorUnit&&(o<0&&Bt(o,a,1/3)&&(o-=a),s>0&&Bt(s,a,1/3)&&(s+=a)),l.min=Mt(o,a),l.max=Et(s,a),i&&((n=Ot(i.min)||Ot(i.max))&&i.min===i.max&&(i.min>0?i.min=0:i.max=1),i.majorUnit?(l.min=Mt(l.min,i.majorUnit),l.max=Et(l.max,i.majorUnit)):n&&(i=d(l,i),l.majorUnit=_t(i.min,i.max))),l.minorUnit=(i.majorUnit||l.majorUnit)/5,d(l,i)},range:function(){var t=this.options;return{min:t.min,max:t.max}},autoAxisMax:function(t,e,i){var n,r;if(!t&&!e)return 1;if(t<=0&&e<=0){if(e=t==e?0:e,r=c.abs((e-t)/e),!i&&r>.2)return 0;n=c.min(0,e-(t-e)/2)}else t=t==e?0:t,n=e;return n},autoAxisMin:function(t,e,i){var n;if(!t&&!e)return 0;if(t>=0&&e>=0){if(t=t==e?0:t,!i&&(e-t)/e>.2)return 0;n=c.max(0,t-(e-t)/2)}else e=t==e?0:e,n=t;return n},getDivisions:function(t){var e=this.options,i=e.max-e.min;return c.floor(Lt(i/t,m))+1},getTickPositions:function(t,e){var i,n=this.options,r=n.vertical,o=n.reverse,s=this.lineBox(),a=t*((r?s.height():s.width())/(n.max-n.min)),l=0,h=this.getDivisions(t),c=(r?-1:1)*(o?-1:1),d=s[(r?B:I)+(1===c?1:2)],u=[];for(e&&(l=e/t),i=0;i<h;i++)i%l!=0&&u.push(Lt(d,m)),d+=a*c;return u},getMajorTickPositions:function(){return this.getTickPositions(this.options.majorUnit)},getMinorTickPositions:function(){return this.getTickPositions(this.options.minorUnit)},getSlot:function(t,e,i){var n,r,o=this.options,s=o.reverse,a=o.vertical,l=a?B:I,h=this.lineBox(),d=h[l+(s?2:1)],u=(s?-1:1)*((a?h.height():h.width())/(o.max-o.min)),p=new V(h.x1,h.y1,h.x1,h.y1);return Ot(t)||(t=e||0),Ot(e)||(e=t||0),i&&(t=c.max(c.min(t,o.max),o.min),e=c.max(c.min(e,o.max),o.min)),a?(n=o.max-c.max(t,e),r=o.max-c.min(t,e)):(n=c.min(t,e)-o.min,r=c.max(t,e)-o.min),p[l+1]=c.max(c.min(d+u*(s?r:n),1e5),-1e5),p[l+2]=c.max(c.min(d+u*(s?n:r),1e5),-1e5),p},getValue:function(t){var e=this.options,i=e.reverse,n=e.vertical,r=1*e.max,o=1*e.min,s=n?B:I,a=this.lineBox(),l=a[s+(i?2:1)],h=n?a.height():a.width(),c=(i?-1:1)*(t[s]-l),d=c*((r-o)/h);return c<0||c>h?null:Lt(n?r-d:o+d,b)},translateRange:function(t){var e=this.options,i=this.lineBox(),n=e.vertical,r=e.reverse,o=Lt(t/((n?i.height():i.width())/(e.max-e.min)),b);return!n&&!r||n&&r||(o=-o),{min:e.min+o,max:e.max+o}},scaleRange:function(t){var e=this.options,i=-t*e.majorUnit;return{min:e.min-i,max:e.max+i}},labelsCount:function(){return this.getDivisions(this.options.majorUnit)},createAxisLabel:function(t,e){var i=this.options,n=Lt(i.min+t*i.majorUnit,b),r=this.axisLabelText(n,null,e);return new Q(n,r,t,null,e)},shouldRenderNote:function(t){var e=this.range();return e.min<=t&&t<=e.max}}),nt=K.extend({init:function(t,e,i){this.options=this._initOptions(t,e,i),K.fn.init.call(this,i)},startValue:function(){return this.options.min},options:{type:"log",majorUnit:10,minorUnit:1,axisCrossingValue:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:p},zIndex:1},getSlot:function(t,e,i){var n,r,o=this.options,s=o.reverse,a=o.vertical,l=a?B:I,h=this.lineBox(),d=h[l+(s?2:1)],u=a?h.height():h.width(),p=s?-1:1,f=o.majorUnit,g=this.logMin,m=this.logMax,v=p*(u/(m-g)),y=new V(h.x1,h.y1,h.x1,h.y1);if(Ot(t)||(t=e||1),Ot(e)||(e=t||1),!(t<=0||e<=0))return i&&(t=c.max(c.min(t,o.max),o.min),e=c.max(c.min(e,o.max),o.min)),t=It(t,f),e=It(e,f),a?(n=m-c.max(t,e),r=m-c.min(t,e)):(n=c.min(t,e)-g,r=c.max(t,e)-g),y[l+1]=d+v*(s?r:n),y[l+2]=d+v*(s?n:r),y},getValue:function(t){var e,i=this.options,n=i.reverse,r=i.vertical,o=this.lineBox(),s=i.majorUnit,a=this.logMin,l=this.logMax,h=r===n?1:-1,d=1===h?1:2,u=r?o.height():o.width(),p=(l-a)/u,f=r?B:I,g=o[f+d],m=h*(t[f]-g);return m<0||m>u?null:(e=a+m*p,Lt(c.pow(s,e),b))},range:function(){var t=this.options;return{min:t.min,max:t.max}},scaleRange:function(t){var e=this.options.majorUnit,i=-t;return{min:c.pow(e,this.logMin-i),max:c.pow(e,this.logMax+i)}},translateRange:function(t){var e=this.options,i=e.majorUnit,n=this.lineBox(),r=e.vertical,o=e.reverse,s=r?n.height():n.width(),a=(this.logMin,this.logMax,Lt(t/(s/(this.logMax-this.logMin)),b));return!r&&!o||r&&o||(a=-a),{min:c.pow(i,this.logMin+a),max:c.pow(i,this.logMax+a)}},labelsCount:function(){var t=c.floor(this.logMax);return c.floor(t-this.logMin)+1},getMajorTickPositions:function(){var t=[];return this.traverseMajorTicksPositions(function(e){t.push(e)},{step:1,skip:0}),t},renderTicks:function(t){var e=[],i=this.options,n=this.lineBox(),r=i.labels.mirror,o=i.majorTicks,s=i.minorTicks,a={_alignLines:i._alignLines,vertical:i.vertical};function l(i,o){a.tickX=r?n.x2:n.x2-o.size,a.tickY=r?n.y1-o.size:n.y1,a.position=i,e.push(X(t,a,o))}return o.visible&&this.traverseMajorTicksPositions(l,o),s.visible&&this.traverseMinorTicksPositions(l,s),e},renderGridLines:function(t,e){var i=[],n=this.options,r=(e.options.line.visible,n.majorGridLines),o=n.minorGridLines,s=n.vertical,a=e.lineBox(),l={lineStart:a[s?"x1":"y1"],lineEnd:a[s?"x2":"y2"],vertical:s,modelId:this.plotArea.modelId},h=[];function c(e,n){At(e,h)||(l.position=e,i.push(Z(t,l,n)),h.push(e))}return r.visible&&this.traverseMajorTicksPositions(c,r),o.visible&&this.traverseMinorTicksPositions(c,o),i},traverseMajorTicksPositions:function(t,e){var i,n=this._lineOptions(),r=n.lineStart,o=n.step,s=this.logMin,a=this.logMax;for(i=c.ceil(s)+e.skip;i<=a;i+=e.step)t(Lt(r+o*(i-s),b),e)},traverseMinorTicksPositions:function(t,e){var i,n,r,o=this.options,s=this._lineOptions(),a=s.lineStart,l=s.step,h=o.majorUnit,d=this.logMin,u=this.logMax,p=c.floor(d),f=o.max,g=o.min,m=o.minorUnit;for(i=p;i<u;i++){r=this._minorIntervalOptions(i);for(var v=e.skip;v<m&&!((n=r.value+v*r.minorStep)>f);v+=e.step)n>=g&&t(Lt(a+l*(It(n,h)-d),b),e)}},createAxisLabel:function(t,e){var i=this.options,n=c.floor(this.logMin+t),r=Math.pow(i.majorUnit,n),o=this.axisLabelText(r,null,e);return new Q(r,o,t,null,e)},shouldRenderNote:function(t){var e=this.range();return e.min<=t&&t<=e.max},_throwNegativeValuesError:function(){throw new Error("Non positive values cannot be used for a logarithmic axis")},_initOptions:function(t,e,i){var n,r=d({},this.options,{min:t,max:e},i),o=r.min,s=r.max,a=r.majorUnit;return r.axisCrossingValue<=0&&this._throwNegativeValuesError(),Ot(i.max)?i.max<=0&&this._throwNegativeValuesError():(n=Lt(It(s,a),b)%1,s=s<=0?a:0!==n&&(n<.3||n>.9)?c.pow(a,It(s,a)+.2):c.pow(a,c.ceil(It(s,a)))),Ot(i.min)?i.min<=0&&this._throwNegativeValuesError():o<=0?o=s<=1?c.pow(a,-2):1:i.narrowRange||(o=c.pow(a,c.floor(It(o,a)))),this.logMin=Lt(It(o,a),b),this.logMax=Lt(It(s,a),b),r.max=s,r.min=o,r.minorUnit=i.minorUnit||Lt(a-1,b),r},_minorIntervalOptions:function(t){var e=this.options.majorUnit,i=c.pow(e,t);return{value:i,minorStep:(c.pow(e,t+1)-i)/this.options.minorUnit}},_lineOptions:function(){var t=this.options,e=t.reverse,i=t.vertical,n=i?B:I,r=this.lineBox(),o=i===e?1:-1,s=1===o?1:2;return{step:o*((i?r.height():r.width())/(this.logMax-this.logMin)),lineStart:r[n+s],lineBox:r}}}),rt=o.extend({init:function(t){this.children=[],this.options=d({},this.options,t)},render:function(){return this.template(this)},renderContent:function(){var t,e="",i=this.sortChildren(),n=i.length;for(t=0;t<n;t++)e+=i[t].render();return e},sortChildren:function(){var t,e,i=this.children;for(e=0,t=i.length;e<t;e++)i[e]._childIndex=e;return i.slice(0).sort(this.compareChildren)},refresh:t.noop,destroy:function(){var t,e,i=this.options.id,n=this.children;for(i&&mt.current.free(i),e=0,t=n.length;e<t;e++)n[e].destroy()},compareChildren:function(t,e){var i=t.options.zIndex||0,n=e.options.zIndex||0;return i!==n?i-n:t._childIndex-e._childIndex},renderId:function(){var t="";return this.options.id&&(t=this.renderAttr("id",this.options.id)),t},renderAttr:function(t,e){return Ot(e)?" "+t+"='"+e+"' ":""},renderDataAttributes:function(){var t,e,i=this.options.data,n="";for(t in i)e="data-"+t.replace(M,"-$1").toLowerCase(),n+=this.renderAttr(e,i[t]);return n},renderCursor:function(){var t=this.options,e="";return Ot(t.cursor)&&t.cursor.style&&(e+="cursor: "+t.cursor.style+";"),e}}),ot=rt.extend({init:function(t){rt.fn.init.call(this,t),this.definitions={},this.decorators=[],this.animations=[]},destroy:function(){var t=this.animations,e=this._viewElement;for(rt.fn.destroy.call(this);t.length>0;)t.shift().destroy();e&&(this._freeIds(e),this._viewElement=null)},_freeIds:function(e){t("[id]",e).each(function(){mt.current.free(t(this).attr("id"))})},replace:function(t){var e=Ut(t.id);e&&e.parentNode.replaceChild(this.renderElement(t.getViewElements(this)[0]),e)},load:function(t){this.children=t.getViewElements(this)},renderDefinitions:function(){var t,e=this.definitions,i="";for(t in e)e.hasOwnProperty(t)&&(i+=e[t].render());return i},decorate:function(t){var e,i,n=this.decorators,r=n.length;for(e=0;e<r;e++)i=n[e],this._decorateChildren(i,t),t=i.decorate.call(i,t);return t},_decorateChildren:function(t,e){var i,n=e.children,r=n.length;for(i=0;i<r;i++)this._decorateChildren(t,n[i]),n[i]=t.decorate.call(t,n[i])},setupAnimations:function(){for(var t=0;t<this.animations.length;t++)this.animations[t].setup()},playAnimations:function(){for(var t=0;t<this.animations.length;t++)this.animations[t].play()},buildGradient:function(t){var e,i,n,o=this._gradientCache;return o||(o=this._gradientCache=[]),t&&(i=o[e=kt(t)],n=r.Gradients[t.gradient],!i&&n&&(i=d({id:Ct()},n,t),o[e]=i)),i},setDefaults:function(t){var e=this.options;return Ot((t=t||{}).inline)||(t.inline=e.inline),Ot(t.align)||(t.align=e.align),t}});r.Gradients={glass:{type:k,rotation:0,stops:[{offset:0,color:L,opacity:0},{offset:.25,color:L,opacity:.3},{offset:1,color:L,opacity:0}]},sharpBevel:{type:P,stops:[{offset:0,color:L,opacity:.55},{offset:.65,color:L,opacity:0},{offset:.95,color:L,opacity:.25}]},roundedBevel:{type:P,stops:[{offset:.33,color:L,opacity:.06},{offset:.83,color:L,opacity:.2},{offset:.95,color:L,opacity:0}]},roundedGlass:{type:P,supportVML:!1,stops:[{offset:0,color:L,opacity:0},{offset:.5,color:L,opacity:.3},{offset:.99,color:L,opacity:0}]},sharpGlass:{type:P,supportVML:!1,stops:[{offset:0,color:L,opacity:.2},{offset:.15,color:L,opacity:.15},{offset:.17,color:L,opacity:.35},{offset:.85,color:L,opacity:.05},{offset:.87,color:L,opacity:.15},{offset:.99,color:L,opacity:0}]}};var st=o.extend({init:function(t,e){this.options=d({},this.options,e),this.element=t},options:{duration:600,easing:D},play:function(){var e,n,o,s,a=this,l=a.options,h=a.element,d=h.options.id,u=l.delay||0,p=+new Date+u,f=l.duration,g=p+f,m=t.easing[l.easing];setTimeout(function(){var t=function(){a._stopped||(n=+new Date,o=c.min(n-p,f),s=m(o/f,o,0,1,f),a.step(s),e&&!function(t){var e=t.parentNode;for(;e&&e.parentNode;)e=e.parentNode;return e!==i}(e)||(e=Ut(d)),h.refresh(e),n<g?r.requestFrame(t):a.destroy())};t()},u)},abort:function(){this._stopped=!0},destroy:function(){this.abort()},setup:l,step:l}),at=st.extend({options:{duration:200,easing:k},setup:function(){var t=this.element.options;this.targetFillOpacity=t.fillOpacity,this.targetStrokeOpacity=t.strokeOpacity,t.fillOpacity=t.strokeOpacity=0},step:function(t){var e=this.element.options;e.fillOpacity=t*this.targetFillOpacity,e.strokeOpacity=t*this.targetStrokeOpacity}}),lt=st.extend({options:{size:0,easing:k},setup:function(){var t=this.element.points;t[1].x=t[2].x=t[0].x},step:function(t){var e=Rt(0,this.options.size,t),i=this.element.points;i[1].x=i[2].x=i[0].x+e},destroy:function(){st.fn.destroy.call(this),this.element.destroy()}}),ht=st.extend({options:{easing:k,duration:900},setup:function(){var t,e,i=this.element.options,n=this.options,r=n.center;i.rotation&&(t=n.startAngle,e=i.rotation[0],n.duration=c.max(c.abs(t-e)/n.speed*1e3,1),this.endState=e,i.rotation=[t,r.x,r.y])},step:function(t){var e=this.element;e.options.rotation&&(e.options.rotation[0]=Rt(this.options.startAngle,this.endState,t))}}),ct=st.extend({options:{easing:D},setup:function(){var t,e=this.element,i=e.points,n=e.options,r=n.vertical?B:I,o=n.stackBase,s=n.aboveAxis,a=this.endState={top:i[0].y,right:i[1].x,bottom:i[3].y,left:i[0].x};t=Nt(o,r===B?a[s?f:z]:a[s?_:A]),this.startPosition=t,Ft(i,r,t)},step:function(t){var e=this.startPosition,i=this.endState,n=this.element,r=n.points;n.options.vertical?(r[0].y=r[1].y=Rt(e,i.top,t),r[2].y=r[3].y=Rt(e,i.bottom,t)):(r[0].x=r[3].x=Rt(e,i.left,t),r[1].x=r[2].x=Rt(e,i.right,t))}}),dt=st.extend({options:{easing:D,duration:1e3},setup:function(){var t,e,i,n=this,r=n.element,o=r.points,s=r.options.animation,a=s.vertical,l=s.reverse,h=n.axis=a?"y":"x",d=n.options.endPosition,u=n.initialState={top:o[0].y,right:o[1].x,bottom:o[3].y,left:o[0].x},p=!Ot(n.options.endPosition);a?(i=l?"y2":"y1",t=u[p&&!l?f:z],e=p?u[l?f:z]:d[i]):(i=l?"x1":"x2",t=u[p&&!l?_:A],e=p?u[l?_:A]:d[i]),n.start=t,n.end=e,p?Ft(o,h,n.start):s.speed&&(n.options.duration=c.max(c.abs(n.start-n.end)/s.speed*1e3,1))},step:function(t){var e=this.start,i=this.end,n=this.element,r=n.points,o=this.axis;n.options.animation.vertical?r[0][o]=r[1][o]=Rt(e,i,t):r[1][o]=r[2][o]=Rt(e,i,t)}}),ut=st.extend({options:{easing:D,duration:1e3},setup:function(){var t,e,i,n=this,r=n.element,o=r.points,s=r.options.animation,a=s.vertical,l=s.reverse,h=a?"y":"x",u=h+(l?"1":"2"),p=h+(l?"2":"1"),f=s.startPosition[a?u:p],g=s.size/2,m=o.length,v=!Ot(n.options.endPosition),y=g;for(n.axis=h,n.endPositions=[],n.startPositions=[],v||(f=o[1][h],e=n.options.endPosition[a?p:u],s.speed&&(n.options.duration=c.max(c.abs(f-e)/s.speed*1e3,1))),i=0;i<m;i++)t=d({},o[i]),v?(n.endPositions[i]=t[h],o[i][h]=f-y):n.endPositions[i]=e-y,n.startPositions[i]=o[i][h],y-=g},step:function(t){var e,i=this.startPositions,n=this.endPositions,r=this.element.points,o=this.axis,s=r.length;for(e=0;e<s;e++)r[e][o]=Rt(i[e],n[e],t)}});function pt(t,e){return o.extend({init:function(t){this.view=t},decorate:function(i){var n,r=this.view,o=i.options.animation;return o&&o.type===t&&r.options.transitions&&(n=i._animation=new e(i,o),r.animations.push(n)),i}})}var ft=pt("fadeIn",at),gt=function(t){var e,i,n,r,o,s=this,a=gt.formats;if(1===arguments.length)for(t=s.resolveColor(t),r=0;r<a.length;r++)e=a[r].re,i=a[r].process,(n=e.exec(t))&&(o=i(n),s.r=o[0],s.g=o[1],s.b=o[2]);else s.r=arguments[0],s.g=arguments[1],s.b=arguments[2];s.r=s.normalizeByte(s.r),s.g=s.normalizeByte(s.g),s.b=s.normalizeByte(s.b)};gt.prototype={toHex:function(){var t=this.padDigit,e=this.r.toString(16),i=this.g.toString(16),n=this.b.toString(16);return"#"+t(e)+t(i)+t(n)},resolveColor:function(t){return"#"==(t=t||p).charAt(0)&&(t=t.substr(1,6)),t=(t=t.replace(/ /g,"")).toLowerCase(),t=gt.namedColors[t]||t},normalizeByte:function(t){return t<0||isNaN(t)?0:t>255?255:t},padDigit:function(t){return 1===t.length?"0"+t:t},brightness:function(t){var e=this,i=c.round;return e.r=i(e.normalizeByte(e.r*t)),e.g=i(e.normalizeByte(e.g*t)),e.b=i(e.normalizeByte(e.b*t)),e},percBrightness:function(){return c.sqrt(.241*this.r*this.r+.691*this.g*this.g+.068*this.b*this.b)}},gt.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(t){return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],gt.namedColors={aqua:"00ffff",azure:"f0ffff",beige:"f5f5dc",black:"000000",blue:"0000ff",brown:"a52a2a",coral:"ff7f50",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgray:"a9a9a9",darkgreen:"006400",darkorange:"ff8c00",darkred:"8b0000",dimgray:"696969",fuchsia:"ff00ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lightblue:"add8e6",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumblue:"0000cd",navy:"000080",olive:"808000",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",pink:"ffc0cb",plum:"dda0dd",purple:"800080",red:"ff0000",royalblue:"4169e1",salmon:"fa8072",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",steelblue:"4682b4",tan:"d2b48c",teal:"008080",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};var mt=o.extend({init:function(t,e,i){this._pool=[],this._freed={},this._size=t,this._id=i,this._prefix=e},alloc:function(){var t,e=this._pool;return e.length>0?(t=e.pop(),this._freed[t]=!1):t=this._prefix+this._id++,t},free:function(t){var e=this._pool,i=this._freed;e.length<this._size&&!i[t]&&(e.push(t),i[t]=!0)}});mt.current=new mt(1e3,"k",1e4);var vt=o.extend({init:function(t){this._size=t,this._length=0,this._map={}},put:function(t,e){var i=this,n=i._map,r={key:t,value:e};n[t]=r,i._head?(i._tail.newer=r,r.older=i._tail,i._tail=r):i._head=i._tail=r,i._length>=i._size?(n[i._head.key]=null,i._head=i._head.newer,i._head.older=null):i._length++},get:function(t){var e=this._map[t];if(e)return e===this._head&&e!==this._tail&&(this._head=e.newer,this._head.older=null),e!==this._tail&&(e.older&&(e.older.newer=e.newer,e.newer.older=e.older),e.older=this._tail,e.newer=null,this._tail.newer=e,this._tail=e),e.value}}),yt=function(){this._views=[]};yt.prototype={register:function(t,e,i){var n=this._views,r=n[0],o={name:t,type:e,order:i};!r||i<r.order?n.unshift(o):n.push(o)},create:function(t,e){var i=this._views,r=i[0];if(e){e=e.toLowerCase();for(var o=0;o<i.length;o++)if(i[o].name===e){r=i[o];break}}if(r)return new r.type(t);n.logToConsole("Warning: KendoUI DataViz cannot render. Possible causes:\n- The browser does not support SVG, VML and Canvas. User agent: "+navigator.userAgent+"\n- The kendo.dataviz.(svg|vml|canvas).js scripts are not loaded")}},yt.current=new yt;var bt={svg:function(){if(r.SVGView){var t=this._getModel(),e=new r.SVGView(d({encodeText:!0},t.options));return e.load(t),e.render()}throw new Error("Unable to create SVGView. Check that kendo.dataviz.svg.js is loaded.")},imageDataURL:function(){if(r.CanvasView){if(r.supportsCanvas()){var t=this._getModel(),e=document.createElement("div"),i=new r.CanvasView(t.options);return i.load(t),i.renderTo(e).toDataURL()}return n.logToConsole("Warning: Unable to generate image. The browser does not support Canvas.\nUser agent: "+navigator.userAgent),null}throw new Error("Unable to create CanvasView. Check that kendo.dataviz.canvas.js is loaded.")}},wt=o.extend({init:function(){this._cache=new vt(1e3)},measure:function(t,e,n){var r=t+kt(e)+n,o=this._cache.get(r);if(o)return o;var s={width:0,height:0,baseline:0},a=this._measureBox,l=this._baselineMarker.cloneNode(!1);for(var h in e)a.style[h]=e[h];if(a.innerHTML=t,a.appendChild(l),i.body.appendChild(a),(t+"").length&&(s={width:a.offsetWidth-1,height:a.offsetHeight,baseline:l.offsetTop+1}),n){var d=s.width,u=s.height,p=d/2,f=u/2,g=St(0,0,p,f,n),m=St(d,0,p,f,n),v=St(d,u,p,f,n),y=St(0,u,p,f,n);s.normalWidth=d,s.normalHeight=u,s.width=c.max(g.x,m.x,v.x,y.x)-c.min(g.x,m.x,v.x,y.x),s.height=c.max(g.y,m.y,v.y,y.y)-c.min(g.y,m.y,v.y,y.y)}return this._cache.put(r,s),a.parentNode.removeChild(a),s}});function xt(t,e,i){return wt.current.measure(t,e,i)}function _t(t,e){var i=Lt(e-t,b-1);if(0===i){if(0===e)return.1;i=c.abs(e)}var n=c.pow(10,c.floor(c.log(i)/c.log(10))),r=Lt(i/n,b);return Lt(n*(r<1.904762?.2:r<4.761904?.5:r<9.523809?1:2),b)}function kt(t){var e=[];for(var i in t)e.push(i+t[i]);return e.sort().join(" ")}function Ct(){return mt.current.alloc()}function St(t,e,i,n,r){var o=r*w;return new N(i+(t-i)*c.cos(o)+(e-n)*c.sin(o),n-(t-i)*c.sin(o)+(e-n)*c.cos(o))}function Tt(e,i){if(e.x1==i.x1&&e.y1==i.y1&&e.x2==i.x2&&e.y2==i.y2)return i;var n=c.min(e.x1,i.x1),r=c.max(e.x1,i.x1),o=c.min(e.x2,i.x2),s=c.max(e.x2,i.x2),a=c.min(e.y1,i.y1),l=c.max(e.y1,i.y1),h=c.min(e.y2,i.y2),d=c.max(e.y2,i.y2),u=[];return u[0]=V(r,a,o,l),u[1]=V(n,l,r,h),u[2]=V(o,l,s,h),u[3]=V(r,h,o,d),e.x1==n&&e.y1==a||i.x1==n&&i.y1==a?(u[4]=V(n,a,r,l),u[5]=V(o,h,s,d)):(u[4]=V(o,a,s,l),u[5]=V(n,h,r,d)),t.grep(u,function(t){return t.height()>0&&t.width()>0})[0]}wt.fn._baselineMarker=t("<div class='k-baseline-marker' style='display: inline-block; vertical-align: baseline;width: 1px; height: 1px;overflow: hidden;' />")[0],wt.fn._measureBox=t("<div style='position: absolute; top: -4000px;line-height: normal; visibility: hidden;' />")[0],wt.current=new wt;var Pt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,10)};function At(t,e){return-1!=h(t,e)}function Dt(t){return t[t.length-1]}function zt(t,e){t.push.apply(t,e)}function Et(t,e){return Lt(c.ceil(t/e)*e,b)}function Mt(t,e){return Lt(c.floor(t/e)*e,b)}function Lt(t,e){var i=c.pow(10,e||0);return c.round(t*i)/i}function It(t,e){return c.log(t)/c.log(e)}function Bt(t,e,i){var n=Lt(c.abs(t%e),b);return 0===n||n>e*(1-i)}function Rt(t,e,i){return Lt(t+(e-t)*i,m)}function Ot(t){return typeof t!==E}function Nt(t,e){return Ot(t)?t:e}function Vt(t,e){return t-e}function Ft(t,e,i){var n,r=t.length;for(n=0;n<r;n++)t[n][e]=i}function Ht(t,e){return t.match(x)?n.format.apply(this,arguments):n.toString(e,t)}function Ut(t){return i.getElementById(t)}function $t(t,e){return-t.x*e.y+t.y*e.x<0}r.requestFrame=function(t,e){return Pt(t,e)};var jt=function(t){this.closed=t};function Gt(t){if(!t||!t.indexOf||t.indexOf("&")<0)return t;var e=Gt._element;return e.innerHTML=t,e.textContent||e.innerText}jt.prototype=jt.fn={WEIGHT:.333,EXTREMUM_ALLOWED_DEVIATION:.01,process:function(t){var e,i,n,r,o,s,a,l=this,h=l.closed,c=t.slice(0),d=c.length,u=[];if(d>2&&(l.removeDuplicates(0,c),d=c.length),d<2||2==d&&c[0].equals(c[1]))return u;for(e=c[0],i=c[1],n=c[2],u.push(e);e.equals(c[d-1]);)h=!0,c.pop(),d--;if(2==d)return a=l.tangent(e,i,I,B),u.push(l.firstControlPoint(a,e,i,I,B),l.secondControlPoint(a,e,i,I,B),i),u;h?(e=c[d-1],i=c[0],n=c[1],o=(r=l.controlPoints(e,i,n))[1],s=r[0]):(a=l.tangent(e,i,I,B),o=l.firstControlPoint(a,e,i,I,B)),u.push(o);for(var p=0;p<=d-3;p++)l.removeDuplicates(p,c),p+3<=(d=c.length)&&(e=c[p],i=c[p+1],n=c[p+2],r=l.controlPoints(e,i,n),u.push(r[0],i,r[1]));return h?(e=c[d-2],i=c[d-1],n=c[0],r=l.controlPoints(e,i,n),u.push(r[0],i,r[1],s,n)):(a=l.tangent(i,n,I,B),u.push(l.secondControlPoint(a,i,n,I,B),n)),u},removeDuplicates:function(t,e){for(;e[t].equals(e[t+1])||e[t+1].equals(e[t+2]);)e.splice(t+1,1)},invertAxis:function(t,e,i){var n,r,o=!1;return t.x===e.x?o=!0:e.x===i.x?(e.y<i.y&&t.y<=e.y||i.y<e.y&&e.y<=t.y)&&(o=!0):(n=this.lineFunction(t,e),r=this.calculateFunction(n,i.x),t.y<=e.y&&i.y<=r||e.y<=t.y&&i.y>=r||(o=!0)),o},isLine:function(t,e,i){var n=this.lineFunction(t,e),r=this.calculateFunction(n,i.x);return t.x==e.x&&e.x==i.x||Lt(r,1)===Lt(i.y,1)},lineFunction:function(t,e){var i=(e.y-t.y)/(e.x-t.x);return[t.y-i*t.x,i]},controlPoints:function(t,e,i){var n,r,o,s,a=this,l=I,h=B,c=!1,d=!1,u=a.EXTREMUM_ALLOWED_DEVIATION;a.isLine(t,e,i)?n=a.tangent(t,e,I,B):(r={x:a.isMonotonicByField(t,e,i,I),y:a.isMonotonicByField(t,e,i,B)}).x&&r.y?(n=a.tangent(t,i,I,B),c=!0):(a.invertAxis(t,e,i)&&(l=B,h=I),r[l]?n=0:(n=u*(i[h]<t[h]&&t[h]<=e[h]||t[h]<i[h]&&e[h]<=t[h]?a.sign((i[h]-t[h])*(e[l]-t[l])):-a.sign((i[l]-t[l])*(e[h]-t[h]))),d=!0));if(s=a.secondControlPoint(n,t,e,l,h),d){var p=l;l=h,h=p}return o=a.firstControlPoint(n,e,i,l,h),c&&(a.restrictControlPoint(t,e,s,n),a.restrictControlPoint(e,i,o,n)),[s,o]},sign:function(t){return t<=0?-1:1},restrictControlPoint:function(t,e,i,n){t.y<e.y?e.y<i.y?(i.x=t.x+(e.y-t.y)/n,i.y=e.y):i.y<t.y&&(i.x=e.x-(e.y-t.y)/n,i.y=t.y):i.y<e.y?(i.x=t.x-(t.y-e.y)/n,i.y=e.y):t.y<i.y&&(i.x=e.x+(t.y-e.y)/n,i.y=t.y)},tangent:function(t,e,i,n){var r=e[i]-t[i],o=e[n]-t[n];return 0===r?0:o/r},isMonotonicByField:function(t,e,i,n){return i[n]>e[n]&&e[n]>t[n]||i[n]<e[n]&&e[n]<t[n]},firstControlPoint:function(t,e,i,n,r){var o=e[n],s=(i[n]-o)*this.WEIGHT;return this.point(o+s,e[r]+s*t,n,r)},secondControlPoint:function(t,e,i,n,r){var o=e[n],s=i[n],a=(s-o)*this.WEIGHT;return this.point(s-a,i[r]-a*t,n,r)},point:function(t,e,i,n){var r=N();return r[i]=t,r[n]=e,r},calculateFunction:function(t,e){for(var i=0,n=t.length,r=0;r<n;r++)i+=Math.pow(e,r)*t[r];return i}},Gt._element=document.createElement("span"),d(n.dataviz,{init:function(t){n.init(t,n.dataviz.ui)},ui:{roles:{},themes:{},views:[],plugin:function(t){n.ui.plugin(t,r.ui)}},AXIS_LABEL_CLICK:u,COORD_PRECISION:m,DEFAULT_PRECISION:b,DEFAULT_WIDTH:600,DEFAULT_HEIGHT:400,DEFAULT_FONT:y,INITIAL_ANIMATION_DURATION:600,NOTE_CLICK:"noteClick",NOTE_HOVER:"noteHover",CLIP:"clip",DASH_ARRAYS:{dot:[1.5,3.5],dash:[4,3.5],longdash:[8,3.5],dashdot:[3.5,3.5,1.5,3.5],longdashdot:[8,3.5,1.5,3.5],longdashdotdot:[8,3.5,1.5,3.5,1.5,3.5]},Axis:K,AxisLabel:Q,Box2D:V,BoxElement:G,ChartElement:$,Color:gt,CurveProcessor:jt,ElementAnimation:st,ExpandAnimation:lt,ExportMixin:bt,ArrowAnimation:ut,BarAnimation:ct,BarIndicatorAnimatin:dt,FadeAnimation:at,FadeAnimationDecorator:ft,IDPool:mt,LogarithmicAxis:nt,LRUCache:vt,Matrix:O,Note:J,NumericAxis:it,Point2D:N,PinElement:et,Ring:F,Pin:U,RootElement:j,RotationAnimation:ht,Sector:H,ShapeElement:tt,Text:W,TextMetrics:wt,TextBox:q,Title:Y,ViewBase:ot,ViewElement:rt,ViewFactory:yt,animationDecorator:pt,append:zt,autoFormat:Ht,autoMajorUnit:_t,boxDiff:Tt,defined:Ot,dateComparer:function(t,e){return t&&e?t.getTime()-e.getTime():0},decodeEntities:Gt,getElement:Ut,getSpacing:R,inArray:At,interpolateValue:Rt,last:Dt,limitValue:function(t,e,i){return c.max(c.min(t,i),e)},measureText:xt,mwDelta:function(t){var e=t.originalEvent,i=0;return e.wheelDelta&&(i=(i=-e.wheelDelta/120)>0?c.ceil(i):c.floor(i)),e.detail&&(i=Lt(e.detail/3)),i},rotatePoint:St,round:Lt,ceil:Et,floor:Mt,supportsCanvas:function(){return!!i.createElement("canvas").getContext},supportsSVG:function(){return i.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")},renderTemplate:function(t){return s(t,{useWithBlock:!1,paramName:"d"})},uniqueId:Ct,valueOrDefault:Nt})}(window.kendo.jQuery),function(){var t=window.kendo,e=t.dataviz.ui,i=t.deepExtend,n="#000",r="Arial,Helvetica,sans-serif",o="12px "+r,s="16px "+r,a="#fff",l={title:{font:s},legend:{labels:{font:o}},seriesDefaults:{visible:!0,labels:{font:"11px Arial,Helvetica,sans-serif"},donut:{margin:1},line:{width:2},vericalLine:{width:2},scatterLine:{width:1},area:{opacity:.4,markers:{visible:!1,size:6},highlight:{markers:{border:{color:"#fff",opacity:1,width:1}}},line:{opacity:1,width:0}},verticalArea:{opacity:.4,markers:{visible:!1,size:6},line:{opacity:1,width:0}},radarLine:{width:2,markers:{visible:!1}},radarArea:{opacity:.5,markers:{visible:!1,size:6},line:{opacity:1,width:0}},candlestick:{line:{width:1,color:n},border:{width:1,_brightness:.8},gap:1,spacing:.3,downColor:a,highlight:{line:{width:2},border:{width:2,opacity:1}}},ohlc:{line:{width:1},gap:1,spacing:.3,highlight:{line:{width:3,opacity:1}}},bubble:{opacity:.6,border:{width:0},labels:{background:"transparent"}},bar:{gap:1.5,spacing:.4},column:{gap:1.5,spacing:.4},bullet:{gap:1.5,spacing:.4,target:{color:"#ff0000"}},verticalBullet:{gap:1.5,spacing:.4,target:{color:"#ff0000"}},boxPlot:{outliersField:"",meanField:"",whiskers:{width:1,color:n},mean:{width:1,color:n},median:{width:1,color:n},border:{width:1,_brightness:.8},gap:1,spacing:.3,downColor:a,highlight:{whiskers:{width:2},mean:{width:2},median:{width:2},border:{width:2,opacity:1}}},funnel:{labels:{color:"",background:""}},notes:{icon:{size:7,border:{width:1}},label:{padding:3,font:o},line:{length:10,width:1},visible:!0}},categoryAxis:{majorGridLines:{visible:!0}},axisDefaults:{labels:{font:o},title:{font:s,margin:5},crosshair:{tooltip:{font:o}},notes:{icon:{size:7,border:{width:1}},label:{padding:3,font:o},line:{length:10,width:1},visible:!0}},tooltip:{font:o},navigator:{pane:{height:90,margin:{top:10}}}},h={scale:{labels:{font:o}}},c={shapeDefaults:{hover:{opacity:.2},stroke:{width:0}},editable:{resize:{handles:{width:7,height:7}},rotate:{thumb:{width:14}},handles:{type:"rectangle"},select:{stroke:{width:1,dashType:"dot"}}},connectionDefaults:{stroke:{width:2},select:{handles:{width:8,height:8}}}},d=e.themes,u=e.registerTheme=function(t,e){var n={};n.chart=i({},l,e.chart),n.gauge=i({},h,e.gauge),n.diagram=i({},c,e.diagram);var r=n.chart.seriesDefaults;r.verticalLine=i({},r.line),r.verticalArea=i({},r.area),r.polarArea=i({},r.radarArea),r.polarLine=i({},r.radarLine),d[t]=n};u("black",{chart:{title:{color:a},legend:{labels:{color:a},inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}},seriesDefaults:{labels:{color:a},errorBars:{color:a},notes:{icon:{background:"#3b3b3b",border:{color:"#8e8e8e"}},label:{color:a},line:{color:"#8e8e8e"}},pie:{overlay:{gradient:"sharpBevel"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#3d3d3d"}},scatter:{markers:{background:"#3d3d3d"}},scatterLine:{markers:{background:"#3d3d3d"}},candlestick:{downColor:"#555",line:{color:a},border:{_brightness:1.5,opacity:1},highlight:{border:{color:a,opacity:.2}}},ohlc:{line:{color:a}}},chartArea:{background:"#3d3d3d"},seriesColors:["#0081da","#3aafff","#99c900","#ffeb3d","#b20753","#ff4195"],axisDefaults:{line:{color:"#8e8e8e"},labels:{color:a},majorGridLines:{color:"#545454"},minorGridLines:{color:"#454545"},title:{color:a},crosshair:{color:"#8e8e8e"},notes:{icon:{background:"#3b3b3b",border:{color:"#8e8e8e"}},label:{color:a},line:{color:"#8e8e8e"}}}},gauge:{pointer:{color:"#0070e4"},scale:{rangePlaceholderColor:"#1d1d1d",labels:{color:a},minorTicks:{color:a},majorTicks:{color:a},line:{color:a}}},diagram:{shapeDefaults:{background:"#0066cc",connectorDefaults:{background:a,stroke:{color:"#384049"},hover:{background:"#3d3d3d",stroke:{color:"#efefef"}}},content:{color:a}},editable:{resize:{handles:{background:"#3d3d3d",stroke:{color:a},hover:{background:a,stroke:{color:a}}}},rotate:{thumb:{stroke:{color:a},background:a}},select:{stroke:{color:a}}},connectionDefaults:{stroke:{color:a},content:{color:a},select:{handles:{background:"#3d3d3d",stroke:{color:"#efefef"}}}}}}),u("blueopal",{chart:{title:{color:"#293135"},legend:{labels:{color:"#293135"},inactiveItems:{labels:{color:"#27A5BA"},markers:{color:"#27A5BA"}}},seriesDefaults:{labels:{color:n,background:a,opacity:.5},errorBars:{color:"#293135"},candlestick:{downColor:"#c4d0d5",line:{color:"#9aabb2"}},notes:{icon:{background:"transparent",border:{color:"#9aabb2"}},label:{color:"#293135"},line:{color:"#9aabb2"}}},seriesColors:["#0069a5","#0098ee","#7bd2f6","#ffb800","#ff8517","#e34a00"],axisDefaults:{line:{color:"#9aabb2"},labels:{color:"#293135"},majorGridLines:{color:"#c4d0d5"},minorGridLines:{color:"#edf1f2"},title:{color:"#293135"},crosshair:{color:"#9aabb2"},notes:{icon:{background:"transparent",border:{color:"#9aabb2"}},label:{color:"#293135"},line:{color:"#9aabb2"}}}},gauge:{pointer:{color:"#005c83"},scale:{rangePlaceholderColor:"#daecf4",labels:{color:"#293135"},minorTicks:{color:"#293135"},majorTicks:{color:"#293135"},line:{color:"#293135"}}},diagram:{shapeDefaults:{background:"#7ec6e3",connectorDefaults:{background:"#003f59",stroke:{color:a},hover:{background:a,stroke:{color:"#003f59"}}},content:{color:"#293135"}},editable:{resize:{handles:{background:a,stroke:{color:"#003f59"},hover:{background:"#003f59",stroke:{color:"#003f59"}}}},rotate:{thumb:{stroke:{color:"#003f59"},background:"#003f59"}},select:{stroke:{color:"#003f59"}}},connectionDefaults:{stroke:{color:"#003f59"},content:{color:"#293135"},select:{handles:{background:"#3d3d3d",stroke:{color:"#efefef"}}}}}}),u("highcontrast",{chart:{title:{color:"#ffffff"},legend:{labels:{color:"#ffffff"},inactiveItems:{labels:{color:"#66465B"},markers:{color:"#66465B"}}},seriesDefaults:{labels:{color:"#ffffff"},errorBars:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#ffffff"}},label:{color:"#ffffff"},line:{color:"#ffffff"}},pie:{overlay:{gradient:"sharpGlass"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#2c232b"}},scatter:{markers:{background:"#2c232b"}},scatterLine:{markers:{background:"#2c232b"}},area:{opacity:.5},candlestick:{downColor:"#664e62",line:{color:"#ffffff"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:"#ffffff",opacity:1}}},ohlc:{line:{color:"#ffffff"}}},chartArea:{background:"#2c232b"},seriesColors:["#a7008f","#ffb800","#3aafff","#99c900","#b20753","#ff4195"],axisDefaults:{line:{color:"#ffffff"},labels:{color:"#ffffff"},majorGridLines:{color:"#664e62"},minorGridLines:{color:"#4f394b"},title:{color:"#ffffff"},crosshair:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#ffffff"}},label:{color:"#ffffff"},line:{color:"#ffffff"}}}},gauge:{pointer:{color:"#a7008f"},scale:{rangePlaceholderColor:"#2c232b",labels:{color:"#ffffff"},minorTicks:{color:"#2c232b"},majorTicks:{color:"#664e62"},line:{color:"#ffffff"}}},diagram:{shapeDefaults:{background:"#a7018f",connectorDefaults:{background:a,stroke:{color:"#2c232b"},hover:{background:"#2c232b",stroke:{color:a}}},content:{color:a}},editable:{resize:{handles:{background:"#2c232b",stroke:{color:a},hover:{background:a,stroke:{color:a}}}},rotate:{thumb:{stroke:{color:a},background:a}},select:{stroke:{color:a}}},connectionDefaults:{stroke:{color:a},content:{color:a},select:{handles:{background:"#2c232b",stroke:{color:a}}}}}}),u("default",{chart:{title:{color:"#8e8e8e"},legend:{labels:{color:"#232323"},inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}},seriesDefaults:{labels:{color:n,background:a,opacity:.5},errorBars:{color:"#232323"},candlestick:{downColor:"#dedede",line:{color:"#8d8d8d"}},notes:{icon:{background:"transparent",border:{color:"#8e8e8e"}},label:{color:"#232323"},line:{color:"#8e8e8e"}}},seriesColors:["#ff6800","#a0a700","#ff8d00","#678900","#ffb53c","#396000"],axisDefaults:{line:{color:"#8e8e8e"},labels:{color:"#232323"},minorGridLines:{color:"#f0f0f0"},majorGridLines:{color:"#dfdfdf"},title:{color:"#232323"},crosshair:{color:"#8e8e8e"},notes:{icon:{background:"transparent",border:{color:"#8e8e8e"}},label:{color:"#232323"},line:{color:"#8e8e8e"}}}},gauge:{pointer:{color:"#ea7001"},scale:{rangePlaceholderColor:"#dedede",labels:{color:"#2e2e2e"},minorTicks:{color:"#2e2e2e"},majorTicks:{color:"#2e2e2e"},line:{color:"#2e2e2e"}}},diagram:{shapeDefaults:{background:"#e15613",connectorDefaults:{background:"#282828",stroke:{color:a},hover:{background:a,stroke:{color:"#282828"}}},content:{color:"#2e2e2e"}},editable:{resize:{handles:{background:a,stroke:{color:"#282828"},hover:{background:"#282828",stroke:{color:"#282828"}}}},rotate:{thumb:{stroke:{color:"#282828"},background:"#282828"}},select:{stroke:{color:"#a7018f"}}},connectionDefaults:{stroke:{color:"#282828"},content:{color:"#2e2e2e"},select:{handles:{background:a,stroke:{color:"#282828"}}}}}}),u("silver",{chart:{title:{color:"#4e5968"},legend:{labels:{color:"#4e5968"},inactiveItems:{labels:{color:"#B1BCC8"},markers:{color:"#B1BCC8"}}},seriesDefaults:{labels:{color:"#293135",background:"#eaeaec",opacity:.5},errorBars:{color:"#4e5968"},notes:{icon:{background:"transparent",border:{color:"#4e5968"}},label:{color:"#4e5968"},line:{color:"#4e5968"}},line:{markers:{background:"#eaeaec"}},scatter:{markers:{background:"#eaeaec"}},scatterLine:{markers:{background:"#eaeaec"}},pie:{connectors:{color:"#A6B1C0"}},donut:{connectors:{color:"#A6B1C0"}},candlestick:{downColor:"#a6afbe"}},chartArea:{background:"#eaeaec"},seriesColors:["#007bc3","#76b800","#ffae00","#ef4c00","#a419b7","#430B62"],axisDefaults:{line:{color:"#a6b1c0"},labels:{color:"#4e5968"},majorGridLines:{color:"#dcdcdf"},minorGridLines:{color:"#eeeeef"},title:{color:"#4e5968"},crosshair:{color:"#a6b1c0"},notes:{icon:{background:"transparent",border:{color:"#4e5968"}},label:{color:"#4e5968"},line:{color:"#4e5968"}}}},gauge:{pointer:{color:"#0879c0"},scale:{rangePlaceholderColor:"#f3f3f4",labels:{color:"#515967"},minorTicks:{color:"#515967"},majorTicks:{color:"#515967"},line:{color:"#515967"}}},diagram:{shapeDefaults:{background:"#1c82c2",connectorDefaults:{background:"#515967",stroke:{color:a},hover:{background:a,stroke:{color:"#282828"}}},content:{color:"#515967"}},editable:{resize:{handles:{background:a,stroke:{color:"#515967"},hover:{background:"#515967",stroke:{color:"#515967"}}}},rotate:{thumb:{stroke:{color:"#515967"},background:"#515967"}},select:{stroke:{color:"#515967"}}},connectionDefaults:{stroke:{color:"#515967"},content:{color:"#515967"},select:{handles:{background:a,stroke:{color:"#515967"}}}}}}),u("metro",{chart:{title:{color:"#777777"},legend:{labels:{color:"#777777"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:n},errorBars:{color:"#777777"},notes:{icon:{background:"transparent",border:{color:"#777777"}},label:{color:"#777777"},line:{color:"#777777"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:["#8ebc00","#309b46","#25a0da","#ff6900","#e61e26","#d8e404","#16aba9","#7e51a1","#313131","#ed1691"],axisDefaults:{line:{color:"#c7c7c7"},labels:{color:"#777777"},minorGridLines:{color:"#c7c7c7"},majorGridLines:{color:"#c7c7c7"},title:{color:"#777777"},crosshair:{color:"#c7c7c7"},notes:{icon:{background:"transparent",border:{color:"#777777"}},label:{color:"#777777"},line:{color:"#777777"}}}},gauge:{pointer:{color:"#8ebc00"},scale:{rangePlaceholderColor:"#e6e6e6",labels:{color:"#777"},minorTicks:{color:"#777"},majorTicks:{color:"#777"},line:{color:"#777"}}},diagram:{shapeDefaults:{background:"#8ebc00",connectorDefaults:{background:n,stroke:{color:a},hover:{background:a,stroke:{color:n}}},content:{color:"#777"}},editable:{resize:{handles:{background:a,stroke:{color:"#787878"},hover:{background:"#787878",stroke:{color:"#787878"}}}},rotate:{thumb:{stroke:{color:"#787878"},background:"#787878"}},select:{stroke:{color:"#515967"}}},connectionDefaults:{stroke:{color:"#787878"},content:{color:"#777"},select:{handles:{background:a,stroke:{color:"#787878"}}}}}}),u("metroblack",{chart:{title:{color:"#ffffff"},legend:{labels:{color:"#ffffff"},inactiveItems:{labels:{color:"#797979"},markers:{color:"#797979"}}},seriesDefaults:{border:{_brightness:1},labels:{color:"#ffffff"},errorBars:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#cecece"}},label:{color:"#ffffff"},line:{color:"#cecece"}},line:{markers:{background:"#0e0e0e"}},bubble:{opacity:.6},scatter:{markers:{background:"#0e0e0e"}},scatterLine:{markers:{background:"#0e0e0e"}},candlestick:{downColor:"#828282",line:{color:"#ffffff"}},overlay:{gradient:"none"}},chartArea:{background:"#0e0e0e"},seriesColors:["#00aba9","#309b46","#8ebc00","#ff6900","#e61e26","#d8e404","#25a0da","#7e51a1","#313131","#ed1691"],axisDefaults:{line:{color:"#cecece"},labels:{color:"#ffffff"},minorGridLines:{color:"#2d2d2d"},majorGridLines:{color:"#333333"},title:{color:"#ffffff"},crosshair:{color:"#cecece"},notes:{icon:{background:"transparent",border:{color:"#cecece"}},label:{color:"#ffffff"},line:{color:"#cecece"}}}},gauge:{pointer:{color:"#00aba9"},scale:{rangePlaceholderColor:"#2d2d2d",labels:{color:"#ffffff"},minorTicks:{color:"#333333"},majorTicks:{color:"#cecece"},line:{color:"#cecece"}}},diagram:{shapeDefaults:{background:"#00aba9",connectorDefaults:{background:a,stroke:{color:"#0e0e0e"},hover:{background:"#0e0e0e",stroke:{color:a}}},content:{color:a}},editable:{resize:{handles:{background:"#0e0e0e",stroke:{color:"#787878"},hover:{background:"#787878",stroke:{color:"#787878"}}}},rotate:{thumb:{stroke:{color:a},background:a}},select:{stroke:{color:"#787878"}}},connectionDefaults:{stroke:{color:a},content:{color:a},select:{handles:{background:"#0e0e0e",stroke:{color:a}}}}}}),u("moonlight",{chart:{title:{color:"#ffffff"},legend:{labels:{color:"#ffffff"},inactiveItems:{labels:{color:"#A1A7AB"},markers:{color:"#A1A7AB"}}},seriesDefaults:{labels:{color:"#ffffff"},errorBars:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#8c909e"}},label:{color:"#ffffff"},line:{color:"#8c909e"}},pie:{overlay:{gradient:"sharpBevel"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#212a33"}},bubble:{opacity:.6},scatter:{markers:{background:"#212a33"}},scatterLine:{markers:{background:"#212a33"}},area:{opacity:.3},candlestick:{downColor:"#757d87",line:{color:"#ea9d06"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:a,opacity:.2}}},ohlc:{line:{color:"#ea9d06"}}},chartArea:{background:"#212a33"},seriesColors:["#ffca08","#ff710f","#ed2e24","#ff9f03","#e13c02","#a00201"],axisDefaults:{line:{color:"#8c909e"},minorTicks:{color:"#8c909e"},majorTicks:{color:"#8c909e"},labels:{color:"#ffffff"},majorGridLines:{color:"#3e424d"},minorGridLines:{color:"#2f3640"},title:{color:"#ffffff"},crosshair:{color:"#8c909e"},notes:{icon:{background:"transparent",border:{color:"#8c909e"}},label:{color:"#ffffff"},line:{color:"#8c909e"}}}},gauge:{pointer:{color:"#f4af03"},scale:{rangePlaceholderColor:"#2f3640",labels:{color:a},minorTicks:{color:"#8c909e"},majorTicks:{color:"#8c909e"},line:{color:"#8c909e"}}},diagram:{shapeDefaults:{background:"#f3ae03",connectorDefaults:{background:a,stroke:{color:"#414550"},hover:{background:"#414550",stroke:{color:a}}},content:{color:a}},editable:{resize:{handles:{background:"#414550",stroke:{color:a},hover:{background:a,stroke:{color:a}}}},rotate:{thumb:{stroke:{color:a},background:a}},select:{stroke:{color:a}}},connectionDefaults:{stroke:{color:a},content:{color:a},select:{handles:{background:"#414550",stroke:{color:a}}}}}}),u("uniform",{chart:{title:{color:"#686868"},legend:{labels:{color:"#686868"},inactiveItems:{labels:{color:"#B6B6B6"},markers:{color:"#B6B6B6"}}},seriesDefaults:{labels:{color:"#686868"},errorBars:{color:"#686868"},notes:{icon:{background:"transparent",border:{color:"#9e9e9e"}},label:{color:"#686868"},line:{color:"#9e9e9e"}},pie:{overlay:{gradient:"sharpBevel"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#ffffff"}},bubble:{opacity:.6},scatter:{markers:{background:"#ffffff"}},scatterLine:{markers:{background:"#ffffff"}},area:{opacity:.3},candlestick:{downColor:"#cccccc",line:{color:"#cccccc"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:"#cccccc",opacity:.2}}},ohlc:{line:{color:"#cccccc"}}},chartArea:{background:"#ffffff"},seriesColors:["#527aa3","#6f91b3","#8ca7c2","#a8bdd1","#c5d3e0","#e2e9f0"],axisDefaults:{line:{color:"#9e9e9e"},minorTicks:{color:"#aaaaaa"},majorTicks:{color:"#888888"},labels:{color:"#686868"},majorGridLines:{color:"#dadada"},minorGridLines:{color:"#e7e7e7"},title:{color:"#686868"},crosshair:{color:"#9e9e9e"},notes:{icon:{background:"transparent",border:{color:"#9e9e9e"}},label:{color:"#686868"},line:{color:"#9e9e9e"}}}},gauge:{pointer:{color:"#527aa3"},scale:{rangePlaceholderColor:"#e7e7e7",labels:{color:"#686868"},minorTicks:{color:"#aaaaaa"},majorTicks:{color:"#888888"},line:{color:"#9e9e9e"}}},diagram:{shapeDefaults:{background:"#d1d1d1",connectorDefaults:{background:"#686868",stroke:{color:a},hover:{background:a,stroke:{color:"#686868"}}},content:{color:"#686868"}},editable:{resize:{handles:{background:a,stroke:{color:"#686868"},hover:{background:"#686868",stroke:{color:"#686868"}}}},rotate:{thumb:{stroke:{color:"#686868"},background:"#686868"}},select:{stroke:{color:"#686868"}}},connectionDefaults:{stroke:{color:"#686868"},content:{color:"#686868"},select:{handles:{background:a,stroke:{color:"#686868"}}}}}}),u("bootstrap",{chart:{title:{color:"#333333"},legend:{labels:{color:"#333333"},inactiveItems:{labels:{color:"#999999"},markers:{color:"#9A9A9A"}}},seriesDefaults:{labels:{color:"#333333"},overlay:{gradient:"none"},errorBars:{color:"#343434"},notes:{icon:{background:"#000000",border:{color:"#000000"}},label:{color:"#ffffff"},line:{color:"#000000"}},pie:{overlay:{gradient:"none"}},donut:{overlay:{gradient:"none"}},line:{markers:{background:"#ffffff"}},bubble:{opacity:.6},scatter:{markers:{background:"#ffffff"}},scatterLine:{markers:{background:"#ffffff"}},area:{opacity:.8},candlestick:{downColor:"#d0d0d0",line:{color:"#333333"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:"#b8b8b8",opacity:.2}}},ohlc:{line:{color:"#333333"}}},chartArea:{background:"#ffffff"},seriesColors:["#428bca","#5bc0de","#5cb85c","#f2b661","#e67d4a","#da3b36"],axisDefaults:{line:{color:"#cccccc"},minorTicks:{color:"#ebebeb"},majorTicks:{color:"#cccccc"},labels:{color:"#333333"},majorGridLines:{color:"#cccccc"},minorGridLines:{color:"#ebebeb"},title:{color:"#333333"},crosshair:{color:"#000000"},notes:{icon:{background:"#000000",border:{color:"#000000"}},label:{color:"#ffffff"},line:{color:"#000000"}}}},gauge:{pointer:{color:"#428bca"},scale:{rangePlaceholderColor:"#cccccc",labels:{color:"#333333"},minorTicks:{color:"#ebebeb"},majorTicks:{color:"#cccccc"},line:{color:"#cccccc"}}},diagram:{shapeDefaults:{background:"#428bca",connectorDefaults:{background:"#333333",stroke:{color:a},hover:{background:a,stroke:{color:"#333333"}}},content:{color:"#333333"}},editable:{resize:{handles:{background:a,stroke:{color:"#333333"},hover:{background:"#333333",stroke:{color:"#333333"}}}},rotate:{thumb:{stroke:{color:"#333333"},background:"#333333"}},select:{stroke:{color:"#333333"}}},connectionDefaults:{stroke:{color:"#c4c4c4"},content:{color:"#333333"},select:{handles:{background:a,stroke:{color:"#333333"}},stroke:{color:"#333333"}}}}}),u("flat",{chart:{title:{color:"#4c5356"},legend:{labels:{color:"#4c5356"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:"#4c5356"},errorBars:{color:"#4c5356"},notes:{icon:{background:"transparent",border:{color:"#cdcdcd"}},label:{color:"#4c5356"},line:{color:"#cdcdcd"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},area:{opacity:.9},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:["#10c4b2","#ff7663","#ffb74f","#a2df53","#1c9ec4","#ff63a5","#1cc47b"],axisDefaults:{line:{color:"#cdcdcd"},labels:{color:"#4c5356"},minorGridLines:{color:"#cdcdcd"},majorGridLines:{color:"#cdcdcd"},title:{color:"#4c5356"},crosshair:{color:"#cdcdcd"},notes:{icon:{background:"transparent",border:{color:"#cdcdcd"}},label:{color:"#4c5356"},line:{color:"#cdcdcd"}}}},gauge:{pointer:{color:"#10c4b2"},scale:{rangePlaceholderColor:"#cdcdcd",labels:{color:"#4c5356"},minorTicks:{color:"#4c5356"},majorTicks:{color:"#4c5356"},line:{color:"#4c5356"}}},diagram:{shapeDefaults:{background:"#10c4b2",connectorDefaults:{background:"#363940",stroke:{color:a},hover:{background:a,stroke:{color:"#363940"}}},content:{color:"#4c5356"}},editable:{resize:{handles:{background:a,stroke:{color:"#363940"},hover:{background:"#363940",stroke:{color:"#363940"}}}},rotate:{thumb:{stroke:{color:"#363940"},background:"#363940"}},select:{stroke:{color:"#363940"}}},connectionDefaults:{stroke:{color:"#cdcdcd"},content:{color:"#4c5356"},select:{handles:{background:a,stroke:{color:"#363940"}},stroke:{color:"#363940"}}}}})}(window.kendo.jQuery),function(){var t=jQuery,e=document,i=Math,n=window.kendo,r=n.Class,o=n.dataviz,s=o.Box2D,a=o.ExpandAnimation,l=o.Point2D,h=o.ViewBase,c=o.ViewElement,d=n.deepExtend,u=o.defined,p=o.round,f=o.renderTemplate,g=o.rotatePoint,m=o.uniqueId,v=o.CLIP,y=o.COORD_PRECISION,b=o.DASH_ARRAYS,w=o.DEFAULT_WIDTH,x=o.DEFAULT_HEIGHT,_=o.DEFAULT_FONT,k="solid",C="http://www.w3.org/2000/svg",S=h.extend({init:function(t){var e=this;h.fn.init.call(e,t),e.decorators.push(new U(e),new $(e)),o.ui.Chart&&e.decorators.push(new o.BarAnimationDecorator(e),new o.PieAnimationDecorator(e),new o.BubbleAnimationDecorator(e)),e.decorators.push(new j(e),new o.FadeAnimationDecorator(e)),o.Gauge&&e.decorators.push(new o.RadialPointerAnimationDecorator(e),new o.ArrowPointerAnimationDecorator(e),new o.BarIndicatorAnimationDecorator(e)),e.defsId=m(),e.template=S.template,e.display=e.options.inline?"inline":"block",e.template||(e.template=S.template=f("<?xml version='1.0' ?><svg xmlns='"+C+"' version='1.1' width='#= d.options.width #px' height='#= d.options.height #px' style='position: relative; display: #= d.display #;'>#= d.renderDefinitions() ##= d.renderContent() #</svg>"))},options:{width:w,height:x,encodeText:!1},renderTo:function(t){var e;return this.setupAnimations(),o.renderSVG(t,this.render()),e=t.firstElementChild,this.alignToScreen(e),this.playAnimations(),this._viewElement=e,e},renderDefinitions:function(){return"<defs id='"+this.defsId+"'>"+h.fn.renderDefinitions.call(this)+"</defs>"},renderElement:function(t){var i,n,r=e.createElement("div"),s=e.getElementById(this.defsId);return o.renderSVG(r,"<?xml version='1.0' ?><svg xmlns='"+C+"' version='1.1'>"+this.renderDefinitions()+t.render()+"</svg>"),i=r.firstElementChild.firstChild,n=r.firstElementChild.lastChild,s&&s.textContent!==i.textContent&&s.parentNode.replaceChild(i,s),n},createGroup:function(t){return this.decorate(new R(t))},createClipPath:function(t,e){var i=this.definitions[t],n=[this.createRect(e,{})];return i?(i.children=n,i.refresh()):((i=new O({id:t})).children=n,this.definitions[t]=i),i},createText:function(t,e){return this.decorate(new P(t,d({encode:this.options.encodeText},e)))},createRect:function(t,e){return this.decorate(new z(t.points(),!0,this.setDefaults(e)))},createCubicCurve:function(t,e,i){return this.decorate(new D(t,e,i))},createLine:function(t,e,i,n,r){return this.decorate(new z([new l(t,e),new l(i,n)],!1,this.setDefaults(r)))},createMultiLine:function(t,e){return this.decorate(new E(t,!1,this.setDefaults(e)))},createPolyline:function(t,e,i){return this.decorate(new z(t,e,this.setDefaults(i)))},createCircle:function(t,e,i){return this.decorate(new B(t,e,i))},createSector:function(t,e){return this.decorate(new I(t,e))},createRing:function(t,e){return this.decorate(new M(t,e))},createPin:function(t,e){return this.decorate(new L(t,e))},createGradient:function(t){return"radial"===t.type?u(t.ir)?new H(t):new F(t):new V(t)},alignToScreen:function(t){var e;try{e=t.getScreenCTM?t.getScreenCTM():null}catch(t){}if(e){var i=-e.e%1,n=-e.f%1,r=t.style;0===i&&0===n||(r.left=i+"px",r.top=n+"px")}}}),T=c.extend({renderClipPath:function(){var t=this.options.clipPathId,e="";return t&&(e=this.renderAttr("clip-path","url("+Q()+"#"+t+")")),e}}),P=T.extend({init:function(t,e){T.fn.init.call(this,e),this.content=t,this.template=P.template,this.template||(this.template=P.template=f("<text #= d.renderId() # #= d.renderDataAttributes() # x='#= Math.round(d.options.x) #' y='#= Math.round(d.options.y + d.options.baseline) #' fill-opacity='#= d.options.fillOpacity #' #= d.options.rotation ? d.renderRotation() : '' # style='font: #= d.options.font #; #= d.renderCursor() #' fill='#= d.options.color #'>#= d.renderContent() #</text>"))},options:{x:0,y:0,baseline:0,font:_,size:{width:0,height:0},fillOpacity:1,cursor:{}},refresh:function(e){var i=this.options;t(e).attr({"fill-opacity":i.fillOpacity})},clone:function(){return new P(this.content,d({},this.options))},renderRotation:function(){var t=this.options,e=t.size,i=p(t.x+e.normalWidth/2,y),n=p(t.y+e.normalHeight/2,y),r=p(t.x+e.width/2,y),o=p(t.y+e.height/2,y);return"transform='translate("+p(r-i,y)+","+p(o-n,y)+") rotate("+t.rotation+","+i+","+n+")'"},renderContent:function(){var t=this.content;return this.options.encode&&(t=o.decodeEntities(t),t=n.htmlEncode(t)),t}}),A=T.extend({init:function(t){T.fn.init.call(this,t),this.template=A.template,this.template||(this.template=A.template=f("<path #= d.renderId() ##= d.renderClipPath() #style='display: #= d.renderDisplay() #; #= d.renderCursor() #' #= d.renderDataAttributes() # d='#= d.renderPoints() #' #= d.renderAttr(\"stroke\", d.options.stroke) # #= d.renderAttr(\"stroke-width\", d.options.strokeWidth) ##= d.renderDashType() # stroke-linecap='#= d.renderLinecap() #' stroke-linejoin='round' fill-opacity='#= d.options.fillOpacity #' stroke-opacity='#= d.options.strokeOpacity #' fill='#= d.renderFill() #'></path>"))},options:{fill:"",fillOpacity:1,strokeOpacity:1,rotation:[0,0,0],strokeLineCap:"square",visible:!0,cursor:{}},refresh:function(e){var i=this.options;t(e).attr({d:this.renderPoints(),"fill-opacity":i.fillOpacity,"stroke-opacity":i.strokeOpacity}).css("display",this.renderDisplay())},clone:function(){return new A(d({},this.options))},renderPoints:function(){},renderDashType:function(){var t=this.options;return function(t,e){var i,n,r=[];if((t=t?t.toLowerCase():null)&&t!=k){for(i=b[t],n=0;n<i.length;n++)r.push(i[n]*(e||1));return"stroke-dasharray='"+r.join(" ")+"' "}return""}(t.dashType,t.strokeWidth)},renderLinecap:function(){var t=this.options,e=t.dashType,i=t.strokeLineCap;return e&&e!=k?"butt":i},renderFill:function(){var t=this.options.fill;return t&&"transparent"!==t?t:"none"},renderDisplay:function(){return this.options.visible?"block":"none"},destroy:function(){}}),D=A.extend({init:function(t,e,i){A.fn.init.call(this,e),this.areaPoints=i,this.points=t},renderPoints:function(){for(var t=this.points,e=[],i=this.areaPoints,n=0;n<t.length;n++)n%3==1&&e.push("C"),e.push(p(t[n].x,y)+" "+p(t[n].y,y));if(i&&i.length){for(n=0;n<i.length;n++)e.push("L "+i[n].x+" "+i[n].y);e.push("z")}return"M "+e.join(" ")}}),z=A.extend({init:function(t,e,i){A.fn.init.call(this,i),this.points=t,this.closed=e},renderPoints:function(){var t=this.points;return this._renderPoints(t)},_renderPoints:function(t){var e,i=this.options.rotation,n=new l(i[1],i[2]),r=-i[0],o=[];for(e=0;e<t.length;e++)o.push(this._print(t[e].clone().rotate(n,r)));return this.closed&&o.push("z"),"M"+o.join(" ")},clone:function(){return new z(d([],this.points),this.closed,d({},this.options))},_print:function(t){var e=this.options,i=e.strokeWidth,n=!1!==e.align&&i&&i%2!=0?G:p;return n(t.x,y)+" "+n(t.y,y)}}),E=z.extend({renderPoints:function(){var t,e=this.points,i=[];for(t=0;t<e.length;t++)i.push(this._renderPoints(e[t]));return i.join(" ")}}),M=A.extend({init:function(t,e){A.fn.init.call(this,e),this.pathTemplate=M.pathTemplate,this.pathTemplate||(this.pathTemplate=M.pathTemplate=f("M #= d.firstOuterPoint.x # #= d.firstOuterPoint.y # A#= d.r # #= d.r # 0 #= d.isReflexAngle ? '1' : '0' #,1 #= d.secondOuterPoint.x # #= d.secondOuterPoint.y # L #= d.secondInnerPoint.x # #= d.secondInnerPoint.y # A#= d.ir # #= d.ir # 0 #= d.isReflexAngle ? '1' : '0' #,0 #= d.firstInnerPoint.x # #= d.firstInnerPoint.y # z")),this.config=t||{}},renderPoints:function(){var t,e,n=this.config,r=n.startAngle,o=n.angle+r,s=o-r>180,a=i.max(n.r,0),l=i.max(n.ir,0),h=n.c,c=n.point(r),d=n.point(r,!0);return p(r)%360==p(o)%360&&(o-=.05),t=n.point(o),e=n.point(o,!0),this.pathTemplate({firstOuterPoint:c,secondOuterPoint:t,isReflexAngle:s,r:a,ir:l,cx:h.x,cy:h.y,firstInnerPoint:d,secondInnerPoint:e})},clone:function(){return new M(d({},this.config),d({},this.options))}}),L=A.extend({init:function(t,e){A.fn.init.call(this,e),this.pathTemplate=L.pathTemplate,this.pathTemplate||(this.pathTemplate=L.pathTemplate=f("M #= d.origin.x # #= d.origin.y # #= d.as.x # #= d.as.y # A#= d.r # #= d.r # 0 #= d.isReflexAngle ? '1' : '0' #,0 #= d.ae.x # #= d.ae.y # z")),this.config=t||new o.Pin},renderPoints:function(){var t=this,e=t.config,n=e.radius,r=i.PI/180,o=e.arcAngle,s=n*i.sin(o*r/2),a=e.height-n*(1-i.cos(o*r/2)),l=e.origin,h={x:l.x+s,y:l.y-a},c={x:l.x-s,y:l.y-a},d=function(i,n){var r=t.options.rotation,o=e.rotation;return i=g(i.x,i.y,r[1],r[2],-r[0]),n&&(i=g(i.x,i.y,l.x,l.y,o)),i};return l=d(l),t.pathTemplate({origin:l,as:d(h,!0),ae:d(c,!0),r:n,isReflexAngle:o>180})}}),I=M.extend({init:function(t,e){M.fn.init.call(this,t,e),this.pathTemplate=I.pathTemplate,this.pathTemplate||(this.pathTemplate=I.pathTemplate=f("M #= d.firstOuterPoint.x # #= d.firstOuterPoint.y # A#= d.r # #= d.r # 0 #= d.isReflexAngle ? '1' : '0' #,1 #= d.secondOuterPoint.x # #= d.secondOuterPoint.y # L #= d.cx # #= d.cy # z"))},options:{fill:"",fillOpacity:1,strokeOpacity:1,strokeLineCap:"square"},clone:function(){return new I(d({},this.config),d({},this.options))}}),B=c.extend({init:function(t,e,i){c.fn.init.call(this,i),this.c=t,this.r=e,this.template=B.template,this.template||(this.template=B.template=f("<circle #= d.renderId() # #= d.renderDataAttributes() #cx='#= d.c.x #' cy='#= d.c.y #' r='#= d.r #' #= d.renderAttr(\"stroke\", d.options.stroke) # #= d.renderAttr(\"stroke-width\", d.options.strokeWidth) #fill-opacity='#= d.options.fillOpacity #' stroke-opacity='#= d.options.strokeOpacity #'  fill='#= d.options.fill || \"none\" #'></circle>"))},options:{fill:"",fillOpacity:1,strokeOpacity:1},refresh:function(e){t(e).attr({r:i.max(0,this.r),"fill-opacity":this.options.fillOpacity})},clone:function(){return new B(d({},this.c),this.r,d({},this.options))}}),R=T.extend({init:function(t){c.fn.init.call(this,t),this.template=R.template,this.template||(this.template=R.template=f("<g#= d.renderId() ##= d.renderDataAttributes() ##= d.renderClipPath() #>#= d.renderContent() #</g>"))}}),O=c.extend({init:function(t){c.fn.init.call(this,t),this.template=O.template,this.template||(this.template=O.template=f('<clipPath#= d.renderAttr("id", d.options.id) #>#= d.renderContent() #</clipPath>'))},refresh:function(){var t=e.getElementById(this.options.id);t&&(t.innerHTML=this.renderContent())}}),N=c.extend({init:function(t){c.fn.init.call(this,t)},options:{id:""},renderStops:function(){var t,e=this.options.stops,i=this.stopTemplate,n=e.length,r="";for(t=0;t<n;t++)r+=i(e[t]);return r}}),V=N.extend({init:function(t){N.fn.init.call(this,t),this.template=V.template,this.stopTemplate=V.stopTemplate,this.template||(this.template=V.template=f("<linearGradient id='#= d.options.id #' gradientTransform='rotate(#= d.options.rotation #)'> #= d.renderStops() #</linearGradient>"),this.stopTemplate=V.stopTemplate=f("<stop offset='#= Math.round(d.offset * 100) #%' style='stop-color:#= d.color #;stop-opacity:#= d.opacity #' />"))},options:{rotation:0}}),F=N.extend({init:function(t){N.fn.init.call(this,t),this.template=F.template,this.stopTemplate=F.stopTemplate,this.template||(this.template=F.template=f("<radialGradient id='#= d.options.id #' cx='#= d.options.cx #' cy='#= d.options.cy #' fx='#= d.options.cx #' fy='#= d.options.cy #' r='#= d.options.r #' gradientUnits='userSpaceOnUse'>#= d.renderStops() #</radialGradient>"),this.stopTemplate=F.stopTemplate=f("<stop offset='#= Math.round(d.offset * 100) #%' style='stop-color:#= d.color #;stop-opacity:#= d.opacity #' />"))}}),H=c.extend({init:function(t){c.fn.init.call(this,t),this.template=H.template,this.stopTemplate=H.stopTemplate,this.template||(this.template=H.template=f("<radialGradient id='#= d.options.id #' cx='#= d.options.cx #' cy='#= d.options.cy #' fx='#= d.options.cx #' fy='#= d.options.cy #' r='#= d.options.r #' gradientUnits='userSpaceOnUse'>#= d.renderStops() #</radialGradient>"),this.stopTemplate=H.stopTemplate=f("<stop offset='#= d.offset #%' style='stop-color:#= d.color #;stop-opacity:#= d.opacity #' />"))},options:{id:""},renderStops:function(){var t,e,i=this.options,n=i.stops,r=this.stopTemplate,o=i.ir/i.r*100,s=n.length,a="";for((e=d({},n[0])).offset=o,a+=r(e),t=1;t<s;t++)(e=d({},n[t])).offset=e.offset*(100-o)+o,a+=r(e);return a}});function U(t){this.view=t}function $(t){this.view=t}U.prototype={decorate:function(t){var e,i,n=this.view,r=t.options,o=r.id;return r.overlay?(t.options.id=m(),e=n.createGroup(),i=t.clone(),e.children.push(t,i),i.options.id=o,i.options.fill=r.overlay,e):t}},$.prototype={decorate:function(t){var e=t.options;return e.fill=this.getPaint(e.fill),t},getPaint:function(t){var e,i,n,r=this.view,o=r.definitions;return t&&u(t.gradient)?(e=r.buildGradient(t))?((n=o[i=e.id])||(n=r.createGradient(e),o[i]=n),"url("+Q()+"#"+n.options.id+")"):"none":t}};var j=r.extend({init:function(t){this.view=t},decorate:function(t){var e,i,n=this.view,r=this.clipId,o=n.options,l=t.options.animation,h=n.definitions;return l&&l.type===v&&o.transitions&&(r||(this.clipId=r=m()),(e=h[r])||(e=new O({id:r}),i=n.createRect(new s(0,0,o.width,o.height),{id:m()}),e.children.push(i),h[r]=e,n.animations.push(new a(i,{size:o.width}))),t.options.clipPathId=r),t}});function G(t){return i.round(t)+.5}var W,q,Y=function(t,e){t.innerHTML=e};function Q(){var t=e.getElementsByTagName("base")[0],i="",r=e.location.href,o=r.indexOf("#");return t&&!n.support.browser.msie&&(-1!==o&&(r=r.substring(0,o)),i=r),i}W=e.createElement("div"),q="undefined"!=typeof DOMParser,W.innerHTML="<svg xmlns='http://www.w3.org/2000/svg'></svg>",q&&W.firstChild.namespaceURI!=C&&(Y=function(t,i){var n=(new DOMParser).parseFromString(i,"text/xml"),r=e.adoptNode(n.documentElement);t.innerHTML="",t.appendChild(r)}),o.supportsSVG()&&o.ViewFactory.current.register("svg",S,10),d(o,{renderSVG:Y,SVGCircle:B,SVGClipAnimationDecorator:j,SVGClipPath:O,SVGGradientDecorator:$,SVGGroup:R,SVGLine:z,SVGMultiLine:E,SVGLinearGradient:V,SVGOverlayDecorator:U,SVGPath:A,SVGRadialGradient:F,SVGDonutGradient:H,SVGRing:M,SVGSector:I,SVGText:P,SVGView:S})}(window.kendo.jQuery),function(t,e){var i=t.each,n=t.isArray,r=t.map,o=Math,s=t.extend,a=t.proxy,l=window.kendo,h=l.Class,c=l.Observable,d=l.data.DataSource,u=l.ui.Widget,p=l.deepExtend,f=l.getter,g=l.isFunction,m=l.template,v=l.dataviz,y=v.Axis,b=v.AxisLabel,w=v.BarAnimation,x=v.Box2D,_=v.BoxElement,k=v.ChartElement,C=v.Color,S=v.CurveProcessor,T=v.ElementAnimation,P=v.Note,A=v.LogarithmicAxis,D=v.NumericAxis,z=v.Point2D,E=v.RootElement,M=v.Ring,L=v.ShapeElement,I=v.Text,B=v.TextBox,R=v.Title,O=v.animationDecorator,N=v.append,V=v.autoFormat,F=v.defined,H=v.dateComparer,U=v.getElement,$=v.getSpacing,j=v.inArray,G=v.interpolateValue,W=v.last,q=v.limitValue,Y=v.mwDelta,Q=v.round,X=v.renderTemplate,Z=v.uniqueId,K=v.valueOrDefault,J=".kendoChart",tt="area",et=v.AXIS_LABEL_CLICK,it="bar",nt="#000",rt="bottom",ot="boxPlot",st="bubble",at="bullet",lt="candlestick",ht="category",ct="center",dt="change",ut="circle",pt=v.CLIP,ft="color",gt="column",mt=v.COORD_PRECISION,vt="k-",yt="dataBound",bt="date",wt="days",xt=v.DEFAULT_FONT,_t=v.DEFAULT_HEIGHT,kt=v.DEFAULT_PRECISION,Ct=v.DEFAULT_WIDTH,St="donut",Tt="dragEnd",Pt="dragStart",At="fadeIn",Dt="hours",zt=v.INITIAL_ANIMATION_DURATION,Et="insideEnd",Mt="interpolate",Lt="left",It="legendItemClick",Bt="legendItemHover",Rt="line",Ot=5,Nt=Number.MAX_VALUE,Vt=-Number.MAX_VALUE,Ft="minutes",Ht="months",Ut="mousemove.tracking",$t="mousemove"+J,jt="DOMMouseScroll"+J+" mousewheel"+J,Gt=v.NOTE_CLICK,Wt=v.NOTE_HOVER,qt="noteText",Yt="object",Qt="ohlc",Xt="outsideEnd",Zt="pie",Kt="plotAreaClick",Jt="right",te="scatter",ee="scatterLine",ie="seconds",ne="selectStart",re="select",oe="selectEnd",se="seriesClick",ae="seriesHover",le="smooth",he="string",ce=1e3,de=60*ce,ue=60*de,pe=24*ue,fe=7*pe,ge=31*pe,me=365*pe,ve={years:me,months:ge,weeks:fe,days:pe,hours:ue,minutes:de,seconds:ce},ye="top",be="tooltip-inverse",we="value",xe="verticalArea",_e="verticalBullet",ke="verticalLine",Ce="weeks",Se="#fff",Te="x",Pe="y",Ae="years",De=[ie,Ft,Dt,wt,Ce,Ht,Ae],ze=[it,gt,Qt,lt,ot,at],Ee={seconds:"HH:mm:ss",minutes:"HH:mm",hours:"HH:mm",days:"M/d",weeks:"M/d",months:"MMM 'yy",years:"yyyy"},Me=u.extend({init:function(t,e){var i,n=this;l.destroy(t),u.fn.init.call(n,t),i=p({},n.options,e),n.element.addClass(vt+i.name.toLowerCase()).css("position","relative"),n._originalOptions=p({},i),n._initTheme(i),n.bind(n.events,n.options),n.wrapper=n.element,n._initDataSource(e),l.notify(n,v.ui)},_initTheme:function(n){var r,o,s,a=v.ui.themes||{},l=n.theme,h=a[l]||a[l.toLowerCase()],c=l&&h?h.chart:{},d=[],u=n.series||[];for(r=0;r<u.length;r++)d.push(t.extend({},u[r]));n.series=d,o=n,i([ht,we,Te,Pe],function(){o[s=this+"Axes"]&&(o[this+"Axis"]=o[s],delete o[s])}),this._applyDefaults(n,c),null===n.seriesColors&&(n.seriesColors=e),this.options=p({},c,n),Ji(this.options)},_initDataSource:function(t){var e=this,i=(t||{}).dataSource;e._dataChangeHandler=a(e._onDataChanged,e),e.dataSource=d.create(i).bind(dt,e._dataChangeHandler),e._bindCategories(),e._redraw(),e._attachEvents(),i&&e.options.autoBind&&e.dataSource.fetch()},setDataSource:function(t){this.dataSource.unbind(dt,this._dataChangeHandler),this.dataSource=this._originalOptions.dataSource=t,t.bind(dt,this._dataChangeHandler),this.options.autoBind&&t.fetch()},events:[yt,se,ae,et,It,Bt,Kt,Pt,"drag",Tt,"zoomStart","zoom","zoomEnd",ne,re,oe,Gt,Wt],items:function(){return t()},options:{name:"Chart",renderAs:"",theme:"default",chartArea:{},legend:{visible:!0,labels:{}},categoryAxis:{},autoBind:!0,seriesDefaults:{type:gt,data:[],highlight:{visible:!0},labels:{},negativeValues:{visible:!1}},series:[],seriesColors:null,tooltip:{visible:!1},transitions:!0,valueAxis:{},plotArea:{},title:{},xAxis:{},yAxis:{},panes:[{}]},refresh:function(){this._applyDefaults(this.options),Ji(this.options),this._bindSeries(),this._bindCategories(),this.trigger(yt),this._redraw()},getSize:function(){return l.dimensions(this.element)},_resize:function(){var t=this.options.transitions;this.options.transitions=!1,this._redraw(),this.options.transitions=t},redraw:function(t){var e,i;this._applyDefaults(this.options),Ji(this.options),t?(e=(i=this._model._plotArea).findPane(t),i.redraw(e)):this._redraw()},_redraw:function(){var t,e=this,i=e._getModel();e._destroyView(),e._model=i,e._plotArea=i._plotArea,(t=e._view=v.ViewFactory.current.create(i.options,e.options.renderAs))&&(t.load(i),e._viewElement=e._renderView(t),e._tooltip=e._createTooltip(),e._highlight=new Vi(t),e._setupSelection())},_sharedTooltip:function(){var t=this.options;return this._plotArea instanceof Di&&t.tooltip.shared},_createTooltip:function(){var t=this.options,e=this.element;return this._sharedTooltip()?new Ui(e,this._plotArea,t.tooltip):new Hi(e,t.tooltip)},_renderView:function(){return this._view.renderTo(this.element[0])},_applyDefaults:function(e,n){var r,o;r=e,o=(n||{}).axisDefaults||{},i([ht,we,Te,Pe],function(){var e=this+"Axis",i=[].concat(r[e]),n=r.axisDefaults||{};i=t.map(i,function(t){var i=(t||{}).color,r=p({},o,o[e],n,n[e],{line:{color:i},labels:{color:i},title:{color:i}},t);return delete r[e],r}),r[e]=i.length>1?i:i[0]}),function(t,e){var i,n,r=t.series,o=r.length,s=t.seriesDefaults,a=p({},t.seriesDefaults),l=e?p({},e.seriesDefaults):{},h=p({},l);for(Ki(a),Ki(h),i=0;i<o;i++){n=r[i].type||t.seriesDefaults.type;var c=p({data:[]},h,l[n],{tooltip:t.tooltip},a,s[n]);r[i]._defaults=c,r[i]=p({},c,r[i])}}(e,n)},_getModel:function(){var t,e=this.options,i=new E(this._modelOptions());return i.parent=this,R.buildTitle(e.title,i),t=i._plotArea=this._createPlotArea(),e.legend.visible&&i.append(new Oe(t.options.legend)),i.append(t),i.reflow(),i},_modelOptions:function(){var t=this.options,e=this.element,i=o.floor(e.height()),n=o.floor(e.width());return p({width:n||Ct,height:i||_t,transitions:t.transitions},t.chartArea)},_createPlotArea:function(){var t=this.options;return Le.current.create(t.series,t)},_setupSelection:function(){var t,e,i,n,r,o,s=this,l=s._plotArea.axes,h=s._selections=[];for(s._selectStartHandler||(s._selectStartHandler=a(s._selectStart,s),s._selectHandler=a(s._select,s),s._selectEndHandler=a(s._selectEnd,s)),e=0;e<l.length;e++)o=(i=l[e]).options,i instanceof Ne&&o.select&&!o.vertical&&(n=0,r=o.categories.length-1,i instanceof Ve&&(n=o.categories[n],r=o.categories[r]),o.justified||(i instanceof Ve?r=an(r,1,o.baseUnit,o.weekStartDay):r++),(t=new qi(s,i,p({min:n,max:r},o.select))).bind(ne,s._selectStartHandler),t.bind(re,s._selectHandler),t.bind(oe,s._selectEndHandler),h.push(t))},_selectStart:function(t){return this.trigger(ne,t)},_select:function(t){return this.trigger(re,t)},_selectEnd:function(t){return this.trigger(oe,t)},_attachEvents:function(){var t=this,e=t.element;e.on("mouseover.kendoChart",a(t._mouseover,t)),e.on("mouseout.kendoChart",a(t._mouseout,t)),e.on(jt,a(t._mousewheel,t)),e.on("mouseleave.kendoChart",a(t._mouseleave,t)),t._shouldAttachMouseMove()&&e.on($t,a(t._mousemove,t)),l.UserEvents&&(t._userEvents=new l.UserEvents(e,{global:!0,filter:":not(.k-selector)",multiTouch:!1,tap:a(t._tap,t),start:a(t._start,t),move:a(t._move,t),end:a(t._end,t)}))},_mouseout:function(t){var e=this._model.modelMap[t.target.getAttribute("data-model-id")];e&&e.leave&&e.leave(this,t)},_start:function(t){var e=this._events;F(e[Pt]||e.drag||e[Tt])&&this._startNavigation(t,Pt)},_move:function(t){var e,i,n,r,o,s=this._navState,a={};if(s){for(t.preventDefault(),e=s.axes,i=0;i<e.length;i++)(n=e[i]).options.name&&0!==(o=(r=n.options.vertical?t.y:t.x).startLocation-r.location)&&(a[n.options.name]=n.translateRange(o));s.axisRanges=a,this.trigger("drag",{axisRanges:a,originalEvent:t})}},_end:function(t){this._endNavigation(t,Tt)},_mousewheel:function(t){var e,i,n,r,o,s=this,a=t.originalEvent,l=Y(t),h=s._navState,c={};if(h||s._startNavigation(a,"zoomStart")||(h=s._navState),h){for(e=h.totalDelta||l,h.totalDelta=e+l,i=s._navState.axes,n=0;n<i.length;n++)(o=(r=i[n]).options.name)&&(c[o]=r.scaleRange(-e));s.trigger("zoom",{delta:l,axisRanges:c,originalEvent:t}),s._mwTimeout&&clearTimeout(s._mwTimeout),s._mwTimeout=setTimeout(function(){s._endNavigation(t,"zoomEnd")},150)}},_startNavigation:function(t,e){var i,n=this._eventCoordinates(t),r=this._model._plotArea,o=r.findPointPane(n),s=r.axes.slice(0),a=!1;if(o){for(i=0;i<s.length;i++)if(s[i].box.containsPoint(n)){a=!0;break}!a&&r.backgroundBox().containsPoint(n)&&(this.trigger(e,{axisRanges:function(t){var e,i,n,r={};for(e=0;e<t.length;e++)i=t[e],(n=i.options.name)&&(r[n]=i.range());return r}(s),originalEvent:t})?this._userEvents.cancel():(this._suppressHover=!0,this._unsetActivePoint(),this._navState={pane:o,axes:s}))}},_endNavigation:function(t,e){this._navState&&(this.trigger(e,{axisRanges:this._navState.axisRanges,originalEvent:t}),this._suppressHover=!1,this._navState=null)},_getChartElement:function(e){var i,n=t(e.target).data("modelId"),r=this._model;return n&&(i=r.modelMap[n]),i&&i.aliasFor&&(i=i.aliasFor(e,this._eventCoordinates(e))),i},_eventCoordinates:function(t){var e=F((t.x||{}).client),i=e?t.x.client:t.clientX,n=e?t.y.client:t.clientY;return this._toModelCoordinates(i,n)},_toModelCoordinates:function(e,i){var n=this.element,r=n.offset(),o=parseInt(n.css("paddingLeft"),10),s=parseInt(n.css("paddingTop"),10),a=t(window);return new z(e-r.left-o+a.scrollLeft(),i-r.top-s+a.scrollTop())},_tap:function(t){var e=this._getChartElement(t);this._activePoint===e?this._click(t):(this._startHover(t)||this._unsetActivePoint(),this._click(t))},_click:function(t){for(var e=this._getChartElement(t);e;)e.click&&e.click(this,t),e=e.parent},_startHover:function(t){var e,i=this._tooltip,n=this._highlight,r=this.options.tooltip;if(!this._suppressHover&&n&&!j(t.target,n._overlays)&&!this._sharedTooltip())return(e=this._getChartElement(t))&&e.hover&&(e.hover(this,t),!t.isDefaultPrevented())?(this._activePoint=e,(r=p({},r,e.options.tooltip)).visible&&i.show(e),n.show(e),!0):void 0},_mouseover:function(e){this._startHover(e)&&t(document).on(Ut,a(this._mouseMoveTracking,this))},_mouseMoveTracking:function(e){var i,n=this.options,r=this._tooltip,o=this._highlight,s=this._eventCoordinates(e),a=this._activePoint;this._plotArea.box.containsPoint(s)?a&&a.series&&j(a.series.type,[Rt,tt])&&(i=a.parent.getNearestPoint(s.x,s.y,a.seriesIx))&&i!=a&&(i.hover(this,e),this._activePoint=i,p({},n.tooltip,a.options.tooltip).visible&&r.show(i),o.show(i)):(t(document).off(Ut),this._unsetActivePoint())},_mousemove:function(t){var e=new Date,i=this._mousemove.timestamp;if(!i||e-i>20){var n=this._eventCoordinates(t);this._trackCrosshairs(n),this._sharedTooltip()&&this._trackSharedTooltip(n),this._mousemove.timestamp=e}},_trackCrosshairs:function(t){var e,i,n=this._plotArea.crosshairs;for(e=0;e<n.length;e++)(i=n[e]).box.containsPoint(t)?i.showAt(t):i.hide()},_trackSharedTooltip:function(t){var e,i,n=this.options,r=this._plotArea,o=r.categoryAxis,s=this._tooltip,a=n.tooltip,l=this._highlight;r.box.containsPoint(t)&&(e=o.pointCategoryIndex(t))!==this._tooltipCategoryIx&&((i=r.pointsByCategoryIndex(e)).length>0?(a.visible&&s.showAt(i,t),l.show(i)):s.hide(),this._tooltipCategoryIx=e)},_mouseleave:function(t){var e,i=this._plotArea.crosshairs,n=this._tooltip,r=this._highlight;if(t.relatedTarget){for(e=0;e<i.length;e++)i[e].hide();setTimeout(a(n.hide,n),100),r.hide(),this._tooltipCategoryIx=null}},_unsetActivePoint:function(){var t=this._tooltip,e=this._highlight;this._activePoint=null,t&&t.hide(),e&&e.hide()},_onDataChanged:function(){var t,e,i=this,n=i.options,r=i._sourceSeries||n.series,o=r.length,s=i.dataSource.view(),a=(i.dataSource.group()||[]).length>0,l=[];for(t=0;t<o;t++)e=r[t],i._isBindable(e)&&a?N(l,Cn(e,s)):l.push(e||[]);i._sourceSeries=r,n.series=l,Ji(i.options),i._bindSeries(),i._bindCategories(),i.trigger(yt),i._redraw()},_bindSeries:function(){var t,e,i,n,r=this.dataSource.view(),o=this.options.series,s=o.length;for(t=0;t<s;t++)e=o[t],this._isBindable(e)&&(i=e._groupIx,n=F(i)?(r[i]||{}).items:r,!1!==e.autoBind&&(e.data=n))},_bindCategories:function(){var t,e,i=this.dataSource.view()||[],n=(this.dataSource.group()||[]).length>0,r=i,o=this.options,s=[].concat(o.categoryAxis);for(n&&i.length&&(r=i[0].items),t=0;t<s.length;t++)!1!==(e=s[t]).autoBind&&this._bindCategoryAxis(e,r,t)},_bindCategoryAxis:function(t,e,i){var n,r,o,s=(e||[]).length;if(t.field)for(t.categories=[],n=0;n<s;n++)o=e[n],r=nn(t.field,o),0===n?(t.categories=[r],t.dataItems=[o]):(t.categories.push(r),t.dataItems.push(o));else this._bindCategoryAxisFromSeries(t,i)},_bindCategoryAxisFromSeries:function(t,e){var i,n,r,o,s,a,l,h,c,d,u,p=[],f=this.options.series,g=f.length,m={};for(n=0;n<g;n++)if(o=(r=f[n]).categoryAxis===t.name||!r.categoryAxis&&0===e,l=(s=r.data).length,r.categoryField&&o&&l>0)for(d=(u=Dn(t,nn(r.categoryField,s[0])))?rn:nn,a=0;a<l;a++)h=s[a],c=d(r.categoryField,h),!u&&m[c]||(p.push([c,h]),u||(m[c]=!0));p.length>0&&(u&&(p=An(p,function(t,e){return H(t[0],e[0])})),i=zn(p),t.categories=i[0],t.dataItems=i[1])},_isBindable:function(t){var e,i,n=Ie.current.valueFields(t),r=!0;for(i=0;i<n.length;i++)if((e=n[i])===we?e="field":e+="Field",!F(t[e])){r=!1;break}return r},_legendItemClick:function(t,e){var i,n,r,o=this._plotArea,s=(o.srcSeries||o.series)[t],a=(this._sourceSeries||[])[t]||s;j(s.type,[Zt,St,"funnel"])?(r=a.data[e],n=!!F(r.visible)&&!r.visible,r.visible=n):(n=!a.visible,a.visible=n,s.visible=n),this.options.transitions&&(this.options.transitions=!1,i=!0),this.redraw(),i&&(this.options.transitions=!0)},_legendItemHover:function(t,e){var i,n,r=this._plotArea,o=this._highlight,s=(r.srcSeries||r.series)[t];i=j(s.type,[Zt,St,"funnel"])?e:t,n=r.pointsBySeriesIndex(i),o.show(n)},_shouldAttachMouseMove:function(){return this._plotArea.crosshairs.length||this._tooltip&&this._sharedTooltip()},setOptions:function(e){var i=this;i._originalOptions=p(i._originalOptions,e),i.options=p({},i._originalOptions),i._sourceSeries=null,t(document).off($t),u.fn._setEvents.call(i,e),i._initTheme(i.options),e.dataSource&&i.setDataSource(d.create(e.dataSource)),i._shouldAttachMouseMove()&&i.element.on($t,a(i._mousemove,i)),i.options.dataSource?i.refresh():i.redraw()},destroy:function(){var e=this.dataSource;this.element.off(J),e.unbind(dt,this._dataChangeHandler),t(document).off(Ut),this._userEvents&&this._userEvents.destroy(),this._destroyView(),u.fn.destroy.call(this)},_destroyView:function(){var t=this._model,e=this._view,i=this._selections;if(t&&(t.destroy(),this._model=null),e&&(e.destroy(),this._view=null),i)for(;i.length>0;)i.shift().destroy()}});p(Me.fn,v.ExportMixin);var Le=h.extend({init:function(){this._registry=[]},register:function(t,e){this._registry.push({type:t,seriesTypes:e})},create:function(t,e){var i,n,r,o=this._registry,s=o[0];for(i=0;i<o.length;i++)if((r=Sn(t,(n=o[i]).seriesTypes)).length>0){s=n;break}return new s.type(r,e)}});Le.current=new Le;var Ie=h.extend({init:function(){this._valueFields={},this._otherFields={},this._nullValue={},this._undefinedValue={}},register:function(t,i,n){var r,o;for(i=i||[we],r=0;r<t.length;r++)o=t[r],this._valueFields[o]=i,this._otherFields[o]=n,this._nullValue[o]=this._makeValue(i,null),this._undefinedValue[o]=this._makeValue(i,e)},canonicalFields:function(t){return this.valueFields(t).concat(this.otherFields(t))},valueFields:function(t){return this._valueFields[t.type]||[we]},otherFields:function(t){return this._otherFields[t.type]||[we]},bindPoint:function(t,e){var i,r,o,s,a,l=this,h=t.data[e],c={valueFields:{value:h}},d=l.valueFields(t),u=l._otherFields[t.type];return null===h?a=l._nullValue[t.type]:F(h)?n(h)?(r=h.slice(d.length),a=l._bindFromArray(h,d),i=l._bindFromArray(r,u)):typeof h===Yt&&(o=l.sourceFields(t,d),s=l.sourceFields(t,u),a=l._bindFromObject(h,d,o),i=l._bindFromObject(h,u,s)):a=l._undefinedValue[t.type],F(a)&&(1===d.length?c.valueFields.value=a[d[0]]:c.valueFields=a),c.fields=i||{},c},_makeValue:function(t,e){var i,n={},r=t.length;for(i=0;i<r;i++)n[t[i]]=e;return n},_bindFromArray:function(t,e){var i,n,r={};if(e)for(n=o.min(e.length,t.length),i=0;i<n;i++)r[e[i]]=t[i];return r},_bindFromObject:function(t,e,i){var n,r,o,s,a={};if(e)for(r=e.length,i=i||e,n=0;n<r;n++)o=e[n],s=i[n],a[o]=nn(s,t);return a},sourceFields:function(t,e){var i,n,r,o,s;if(e)for(n=e.length,o=[],i=0;i<n;i++)s=(r=e[i])===we?"field":r+"Field",o.push(t[s]||r);return o}});Ie.current=new Ie;var Be=k.extend({init:function(t,e){k.fn.init.call(this,e),this.append(new B(t,this.options))},options:{position:Xt,margin:$(3),padding:$(4),color:nt,background:"",border:{width:1,color:""},aboveAxis:!0,vertical:!1,animation:{type:At,delay:zt},zIndex:1},reflow:function(t){var e=this.options,i=e.vertical,n=e.aboveAxis,r=this.children[0],o=r.box,s=r.options.padding;r.options.align=i?ct:Lt,r.options.vAlign=i?ye:ct,e.position==Et?i?(r.options.vAlign=ye,!n&&o.height()<t.height()&&(r.options.vAlign=rt)):r.options.align=n?Jt:Lt:e.position==ct?(r.options.vAlign=ct,r.options.align=ct):"insideBase"==e.position?i?r.options.vAlign=n?rt:ye:r.options.align=n?Lt:Jt:e.position==Xt&&(i?t=n?new x(t.x1,t.y1-o.height(),t.x2,t.y1):new x(t.x1,t.y2,t.x2,t.y2+o.height()):(r.options.align=ct,t=n?new x(t.x2+o.width(),t.y1,t.x2,t.y2):new x(t.x1-o.width(),t.y1,t.x1,t.y2))),i?s.left=s.right=(t.width()-r.contentBox.width())/2:s.top=s.bottom=(t.height()-r.contentBox.height())/2,r.reflow(t)},alignToClipBox:function(t){var e,i=this.options.vertical?Pe:Te,n=i+"1",r=i+"2",o=this.children[0],s=o.paddingBox;s[r]<t[n]?e=t[n]-s[r]:t[r]<s[n]&&(e=t[r]-s[n]),F(e)&&(s[n]+=e,s[r]+=e,o.reflow(s))},getViewElements:function(t){var e=[];return!1!==this.options.visible&&(e=k.fn.getViewElements.call(this,t)),e}}),Re=I.extend({init:function(t,e){this.item=t,I.fn.init.call(this,t.text,p({id:Z(),cursor:{style:"pointer"}},e)),this.enableDiscovery()},click:function(t,e){var i=this.eventArgs(e);t.trigger(It,i)||(e.preventDefault(),t._legendItemClick(i.seriesIndex,i.pointIndex))},hover:function(t,e){var i=this.eventArgs(e);t.trigger(Bt,i)||(e.preventDefault(),t._legendItemHover(i.seriesIndex,i.pointIndex))},leave:function(t){t._unsetActivePoint()},eventArgs:function(e){var i=this.item;return{element:t(e.target),text:i.text,series:i.series,seriesIndex:i.series.index,pointIndex:i.pointIndex}}}),Oe=k.extend({init:function(t){k.fn.init.call(this,t),this.createLabels()},options:{position:Jt,items:[],labels:{},offsetX:0,offsetY:0,margin:$(10),padding:$(5),border:{color:nt,width:0},background:"",zIndex:1,markers:{border:{width:1}}},createLabels:function(){var t,e,i=this.options.items,n=i.length;for(t=0;t<n;t++)e=i[t],this.append(new Re(e,p({},this.options.labels,{color:e.labelColor})))},reflow:function(t){var e=this.options;0!==this.children.length?"custom"!=e.position?e.position==ye||e.position==rt?this.horizontalLayout(t):this.verticalLayout(t):this.customLayout(t):this.box=t.clone()},getViewElements:function(t){var e,i,n,r,o,s,a,l=this.children,h=this.options,c=h.items,d=c.length,u=this.markerSize(),p=t.createGroup({zIndex:h.zIndex}),f=h.border||{};for(N(p.children,k.fn.getViewElements.call(this,t)),a=0;a<d;a++)r=c[a].markerColor,o=l[a],i=x(),s=o.box,n=n?n.wrap(s):s.clone(),i.x1=s.x1-2*u,i.x2=i.x1+u,h.position==ye||h.position==rt?i.y1=s.y1+u/2:i.y1=s.y1+(s.height()-u)/2,i.y2=i.y1+u,p.children.push(t.createRect(i,{fill:r,stroke:r,strokeWidth:h.markers.border.width,data:{modelId:o.modelId},cursor:{style:"pointer"}}));return l.length>0&&((e=$(h.padding)).left+=2*u,n.pad(e),p.children.unshift(t.createRect(n,{stroke:f.width?f.color:"",strokeWidth:f.width,dashType:f.dashType,fill:h.background}))),[p]},verticalLayout:function(t){var e,i,n,r,s=this.options,a=this.children,l=a.length,h=a[0].box.clone(),c=$(s.margin),d=2*this.markerSize();for(r=1;r<l;r++)(n=this.children[r]).box.alignTo(this.children[r-1].box,rt),h.wrap(n.box);s.position==Lt?(e=t.x1+d+c.left,i=(t.y2-h.height())/2,h.x2+=d+c.left+c.right):(e=t.x2-h.width()-c.right,i=(t.y2-h.height())/2,h.translate(e,i),h.x1-=d+c.left),this.translateChildren(e+s.offsetX,i+s.offsetY);var u=h.width();h.x1=o.max(t.x1,h.x1),h.x2=h.x1+u,h.y1=t.y1,h.y2=t.y2,this.box=h},horizontalLayout:function(t){var e,i,n,r,o=this.options,s=this.children,a=s.length,l=s[0].box.clone(),h=3*this.markerSize(),c=$(o.margin),d=s[0].box.width()+h,u=t.width(),p=0;for(r=1;r<a;r++)(d+=(n=s[r]).box.width()+h)>u-h?(n.box=x(l.x1,l.y2,l.x1+n.box.width(),l.y2+n.box.height()),d=n.box.width()+h,p=n.box.y1):(n.box.alignTo(s[r-1].box,Jt),n.box.y2=p+n.box.height(),n.box.y1=p,n.box.translate(h,0)),l.wrap(n.box);e=(t.width()-l.width()+h)/2,o.position===ye?(i=t.y1+c.top,l.y2=t.y1+l.height()+c.top+c.bottom,l.y1=t.y1):(i=t.y2-l.height()-c.bottom,l.y1=t.y2-l.height()-c.top-c.bottom,l.y2=t.y2),this.translateChildren(e+o.offsetX,i+o.offsetY),l.x1=t.x1,l.x2=t.x2,this.box=l},customLayout:function(t){var e,i=this.options,n=this.children,r=n.length,o=n[0].box.clone(),s=2*this.markerSize();for(e=1;e<r;e++)(o=this.children[e].box).alignTo(this.children[e-1].box,rt),o.wrap(o);this.translateChildren(i.offsetX+s,i.offsetY),this.box=t},markerSize:function(){var t=this.children;return t.length>0?t[0].box.height()/2:0}}),Ne=y.extend({init:function(t){y.fn.init.call(this,t),(t=this.options).categories=t.categories.slice(0),this._ticks={}},options:{type:ht,categories:[],vertical:!1,majorGridLines:{visible:!1,width:1,color:nt},zIndex:1,justified:!1},range:function(){return{min:0,max:this.options.categories.length}},getTickPositions:function(t){var e,i=this.options,n=i.vertical,r=i.justified,o=this.lineBox(),s=(n?o.height():o.width())/(t-(r?1:0)),a=n?Pe:Te,l=o[a+1],h=[];for(e=0;e<t;e++)h.push(Q(l,mt)),l+=s;return r||h.push(o[a+2]),i.reverse?h.reverse():h},getMajorTickPositions:function(){return this.getTicks().majorTicks},getMinorTickPositions:function(){return this.getTicks().minorTicks},getTicks:function(){var t,e=this._ticks,i=this.options,n=i.categories.length,r=i.reverse,o=i.justified;return t=this.lineBox().getHash()+n+r+o,e._hash!==t&&(e._hash=t,e.majorTicks=this.getTickPositions(n),e.minorTicks=this.getTickPositions(2*n)),e},getSlot:function(t,e){var i,n,r=this.options,s=this.getTicks().majorTicks,a=r.reverse,l=r.justified,h=r.vertical?Pe:Te,c=this.lineBox(),d=c[h+(a?2:1)],u=c[h+(a?1:2)],p=c.clone(),f=o.max(1,s.length-(l?0:1)),g=!F(e);return t=K(t,0),e=K(e,t),t=q(t,0,f),e=q(e-1,t,f),e=o.max(t,e),i=0===t?d:s[t]||u,n=l?i:s[e],(e-t>0||t===e)&&(n=s[e+1]||u),g&&l&&(t===f?i=n:n=i),p[h+1]=a?n:i,p[h+2]=a?i:n,p},pointCategoryIndex:function(t){var e,i,n,r,s=this.options,a=s.reverse,l=s.vertical,h=l?Pe:Te,c=this.lineBox(),d=c[h+1],u=c[h+2],p=t[h],f=this.getMajorTickPositions(),g=Nt;if(p<d||p>u)return null;for(n=0;n<f.length;n++)if(e=f[n],i=f[n+1],F(i)||(i=a?d:u),a&&(e=i,i=f[n]),s.justified){if(p===i){r=o.max(0,l?f.length-n-1:n+1);break}o.abs(p-e)<g&&(g=p-e,r=n)}else if(p>=e&&p<=i){r=n;break}return r},getCategory:function(t){var e=this.pointCategoryIndex(t);return null===e?null:this.options.categories[e]},categoryIndex:function(t){return Tn(t,this.options.categories)},translateRange:function(t){var e=this.options,i=this.lineBox(),n=e.vertical?i.height():i.width(),r=e.categories.length,o=Q(t/(n/r),kt);return{min:o,max:r+o}},scaleRange:function(t){var e=this.options.categories.length,i=t*e;return{min:-i,max:e+i}},labelsCount:function(){return this.options.categories.length},createAxisLabel:function(t,e){var i=this.options,n=i.dataItems?i.dataItems[t]:null,r=K(i.categories[t],""),o=this.axisLabelText(r,n,e);return new b(r,o,t,n,e)},shouldRenderNote:function(t){var e=this.options.categories;return e.length&&e.length>t&&t>=0}}),Ve=Ne.extend({init:function(t){var e;(t=p({roundToBaseUnit:!0},t=t||{},{categories:on(t.categories),min:on(t.min),max:on(t.max)})).categories&&t.categories.length>0?("fit"!==(e=(t.baseUnit||"").toLowerCase())&&!j(e,De)&&(t.baseUnit=this.defaultBaseUnit(t)),"fit"!==e&&"auto"!==t.baseUnitStep||this.autoBaseUnit(t),this.groupCategories(t)):t.baseUnit=t.baseUnit||wt,Ne.fn.init.call(this,t)},options:{type:bt,labels:{dateFormats:Ee},autoBaseUnitSteps:{seconds:[1,2,5,15,30],minutes:[1,2,5,15,30],hours:[1,2,3],days:[1,2,3],weeks:[1,2],months:[1,2,3,6],years:[1,2,3,5,10,25,50]},maxDateGroups:10},shouldRenderNote:function(t){var e=this.range(),i=this.options.categories||[];return H(t,e.min)>=0&&H(t,e.max)<=0&&i.length},parseNoteValue:function(t){return on(t)},translateRange:function(t){var e,i,n=this.options,r=n.baseUnit,o=n.weekStartDay,s=this.lineBox(),a=n.vertical?s.height():s.width(),l=this.range(),h=a/(l.max-l.min),c=Q(t/h,kt);return l.min&&l.max&&(e=un(n.min||l.min,c),i=un(n.max||l.max,c),l={min:an(e,0,r,o),max:an(i,0,r,o)}),l},scaleRange:function(t){var e,i=o.abs(t),n=this.range(),r=n.min,s=n.max;if(n.min&&n.max){for(;i--;)n=dn(r,s),e=o.round(.1*n),t<0?(r=un(r,e),s=un(s,-e)):(r=un(r,-e),s=un(s,e));n={min:r,max:s}}return n},defaultBaseUnit:function(t){var e,i,n,r,s,a=t.categories,l=F(a)?a.length:0,h=Nt;for(e=0;e<l;e++)(i=a[e])&&r&&(n=dn(i,r))>0&&(s=(h=o.min(h,n))>=me?Ae:h>=ge-3*pe?Ht:h>=fe?Ce:h>=pe?wt:h>=ue?Dt:h>=de?Ft:ie),r=i;return s||wt},_categoryRange:function(t){var e=t._range;return e||(e=t._range=Xi(t)),e},range:function(t){var e=(t=t||this.options).categories,i="fit"===t.baseUnit?De[0]:t.baseUnit,n=t.baseUnitStep||1,r=sn(t.min),o=sn(t.max),s=this._categoryRange(e),a=sn(s.min),l=sn(s.max);return t.roundToBaseUnit?{min:an(r||a,0,i,t.weekStartDay),max:an(o||l,n,i,t.weekStartDay)}:{min:on(r||a),max:on(o||this._srcMaxDate||l)}},autoBaseUnit:function(t){for(var e,i,n,r=this.range(p({},t,{baseUnitStep:1})),s="fit"===t.baseUnit,a=0,l=s?De[a++]:t.baseUnit,h=r.max-r.min,c=h/ve[l],d=c,u=t.maxDateGroups||this.options.maxDateGroups,f=p({},this.options.autoBaseUnitSteps,t.autoBaseUnitSteps);!i||c>u;)if(n=(e=e||f[l].slice(0)).shift())c=d/(i=n);else{if(l===W(De)){i=o.ceil(d/u);break}if(!s){c>u&&(i=o.ceil(d/u));break}l=De[a++]||W(De),d=h/ve[l],e=null}t.baseUnitStep=i,t.baseUnit=l},_timeScale:function(){var t,e=this.range(),i=this.options,n=this.lineBox(),r=i.vertical?n.height():n.width();i.justified&&!1!==i._collapse?t=on(sn(this._categoryRange(i.categories).max))-e.min:t=e.max-e.min;return r/t},getTickPositions:function(t){var e=this.options,i=e.categories,n=[];if(e.roundToBaseUnit||0===i.length)n=Ne.fn.getTickPositions.call(this,t);else{var r,o=e.vertical,s=e.reverse,a=this.lineBox(),l=i[0].getTime(),h=K(e._collapse,e.justified),c=i.length-(h?1:0),d=this._timeScale(),u=(o?-1:1)*(s?-1:1),p=1===u?2:1,f=a[(o?Pe:Te)+(1===u?1:2)],g=a[(o?Pe:Te)+p],m=f;for(r=0;r<c;r++)m=f+(i[r]-l)*d*u,n.push(Q(m,mt));W(n)!==g&&n.push(g)}return n},groupCategories:function(t){var e,i,n=t.categories,r=on(Qi(n)),o=t.baseUnit,s=t.baseUnitStep||1,a=this.range(t),l=a.max,h=[];for(e=a.min;e<l&&(h.push(e),!((i=an(e,s,o,t.weekStartDay))>r)||t.max);e=i);t.roundToBaseUnit||vn(W(h),l)||(l<i&&!1!==t._collapse?this._srcMaxDate=l:h.push(l)),t.srcCategories=n,t.categories=h},createAxisLabel:function(t,e){var i=this.options,n=i.dataItems?i.dataItems[t]:null,r=i.categories[t],o=i.baseUnit,s=!0,a=e.dateFormats[o];i.justified?s=vn(hn(r,o,i.weekStartDay),r):i.roundToBaseUnit||(s=!vn(this.range().max,r));if(s){e.format=e.format||a;var l=this.axisLabelText(r,n,e);if(l)return new b(r,l,t,n,e)}},categoryIndex:function(t,e){var i,n=this.options,r=n.categories;return t=on(t),e=e||this.range(),i=n.roundToBaseUnit&&vn(e.max,t),!t||t>e.max||t<e.min||i?-1:bn(t,r)},getSlot:function(t,e){return typeof t===Yt&&(t=this.categoryIndex(t)),typeof e===Yt&&(e=this.categoryIndex(e)),Ne.fn.getSlot.call(this,t,e)}}),Fe=y.extend({init:function(t,e,i){p(i=i||{},{min:on(i.min),max:on(i.max),axisCrossingValue:on(i.axisCrossingValues||i.axisCrossingValue)}),i=this.applyDefaults(on(t),on(e),i),y.fn.init.call(this,i)},options:{type:bt,labels:{dateFormats:Ee}},applyDefaults:function(t,i,n){var r=n.min||t,s=n.max||i,a=n.baseUnit||this.timeUnits(s-r),l=ve[a],h=hn(sn(r)-1,a)||on(s),c=cn(sn(s)+1,a),d=(n.majorUnit?n.majorUnit:e)||v.ceil(v.autoMajorUnit(h.getTime(),c.getTime()),l)/l,u=pn(h,c,a),f=v.ceil(u,d)-u,g=o.floor(f/2),m=f-g;return n.baseUnit||delete n.baseUnit,p({baseUnit:a,min:an(h,-g,a),max:an(c,m,a),minorUnit:d/5},n,{majorUnit:d})},range:function(){var t=this.options;return{min:t.min,max:t.max}},getDivisions:function(t){var e=this.options;return o.floor(pn(e.min,e.max,e.baseUnit)/t+1)},getTickPositions:function(t){var e,i=this.options,n=i.vertical,r=i.reverse,o=this.lineBox(),s=t*((n?o.height():o.width())/pn(i.min,i.max,i.baseUnit)),a=this.getDivisions(t),l=(n?-1:1)*(r?-1:1),h=o[(n?Pe:Te)+(1===l?1:2)],c=[];for(e=0;e<a;e++)c.push(Q(h,mt)),h+=s*l;return c},getMajorTickPositions:function(){return this.getTickPositions(this.options.majorUnit)},getMinorTickPositions:function(){return this.getTickPositions(this.options.minorUnit)},getSlot:function(t,e,i){return D.fn.getSlot.call(this,on(t),on(e),i)},getValue:function(t){var e=D.fn.getValue.call(this,t);return null!==e?on(e):null},labelsCount:function(){return this.getDivisions(this.options.majorUnit)},createAxisLabel:function(t,e){var i=this.options,n=t*i.majorUnit,r=an(i.min,n,i.baseUnit),o=e.dateFormats[i.baseUnit];e.format=e.format||o;var s=this.axisLabelText(r,null,e);return new b(r,s,t,null,e)},timeUnits:function(t){var e=Dt;return t>=me?e=Ae:t>=ge?e=Ht:t>=fe?e=Ce:t>=pe&&(e=wt),e},translateRange:function(t){var e=this.options,i=e.baseUnit,n=e.weekStartDay,r=this.lineBox(),o=e.vertical?r.height():r.width(),s=this.range(),a=o/(s.max-s.min),l=Q(t/a,kt),h=un(e.min,l),c=un(e.max,l);return{min:an(h,0,i,n),max:an(c,0,i,n)}},scaleRange:function(t){for(var e,i,n=this.options,r=o.abs(t),s=n.min,a=n.max;r--;)e=dn(s,a),i=o.round(.1*e),t<0?(s=un(s,i),a=un(a,-i)):(s=un(s,-i),a=un(a,i));return{min:s,max:a}},shouldRenderNote:function(t){var e=this.range();return H(t,e.min)>=0&&H(t,e.max)<=0}}),He=k.extend({options:{vertical:!1,gap:0,spacing:0},reflow:function(t){var e,i,n=this.options,r=n.vertical,o=r?Pe:Te,s=this.children,a=n.gap,l=n.spacing,h=s.length,c=h+a+l*(h-1),d=(r?t.height():t.width())/c,u=t[o+1]+d*(a/2);for(i=0;i<h;i++)(e=(s[i].box||t).clone())[o+1]=u,e[o+2]=u+d,s[i].reflow(e),i<h-1&&(u+=d*l),u+=d}}),Ue=k.extend({options:{vertical:!0},reflow:function(t){var e,i=this.options.vertical,n=i?Te:Pe,r=t[(i?Pe:Te)+2],o=this.children,s=this.box=new x,a=o.length;for(e=0;e<a;e++){var l,h=o[e];!1!==h.visible&&((l=h.box.clone()).snapTo(t,n),h.options&&(h.options.stackBase=r),0===e&&(s=this.box=l.clone()),h.reflow(l),s.wrap(l))}}}),$e={click:function(e,i){e.trigger(se,{value:this.value,percentage:this.percentage,category:this.category,series:this.series,dataItem:this.dataItem,element:t(i.target)})},hover:function(e,i){e.trigger(ae,{value:this.value,percentage:this.percentage,category:this.category,series:this.series,dataItem:this.dataItem,element:t(i.target)})}},je={createNote:function(){var t=this,e=t.options.notes,i=t.noteText||e.label.text;!1!==e.visible&&F(i)&&null!==i&&(t.note=new P(t.value,i,t.dataItem,t.category,t.series,t.options.notes),t.append(t.note))}},Ge=k.extend({init:function(t,e){k.fn.init.call(this),this.options=e,this.color=e.color||Se,this.aboveAxis=K(this.options.aboveAxis,!0),this.value=t,this.id=Z(),this.enableDiscovery()},defaults:{border:{width:1},vertical:!0,overlay:{gradient:"glass"},labels:{visible:!1},animation:{type:it},opacity:1,notes:{label:{}}},render:function(){var t=this,e=t.value,i=t.options,n=i.labels,r=null!==e?e:"";t._rendered||(t._rendered=!0,n.visible&&(n.template?r=m(n.template)({dataItem:t.dataItem,category:t.category,value:t.value,percentage:t.percentage,series:t.series}):n.format&&(r=V(n.format,r)),t.label=new Be(r,p({vertical:i.vertical,id:Z()},i.labels)),t.append(t.label)),t.createNote(),t.errorBar&&t.append(t.errorBar))},reflow:function(t){this.render();this.options;var e=this.label;if(this.box=t,e&&(e.options.aboveAxis=this.aboveAxis,e.reflow(t)),this.note&&this.note.reflow(t),this.errorBars)for(var i=0;i<this.errorBars.length;i++)this.errorBars[i].reflow(t)},getViewElements:function(t){var e=this.options,i=e.vertical,n=e.border.width>0?{stroke:this.getBorderColor(),strokeWidth:e.border.width,strokeOpacity:e.border.opacity,dashType:e.border.dashType}:{},r=this.box,o=p({id:this.id,fill:this.color,fillOpacity:e.opacity,strokeOpacity:e.opacity,vertical:e.vertical,aboveAxis:this.aboveAxis,stackBase:e.stackBase,animation:e.animation,data:{modelId:this.modelId}},n),s=[];return!1!==this.visible&&(r.width()>0&&r.height()>0&&(e.overlay&&(o.overlay=p({rotation:i?0:90},e.overlay)),s.push(t.createRect(r,o))),N(s,k.fn.getViewElements.call(this,t))),s},highlightOverlay:function(t,e){var i=this.box;return e=p({data:{modelId:this.modelId}},e),t.createRect(i,e)},getBorderColor:function(){var t=this.options,e=this.color,i=t.border,n=i.color,r=i._brightness||.8;return F(n)||(n=new C(e).brightness(r).toHex()),n},tooltipAnchor:function(t,e){var i,n,r=this.options,s=this.box,a=r.vertical,l=this.aboveAxis,h=this.owner.pane.clipBox()||s;if(a)i=s.x2+5,n=l?o.max(s.y1,h.y1):o.min(s.y2,h.y2)-e;else{var c=o.max(s.x1,h.x1),d=o.min(s.x2,h.x2);r.isStacked?(i=l?d-t:c,n=s.y1-e-5):(i=l?d+5:c-t-5,n=s.y1)}return new z(i,n)},formatValue:function(t){return this.owner.formatPointValue(this,t)}});p(Ge.fn,$e),p(Ge.fn,je);var We=function(t,e,i){this.errorValue=t,this.initGlobalRanges(t,e,i)};We.prototype=We.fn={percentRegex:/percent(?:\w*)\((\d+)\)/,standardDeviationRegex:new RegExp("^stddev(?:\\((\\d+(?:\\.\\d+)?)\\))?$"),initGlobalRanges:function(t,e,i){var n=this,r=e.data,o=n.standardDeviationRegex.exec(t);if(o){n.valueGetter=n.createValueGetter(e,i);var s=n.getAverage(r),a=n.getStandardDeviation(r,s,!1),l=o[1]?parseFloat(o[1]):1,h={low:s-a*l,high:s+a*l};n.globalRange=function(){return h}}else if(t.indexOf&&t.indexOf("stderr")>=0){n.valueGetter=n.createValueGetter(e,i);var c=n.getStandardError(r);n.globalRange=function(t){return{low:t-c,high:t+c}}}},createValueGetter:function(t,e){var i,r,o,s=t.data,a=Ie.current,l=a.valueFields(t),h=F(s[0])?s[0]:{};return n(h)?(i=e?Tn(e,l):0,o=f("["+i+"]")):wn(h)?o=f():typeof h===Yt&&(r=a.sourceFields(t,l),o=f(r[Tn(e,l)])),o},getErrorRange:function(t){var e,i,r,s=this.errorValue;if(F(s)){if(this.globalRange)return this.globalRange(t);if(n(s))e=t-s[0],i=t+s[1];else if(wn(r=parseFloat(s)))e=t-r,i=t+r;else{if(!(r=this.percentRegex.exec(s)))throw new Error("Invalid ErrorBar value: "+s);var a=t*(parseFloat(r[1])/100);e=t-o.abs(a),i=t+o.abs(a)}return{low:e,high:i}}},getStandardError:function(t){return this.getStandardDeviation(t,this.getAverage(t),!0)/o.sqrt(t.length)},getStandardDeviation:function(t,e,i){for(var n=0,r=t.length,s=i?r-1:r,a=0;a<r;a++)n+=o.pow(this.valueGetter(t[a])-e,2);return o.sqrt(n/s)},getAverage:function(t){for(var e=0,i=t.length,n=0;n<i;n++)e+=this.valueGetter(t[n]);return e/i}};var qe=k.extend({init:function(t,e){var i=this;k.fn.init.call(i,e),i.plotArea=t,i.categoryAxis=t.seriesCategoryAxis(e.series[0]),i.valueAxisRanges={},i.points=[],i.categoryPoints=[],i.seriesPoints=[],i.seriesOptions=[],i._evalSeries=[],i.render()},options:{series:[],invertAxes:!1,isStacked:!1,clip:!0},render:function(){this.traverseDataPoints(a(this.addValue,this))},pointOptions:function(t,e){var i=this.seriesOptions[e];if(!i){var n=this.pointType().fn.defaults;this.seriesOptions[e]=i=p({},n,{vertical:!this.options.invertAxes},t)}return i},plotValue:function(t){if(this.options.isStacked100&&wn(t.value)){for(var e=t.categoryIx,i=this.categoryPoints[e],n=0,r=0;r<i.length;r++){var s=i[r],a=t.series.stack,l=s.series.stack;a&&l&&a.group!==l.group||wn(s.value)&&(n+=o.abs(s.value))}return t.value/n}return t.value},plotRange:function(t,e){var i=t.categoryIx,n=this.categoryPoints[i];if(this.options.isStacked){e=e||0;for(var r=this.plotValue(t),o=r>0,s=e,a=!1,l=0;l<n.length;l++){var h=n[l];if(t===h)break;var c=t.series.stack,d=h.series.stack;if(c&&d){if(typeof c===he&&c!==d)continue;if(c.group&&c.group!==d.group)continue}var u=this.plotValue(h);(u>0&&o||u<0&&!o)&&(s+=u,r+=u,a=!0)}return a&&(s-=e),[s,r]}var p=t.series,f=this.seriesValueAxis(p),g=this.categoryAxisCrossingValue(f);return[g,t.value||g]},plotLimits:function(){for(var t=Nt,e=Vt,i=0;i<this.categoryPoints.length;i++)for(var n=this.categoryPoints[i],r=0;r<n.length;r++){var s=n[r];if(s){var a=this.plotRange(s,0)[1];F(a)&&(e=o.max(e,a),t=o.min(t,a))}}return{min:t,max:e}},computeAxisRanges:function(){var t,e;this.options.isStacked&&(t=this.options.series[0].axis,e=this.plotLimits(),this.errorTotals&&(e.min=o.min(e.min,Xi(this.errorTotals.negative).min),e.max=o.max(e.max,Qi(this.errorTotals.positive))),this.valueAxisRanges[t]=e)},addErrorBar:function(t,e,i){var n,r=t.value,o=t.series,s=t.seriesIx,a=t.options.errorBars,l=e.fields.errorLow,h=e.fields.errorHigh;wn(l)&&wn(h)?n={low:l,high:h}:a&&F(a.value)&&(this.seriesErrorRanges=this.seriesErrorRanges||[],this.seriesErrorRanges[s]=this.seriesErrorRanges[s]||new We(a.value,o,we),n=this.seriesErrorRanges[s].getErrorRange(r)),n&&(t.low=n.low,t.high=n.high,this.addPointErrorBar(t,i))},addPointErrorBar:function(t,e){var i,n,r=t.series,o=t.low,s=t.high,a=!this.options.invertAxes,l=t.options.errorBars;this.options.isStacked?(o=(n=this.stackedErrorRange(t,e)).low,s=n.high):(this.updateRange({value:o},e,r),this.updateRange({value:s},e,r)),i=new Je(o,s,a,this,r,l),t.errorBars=[i],t.append(i)},stackedErrorRange:function(t,e){t.value;var i=this.plotRange(t,0)[1]-t.value,n=t.low+i,r=t.high+i;return this.errorTotals=this.errorTotals||{positive:[],negative:[]},n<0&&(this.errorTotals.negative[e]=o.min(this.errorTotals.negative[e]||0,n)),r>0&&(this.errorTotals.positive[e]=o.max(this.errorTotals.positive[e]||0,r)),{low:n,high:r}},addValue:function(t,e,i,n,r){var o,s=this.categoryPoints[i],a=this.seriesPoints[r];s||(this.categoryPoints[i]=s=[]),a||(this.seriesPoints[r]=a=[]),this.updateRange(t.valueFields,i,n),(o=this.createPoint(t,e,i,n,r))&&(o.category=e,o.categoryIx=i,o.series=n,o.seriesIx=r,o.owner=this,o.dataItem=n.data[i],o.noteText=t.fields.noteText,this.addErrorBar(o,t,i)),this.points.push(o),a.push(o),s.push(o)},evalPointOptions:function(t,e,i,n,r,o){var s={defaults:r._defaults,excluded:["data","aggregate","_events","tooltip"]},a=this._evalSeries[o];return F(a)||(this._evalSeries[o]=a=kn(t,{},s,!0)),a&&kn(t=p({},t),{value:e,category:i,index:n,series:r,dataItem:r.data[n]},s),t},updateRange:function(t,e,i){var n=i.axis,r=t.value,s=this.valueAxisRanges[n];isFinite(r)&&null!==r&&((s=this.valueAxisRanges[n]=s||{min:Nt,max:Vt}).min=o.min(s.min,r),s.max=o.max(s.max,r))},seriesValueAxis:function(t){var e=this.plotArea,i=t.axis,n=i?e.namedValueAxes[i]:e.valueAxis;if(!n)throw new Error("Unable to locate value axis with name "+i);return n},reflow:function(t){var e,i,n,r,o=this,s=0,a=o.categorySlots=[],l=o.points,h=o.categoryAxis;o.traverseDataPoints(function(t,c,d,u){e=o.pointValue(t),i=o.seriesValueAxis(u),n=o.categoryAxisCrossingValue(i),r=l[s++];var p=a[d];if(p||(a[d]=p=o.categorySlot(h,d,i)),r){var f=o.plotRange(r,i.startValue()),g=i.getSlot(f[0],f[1],!o.options.clip);if(g){var m=o.pointSlot(p,g),v=i.options.reverse?e<n:e>=n;r.aboveAxis=v,o.options.isStacked100&&(r.percentage=o.plotValue(r)),o.reflowPoint(r,m)}else r.visible=!1}}),o.reflowCategories(a),o.box=t},categoryAxisCrossingValue:function(t){var e=this.categoryAxis,i=t.options;return[].concat(i.axisCrossingValues||i.axisCrossingValue)[e.axisIndex||0]||0},reflowPoint:function(t,e){t.reflow(e)},reflowCategories:function(){},pointSlot:function(t,e){var i=this.options.invertAxes,n=i?e:t,r=i?t:e;return new x(n.x1,r.y1,n.x2,r.y2)},categorySlot:function(t,e){return t.getSlot(e)},traverseDataPoints:function(t){var e,i,n,r,o=this.options.series,s=this.categoryAxis.options.categories||[],a=tn(o),l=o.length;for(e=0;e<a;e++)for(i=0;i<l;i++)r=o[i],n=s[e],t(Ie.current.bindPoint(r,e),n,e,r,i)},formatPointValue:function(t,e){return V(e,t.value)},pointValue:function(t){return t.valueFields.value}}),Ye=qe.extend({init:function(t,e){qe.fn.init.call(this,t,e)},render:function(){qe.fn.render.apply(this),this.computeAxisRanges()},pointType:function(){return Ge},clusterType:function(){return He},stackType:function(){return Ue},plotLimits:function(){var t=qe.fn.plotLimits.call(this);return t.min=o.min(0,t.min),t.max=o.max(0,t.max),t},createPoint:function(t,e,i,n,r){var o,s,a,h=t.valueFields.value,c=this.options,d=this.children,u=this.options.isStacked,p=this.pointType(),f=this.clusterType(),g=(s=this.pointOptions(n,r)).labels;u&&g.position==Xt&&(g.position=Et),s.isStacked=u;var m=t.fields.color||n.color;(h<0&&s.negativeColor&&(m=s.negativeColor),s=this.evalPointOptions(s,h,e,i,n,r),l.isFunction(n.color)&&(m=s.color),(o=new p(h,s)).color=m,(a=d[i])||(a=new f({vertical:c.invertAxes,gap:c.gap,spacing:c.spacing}),this.append(a)),u)?this.getStackWrap(n,a).append(o):a.append(o);return o},getStackWrap:function(t,e){var i,n=t.stack,r=n&&n.group||n,o=e.children;if(typeof r===he){for(var s=0;s<o.length;s++)if(o[s]._stackGroup===r){i=o[s];break}}else i=o[0];i||((i=new(this.stackType())({vertical:!this.options.invertAxes}))._stackGroup=r,e.append(i));return i},categorySlot:function(t,e,i){var n,r,o=this.options,s=t.getSlot(e),a=i.startValue();return o.isStacked&&(r=i.getSlot(a,a,!0),s[(n=o.invertAxes?Te:Pe)+1]=s[n+2]=r[n+1]),s},reflowCategories:function(t){var e,i=this.children,n=i.length;for(e=0;e<n;e++)i[e].reflow(t[e])}}),Qe=qe.extend({init:function(t,e){this.wrapData(e),qe.fn.init.call(this,t,e)},wrapData:function(t){var e,i,r,o=t.series;for(e=0;e<o.length;e++)(i=(r=o[e]).data)&&!n(i[0])&&typeof i[0]!=Yt&&(r.data=[i])},reflowCategories:function(t){var e,i=this.children,n=i.length;for(e=0;e<n;e++)i[e].reflow(t[e])},plotRange:function(t){var e=t.series,i=this.seriesValueAxis(e),n=this.categoryAxisCrossingValue(i);return[n,t.value.current||n]},createPoint:function(t,e,i,n,r){var o,s,a,l=t.valueFields,h=this.options,c=this.children;return s=p({vertical:!h.invertAxes,overlay:n.overlay,categoryIx:i,invertAxes:h.invertAxes},n),s=this.evalPointOptions(s,l,e,i,n,r),o=new Xe(l,s),(a=c[i])||(a=new He({vertical:h.invertAxes,gap:h.gap,spacing:h.spacing}),this.append(a)),a.append(o),o},updateRange:function(t,e,i){var n=i.axis,r=t.current,s=t.target,a=this.valueAxisRanges[n];F(r)&&!isNaN(r)&&F(s&&!isNaN(s))&&((a=this.valueAxisRanges[n]=a||{min:Nt,max:Vt}).min=o.min.apply(o,[a.min,r,s]),a.max=o.max.apply(o,[a.max,r,s]))},formatPointValue:function(t,e){return V(e,t.value.current,t.value.target)},pointValue:function(t){return t.valueFields.current}}),Xe=k.extend({init:function(t,e){k.fn.init.call(this,e),this.value=t,this.aboveAxis=this.options.aboveAxis,this.id=Z(),this.enableDiscovery()},options:{color:Se,border:{width:1},vertical:!1,animation:{type:it},opacity:1,target:{shape:"",border:{width:0,color:"green"},line:{width:2}},tooltip:{format:"Current: {0}</br>Target: {1}"}},render:function(){var t=this,e=t.options;t._rendered||(t._rendered=!0,F(t.value.target)&&(t.target=new Ze({type:e.target.shape,background:e.target.color||e.color,opacity:e.opacity,zIndex:e.zIndex,border:e.target.border,vAlign:ye,align:Jt}),t.target.id=t.id,t.append(t.target)),t.createNote())},reflow:function(t){this.render();var e,i=this.options,n=this.owner,r=this.target,o=i.invertAxes,s=n.seriesValueAxis(this.options),a=n.categorySlot(n.categoryAxis,i.categoryIx,s),l=s.getSlot(this.value.target),h=o?l:a,c=o?a:l;r&&(e=new x(h.x1,c.y1,h.x2,c.y2),r.options.height=o?e.height():i.target.line.width,r.options.width=o?i.target.line.width:e.width(),r.reflow(e)),this.note&&this.note.reflow(t),this.box=t},getViewElements:function(t){var e=this.options,i=e.vertical,n=e.border.width>0?{stroke:e.border.color||e.color,strokeWidth:e.border.width,dashType:e.border.dashType}:{},r=this.box,o=p({id:this.id,fill:e.color,fillOpacity:e.opacity,strokeOpacity:e.opacity,vertical:e.vertical,aboveAxis:this.aboveAxis,animation:e.animation,data:{modelId:this.modelId}},n),s=[];return r.width()>0&&r.height()>0&&(e.overlay&&(o.overlay=p({rotation:i?0:90},e.overlay)),s.push(t.createRect(r,o))),N(s,k.fn.getViewElements.call(this,t)),s},tooltipAnchor:function(t,e){var i,n,r=this.options,o=this.box,s=r.vertical,a=this.aboveAxis;return s?(i=o.x2+5,n=a?o.y1:o.y2-e):r.isStacked?(i=a?o.x2-t:o.x1,n=o.y1-e-5):(i=a?o.x2+5:o.x1-t-5,n=o.y1),new z(i,n)},highlightOverlay:function(t,e){var i=this.box;return e=p({data:{modelId:this.modelId}},e),t.createRect(i,e)},formatValue:function(t){return this.owner.formatPointValue(this,t)}});p(Xe.fn,$e),p(Xe.fn,je);var Ze=L.extend();p(Ze.fn,$e);var Ke=k.extend({init:function(t,e,i,n,r,o){this.low=t,this.high=e,this.isVertical=i,this.chart=n,this.series=r,k.fn.init.call(this,o)},getAxis:function(){},reflow:function(t){var e,i=this.options.endCaps,n=this.isVertical,r=this.getAxis().getSlot(this.low,this.high),o=t.center(),s=this.getCapsWidth(t,n),a=n?o.x:o.y,l=a-s,h=a+s;n?(e=[z(o.x,r.y1),z(o.x,r.y2)],i&&e.push(z(l,r.y1),z(h,r.y1),z(l,r.y2),z(h,r.y2))):(e=[z(r.x1,o.y),z(r.x2,o.y)],i&&e.push(z(r.x1,l),z(r.x1,h),z(r.x2,l),z(r.x2,h))),this.linePoints=e},getCapsWidth:function(t,e){var i=e?t.width():t.height();return o.min(o.floor(i/2),4)||4},getViewElements:function(t){var e,i=this.options,n=(this.parent,i.line),r={stroke:i.color,strokeWidth:n.width,zIndex:n.zIndex,align:!1,dashType:n.dashType},o=this.linePoints,s=[];for(e=0;e<o.length;e+=2)s.push(t.createLine(o[e].x,o[e].y,o[e+1].x,o[e+1].y,r));return s},options:{animation:{type:At,delay:zt},endCaps:!0,line:{width:1,zIndex:1}}}),Je=Ke.extend({getAxis:function(){var t=this.chart,e=this.series;return t.seriesValueAxis(e)}}),ti=Ke.extend({getAxis:function(){var t=this.chart,e=this.series,i=t.seriesAxes(e);return this.isVertical?i.y:i.x}}),ei=k.extend({init:function(t,e){k.fn.init.call(this),this.value=t,this.options=e,this.color=e.color,this.aboveAxis=K(this.options.aboveAxis,!0),this.id=Z(),this.enableDiscovery()},defaults:{vertical:!0,markers:{visible:!0,background:Se,size:8,type:ut,border:{width:2},opacity:1},labels:{visible:!1,position:"above",margin:$(3),padding:$(4),animation:{type:At,delay:zt}},notes:{label:{}},highlight:{markers:{border:{}}}},render:function(){var t=this,e=t.options,i=e.markers,n=e.labels,r=t.value;if(!t._rendered){if(t._rendered=!0,i.visible&&i.size&&(t.marker=t.createMarker(),t.marker.id=t.id,t.append(t.marker)),n.visible){if(n.template)r=m(n.template)({dataItem:t.dataItem,category:t.category,value:t.value,percentage:t.percentage,series:t.series});else n.format&&(r=t.formatValue(n.format));t.label=new B(r,p({id:Z(),align:ct,vAlign:ct,margin:{left:5,right:5}},n)),t.append(t.label)}t.createNote(),t.errorBar&&t.append(t.errorBar)}},markerBorder:function(){var t=this.options.markers,e=t.background,i=p({color:this.color},t.border);return F(i.color)||(i.color=new C(e).brightness(.8).toHex()),i},createMarker:function(){var t=this.options.markers;return new L({type:t.type,width:t.size,height:t.size,rotation:t.rotation,background:t.background,border:this.markerBorder(),opacity:t.opacity,zIndex:t.zIndex,animation:t.animation})},markerBox:function(){return this.marker||(this.marker=this.createMarker(),this.marker.reflow(this._childBox)),this.marker.box},reflow:function(t){var e,i,n=this,r=n.options.vertical,o=n.aboveAxis;if(n.render(),n.box=t,e=t.clone(),r?o?e.y1-=e.height():e.y2+=e.height():o?e.x1+=e.width():e.x2-=e.width(),n._childBox=e,n.marker&&n.marker.reflow(e),n.reflowLabel(e),n.errorBars)for(var s=0;s<n.errorBars.length;s++)n.errorBars[s].reflow(e);if(n.note){var a=n.markerBox();n.marker||(i=a.center(),a=x(i.x,i.y,i.x,i.y)),n.note.reflow(a)}},reflowLabel:function(t){var e=this.options,i=this.label,n=e.labels.position;i&&(n="below"===(n="above"===n?ye:n)?rt:n,i.reflow(t),i.box.alignTo(this.markerBox(),n),i.reflow(i.box))},highlightOverlay:function(t,e){var i=this.options.highlight.markers,n=this.markerBorder().color;return e=p({data:{modelId:this.modelId}},e,{fill:i.color||n,stroke:i.border.color,strokeWidth:i.border.width,strokeOpacity:i.border.opacity||0,fillOpacity:i.opacity||1,visible:i.visible}),(this.marker||this.createMarker()).getViewElements(t,e)[0]},tooltipAnchor:function(t,e){var i=this.markerBox(),n=(this.options,this.aboveAxis),r=i.x2+5,o=n?i.y1-e:i.y2,s=this.owner.pane.clipBox();if(!s||s.overlaps(i))return z(r,o)},formatValue:function(t){return this.owner.formatPointValue(this,t)}});p(ei.fn,$e),p(ei.fn,je);var ii=ei.extend({init:function(t,e){ei.fn.init.call(this,t,p({},this.defaults,e)),this.category=t.category},defaults:{labels:{position:ct},highlight:{opacity:1,border:{width:1,opacity:1}}},highlightOverlay:function(t){var e=this.options,i=e.highlight,n=i.border.width,r=e.markers,o=this.box.center(),s=r.size/2-n/2,a=i.border.color||new C(r.background).brightness(.8).toHex();return t.createCircle(o,s,{id:null,data:{modelId:this.modelId},stroke:a,strokeWidth:n,strokeOpacity:i.border.opacity})},toggleHighlight:function(t){var i=this.options.highlight.opacity;this.highlighted=!this.highlighted,this.marker.getViewElements(t,{fillOpacity:this.highlighted?i:e})[0].refresh(U(this.id))}}),ni=k.extend({init:function(t,e,i){k.fn.init.call(this),this.linePoints=t,this.series=e,this.seriesIx=i,this.id=Z(),this.enableDiscovery()},options:{closed:!1},points:function(t){var e,i,n=this.linePoints.concat(t||[]),r=[],o=n.length;for(e=0;e<o;e++)!1!==n[e].visible&&(i=n[e].markerBox().center(),r.push(z(i.x,i.y)));return r},getViewElements:function(t){var e=this.options,i=this.series,n=i._defaults,r=i.color;return k.fn.getViewElements.call(this,t),g(r)&&n&&(r=n.color),[t.createPolyline(this.points(),e.closed,{id:this.id,stroke:r,strokeWidth:i.width,strokeOpacity:i.opacity,fill:"",dashType:i.dashType,data:{modelId:this.modelId},zIndex:-1,align:!1})]},aliasFor:function(t,e){var i=this.seriesIx;return this.parent.getNearestPoint(e.x,e.y,i)}}),ri={renderSegments:function(){var t,e,i,n,r,o,s,a=this.options.series,l=this.seriesPoints,h=l.length,c=[];for(e=0;e<h;e++){for(t=a[e],s=(i=this.sortPoints(l[e])).length,n=[],o=0;o<s;o++)(r=i[o])?n.push(r):this.seriesMissingValues(t)!==Mt&&(n.length>1&&c.push(this.createSegment(n,t,e,W(c))),n=[]);n.length>1&&c.push(this.createSegment(n,t,e,W(c)))}this._segments=c,this.append.apply(this,c)},sortPoints:function(t){return t},seriesMissingValues:function(t){var e=t.missingValues;return!e&&this.options.isStacked?"zero":e||Mt},getNearestPoint:function(t,e,i){var n,r,s,a,l,h=this.options.invertAxes,c=h?Pe:Te,d=h?e:t,u=this.seriesPoints[i],p=Nt,f=u.length;for(l=0;l<f;l++)(n=u[l])&&F(n.value)&&null!==n.value&&!1!==n.visible&&(r=n.box,(s=o.abs(r.center()[c]-d))<p&&(a=n,p=s));return a}},oi=qe.extend({init:function(t,e){this.enableDiscovery(),qe.fn.init.call(this,t,e)},render:function(){qe.fn.render.apply(this),this.computeAxisRanges(),this.renderSegments()},pointType:function(){return ei},createPoint:function(t,e,i,n,r){var o,s,a=t.valueFields.value,h=(this.options.isStacked,this.categoryPoints[i],this.seriesMissingValues(n));t.fields;if(!F(a)||null===a){if("zero"!==h)return null;a=0}s=this.pointOptions(n,r),s=this.evalPointOptions(s,a,e,i,n,r);var c=t.fields.color||n.color;return l.isFunction(n.color)&&(c=s.color),(o=new ei(a,s)).color=c,this.append(o),o},plotRange:function(t){var e=t.categoryIx,i=this.categoryPoints[e];if(this.options.isStacked){for(var n=this.plotValue(t),r=0;r<i.length;r++){var o=i[r];if(t===o)break;n+=this.plotValue(o)}return[n,n]}var s=qe.fn.plotRange.call(this,t);return[s[1],s[1]]},createSegment:function(t,e,i){var n=e.style;return new("step"===n?si:n===le?ai:ni)(t,e,i)},getViewElements:function(t){var e=qe.fn.getViewElements.call(this,t),i=t.createGroup({animation:{type:pt}});return i.children=e,[i]}});p(oi.fn,ri);var si=ni.extend({points:function(t){var e;return e=this.calculateStepPoints(this.linePoints),t&&t.length&&(e=e.concat(this.calculateStepPoints(t).reverse())),e},calculateStepPoints:function(t){var e,i,n,r,o,s=this.parent,a=s.plotArea.seriesCategoryAxis(this.series),l=s.seriesMissingValues(this.series)===Mt,h=t.length,c=a.options.reverse,d=a.options.vertical,u=c?2:1,p=c?1:2,f=[];for(n=1;n<h;n++)e=t[n-1],i=t[n],r=e.markerBox().center(),o=i.markerBox().center(),a.options.justified?(f.push(z(r.x,r.y)),d?f.push(z(r.x,o.y)):f.push(z(o.x,r.y)),f.push(z(o.x,o.y))):d?(f.push(z(r.x,e.box[Pe+u])),f.push(z(r.x,e.box[Pe+p])),l&&f.push(z(r.x,i.box[Pe+u])),f.push(z(o.x,i.box[Pe+u])),f.push(z(o.x,i.box[Pe+p]))):(f.push(z(e.box[Te+u],r.y)),f.push(z(e.box[Te+p],r.y)),l&&f.push(z(i.box[Te+u],r.y)),f.push(z(i.box[Te+u],o.y)),f.push(z(i.box[Te+p],o.y)));return f||[]}}),ai=ni.extend({points:function(){var t=new S(this.options.closed),e=ni.fn.points.call(this);return t.process(e)},getViewElements:function(t){var e=this.series,i=e._defaults,n=e.color;return k.fn.getViewElements.call(this,t),g(n)&&i&&(n=i.color),[t.createCubicCurve(this.points(),{id:this.id,stroke:n,strokeWidth:e.width,strokeOpacity:e.opacity,fill:"",dashType:e.dashType,data:{modelId:this.modelId},zIndex:-1})]}}),li={points:function(){var t,e,i=this.parent,n=i.plotArea,r=i.options.invertAxes,o=i.seriesValueAxis(this.series).lineBox(),s=n.seriesCategoryAxis(this.series).lineBox(),a=r?s.x1:s.y1,l=this.stackPoints,h=this._linePoints(l),c=r?Te:Pe;return a=q(a,o[c+1],o[c+2]),!this.stackPoints&&h.length>1&&(t=h[0],e=W(h),r?(h.unshift(z(a,t.y)),h.push(z(a,e.y))):(h.unshift(z(t.x,a)),h.push(z(e.x,a)))),h},getViewElements:function(t){var e,i=this.series,n=i._defaults,r=i.color,o=[];return k.fn.getViewElements.call(this,t),g(r)&&n&&(r=n.color),o.push(this.createArea(t,r)),(e=this.createLine(t,r))&&o.push(e),o},createLine:function(t,e){var i,n=this.series,r=p({color:e,opacity:n.opacity},n.line);return!1!==r.visible&&r.width>0&&(i=t.createPolyline(this._linePoints(),!1,{stroke:r.color,strokeWidth:r.width,strokeOpacity:r.opacity,dashType:r.dashType,data:{modelId:this.modelId},strokeLineCap:"butt",zIndex:-1,align:!1})),i},createArea:function(t,e){var i=this.series;return t.createPolyline(this.points(),!1,{id:this.id,fillOpacity:i.opacity,fill:e,stack:i.stack,data:{modelId:this.modelId},zIndex:-1})}},hi=ni.extend({init:function(t,e,i,n){this.stackPoints=e,ni.fn.init.call(this,t,i,n)},_linePoints:ni.fn.points});p(hi.fn,li);var ci=oi.extend({createSegment:function(t,e,i,n){var r,o=this.options.isStacked,s=(e.line||{}).style;return o&&i>0&&n&&(r=n.linePoints,"step"!==s&&(r=r.slice(0).reverse())),s===le?new di(t,n,o,e,i):new("step"===s?ui:hi)(t,r,e,i)},seriesMissingValues:function(t){return t.missingValues||"zero"}}),di=hi.extend({init:function(t,e,i,n,r){this.prevSegment=e,this.isStacked=i,ni.fn.init.call(this,t,n,r)},points:function(){var t,e,i=this.prevSegment,n=new S(this.options.closed),r=ni.fn.points.call(this),o=n.process(r);return this.curvePoints=o,this.isStacked&&i?((e=o.slice(0)).push(W(o)),(t=i.curvePoints.slice(0).reverse()).unshift(t[0]),(e=e.concat(t)).push(W(t),e[0],e[0])):e=this.curvePoints,e},areaPoints:function(t){var e=this.parent,i=this.prevSegment,n=e.plotArea,r=e.options.invertAxes,o=e.seriesValueAxis(this.series).lineBox(),s=n.seriesCategoryAxis(this.series).lineBox(),a=r?s.x1:s.y1,l=r?Te:Pe,h=t[0],c=W(t),d=[];return a=q(a,o[l+1],o[l+2]),e.options.isStacked&&i||!(t.length>1)||(r?(d.push(z(a,h.y)),d.unshift(z(a,c.y))):(d.push(z(h.x,a)),d.unshift(z(c.x,a)))),d},getViewElements:function(t){var e,i=this.series,n=i._defaults,r=i.color,o=this.points(),s=this.areaPoints(o),a=[];return k.fn.getViewElements.call(this,t),g(r)&&n&&(r=n.color),e=p({color:r,opacity:i.opacity},i.line),a.push(t.createCubicCurve(o,{id:this.id,fillOpacity:i.opacity,fill:r,stack:i.stack,data:{modelId:this.modelId},zIndex:-1},s)),e.width>0&&a.push(t.createCubicCurve(this.curvePoints,{stroke:e.color,strokeWidth:e.width,strokeOpacity:e.opacity,dashType:e.dashType,data:{modelId:this.modelId},strokeLineCap:"butt",zIndex:-1})),a}}),ui=si.extend({init:function(t,e,i,n){this.stackPoints=e,si.fn.init.call(this,t,i,n)},_linePoints:si.fn.points});p(ui.fn,li);var pi=k.extend({init:function(t,e){k.fn.init.call(this,e),this.plotArea=t,this.xAxisRanges={},this.yAxisRanges={},this.points=[],this.seriesPoints=[],this.render()},options:{series:[],tooltip:{format:"{0}, {1}"},labels:{format:"{0}, {1}"},clip:!0},render:function(){this.traverseDataPoints(a(this.addValue,this))},addErrorBar:function(t,e,i){var n,r=t.value[e],o=e+"Value",s=e+"ErrorLow",a=e+"ErrorHigh",l=i.seriesIx,h=i.series,c=t.options.errorBars,d=i[s],u=i[a];wn(r)&&(wn(d)&&wn(u)&&(n={low:d,high:u}),c&&F(c[o])&&(this.seriesErrorRanges=this.seriesErrorRanges||{x:[],y:[]},this.seriesErrorRanges[e][l]=this.seriesErrorRanges[e][l]||new We(c[o],h,e),n=this.seriesErrorRanges[e][l].getErrorRange(r)),n&&this.addPointErrorBar(n,t,e))},addPointErrorBar:function(t,e,i){var n,r=t.low,o=t.high,s=e.series,a=i===Pe,l=e.options.errorBars,h={};e[i+"Low"]=r,e[i+"High"]=o,e.errorBars=e.errorBars||[],n=new ti(r,o,a,this,s,l),e.errorBars.push(n),e.append(n),h[i]=r,this.updateRange(h,s),h[i]=o,this.updateRange(h,s)},addValue:function(t,e){var i,n=t.x,r=t.y,o=e.seriesIx,a=this.seriesPoints[o];this.updateRange(t,e.series),F(n)&&null!==n&&F(r)&&null!==r&&(i=this.createPoint(t,e))&&(s(i,e),this.addErrorBar(i,Te,e),this.addErrorBar(i,Pe,e)),this.points.push(i),a.push(i)},updateRange:function(t,e){var i=t.x,n=t.y,r=e.xAxis,s=e.yAxis,a=this.xAxisRanges[r],l=this.yAxisRanges[s];F(i)&&null!==i&&(a=this.xAxisRanges[r]=a||{min:Nt,max:Vt},typeof i===he&&(i=on(i)),a.min=o.min(a.min,i),a.max=o.max(a.max,i)),F(n)&&null!==n&&(l=this.yAxisRanges[s]=l||{min:Nt,max:Vt},typeof n===he&&(n=on(n)),l.min=o.min(l.min,n),l.max=o.max(l.max,n))},evalPointOptions:function(t,e,i){var n=i.series;kn(t,{value:e,series:n,dataItem:i.dataItem},{defaults:n._defaults,excluded:["data","tooltip"]})},createPoint:function(t,e){var i,n,r=e.series;return n=p({},ei.fn.defaults,{markers:{opacity:r.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},r,{color:e.color}),this.evalPointOptions(n,t,e),i=new ei(t,n),this.append(i),i},seriesAxes:function(t){var e=this.plotArea,i=t.xAxis,n=i?e.namedXAxes[i]:e.axisX,r=t.yAxis,o=r?e.namedYAxes[r]:e.axisY;if(!n)throw new Error("Unable to locate X axis with name "+i);if(!o)throw new Error("Unable to locate Y axis with name "+r);return{x:n,y:o}},reflow:function(t){var e,i,n=this,r=n.points,o=0,s=(n.options.clip,!n.options.clip);n.traverseDataPoints(function(t,a){e=r[o++];var l,h=(i=n.seriesAxes(a.series)).x.getSlot(t.x,t.x,s),c=i.y.getSlot(t.y,t.y,s);e&&(h&&c?(l=n.pointSlot(h,c),e.reflow(l)):e.visible=!1)}),n.box=t},pointSlot:function(t,e){return new x(t.x1,e.y1,t.x2,e.y2)},getViewElements:function(t){var e=k.fn.getViewElements.call(this,t),i=t.createGroup({animation:{type:pt}});return i.children=e,[i]},traverseDataPoints:function(t){var e,i,n,r,o,s,a=this.options.series,l=this.seriesPoints;for(i=0;i<a.length;i++)for(n=a[i],l[i]||(l[i]=[]),e=0;e<n.data.length;e++)o=(r=Ie.current.bindPoint(n,e)).valueFields,s=r.fields,t(o,p({pointIx:e,series:n,seriesIx:i,dataItem:n.data[e],owner:this},s))},formatPointValue:function(t,e){var i=t.value;return V(e,i.x,i.y)}}),fi=pi.extend({render:function(){pi.fn.render.call(this),this.renderSegments()},createSegment:function(t,e,i){return new(e.style===le?ai:ni)(t,e,i)}});p(fi.fn,ri);var gi=pi.extend({options:{tooltip:{format:"{3}"},labels:{format:"{3}"}},addValue:function(t,e){var i,n=e.series,r=n.negativeValues,o=this.plotArea.options.seriesColors||[],s=!0;i=e.color||n.color||o[e.pointIx%o.length],t.size<0&&(i=r.color||i,s=r.visible),e.color=i,s&&pi.fn.addValue.call(this,t,e)},reflow:function(t){this.updateBubblesSize(t),pi.fn.reflow.call(this,t)},createPoint:function(t,e){var i,n,r=e.series,o=r.data.length,s=e.pointIx*(zt/o),a={delay:s,duration:zt-s,type:st};return n=p({tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format,animation:a}},r,{color:e.color,markers:{type:ut,background:e.color,border:r.border,opacity:r.opacity,animation:a}}),this.evalPointOptions(n,t,e),i=new ii(t,n),this.append(i),i},updateBubblesSize:function(t){var e,i,n=this.options.series,r=o.min(t.width(),t.height());for(e=0;e<n.length;e++){var s=n[e],a=this.seriesPoints[e],l=this.maxSize(a),h=(s.minSize||o.max(.02*r,10))/2,c=(s.maxSize||.2*r)/2,d=o.PI*h*h,u=(o.PI*c*c-d)/l;for(i=0;i<a.length;i++){var f=a[i],g=o.abs(f.value.size)*u,m=o.sqrt((d+g)/o.PI);p(f.options,{markers:{size:2*m,zIndex:c-m},labels:{zIndex:c-m+1}})}}},maxSize:function(t){var e,i,n=t.length,r=0;for(e=0;e<n;e++)i=t[e].value.size,r=o.max(r,o.abs(i));return r},getViewElements:function(t){var e=k.fn.getViewElements.call(this,t),i=t.createGroup();return i.children=e,[i]},formatPointValue:function(t,e){var i=t.value;return V(e,i.x,i.y,i.size,t.category)}}),mi=k.extend({init:function(t,e){k.fn.init.call(this,e),this.value=t,this.id=Z(),this.enableDiscovery()},options:{border:{_brightness:.8},line:{width:2},overlay:{gradient:"glass"},tooltip:{format:"<table style='text-align: left;'><th colspan='2'>{4:d}</th><tr><td>Open:</td><td>{0:C}</td></tr><tr><td>High:</td><td>{1:C}</td></tr><tr><td>Low:</td><td>{2:C}</td></tr><tr><td>Close:</td><td>{3:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}}},reflow:function(t){var e,i,n,r=this,o=r.options,s=r.owner,a=r.value,l=s.seriesValueAxis(o),h=[];i=l.getSlot(a.open,a.close),n=l.getSlot(a.low,a.high),i.x1=n.x1=t.x1,i.x2=n.x2=t.x2,r.realBody=i,e=n.center().x,h.push([z(e,n.y1),z(e,i.y1)]),h.push([z(e,i.y2),z(e,n.y2)]),r.lowHighLinePoints=h,r.box=n.clone().wrap(i),r._rendered||(r._rendered=!0,r.createNote()),r.reflowNote()},reflowNote:function(){this.note&&this.note.reflow(this.box)},getViewElements:function(t){var e=this.options,i=[],n=e.border.width>0?{stroke:this.getBorderColor(),strokeWidth:e.border.width,dashType:e.border.dashType,strokeOpacity:K(e.border.opacity,e.opacity)}:{},r=p({fill:e.color,fillOpacity:e.opacity},n),o={strokeOpacity:K(e.line.opacity,e.opacity),strokeWidth:e.line.width,stroke:e.line.color||e.color,dashType:e.line.dashType,strokeLineCap:"butt"};return e.overlay&&(r.overlay=p({rotation:0},e.overlay)),i.push(t.createRect(this.realBody,r)),i.push(t.createPolyline(this.lowHighLinePoints[0],!1,o)),i.push(t.createPolyline(this.lowHighLinePoints[1],!1,o)),i.push(this.createOverlayRect(t,e)),N(i,k.fn.getViewElements.call(this,t)),i},getBorderColor:function(){var t=this.options,e=t.border,i=e.color;return F(i)||(i=new C(t.color).brightness(e._brightness).toHex()),i},createOverlayRect:function(t){return t.createRect(this.box,{data:{modelId:this.modelId},fill:"#fff",id:this.id,fillOpacity:0})},highlightOverlay:function(t,e){var i=this.options,n=i.highlight,r=n.border,o=this.getBorderColor(),s=n.line,a={data:{modelId:i.modelId}},l=p({},a,e,{stroke:o,strokeOpacity:r.opacity,strokeWidth:r.width}),h=p({},a,{stroke:s.color||o,strokeWidth:s.width,strokeOpacity:s.opacity,strokeLineCap:"butt"}),c=t.createGroup();return c.children.push(t.createRect(this.realBody,l)),c.children.push(t.createPolyline(this.lowHighLinePoints[0],!1,h)),c.children.push(t.createPolyline(this.lowHighLinePoints[1],!1,h)),c},tooltipAnchor:function(){var t=this.box,e=this.owner.pane.clipBox()||t;return new z(t.x2+5,o.max(t.y1,e.y1)+5)},formatValue:function(t){return this.owner.formatPointValue(this,t)}});p(mi.fn,$e),p(mi.fn,je);var vi=qe.extend({options:{},reflowCategories:function(t){var e,i=this.children,n=i.length;for(e=0;e<n;e++)i[e].reflow(t[e])},addValue:function(t,e,i,n,r){var o,s,a=this.options,l=t.valueFields,h=this.children,c=t.fields.color||n.color,d=_n(this.splitValue(l)),u=this.categoryPoints[i],f=n.data[i];u||(this.categoryPoints[i]=u=[]),d&&(n.type==lt&&l.open>l.close&&(c=t.fields.downColor||n.downColor||n.color),o=this.createPoint(t,e,i,p({},n,{color:c}))),(s=h[i])||(s=new He({vertical:a.invertAxes,gap:a.gap,spacing:a.spacing}),this.append(s)),o&&(this.updateRange(l,i,n),s.append(o),o.categoryIx=i,o.category=e,o.series=n,o.seriesIx=r,o.owner=this,o.dataItem=f,o.noteText=t.fields.noteText),this.points.push(o),u.push(o)},pointType:function(){return mi},createPoint:function(t,e,i,n,r){var o=t.valueFields,s=p({},n);return new(this.pointType())(o,s=this.evalPointOptions(s,o,e,i,n,r))},splitValue:function(t){return[t.low,t.open,t.close,t.high]},updateRange:function(t,e,i){var n=i.axis,r=this.valueAxisRanges[n],s=this.splitValue(t);r=this.valueAxisRanges[n]=r||{min:Nt,max:Vt},r=this.valueAxisRanges[n]={min:o.min.apply(o,s.concat([r.min])),max:o.max.apply(o,s.concat([r.max]))}},formatPointValue:function(t,e){var i=t.value;return V(e,i.open,i.high,i.low,i.close,t.category)},getViewElements:function(t){var e=k.fn.getViewElements.call(this,t),i=t.createGroup({animation:{type:pt}});return i.children=e,[i]}}),yi=mi.extend({reflow:function(t){var e,i,n,r,o=this.options,s=this.owner,a=this.value,l=s.seriesValueAxis(o),h=[],c=[],d=[];r=l.getSlot(a.low,a.high),i=l.getSlot(a.open,a.open),n=l.getSlot(a.close,a.close),i.x1=n.x1=r.x1=t.x1,i.x2=n.x2=r.x2=t.x2,e=r.center().x,h.push(z(i.x1,i.y1)),h.push(z(e,i.y1)),c.push(z(e,n.y1)),c.push(z(n.x2,n.y1)),d.push(z(e,r.y1)),d.push(z(e,r.y2)),this.oPoints=h,this.cPoints=c,this.lhPoints=d,this.box=r.clone().wrap(i.clone().wrap(n)),this.reflowNote()},getViewElements:function(t){var e=this.options,i=[],n=e.line,r={strokeOpacity:n.opacity||e.opacity,zIndex:-1,strokeWidth:n.width,stroke:e.color||n.color,dashType:n.dashType};return i.push(this.createOverlayRect(t,e)),i.push(t.createPolyline(this.oPoints,!0,r)),i.push(t.createPolyline(this.cPoints,!0,r)),i.push(t.createPolyline(this.lhPoints,!0,r)),N(i,k.fn.getViewElements.call(this,t)),i},highlightOverlay:function(t){var e=this.options,i=e.highlight,n={data:{modelId:e.modelId}},r=p(n,{strokeWidth:i.line.width,strokeOpacity:i.line.opacity,stroke:i.line.color||this.color}),o=t.createGroup();return o.children.push(t.createPolyline(this.oPoints,!0,r)),o.children.push(t.createPolyline(this.cPoints,!0,r)),o.children.push(t.createPolyline(this.lhPoints,!0,r)),o}}),bi=vi.extend({pointType:function(){return yi}}),wi=vi.extend({addValue:function(t,e,i,n,r){var o,s,a=this,l=a.options,h=a.children,c=t.fields.color||n.color,d=t.valueFields,u=_n(a.splitValue(d)),f=a.categoryPoints[i],g=n.data[i];f||(a.categoryPoints[i]=f=[]),u&&(o=a.createPoint(t,e,i,p({},n,{color:c}))),(s=h[i])||(s=new He({vertical:l.invertAxes,gap:l.gap,spacing:l.spacing}),a.append(s)),o&&(a.updateRange(d,i,n),s.append(o),o.categoryIx=i,o.category=e,o.series=n,o.seriesIx=r,o.owner=a,o.dataItem=g),a.points.push(o),f.push(o)},pointType:function(){return xi},splitValue:function(t){return[t.lower,t.q1,t.median,t.q3,t.upper]},updateRange:function(t,e,i){var n=i.axis,r=this.valueAxisRanges[n],s=this.splitValue(t).concat(this.filterOutliers(t.outliers));F(t.mean)&&(s=s.concat(t.mean)),r=this.valueAxisRanges[n]=r||{min:Nt,max:Vt},r=this.valueAxisRanges[n]={min:o.min.apply(o,s.concat([r.min])),max:o.max.apply(o,s.concat([r.max]))}},formatPointValue:function(t,e){var i=t.value;return V(e,i.lower,i.q1,i.median,i.q3,i.upper,i.mean,t.category)},filterOutliers:function(t){var e,i,n=(t||[]).length,r=[];for(e=0;e<n;e++)i=t[e],F(i)&&yn(r,i);return r}}),xi=mi.extend({init:function(t,e){k.fn.init.call(this,e),this.value=t,this.id=Z(),this.enableDiscovery(),this.createNote()},options:{border:{_brightness:.8},line:{width:2},mean:{width:2,dashType:"dash"},overlay:{gradient:"glass"},tooltip:{format:"<table style='text-align: left;'><th colspan='2'>{6:d}</th><tr><td>Lower:</td><td>{0:C}</td></tr><tr><td>Q1:</td><td>{1:C}</td></tr><tr><td>Median:</td><td>{2:C}</td></tr><tr><td>Mean:</td><td>{5:C}</td></tr><tr><td>Q3:</td><td>{3:C}</td></tr><tr><td>Upper:</td><td>{4:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}},outliers:{visible:!0,size:8,type:"cross",background:Se,border:{width:2,opacity:1},opacity:0},extremes:{visible:!0,size:8,type:ut,background:Se,border:{width:2,opacity:1},opacity:0}},reflow:function(t){var e,i,n,r,o,s=this,a=s.options,l=s.owner,h=s.value,c=l.seriesValueAxis(a),d=[];n=c.getSlot(h.q1,h.q3),s.boxSlot=n,i=c.getSlot(h.lower,h.upper),r=c.getSlot(h.median),n.x1=i.x1=t.x1,n.x2=i.x2=t.x2,h.mean&&(o=c.getSlot(h.mean),s.meanPoints=[z(t.x1,o.y1),z(t.x2,o.y1)]),e=i.center().x,d.push([[z(e-5,i.y1),z(e+5,i.y1)],[z(e,i.y1),z(e,n.y1)]]),d.push([[z(e-5,i.y2),z(e+5,i.y2)],[z(e,n.y2),z(e,i.y2)]]),s.whiskerPoints=d,s.medianPoints=[z(t.x1,r.y1),z(t.x2,r.y1)],s.box=i.clone().wrap(n),s.createOutliers(),s.reflowNote()},createOutliers:function(){var t,e,i,n,r,s=this,a=s.options,l=a.markers||{},h=s.value,c=h.outliers||[],d=s.owner.seriesValueAxis(a),u=3*o.abs(h.q3-h.q1);for(s.outliers=[],r=0;r<c.length;r++)l=(n=c[r])<h.q3+u&&n>h.q1-u?a.outliers:a.extremes,t=p({},l.border),F(t.color)||(F(s.options.color)?t.color=s.options.color:t.color=new C(l.background).brightness(.8).toHex()),i=new L({id:s.id,type:l.type,width:l.size,height:l.size,rotation:l.rotation,background:l.background,border:t,opacity:l.opacity}),e=d.getSlot(n).move(s.box.center().x),s.box=s.box.wrap(e),i.reflow(e),s.outliers.push(i)},getViewElements:function(t){var e=t.createGroup({animation:{type:pt}}),i=this.render(t,this.options);return N(i,k.fn.getViewElements.call(this,t)),e.children=i,[e]},render:function(t,e){var i,n,r=this,o=[];if(o.push(r.createBody(t,e)),o.push(r.createWhisker(t,r.whiskerPoints[0],e)),o.push(r.createWhisker(t,r.whiskerPoints[1],e)),o.push(r.createMedian(t,e)),r.meanPoints&&o.push(r.createMean(t,e)),o.push(r.createOverlayRect(t,e)),r.outliers.length)for(i=0;i<r.outliers.length;i++)n=r.outliers[i],o.push(n.getViewElements(t)[0]);return o},createWhisker:function(t,e,i){return t.createMultiLine(e,{strokeOpacity:K(i.line.opacity,i.opacity),strokeWidth:i.line.width,stroke:i.line.color||i.color,dashType:i.line.dashType,strokeLineCap:"butt",data:{data:{modelId:this.modelId}}})},createMedian:function(t){var e=this.options;return t.createPolyline(this.medianPoints,!1,{strokeOpacity:K(e.median.opacity,e.opacity),strokeWidth:e.median.width,stroke:e.median.color||e.color,dashType:e.median.dashType,strokeLineCap:"butt",data:{data:{modelId:this.modelId}}})},createBody:function(t,e){var i=e.border.width>0?{stroke:e.color||this.getBorderColor(),strokeWidth:e.border.width,dashType:e.border.dashType,strokeOpacity:K(e.border.opacity,e.opacity)}:{},n=p({fill:e.color,fillOpacity:e.opacity,data:{data:{modelId:this.modelId}}},i);return e.overlay&&(n.overlay=p({rotation:0},e.overlay)),t.createRect(this.boxSlot,n)},createMean:function(t){var e=this.options;return t.createPolyline(this.meanPoints,!1,{strokeOpacity:K(e.mean.opacity,e.opacity),strokeWidth:e.mean.width,stroke:e.mean.color||e.color,dashType:e.mean.dashType,strokeLineCap:"butt",data:{data:{modelId:this.modelId}}})},highlightOverlay:function(t){var e=t.createGroup();return e.children=this.render(t,p({},this.options.highlight,{border:{color:this.getBorderColor()}})),e}});p(xi.fn,$e);var _i=k.extend({init:function(t,e,i){this.value=t,this.sector=e,k.fn.init.call(this,i),this.id=Z(),this.enableDiscovery()},options:{color:Se,overlay:{gradient:"roundedBevel"},border:{width:.5},labels:{visible:!1,distance:35,font:xt,margin:$(.5),align:ut,zIndex:1,position:Xt},animation:{type:Zt},highlight:{visible:!0,border:{width:1}},visible:!0},render:function(){var t=this,e=t.options.labels,i=t.value;t._rendered||!1===t.visible||(t._rendered=!0,e.template?i=m(e.template)({dataItem:t.dataItem,category:t.category,value:t.value,series:t.series,percentage:t.percentage}):e.format&&(i=V(e.format,i)),e.visible&&i&&(t.label=new B(i,p({},e,{id:Z(),align:ct,vAlign:"",animation:{type:At,delay:t.animationDelay}})),t.append(t.label)))},reflow:function(t){this.render(),this.box=t,this.reflowLabel()},reflowLabel:function(){var t,e,i,n,r=this.sector.clone(),s=this.options,a=this.label,l=s.labels,h=l.distance,c=r.middle();a&&(n=a.box.height(),i=a.box.width(),l.position==ct?(r.r=o.abs((r.r-n)/2)+n,t=r.point(c),a.reflow(x(t.x,t.y-n/2,t.x,t.y))):l.position==Et?(r.r=r.r-n/2,t=r.point(c),a.reflow(x(t.x,t.y-n/2,t.x,t.y))):((t=r.clone().expand(h).point(c)).x>=r.c.x?(e=t.x+i,a.orientation=Jt):(e=t.x-i,a.orientation=Lt),a.reflow(x(e,t.y-n,t.x,t.y))))},getViewElements:function(t){var e=this.sector,i=this.options,n=i.border||{},r=n.width>0?{stroke:n.color,strokeWidth:n.width,strokeOpacity:n.opacity,dashType:n.dashType}:{},o=[],s=i.overlay;return s&&(s=p({},i.overlay,{r:e.r,ir:e.ir,cx:e.c.x,cy:e.c.y,bbox:e.getBBox()})),this.value&&o.push(this.createSegment(t,e,p({id:this.id,fill:i.color,overlay:s,fillOpacity:i.opacity,strokeOpacity:i.opacity,animation:p(i.animation,{delay:this.animationDelay}),data:{modelId:this.modelId},zIndex:i.zIndex,singleSegment:1===(this.options.data||[]).length},r))),N(o,k.fn.getViewElements.call(this,t)),o},createSegment:function(t,e,i){return i.singleSegment?t.createCircle(e.c,e.r,i):t.createSector(e,i)},highlightOverlay:function(t,e){var i,n=this.options.highlight||{},r=n.border||{},o=this.id+"_outline";return e=p({},e,{id:o}),0!==this.value&&(i=this.createSegment(t,this.sector,p({},e,{fill:n.color,fillOpacity:n.opacity,strokeOpacity:r.opacity,strokeWidth:r.width,stroke:r.color,id:null,data:{modelId:this.modelId}}))),i},tooltipAnchor:function(t,e){var i=this.sector.adjacentBox(5,t,e);return new z(i.x1,i.y1)},formatValue:function(t){return this.owner.formatPointValue(this,t)}});p(_i.fn,$e);var ki=k.extend({init:function(t,e){k.fn.init.call(this,e),this.plotArea=t,this.points=[],this.legendItems=[],this.render()},options:{startAngle:90,connectors:{width:1,color:"#939393",padding:4},inactiveItems:{markers:{},labels:{}}},render:function(){this.traverseDataPoints(a(this.addValue,this))},traverseDataPoints:function(t){var e,i,n,r,o,s,a,l,h,c,d,u,p=this.options,f=this.plotArea.options.seriesColors||[],m=f.length,v=p.series,y=v.length,b=Z(),w=0;for(r=0;r<y;r++){for(s=(e=v[r]).data,a=360/(c=this.pointsTotal(e)),d=F(e.startAngle)?e.startAngle:p.startAngle,r!=y-1&&e.labels.position==Xt&&(e.labels.position=ct),u=0;u<s.length;u++)l=(i=Ie.current.bindPoint(e,u)).valueFields.value,n=i.fields,o=Q(l*a,kt),h=1!=s.length&&!!n.explode,g(e.color)||(e.color=n.color||f[u%m]),t(l,new M(null,0,0,d,o),{owner:this,category:n.category||"",index:w,series:e,seriesIx:r,dataItem:s[u],percentage:isNaN(l/c)?0:l/c,explode:h,visibleInLegend:n.visibleInLegend,visible:n.visible,overlay:{id:b+r},zIndex:y-r,animationDelay:this.animationDelay(u,r,y)}),!1!==i.fields.visible&&(d+=o),w++;w=0}},evalSegmentOptions:function(t,e,i){var n=i.series;kn(t,{value:e,series:n,dataItem:i.dataItem,category:i.category,percentage:i.percentage},{defaults:n._defaults,excluded:["data"]})},addValue:function(t,e,i){var n;if(this.createLegendItem(t,i),!1!==i.visible){var r=p({},i.series,{index:i.index});this.evalSegmentOptions(r,t,i),n=new _i(t,e,r),s(n,i),this.append(n),this.points.push(n)}},createLegendItem:function(t,e){var i,n,r,o=(this.options.legend||{}).labels||{},s=(this.options.legend||{}).inactiveItems||{};e&&!1!==e.visibleInLegend&&(i=e.category||"",(o||{}).template&&(i=m(o.template)({text:i,series:e.series,dataItem:e.dataItem,percentage:e.percentage,value:t})),!1===e.visible?(n=(s.markers||{}).color,r=(s.labels||{}).color):(n=(e.series||{}).color,r=o.color),i&&this.legendItems.push({pointIndex:e.index,text:i,series:e.series,markerColor:n,labelColor:r}))},pointsTotal:function(t){var e,i,n,r=t.data.length,o=0;for(i=0;i<r;i++)"string"==typeof(e=(n=Ie.current.bindPoint(t,i)).valueFields.value)&&(e=parseFloat(e)),e&&!1!==n.fields.visible&&(o+=e);return o},reflow:function(t){var e,i,n,r,s,a,l,h,c=this.options,d=t.clone(),u=o.min(d.width(),d.height()),p=u/2,f=u-.85*u,g=K(c.padding,f),m=x(d.x1,d.y1,d.x1+u,d.y1+u),v=m.center(),y=this.seriesConfigs||[],b=d.center(),w=this.points,_=w.length,k=c.series.length,C=[],S=[];for(g=g>p-5?p-5:g,m.translate(b.x-v.x,b.y-v.y),h=z((a=p-g)+m.x1+g,a+m.y1+g),l=0;l<_;l++)(s=(r=w[l]).sector).r=a,s.c=h,i=r.seriesIx,y.length&&(e=y[i],s.ir=e.ir,s.r=e.r),i==k-1&&r.explode&&(s.c=s.clone().radius(.15*s.r).point(s.middle())),r.reflow(m),(n=r.label)&&n.options.position===Xt&&i==k-1&&(n.orientation===Jt?S.push(n):C.push(n));C.length>0&&(C.sort(this.labelComparator(!0)),this.leftLabelsReflow(C)),S.length>0&&(S.sort(this.labelComparator(!1)),this.rightLabelsReflow(S)),this.box=m},leftLabelsReflow:function(t){var e=this.distanceBetweenLabels(t);this.distributeLabels(e,t)},rightLabelsReflow:function(t){var e=this.distanceBetweenLabels(t);this.distributeLabels(e,t)},distanceBetweenLabels:function(t){var e,i,n,r=this.points,o=r[r.length-1],s=o.sector,a=t[0].box,l=t.length-1,h=s.r+o.options.labels.distance,c=[];for(i=Q(a.y1-(s.c.y-h-a.height()-a.height()/2)),c.push(i),n=0;n<l;n++)a=t[n].box,e=t[n+1].box,i=Q(e.y1-a.y2),c.push(i);return i=Q(s.c.y+h-t[l].box.y2-t[l].box.height()/2),c.push(i),c},distributeLabels:function(t,e){var i,n,r,o,s=t.length;for(o=0;o<s;o++)for(n=r=o,i=-t[o];i>0&&(n>=0||r<s);)i=this._takeDistance(t,o,--n,i),i=this._takeDistance(t,o,++r,i);this.reflowLabels(t,e)},_takeDistance:function(t,e,i,n){if(t[i]>0){var r=o.min(t[i],n);n-=r,t[i]-=r,t[e]+=r}return n},reflowLabels:function(t,e){var i,n,r,o,s=this.points,a=s[s.length-1],l=a.sector,h=e.length,c=a.options.labels,d=c.distance,u=l.c.y-(l.r+d)-e[0].box.height();for(t[0]+=2,o=0;o<h;o++)i=e[o],u+=t[o],r=i.box,n=this.hAlignLabel(r.x2,l.clone().expand(d),u,u+r.height(),i.orientation==Jt),i.orientation==Jt?(c.align!==ut&&(n=l.r+l.c.x+d),i.reflow(x(n+r.width(),u,n,u))):(c.align!==ut&&(n=l.c.x-l.r-d),i.reflow(x(n-r.width(),u,n,u))),u+=r.height()},getViewElements:function(t){var e,i,n,r,s,a,l,h=this.options.connectors,c=this.points,d=[],u=c.length;for(l=0;l<u;l++)if(n=(i=(s=c[l]).sector).middle(),a=s.label,{seriesId:s.seriesIx},a&&(r=[],a.options.position===Xt&&0!==s.value)){var p,f,g,m=a.box,v=i.c,y=i.point(n),b=z(m.x1,m.center().y);y=i.clone().expand(h.padding).point(n),r.push(y),a.orientation==Jt?(g=Zi(v,y,b,f=z(m.x1-h.padding,m.center().y)),b=z(f.x-4,f.y),(g=g||b).x=o.min(g.x,b.x),this.pointInCircle(g,i.c,i.r+4)||g.x<i.c.x?(p=i.c.x+i.r+4,s.options.labels.align!==gt?p<b.x?r.push(z(p,y.y)):r.push(z(y.x+8,y.y)):r.push(z(p,y.y)),r.push(z(b.x,f.y))):(g.y=f.y,r.push(g))):(g=Zi(v,y,b,f=z(m.x2+h.padding,m.center().y)),b=z(f.x+4,f.y),(g=g||b).x=o.max(g.x,b.x),this.pointInCircle(g,i.c,i.r+4)||g.x>i.c.x?(p=i.c.x-i.r-4,s.options.labels.align!==gt?p>b.x?r.push(z(p,y.y)):r.push(z(y.x-8,y.y)):r.push(z(p,y.y)),r.push(z(b.x,f.y))):(g.y=f.y,r.push(g))),r.push(f),e=t.createPolyline(r,!1,{id:Z(),stroke:h.color,strokeWidth:h.width,animation:{type:At,delay:s.animationDelay},data:{modelId:s.modelId}}),d.push(e)}return N(d,k.fn.getViewElements.call(this,t)),d},labelComparator:function(t){return t=t?-1:1,function(e,i){return((e=(e.parent.sector.middle()+270)%360)-(i=(i.parent.sector.middle()+270)%360))*t}},hAlignLabel:function(t,e,i,n,r){var s=e.c.x,a=e.c.y,l=e.r,h=o.min(o.abs(a-i),o.abs(a-n));return h>l?t:s+o.sqrt(l*l-h*h)*(r?1:-1)},pointInCircle:function(t,e,i){return en(e.x-t.x)+en(e.y-t.y)<en(i)},formatPointValue:function(t,e){return V(e,t.value)},animationDelay:function(t){return 70*t}}),Ci=_i.extend({options:{overlay:{gradient:"roundedGlass"},labels:{position:ct},animation:{type:Zt}},reflowLabel:function(){var t,e,i=this.sector.clone(),n=this.options,r=this.label,o=n.labels,s=i.middle();r&&(e=r.box.height(),o.position==ct?(i.r-=(i.r-i.ir)/2,t=i.point(s),r.reflow(new x(t.x,t.y-e/2,t.x,t.y))):_i.fn.reflowLabel.call(this))},createSegment:function(t,e,i){return t.createRing(e,i)}});p(Ci.fn,$e);var Si=ki.extend({options:{startAngle:90,connectors:{width:1,color:"#939393",padding:4}},addValue:function(t,e,i){var n;if(this.createLegendItem(t,i),t&&!1!==i.visible){var r=p({},i.series);this.evalSegmentOptions(r,t,i),n=new Ci(t,e,r),s(n,i),this.append(n),this.points.push(n)}},reflow:function(t){var e,i,n,r,s,a=this.options,l=t.clone(),h=o.min(l.width(),l.height()),c=h/2,d=h-.85*h,u=K(a.padding,d),p=a.series,f=p.length,g=0,m=0,v=0;for(this.seriesConfigs=[],n=c-(u=u>c-5?c-5:u),r=0;r<f;r++)e=p[r],0===r&&F(e.holeSize)&&(i=e.holeSize,n-=e.holeSize),F(e.size)?n-=e.size:g++,F(e.margin)&&r!=f-1&&(n-=e.margin);for(F(i)||(n-=i=.75*((c-u)/(f+.75))),v=i,r=0;r<f;r++)e=p[r],s=(v+=m)+K(e.size,n/g),this.seriesConfigs.push({ir:v,r:s}),m=e.margin||0,v=s;ki.fn.reflow.call(this,t)},animationDelay:function(t,e,i){return 50*t+zt*(e+1)/(i+1)}}),Ti=_.extend({init:function(t){var e=this;_.fn.init.call(e,t),t=e.options,e.id=Z(),e.title=R.buildTitle(t.title,e,Ti.fn.options.title),e.content=new k,e.chartContainer=new Pi({},e),e.append(e.content),e.axes=[],e.charts=[]},options:{zIndex:-1,shrinkToFit:!0,title:{align:Lt},visible:!0},appendAxis:function(t){this.content.append(t),this.axes.push(t),t.pane=this},appendChart:function(t){this.chartContainer.parent!==this.content&&this.content.append(this.chartContainer),this.charts.push(t),this.chartContainer.append(t),t.pane=this},empty:function(){var t,e=this,i=e.parent;if(i){for(t=0;t<e.axes.length;t++)i.removeAxis(e.axes[t]);for(t=0;t<e.charts.length;t++)i.removeChart(e.charts[t])}e.axes=[],e.charts=[],e.content.destroy(),e.content.children=[],e.chartContainer.children=[]},reflow:function(t){W(this.children)===this.content&&this.children.pop(),_.fn.reflow.call(this,t),this.title&&(this.contentBox.y1+=this.title.box.height())},getViewElements:function(t){var e=_.fn.getViewElements.call(this,t),i=t.createGroup({id:this.id}),n=[];return i.children=e.concat(this.renderGridLines(t),this.content.getViewElements(t)),this.view=t,this.options.visible&&(n=[i]),n},renderGridLines:function(t){var e,i,n,r,o,s,a=this.axes,l=a.concat(this.parent.axes),h=[],c=[];for(i=0;i<a.length;i++)for(e=(o=(r=a[i]).options.vertical)?h:c,n=0;n<l.length;n++)0===e.length&&o!==(s=l[n]).options.vertical&&N(e,r.renderGridLines(t,s,r));return h.concat(c)},refresh:function(){var t=this.view;t&&t.replace(this)},clipBox:function(){return this.chartContainer.clipBox}}),Pi=k.extend({init:function(t,e){k.fn.init.call(this,t),this.pane=e},shouldClip:function(){var t,e=this.children,i=e.length;for(t=0;t<i;t++)if(!0===e[t].options.clip)return!0;return!1},_clipBox:function(){var t,e,i,n,r=this.pane,o=r.axes,s=o.length,a=r.box.clone();for(e=0;e<s;e++)t=(n=o[e]).options.vertical?Pe:Te,i=n.lineBox(),a[t+1]=i[t+1],a[t+2]=i[t+2];return a},getViewElements:function(t){var e,i,n=this,r=[];return n.shouldClip()&&(n.clipBox=n._clipBox(),n.clipPathId=n.clipPathId||Z(),e=n.clipPathId,t.createClipPath(n.clipPathId,n.clipBox),r=n.labelViewElements(t)),n.id=Z(),(i=t.createGroup({id:n.id,clipPathId:e})).children=i.children.concat(k.fn.getViewElements.call(n,t)),[i].concat(r)},labelViewElements:function(t){var e,i,n,r,o,s=this.children,a=[],l=this.clipBox;for(n=0;n<s.length;n++)for(o=(e=s[n].points||{}).length,r=0;r<o;r++)(i=e[r])&&i.label&&i.label.options.visible&&(i.box.overlaps(l)&&(i.label.alignToClipBox&&i.label.alignToClipBox(l),i.label.modelId=i.modelId,N(a,i.label.getViewElements(t))),i.label.options.visible=!1);return a},destroy:function(){k.fn.destroy.call(this),delete this.parent}}),Ai=k.extend({init:function(t,e){var i=this;k.fn.init.call(i,e),i.series=t,i.setSeriesIndexes(),i.charts=[],i.options.legend.items=[],i.axes=[],i.crosshairs=[],i.id=Z(),i.enableDiscovery(),i.createPanes(),i.render(),i.createCrosshairs()},options:{series:[],plotArea:{margin:{}},background:"",border:{color:nt,width:0},legend:{inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}}},setSeriesIndexes:function(){var t,e=this.series;for(t=0;t<e.length;t++)e[t].index=t},createPanes:function(){var t,e,i=[],n=this.options.panes||[],r=o.max(n.length,1);for(t=0;t<r;t++)(e=new Ti(n[t])).paneIndex=t,i.push(e),this.append(e);this.panes=i},destroy:function(){var t,e=this.charts,i=this.axes;for(t=0;t<e.length;t++)e[t].destroy();for(t=0;t<i.length;t++)i[t].destroy();k.fn.destroy.call(this)},createCrosshairs:function(t){var e,i,n,r,o;for(t=t||this.panes,e=0;e<t.length;e++)for(n=t[e],i=0;i<n.axes.length;i++)(r=n.axes[i]).options.crosshair&&r.options.crosshair.visible&&(o=new $i(r,r.options.crosshair),this.crosshairs.push(o),n.content.append(o))},removeCrosshairs:function(t){var e,i,n=this.crosshairs,r=t.axes;for(e=n.length-1;e>=0;e--)for(i=0;i<r.length;i++)if(n[e].axis===r[i]){n.splice(e,1);break}},findPane:function(t){var e,i,n=this.panes;for(e=0;e<n.length;e++)if(n[e].options.name===t){i=n[e];break}return i||n[0]},findPointPane:function(t){var e,i,n=this.panes;for(e=0;e<n.length;e++)if(n[e].box.containsPoint(t)){i=n[e];break}return i},appendAxis:function(t){this.findPane(t.options.pane).appendAxis(t),this.axes.push(t),t.plotArea=this},removeAxis:function(t){var e,i,n=[];for(e=0;e<this.axes.length;e++)t!==(i=this.axes[e])?n.push(i):i.destroy();this.axes=n},appendChart:function(t,e){this.charts.push(t),e?e.appendChart(t):this.append(t)},removeChart:function(t){var e,i,n=[];for(e=0;e<this.charts.length;e++)(i=this.charts[e])!==t?n.push(i):i.destroy();this.charts=n},addToLegend:function(t){var e,i,n,r,o,s,a,l=t.length,h=[],c=this.options.legend,d=c.labels||{},u=c.inactiveItems||{};for(e=0;e<l;e++)!1!==(i=t[e]).visibleInLegend&&(n=i.name||"",d.template&&(n=m(d.template)({text:n,series:i})),r=i.color,a=i._defaults,g(r)&&a&&(r=a.color),!1===i.visible?(o=u.labels.color,s=u.markers.color):(o=d.color,s=r),n&&h.push({text:n,labelColor:o,markerColor:s,series:i,active:i.visible}));N(c.items,h)},groupAxes:function(t){var e,i,n,r,o=[],s=[];for(n=0;n<t.length;n++)for(e=t[n].axes,r=0;r<e.length;r++)(i=e[r]).options.vertical?s.push(i):o.push(i);return{x:o,y:s,any:o.concat(s)}},groupSeriesByPane:function(){var t,e,i,n=this.series,r={};for(t=0;t<n.length;t++)i=n[t],r[e=this.seriesPaneName(i)]?r[e].push(i):r[e]=[i];return r},filterVisibleSeries:function(t){var e,i,n=[];for(e=0;e<t.length;e++)!1!==(i=t[e]).visible&&n.push(i);return n},reflow:function(t){var e=this.options.plotArea,i=this.panes,n=$(e.margin);this.box=t.clone().unpad(n),this.reflowPanes(),this.reflowAxes(i),this.reflowCharts(i)},redraw:function(t){var e;for(t=[].concat(t),e=0;e<t.length;e++)this.removeCrosshairs(t[e]),t[e].empty();for(this.render(t),this.reflowAxes(this.panes),this.reflowCharts(t),this.createCrosshairs(t),e=0;e<t.length;e++)t[e].refresh()},axisCrossingValues:function(t,e){var i,n=t.options,r=[].concat(n.axisCrossingValues||n.axisCrossingValue),o=e.length-r.length,s=r[0]||0;for(i=0;i<o;i++)r.push(s);return r},alignAxisTo:function(t,e,i,n){var r=t.getSlot(i,i,!0),o=t.options.reverse?2:1,s=e.getSlot(n,n,!0),a=e.options.reverse?2:1,l=t.box.translate(s[Te+a]-r[Te+o],s[Pe+a]-r[Pe+o]);t.pane!==e.pane&&l.translate(0,t.pane.box.y1-e.pane.box.y1),t.reflow(l)},alignAxes:function(t,e){var i,n,r,o=t[0],s=e[0],a=this.axisCrossingValues(o,e),l=this.axisCrossingValues(s,t),h={},c={},d={},u={};for(r=0;r<e.length;r++)i=(n=e[r]).pane.id,this.alignAxisTo(n,o,l[r],a[r]),n.options._overlap||(Q(n.lineBox().x1)===Q(o.lineBox().x1)&&(h[i]&&n.reflow(n.box.alignTo(h[i].box,Lt).translate(-n.options.margin,0)),h[i]=n),Q(n.lineBox().x2)===Q(o.lineBox().x2)&&(n._mirrored||(n.options.labels.mirror=!n.options.labels.mirror,n._mirrored=!0),this.alignAxisTo(n,o,l[r],a[r]),c[i]&&n.reflow(n.box.alignTo(c[i].box,Jt).translate(n.options.margin,0)),c[i]=n),0!==r&&s.pane===n.pane&&n.alignTo(s));for(r=0;r<t.length;r++)i=(n=t[r]).pane.id,this.alignAxisTo(n,s,a[r],l[r]),n.options._overlap||(Q(n.lineBox().y1)===Q(s.lineBox().y1)&&(n._mirrored||(n.options.labels.mirror=!n.options.labels.mirror,n._mirrored=!0),this.alignAxisTo(n,s,a[r],l[r]),d[i]&&n.reflow(n.box.alignTo(d[i].box,ye).translate(0,-n.options.margin)),d[i]=n),Q(n.lineBox().y2,mt)===Q(s.lineBox().y2,mt)&&(u[i]&&n.reflow(n.box.alignTo(u[i].box,rt).translate(0,n.options.margin)),u[i]=n),0!==r&&n.alignTo(o))},shrinkAxisWidth:function(t){var e,i,n,r=this.groupAxes(t).any,s=gn(r),a=0;for(e=0;e<t.length;e++)(i=t[e]).axes.length>0&&(a=o.max(a,s.width()-i.contentBox.width()));for(e=0;e<r.length;e++)(n=r[e]).options.vertical||n.reflow(n.box.shrink(a,0))},shrinkAxisHeight:function(t){var e,i,n,r,s,a;for(e=0;e<t.length;e++)for(n=(i=t[e]).axes,r=o.max(0,gn(n).height()-i.contentBox.height()),s=0;s<n.length;s++)(a=n[s]).options.vertical&&a.reflow(a.box.shrink(0,r))},fitAxes:function(t){var e,i,n,r,s,a,l,h,c=this.groupAxes(t).any,d=0;for(l=0;l<t.length;l++)if(e=(s=t[l]).axes,i=s.contentBox,e.length>0)for(n=gn(e),d=o.max(d,i.x1-n.x1),r=o.max(i.y1-n.y1,i.y2-n.y2),h=0;h<e.length;h++)(a=e[h]).reflow(a.box.translate(0,r));for(l=0;l<c.length;l++)(a=c[l]).reflow(a.box.translate(d,0))},reflowAxes:function(t){var e,i=this.groupAxes(t);for(e=0;e<t.length;e++)this.reflowPaneAxes(t[e]);i.x.length>0&&i.y.length>0&&(this.alignAxes(i.x,i.y),this.shrinkAxisWidth(t),this.alignAxes(i.x,i.y),this.shrinkAxisHeight(t),this.alignAxes(i.x,i.y),this.fitAxes(t))},reflowPaneAxes:function(t){var e,i=t.axes,n=i.length;if(n>0)for(e=0;e<n;e++)i[e].reflow(t.contentBox)},reflowCharts:function(t){var e,i,n=this.charts,r=n.length,o=this.box;for(i=0;i<r;i++)(e=n[i].pane)&&!j(e,t)||n[i].reflow(o)},reflowPanes:function(){var t,e,i,n,r,o=this.box,s=this.panes,a=s.length,l=o.height(),h=0,c=o.y1;for(t=0;t<a;t++)n=(e=s[t]).options.height,e.options.width=o.width(),e.options.height?(n.indexOf&&n.indexOf("%")&&(r=parseInt(n,10)/100,e.options.height=r*o.height()),e.reflow(o.clone()),l-=e.options.height):h++;for(t=0;t<a;t++)(e=s[t]).options.height||(e.options.height=l/h);for(t=0;t<a;t++)e=s[t],i=o.clone().move(o.x1,c),e.reflow(i),0,c+=e.options.height},backgroundBox:function(){var t,e,i,n,r,o,s=this.axes,a=s.length;for(i=0;i<a;i++)for(r=s[i],n=0;n<a;n++)o=s[n],r.options.vertical!==o.options.vertical&&(t=r.lineBox().clone().wrap(o.lineBox()),e=e?e.wrap(t):t);return e||this.box},getViewElements:function(t){var e=this.backgroundBox(),i=this.options.plotArea,n=i.border||{},r=k.fn.getViewElements.call(this,t);return N(r,[t.createRect(e,{fill:i.background,fillOpacity:i.opacity,zIndex:-2,strokeWidth:.1}),t.createRect(e,{id:this.id,data:{modelId:this.modelId},stroke:n.width?n.color:"",strokeWidth:n.width,fill:Se,fillOpacity:0,zIndex:-1,dashType:n.dashType})]),r},pointsByCategoryIndex:function(t){var e,i,n,r,o=this.charts,s=[];if(null!==t)for(e=0;e<o.length;e++)if("_navigator"!==o[e].pane.options.name&&(n=o[e].categoryPoints[t])&&n.length)for(i=0;i<n.length;i++)(r=n[i])&&F(r.value)&&null!==r.value&&s.push(r);return s},pointsBySeriesIndex:function(t){var e,i,n,r,o=this.charts,s=[];for(n=0;n<o.length;n++)for(e=o[n].points,r=0;r<e.length;r++)(i=e[r])&&i.options.index===t&&s.push(i);return s},paneByPoint:function(t){var e,i,n=this.panes;for(i=0;i<n.length;i++)if((e=n[i]).box.containsPoint(t))return e}}),Di=Ai.extend({init:function(t,e){if(this.namedCategoryAxes={},this.namedValueAxes={},this.valueAxisRangeTracker=new zi,t.length>0){this.invertAxes=j(t[0].type,[it,at,ke,xe]);for(var i=0;i<t.length;i++){var n=t[i].stack;if(n&&"100%"===n.type){this.stack100=!0;break}}}Ai.fn.init.call(this,t,e)},options:{categoryAxis:{categories:[]},valueAxis:{}},render:function(t){t=t||this.panes,this.createCategoryAxes(t),this.aggregateCategories(t),this.createCharts(t),this.createValueAxes(t)},removeAxis:function(t){var e=t.options.name;Ai.fn.removeAxis.call(this,t),t instanceof Ne?delete this.namedCategoryAxes[e]:(this.valueAxisRangeTracker.reset(e),delete this.namedValueAxes[e]),t===this.categoryAxis&&delete this.categoryAxis,t===this.valueAxis&&delete this.valueAxis},createCharts:function(t){var e,i,n,r,o=this,s=o.groupSeriesByPane();for(e=0;e<t.length;e++)n=s[(i=t[e]).options.name||"default"]||[],o.addToLegend(n),(r=o.filterVisibleSeries(n))&&(o.createAreaChart(Sn(r,[tt,xe]),i),o.createBarChart(Sn(r,[gt,it]),i),o.createBulletChart(Sn(r,[at,_e]),i),o.createLineChart(Sn(r,[Rt,ke]),i),o.createCandlestickChart(Sn(r,lt),i),o.createBoxPlotChart(Sn(r,ot),i),o.createOHLCChart(Sn(r,Qt),i))},aggregateCategories:function(t){var e,i,n,r,o=this.srcSeries||this.series,s=[];for(e=0;e<o.length;e++)i=o[e],n=this.seriesCategoryAxis(i),r=this.findPane(n.options.pane),(mn(n.options.type,bt)||i.categoryField)&&j(r,t)&&(i=this.aggregateSeries(i,n)),s.push(i);this.srcSeries=o,this.series=s},aggregateSeries:function(t,e){var i,n,r,o,s,a=e.options,l=mn(e.options.type,bt),h=a.categories,c=a.srcCategories||h,d=t.data,u=[],f=e.range(),g=p({},t),m=p({},t),v=nn;for(g.data=o=[],l&&(v=rn),i=0;i<d.length;i++)n=t.categoryField?v(t.categoryField,d[i]):c[i],(r=e.categoryIndex(n,f))>-1&&(u[r]=u[r]||[],u[r].push(i));for(s=new Yi(m,Ie.current,Wi.current),i=0;i<h.length;i++)o[i]=s.aggregatePoints(u[i],h[i]);return g},appendChart:function(t,e){for(var i=t.options.series,n=this.seriesCategoryAxis(i[0]).options.categories,r=o.max(0,tn(i)-n.length);r--;)n.push("");this.valueAxisRangeTracker.update(t.valueAxisRanges),Ai.fn.appendChart.call(this,t,e)},seriesPaneName:function(e){var i=this.options,n=e.axis,r=[].concat(i.valueAxis),o=t.grep(r,function(t){return t.name===n})[0],s=((i.panes||[{}])[0]||{}).name||"default";return(o||{}).pane||s},seriesCategoryAxis:function(t){var e=t.categoryAxis,i=e?this.namedCategoryAxes[e]:this.categoryAxis;if(!i)throw new Error("Unable to locate category axis with name "+e);return i},stackableChartOptions:function(t,e){var i,n=t.stack,r=n&&"100%"===n.type;return F(e.options.clip)?i=e.options.clip:r&&(i=!1),{isStacked:n,isStacked100:r,clip:i}},createBarChart:function(t,e){if(0!==t.length){var i=t[0],n=new Ye(this,s({series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing},this.stackableChartOptions(i,e)));this.appendChart(n,e)}},createBulletChart:function(t,e){if(0!==t.length){var i=t[0],n=new Qe(this,{series:t,invertAxes:this.invertAxes,gap:i.gap,spacing:i.spacing,clip:e.options.clip});this.appendChart(n,e)}},createLineChart:function(t,e){if(0!==t.length){var i=t[0],n=new oi(this,s({invertAxes:this.invertAxes,series:t},this.stackableChartOptions(i,e)));this.appendChart(n,e)}},createAreaChart:function(t,e){if(0!==t.length){var i=t[0],n=new ci(this,s({invertAxes:this.invertAxes,series:t},this.stackableChartOptions(i,e)));this.appendChart(n,e)}},createOHLCChart:function(t,e){if(0!==t.length){var i=t[0],n=new bi(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(n,e)}},createCandlestickChart:function(t,e){if(0!==t.length){var i=t[0],n=new vi(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(n,e)}},createBoxPlotChart:function(t,e){if(0!==t.length){var i=t[0],n=new wi(this,{invertAxes:this.invertAxes,gap:i.gap,series:t,spacing:i.spacing,clip:e.options.clip});this.appendChart(n,e)}},axisRequiresRounding:function(t,e){var i,n,r=Sn(this.series,ze);for(i=0;i<r.length;i++)if((n=r[i].categoryAxis||"")===t||!n&&0===e)return!0},createCategoryAxes:function(t){var e,i,n,r,o,s,a,l=this,h=l.invertAxes,c=[].concat(l.options.categoryAxis),d=[];for(e=0;e<c.length;e++)if(i=c[e],n=l.findPane(i.pane),j(n,t)){if(o=i.name,r=i.categories||[],i.type||"",i=p({vertical:h,axisCrossingValue:h?Nt:0},i),F(i.justified)||(i.justified=l.isJustified()),l.axisRequiresRounding(o,e)&&(i.justified=!1,i.roundToBaseUnit=!0),s=Dn(i,r[0])?new Ve(i):new Ne(i),o){if(l.namedCategoryAxes[o])throw new Error("Category axis with name "+o+" is already defined");l.namedCategoryAxes[o]=s}s.axisIndex=e,d.push(s),l.appendAxis(s)}a=l.categoryAxis||d[0],l.categoryAxis=a,h?l.axisY=a:l.axisX=a},isJustified:function(){var t,e,i=this.series;for(t=0;t<i.length;t++)if(e=i[t],!j(e.type,[tt,xe]))return!1;return!0},createValueAxes:function(t){var e,i,n,r,s,a,l,h,c=this,d=c.valueAxisRangeTracker,u=d.query(),f=[].concat(c.options.valueAxis),g=c.invertAxes,m={vertical:!g},v=[];for(c.stack100&&(m.roundToMajorUnit=!1,m.labels={format:"P0"}),h=0;h<f.length;h++)if(e=f[h],i=c.findPane(e.pane),j(i,t)){if(l=e.name,a=mn(e.type,"log")?{min:.1,max:1}:{min:0,max:1},s=d.query(l)||u||a,0===h&&s&&u&&(s.min=o.min(s.min,u.min),s.max=o.max(s.max,u.max)),n=new(mn(e.type,"log")?A:D)(s.min,s.max,p({},m,e)),l){if(c.namedValueAxes[l])throw new Error("Value axis with name "+l+" is already defined");c.namedValueAxes[l]=n}n.axisIndex=h,v.push(n),c.appendAxis(n)}r=c.valueAxis||v[0],c.valueAxis=r,g?c.axisX=r:c.axisY=r},click:function(e,i){var n,r,o,s=e._eventCoordinates(i),a=new z(s.x,s.y),l=this.pointPane(a),h=[],c=[];if(l){for(n=l.axes,r=0;r<n.length;r++)(o=n[r]).getValue?yn(c,o.getValue(a)):yn(h,o.getCategory(a));0===h.length&&yn(h,this.categoryAxis.getCategory(a)),h.length>0&&c.length>0&&e.trigger(Kt,{element:t(i.target),category:fn(h),value:fn(c)})}},pointPane:function(t){var e,i,n=this.panes;for(i=0;i<n.length;i++)if((e=n[i]).contentBox.containsPoint(t))return e}}),zi=h.extend({init:function(){this.axisRanges={}},update:function(t){var e,i,n,r=this.axisRanges;for(n in t)e=r[n],i=t[n],r[n]=e=e||{min:Nt,max:Vt},e.min=o.min(e.min,i.min),e.max=o.max(e.max,i.max)},reset:function(t){this.axisRanges[t]=e},query:function(t){return this.axisRanges[t]}}),Ei=Ai.extend({init:function(t,e){this.namedXAxes={},this.namedYAxes={},this.xAxisRangeTracker=new zi,this.yAxisRangeTracker=new zi,Ai.fn.init.call(this,t,e)},options:{xAxis:{},yAxis:{}},render:function(t){var e,i,n,r,o=this.groupSeriesByPane();for(t=t||this.panes,e=0;e<t.length;e++)n=o[(i=t[e]).options.name||"default"]||[],this.addToLegend(n),(r=this.filterVisibleSeries(n))&&(this.createScatterChart(Sn(r,te),i),this.createScatterLineChart(Sn(r,ee),i),this.createBubbleChart(Sn(r,st),i));this.createAxes(t)},appendChart:function(t,e){this.xAxisRangeTracker.update(t.xAxisRanges),this.yAxisRangeTracker.update(t.yAxisRanges),Ai.fn.appendChart.call(this,t,e)},removeAxis:function(t){var e=t.options.name;Ai.fn.removeAxis.call(this,t),t.options.vertical?(this.yAxisRangeTracker.reset(e),delete this.namedYAxes[e]):(this.xAxisRangeTracker.reset(e),delete this.namedXAxes[e]),t===this.axisX&&delete this.axisX,t===this.axisY&&delete this.axisY},seriesPaneName:function(e){var i=this.options,n=e.xAxis,r=[].concat(i.xAxis),o=t.grep(r,function(t){return t.name===n})[0],s=e.yAxis,a=[].concat(i.yAxis),l=t.grep(a,function(t){return t.name===s})[0],h=(i.panes||[{}])[0].name||"default";return(o||{}).pane||(l||{}).pane||h},createScatterChart:function(t,e){t.length>0&&this.appendChart(new pi(this,{series:t,clip:e.options.clip}),e)},createScatterLineChart:function(t,e){t.length>0&&this.appendChart(new fi(this,{series:t,clip:e.options.clip}),e)},createBubbleChart:function(t,e){t.length>0&&this.appendChart(new gi(this,{series:t,clip:e.options.clip}),e)},createXYAxis:function(t,e,i){var n,r,s,a,l,h,c,d=t.name,u=e?this.namedYAxes:this.namedXAxes,f=e?this.yAxisRangeTracker:this.xAxisRangeTracker,g=p({},t,{vertical:e}),m=mn(g.type,"log"),v=f.query(),y=m?{min:.1,max:1}:{min:0,max:1},b=f.query(d)||v||y,w=this.series,x=[g.min,g.max];for(r=0;r<w.length;r++)if((a=(s=w[r])[e?"yAxis":"xAxis"])==g.name||0===i&&!a){l=Ie.current.bindPoint(s,0).valueFields,x.push(l[e?"y":"x"]);break}for(0===i&&v&&(b.min=o.min(b.min,v.min),b.max=o.max(b.max,v.max)),c=0;c<x.length;c++)if(x[c]instanceof Date){h=!0;break}if(n=new(mn(g.type,bt)||!g.type&&h?Fe:m?A:D)(b.min,b.max,g),d){if(u[d])throw new Error((e?"Y":"X")+" axis with name "+d+" is already defined");u[d]=n}return this.appendAxis(n),n},createAxes:function(t){var e,n=this,r=n.options,o=[].concat(r.xAxis),s=[],a=[].concat(r.yAxis),l=[];i(o,function(i){e=n.findPane(this.pane),j(e,t)&&s.push(n.createXYAxis(this,!1,i))}),i(a,function(i){e=n.findPane(this.pane),j(e,t)&&l.push(n.createXYAxis(this,!0,i))}),n.axisX=n.axisX||s[0],n.axisY=n.axisY||l[0]},click:function(e,i){var n,r,o,s,a=e._eventCoordinates(i),l=new z(a.x,a.y),h=this.axes,c=h.length,d=[],u=[];for(n=0;n<c;n++)s=(r=h[n]).options.vertical?u:d,null!==(o=r.getValue(l))&&s.push(o);d.length>0&&u.length>0&&e.trigger(Kt,{element:t(i.target),x:fn(d),y:fn(u)})}}),Mi=Ai.extend({render:function(){var t=this.series;this.createPieChart(t)},createPieChart:function(t){var e=t[0],i=new ki(this,{series:t,padding:e.padding,startAngle:e.startAngle,connectors:e.connectors,legend:this.options.legend});this.appendChart(i)},appendChart:function(t,e){Ai.fn.appendChart.call(this,t,e),N(this.options.legend.items,t.legendItems)}}),Li=Mi.extend({render:function(){var t=this.series;this.createDonutChart(t)},createDonutChart:function(t){var e=t[0],i=new Si(this,{series:t,padding:e.padding,connectors:e.connectors,legend:this.options.legend});this.appendChart(i)}}),Ii=T.extend({options:{easing:"easeOutElastic",duration:zt},setup:function(){var t,e=this.element,i=e.config;e.options.singleSegment&&(i=e),this.endRadius=i.r,t=this.startRadius=i.ir||0,i.r=t},step:function(t){var e=this.element,i=this.endRadius,n=e.config,r=this.startRadius;e.options.singleSegment&&(n=e),n.r=G(r,i,t)}}),Bi=T.extend({options:{easing:"easeOutElastic",duration:zt},setup:function(){var t=this.element;t.endRadius=t.radius,t.radius=0},step:function(t){var e=this.element,i=e.endRadius;e.radius=G(0,i,t)}}),Ri=O(it,w),Oi=O(Zt,Ii),Ni=O(st,Bi),Vi=h.extend({init:function(t){this.view=t,this._overlays=[]},options:{fill:Se,fillOpacity:.2,stroke:Se,strokeWidth:1,strokeOpacity:.2},show:function(t){var e,i,n,r,o,s=this.view,a=this._overlays;for(this.hide(),this._points=t=[].concat(t),n=0;n<t.length;n++)(r=t[n])&&((o=r.options)&&!(o.highlight||{}).visible||(r.highlightOverlay&&!1!==r.visible&&(e=r.highlightOverlay(s,this.options))&&(i=s.renderElement(e),a.push(i),r.owner&&r.owner.pane&&U(r.owner.pane.chartContainer.id).appendChild(i)),r.toggleHighlight&&r.toggleHighlight(s)))},hide:function(){for(var t,e,i,n,r=this._points,o=this._overlays;o.length;)(t=this._overlays.pop()).parentNode.removeChild(t);if(r)for(e=0;e<r.length;e++)(i=r[e])&&((n=i.options)&&!(n.highlight||{}).visible||i.toggleHighlight&&i.toggleHighlight(this.view));this._points=[]}}),Fi=h.extend({init:function(e,i){var n=this;n.options=p({},n.options,i),n.chartElement=e,n.template=Fi.template,n.template||(n.template=Fi.template=X("<div class='k-tooltip' style='display:none; position: absolute; font: #= d.font #;border: #= d.border.width #px solid;opacity: #= d.opacity #; filter: alpha(opacity=#= d.opacity * 100 #);'></div>")),n.element=t(n.template(n.options)).appendTo(e),n._moveProxy=a(n.move,n)},options:{border:{width:1},opacity:1,animation:{duration:150}},move:function(){var t,e=this.options,i=this.element;this.anchor&&(t=this._offset(),this.visible||i.css({top:t.top,left:t.left}),i.stop(!0,!0).show().animate({left:t.left,top:t.top},e.animation.duration),this.visible=!0)},_padding:function(){if(!this._chartPadding){var t=this.chartElement;this._chartPadding={top:parseInt(t.css("paddingTop"),10),left:parseInt(t.css("paddingLeft"),10)}}return this._chartPadding},_offset:function(){var e=this.element,i=this.anchor,n=this._padding(),r=Q(i.y+n.top),o=Q(i.x+n.left),s=l.support.zoomLevel(),a=t(window),h=window.pageYOffset||document.documentElement.scrollTop||0,c=window.pageXOffset||document.documentElement.scrollLeft||0;return h=this.chartElement.offset().top-h,c=this.chartElement.offset().left-c,{top:r+=this._currentPosition(r+h,e.outerHeight(),a.outerHeight()/s),left:o+=this._currentPosition(o+c,e.outerWidth(),a.outerWidth()/s)}},setStyle:function(t){this.element.css({backgroundColor:t.background,borderColor:t.border.color||t.background,font:t.font,color:t.color,opacity:t.opacity,borderWidth:t.border.width})},show:function(){this.showTimeout=setTimeout(this._moveProxy,100)},hide:function(){clearTimeout(this.showTimeout),this.visible&&(this._hideElement(),this.point=null,this.visible=!1,this.index=null)},_hideElement:function(){this.element.fadeOut()},_pointContent:function(t){var e,i=p({},this.options,t.options.tooltip);return F(t.value)&&(e=t.value.toString()),i.template?e=m(i.template)({value:t.value,category:t.category,series:t.series,dataItem:t.dataItem,percentage:t.percentage,low:t.low,high:t.high,xLow:t.xLow,xHigh:t.xHigh,yLow:t.yLow,yHigh:t.yHigh}):i.format&&(e=t.formatValue(i.format)),e},_pointAnchor:function(t){var e=this.element;return t.tooltipAnchor(e.outerWidth(),e.outerHeight())},_currentPosition:function(t,e,i){var n=0;return t+e>i&&(n=i-(t+e)),t<0&&(n=-t),n},_updateStyle:function(t,e){if(F(t.background)||(t.background=e.color||e.options.color),!F(t.color)){var i=this.element;new C(t.background).percBrightness()>180?i.addClass(vt+be):i.removeClass(vt+be)}}}),Hi=Fi.extend({show:function(t){var e=this,i=p({},e.options,t.options.tooltip);t&&(e.element.html(e._pointContent(t)),e.anchor=e._pointAnchor(t),e.anchor?(e._updateStyle(i,t),e.setStyle(i),Fi.fn.show.call(e,t)):e.hide())}}),Ui=Fi.extend({init:function(t,e,i){Fi.fn.init.call(this,t,i),this.plotArea=e},options:{sharedTemplate:"<table><th colspan='2'>#= categoryText #</th># for(var i = 0; i < points.length; i++) { ## var point = points[i]; #<tr># if(point.series.name) { # <td> #= point.series.name #:</td># } #<td>#= content(point) #</td></tr># } #</table>",categoryFormat:"{0:d}"},showAt:function(e,i){var n,r=this.options,o=this.plotArea.categoryAxis,s=o.pointCategoryIndex(i),a=o.getCategory(i),l=o.getSlot(s);(e=t.grep(e,function(t){var e=t.series.tooltip;return!(e&&!1===e.visible)})).length>0&&(n=this._content(e,a),this.element.html(n),this.anchor=this._slotAnchor(i,l),this._updateStyle(r,e[0]),this.setStyle(r),Fi.fn.show.call(this))},_slotAnchor:function(t,e){var i=this.plotArea.categoryAxis,n=t.y-this.element.height()/2;return i.options.vertical?z(t.x,n):z(e.center().x,n)},_content:function(t,e){return l.template(this.options.sharedTemplate)({points:t,category:e,categoryText:V(this.options.categoryFormat,e),content:this._pointContent})}}),$i=k.extend({init:function(t,e){k.fn.init.call(this,e),this.axis=t,this.id||(this.id=Z()),this._visible=!1,this.stickyMode=t instanceof Ne,this.enableDiscovery()},options:{color:nt,width:1,zIndex:-1,tooltip:{visible:!1}},repaint:function(){this.element;this.getViewElements(this._view),this.element.refresh(U(this.id))},showAt:function(t){var e=this;e._visible=!0,e.point=t,e.repaint(),e.options.tooltip.visible&&(e.tooltip||(e.tooltip=new ji(e,p({},e.options.tooltip,{stickyMode:e.stickyMode}))),e.tooltip.showAt(t))},hide:function(){this._visible&&(this._visible=!1,this.repaint(),this.tooltip&&this.tooltip.hide())},linePoints:function(){var t,e,i,n=this.axis,r=n.options.vertical,o=this.getBox(),s=this.point,a=r?Pe:Te;return e=z(o.x1,o.y1),i=r?z(o.x2,o.y1):z(o.x1,o.y2),s&&(this.stickyMode?(t=n.getSlot(n.pointCategoryIndex(s)),e[a]=i[a]=t.center()[a]):e[a]=i[a]=s[a]),this.box=o,[e,i]},getBox:function(){var t,e,i,n=this.axis,r=n.pane.axes,o=r.length,s=n.options.vertical,a=n.lineBox().clone(),l=s?Te:Pe;for(i=0;i<o;i++)(e=r[i]).options.vertical!=s&&(t?t.wrap(e.lineBox()):t=e.lineBox().clone());return a[l+1]=t[l+1],a[l+2]=t[l+2],a},getViewElements:function(t){var e=this,i=e.options,n=[];return e.points=e.linePoints(),e.element=t.createPolyline(e.points,!1,{data:{modelId:e.modelId},id:e.id,stroke:i.color,strokeWidth:i.width,strokeOpacity:i.opacity,dashType:i.dashType,zIndex:i.zIndex,visible:e._visible}),n.push(e.element),e._view=t,N(n,k.fn.getViewElements.call(e,t)),n},destroy:function(){this.tooltip&&this.tooltip.destroy(),k.fn.destroy.call(this)}}),ji=Fi.extend({init:function(t,e){var i=t.axis.getRoot().parent.element;this.crosshair=t,Fi.fn.init.call(this,i,p({},this.options,{background:t.axis.plotArea.options.seriesColors[0]},e)),this._updateStyle(this.options,{}),this.setStyle(this.options)},options:{padding:10},showAt:function(t){var e=this.element;this.point=t,this.element.html(this.content(t)),this.anchor=this.getAnchor(e.outerWidth(),e.outerHeight()),this.move()},move:function(){var t=this.element,e=this._offset();t.css({top:e.top,left:e.left}).show()},content:function(t){var e,i,n=this.options,r=this.crosshair.axis,o=r.options;return i=e=r[n.stickyMode?"getCategory":"getValue"](t),n.template?e=m(n.template)({value:i}):n.format?e=V(n.format,i):o.type===bt&&(e=V(o.labels.dateFormats[o.baseUnit],i)),e},getAnchor:function(t,e){var i,n,r=this.options,o=r.position,s=this.crosshair.axis.options.vertical,a=this.crosshair.points,l=a[0],h=a[1],c=t/2,d=e/2,u=r.padding;return s?o===Lt?(i=l.x-t-u,n=l.y-d):(i=h.x+u,n=h.y-d):o===rt?(i=h.x-c,n=h.y+u):(i=l.x-c,n=l.y-e-u),z(i,n)},hide:function(){this.element.hide(),this.point=null},destroy:function(){this.element.remove(),this.element=null,this.point=null}}),Gi={min:function(t){var e,i,n=Nt,r=t.length;for(e=0;e<r;e++)wn(i=t[e])&&(n=o.min(n,i));return n===Nt?t[0]:n},max:function(t){var e,i,n=Vt,r=t.length;for(e=0;e<r;e++)wn(i=t[e])&&(n=o.max(n,i));return n===Vt?t[0]:n},sum:function(t){var e,i,n=t.length,r=0;for(e=0;e<n;e++)wn(i=t[e])&&(r+=i);return r},count:function(t){var e,i,n=t.length,r=0;for(e=0;e<n;e++)null!==(i=t[e])&&F(i)&&r++;return r},avg:function(t){var e=t[0],i=xn(t);return i>0&&(e=Gi.sum(t)/i),e},first:function(t){var e,i,n=t.length;for(e=0;e<n;e++)if(null!==(i=t[e])&&F(i))return i;return t[0]}};function Wi(){this._defaults={}}Wi.prototype={register:function(t,e){for(var i=0;i<t.length;i++)this._defaults[t[i]]=e},query:function(t){return this._defaults[t]}},Wi.current=new Wi;var qi=c.extend({init:function(e,i,n){var r,o,s=this,h=e.element,d=i.lineBox(),u=s.getValueAxis(i),f=u.lineBox();c.fn.init.call(s),s.options=p({},s.options,n),n=s.options,s.chart=e,s.chartElement=h,s.categoryAxis=i,s._dateAxis=s.categoryAxis instanceof Ve,s.valueAxis=u,s._dateAxis&&p(n,{min:on(n.min),max:on(n.max),from:on(n.from),to:on(n.to)}),s.template=qi.template,s.template||(s.template=qi.template=X("<div class='k-selector' style='width: #= d.width #px; height: #= d.height #px; top: #= d.offset.top #px; left: #= d.offset.left #px;'><div class='k-mask'></div><div class='k-mask'></div><div class='k-selection'><div class='k-selection-bg'></div><div class='k-handle k-leftHandle'><div></div></div><div class='k-handle k-rightHandle'><div></div></div></div></div>")),o={left:parseInt(h.css("paddingLeft"),10),right:parseInt(h.css("paddingTop"),10)},s.options=p({},{width:d.width(),height:f.height(),padding:o,offset:{left:f.x2+o.left,top:f.y1+o.right},from:n.min,to:n.max},n),s.options.visible&&(s.wrapper=r=t(s.template(s.options)).appendTo(h),s.selection=r.find(".k-selection"),s.leftMask=r.find(".k-mask").first(),s.rightMask=r.find(".k-mask").last(),s.leftHandle=r.find(".k-leftHandle"),s.rightHandle=r.find(".k-rightHandle"),s.options.selection={border:{left:parseFloat(s.selection.css("border-left-width"),10),right:parseFloat(s.selection.css("border-right-width"),10)}},s.leftHandle.css("top",(s.selection.height()-s.leftHandle.height())/2),s.rightHandle.css("top",(s.selection.height()-s.rightHandle.height())/2),s.set(s._index(n.from),s._index(n.to)),s.bind(s.events,s.options),s.wrapper[0].style.cssText=s.wrapper[0].style.cssText,s.wrapper.on(jt,a(s._mousewheel,s)),l.UserEvents?s.userEvents=new l.UserEvents(s.wrapper,{global:!0,stopPropagation:!0,multiTouch:!0,start:a(s._start,s),move:a(s._move,s),end:a(s._end,s),tap:a(s._tap,s),gesturestart:a(s._gesturechange,s),gesturechange:a(s._gesturechange,s)}):s.leftHandle.add(s.rightHandle).removeClass("k-handle"))},events:[ne,re,oe],options:{visible:!0,mousewheel:{zoom:"both"},min:Vt,max:Nt},destroy:function(){var t=this.userEvents;t&&t.destroy()},_rangeEventArgs:function(t){return{axis:this.categoryAxis.options,from:this._value(t.from),to:this._value(t.to)}},_start:function(e){var i,n=this,r=n.options,o=t(e.event.target);!n._state&&o&&(n.chart._unsetActivePoint(),n._state={moveTarget:o.parents(".k-handle").add(o).first(),startLocation:e.x?e.x.location:0,range:{from:n._index(r.from),to:n._index(r.to)}},i=n._rangeEventArgs({from:n._index(r.from),to:n._index(r.to)}),n.trigger(ne,i)&&(n.userEvents.cancel(),n._state=null))},_move:function(t){if(this._state){var e=this,i=e._state,n=e.options,r=e.categoryAxis.options.categories,s=e._index(n.from),a=e._index(n.to),l=e._index(n.min),h=e._index(n.max),c=i.startLocation-t.x.location,d=i.range,u=d.from,p=d.to,f=d.to-d.from,g=i.moveTarget,m=e.wrapper.width()/(r.length-1),v=o.round(c/m);g&&(t.preventDefault(),g.is(".k-selection, .k-selection-bg")?(d.from=o.min(o.max(l,s-v),h-f),d.to=o.min(d.from+f,h)):g.is(".k-leftHandle")?(d.from=o.min(o.max(l,s-v),h-1),d.to=o.max(d.from+1,d.to)):g.is(".k-rightHandle")&&(d.to=o.min(o.max(l+1,a-v),h),d.from=o.min(d.to-1,d.from)),d.from===u&&d.to===p||(e.move(d.from,d.to),e.trigger(re,e._rangeEventArgs(d))))}},_end:function(){var t=this._state.range;delete this._state,this.set(t.from,t.to),this.trigger(oe,this._rangeEventArgs(t))},_gesturechange:function(t){if(this._state){var e=this.chart,i=this._state,n=this.options,r=this.categoryAxis,s=i.range,a=e._toModelCoordinates(t.touches[0].x.location).x,l=e._toModelCoordinates(t.touches[1].x.location).x,h=o.min(a,l),c=o.max(a,l);t.preventDefault(),i.moveTarget=null,s.from=r.pointCategoryIndex(new v.Point2D(h))||n.min,s.to=r.pointCategoryIndex(new v.Point2D(c))||n.max,this.move(s.from,s.to)}},_tap:function(t){var e=this,i=e.options,n=e.chart._eventCoordinates(t),r=e.categoryAxis,s=r.pointCategoryIndex(new v.Point2D(n.x,r.box.y1)),a=e._index(i.from),l=e._index(i.to),h=e._index(i.min),c=e._index(i.max),d=l-a,u=a+d/2,p=o.round(u-s),f={},g=3===t.event.which;e._state||g||(t.preventDefault(),e.chart._unsetActivePoint(),r.options.justified||p--,f.from=o.min(o.max(h,a-p),c-d),f.to=o.min(f.from+d,c),e._start(t),e._state&&(e._state.range=f,e.trigger(re,e._rangeEventArgs(f)),e._end()))},_mousewheel:function(t){var e=this,i=e.options,n=Y(t);if(e._start({event:{target:e.selection}}),e._state){var r=e._state.range;t.preventDefault(),t.stopPropagation(),o.abs(n)>1&&(n*=3),i.mousewheel.reverse&&(n*=-1),e.expand(n)&&e.trigger(re,{axis:e.categoryAxis.options,delta:n,originalEvent:t,from:e._value(r.from),to:e._value(r.to)}),e._mwTimeout&&clearTimeout(e._mwTimeout),e._mwTimeout=setTimeout(function(){e._end()},150)}},_index:function(t){var e=this.categoryAxis,i=e.options.categories,n=t;return t instanceof Date&&(n=bn(t,i),!e.options.justified&&t>W(i)&&(n+=1)),n},_value:function(t){var e=this.categoryAxis.options.categories,i=t;return this._dateAxis&&(i=t>e.length-1?this.options.max:e[t]),i},_slot:function(t){return this.categoryAxis.getSlot(this._index(t))},move:function(t,e){var i,n,r,s,a=this.options,l=a.offset,h=a.padding,c=a.selection.border;r=this._slot(t),i=Q(r.x1-l.left+h.left),this.leftMask.width(i),this.selection.css("left",i),r=this._slot(e),n=Q(a.width-(r.x1-l.left+h.left)),this.rightMask.width(n),(s=a.width-n)!=a.width&&(s+=c.right),this.rightMask.css("left",s),this.selection.width(o.max(a.width-(i+n)-c.right,0))},set:function(t,e){var i=this.options,n=this._index(i.min),r=this._index(i.max);t=q(this._index(t),n,r),e=q(this._index(e),t+1,r),i.visible&&this.move(t,e),i.from=this._value(t),i.to=this._value(e)},expand:function(t){var e=this.options,i=this._index(e.min),n=this._index(e.max),r=e.mousewheel.zoom,o=this._index(e.from),s=this._index(e.to),a={from:o,to:s},l=p({},a);if(this._state&&(a=this._state.range),r!==Jt&&(a.from=q(q(o-t,0,s-1),i,n)),r!==Lt&&(a.to=q(q(s+t,a.from+1,n),i,n)),a.from!==l.from||a.to!==l.to)return this.set(a.from,a.to),!0},getValueAxis:function(t){var e,i,n=t.pane.axes,r=n.length;for(e=0;e<r;e++)if((i=n[e]).options.vertical!==t.options.vertical)return i}}),Yi=function(t,e,i){var n,r=e.canonicalFields(t),o=e.valueFields(t),s=e.sourceFields(t,r),a=this._seriesFields=[],l=i.query(t.type),h=t.aggregate||l;for(this._series=t,this._binder=e,n=0;n<r.length;n++){var c,d=r[n];if(typeof h===Yt)c=h[d];else{if(0!==n&&!j(d,o))break;c=h}c&&a.push({canonicalName:d,name:s[n],transform:g(c)?c:Gi[c]})}};function Qi(t){return Xi(t).max}function Xi(t){var i,n,r=Nt,s=Vt,a=t.length;for(i=0;i<a;i++)null!==(n=t[i])&&isFinite(n)&&(r=o.min(r,n),s=o.max(s,n));return{min:r===Nt?e:r,max:s===Vt?e:s}}function Zi(t,e,i,n){var r,o,s=(n.x-i.x)*(t.y-i.y)-(n.y-i.y)*(t.x-i.x),a=(n.y-i.y)*(e.x-t.x)-(n.x-i.x)*(e.y-t.y);return 0!==a&&(o=s/a,r=new z(t.x+o*(e.x-t.x),t.y+o*(e.y-t.y))),r}function Ki(t){delete t.bar,delete t.column,delete t.line,delete t.verticalLine,delete t.pie,delete t.donut,delete t.area,delete t.verticalArea,delete t.scatter,delete t.scatterLine,delete t.bubble,delete t.candlestick,delete t.ohlc,delete t.boxPlot,delete t.bullet,delete t.verticalBullet,delete t.polarArea,delete t.polarLine,delete t.radarArea,delete t.radarLine}function Ji(t){var e,i,n,r,o=t.series,s=t.seriesColors||[];for(e=0;e<o.length;e++)i=o[e],n=s[e%s.length],i.color=i.color||n,(r=i._defaults)&&(r.color=r.color||n)}function tn(t){var e,i=t.length,n=0;for(e=0;e<i;e++)n=o.max(n,t[e].data.length);return n}function en(t){return t*t}function nn(t,e){return null===e?e:f(t,!0)(e)}function rn(t,e){if(null===e)return e;var i="_date_"+t,n=e[i];return n||(n=on(f(t,!0)(e)),e[i]=n),n}function on(t){var e,i;if(t instanceof Date)e=t;else if(typeof t===he)e=l.parseDate(t)||new Date(t);else if(t)if(n(t))for(e=[],i=0;i<t.length;i++)e.push(on(t[i]));else e=new Date(t);return e}function sn(t){return n(t)?r(t,sn):t?on(t).getTime():void 0}function an(t,e,i,n){var r,o=t;return t&&(r=(t=on(t)).getHours(),i===Ae?o=new Date(t.getFullYear()+e,0,1):i===Ht?o=new Date(t.getFullYear(),t.getMonth()+e,1):i===Ce?(o=an(ln(t,n),7*e,wt),l.date.adjustDST(o,r)):i===wt?(o=new Date(t.getFullYear(),t.getMonth(),t.getDate()+e),l.date.adjustDST(o,r)):i===Dt?(o=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours()+e),e>0&&vn(t,o)&&(o=an(t,e+1,i,n))):i===Ft?(o=new Date(t.getTime()+e*de)).setSeconds(0):i===ie&&(o=new Date(t.getTime()+e*ce)),o.getMilliseconds()>0&&o.setMilliseconds(0)),o}function ln(t,e){var i=t.getDay(),n=0;if(!isNaN(i))for(e=e||0;i!==e;)0===i?i=6:i--,n++;return un(t,-n*pe)}function hn(t,e,i){return an(t=on(t),0,e,i)}function cn(t,e,i){return(t=on(t))&&hn(t,e,i).getTime()===t.getTime()?t:an(t,1,e,i)}function dn(t,e){return t.getTime()-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*de}function un(t,e){var i=t.getTimezoneOffset(),n=new Date(t.getTime()+e),r=n.getTimezoneOffset()-i;return new Date(n.getTime()+r*de)}function pn(t,e,i){return i===Ae?e.getFullYear()-t.getFullYear():i===Ht?12*pn(t,e,Ae)+e.getMonth()-t.getMonth():i===wt?o.floor(dn(e,t)/pe):o.floor((e-t)/ve[i])}function fn(t){return 1===t.length?t[0]:t}function gn(t){var e,i,n,r=t.length;if(r>0)for(i=0;i<r;i++)n=t[i].box,e?e.wrap(n):e=n.clone();return e||x()}function mn(t,e){return t&&e?t.toLowerCase()===e.toLowerCase():t===e}function vn(t,e){return t&&e?sn(t)===sn(e):t===e}function yn(t,e){null!==e&&t.push(e)}function bn(t,e){for(var i,n,r=0,s=e.length-1;r<=s;)if((n=e[i=o.floor((r+s)/2)])<t)r=i+1;else{if(!(n>t)){for(;vn(e[i-1],t);)i--;return i}s=i-1}return e[i]<=t?i:i-1}function wn(t){return"number"==typeof t&&!isNaN(t)}function xn(t){var e,i=t.length,n=0;for(e=0;e<i;e++)wn(t[e])&&n++;return n}function _n(t){return xn(t)===t.length}function kn(t,e,i,n){var r,o,s,a=!1;if((i=i||{}).excluded=i.excluded||[],s=i.defaults=i.defaults||{},!((i.depth=i.depth||0)>Ot)){for(r in t)!j(r,i.excluded)&&t.hasOwnProperty(r)&&(o=t[r],g(o)?(a=!0,n||(t[r]=K(o(e),s[r]))):typeof o===Yt&&(i.defaults=s[r],i.depth++,a=kn(o,e,i,n)||a,i.depth--));return a}}function Cn(t,i){var n,r,o,s=[],a=t.groupNameTemplate,h=i.length;for(F(a)?(l.logToConsole("'groupNameTemplate' is obsolete and will be removed in future versions. Specify the group name template as 'series.name'"),a&&(n=m(a))):0===(n=m(t.name||""))._slotCount&&(n=m(F(t.name)?"#= group.value #: #= series.name #":"#= group.value #")),r=0;r<h;r++)(o=p({},t)).color=e,o._groupIx=r,s.push(o),n&&(o.name=n({series:o,group:i[r]}));return s}function Sn(t,e){var i,n,r=[];for(e=[].concat(e),i=0;i<t.length;i++)n=t[i],j(n.type,e)&&r.push(n);return r}function Tn(e,i){if(e instanceof Date){for(var n=0,r=i.length;n<r;n++)if(vn(i[n],e))return n;return-1}return t.inArray(e,i)}function Pn(t,e){e=e||H;for(var i=1,n=t.length;i<n;i++)if(e(t[i],t[i-1])<0){t.sort(e);break}return t}function An(t,e){var i,n=Pn(t,e),r=n.length,o=r>0?[n[0]]:[];for(e=e||H,i=1;i<r;i++)0!==e(n[i],W(o))&&o.push(n[i]);return o}function Dn(t,e){var i=t.type,n=e instanceof Date;return!i&&n||mn(i,bt)}function zn(t){var e,i,n,r,o=[],s=t.length;for(e=0;e<s;e++)for(r=(i=t[e]).length,n=0;n<r;n++)o[n]=o[n]||[],o[n].push(i[n]);return o}function En(t,e){if(t.indexOf(".")>-1)for(var i,n=t.split("."),r="";n.length>1;)r+=n.shift(),i=l.getter(r)(e)||{},l.setter(r)(e,i),r+="."}Yi.prototype={aggregatePoints:function(t,e){var i,r,o,s,a=this._bindPoints(t||[]),h=this._series,c=this._seriesFields,d=a.dataItems[0],u={};if(d&&!wn(d)&&!n(d)){var p=function(){};p.prototype=d,u=new p}for(i=0;i<c.length;i++){if(r=c[i],o=this._bindField(a.values,r.canonicalName),null!==(s=r.transform(o,h,a.dataItems,e))&&typeof s===Yt&&!F(s.length)){u=s;break}F(s)&&(En(r.name,u),l.setter(r.name)(u,s))}return u},_bindPoints:function(t){var e,i,n=this._binder,r=this._series,o=[],s=[];for(e=0;e<t.length;e++)i=t[e],o.push(n.bindPoint(r,i)),s.push(r.data[i]);return{values:o,dataItems:s}},_bindField:function(t,e){var i,n,r,o,s=[],a=t.length;for(i=0;i<a;i++)o=(n=t[i]).valueFields,r=F(o[e])?o[e]:n.fields[e],s.push(r);return s}},s(t.easing,{easeOutElastic:function(t,e,i,n){var r=1.70158,s=0,a=n;return 0===t?i:1===t?i+n:(s||(s=.5),a<o.abs(n)?(a=n,r=s/4):r=s/(2*o.PI)*o.asin(n/a),a*o.pow(2,-10*t)*o.sin((1*t-r)*(1.1*o.PI)/s)+n+i)}}),v.ui.plugin(Me),Le.current.register(Di,[it,gt,Rt,ke,tt,xe,lt,Qt,at,_e,ot]),Le.current.register(Ei,[te,ee,st]),Le.current.register(Mi,[Zt]),Le.current.register(Li,[St]),Ie.current.register([it,gt,Rt,ke,tt,xe],[we],[ht,ft,qt,"errorLow","errorHigh"]),Wi.current.register([it,gt,Rt,ke,tt,xe],{value:"max",color:"first",noteText:"first",errorLow:"min",errorHigh:"max"}),Ie.current.register([te,ee,st],[Te,Pe],[ft,qt,"xErrorLow","xErrorHigh","yErrorLow","yErrorHigh"]),Ie.current.register([st],[Te,Pe,"size"],[ft,ht,qt]),Ie.current.register([lt,Qt],["open","high","low","close"],[ht,ft,"downColor",qt]),Wi.current.register([lt,Qt],{open:"max",high:"max",low:"min",close:"max",color:"first",downColor:"first",noteText:"first"}),Ie.current.register([ot],["lower","q1","median","q3","upper","mean","outliers"],[ht,ft,qt]),Wi.current.register([ot],{lower:"max",q1:"max",median:"max",q3:"max",upper:"max",mean:"max",outliers:"first",color:"first",noteText:"first"}),Ie.current.register([at,_e],["current","target"],[ht,ft,"visibleInLegend",qt]),Wi.current.register([at,_e],{current:"max",target:"max",color:"first",noteText:"first"}),Ie.current.register([Zt,St],[we],[ht,ft,"explode","visibleInLegend","visible"]),p(v,{EQUALLY_SPACED_SERIES:ze,Aggregates:Gi,AreaChart:ci,AreaSegment:hi,AxisGroupRangeTracker:zi,Bar:Ge,BarAnimationDecorator:Ri,BarChart:Ye,BarLabel:Be,BubbleAnimationDecorator:Ni,BubbleChart:gi,BulletChart:Qe,CandlestickChart:vi,Candlestick:mi,CategoricalChart:qe,CategoricalErrorBar:Je,CategoricalPlotArea:Di,CategoryAxis:Ne,ChartContainer:Pi,ClusterLayout:He,Crosshair:$i,CrosshairTooltip:ji,DateCategoryAxis:Ve,DateValueAxis:Fe,DefaultAggregates:Wi,DonutChart:Si,DonutPlotArea:Li,DonutSegment:Ci,ErrorBarBase:Ke,ErrorRangeCalculator:We,Highlight:Vi,SharedTooltip:Ui,Legend:Oe,LineChart:oi,LinePoint:ei,LineSegment:ni,Pane:Ti,PieAnimation:Ii,PieAnimationDecorator:Oi,PieChart:ki,PiePlotArea:Mi,PieSegment:_i,PlotAreaBase:Ai,PlotAreaFactory:Le,PointEventsMixin:$e,ScatterChart:pi,ScatterErrorBar:ti,ScatterLineChart:fi,Selection:qi,SeriesAggregator:Yi,SeriesBinder:Ie,ShapeElement:L,SplineSegment:ai,SplineAreaSegment:di,StackWrap:Ue,Tooltip:Hi,OHLCChart:bi,OHLCPoint:yi,XYPlotArea:Ei,addDuration:an,areNumbers:_n,axisGroupBox:gn,categoriesCount:tn,ceilDate:cn,countNumbers:xn,duration:pn,ensureTree:En,indexOf:Tn,isNumber:wn,floorDate:hn,filterSeriesByType:Sn,lteDateIndex:bn,evalOptions:kn,singleItemOrArray:fn,sortDates:Pn,sparseArrayLimits:Xi,startOfWeek:ln,transpose:zn,toDate:on,toTime:sn,uniqueDates:An})}(window.kendo.jQuery),function(t,e){var i=Math,n=window.kendo,r=n.deepExtend,o=n.dataviz,s=o.AreaSegment,a=o.Axis,l=o.AxisGroupRangeTracker,h=o.BarChart,c=o.Box2D,d=o.CategoryAxis,u=o.CategoricalChart,p=o.CategoricalPlotArea,f=o.ChartElement,g=o.CurveProcessor,m=o.DonutSegment,v=o.LineChart,y=o.LineSegment,b=o.LogarithmicAxis,w=o.NumericAxis,x=o.PlotAreaBase,_=o.PlotAreaFactory,k=o.Point2D,C=o.Ring,S=o.ScatterChart,T=o.ScatterLineChart,P=o.SeriesBinder,A=o.SplineSegment,D=o.SplineAreaSegment,z=o.append,E=o.getSpacing,M=o.filterSeriesByType,L=o.limitValue,I=o.round,B="arc",R=o.COORD_PRECISION,O=i.PI/180,N="plotAreaClick",V="polarScatter",F="radarColumn",H="smooth",U=["polarArea","polarLine",V],$=["radarArea",F,"radarLine"],j={renderGridLines:function(t,e){var n,r,o=this.options,s=i.abs(this.box.center().y-e.lineBox().y1),a=!1,l=[];return o.majorGridLines.visible&&(n=this.majorGridLineAngles(e),a=!0,l=this.gridLineElements(t,n,s,o.majorGridLines)),o.minorGridLines.visible&&(r=this.minorGridLineAngles(e,a),z(l,this.gridLineElements(t,r,s,o.minorGridLines))),l},gridLineElements:function(t,e,i,n){var r,o,s,a=this.box.center(),l=[];for(s={data:{modelId:this.plotArea.modelId},zIndex:-1,strokeWidth:n.width,stroke:n.color,dashType:n.dashType},r=0;r<e.length;r++)o=k.onCircle(a,e[r],i),l.push(t.createLine(a.x,a.y,o.x,o.y,s));return l},gridLineAngles:function(e,i,n){var r=this,o=r.intervals(i,n);return t.map(o,function(t){var i=r.intervalAngle(t);if(!e.options.visible||90!==i)return i})}},G=d.extend({options:{startAngle:90,labels:{margin:E(10)},majorGridLines:{visible:!0},justified:!0},range:function(){return{min:0,max:this.options.categories.length}},reflow:function(t){this.box=t,this.reflowLabels()},lineBox:function(){return this.box},reflowLabels:function(){var t,e,i=new c,n=this.labels;for(e=0;e<n.length;e++)n[e].reflow(i),t=n[e].box,n[e].reflow(this.getSlot(e).adjacentBox(0,t.width(),t.height()))},intervals:function(t,e){var i,n=this.options,r=n.categories.length,o=0,s=0,a=r/t||1,l=360/a,h=[];for(e&&(s=360/(r/e)),i=0;i<a;i++)(o=I(o,R))%s!=0&&h.push(o%360),n.reverse?o=360+o-l:o+=l;return h},majorIntervals:function(){return this.intervals(1)},minorIntervals:function(){return this.intervals(.5)},intervalAngle:function(t){return(360+t+this.options.startAngle)%360},majorAngles:function(){return t.map(this.majorIntervals(),t.proxy(this.intervalAngle,this))},renderLine:function(){return[]},majorGridLineAngles:function(t){return this.gridLineAngles(t,1)},minorGridLineAngles:function(t,e){return this.gridLineAngles(t,.5,e?1:0)},renderPlotBands:function(t){var e,n,r,o,s,a,l=this.options.plotBands||[],h=[];for(e=0;e<l.length;e++)n=l[e],r=this.plotBandSlot(n),o=this.getSlot(n.from),s=n.from-i.floor(n.from),r.startAngle+=s*o.angle,a=i.ceil(n.to)-n.to,r.angle-=(a+s)*o.angle,h.push(t.createSector(r,{fill:n.color,fillOpacity:n.opacity,strokeOpacity:n.opacity,zIndex:-1}));return h},plotBandSlot:function(t){return this.getSlot(t.from,t.to-1)},getSlot:function(t,e){var n,r,o=this.options,s=o.justified,a=this.box,l=this.majorAngles(),h=l.length,c=360/h;return o.reverse&&!s&&(t=(t+1)%h),n=l[t=L(i.floor(t),0,h-1)],s&&(n-=c/2)<0&&(n+=360),r=c*((e=L(i.ceil(e||t),t,h-1))-t+1),new C(a.center(),0,a.height()/2,n,r)},pointCategoryIndex:function(t){var e,i=null,n=this.options.categories.length;for(e=0;e<n;e++)if(this.getSlot(e).containsPoint(t)){i=e;break}return i}});r(G.fn,j);var W={options:{majorGridLines:{visible:!0}},renderPlotBands:function(t){var e,i,n,r,o,s=this.options,a=s.plotBands||[],l=[],h=s.majorGridLines.type,c=this.plotArea.polarAxis,d=c.majorAngles(),u=c.box.center();for(e=0;e<a.length;e++)n={fill:(i=a[e]).color,fillOpacity:i.opacity,strokeOpacity:i.opacity,zIndex:-1},r=this.getSlot(i.from,i.to,!0),o=new C(u,u.y-r.y2,u.y-r.y1,0,360),l.push(h===B?t.createRing(o,n):t.createPolyline(this.plotBandPoints(o,d),!0,n));return l},plotBandPoints:function(t,e){var i,n=[],r=[];for(i=0;i<e.length;i++)n.push(k.onCircle(t.c,e[i],t.ir)),r.push(k.onCircle(t.c,e[i],t.r));return n.reverse(),n.push(n[0]),r.push(r[0]),r.concat(n)},renderGridLines:function(t,e){var i,n=this.options,r=this.radarMajorGridLinePositions(),o=e.majorAngles(),s=e.box.center(),a=[];return n.majorGridLines.visible&&(a=this.gridLineElements(t,s,r,o,n.majorGridLines)),n.minorGridLines.visible&&(i=this.radarMinorGridLinePositions(),z(a,this.gridLineElements(t,s,i,o,n.minorGridLines))),a},gridLineElements:function(t,e,i,n,r){var o,s,a,l,h,c=[];for(o={data:{modelId:this.plotArea.modelId},zIndex:-1,strokeWidth:r.width,stroke:r.color,dashType:r.dashType},l=0;l<i.length;l++)if((a=e.y-i[l])>0)if(r.type===B)c.push(t.createCircle(e,a,o));else{for(s=[],h=0;h<n.length;h++)s.push(k.onCircle(e,n[h],a));c.push(t.createPolyline(s,!0,o))}return c},getValue:function(t){var e=this.options,n=this.lineBox(),r=this.plotArea.polarAxis,o=r.majorAngles(),s=r.box.center(),a=t.distanceTo(s),l=a;if(e.majorGridLines.type!==B&&o.length>1){var h=t.x-s.x,c=t.y-s.y,d=(i.atan2(c,h)/O+540)%360;o.sort(function(t,e){return pt(t,d)-pt(e,d)});var u=90-pt(o[0],o[1])/2,p=180-pt(d,o[0])-u;l=a*(i.sin(p*O)/i.sin(u*O))}return this.axisType().fn.getValue.call(this,new k(n.x1,n.y2-l))}},q=w.extend({radarMajorGridLinePositions:function(){return this.getTickPositions(this.options.majorUnit)},radarMinorGridLinePositions:function(){var t=this.options,e=0;return t.majorGridLines.visible&&(e=t.majorUnit),this.getTickPositions(t.minorUnit,e)},axisType:function(){return w}});r(q.fn,W);var Y=b.extend({radarMajorGridLinePositions:function(){var t=[];return this.traverseMajorTicksPositions(function(e){t.push(e)},this.options.majorGridLines),t},radarMinorGridLinePositions:function(){var t=[];return this.traverseMinorTicksPositions(function(e){t.push(e)},this.options.minorGridLines),t},axisType:function(){return b}});r(Y.fn,W);var Q=a.extend({init:function(t){a.fn.init.call(this,t),(t=this.options).minorUnit=t.minorUnit||this.options.majorUnit/2},options:{type:"polar",startAngle:0,reverse:!1,majorUnit:60,min:0,max:360,labels:{margin:E(10)},majorGridLines:{color:"#000",visible:!0},minorGridLines:{color:"#aaa"}},getDivisions:function(t){return w.fn.getDivisions.call(this,t)-1},reflow:function(t){this.box=t,this.reflowLabels()},reflowLabels:function(){var t,e,i=new c,n=this.majorIntervals(),r=this.labels;for(e=0;e<r.length;e++)r[e].reflow(i),t=r[e].box,r[e].reflow(this.getSlot(n[e]).adjacentBox(0,t.width(),t.height()))},lineBox:function(){return this.box},intervals:function(t,e){var i,n=this.options,r=this.getDivisions(t),o=n.min,s=[];for(e&&(e/=t),i=0;i<r;i++)i%e!=0&&s.push((360+o)%360),o+=t;return s},majorIntervals:function(){return this.intervals(this.options.majorUnit)},minorIntervals:function(){return this.intervals(this.options.minorUnit)},intervalAngle:function(t){return(360+t-this.options.startAngle)%360},majorAngles:G.fn.majorAngles,renderLine:function(){return[]},majorGridLineAngles:function(t){return this.gridLineAngles(t,this.options.majorUnit)},minorGridLineAngles:function(t,e){return this.gridLineAngles(t,this.options.minorUnit,e?this.options.majorUnit:0)},renderPlotBands:G.fn.renderPlotBands,plotBandSlot:function(t){return this.getSlot(t.from,t.to)},getSlot:function(t,e){var i,n=this.options,r=n.startAngle,o=this.box;return t=L(t,n.min,n.max),e=L(e||t,t,n.max),n.reverse&&(t*=-1,e*=-1),(e=(540-e-r)%360)<(t=(540-t-r)%360)&&(i=t,t=e,e=i),new C(o.center(),0,o.height()/2,t,e-t)},getValue:function(t){var e=this.options,n=this.box.center(),r=t.x-n.x,o=t.y-n.y,s=i.round(i.atan2(o,r)/O),a=e.startAngle;return e.reverse||(s*=-1,a*=-1),(s+a+360)%360},labelsCount:w.fn.labelsCount,createAxisLabel:w.fn.createAxisLabel});r(Q.fn,j);var X=f.extend({options:{gap:1,spacing:0},reflow:function(t){var e,i,n=this.options,r=this.children,o=n.gap,s=n.spacing,a=r.length,l=a+o+s*(a-1),h=t.angle/l,c=t.startAngle+h*(o/2);for(i=0;i<a;i++)(e=t.clone()).startAngle=c,e.angle=h,r[i].sector&&(e.r=r[i].sector.r),r[i].reflow(e),r[i].sector=e,c+=h+h*s}}),Z=f.extend({reflow:function(t){var e,i,n=this.options.isReversed,r=this.children,o=r.length,s=n?o-1:0,a=n?-1:1;for(this.box=new c,i=s;i>=0&&i<o;i+=a)(e=r[i].sector).startAngle=t.startAngle,e.angle=t.angle}}),K=m.extend({init:function(t,e){m.fn.init.call(this,t,null,e)},options:{overlay:{gradient:null},labels:{distance:10}}}),J=h.extend({pointType:function(){return K},clusterType:function(){return X},stackType:function(){return Z},categorySlot:function(t,e){return t.getSlot(e)},pointSlot:function(t,e){var i=t.clone(),n=t.c.y;return i.r=n-e.y1,i.ir=n-e.y2,i},reflow:u.fn.reflow,reflowPoint:function(t,e){t.sector=e,t.reflow()},options:{clip:!1}}),tt=v.extend({pointSlot:function(t,e){var i=t.c.y-e.y1,n=k.onCircle(t.c,t.middle(),i);return new c(n.x,n.y,n.x,n.y)},createSegment:function(t,e,i){var n;return n=new(e.style==H?A:y)(t,e,i),t.length===e.data.length&&(n.options.closed=!0),n},options:{clip:!1}}),et=s.extend({points:function(){return y.fn.points.call(this,this.stackPoints)}}),it=D.extend({areaPoints:function(){return[]}}),nt=tt.extend({createSegment:function(t,e,i,n){var r,o,s=this.options.isStacked;return(e.line||{}).style===H?(o=new it(t,n,s,e,i)).options.closed=!0:(s&&i>0&&n&&(r=n.linePoints.slice(0).reverse()),t.push(t[0]),o=new et(t,r,e,i)),o},seriesMissingValues:function(t){return t.missingValues||"zero"}}),rt=S.extend({pointSlot:function(t,e){var i=t.c.y-e.y1,n=k.onCircle(t.c,t.startAngle,i);return new c(n.x,n.y,n.x,n.y)},options:{clip:!1}}),ot=T.extend({pointSlot:rt.fn.pointSlot,options:{clip:!1}}),st=s.extend({points:function(){var t=this.parent.plotArea.polarAxis.box.center(),e=this.stackPoints,i=y.fn.points.call(this,e);return i.unshift(t),i.push(t),i}}),at=D.extend({areaPoints:function(){return[this.parent.plotArea.polarAxis.box.center()]},points:function(){var t,e=this.parent.plotArea.polarAxis.box.center(),i=new g(!1),n=y.fn.points.call(this);return n.push(e),(t=i.process(n)).splice(t.length-3,t.length-1),this.curvePoints=t,t}}),lt=ot.extend({createSegment:function(t,e,i){return(e.line||{}).style==H?new at(t,null,!1,e,i):new st(t,[],e,i)},seriesMissingValues:function(t){return t.missingValues||"zero"},sortPoints:function(t){return t.sort(ut)}}),ht=x.extend({init:function(t,e){this.valueAxisRangeTracker=new l,x.fn.init.call(this,t,e)},render:function(){this.addToLegend(this.series),this.createPolarAxis(),this.createCharts(),this.createValueAxis()},createValueAxis:function(){var t,e,n,r,o=this.valueAxisRangeTracker,s=o.query(),a=this.valueAxisOptions({roundToMajorUnit:!1});"log"===a.type?(n=Y,r={min:.1,max:1}):(n=q,r={min:0,max:1}),(t=o.query(name)||s||r)&&s&&(t.min=i.min(t.min,s.min),t.max=i.max(t.max,s.max)),e=new n(t.min,t.max,a),this.valueAxis=e,this.appendAxis(e)},reflowAxes:function(){var t=this.options.plotArea,e=this.valueAxis,n=this.polarAxis,r=this.box,o=.15*i.min(r.width(),r.height()),s=E(t.padding||{},o),a=r.clone().unpad(s),l=a.clone().shrink(0,a.height()/2);n.reflow(a),e.reflow(l);var h=e.lineBox().height()-e.box.height();e.reflow(e.box.unpad({top:h})),this.axisBox=a,this.alignAxes(a)},alignAxes:function(){var t=this.valueAxis,e=t.getSlot(t.options.min),i=t.options.reverse?2:1,n=this.polarAxis.getSlot(0).c,r=t.box.translate(n.x-e["x"+i],n.y-e["y"+i]);t.reflow(r)},backgroundBox:function(){return this.box}}),ct=ht.extend({options:{categoryAxis:{categories:[]},valueAxis:{}},createPolarAxis:function(){var t;t=new G(this.options.categoryAxis),this.polarAxis=t,this.categoryAxis=t,this.appendAxis(t)},valueAxisOptions:function(t){return this._hasBarCharts&&r(t,{majorGridLines:{type:B},minorGridLines:{type:B}}),this._isStacked100&&r(t,{roundToMajorUnit:!1,labels:{format:"P0"}}),r(t,this.options.valueAxis)},appendChart:p.fn.appendChart,createCharts:function(){var t=this.filterVisibleSeries(this.series),e=this.panes[0];this.createAreaChart(M(t,["radarArea"]),e),this.createLineChart(M(t,["radarLine"]),e),this.createBarChart(M(t,[F]),e)},chartOptions:function(t){var e={series:t},i=t[0];if(i){var n=this.filterVisibleSeries(t),r=i.stack;e.isStacked=r&&n.length>1,e.isStacked100=r&&"100%"===r.type&&n.length>1,e.isStacked100&&(this._isStacked100=!0)}return e},createAreaChart:function(t,e){if(0!==t.length){var i=new nt(this,this.chartOptions(t));this.appendChart(i,e)}},createLineChart:function(t,e){if(0!==t.length){var i=new tt(this,this.chartOptions(t));this.appendChart(i,e)}},createBarChart:function(t,e){if(0!==t.length){var i=t[0],n=this.chartOptions(t);n.gap=i.gap,n.spacing=i.spacing;var r=new J(this,n);this.appendChart(r,e),this._hasBarCharts=!0}},seriesCategoryAxis:function(){return this.categoryAxis},click:function(e,i){var n,r,o=e._eventCoordinates(i),s=new k(o.x,o.y);n=this.categoryAxis.getCategory(s),r=this.valueAxis.getValue(s),null!==n&&null!==r&&e.trigger(N,{element:t(i.target),category:n,value:r})}}),dt=ht.extend({options:{xAxis:{},yAxis:{}},createPolarAxis:function(){var t;t=new Q(this.options.xAxis),this.polarAxis=t,this.axisX=t,this.appendAxis(t)},valueAxisOptions:function(t){return r(t,{majorGridLines:{type:B},minorGridLines:{type:B}},this.options.yAxis)},createValueAxis:function(){ht.fn.createValueAxis.call(this),this.axisY=this.valueAxis},appendChart:function(t,e){this.valueAxisRangeTracker.update(t.yAxisRanges),x.fn.appendChart.call(this,t,e)},createCharts:function(){var t=this.filterVisibleSeries(this.series),e=this.panes[0];this.createLineChart(M(t,["polarLine"]),e),this.createScatterChart(M(t,[V]),e),this.createAreaChart(M(t,["polarArea"]),e)},createLineChart:function(t,e){if(0!==t.length){var i=new ot(this,{series:t});this.appendChart(i,e)}},createScatterChart:function(t,e){if(0!==t.length){var i=new rt(this,{series:t});this.appendChart(i,e)}},createAreaChart:function(t,e){if(0!==t.length){var i=new lt(this,{series:t});this.appendChart(i,e)}},click:function(e,i){var n,r,o=e._eventCoordinates(i),s=new k(o.x,o.y);n=this.axisX.getValue(s),r=this.axisY.getValue(s),null!==n&&null!==r&&e.trigger(N,{element:t(i.target),x:n,y:r})}});function ut(t,e){return t.value.x-e.value.x}function pt(t,e){return 180-i.abs(i.abs(t-e)-180)}_.current.register(dt,U),_.current.register(ct,$),P.current.register(U,["x","y"],["color"]),P.current.register($,["value"],["color"]),o.DefaultAggregates.current.register($,{value:"max",color:"first"}),r(o,{PolarAreaChart:lt,PolarAxis:Q,PolarLineChart:ot,PolarPlotArea:dt,RadarAreaChart:nt,RadarBarChart:J,RadarCategoryAxis:G,RadarClusterLayout:X,RadarLineChart:tt,RadarNumericAxis:q,RadarPlotArea:ct,SplinePolarAreaSegment:at,SplineRadarAreaSegment:it,RadarStackLayout:Z})}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=i.deepExtend,r=t.extend,o=i.isFunction,s=i.template,a=i.dataviz,l=a.Color,h=a.ChartElement,c=a.PlotAreaBase,d=a.PlotAreaFactory,u=a.Point2D,p=a.Box2D,f=a.SeriesBinder,g=a.TextBox,m=a.append,v=a.autoFormat,y=a.evalOptions,b=a.limitValue,w=a.uniqueId,x=c.extend({render:function(){var t=this.series;this.createFunnelChart(t)},createFunnelChart:function(t){var e=t[0],i=new _(this,{series:t,legend:this.options.legend,neckRatio:e.neckRatio,dynamicHeight:e.dynamicHeight,dynamicSlope:e.dynamicSlope,segmentSpacing:e.segmentSpacing,highlight:e.highlight});this.appendChart(i)},appendChart:function(t,e){c.fn.appendChart.call(this,t,e),m(this.options.legend.items,t.legendItems)}}),_=h.extend({init:function(t,e){h.fn.init.call(this,e),this.plotArea=t,this.points=[],this.labels=[],this.legendItems=[],this.render()},options:{neckRatio:.3,width:300,dynamicSlope:!1,dynamicHeight:!0,segmentSpacing:0,labels:{visible:!1,align:"center",position:"center"}},formatPointValue:function(t,e){return v(e,t.value)},render:function(){var t,e,i=this.options,r=this.plotArea.options.seriesColors||[],s=r.length,a=i.series[0],l=a.data;if(l){var h,c,d=this.pointsTotal(a);for(c=0;c<l.length;c++){h=(t=f.current.bindPoint(a,c)).valueFields.value,e=t.fields,o(a.color)||(a.color=e.color||r[c%s]),e=n({index:c,owner:this,series:a,category:e.category,dataItem:l[c],percentage:h/d,visibleInLegend:e.visibleInLegend,visible:e.visible},e);var u=this.createSegment(h,e),p=this.createLabel(h,e);u&&p&&u.append(p)}}},evalSegmentOptions:function(t,e,i){var n=i.series;y(t,{value:e,series:n,dataItem:i.dataItem,index:i.index},{defaults:n._defaults,excluded:["data"]})},createSegment:function(t,e){var i;if(this.createLegendItem(t,e),!1!==e.visible){var o=n({},e.series);return this.evalSegmentOptions(o,t,e),i=new k(t,o,e),r(i,e),this.append(i),this.points.push(i),i}},createLabel:function(t,e){var i,r=e.series,o=e.dataItem,a=n({},this.options.labels,r.labels),h=t;if(a.visible&&t){if(a.template)h=s(a.template)({dataItem:o,value:t,percentage:e.percentage,category:e.category,series:r});else a.format&&(h=v(a.format,h));if(!a.color&&"center"===a.align){var c=new l(r.color).percBrightness();a.color=c>180?"black":"white"}return this.evalSegmentOptions(a,t,e),i=new g(h,n({vAlign:a.position,id:w()},a)),this.labels.push(i),i}},createLegendItem:function(t,e){var i,n,r,o=(this.options.legend||{}).labels||{},a=(this.options.legend||{}).inactiveItems||{};e&&!1!==e.visibleInLegend&&(i=e.category||"",(o||{}).template&&(i=s(o.template)({text:i,series:e.series,dataItem:e.dataItem,percentage:e.percentage,value:t})),!1===e.visible?(n=(a.markers||{}).color,r=(a.labels||{}).color):(n=(e.series||{}).color,r=o.color),i&&this.legendItems.push({pointIndex:e.index,text:i,series:e.series,markerColor:n,labelColor:r}))},pointsTotal:function(t){var e,i,n,r=t.data.length,o=0;for(i=0;i<r;i++)"string"==typeof(e=(n=f.current.bindPoint(t,i)).valueFields.value)&&(e=parseFloat(e)),e&&!1!==n.fields.visible&&(o+=e);return o},labelPadding:function(){var t,e,i,n=this.labels,r={left:0,right:0};for(i=0;i<n.length;i++)"center"!==(t=n[i].options.align)&&(e=n[i].box.width(),"left"===t?r.left=Math.max(r.left,e):r.right=Math.max(r.right,e));return r},reflow:function(e){var i,n,r,o,s,a,l=this.options,h=this.points,c=h.length,d=l.neckRatio<=1,p=e.clone().unpad(this.labelPadding()),f=p.width(),g=0,m=d?0:(f-f/l.neckRatio)/2,v=l.segmentSpacing,y=l.dynamicSlope,w=p.height()-v*(c-1),x=d?l.neckRatio*f:f;if(c){if(y){var _=h[0],k=_;for(t.each(h,function(t,e){e.percentage>k.percentage&&(k=e)}),m=(f-(r=_.percentage/k.percentage*f))/2,i=0;i<c;i++){s=h[i].percentage;var C=h[i+1],S=C?C.percentage:s;o=h[i].points=[],n=l.dynamicHeight?w*s:w/c,a=b(a=(f-r*(S/s))/2,0,f),o.push(u(p.x1+m,p.y1+g)),o.push(u(p.x1+f-m,p.y1+g)),o.push(u(p.x1+f-a,p.y1+n+g)),o.push(u(p.x1+a,p.y1+n+g)),m=a,g+=n+v,r=b(r*=S/s,0,f)}}else{var T=((d?f:f-2*m)-x)/2;for(i=0;i<c;i++)o=h[i].points=[],s=h[i].percentage,a=l.dynamicHeight?T*s:T/c,n=l.dynamicHeight?w*s:w/c,o.push(u(p.x1+m,p.y1+g)),o.push(u(p.x1+f-m,p.y1+g)),o.push(u(p.x1+f-m-a,p.y1+n+g)),o.push(u(p.x1+m+a,p.y1+n+g)),m+=a,g+=n+v}for(i=0;i<c;i++)h[i].reflow(e)}}}),k=h.extend({init:function(t,e,i){h.fn.init.call(this,e),this.value=t,this.id=w(),this.options.index=i.index,this.enableDiscovery()},options:{color:"white",border:{width:1}},reflow:function(t){var e=this.points,i=this.children[0];this.box=new p(e[0].x,e[0].y,e[1].x,e[2].y),i&&i.reflow(new p(t.x1,e[0].y,t.x2,e[2].y))},getViewElements:function(t){var e=this.options,i=e.border,n=[];return n.push(t.createPolyline(this.points,!0,{id:this.id,fill:e.color,fillOpacity:e.opacity,stroke:i.color,strokeOpacity:i.opacity,strokeWidth:i.width,data:{modelId:this.modelId}})),m(n,h.fn.getViewElements.call(this,t)),n},highlightOverlay:function(t,e){var i=this.options.highlight||{};if(!1!==i.visible){var n=i.border||{},o=r({},e,{fill:i.color,stroke:n.color,strokeOpacity:n.opacity,strokeWidth:n.width,fillOpacity:i.opacity,data:{modelId:this.modelId}});return t.createPolyline(this.points,!0,o)}},tooltipAnchor:function(t){var e=this.box;return new u(e.center().x-t/2,e.y1)},formatValue:function(t){return this.owner.formatPointValue(this,t)}});n(k.fn,a.PointEventsMixin),d.current.register(x,["funnel"]),f.current.register(["funnel"],["value"],["category","color","visibleInLegend","visible"]),n(a,{FunnelChart:_})}(window.kendo.jQuery),function(t,e){var i=Math,n=window.kendo,r=n.ui.Widget,o=n.deepExtend,s=n.dataviz,a=s.Axis,l=s.Box2D,h=s.ChartElement,c=s.NumericAxis,d=s.Pin,u=s.Ring,p=s.RootElement,f=s.RotationAnimation,g=s.BarIndicatorAnimatin,m=s.ArrowAnimation,v=s.append,y=s.animationDecorator,b=s.autoMajorUnit,w=s.getElement,x=s.getSpacing,_=s.defined,k=s.rotatePoint,C=s.Point2D,S=s.round,T=s.uniqueId,P="arrow",A="arrowPointer",D="barIndicator",z="#000",E=s.COORD_PRECISION,M=Number.MAX_VALUE,L=-Number.MAX_VALUE,I=i.PI/180,B="inside",R="radialPointer",O=h.extend({init:function(t,e){var n=t.options;h.fn.init.call(this,e),(e=this.options).id||(e.id=T()),e.fill=e.color,this.scale=t,_(e.value)?e.value=i.min(i.max(e.value,n.min),n.max):e.value=n.min},options:{color:z},value:function(t){var e=this.options,n=e.value,r=this.scale.options;if(0===arguments.length)return n;e._oldValue=e.value,e.value=i.min(i.max(t,r.min),r.max),this.repaint()}}),N=O.extend({options:{shape:"needle",cap:{size:.05},arrow:{width:16,height:14},animation:{type:R,speed:150}},reflow:function(){var t=this.options,e=this.scale.ring,i=e.c,n=e.r*t.cap.size;this.box=new l(i.x-n,i.y-n,i.x+n,i.y+n)},repaint:function(){var t=this.scale,e=this.options,i=this.elements[0],n=e.animation,r=t.slotAngle(t.options.min),s=t.slotAngle(e._oldValue)-r,a=i._animation;i.options.rotation[0]=t.slotAngle(e.value)-r,a&&a.abort(),!1===n.transitions?i.refresh(w(e.id)):((a=i._animation=new f(i,o(n,{startAngle:s,reverse:t.options.reverse}))).setup(),a.play())},_renderNeedle:function(t,e,i,n){var r=this.options,o=this.scale,s=o.ring.r*r.cap.size;return[t.createPolyline([k((e.x1+e.x2)/2,e.y1+o.options.minorTicks.size,i.x,i.y,n),k(i.x-s/2,i.y,i.x,i.y,n),k(i.x+s/2,i.y,i.x,i.y,n)],!0,r),t.createCircle(i,s,{fill:r.cap.color||r.color})]},_renderArrow:function(t,e,i,n){var r=this.options,o=this.scale.ring.clone(),s=r.arrow,a=s.height;return o.ir=o.r-5,[t.createPin(new d({origin:k((e.x1+e.x2)/2,e.y1+a,i.x,i.y,n),height:s.height,radius:5,rotation:n,arcAngle:180}),r),t.createRing(o,{fill:r.color})]},renderPointer:function(t){var e=this.scale,i=e.ring,n=i.c,r=i.r,s=this.options,a=new l(n.x-r,n.y-r,n.x+r,n.y+r),h=a.center(),c=e.slotAngle(e.options.min),d=90-c;return!1!==s.animation&&o(s.animation,{startAngle:0,center:h,reverse:e.options.reverse}),o(s,{rotation:[e.slotAngle(s.value)-c,h.x,h.y]}),s.shape==P?this._renderArrow(t,a,h,d):this._renderNeedle(t,a,h,d)},getViewElements:function(t){var e=this.renderPointer(t);return this.elements=e,e}}),V=c.extend({init:function(t){var e=this;e.options=o({},e.options,t),e.options.majorUnit=e.options.majorUnit||b(e.options.min,e.options.max),a.fn.init.call(e,e.options),e.options.minorUnit=e.options.minorUnit||e.options.majorUnit/10},options:{min:0,max:100,majorTicks:{size:15,align:B,color:z,width:.5,visible:!0},minorTicks:{size:10,align:B,color:z,width:.5,visible:!0},startAngle:-30,endAngle:210,labels:{position:B,padding:2}},reflow:function(t){var e=this.options,n=t.center(),r=i.min(t.height(),t.width())/2,o=this.ring||new s.Ring(n,r-e.majorTicks.size,r,e.startAngle,e.endAngle-e.startAngle);this.ring=o,this.box=o.getBBox(),this.arrangeLabels()},slotAngle:function(t){var e=this.options,i=e.startAngle,n=e.reverse,r=e.endAngle-i,o=e.min,s=e.max;return n?e.endAngle-(t-o)/(s-o)*r:(t-o)/(s-o)*r+i},renderTicks:function(t){var e=this,i=[],n=e.ring,r=n.clone(),o=e.options,s=o.minorTicks.size;function a(n,r,o,s,a){var l,h,c,d=e.tickAngles(n,r),u=a/r,p=d.length;if(s)for(l=0;l<p;l++)l%u!=0&&(c=n.point(d[l]),h=n.point(d[l],!0),i.push(t.createLine(h.x,h.y,c.x,c.y,{align:!1,stroke:o.color,strokeWidth:o.width})))}return a(n,o.majorUnit,o.majorTicks,o.majorTicks.visible),o.labels.position==B?r.radius(r.r-s,!0):r.radius(r.ir+s),a(r,o.minorUnit,o.minorTicks,o.minorTicks.visible,o.majorUnit),i},arrangeLabels:function(){var t,e,n,r,o,s,a,h,c,d,u=this.options,p=this.ring.clone(),f=this.tickAngles(p,u.majorUnit),g=this.labels,m=g.length,v=u.labels,y=v.padding,b=.05*p.r,w=u.rangeSize=u.rangeSize||.1*p.r,x=u.ranges||[];for(void 0!==this.options.rangeDistance?b=this.options.rangeDistance:this.options.rangeDistance=b,v.position===B&&x.length&&(p.r-=w+b,p.ir-=w+b),a=0;a<m;a++)t=(o=g[a]).box.width()/2,e=o.box.height()/2,n=(r=f[a])*I,d=v.position===B,h=(s=p.point(r,d)).x+i.cos(n)*(t+y)*(d?1:-1),c=s.y+i.sin(n)*(e+y)*(d?1:-1),o.reflow(new l(h-t,c-e,h+t,c+e)),this.box.wrap(o.box)},tickAngles:function(t,e){var i,n=this.options,r=n.reverse,o=n.max-n.min,s=t.angle,a=t.startAngle,l=o/e,h=s/l,c=[];for(r&&(a+=s,h=-h),i=0;i<l;i++)c.push(S(a,E)),a+=h;return S(a)<=n.endAngle&&c.push(a),c},renderRanges:function(t){var e,i,n,r,o,s=[],a=this.rangeSegments(),l=a.length,h=this.options.reverse;if(l)for(r=this.getRadius(),o=0;o<l;o++)n=a[o],e=this.slotAngle(n[h?"to":"from"]),(i=this.slotAngle(n[h?"from":"to"]))-e!=0&&s.push(t.createRing(new u(this.ring.c,r.inner,r.outer,e,i-e),{fill:n.color,fillOpacity:n.opacity,zIndex:-1}));return s},rangeSegments:function(){var t,e,i,n,r,o=this.options,s=o.ranges||[],a=s.length,l=o.rangePlaceholderColor,h=[],c=o.min,d=o.max;function u(t,e,i,n){return{from:t,to:e,color:i,opacity:n}}if(a)for(h.push(u(c,d,l)),n=0;n<a;n++)for(t=q(s[n],c,d),e=h.length,r=0;r<e;r++)if((i=h[r]).from<=t.from&&t.from<=i.to){h.push(u(t.from,t.to,t.color,t.opacity)),i.from<=t.to&&t.to<=i.to&&h.push(u(t.to,i.to,l,t.opacity)),i.to=t.from;break}return h},getRadius:function(){var t,e,i=this.options,n=i.rangeSize,r=i.rangeDistance,o=this.ring;return"outside"===i.labels.position?t=(e=o.ir-r)-n:(t=(e=o.r)-n,o.r-=n+r,o.ir-=n+r),{inner:t,outer:e}},getViewElements:function(t){var e=h.fn.getViewElements.call(this,t);return v(e,this.renderRanges(t)),v(e,this.renderTicks(t)),e}}),F=h.extend({init:function(t){h.fn.init.call(this,t),this.render()},options:{margin:{},background:"",border:{color:z,width:0},minorTicks:{align:B}},reflow:function(t){var e,i=this.scale,n=this.pointer;i.reflow(t),e=i.box.clone(),n.scale=i,n.reflow(),e.wrap(n.box),this.box=e,this.fitScale(t),this.alignScale(t)},alignScale:function(t){var e=this.box.center(),i=t.center(),n=e.x-i.x,r=e.y-i.y,o=this.scale,s=this.pointer;o.ring.c.x-=n,o.ring.c.y-=r,o.reflow(t),s.reflow(),this.box=o.box.clone().wrap(s.box)},fitScale:function(t){for(var e,n,r,o,s=this.scale.ring,a=this.box,l=i.abs(this.getDiff(a,t)),h=S(l,E),c=S(-l,E),d=0;!(!(d<100)||(d++,h!=o&&0<=(e=this.getPlotBox(h,t,s))&&e<=2)||c!=o&&0<=(r=this.getPlotBox(c,t,s))&&r<=2||(o=e>0&&r>0?2*h:e<0&&r<0?2*c:S((h+c)/2||1,E),0<=(n=this.getPlotBox(o,t,s))&&n<=2));)n>0?(c=o,r=n):(h=o,e=n)},getPlotBox:function(t,e,i){var n=this.scale,r=this.pointer;return(i=i.clone()).r+=t,i.ir+=t,n.ring=i,n.reflow(e),r.scale=n,r.reflow(),this.box=n.box.clone().wrap(r.box),this.getDiff(this.box,e)},getDiff:function(t,e){return i.min(e.width()-t.width(),e.height()-t.height())},render:function(){var t,e=this.options;t=this.scale=new V(e.scale),this.append(this.scale),this.pointer=new N(t,o({},e.pointer,{animation:{transitions:e.transitions}})),this.append(this.pointer)}}),H=c.extend({init:function(t){var e=this;e.options=o({},e.options,t),e.options=o({},e.options,{labels:{mirror:e.options.mirror}}),e.options.majorUnit=e.options.majorUnit||b(e.options.min,e.options.max),a.fn.init.call(e,e.options),e.options.minorUnit=e.options.minorUnit||e.options.majorUnit/10},options:{min:0,max:50,majorTicks:{size:15,align:B,color:z,width:.5,visible:!0},minorTicks:{size:10,align:B,color:z,width:.5,visible:!0},line:{width:.5},labels:{position:B,padding:2},mirror:!1,_alignLines:!1},renderRanges:function(t){var e,i,n,r,o,s=this.options,a=s.min,h=s.max,c=s.ranges||[],d=s.vertical,u=s.labels.mirror,p=[],f=c.length,g=s.rangeSize||s.minorTicks.size/2;if(f)for(r=0;r<f;r++)e=q(c[r],a,h),o=this.getSlot(e.from,e.to),i=d?this.lineBox():o,n=d?o:this.lineBox(),d?i.x1-=g*(u?-1:1):n.y2+=g*(u?-1:1),p.push(t.createRect(new l(i.x1,n.y1,i.x2,n.y2),{fill:e.color,fillOpacity:e.opacity}));return p},getViewElements:function(t){var e=c.fn.getViewElements.call(this,t);return v(e,this.renderRanges(t)),e}}),U=O.extend({init:function(t,e){O.fn.init.call(this,t,e),this.options=o({size:this.pointerSize(),track:{visible:_(e.track)}},this.options)},options:{shape:D,track:{border:{width:1}},color:z,border:{width:1},opacity:1,margin:x(3),animation:{type:D},visible:!0},repaint:function(){var t=this.scale,e=this.options,i=this.element,n=i._animation;n&&n.abort(),!1===e.animation.transitions?(this.getViewElements(this._view),i.points=this.element.points,i.refresh(w(e.id))):(e.animation=o({},e.animation,{endPosition:t.getSlot(t.options.min,e.value),reverse:t.options.reverse}),(n=e.shape===P?i._animation=new m(i,e.animation):i._animation=new g(i,e.animation)).setup(),n.play())},reflow:function(){var t,e,i,n=this.options,r=this.scale,o=r.lineBox(),s=n.track.size||n.size,a=n.size/2,h=r.options.mirror,c=x(n.margin),d=r.options.vertical,u=d?c[h?"left":"right"]:c[h?"bottom":"top"];u=h?-u:u,d?(i=new l(o.x1+u,o.y1,o.x1+u,o.y2),h?i.x1-=s:i.x2+=s,n.shape!==D&&(t=e=new l(o.x2+u,o.y1-a,o.x2+u,o.y2+a))):(i=new l(o.x1,o.y1-u,o.x2,o.y1-u),h?i.y2+=s:i.y1-=s,n.shape!==D&&(t=e=new l(o.x1-a,o.y1-u,o.x2+a,o.y1-u))),this.trackBox=i,this.pointerRangeBox=e,this.box=t||i.clone().pad(n.border.width)},renderPointer:function(t){var e,i=this.scale,n=this.options,r=_(n.border)?{stroke:n.border.width?n.border.color||n.color:"",strokeWidth:n.border.width,dashType:n.border.dashType}:{},s=o({fill:n.color,fillOpacity:n.opacity,animation:o(n.animation,{startPosition:i.getSlot(i.options.min,n.value),size:n.size,vertical:i.options.vertical,reverse:i.options.reverse}),id:n.id,zIndex:2,align:!1},r),a=this.pointerShape(n.value);return n.shape===P?(s.animation.type=A,e=t.createPolyline(a,!0,s)):e=t.createRect(a,s),e},pointerShape:function(t){var e,i,n,r=this.options,o=this.scale,s=o.getSlot(t,o.options.min),a=r.size,h=this.pointerRangeBox,c=o.options.vertical,d=a/2,u=o.options.mirror?-1:1,p=o.options.reverse;return r.shape==P?c?(i=p?"y2":"y1",e=[new C(h.x1,s[i]-d),new C(h.x1-u*a,s[i]),new C(h.x1,s[i]+d)]):e=[new C(s[i=p?"x1":"x2"]-d,h.y2),new C(s[i],h.y2+u*a),new C(s[i]+d,h.y2)]:(n=this.trackBox,e=c?new l(n.x1,s.y1,n.x1+a,s.y2):new l(s.x1,n.y1,s.x2,n.y1+a)),e},pointerSize:function(){var t,e=this.options,i=this.scale.options.majorTicks.size;return t=e.shape===P?.6*i:.3*i,S(t)},renderTrack:function(t){var e=this.options.track,i=e.border||{},n=this.trackBox.clone().pad(i.width||0);return t.createRect(n,{fill:e.color,fillOpacity:e.opacity,stroke:i.width?i.color||e.color:"",strokeWidth:i.width,dashType:i.dashType,align:!1})},getViewElements:function(t){var e=this.options,i=[];return this.element=this.renderPointer(t),i.push(this.element),!e.track.visible||e.shape!==D&&""!==e.shape||i.push(this.renderTrack(t)),this._view=t,v(i,O.fn.getViewElements.call(this,t)),i}}),$=h.extend({init:function(t){h.fn.init.call(this,t),this.render()},options:{plotArea:{margin:{},background:"",border:{color:z,width:0}},pointer:{},scale:{}},reflow:function(t){var e=this.scale,i=this.pointer;e.reflow(t),i.reflow(t),this.box=this.getBox(t),this.alignElements(),this.shrinkElements()},shrinkElements:function(){var t=this.scale,e=this.pointer,n=t.box.clone(),r=e.box,o=t.options.vertical?"y":"x";n[o+1]+=i.max(n[o+1]-r[o+1],0),n[o+2]-=i.max(r[o+2]-n[o+2],0),t.reflow(n),e.reflow(this.box)},getBox:function(t){var e,i=this.scale,n=this.pointer,r=t.center(),o=n.box.clone().wrap(i.box);return i.options.vertical?(e=o.width()/2,o=new l(r.x-e,t.y1,r.x+e,t.y2)):(e=o.height()/2,o=new l(t.x1,r.y-e,t.x2,r.y+e)),o},alignElements:function(){var t,e=this.scale,i=this.pointer,n=e.box,r=i.box.clone().wrap(e.box),o=this.box;e.options.vertical?(t=o.center().x-r.center().x,e.reflow(new l(n.x1+t,o.y1,n.x2+t,o.y2))):(t=o.center().y-r.center().y,e.reflow(new l(o.x1,n.y1+t,o.x2,n.y2+t))),i.reflow(this.box)},render:function(){var t,e=this.options;t=this.scale=new H(e.scale),this.append(this.scale),this.pointer=new U(t,o({},e.pointer,{animation:{transitions:e.transitions}})),this.append(this.pointer)},getViewElements:function(t){var e=this.options.plotArea,i=h.fn.getViewElements.call(this,t),n=e.border||{},r=[t.createRect(this.box,{fill:e.background,stroke:n.width?n.color:"",strokeWidth:n.width,dashType:n.dashType})];return v(r,i),r}}),j=r.extend({init:function(t,e){var i,n,a,l,h=s.ui.themes||{};r.fn.init.call(this,t),this.wrapper=this.element,this._originalOptions=o({},e),l=h[a=(i=o({},this.options,e)).theme]||h[a.toLowerCase()],n=a&&l?l.gauge:{},this.options=o({},n,i),this.element.addClass("k-gauge"),this.redraw()},options:{plotArea:{},theme:"default",renderAs:"",pointer:{},scale:{},gaugeArea:{}},value:function(t){var e=this._pointers[0];if(0===arguments.length)return e.value();this.options.pointer.value=t,this._view.renderElement?e.value(t):this.redraw()},redraw:function(){var t,e=this.element,i=this._model=this._getModel();this._plotArea=i._plotArea,(t=this._view=s.ViewFactory.current.create(i.options,this.options.renderAs))&&(t.load(i),this._viewElement=t.renderTo(e[0]))},getSize:function(){return this._getSize()},_resize:function(){var t=this.options.transitions;this.options.transitions=!1,this.redraw(),this.options.transitions=t},_createModel:function(){var t=this.options,e=this._getSize();return new p(o({width:e.width,height:e.height,transitions:t.transitions},t.gaugeArea))},_getSize:function(){var t=this.element,e=t.width(),i=t.height();return e||(e=200),i||(i=200),{width:e,height:i}}});o(j.fn,s.ExportMixin);var G=j.extend({init:function(t,e){j.fn.init.call(this,t,e),n.notify(this,s.ui)},options:{name:"RadialGauge",transitions:!0,gaugeArea:{background:""}},_getModel:function(){var t,e=this.options,i=this._createModel();return t=i._plotArea=new F(e),this._pointers=[t.pointer],i.append(t),i.reflow(),i}}),W=j.extend({init:function(t,e){j.fn.init.call(this,t,e),n.notify(this,s.ui)},options:{name:"LinearGauge",transitions:!0,gaugeArea:{background:""},scale:{vertical:!0}},_getModel:function(){var t,e=this.options,i=this._createModel();return t=i._plotArea=new $(e),this._pointers=[t.pointer],i.append(t),i.reflow(),i},_getSize:function(){var t=this.element,e=t.width(),i=t.height(),n=this.options.scale.vertical;return e||(e=n?60:200),i||(i=n?200:60),{width:e,height:i}}});function q(t,e,n){var r=_(t.from)?t.from:L,o=_(t.to)?t.to:M;return t.from=i.max(i.min(o,r),e),t.to=i.min(i.max(o,r),n),t}var Y=y(R,f),Q=y(A,m),X=y(D,g);s.ui.plugin(G),s.ui.plugin(W),o(s,{Gauge:j,RadialGaugePlotArea:F,LinearGaugePlotArea:$,RadialPointer:N,LinearPointer:U,LinearScale:H,RadialScale:V,RadialPointerAnimationDecorator:Y,ArrowPointerAnimationDecorator:Q,BarIndicatorAnimationDecorator:X})}(window.kendo.jQuery),function(){var t=jQuery,e=Math,i=window.kendo,n=i.dataviz,r=n.Box2D,o=n.Color,s=n.Point2D,a=n.Ring,l=n.ViewBase,h=n.ViewElement,c=i.deepExtend,d=n.round,u=n.renderTemplate,p=n.COORD_PRECISION,f=n.DASH_ARRAYS,g=n.DEFAULT_WIDTH,m=n.DEFAULT_HEIGHT,v=n.DEFAULT_FONT,y=e.PI/180,b=2*e.PI,w=u("<canvas width='#= d.options.width #px' height='#= d.options.height #px' style='position: relative; display: #= d.display #;'></canvas>"),x=l.extend({init:function(t){l.fn.init.call(this,t),this.display=this.options.inline?"inline":"block"},options:{width:g,height:m},renderTo:function(e){var i,n=this.options;return(i=e.firstElementChild)&&"canvas"===i.tagName.toLowerCase()?(t(i).siblings().remove(),i.width=n.width,i.height=n.height):(e.innerHTML=w(this),i=e.firstElementChild),this._viewElement=i,this.renderContent(i.getContext("2d")),i},replace:function(t){var e,i=this._viewElement,n=t.box;i&&n&&((e=i.getContext("2d")).clearRect(n.x1,n.y1,n.width(),n.height()),t.getViewElements(this)[0].render(e))},renderContent:function(t){var e,i=this.sortChildren(),n=i.length,r=this.clipPath;for(r&&(t.save(),r.render(t)),e=0;e<n;e++)i[e].render(t);r&&t.restore()},applyDefinitions:function(t){return t.options.clipPathId&&(t.clipPath=this.definitions[t.options.clipPathId]),t},createGroup:function(t){return this.applyDefinitions(new k(t))},createClipPath:function(t,e){var i=this.definitions[t];return i||(i=new _({id:t}),this.definitions[t]=i),i.children=[this.createRect(e,{fill:"none"})],i},createText:function(t,e){return new E(t,e)},createRect:function(t,e){return new T(t.points(),!0,this.setDefaults(e))},createCubicCurve:function(t,e,i){return new S(t,e,i)},createLine:function(t,e,i,n,r){return new T([new s(t,e),new s(i,n)],!1,this.setDefaults(r))},createMultiLine:function(t,e){return this.decorate(new P(t,!1,this.setDefaults(e)))},createPolyline:function(t,e,i){return new T(t,e,this.setDefaults(i))},createCircle:function(t,e,i){return new D(t,e,i)},createSector:function(t,e){return new A(t,e)},createRing:function(t,e){return new A(t,e)},createPin:function(t,e){return new z(t,e)}}),_=h.extend({render:function(t){var e=this.children,i=0,n=e.length;for(t.beginPath();i<n;i++)e[i].renderPoints(t);t.clip()}}),k=h.extend({render:function(t){this.renderContent(t)},renderContent:x.fn.renderContent}),C=h.extend({options:{fillOpacity:1,strokeOpacity:1,strokeLineCap:"square"},render:function(t){var e=this.options;t.save(),t.beginPath(),this.renderPoints(t),this.setLineDash(t),this.setLineCap(t),e.fill&&"transparent"!==e.fill&&(this.setFill(t),t.globalAlpha=e.fillOpacity,t.fill()),e.stroke&&e.strokeWidth&&(t.strokeStyle=e.stroke,t.lineWidth=e.strokeWidth,t.lineJoin="round",t.globalAlpha=e.strokeOpacity,t.stroke()),this.renderOverlay(t),t.restore()},setLineDash:function(t){var e,i=this.options.dashType;(i=i?i.toLowerCase():null)&&"solid"!=i&&(e=f[i],t.setLineDash?t.setLineDash(e):(t.mozDash=e,t.webkitLineDash=e))},setLineCap:function(t){var e=this.options,i=e.dashType;t.lineCap=i&&"solid"!==i?"butt":e.strokeLineCap},setFill:function(t){var e=this.options.fill;t.fillStyle=e},renderOverlay:function(t){var e,i,r=this.options.overlay;r&&r.gradient&&(i=n.Gradients[r.gradient],(e=this.buildGradient(t,i))&&(t.fillStyle=e,t.fill()))},renderPoints:t.noop,buildGradient:t.noop}),S=C.extend({init:function(t,e,i){C.fn.init.call(this,e),this.points=t,this.areaPoints=i},renderPoints:function(t){var e,i=this.areaPoints,n=this.points;for(t.moveTo(n[0].x,n[0].y),e=1;e<n.length;e+=3)t.bezierCurveTo(d(n[e].x,p),d(n[e].y,p),d(n[e+1].x,p),d(n[e+1].y,p),d(n[e+2].x,p),d(n[e+2].y,p));if(i&&i.length){for(e=0;e<i.length;e++)t.lineTo(d(i[e].x,p),d(i[e].y,p));t.closePath()}}}),T=C.extend({init:function(t,e,i){C.fn.init.call(this,i),this.points=t,this.closed=e},options:{rotation:[0,0,0]},renderPoints:function(t){var e=this.points;this._renderPoints(t,e)},_renderPoints:function(t,e){var i,n,r=this.options,o=r.strokeWidth,s=!1!==r.align&&o&&o%2!=0?L:d;if(0!==e.length&&(r.fill||r.stroke)){for(0!==r.rotation[0]&&this.setRotation(t),n=e[0],t.moveTo(s(n.x,p),s(n.y,p)),i=1;i<e.length;i++)n=e[i],t.lineTo(s(n.x,p),s(n.y,p));this.closed&&t.closePath()}},buildGradient:function(t,e){var i,n=this.bbox(),r=this.options.overlay.rotation,o=n.x2,s=n.y1;return 90===r&&(o=n.x1,s=n.y2),e&&"linear"===e.type&&I(i=t.createLinearGradient(n.x1,n.y1,o,s),e.stops),i},bbox:function(){var t,e=this.points,i=new r;if(e.length>0)for(i.move(e[0].x,e[0].y),t=1;t<e.length;t++)i.wrapPoint(e[t]);return i},setRotation:function(t){var e=this.options.rotation,i=e[1],n=e[2];t.translate(i,n),t.rotate(e[0]*y),t.translate(-i,-n)}}),P=T.extend({renderPoints:function(t){var e,i=this.points;for(e=0;e<i.length;e++)this._renderPoints(t,i[e])}}),A=C.extend({init:function(t,e){C.fn.init.call(this,e),this.config=t||{}},options:{strokeLineCap:"square"},renderPoints:function(t){var i=this.config,n=i.startAngle,r=i.angle+n,o=e.max(i.r,0),s=e.max(i.ir,0),a=i.c,l=M(n),h=M(r);l===h&&(n=0,r=360,l=0,h=2*Math.PI);var c=i.point(n),d=i.point(r,!0);t.moveTo(c.x,c.y),t.arc(a.x,a.y,o,l,h),s>0?(t.lineTo(d.x,d.y),t.arc(a.x,a.y,s,h,l,!0)):t.lineTo(a.x,a.y)},buildGradient:function(t,e){var i,n=this.config,r=n.c;return e&&"radial"===e.type&&I(i=t.createRadialGradient(r.x,r.y,n.ir,r.x,r.y,n.r),e.stops),i}}),D=C.extend({init:function(t,e,i){C.fn.init.call(this,i),this.config=new a(t,0,e)},renderPoints:function(t){var e=this.config,i=e.c;t.arc(i.x,i.y,e.r,0,b,!1)},buildGradient:A.fn.buildGradient}),z=C.extend({init:function(t,e){C.fn.init.call(this,e),this.config=t},renderPoints:function(t){var i=this.config,n=i.radius,r=e.PI/180,o=i.arcAngle,s=i.height-n*(1-e.cos(o*r/2)),a=i.origin,l=this.options.rotation;t.translate(l[1],l[2]),t.rotate(M(l[0])),t.translate(l[1]-a.x,l[2]-a.y),t.rotate(M(-this.config.rotation)),t.moveTo(0,0),t.arc(0,-s,n,M(90-o/2),M(90+o/2)),t.lineTo(0,0),t.closePath()}}),E=h.extend({init:function(t,e){h.fn.init.call(this,e),this.content=n.decodeEntities(t)},options:{x:0,y:0,baseline:0,font:v,size:{width:0,height:0},fillOpacity:1},render:function(t){var e=this.options,i=this.content,n=e.x,r=e.y+e.baseline;t.save(),0!==e.rotation&&this.setRotation(t),t.font=e.font,t.fillStyle=e.color,t.globalAlpha=e.fillOpacity,t.fillText(i,n,r),t.restore()},setRotation:function(t){var e=this.options,i=e.size,n=e.x+i.normalWidth/2,r=e.y+i.normalHeight/2,o=e.x+i.width/2-n,s=e.y+i.height/2-r;t.translate(o,s),t.translate(n,r),t.rotate(e.rotation*y),t.translate(-n,-r)}});function M(t){return(t+540)%360*y}function L(t){return e.round(t)+.5}function I(t,e){var i,n,r,s=e.length;for(i=0;i<s;i++)n=e[i],r=new o(n.color),t.addColorStop(n.offset,"rgba("+r.r+","+r.g+","+r.b+","+n.opacity+")")}n.supportsCanvas()&&n.ViewFactory.current.register("canvas",x,30),c(n,{CanvasCircle:D,CanvasClipPath:_,CanvasGroup:k,CanvasLine:T,CanvasMultiLine:P,CanvasPath:C,CanvasRing:A,CanvasText:E,CanvasView:x})}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=t.extend,r=i.deepExtend,o=t.inArray,s=t.isPlainObject,a=i.dataviz,l=i.ui.Widget,h=a.Box2D,c=a.Text,d=/^\d+$/,u=/^[a-z0-9]+$/i;function p(t,e,i){return t.substring(e,e+i)}var f=i.Class.extend({init:function(t){this.setOptions(t)},setOptions:function(t){this.options=n({},this.options,t),this.quietZoneLength=this.options.addQuietZone?2*this.options.quietZoneLength:0},encode:function(t,i,n){return t!==e&&(t+=""),this.initValue(t,i,n),this.options.addQuietZone&&this.addQuietZone(),this.addData(),this.options.addQuietZone&&this.addQuietZone(),{baseUnit:this.baseUnit,pattern:this.pattern}},options:{quietZoneLength:10,addQuietZone:!0,addCheckSum:!0},initValue:function(){},addQuietZone:function(){this.pattern.push(this.options.quietZoneLength||10)},addData:function(){},invalidCharacterError:function(t){throw new Error(i.format("Character '{0}'  is not valid for symbology {1}",t,this.name))}}),g={},m=f.extend({minBaseUnitLength:.7,addData:function(){var t=this.value;this.addStart();for(var e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.pushCheckSum(),this.addStop(),this.prepareValues()},addCharacter:function(t){var e=this.characterMap[t];e||this.invalidCharacterError(t),this.addBase(e)},addBase:function(){}}),v={addCharacter:function(t){this.characterMap[t]?this.addBase(this.characterMap[t]):t.charCodeAt(0)>127?this.invalidCharacterError(t):this.addExtended(t.charCodeAt(0))},addExtended:function(t){for(var e,i=0;i<this.extendedMappings.length;i++)if(e=this.extendedMappings[i].call(this,t)){for(var n=0;n<e.length;n++)this.addBase(e[n]);return void(this.dataLength+=e.length-1)}},extendedMappings:[function(t){if(97<=t&&t<=122){return[this.characterMap[this.shiftCharacters[0]],this.characterMap[String.fromCharCode(t-32)]]}},function(t){if(33<=t&&t<=58){return[this.characterMap[this.shiftCharacters[1]],this.characterMap[String.fromCharCode(t+32)]]}},function(t){if(1<=t&&t<=26){return[this.characterMap[this.shiftCharacters[2]],this.characterMap[String.fromCharCode(t+64)]]}},function(t){var e,i;if(this.specialAsciiCodes[t]){e=[];for(var n=0;n<this.specialAsciiCodes[t].length;n++)e.push(this.characterMap[this.shiftCharacters[3]]),e.push(this.characterMap[this.specialAsciiCodes[t][n]])}else i=6*Math.floor(t/32)+(t-27)%32+64,e=[this.characterMap[this.shiftCharacters[3]],this.characterMap[String.fromCharCode(i)]];return e}],specialAsciiCodes:{0:["U"],64:["V"],96:["W"],127:["T","X","Y","Z"]},shiftValuesAsciiCodes:{39:36,40:47,41:43,42:37},characterMap:{"+":!1,"/":!1,$:!1,"%":!1},shiftCharacters:["SHIFT0","SHIFT1","SHIFT2","SHIFT3"]};g.code39=m.extend({name:"Code 39",checkSumMod:43,minRatio:2.5,maxRatio:3,gapWidth:1,splitCharacter:"|",initValue:function(t,e,i){this.width=e,this.height=i,this.value=t,this.dataLength=t.length,this.pattern=[],this.patternString=""},prepareValues:function(){var t,e=this,i=e.minBaseUnitLength,n=e.maxRatio,r=e.minRatio,o=Math.max(.15*e.width,24);if(e.height<o)throw new Error("Insufficient Height. The minimum height for value: "+e.value+" is: "+o);for(;(t=e.getBaseUnit(n))<i&&n>r;)n=parseFloat((n-.1).toFixed(1));if(t<i){var s=Math.ceil(e.getBaseWidth(r)*i);throw new Error("Insufficient width. The minimum width for value: "+e.value+" is: "+s)}e.ratio=n,e.baseUnit=t,e.patternString=e.patternString.substring(0,e.patternString.length-1),e.pattern=e.pattern.concat(e.patternString.replace(/ratio/g,n).split(e.splitCharacter))},getBaseUnit:function(t){return this.width/this.getBaseWidth(t)},getBaseWidth:function(t){var e=3*(t+2);return this.quietZoneLength+e*(this.dataLength+2)+this.gapWidth*(this.dataLength+1)},addStart:function(){this.addPattern(this.characterMap.START.pattern),this.addCharacterGap()},addBase:function(t){this.addPattern(t.pattern),this.addCharacterGap()},addStop:function(){this.addPattern(this.characterMap.START.pattern)},addPattern:function(t){for(var e=0;e<t.length;e++)this.patternString+=this.patternMappings[t.charAt(e)]},addCharacterGap:function(){this.patternString+=this.gapWidth+this.splitCharacter},patternMappings:{b:"1|",w:"1|",B:"ratio|",W:"ratio|"},characterMap:{0:{pattern:"bwbWBwBwb",value:0},1:{pattern:"BwbWbwbwB",value:1},2:{pattern:"bwBWbwbwB",value:2},3:{pattern:"BwBWbwbwb",value:3},4:{pattern:"bwbWBwbwB",value:4},5:{pattern:"BwbWBwbwb",value:5},6:{pattern:"bwBWBwbwb",value:6},7:{pattern:"bwbWbwBwB",value:7},8:{pattern:"BwbWbwBwb",value:8},9:{pattern:"bwBWbwBwb",value:9},A:{pattern:"BwbwbWbwB",value:10},B:{pattern:"bwBwbWbwB",value:11},C:{pattern:"BwBwbWbwb",value:12},D:{pattern:"bwbwBWbwB",value:13},E:{pattern:"BwbwBWbwb",value:14},F:{pattern:"bwBwBWbwb",value:15},G:{pattern:"bwbwbWBwB",value:16},H:{pattern:"BwbwbWBwb",value:17},I:{pattern:"bwBwbWBwb",value:18},J:{pattern:"bwbwBWBwb",value:19},K:{pattern:"BwbwbwbWB",value:20},L:{pattern:"bwBwbwbWB",value:21},M:{pattern:"BwBwbwbWb",value:22},N:{pattern:"bwbwBwbWB",value:23},O:{pattern:"BwbwBwbWb",value:24},P:{pattern:"bwBwBwbWb",value:25},Q:{pattern:"bwbwbwBWB",value:26},R:{pattern:"BwbwbwBWb",value:27},S:{pattern:"bwBwbwBWb",value:28},T:{pattern:"bwbwBwBWb",value:29},U:{pattern:"BWbwbwbwB",value:30},V:{pattern:"bWBwbwbwB",value:31},W:{pattern:"BWBwbwbwb",value:32},X:{pattern:"bWbwBwbwB",value:33},Y:{pattern:"BWbwBwbwb",value:34},Z:{pattern:"bWBwBwbwb",value:35},"-":{pattern:"bWbwbwBwB",value:36},".":{pattern:"BWbwbwBwb",value:37}," ":{pattern:"bWBwbwBwb",value:38},$:{pattern:"bWbWbWbwb",value:39},"/":{pattern:"bWbWbwbWb",value:40},"+":{pattern:"bWbwbWbWb",value:41},"%":{pattern:"bwbWbWbWb",value:42},START:{pattern:"bWbwBwBwb"}},options:{addCheckSum:!1}}),g.code39extended=g.code39.extend(r({},v,{name:"Code 39 extended",characterMap:{SHIFT0:{pattern:"bWbwbWbWb",value:41},SHIFT1:{pattern:"bWbWbwbWb",value:40},SHIFT2:{pattern:"bWbWbWbwb",value:39},SHIFT3:{pattern:"bwbWbWbWb",value:42}}})),g.code93=m.extend({name:"Code 93",cCheckSumTotal:20,kCheckSumTotal:15,checkSumMod:47,initValue:function(t,e,i){this.value=t,this.width=e,this.height=i,this.pattern=[],this.values=[],this.dataLength=t.length},prepareValues:function(){var t=Math.max(.15*this.width,24);if(this.height<t)throw new Error("Insufficient Height");if(this.setBaseUnit(),this.baseUnit<this.minBaseUnitLength)throw new Error("Insufficient Width")},setBaseUnit:function(){this.baseUnit=this.width/(9*(this.dataLength+2+2)+this.quietZoneLength+1)},addStart:function(){var t=this.characterMap.START.pattern;this.addPattern(t)},addStop:function(){this.addStart(),this.pattern.push(this.characterMap.TERMINATION_BAR)},addBase:function(t){this.addPattern(t.pattern),this.values.push(t.value)},pushCheckSum:function(){var t,e=this._getCheckValues();this.checksum=e.join("");for(var i=0;i<e.length;i++)t=this.characterMap[this._findCharacterByValue(e[i])],this.addPattern(t.pattern)},_getCheckValues:function(){var t,e,i=this.values,n=i.length,r=0;for(e=n-1;e>=0;e--)r+=this.weightedValue(i[e],n-e,this.cCheckSumTotal);for(t=r%this.checkSumMod,r=this.weightedValue(t,1,this.kCheckSumTotal),e=n-1;e>=0;e--)r+=this.weightedValue(i[e],n-e+1,this.kCheckSumTotal);return[t,r%this.checkSumMod]},_findCharacterByValue:function(t){for(var e in this.characterMap)if(this.characterMap[e].value===t)return e},weightedValue:function(t,e,i){return(e%i||i)*t},addPattern:function(t){for(var e,i=0;i<t.length;i++)e=parseInt(t.charAt(i),10),this.pattern.push(e)},characterMap:{0:{pattern:"131112",value:0},1:{pattern:"111213",value:1},2:{pattern:"111312",value:2},3:{pattern:"111411",value:3},4:{pattern:"121113",value:4},5:{pattern:"121212",value:5},6:{pattern:"121311",value:6},7:{pattern:"111114",value:7},8:{pattern:"131211",value:8},9:{pattern:"141111",value:9},A:{pattern:"211113",value:10},B:{pattern:"211212",value:11},C:{pattern:"211311",value:12},D:{pattern:"221112",value:13},E:{pattern:"221211",value:14},F:{pattern:"231111",value:15},G:{pattern:"112113",value:16},H:{pattern:"112212",value:17},I:{pattern:"112311",value:18},J:{pattern:"122112",value:19},K:{pattern:"132111",value:20},L:{pattern:"111123",value:21},M:{pattern:"111222",value:22},N:{pattern:"111321",value:23},O:{pattern:"121122",value:24},P:{pattern:"131121",value:25},Q:{pattern:"212112",value:26},R:{pattern:"212211",value:27},S:{pattern:"211122",value:28},T:{pattern:"211221",value:29},U:{pattern:"221121",value:30},V:{pattern:"222111",value:31},W:{pattern:"112122",value:32},X:{pattern:"112221",value:33},Y:{pattern:"122121",value:34},Z:{pattern:"123111",value:35},"-":{pattern:"121131",value:36},".":{pattern:"311112",value:37}," ":{pattern:"311211",value:38},$:{pattern:"321111",value:39},"/":{pattern:"112131",value:40},"+":{pattern:"113121",value:41},"%":{pattern:"211131",value:42},SHIFT0:{pattern:"122211",value:46},SHIFT1:{pattern:"311121",value:45},SHIFT2:{pattern:"121221",value:43},SHIFT3:{pattern:"312111",value:44},START:{pattern:"111141"},TERMINATION_BAR:"1"}}),g.code93extended=g.code93.extend(r({},v,{name:"Code 93 extended",pushCheckSum:function(){var t,e=this._getCheckValues();this.checksum=e.join("");for(var i=0;i<e.length;i++)t=e[i],this.shiftValuesAsciiCodes[t]?this.addExtended(this.shiftValuesAsciiCodes[t]):this.addPattern(this.characterMap[this._findCharacterByValue(t)].pattern)}}));var y=i.Class.extend({init:function(t){this.encoding=t},addStart:function(){},is:function(){},move:function(){},pushState:function(){}}),b=y.extend({FNC4:"FNC4",init:function(t,e){this.encoding=t,this.states=e,this._initMoves(e)},addStart:function(){this.encoding.addPattern(this.START)},is:function(t,e){var i=t.charCodeAt(e);return this.isCode(i)},move:function(t){for(var e=0;!this._moves[e].call(this,t)&&e<this._moves.length;)e++},pushState:function(t){var e,i=this.states,n=t.value,r=n.length;if(o("C",i)>=0){var s=n.substr(t.index).match(/\d{4,}/g);s&&(r=n.indexOf(s[0],t.index))}for(;(e=t.value.charCodeAt(t.index))>=0&&this.isCode(e)&&t.index<r;)this.encoding.addPattern(this.getValue(e)),t.index++},_initMoves:function(t){this._moves=[],o(this.FNC4,t)>=0&&this._moves.push(this._moveFNC),o(this.shiftKey,t)>=0&&this._moves.push(this._shiftState),this._moves.push(this._moveState)},_moveFNC:function(t){if(t.fnc)return t.fnc=!1,t.previousState==this.key},_shiftState:function(t){if(t.previousState==this.shiftKey&&(t.index+1>=t.value.length||this.encoding[this.shiftKey].is(t.value,t.index+1)))return this.encoding.addPattern(this.SHIFT),t.shifted=!0,!0},_moveState:function(){return this.encoding.addPattern(this.MOVE),!0},SHIFT:98}),w={};w.A=b.extend({key:"A",shiftKey:"B",isCode:function(t){return 0<=t&&t<96},getValue:function(t){return t<32?t+64:t-32},MOVE:101,START:103}),w.B=b.extend({key:"B",shiftKey:"A",isCode:function(t){return 32<=t&&t<128},getValue:function(t){return t-32},MOVE:100,START:104}),w.C=y.extend({key:"C",addStart:function(){this.encoding.addPattern(this.START)},is:function(t,e){var i=p(t,e,4);return(e+4<=t.length||2==t.length)&&d.test(i)},move:function(){this.encoding.addPattern(this.MOVE)},pushState:function(t){for(var e;(e=p(t.value,t.index,2))&&d.test(e)&&2==e.length;)this.encoding.addPattern(parseInt(e,10)),t.index+=2},getValue:function(t){return t},MOVE:99,START:105}),w.FNC4=y.extend({key:"FNC4",dependentStates:["A","B"],init:function(t,e){this.encoding=t,this._initSubStates(e)},addStart:function(t){var e=t.value.charCodeAt(0)-128,i=this._getSubState(e);this.encoding[i].addStart()},is:function(t,e){var i=t.charCodeAt(e);return this.isCode(i)},isCode:function(t){return 128<=t&&t<256},pushState:function(t){var e=this._initSubState(t),i=this.encoding,n=e.value.length;if(t.index+=n,n<3)for(var r;e.index<n;e.index++)r=e.value.charCodeAt(e.index),e.state=this._getSubState(r),e.previousState!=e.state&&(e.previousState=e.state,i[e.state].move(e)),i.addPattern(i[e.state].MOVE),i.addPattern(i[e.state].getValue(r));else e.state!=e.previousState&&i[e.state].move(e),this._pushStart(e),i.pushData(e,this.subStates),t.index<t.value.length&&this._pushStart(e);t.fnc=!0,t.state=e.state},_pushStart:function(t){this.encoding.addPattern(this.encoding[t.state].MOVE),this.encoding.addPattern(this.encoding[t.state].MOVE)},_initSubState:function(t){var e={value:this._getAll(t.value,t.index),index:0};return e.state=this._getSubState(e.value.charCodeAt(0)),e.previousState=t.previousState==this.key?e.state:t.previousState,e},_initSubStates:function(t){this.subStates=[];for(var e=0;e<t.length;e++)o(t[e],this.dependentStates)>=0&&this.subStates.push(t[e])},_getSubState:function(t){for(var e=0;e<this.subStates.length;e++)if(this.encoding[this.subStates[e]].isCode(t))return this.subStates[e]},_getAll:function(t,e){for(var i,n="";(i=t.charCodeAt(e++))&&this.isCode(i);)n+=String.fromCharCode(i-128);return n}}),w.FNC1=y.extend({key:"FNC1",startState:"C",dependentStates:["C","B"],startAI:"(",endAI:")",init:function(t,e){this.encoding=t,this.states=e},addStart:function(){this.encoding[this.startState].addStart()},is:function(){return o(this.key,this.states)>=0},pushState:function(t){var e,i,n,r=this,o=r.encoding,s=t.value.replace(/\s/g,""),a=new RegExp("["+r.startAI+r.endAI+"]","g"),l=t.index,h={state:r.startState};for(o.addPattern(r.START);;){if(h.index=0,(e=(n=s.charAt(l)===r.startAI?2:0)>0?r.getBySeparator(s,l):r.getByLength(s,l)).ai.length)i=l+n+e.id.length+e.ai.length;else if((i=s.indexOf(r.startAI,l+1))<0){if(l+e.ai.max+e.id.length+n<s.length)throw new Error("Separators are required after variable length identifiers");i=s.length}if(h.value=s.substring(l,i).replace(a,""),r.validate(e,h.value),o.pushData(h,r.dependentStates),i>=s.length)break;l=i,h.state!=r.startState&&(o[r.startState].move(h),h.state=r.startState),e.ai.length||o.addPattern(r.START)}t.index=t.value.length},validate:function(t,e){var i=e.substr(t.id.length),n=t.ai;if(!n.type&&!d.test(i))throw new Error("Application identifier "+t.id+" is numeric only but contains non numeric character(s).");if("alphanumeric"==n.type&&!u.test(i))throw new Error("Application identifier "+t.id+" is alphanumeric only but contains non alphanumeric character(s).");if(n.length&&n.length!==i.length)throw new Error("Application identifier "+t.id+" must be "+n.length+" characters long.");if(n.min&&n.min>i.length)throw new Error("Application identifier "+t.id+" must be at least "+n.min+" characters long.");if(n.max&&n.max<i.length)throw new Error("Application identifier "+t.id+" must be at most "+n.max+" characters long.")},getByLength:function(t,e){for(var i,n,r=2;r<=4;r++)if(i=p(t,e,r),n=this.getAI(i)||this.getAI(i.substring(0,i.length-1)))return{id:i,ai:n};this.unsupportedAIError(i)},unsupportedAIError:function(t){throw new Error(i.format("'{0}' is not a supported Application Identifier"),t)},getBySeparator:function(t,e){var i=t.indexOf(this.startAI,e),n=t.indexOf(this.endAI,i),r=t.substring(i+1,n),o=this.getAI(r)||this.getAI(r.substr(r.length-1));return o||this.unsupportedAIError(r),{ai:o,id:r}},getAI:function(t){var e=this.applicationIdentifiers,i=e.multiKey;if(e[t])return e[t];for(var n=0;n<i.length;n++){if(i[n].ids&&o(t,i[n].ids)>=0)return i[n].type;if(i[n].ranges)for(var r=i[n].ranges,s=0;s<r.length;s++)if(r[s][0]<=t&&t<=r[s][1])return i[n].type}},applicationIdentifiers:{22:{max:29,type:"alphanumeric"},402:{length:17},7004:{max:4,type:"alphanumeric"},242:{max:6,type:"alphanumeric"},8020:{max:25,type:"alphanumeric"},703:{min:3,max:30,type:"alphanumeric"},8008:{min:8,max:12,type:"alphanumeric"},253:{min:13,max:17,type:"alphanumeric"},8003:{min:14,max:30,type:"alphanumeric"},multiKey:[{ids:["15","17","8005","8100"],ranges:[[11,13],[310,316],[320,336],[340,369]],type:{length:6}},{ids:["240","241","250","251","400","401","403","7002","8004","8007","8110"],ranges:[[-9]],type:{max:30,type:"alphanumeric"}},{ids:["7001"],ranges:[[410,414]],type:{length:13}},{ids:["10","21","254","420","8002"],type:{max:20,type:"alphanumeric"}},{ids:["00","8006","8017","8018"],type:{length:18}},{ids:["01","02","8001"],type:{length:14}},{ids:["422"],ranges:[[424,426]],type:{length:3}},{ids:["20","8102"],type:{length:2}},{ids:["30","37"],type:{max:8,type:"alphanumeric"}},{ids:["390","392"],type:{max:15,type:"alphanumeric"}},{ids:["421","423"],type:{min:3,max:15,type:"alphanumeric"}},{ids:["391","393"],type:{min:3,max:18,type:"alphanumeric"}},{ids:["7003","8101"],type:{length:10}}]},START:102});var x=f.extend({init:function(t){f.fn.init.call(this,t),this._initStates()},_initStates:function(){for(var t=0;t<this.states.length;t++)this[this.states[t]]=new w[this.states[t]](this,this.states)},initValue:function(t,e,i){this.pattern=[],this.value=t,this.width=e,this.height=i,this.checkSum=0,this.totalUnits=0,this.index=0,this.position=1},addData:function(){var t=this,e={value:t.value,index:0,state:""};0!==t.value.length&&(e.state=e.previousState=t.getNextState(e,t.states),t.addStart(e),t.pushData(e,t.states),t.addCheckSum(),t.addStop(),t.setBaseUnit())},pushData:function(t,e){for(;this[t.state].pushState(t),!(t.index>=t.value.length);)if(t.shifted){var i=t.state;t.state=t.previousState,t.previousState=i,t.shifted=!1}else t.previousState=t.state,t.state=this.getNextState(t,e),this[t.state].move(t)},addStart:function(t){this[t.state].addStart(t),this.position=1},addCheckSum:function(){this.checksum=this.checkSum%103,this.addPattern(this.checksum)},addStop:function(){this.addPattern(this.STOP)},setBaseUnit:function(){this.baseUnit=this.width/(this.totalUnits+this.quietZoneLength)},addPattern:function(t){for(var e,i=this.characterMap[t].toString(),n=0;n<i.length;n++)e=parseInt(i.charAt(n),10),this.pattern.push(e),this.totalUnits+=e;this.checkSum+=t*this.position++},getNextState:function(t,e){for(var i=0;i<e.length;i++)if(this[e[i]].is(t.value,t.index))return e[i];this.invalidCharacterError(t.value.charAt(t.index))},characterMap:[212222,222122,222221,121223,121322,131222,122213,122312,132212,221213,221312,231212,112232,122132,122231,113222,123122,123221,223211,221132,221231,213212,223112,312131,311222,321122,321221,312212,322112,322211,212123,212321,232121,111323,131123,131321,112313,132113,132311,211313,231113,231311,112133,112331,132131,113123,113321,133121,313121,211331,231131,213113,213311,213131,311123,311321,331121,312113,312311,332111,314111,221411,431111,111224,111422,121124,121421,141122,141221,112214,112412,122114,122411,142112,142211,241211,221114,413111,241112,134111,111242,121142,121241,114212,124112,124211,411212,421112,421211,212141,214121,412121,111143,111341,131141,114113,114311,411113,411311,113141,114131,311141,411131,211412,211214,211232,2331112],STOP:106});g.code128a=x.extend({name:"Code 128 A",states:["A"]}),g.code128b=x.extend({name:"Code 128 B",states:["B"]}),g.code128c=x.extend({name:"Code 128 C",states:["C"]}),g.code128=x.extend({name:"Code 128",states:["C","B","A","FNC4"]}),g["gs1-128"]=x.extend({name:"Code GS1-128",states:["FNC1","C","B"]});var _=f.extend({initValue:function(t,e){this.pattern=[],this.value=t,this.checkSumLength=0,this.width=e},setBaseUnit:function(){this.baseUnit=this.width/(12*(this.value.length+this.checkSumLength)+this.quietZoneLength+7)},addData:function(){var t=this.value;this.addPattern(this.START);for(var e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.STOP),this.setBaseUnit()},addCharacter:function(t){var e=this.characterMap[t];e||this.invalidCharacterError(t),this.addPattern(e)},addPattern:function(t){for(var e=0;e<t.length;e++)this.pattern.push(parseInt(t.charAt(e),10))},addCheckSum:function(){var t;t=this.checkSums[this.checkSumType].call(this.checkSums,this.value),this.checksum=t.join("");for(var e=0;e<t.length;e++)this.checkSumLength++,this.addPattern(this.characterMap[t[e]])},checkSums:{Modulo10:function(t){var e,i,n,r=[0,""],o=t.length%2;for(e=0;e<t.length;e++)r[(e+o)%2]+=parseInt(t.charAt(e),10);for(n=r[0],i=(2*r[1]).toString(),e=0;e<i.length;e++)n+=parseInt(i.charAt(e),10);return[(10-n%10)%10]},Modulo11:function(t){for(var e,i=0,n=t.length,r=0;r<n;r++)i+=(((n-r)%6||6)+1)*t.charAt(r);return 10!=(e=(11-i%11)%11)?[e]:[1,0]},Modulo11Modulo10:function(t){var e,i=this.Modulo11(t);return e=t+i[0],i.concat(this.Modulo10(e))},Modulo10Modulo10:function(t){var e,i=this.Modulo10(t);return e=t+i[0],i.concat(this.Modulo10(e))}},characterMap:["12121212","12121221","12122112","12122121","12211212","12211221","12212112","12212121","21121212","21121221"],START:"21",STOP:"121",checkSumType:""});g.msimod10=_.extend({name:"MSI Modulo10",checkSumType:"Modulo10"}),g.msimod11=_.extend({name:"MSI Modulo11",checkSumType:"Modulo11"}),g.msimod1110=_.extend({name:"MSI Modulo11 Modulo10",checkSumType:"Modulo11Modulo10"}),g.msimod1010=_.extend({name:"MSI Modulo10 Modulo10",checkSumType:"Modulo10Modulo10"}),g.code11=f.extend({name:"Code 11",cCheckSumTotal:10,kCheckSumTotal:9,kCheckSumMinLength:10,checkSumMod:11,DASH_VALUE:10,DASH:"-",START:"112211",STOP:"11221",initValue:function(t,e){this.pattern=[],this.value=t,this.width=e,this.totalUnits=0},addData:function(){var t=this.value;this.addPattern(this.START);for(var e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.STOP),this.setBaseUnit()},setBaseUnit:function(){this.baseUnit=this.width/(this.totalUnits+this.quietZoneLength)},addCheckSum:function(){var t,e=this,i=e.value,n=i.length;if(t=e.getWeightedSum(i,n,e.cCheckSumTotal)%e.checkSumMod,e.checksum=t+"",e.addPattern(e.characterMap[t]),++n>=e.kCheckSumMinLength){var r=(t+e.getWeightedSum(i,n,e.kCheckSumTotal))%e.checkSumMod;e.checksum+=r,e.addPattern(e.characterMap[r])}},getWeightedSum:function(t,e,i){for(var n=0,r=0;r<t.length;r++)n+=this.weightedValue(this.getValue(t.charAt(r)),e,r,i);return n},weightedValue:function(t,e,i,n){return((e-i)%n||n)*t},getValue:function(t){return isNaN(t)?(t!==this.DASH&&this.invalidCharacterError(t),this.DASH_VALUE):parseInt(t,10)},addCharacter:function(t){var e=this.getValue(t),i=this.characterMap[e];this.addPattern(i)},addPattern:function(t){for(var e,i=0;i<t.length;i++)e=parseInt(t.charAt(i),10),this.pattern.push(e),this.totalUnits+=e},characterMap:["111121","211121","121121","221111","112121","212111","122111","111221","211211","211111","112111"],options:{addCheckSum:!0}}),g.postnet=f.extend({name:"Postnet",START:"2",VALID_CODE_LENGTHS:[5,9,11],DIGIT_SEPARATOR:"-",initValue:function(t,e,i){var n=this;n.height=i,n.width=e,n.baseHeight=i/2,n.value=t.replace(new RegExp(n.DIGIT_SEPARATOR,"g"),""),n.pattern=[],n.validate(n.value),n.checkSum=0,n.setBaseUnit()},addData:function(){var t=this.value;this.addPattern(this.START);for(var e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.START),this.pattern.pop()},addCharacter:function(t){var e=this.characterMap[t];this.checkSum+=parseInt(t,10),this.addPattern(e)},addCheckSum:function(){this.checksum=(10-this.checkSum%10)%10,this.addCharacter(this.checksum)},setBaseUnit:function(){this.baseUnit=this.width/(10*(this.value.length+1)+3+this.quietZoneLength)},validate:function(t){if(d.test(t)||this.invalidCharacterError(t.match(/[^0-9]/)[0]),o(t.length,this.VALID_CODE_LENGTHS)<0)throw new Error("Invalid value length. Valid lengths for the Postnet symbology are "+this.VALID_CODE_LENGTHS.join(","))},addPattern:function(t){for(var e,i=0;i<t.length;i++)e=this.height-this.baseHeight*t.charAt(i),this.pattern.push({width:1,y1:e,y2:this.height}),this.pattern.push(1)},characterMap:["22111","11122","11212","11221","12112","12121","12211","21112","21121","21211"]}),g.ean13=f.extend({initValue:function(t,e,i){if(12!=(t+="").length||/\D/.test(t))throw new Error('The value of the "EAN13" encoding should be 12 symbols');var n=this;n.pattern=[],n.options.height=i,n.baseUnit=e/(95+n.quietZoneLength),n.value=t,n.checksum=n.calculateChecksum(),n.leftKey=t[0],n.leftPart=t.substr(1,6),n.rightPart=t.substr(7)+n.checksum},addData:function(){var t=this;t.addPieces(t.characterMap.start),t.addSide(t.leftPart,t.leftKey),t.addPieces(t.characterMap.middle),t.addSide(t.rightPart),t.addPieces(t.characterMap.start)},addSide:function(t,e){for(var i=0;i<t.length;i++)e&&parseInt(this.keyTable[e].charAt(i),10)?this.addPieces(Array.prototype.slice.call(this.characterMap.digits[t.charAt(i)]).reverse(),!0):this.addPieces(this.characterMap.digits[t.charAt(i)],!0)},addPieces:function(t,e){for(var i=0;i<t.length;i++)e?this.pattern.push({y1:0,y2:.95*this.options.height,width:t[i]}):this.pattern.push(t[i])},calculateChecksum:function(){for(var t=0,e=0,i=this.value.split("").reverse().join(""),n=0;n<i.length;n++)n%2?e+=parseInt(i.charAt(n),10):t+=parseInt(i.charAt(n),10);return(10-(3*t+e)%10)%10},keyTable:["000000","001011","001101","001110","010011","011001","011100","010101","010110","011010"],characterMap:{digits:[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2]],start:[1,1,1],middle:[1,1,1,1,1]}}),g.ean8=g.ean13.extend({initValue:function(t,e,i){var n=this;if(7!=t.length||/\D/.test(t))throw new Error("Invalid value provided");n.value=t,n.options.height=i,n.checksum=n.calculateChecksum(n.value),n.leftPart=n.value.substr(0,4),n.rightPart=n.value.substr(4)+n.checksum,n.pattern=[],n.baseUnit=e/(67+n.quietZoneLength)}});var k=l.extend({init:function(e,i){l.fn.init.call(this,e,i),this.element=t(e),this.wrapper=this.element,this.element.addClass("k-barcode"),this.view=a.ViewFactory.current.create({},this.options.renderAs),this.setOptions(i)},setOptions:function(i){var n=this;if(n.type=(i.type||n.options.type).toLowerCase(),"upca"==n.type&&(n.type="ean13",i.value="0"+i.value),"upce"==n.type&&(n.type="ean8",i.value="0"+i.value),!g[n.type])throw new Error("Encoding "+n.type+"is not supported.");n.encoding=new g[n.type],n.options=t.extend(!0,n.options,i),i.value!==e&&n.redraw()},redraw:function(){var t=this.view;this._redraw(t),t.renderTo(this.element[0])},svg:function(){if(a.SVGView){var t=new a.SVGView;return this._redraw(t),t.render()}throw new Error("Unable to create SVGView. Check that kendo.dataviz.svg.js is loaded.")},imageDataURL:function(){if(a.CanvasView){if(a.supportsCanvas()){var t=document.createElement("div"),e=new a.CanvasView;return this._redraw(e),e.renderTo(t).toDataURL()}return i.logToConsole("Warning: Unable to generate image. The browser does not support Canvas.\nUser agent: "+navigator.userAgent),null}throw new Error("Unable to create CanvasView. Check that kendo.dataviz.canvas.js is loaded.")},getSize:function(){return i.dimensions(this.element)},_resize:function(){this.redraw()},_redraw:function(t){var i,n,r=this.options,o=r.text,s=this._getSize(),l=r.border||{},c=this.encoding,d=h(0,0,s.width,s.height).unpad(l.width).unpad(r.padding),u=d.height();this.contentBox=d,t.children=[],this._renderBackground(t,s);var p=a.measureText(d,{font:r.text.font}).height;o.visible&&(u-=p),i=c.encode(r.value,s.width-(r.padding.left+r.padding.right),u),o.visible&&(n=r.value,r.checksum&&c.checksum!==e&&(n+=" "+c.checksum),this._renderTextElement(t,n)),this.barHeight=u,t.options.width=s.width,t.options.height=s.height,this._renderElements(t,i.pattern,i.baseUnit)},_getSize:function(){var t=this.element,e={width:300,height:100};return t.width()>0&&(e.width=t.width()),t.height()>0&&(e.height=t.height()),this.options.width&&(e.width=this.options.width),this.options.height&&(e.height=this.options.height),e},value:function(t){if(t===e)return this.options.value;this.options.value=t+"",this.redraw()},_renderElements:function(t,e,i){for(var n,r,o=0+this.options.padding.left,a=0;a<e.length;a++)n=(r=s(e[a])?e[a]:{width:e[a],y1:0,y2:this.barHeight}).width*i,a%2&&t.children.push(t.createRect(new h(o,r.y1+this.contentBox.y1,o+n,r.y2+this.contentBox.y1),{fill:this.options.color})),o+=n},_renderBackground:function(t,e){var i=this.options,n=i.border||{},r=h(0,0,e.width,e.height).unpad(n.width/2),o=t.createRect(r,{fill:i.background,stroke:n.width?n.color:"",strokeWidth:n.width,dashType:n.dashType});t.children.push(o)},_renderTextElement:function(t,e){var i=this.options.text,n=new c(e,{font:i.font,color:i.color,align:"center",vAlign:"bottom"});this.text=n,n.reflow(this.contentBox),n.box.unpad(i.margin),t.children.push(t.createText(e,{baseline:n.baseline,x:n.box.x1,y:n.box.y1,color:i.color,font:i.font}))},options:{name:"Barcode",renderAs:"canvas",value:"",type:"code39",checksum:!1,width:0,height:0,color:"black",background:"white",text:{visible:!0,font:"16px Consolas, Monaco, Sans Mono, monospace, sans-serif",color:"black",margin:{top:0,bottom:0,left:0,right:0}},border:{width:0,dashType:"solid",color:"black"},padding:{top:0,bottom:0,left:0,right:0}}});a.ui.plugin(k),i.deepExtend(a,{encodings:g,Encoding:f})}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=t.extend,r=i.dataviz,o=i.ui.Widget,s=r.Box2D,a="alphanumeric",l={1:0},h={0:1},c=[[1,0],[1,25,0]],d={15:20,16:20,18:24,19:24,22:20,24:22,26:24,28:20,30:20,31:24,32:28,33:24,36:18,37:22,39:20,40:24},u=[{L:{groups:[[1,19]],totalDataCodewords:19,errorCodewordsPerBlock:7},M:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:10},Q:{groups:[[1,13]],totalDataCodewords:13,errorCodewordsPerBlock:13},H:{groups:[[1,9]],totalDataCodewords:9,errorCodewordsPerBlock:17}},{L:{groups:[[1,34]],totalDataCodewords:34,errorCodewordsPerBlock:10},M:{groups:[[1,28]],totalDataCodewords:28,errorCodewordsPerBlock:16},Q:{groups:[[1,22]],totalDataCodewords:22,errorCodewordsPerBlock:22},H:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:28}},{L:{groups:[[1,55]],totalDataCodewords:55,errorCodewordsPerBlock:15},M:{groups:[[1,44]],totalDataCodewords:44,errorCodewordsPerBlock:26},Q:{groups:[[2,17]],totalDataCodewords:34,errorCodewordsPerBlock:18},H:{groups:[[2,13]],totalDataCodewords:26,errorCodewordsPerBlock:22}},{L:{groups:[[1,80]],totalDataCodewords:80,errorCodewordsPerBlock:20},M:{groups:[[2,32]],totalDataCodewords:64,errorCodewordsPerBlock:18},Q:{groups:[[2,24]],totalDataCodewords:48,errorCodewordsPerBlock:26},H:{groups:[[4,9]],totalDataCodewords:36,errorCodewordsPerBlock:16}},{L:{groups:[[1,108]],totalDataCodewords:108,errorCodewordsPerBlock:26},M:{groups:[[2,43]],totalDataCodewords:86,errorCodewordsPerBlock:24},Q:{groups:[[2,15],[2,16]],totalDataCodewords:62,errorCodewordsPerBlock:18},H:{groups:[[2,11],[2,12]],totalDataCodewords:46,errorCodewordsPerBlock:22}},{L:{groups:[[2,68]],totalDataCodewords:136,errorCodewordsPerBlock:18},M:{groups:[[4,27]],totalDataCodewords:108,errorCodewordsPerBlock:16},Q:{groups:[[4,19]],totalDataCodewords:76,errorCodewordsPerBlock:24},H:{groups:[[4,15]],totalDataCodewords:60,errorCodewordsPerBlock:28}},{L:{groups:[[2,78]],totalDataCodewords:156,errorCodewordsPerBlock:20},M:{groups:[[4,31]],totalDataCodewords:124,errorCodewordsPerBlock:18},Q:{groups:[[2,14],[4,15]],totalDataCodewords:88,errorCodewordsPerBlock:18},H:{groups:[[4,13],[1,14]],totalDataCodewords:66,errorCodewordsPerBlock:26}},{L:{groups:[[2,97]],totalDataCodewords:194,errorCodewordsPerBlock:24},M:{groups:[[2,38],[2,39]],totalDataCodewords:154,errorCodewordsPerBlock:22},Q:{groups:[[4,18],[2,19]],totalDataCodewords:110,errorCodewordsPerBlock:22},H:{groups:[[4,14],[2,15]],totalDataCodewords:86,errorCodewordsPerBlock:26}},{L:{groups:[[2,116]],totalDataCodewords:232,errorCodewordsPerBlock:30},M:{groups:[[3,36],[2,37]],totalDataCodewords:182,errorCodewordsPerBlock:22},Q:{groups:[[4,16],[4,17]],totalDataCodewords:132,errorCodewordsPerBlock:20},H:{groups:[[4,12],[4,13]],totalDataCodewords:100,errorCodewordsPerBlock:24}},{L:{groups:[[2,68],[2,69]],totalDataCodewords:274,errorCodewordsPerBlock:18},M:{groups:[[4,43],[1,44]],totalDataCodewords:216,errorCodewordsPerBlock:26},Q:{groups:[[6,19],[2,20]],totalDataCodewords:154,errorCodewordsPerBlock:24},H:{groups:[[6,15],[2,16]],totalDataCodewords:122,errorCodewordsPerBlock:28}},{L:{groups:[[4,81]],totalDataCodewords:324,errorCodewordsPerBlock:20},M:{groups:[[1,50],[4,51]],totalDataCodewords:254,errorCodewordsPerBlock:30},Q:{groups:[[4,22],[4,23]],totalDataCodewords:180,errorCodewordsPerBlock:28},H:{groups:[[3,12],[8,13]],totalDataCodewords:140,errorCodewordsPerBlock:24}},{L:{groups:[[2,92],[2,93]],totalDataCodewords:370,errorCodewordsPerBlock:24},M:{groups:[[6,36],[2,37]],totalDataCodewords:290,errorCodewordsPerBlock:22},Q:{groups:[[4,20],[6,21]],totalDataCodewords:206,errorCodewordsPerBlock:26},H:{groups:[[7,14],[4,15]],totalDataCodewords:158,errorCodewordsPerBlock:28}},{L:{groups:[[4,107]],totalDataCodewords:428,errorCodewordsPerBlock:26},M:{groups:[[8,37],[1,38]],totalDataCodewords:334,errorCodewordsPerBlock:22},Q:{groups:[[8,20],[4,21]],totalDataCodewords:244,errorCodewordsPerBlock:24},H:{groups:[[12,11],[4,12]],totalDataCodewords:180,errorCodewordsPerBlock:22}},{L:{groups:[[3,115],[1,116]],totalDataCodewords:461,errorCodewordsPerBlock:30},M:{groups:[[4,40],[5,41]],totalDataCodewords:365,errorCodewordsPerBlock:24},Q:{groups:[[11,16],[5,17]],totalDataCodewords:261,errorCodewordsPerBlock:20},H:{groups:[[11,12],[5,13]],totalDataCodewords:197,errorCodewordsPerBlock:24}},{L:{groups:[[5,87],[1,88]],totalDataCodewords:523,errorCodewordsPerBlock:22},M:{groups:[[5,41],[5,42]],totalDataCodewords:415,errorCodewordsPerBlock:24},Q:{groups:[[5,24],[7,25]],totalDataCodewords:295,errorCodewordsPerBlock:30},H:{groups:[[11,12],[7,13]],totalDataCodewords:223,errorCodewordsPerBlock:24}},{L:{groups:[[5,98],[1,99]],totalDataCodewords:589,errorCodewordsPerBlock:24},M:{groups:[[7,45],[3,46]],totalDataCodewords:453,errorCodewordsPerBlock:28},Q:{groups:[[15,19],[2,20]],totalDataCodewords:325,errorCodewordsPerBlock:24},H:{groups:[[3,15],[13,16]],totalDataCodewords:253,errorCodewordsPerBlock:30}},{L:{groups:[[1,107],[5,108]],totalDataCodewords:647,errorCodewordsPerBlock:28},M:{groups:[[10,46],[1,47]],totalDataCodewords:507,errorCodewordsPerBlock:28},Q:{groups:[[1,22],[15,23]],totalDataCodewords:367,errorCodewordsPerBlock:28},H:{groups:[[2,14],[17,15]],totalDataCodewords:283,errorCodewordsPerBlock:28}},{L:{groups:[[5,120],[1,121]],totalDataCodewords:721,errorCodewordsPerBlock:30},M:{groups:[[9,43],[4,44]],totalDataCodewords:563,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[1,23]],totalDataCodewords:397,errorCodewordsPerBlock:28},H:{groups:[[2,14],[19,15]],totalDataCodewords:313,errorCodewordsPerBlock:28}},{L:{groups:[[3,113],[4,114]],totalDataCodewords:795,errorCodewordsPerBlock:28},M:{groups:[[3,44],[11,45]],totalDataCodewords:627,errorCodewordsPerBlock:26},Q:{groups:[[17,21],[4,22]],totalDataCodewords:445,errorCodewordsPerBlock:26},H:{groups:[[9,13],[16,14]],totalDataCodewords:341,errorCodewordsPerBlock:26}},{L:{groups:[[3,107],[5,108]],totalDataCodewords:861,errorCodewordsPerBlock:28},M:{groups:[[3,41],[13,42]],totalDataCodewords:669,errorCodewordsPerBlock:26},Q:{groups:[[15,24],[5,25]],totalDataCodewords:485,errorCodewordsPerBlock:30},H:{groups:[[15,15],[10,16]],totalDataCodewords:385,errorCodewordsPerBlock:28}},{L:{groups:[[4,116],[4,117]],totalDataCodewords:932,errorCodewordsPerBlock:28},M:{groups:[[17,42]],totalDataCodewords:714,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[6,23]],totalDataCodewords:512,errorCodewordsPerBlock:28},H:{groups:[[19,16],[6,17]],totalDataCodewords:406,errorCodewordsPerBlock:30}},{L:{groups:[[2,111],[7,112]],totalDataCodewords:1006,errorCodewordsPerBlock:28},M:{groups:[[17,46]],totalDataCodewords:782,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[16,25]],totalDataCodewords:568,errorCodewordsPerBlock:30},H:{groups:[[34,13]],totalDataCodewords:442,errorCodewordsPerBlock:24}},{L:{groups:[[4,121],[5,122]],totalDataCodewords:1094,errorCodewordsPerBlock:30},M:{groups:[[4,47],[14,48]],totalDataCodewords:860,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[14,25]],totalDataCodewords:614,errorCodewordsPerBlock:30},H:{groups:[[16,15],[14,16]],totalDataCodewords:464,errorCodewordsPerBlock:30}},{L:{groups:[[6,117],[4,118]],totalDataCodewords:1174,errorCodewordsPerBlock:30},M:{groups:[[6,45],[14,46]],totalDataCodewords:914,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[16,25]],totalDataCodewords:664,errorCodewordsPerBlock:30},H:{groups:[[30,16],[2,17]],totalDataCodewords:514,errorCodewordsPerBlock:30}},{L:{groups:[[8,106],[4,107]],totalDataCodewords:1276,errorCodewordsPerBlock:26},M:{groups:[[8,47],[13,48]],totalDataCodewords:1e3,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[22,25]],totalDataCodewords:718,errorCodewordsPerBlock:30},H:{groups:[[22,15],[13,16]],totalDataCodewords:538,errorCodewordsPerBlock:30}},{L:{groups:[[10,114],[2,115]],totalDataCodewords:1370,errorCodewordsPerBlock:28},M:{groups:[[19,46],[4,47]],totalDataCodewords:1062,errorCodewordsPerBlock:28},Q:{groups:[[28,22],[6,23]],totalDataCodewords:754,errorCodewordsPerBlock:28},H:{groups:[[33,16],[4,17]],totalDataCodewords:596,errorCodewordsPerBlock:30}},{L:{groups:[[8,122],[4,123]],totalDataCodewords:1468,errorCodewordsPerBlock:30},M:{groups:[[22,45],[3,46]],totalDataCodewords:1128,errorCodewordsPerBlock:28},Q:{groups:[[8,23],[26,24]],totalDataCodewords:808,errorCodewordsPerBlock:30},H:{groups:[[12,15],[28,16]],totalDataCodewords:628,errorCodewordsPerBlock:30}},{L:{groups:[[3,117],[10,118]],totalDataCodewords:1531,errorCodewordsPerBlock:30},M:{groups:[[3,45],[23,46]],totalDataCodewords:1193,errorCodewordsPerBlock:28},Q:{groups:[[4,24],[31,25]],totalDataCodewords:871,errorCodewordsPerBlock:30},H:{groups:[[11,15],[31,16]],totalDataCodewords:661,errorCodewordsPerBlock:30}},{L:{groups:[[7,116],[7,117]],totalDataCodewords:1631,errorCodewordsPerBlock:30},M:{groups:[[21,45],[7,46]],totalDataCodewords:1267,errorCodewordsPerBlock:28},Q:{groups:[[1,23],[37,24]],totalDataCodewords:911,errorCodewordsPerBlock:30},H:{groups:[[19,15],[26,16]],totalDataCodewords:701,errorCodewordsPerBlock:30}},{L:{groups:[[5,115],[10,116]],totalDataCodewords:1735,errorCodewordsPerBlock:30},M:{groups:[[19,47],[10,48]],totalDataCodewords:1373,errorCodewordsPerBlock:28},Q:{groups:[[15,24],[25,25]],totalDataCodewords:985,errorCodewordsPerBlock:30},H:{groups:[[23,15],[25,16]],totalDataCodewords:745,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[3,116]],totalDataCodewords:1843,errorCodewordsPerBlock:30},M:{groups:[[2,46],[29,47]],totalDataCodewords:1455,errorCodewordsPerBlock:28},Q:{groups:[[42,24],[1,25]],totalDataCodewords:1033,errorCodewordsPerBlock:30},H:{groups:[[23,15],[28,16]],totalDataCodewords:793,errorCodewordsPerBlock:30}},{L:{groups:[[17,115]],totalDataCodewords:1955,errorCodewordsPerBlock:30},M:{groups:[[10,46],[23,47]],totalDataCodewords:1541,errorCodewordsPerBlock:28},Q:{groups:[[10,24],[35,25]],totalDataCodewords:1115,errorCodewordsPerBlock:30},H:{groups:[[19,15],[35,16]],totalDataCodewords:845,errorCodewordsPerBlock:30}},{L:{groups:[[17,115],[1,116]],totalDataCodewords:2071,errorCodewordsPerBlock:30},M:{groups:[[14,46],[21,47]],totalDataCodewords:1631,errorCodewordsPerBlock:28},Q:{groups:[[29,24],[19,25]],totalDataCodewords:1171,errorCodewordsPerBlock:30},H:{groups:[[11,15],[46,16]],totalDataCodewords:901,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[6,116]],totalDataCodewords:2191,errorCodewordsPerBlock:30},M:{groups:[[14,46],[23,47]],totalDataCodewords:1725,errorCodewordsPerBlock:28},Q:{groups:[[44,24],[7,25]],totalDataCodewords:1231,errorCodewordsPerBlock:30},H:{groups:[[59,16],[1,17]],totalDataCodewords:961,errorCodewordsPerBlock:30}},{L:{groups:[[12,121],[7,122]],totalDataCodewords:2306,errorCodewordsPerBlock:30},M:{groups:[[12,47],[26,48]],totalDataCodewords:1812,errorCodewordsPerBlock:28},Q:{groups:[[39,24],[14,25]],totalDataCodewords:1286,errorCodewordsPerBlock:30},H:{groups:[[22,15],[41,16]],totalDataCodewords:986,errorCodewordsPerBlock:30}},{L:{groups:[[6,121],[14,122]],totalDataCodewords:2434,errorCodewordsPerBlock:30},M:{groups:[[6,47],[34,48]],totalDataCodewords:1914,errorCodewordsPerBlock:28},Q:{groups:[[46,24],[10,25]],totalDataCodewords:1354,errorCodewordsPerBlock:30},H:{groups:[[2,15],[64,16]],totalDataCodewords:1054,errorCodewordsPerBlock:30}},{L:{groups:[[17,122],[4,123]],totalDataCodewords:2566,errorCodewordsPerBlock:30},M:{groups:[[29,46],[14,47]],totalDataCodewords:1992,errorCodewordsPerBlock:28},Q:{groups:[[49,24],[10,25]],totalDataCodewords:1426,errorCodewordsPerBlock:30},H:{groups:[[24,15],[46,16]],totalDataCodewords:1096,errorCodewordsPerBlock:30}},{L:{groups:[[4,122],[18,123]],totalDataCodewords:2702,errorCodewordsPerBlock:30},M:{groups:[[13,46],[32,47]],totalDataCodewords:2102,errorCodewordsPerBlock:28},Q:{groups:[[48,24],[14,25]],totalDataCodewords:1502,errorCodewordsPerBlock:30},H:{groups:[[42,15],[32,16]],totalDataCodewords:1142,errorCodewordsPerBlock:30}},{L:{groups:[[20,117],[4,118]],totalDataCodewords:2812,errorCodewordsPerBlock:30},M:{groups:[[40,47],[7,48]],totalDataCodewords:2216,errorCodewordsPerBlock:28},Q:{groups:[[43,24],[22,25]],totalDataCodewords:1582,errorCodewordsPerBlock:30},H:{groups:[[10,15],[67,16]],totalDataCodewords:1222,errorCodewordsPerBlock:30}},{L:{groups:[[19,118],[6,119]],totalDataCodewords:2956,errorCodewordsPerBlock:30},M:{groups:[[18,47],[31,48]],totalDataCodewords:2334,errorCodewordsPerBlock:28},Q:{groups:[[34,24],[34,25]],totalDataCodewords:1666,errorCodewordsPerBlock:30},H:{groups:[[20,15],[61,16]],totalDataCodewords:1276,errorCodewordsPerBlock:30}}],p=[1,0,1,1,1],f=[1,0,1],g={L:"01",M:"00",Q:"11",H:"10"},m=["11101100","00010001"],v=93,y=[function(t,e){return(t+e)%2==0},function(t){return t%2==0},function(t,e){return e%3==0},function(t,e){return(t+e)%3==0},function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0},function(t,e){return t*e%2+t*e%3==0},function(t,e){return(t*e%2+t*e%3)%2==0},function(t,e){return((t+e)%2+t*e%3)%2==0}],b=/^\d+/,w="A-Z0-9 $%*+./:-",x=new RegExp("^[A-Z $%*+./:-]+"),_=new RegExp("^["+w+"]+"),k=new RegExp("^[^"+w+"]+"),C=Math.round;function S(t){return parseInt(t,2)}function T(t,e){var i=Number(t).toString(2);return i.length<e&&(i=new Array(e-i.length+1).join(0)+i),i}function P(t,e){for(var i=[],n=0;n<t.length;)i.push(t.substring(n,n+e)),n+=e;return i}var A=i.Class.extend({getVersionIndex:function(t){return t<10?0:t>26?2:1},getBitsCharacterCount:function(t){return this.bitsInCharacterCount[this.getVersionIndex(t||40)]},getModeCountString:function(t,e){return this.modeIndicator+T(t,this.getBitsCharacterCount(e))},encode:function(){},getStringBitsLength:function(){},getValue:function(){},modeIndicator:"",bitsInCharacterCount:[]}),D={};D.numeric=A.extend({bitsInCharacterCount:[10,12,14],modeIndicator:"0001",getValue:function(t){return parseInt(t,10)},encode:function(t,e){for(var i=P(t,3),n=this.getModeCountString(t.length,e),r=0;r<i.length-1;r++)n+=T(i[r],10);return n+T(i[r],1+3*i[r].length)},getStringBitsLength:function(t,e){var i=t%3;return 4+this.getBitsCharacterCount(e)+10*Math.floor(t/3)+3*i+(0===i?0:1)}}),D[a]=A.extend({characters:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:18,J:19,K:20,L:21,M:22,N:23,O:24,P:25,Q:26,R:27,S:28,T:29,U:30,V:31,W:32,X:33,Y:34,Z:35," ":36,$:37,"%":38,"*":39,"+":40,"-":41,".":42,"/":43,":":44},bitsInCharacterCount:[9,11,13],modeIndicator:"0010",getValue:function(t){return this.characters[t]},encode:function(t,e){for(var i=P(t,2),n=this.getModeCountString(t.length,e),r=0;r<i.length-1;r++)n+=T(45*this.getValue(i[r].charAt(0))+this.getValue(i[r].charAt(1)),11);return n+T(2==i[r].length?45*this.getValue(i[r].charAt(0))+this.getValue(i[r].charAt(1)):this.getValue(i[r].charAt(0)),1+5*i[r].length)},getStringBitsLength:function(t,e){return 4+this.getBitsCharacterCount(e)+11*Math.floor(t/2)+t%2*6}}),D.byte=A.extend({bitsInCharacterCount:[8,16,16],modeIndicator:"0100",getValue:function(t){var e=t.charCodeAt(0);if(e<=127||160<=e&&e<=255)return e;throw new Error("Unsupported character: "+t)},encode:function(t,e){for(var i=this.getModeCountString(t.length,e),n=0;n<t.length;n++)i+=T(this.getValue(t.charAt(n)),8);return i},getStringBitsLength:function(t,e){return 4+this.getBitsCharacterCount(e)+8*t}});var z={};for(var E in D)z[E]=new D[E];var M=function(t){var i=this,n=t.length-1,r=t.length-1,o=r,s=-1,a=0;i.move=function(){n+=s*a,r=o-(a^=1)},i.getNextCell=function(){for(;t[n][r]!==e;)i.move(),(n<0||n>=t.length)&&(r=o-=8!=o?2:3,n=(s=-s)<0?t.length-1:0);return{row:n,column:r}},i.getNextRemainderCell=function(){if(i.move(),t[n][r]===e)return{row:n,column:r}}};function L(t,e,i,n){for(var r=0;r<t.length;r++)t[r][i][n]=e}function I(t,e,i,n){for(var r=0;r<y.length;r++)t[r][i][n]=y[r](i,n)?1^e:parseInt(e,10)}var B=function(t,e){for(var i,n,r,o=new M(t[0]),s=0;s<e.length;s++)for(i=e[s],n=0;i.length>0;){for(var a=0;a<i.length;a++)for(var l=0;l<8;l++)r=o.getNextCell(),I(t,i[a][n].charAt(l),r.row,r.column);for(n++;i[0]&&n==i[0].length;)i.splice(0,1)}for(;r=o.getNextRemainderCell();)I(t,0,r.row,r.column)},R=function(t,e){for(var i=8*e,n=0,r=0;t.length<i&&n<"0000".length;)t+="0000".charAt(n++);for(t.length%8!=0&&(t+=new Array(9-t.length%8).join("0"));t.length<i;)t+=m[r],r^=1;return t};var O=function(t,e){for(var i=[],n=t.length-2;n>=0;n--)i[n]=t[n]^e[n];return i},N=function(t,i){for(var n=[],r=0;r<t.length;r++)for(var o=0;o<i.length;o++)n[r+o]===e?n[r+o]=(t[r]+(i[o]>=0?i[o]:0))%255:n[r+o]=l[h[n[r+o]]^h[(t[r]+i[o])%255]];return n};function V(t,i){var n=[],r=t.length-1;do{n[r]=h[(t[r]+i)%255],r--}while(t[r]!==e);return n}!function(){for(var t,e=1;e<255;e++)(t=2*h[e-1])>255&&(t^=285),h[e]=t,l[t]=e;t=2*h[e-1]^285,h[e]=t,h[-1]=0}(),function(){for(var t=2;t<=68;t++){var e=c[t-1],i=[t,0];c[t]=N(e,i)}}();var F=function(t,e){var i,n,r=c[e-1],o=new Array(e).concat(t),s=new Array(o.length-r.length).concat(r),a=t.length,h=[];for(n=0;n<a;n++)i=V(s,l[o[o.length-1]]),s.splice(0,1),o=O(i,o);for(n=o.length-1;n>=0;n--)h[e-1-n]=T(o[n],8);return h},H=function(t,e){for(var i,n,r,o,s,a=0,l=[],h=[],c=e.groups,d=0;d<c.length;d++){r=c[d][0];for(var u=0;u<r;u++){n=c[d][1],i=[],o=[];for(var p=1;p<=n;p++)s=t.substring(a,a+8),i.push(s),o[n-p]=S(s),a+=8;l.push(i),h.push(F(o,e.errorCodewordsPerBlock))}}return[l,h]},U=function(t,e,i,n,r){var o,s,l=b.exec(t),h=l?l[0]:"",c=x.exec(t),d=c?c[0]:"",u=_.exec(t),p=u?u[0]:"";return h&&(h.length>=e||t.length==h.length||h.length>=i&&!_.test(t.charAt(h.length)))?(o="numeric",s=h):p&&(t.length==p.length||p.length>=n||r==a)?(o=a,s=h||d):(o="byte",s=p?p+k.exec(t.substring(p.length))[0]:k.exec(t)[0]),{mode:o,modeString:s}},$=function(t){var e,i=[],n=0;for(i.push(U(t,8,5,8,e)),e=i[0].mode,t=t.substr(i[0].modeString.length);t.length>0;){var r=U(t,17,9,16,e);r.mode!=e?(e=r.mode,i.push(r),n++):i[n].modeString+=r.modeString,t=t.substr(r.modeString.length)}return i},j=function(t){for(var e=0,i=0;i<t.length;i++)e+=z[t[i].mode].getStringBitsLength(t[i].modeString.length);return Math.ceil(e/8)},G=function(t,e){var i=0,n=u.length-1,r=Math.floor(u.length/2);do{t<u[r][e].totalDataCodewords?n=r:i=r,r=i+Math.floor((n-i)/2)}while(n-i>1);return t<=u[i][e].totalDataCodewords?r+1:n+1},W=function(t,e){for(var i="",n=0;n<t.length;n++)i+=z[t[n].mode].encode(t[n].modeString,e);return i},q=function(t){var e,i="";if(0===S(t))return"101010000010010";e=Y(S(t),"10100110111",15);for(var n=0;n<e.length;n++)i+=e.charAt(n)^"101010000010010".charAt(n);return i},Y=function(t,e,i){var n=S(e),r=e.length-1,o=t<<r,s=T(t,i-r),a=Q(o,n);return a=s+T(a,r)},Q=function(t,e){var i=e.toString(2).length,n=t.toString(2).length;do{n=(t^=e<<n-i).toString(2).length}while(n>=i);return t};function X(t,e){return parseInt(t.charAt(e),10)}var Z=function(t){for(var e=[],i=17+4*t,n=0;n<y.length;n++){e[n]=new Array(i);for(var r=0;r<i;r++)e[n][r]=new Array(i)}return e},K=function(t,e){var i,n,r=t[0],o=0,s=e.length;for(i=0,n=8;i<=8;i++)6!==i&&L(t,X(e,s-1-o++),i,n);for(i=8,n=7;n>=0;n--)6!==n&&L(t,X(e,s-1-o++),i,n);for(o=0,n=r.length-1,i=8;n>=r.length-8;n--)L(t,X(e,s-1-o++),i,n);for(L(t,1,r.length-8,8),i=r.length-7,n=8;i<r.length;i++)L(t,X(e,s-1-o++),i,n)},J=function(t){return Y(t,"1111100100101",18)},tt=function(t,e){for(var i,n,r,o=t[0].length,s=o-11,a=o-11,l=0;l<e.length;l++)i=Math.floor(l/3),n=l%3,L(t,r=X(e,e.length-l-1),0+i,s+n),L(t,r,a+n,0+i)},et=function(t,e,i,n){for(var r,o=e.length+2,s=e.length+1,a=0;a<e.length;a++)for(var l=a;l<o-a;l++)L(t,r=e[a],i+l,n+a),L(t,r,i+a,n+l),L(t,r,i+s-l,n+s-a),L(t,r,i+s-a,n+s-l)},it=function(t,e,i,n){var r=i,o=n,s=t[0];do{L(t,0,r,n),L(t,0,i,o),r+=e[0],o+=e[1]}while(r>=0&&r<s.length)},nt=function(t){var e=t[0].length;et(t,p,0,0),it(t,[-1,-1],7,7),et(t,p,e-7,0),it(t,[1,-1],e-8,7),et(t,p,0,e-7),it(t,[-1,1],7,e-8)},rt=function(t,i){if(!(i<2)){var n,r,o=t[0],s=o.length,a=Math.floor(i/7),l=[6],h=0;for((n=d[i])?r=(s-13-n)/a:n=r=(s-13)/(a+1),l.push(l[h++]+n);l[h]+r<s;)l.push(l[h++]+r);for(var c=0;c<l.length;c++)for(var u=0;u<l.length;u++)o[l[c]][l[u]]===e&&et(t,f,l[c]-2,l[u]-2)}},ot=function(t){for(var e=1,i=t[0].length,n=8;n<i-8;n++)L(t,e,6,n),L(t,e,n,6),e^=1},st=function(t){var e,i,n=[],r=[],o=[],s=[],a=[],l=t[0].length;for(i=0;i<t.length;i++)n[i]=0,o[i]=0,a[i]=[0,0],s[i]=[0,0],r[i]=[];for(i=0;i<l;i++)for(var h=0;h<l;h++)for(var c=0;c<t.length;c++)e=t[c],o[c]+=parseInt(e[i][h],10),r[c][0]===e[i][h]&&i+1<l&&h-1>=0&&e[i+1][h]==r[c][0]&&e[i+1][h-1]==r[c][0]&&(n[c]+=3),at(c,s,n,0,e[i][h]),at(c,s,n,1,e[h][i]),lt(c,n,r,e[i][h],a,0),lt(c,n,r,e[h][i],a,1);var d,u,p,f,g,m,v,y=l*l,b=Number.MAX_VALUE;for(i=0;i<n.length;i++)n[i]+=(u=o[i],p=y,void 0,void 0,void 0,void 0,void 0,f=Math.floor(u/p*100),g=f%5,m=Math.abs(f-g-50),v=Math.abs(f+5-g-50),10*Math.min(m/5,v/5)),n[i]<b&&(b=n[i],d=i);return d};function at(t,e,i,n,r){e[t][n]=(e[t][n]<<1^r)%128,e[t][n]==v&&(i[t]+=40)}function lt(t,e,i,n,r,o){i[t][o]==n?r[t][o]++:(i[t][o]=n,r[t][o]>=5&&(e[t]+=3+r[t][o]-5),r[t][o]=1)}var ht=function(t,e){this.dataString=t,this.version=e},ct=function(){this.mode=z[this.encodingMode]};ct.fn=ct.prototype={encodingMode:"byte",utfBOM:"111011111011101110111111",initialModeCountStringLength:20,getEncodingResult:function(t,e){var i=this.encode(t),n=this.getDataCodewordsCount(i),r=G(n,e),o=this.mode.getModeCountString(i.length/8,r)+i;return new ht(o,r)},getDataCodewordsCount:function(t){var e=t.length;return Math.ceil((this.initialModeCountStringLength+e)/8)},encode:function(t){for(var e=this.utfBOM,i=0;i<t.length;i++)e+=this.encodeCharacter(t.charCodeAt(i));return e},encodeCharacter:function(t){var e=this.getBytesCount(t),i=e-1,n="";if(1==e)n=T(t,8);else{for(var r=8-e,o=0;o<i;o++)n=T(t>>6*o&63|128,8)+n;n=(t>>6*i|255>>r<<r).toString(2)+n}return n},getBytesCount:function(t){for(var e=this.ranges,i=0;i<e.length;i++)if(t<e[i])return i+1},ranges:[128,2048,65536,2097152,67108864]};var dt=function(t){return t&&t.toLowerCase().indexOf("utf_8")>=0?new ct:new function(){this.getEncodingResult=function(t,e){var i=$(t),n=j(i),r=G(n,e),o=W(i,r);return new ht(o,r)}}},ut=function(t,e,i){var n=new dt(i).getEncodingResult(t,e),r=n.version,o=u[r-1][e],s=R(n.dataString,o.totalDataCodewords),a=H(s,o),l=Z(r);nt(l),rt(l,r),ot(l),r>=7&&tt(l,T(0,18)),K(l,T(0,15)),B(l,a);var h=st(l),c=l[h];r>=7&&tt([c],J(r));var d=g[e]+T(h,3);return K([c],q(d)),c},pt={DEFAULT_SIZE:200,QUIET_ZONE_LENGTH:4,DEFAULT_ERROR_CORRECTION_LEVEL:"L",DEFAULT_BACKGROUND:"#fff",DEFAULT_DARK_MODULE_COLOR:"#000",MIN_BASE_UNIT_SIZE:1},ft=o.extend({init:function(e,i){o.fn.init.call(this,e,i),this.element=t(e),this.wrapper=this.element,this.element.addClass("k-qrcode"),this._view=r.ViewFactory.current.create({},this.options.renderAs),this.setOptions(i)},redraw:function(){var t=this._view;this._redraw(t),t.renderTo(this.element[0])},svg:function(){if(r.SVGView){var t=new r.SVGView;return this._redraw(t),t.render()}throw new Error("Unable to create SVGView. Check that kendo.dataviz.svg.js is loaded.")},imageDataURL:function(){if(r.CanvasView){if(r.supportsCanvas()){var t=document.createElement("div"),e=new r.CanvasView;return this._redraw(e),e.renderTo(t).toDataURL()}return i.logToConsole("Warning: Unable to generate image. The browser does not support Canvas.\nUser agent: "+navigator.userAgent),null}throw new Error("Unable to create CanvasView. Check that kendo.dataviz.canvas.js is loaded.")},getSize:function(){return i.dimensions(this.element)},_resize:function(){this.redraw()},_redraw:function(t){var e,i,n,r,o,s,a=this,l=a._value,h=a.options.border||{},c=a.options.padding||0,d=h.width||0;h.width=d,l&&(n=ut(l,a.options.errorCorrection,a.options.encoding),s=(r=a._getSize())-2*(d+c),e=a._calculateBaseUnit(s,n.length),o=n.length*e,i=a._calculateQuietZone(o,s,d,c),t.children=[],t.options.width=r,t.options.height=r,a._renderBackground(t,r,h),a._renderMatrix(t,n,e,i))},_getSize:function(){var t;if(this.options.size)t=parseInt(this.options.size,10);else{var e=this.element,i=Math.min(e.width(),e.height());t=i>0?i:pt.DEFAULT_SIZE}return t},_calculateBaseUnit:function(t,e){var i=Math.floor(t/e);if(i<pt.MIN_BASE_UNIT_SIZE)throw new Error("Insufficient size.");return i*e>=t&&i-1>=pt.MIN_BASE_UNIT_SIZE&&i--,i},_calculateQuietZone:function(t,e,i,n){return i+n+(e-t)/2},_renderMatrix:function(t,e,i,n){for(var r,o,a,l,h=[],c=0;c<e.length;c++)for(r=n+c*i,l=0;l<e.length;){for(;0===e[c][l]&&l<e.length;)l++;if(l<e.length){for(o=l;1==e[c][l];)l++;a=new s(C(n+o*i),C(r),C(n+l*i),C(r+i)),h.push(a.points())}}t.children.push(t.createMultiLine(h,{fill:this.options.color,stroke:this.options.color,strokeWidth:0,align:!1}))},_renderBackground:function(t,e,i){t.children.push(t.createRect(s(0,0,e,e).unpad(i.width/2),{fill:this.options.background,stroke:i.color,strokeWidth:i.width,align:!1}))},setOptions:function(t){t=t||{},this.options=n(this.options,t),t.value!==e&&(this._value=this.options.value+""),this.redraw()},value:function(t){if(t===e)return this._value;this._value=t+"",this.redraw()},options:{name:"QRCode",renderAs:"canvas",encoding:"ISO_8859_1",value:"",errorCorrection:pt.DEFAULT_ERROR_CORRECTION_LEVEL,background:pt.DEFAULT_BACKGROUND,color:pt.DEFAULT_DARK_MODULE_COLOR,size:"",padding:0,border:{color:"",width:0}}});r.ui.plugin(ft),i.deepExtend(r,{QRCode:ft,QRCodeDefaults:pt,QRCodeFunctions:{FreeCellVisitor:M,fillData:B,padDataString:R,generateErrorCodewords:F,xorPolynomials:O,getBlocks:H,multiplyPolynomials:N,chooseMode:U,getModes:$,getDataCodewordsCount:j,getVersion:G,getDataString:W,encodeFormatInformation:q,encodeBCH:Y,dividePolynomials:Q,initMatrices:Z,addFormatInformation:K,encodeVersionInformation:J,addVersionInformation:tt,addCentricPattern:et,addFinderSeparator:it,addFinderPatterns:nt,addAlignmentPatterns:rt,addTimingFunctions:ot,scoreMaskMatrixes:st,encodeData:ut,UTF8Encoder:ct},QRCodeFields:{modes:z,powersOfTwo:l,powersOfTwoResult:h,generatorPolynomials:c}})}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=i.Class,r=i.Observable,o=i.deepExtend,s=Math,a=t.proxy,l=i.dataviz,h=l.defined,c=l.filterSeriesByType,d=i.template,u=l.ui.Chart,p=l.Selection,f=l.addDuration,g=l.last,m=l.limitValue,v=l.lteDateIndex,y=l.renderTemplate,b=l.toDate,w=l.toTime,x="_navigator",_=x,k=l.EQUALLY_SPACED_SERIES,C=u.extend({init:function(e,i){t(e).addClass("k-chart"),u.fn.init.call(this,e,i)},_applyDefaults:function(t,e){var i=this.element.width()||l.DEFAULT_WIDTH,n={seriesDefaults:{categoryField:t.dateField},axisDefaults:{categoryAxis:{name:"default",majorGridLines:{visible:!1},labels:{step:2},majorTicks:{visible:!1},maxDateGroups:s.floor(i/28)}}};e&&(e=o({},e,n)),this._navigator||S.setup(t,e),u.fn._applyDefaults.call(this,t,e)},_initDataSource:function(t){var e,i,n=t||{},r=n.dataSource,s=r&&r.serverFiltering,a=[].concat(n.categoryAxis)[0],h=(n.navigator||{}).select,c=h&&h.from&&h.to;s&&c&&(e=[].concat(r.filter||[]),i=new l.DateCategoryAxis(o({baseUnit:"fit"},a,{categories:[h.from,h.to]})),r.filter=S.buildFilter(i.range().min,h.to).concat(e)),u.fn._initDataSource.call(this,t)},options:{name:"StockChart",dateField:"date",axisDefaults:{categoryAxis:{type:"date",baseUnit:"fit",justified:!0},valueAxis:{narrowRange:!0,labels:{format:"C"}}},navigator:{select:{},seriesDefaults:{markers:{visible:!1},tooltip:{visible:!0,template:"#= kendo.toString(category, 'd') #"},line:{width:2}},hint:{},visible:!0},tooltip:{visible:!0},legend:{visible:!1}},_resize:function(){var t=this.options.transitions;this.options.transitions=!1,this._fullRedraw(),this.options.transitions=t},_redraw:function(){var t=this._navigator;t&&t.dataSource?t.redrawSlaves():this._fullRedraw()},_fullRedraw:function(){var t=this._navigator;t||(t=this._navigator=new S(this)),t.filterAxes(),u.fn._redraw.call(this),t.redraw()},_onDataChanged:function(){u.fn._onDataChanged.call(this),this._dataBound=!0},_bindCategoryAxis:function(t,e,i){var n,r=this.options.categoryAxis,o=r.length;if(u.fn._bindCategoryAxis.apply(this,arguments),t.name===_)for(;i<o;)(n=r[i++]).pane==x&&(n.categories=t.categories)},_trackSharedTooltip:function(t){var e=this._plotArea.paneByPoint(t);e&&e.options.name===x?this._unsetActivePoint():u.fn._trackSharedTooltip.call(this,t)},destroy:function(){this._navigator.destroy(),u.fn.destroy.call(this)}}),S=r.extend({init:function(t){var e=this;e.chart=t,e.options=o({},e.options,t.options.navigator),e._initDataSource(),h(e.options.hint.visible)||(e.options.hint.visible=e.options.visible),t.bind("drag",a(e._drag,e)),t.bind("dragEnd",a(e._dragEnd,e)),t.bind("zoom",a(e._zoom,e)),t.bind("zoomEnd",a(e._zoomEnd,e))},options:{},_initDataSource:function(){var t=this.options,e=t.autoBind,n=t.dataSource;h(e)||(e=this.chart.options.autoBind),this._dataChangedHandler=a(this._onDataChanged,this),n&&(this.dataSource=i.data.DataSource.create(n).bind("change",this._dataChangedHandler),e&&this.dataSource.fetch())},_onDataChanged:function(){var t,e,i,n,r,o=this.chart,s=o.options.series,a=s.length,l=o.options.categoryAxis,h=l.length,c=this.dataSource.view();for(t=0;t<a;t++)(i=s[t]).axis==_&&o._isBindable(i)&&(i.data=c);for(e=0;e<h;e++)(n=l[e]).pane==x&&(n.name==_?(o._bindCategoryAxis(n,c,e),r=n.categories):n.categories=r);o._model&&(this.redraw(),this.filterAxes(),(!o.options.dataSource||o.options.dataSource&&o._dataBound)&&this.redrawSlaves())},destroy:function(){var t=this.dataSource;t&&t.unbind("change",this._dataChangeHandler),this.selection&&this.selection.destroy()},redraw:function(){this._redrawSelf();var e,i=this,n=i.chart,r=i.options,o=i.mainAxis(),s=(e=o,P.prototype=e,new P),a=o.options.categories,l=i.options.select||{},h=i.selection,c=o.range(),d=c.min,u=c.max,f=l.from||d,g=l.to||u;a.length>0&&(h&&(h.destroy(),h.wrapper.remove()),s.box=o.box,h=i.selection=new p(n,s,{min:d,max:u,from:f,to:g,selectStart:t.proxy(i._selectStart,i),select:t.proxy(i._select,i),selectEnd:t.proxy(i._selectEnd,i),mousewheel:{zoom:"left"}}),r.hint.visible&&(i.hint=new T(n.element,{min:d,max:u,template:r.hint.template,format:r.hint.format})))},_redrawSelf:function(t){var e=this.chart._plotArea;e&&e.redraw(g(e.panes),t)},redrawSlaves:function(){var t=this.chart,e=t._plotArea,i=e.panes.slice(0,-1);e.srcSeries=t.options.series,e.redraw(i)},_drag:function(t){var e,i,n,r=this.chart,o=r._eventCoordinates(t.originalEvent),s=this.mainAxis(),a=s.range(),l=s.pane.box.containsPoint(o),h=r._plotArea.categoryAxis,c=t.axisRanges[h.options.name],d=this.options.select,u=this.selection;c&&!l&&u&&(e=d.from&&d.to?w(d.to)-w(d.from):w(u.options.to)-w(u.options.from),i=b(m(w(c.min),a.min,w(a.max)-e)),n=b(m(w(i)+e,w(a.min)+e,a.max)),this.options.select={from:i,to:n},this._liveDrag()&&(this.filterAxes(),this.redrawSlaves()),u.set(i,n),this.showHint(i,n))},_dragEnd:function(){this.filterAxes(),this.filterDataSource(),this.redrawSlaves(),this.hint&&this.hint.hide()},_liveDrag:function(){var t=i.support,e=t.touch,n=t.browser,r=n.mozilla,o=n.msie&&n.version<9;return!e&&!r&&!o},readSelection:function(){var t=this.selection.options,e=this.options.select;e.from=t.from,e.to=t.to},filterAxes:function(){var t,e,i=this.options.select||{},n=this.chart.options.categoryAxis,r=i.from,o=i.to;for(t=0;t<n.length;t++)(e=n[t]).pane!==x&&(e.min=b(r),e.max=b(o))},filterDataSource:function(){var t,e=this.options.select||{},i=this.chart,n=i.dataSource,r=n&&n.options.serverFiltering;this.dataSource&&r&&(t=new l.DateCategoryAxis(o({baseUnit:"fit"},i.options.categoryAxis[0],{categories:[e.from,e.to]})).options,n.filter(S.buildFilter(f(t.min,-t.baseUnitStep,t.baseUnit),f(t.max,t.baseUnitStep,t.baseUnit))))},_zoom:function(t){var e,n,r=this,o=r.chart,a=t.delta,l=o._plotArea.categoryAxis,h=r.options.select,c=r.selection,d=r.mainAxis().options.categories;c&&(e=v(c.options.from,d),n=v(c.options.to,d),t.originalEvent.preventDefault(),s.abs(a)>1&&(a*=3),n-e>1?(c.expand(a),r.readSelection()):(l.options.min=h.from,h.from=l.scaleRange(-t.delta).min),i.support.touch||(r.filterAxes(),r.redrawSlaves()),c.set(h.from,h.to),r.showHint(r.options.select.from,r.options.select.to))},_zoomEnd:function(t){this._dragEnd(t)},showHint:function(t,e){var i=this.chart._plotArea;this.hint&&this.hint.show(t,e,i.backgroundBox())},_selectStart:function(t){var e=this.chart;e._selectStart.call(e,t)},_select:function(t){var e=this.chart;this.showHint(t.from,t.to),e._select.call(e,t)},_selectEnd:function(t){var e=this.chart;this.hint&&this.hint.hide(),this.readSelection(),this.filterAxes(),this.filterDataSource(),this.redrawSlaves(),e._selectEnd.call(e,t)},mainAxis:function(){var t=this.chart._plotArea;if(t)return t.namedCategoryAxes[_]}});S.setup=function(t,e){t=t||{};var i=o({},(e=e||{}).navigator,t.navigator),n=t.panes=[].concat(t.panes),r=o({},i.pane,{name:x});i.visible||(r.visible=!1,r.height=.1),n.push(r),S.attachAxes(t,i),S.attachSeries(t,i,e)},S.attachAxes=function(t,e){var i,n,r=e.series||[];i=t.categoryAxis=[].concat(t.categoryAxis),n=t.valueAxis=[].concat(t.valueAxis);var s=0===c(r,k).length,a=o({type:"date",pane:x,roundToBaseUnit:!s,justified:s,_collapse:!1,tooltip:{visible:!1},labels:{step:1},autoBind:!e.dataSource,autoBaseUnitSteps:{minutes:[1],hours:[1],days:[1,2],weeks:[],months:[1],years:[1]},_overlap:!1}),l=e.categoryAxis;i.push(o({},a,{maxDateGroups:200},l,{name:_,baseUnit:"fit",baseUnitStep:"auto",labels:{visible:!1},majorTicks:{visible:!1}}),o({},a,l,{name:_+"_labels",maxDateGroups:20,baseUnitStep:"auto",autoBaseUnitSteps:{minutes:[]},majorTicks:{visible:!0}}),o({},a,l,{name:_+"_ticks",maxDateGroups:200,majorTicks:{visible:!0,width:.5},labels:{visible:!1,mirror:!0}})),n.push(o({name:_,pane:x,majorGridLines:{visible:!1},visible:!1},e.valueAxis))},S.attachSeries=function(t,e,i){var n,r=t.series=t.series||[],s=[].concat(e.series||[]),a=i.seriesColors,l=e.seriesDefaults;for(n=0;n<s.length;n++)r.push(o({color:a[n%a.length],categoryField:e.dateField,visibleInLegend:!1,tooltip:{visible:!1}},l,s[n],{axis:_,categoryAxis:_,autoBind:!e.dataSource}))},S.buildFilter=function(t,e){return[{field:"Date",operator:"gte",value:b(t)},{field:"Date",operator:"lt",value:b(e)}]};var T=n.extend({init:function(e,i){var n=this;n.options=o({},n.options,i),n.container=e,n.chartPadding={top:parseInt(e.css("paddingTop"),10),left:parseInt(e.css("paddingLeft"),10)},n.template=n.template,n.template||(n.template=n.template=y("<div class='k-navigator-hint' style='display: none; position: absolute; top: 1px; left: 1px;'><div class='k-tooltip'>&nbsp;</div><div class='k-scroll' /></div>")),n.element=t(n.template()).appendTo(e)},options:{format:"{0:d} - {1:d}",hideDelay:500},show:function(t,e,n){var r=this,o=b(w(t)+w(e-t)/2),s=r.options,a=i.format(r.options.format,t,e),l=r.element.find(".k-tooltip"),h=r.element.find(".k-scroll"),c=.4*n.width(),u=n.center().x-c,p=(n.center().x-u)/(s.max-s.min),f=o-s.min;r._hideTimeout&&clearTimeout(r._hideTimeout),r._visible||(r.element.stop(!1,!0).css("visibility","hidden").show(),r._visible=!0),s.template&&(a=d(s.template)({from:t,to:e})),l.html(a).css({left:n.center().x-l.outerWidth()/2,top:n.y1}),h.css({width:c,left:u+f*p,top:n.y1+parseInt(l.css("margin-top"),10)+parseInt(l.css("border-top-width"),10)+l.height()/2}),r.element.css("visibility","visible")},hide:function(){var t=this;t._hideTimeout&&clearTimeout(t._hideTimeout),t._hideTimeout=setTimeout(function(){t._visible=!1,t.element.fadeOut("slow")},t.options.hideDelay)}});function P(){}l.ui.plugin(C),o(l,{Navigator:S})}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=i.dataviz,r=n.ui.Chart,o=i.data.ObservableArray,s=n.SharedTooltip,a=i.deepExtend,l=t.isArray,h=n.inArray,c=Math,d=["bar","bullet"],u=r.extend({init:function(e,i){var n=this.stage=t("<span />"),s=i||{};e=t(e).addClass("k-sparkline").empty().append(n),this._initialWidth=c.floor(e.width()),s=f(s),(l(s)||s instanceof o)&&(s={seriesDefaults:{data:s}}),s.series||(s.series=[{data:f(s.data)}]),a(s,{seriesDefaults:{type:s.type}}),(h(s.series[0].type,d)||h(s.seriesDefaults.type,d))&&(s=a({},{categoryAxis:{crosshair:{visible:!1}}},s)),r.fn.init.call(this,e,s)},options:{name:"Sparkline",chartArea:{margin:2},axisDefaults:{visible:!1,majorGridLines:{visible:!1},valueAxis:{narrowRange:!0}},seriesDefaults:{type:"line",area:{line:{width:.5}},bar:{stack:!0},padding:2,width:.5,overlay:{gradient:null},highlight:{visible:!1},border:{width:0},markers:{size:2,visible:!1}},tooltip:{visible:!0,shared:!0},categoryAxis:{crosshair:{visible:!0,tooltip:{visible:!1}}},legend:{visible:!1},transitions:!1,pointWidth:5,panes:[{clip:!1}]},_applyDefaults:function(t){var e=n.ViewFactory.current.create({},t.renderAs);n.CanvasView&&e instanceof n.CanvasView&&a(t,{categoryAxis:{crosshair:{visible:!1}}}),r.fn._applyDefaults.apply(this,arguments)},_modelOptions:function(){var t,e=this.options,i=this._initialWidth,n=this.stage;return this.stage[0].innerHTML="&nbsp;",t=a({width:i||this._autoWidth(),height:n.height(),transitions:e.transitions},e.chartArea,{inline:!0,align:!1}),n.css({width:t.width,height:t.height}),t},_createTooltip:function(){var t=this.options,e=this.element;return this._sharedTooltip()?new p(e,this._plotArea,t.tooltip):r.fn._createTooltip.call(this)},_renderView:function(){return this.element.empty().append(this.stage),this._view.renderTo(this.stage[0])},_autoWidth:function(){var t,e,i,r=this.options,o=n.getSpacing(r.chartArea.margin),s=r.series,a=this.dataSource.total(),l=0;for(e=0;e<s.length;e++){if("bar"===(i=s[e]).type)return 150;if("bullet"===i.type)return 150;if("pie"===i.type)return this.stage.height();i.data&&(l=c.max(l,i.data.length))}return(t=c.max(a,l)*r.pointWidth)>0&&(t+=o.left+o.right),t}}),p=s.extend({options:{animation:{duration:0}},_anchor:function(t,e){var i=s.fn._anchor.call(this,t,e);return i.y=-this.element.height()-this.options.offset,i},_hideElement:function(){this.element.hide()}});function f(t){return"number"==typeof t?[t]:t}n.ui.plugin(u),a(n,{})}(window.kendo.jQuery),function(){var t=jQuery,e=document,i=Math,n=window.kendo,r=n.Class,o=n.deepExtend,s=n.dataviz,a=s.Color,l=s.Box2D,h=s.Point2D,c=s.ExpandAnimation,d=s.ViewBase,u=s.ViewElement,p=s.defined,f=s.renderTemplate,g=s.uniqueId,m=s.rotatePoint,v=s.round,y=s.supportsSVG,b=s.CLIP,w=s.COORD_PRECISION,x=s.DEFAULT_WIDTH,_=s.DEFAULT_HEIGHT,k=s.DEFAULT_FONT,C=d.extend({init:function(t){var e=this;d.fn.init.call(e,t),e.decorators.push(new H(e),new U(e),new $(e)),s.ui.Chart&&e.decorators.push(new s.BarAnimationDecorator(e),new s.PieAnimationDecorator(e),new s.BubbleAnimationDecorator(e)),e.decorators.push(new j(e)),n.support.browser.msie&&!y()&&void 0!==window.performance||e.decorators.push(new s.FadeAnimationDecorator(e)),s.Gauge&&e.decorators.push(new s.RadialPointerAnimationDecorator(e),new s.ArrowPointerAnimationDecorator(e),new s.BarIndicatorAnimationDecorator(e)),e.template=C.template,e.tagName=e.options.inline?"span":"div",e.template||(e.template=C.template=f("<#= d.tagName # style='width:#= d.options.width #px; height:#= d.options.height #px; position: relative;'>#= d.renderContent() #</#= d.tagName #>"))},options:{width:x,height:_},renderTo:function(t){var i;return e.namespaces&&e.namespaces.add("kvml","urn:schemas-microsoft-com:vml","#default#VML"),this.setupAnimations(),t.innerHTML=this.render(),this.playAnimations(),i=t.firstChild,this._viewElement=i,i},renderElement:function(t){var i,n=e.createElement("div");return n.style.display="none",e.body.appendChild(n),n.innerHTML=t.render(),i=n.firstChild,e.body.removeChild(n),i},createText:function(t,e){return this.decorate(e&&e.rotation?new T(t,e):new S(t,e))},createRect:function(t,e){return this.decorate(new E(t.points(),!0,this.setDefaults(e)))},createCubicCurve:function(t,e,i){return new z(t,e,i)},createLine:function(t,e,i,n,r){return this.decorate(new E([new h(t,e),new h(i,n)],!1,this.setDefaults(r)))},createMultiLine:function(t,e){return this.decorate(new M(t,!1,this.setDefaults(e)))},createPolyline:function(t,e,i){return this.decorate(new E(t,e,this.setDefaults(i)))},createCircle:function(t,e,i){return this.decorate(new B(t,e,i))},createSector:function(t,e){return this.decorate(new I(t,e))},createRing:function(t,e){return this.decorate(new L(t,this.setDefaults(e)))},createGroup:function(t){return this.decorate(new R(this.setDefaults(t)))},createClipPath:function(t,e){var i;return i=new O(e,{id:t}),this.definitions[t]=i,i},createGradient:function(t){var e=p(t.cx)&&p(t.cy)&&p(t.bbox);return"radial"===t.type&&e?new F(t):"linear"===t.type?new V(t):"#000"}}),S=u.extend({init:function(t,e){u.fn.init.call(this,e),this.content=t,this.template=S.template,this.template||(this.template=S.template=f("<kvml:textbox #= d.renderId() # #= d.renderDataAttributes() #style='position: absolute; left: #= d.options.x #px; top: #= d.options.y #px; font: #= d.options.font #; color: #= d.options.color #; visibility: #= d.renderVisibility() #; white-space: nowrap; #= d.renderCursor() #'>#= d.content #</kvml:textbox>"))},options:{x:0,y:0,font:k,color:"#000",fillOpacity:1,cursor:{}},refresh:function(e){t(e).css("visibility",this.renderVisibility())},clone:function(){return new S(this.content,o({},this.options))},renderVisibility:function(){return this.options.fillOpacity>0?"visible":"hidden"},renderCursor:function(){var t=this.options,e="";return p(t.cursor.style)&&(e+="cursor: "+t.cursor.style+";"),e}}),T=u.extend({init:function(t,e){u.fn.init.call(this,e),this.content=t,this.template=T.template,this.template||(this.template=T.template=f("<kvml:shape #= d.renderId() # #= d.renderDataAttributes() #style='position: absolute; top: 0px; left: 0px; width: 1px; height: 1px;' stroked='false' coordsize='1,1'>#= d.renderPath() #<kvml:fill color='#= d.options.color #' /><kvml:textpath on='true' style='font: #= d.options.font #;' fitpath='false' string='#= d.content #' /></kvml:shape>"))},options:{x:0,y:0,font:k,color:"#000",size:{width:0,height:0}},renderPath:function(){var t=this.options,e=t.size.width,i=t.size.height,n=t.x+e/2,r=t.y+i/2,o=-t.rotation,s=m(t.x,r,n,r,o),a=m(t.x+e,r,n,r,o);return"<kvml:path textpathok='true' v='m "+v(s.x)+","+v(s.y)+" l "+v(a.x)+","+v(a.y)+"' />"}}),P=u.extend({init:function(t){u.fn.init.call(this,t),this.template=P.template,this.template||(this.template=P.template=f('<kvml:stroke on=\'#= !!d.options.stroke && !!d.options.strokeWidth #\' #= d.renderAttr("color", d.options.stroke) #weight=\'#= d.options.strokeWidth || 0 #px\' #= d.renderAttr("dashstyle", d.options.dashType) ##= d.renderAttr("opacity", d.options.strokeOpacity) # />'))},refresh:function(t){try{t.opacity=this.options.strokeOpacity}catch(t){}}}),A=u.extend({init:function(t){u.fn.init.call(this,t),this.template=A.template,this.template||(this.template=A.template=f('<kvml:fill on=\'#= d.isEnabled() #\' #= d.renderAttr("color", d.options.fill) ##= d.renderAttr("weight", d.options.fillWidth) ##= d.renderAttr("opacity", d.options.fillOpacity) # />'))},isEnabled:function(){var t=this.options.fill;return!!t&&"transparent"!==t.toLowerCase()},refresh:function(t){try{t.opacity=this.options.fillOpacity}catch(t){}}}),D=u.extend({init:function(t){u.fn.init.call(this,t),this.template=D.template,this.template||(this.template=D.template=f("<kvml:shape #= d.renderId() # #= d.renderDataAttributes() #style='position:absolute; #= d.renderSize() # display:#= d.renderDisplay() #; #= d.renderCursor() #' coordorigin='0 0' #= d.renderCoordsize() #><kvml:path v='#= d.renderPoints() # e' />#= d.fill.render() + d.stroke.render() #</kvml:shape>")),this.stroke=new P(this.options),this.fill=new A(this.options)},options:{fill:"",fillOpacity:1,strokeOpacity:1,rotation:[0,0,0],visible:!0,cursor:{}},renderCoordsize:function(){var t=!1===this.options.align?1e4:1;return"coordsize='"+t+" "+t+"'"},renderSize:function(){var t=!1===this.options.align?100:1;return"width:"+t+"px; height:"+t+"px;"},render:function(){return this.fill.options.fillOpacity=this.options.fillOpacity,this.stroke.options.strokeOpacity=this.options.strokeOpacity,u.fn.render.call(this)},renderDisplay:function(){return this.options.visible?"block":"none"},renderPoints:function(){},refresh:function(e){if(e){var i=t(e),n=i[0].parentNode,r=this.fill,o=this.stroke;n&&(i.find("path")[0].v=this.renderPoints(),r.options=o.options=this.options,r.refresh(i.find("fill")[0]),o.refresh(i.find("stroke")[0]),i.css("display",this.renderDisplay()),n.style.cssText=n.style.cssText)}},renderCursor:function(){var t=this.options,e="";return p(t.cursor.style)&&(e+="cursor: "+t.cursor.style+";"),e}}),z=D.extend({init:function(t,e,i){D.fn.init.call(this,e),this.points=t,this.areaPoints=i},renderPoints:function(){var t,e,n,r=this.areaPoints,o=this.points,s=[];for(t=1;t<o.length;t+=3){n=[];for(var a=0;a<3;a++)e=o[t+a],n.push(v(e.x)+","+v(e.y));s.push("C "+n.join(" "))}if(r&&r.length){for(t=0;t<r.length;t++)s.push("L "+v(r[t].x)+","+v(r[t].y));s.push("X")}return"M "+i.round(o[0].x)+","+i.round(o[0].y)+" "+s.join(" ")+" E"}}),E=D.extend({init:function(t,e,i){D.fn.init.call(this,i),this.points=t,this.closed=e},renderPoints:function(){var t=this.points;return this._renderPoints(t)},_renderPoints:function(t){var e,i=this,n=t.length,r=function(t){var e=i.options.rotation;return m(t.x,t.y,e[1],e[2],-e[0])},o="m "+i._print(r(t[0]));if(n>1)for(o+=" l ",e=1;e<n;e++)o+=i._print(r(t[e])),e<n-1&&(o+=", ");return i.closed&&(o+=" x"),o},clone:function(){return new E(o([],this.points),this.closed,o({},this.options))},_print:function(t){var e=!1===this.options.align?100:1;return i.round(t.x*e)+","+i.round(t.y*e)}}),M=E.extend({renderPoints:function(){var t,e=this.points,i=[];for(t=0;t<e.length;t++)i.push(this._renderPoints(e[t]));return i.join(" ")}}),L=D.extend({init:function(t,e){D.fn.init.call(this,e),this.pathTemplate=L.pathTemplate,this.pathTemplate||(this.pathTemplate=L.pathTemplate=f("M #= d.osp.x #,#= d.osp.y # WA #= d.obb.l #,#= d.obb.t # #= d.obb.r #,#= d.obb.b # #= d.osp.x #,#= d.osp.y # #= d.oep.x #,#= d.oep.y # L #= d.iep.x #,#= d.iep.y # AT #= d.ibb.l #,#= d.ibb.t # #= d.ibb.r #,#= d.ibb.b # #= d.iep.x #,#= d.iep.y # #= d.isp.x #,#= d.isp.y # X E")),this.config=t},renderPoints:function(){var t,e,n,r,o=this.config,s=i.max(v(o.r),0),a=i.max(v(o.ir),0),l=v(o.c.x),c=v(o.c.y),d=o.startAngle,u=o.angle+d,p=u-d,f={l:l-s,t:c-s,r:l+s,b:c+s},g={l:l-a,t:c-a,r:l+a,b:c+a};function m(t){return new h(v(t.x),v(t.y))}return p<=1?u+=1-p:p>359&&(u-=1-p),t=m(o.point(d)),e=m(o.point(d,!0)),r=m(o.point(u)),n=m(o.point(u,!0)),this.pathTemplate({obb:f,ibb:g,osp:t,isp:e,oep:r,iep:n,cx:l,cy:c})},clone:function(){return new L(o({},this.config),o({},this.options))}}),I=L.extend({init:function(t,e){L.fn.init.call(this,t,e),this.pathTemplate=I.pathTemplate,this.pathTemplate||(this.pathTemplate=I.pathTemplate=f("M #= d.osp.x #,#= d.osp.y # WA #= d.obb.l #,#= d.obb.t # #= d.obb.r #,#= d.obb.b # #= d.osp.x #,#= d.osp.y # #= d.oep.x #,#= d.oep.y # L #= d.cx #,#= d.cy # X E"))},clone:function(){return new I(o({},this.config),o({},this.options))}}),B=u.extend({init:function(t,e,i){var n=this;u.fn.init.call(n,i),n.c=t,n.r=e,n.template=B.template,n.template||(n.template=B.template=f("<kvml:oval #= d.renderId() # #= d.renderDataAttributes() #style='position:absolute; width:#= d.r * 2 #px; height:#= d.r * 2 #px; top:#= d.c.y - d.r #px; left:#= d.c.x - d.r #px;'>#= d.fill.render() + d.stroke.render() #</kvml:oval>")),n.stroke=new P(n.options),n.fill=new A(n.options)},options:{fill:"",fillOpacity:1},refresh:function(e){var n=this.c,r=i.max(0,this.r),o=2*r,s=t(e);s.css({width:o,height:o,top:n.y-r,left:n.x-r}),this.fill.options=this.options,this.fill.refresh(s.find("fill")[0])},clone:function(){return new B(o({},this.c),this.r,o({},this.options))}}),R=u.extend({init:function(t){u.fn.init.call(this,t),this.tagName=this.options.inline?"span":"div",this.template=R.template,this.template||(this.template=R.template=f("<#= d.tagName # #= d.renderId() ##= d.renderDataAttributes() #style='position: absolute; white-space: nowrap;'>#= d.renderContent() #</#= d.tagName #>"))}}),O=u.extend({init:function(t,e){var i=this;u.fn.init.call(i,e),i.tagName=i.options.inline?"span":"div",i.template=O.template,i.clipTemplate=O.clipTemplate,i.template||(i.template=O.template=f("<#= d.tagName # #= d.renderId() #style='position:absolute;width:#= d.box.width() #px; height:#= d.box.height() + d.box.y1#px; top:0px; left:0px; clip:#= d._renderClip() #;' >#= d.renderContent() #</#= d.tagName #>"),i.clipTemplate=O.clipTemplate=f("rect(#= d.points[0].y #px #= d.points[1].x #px #= d.points[2].y #px #= d.points[0].x #px)")),i.box=t,i.points=t.points()},clone:function(){return new O(this.box,o({},this.options))},refresh:function(t){t&&(t.style.clip=this._renderClip())},_renderClip:function(){return this.clipTemplate(this)},destroy:function(){t("#"+this.options.id+">*").unwrap()}}),N=u.extend({init:function(t){u.fn.init.call(this,t)},options:{opacity:1},renderColors:function(){var t,e,n=this.options.stops,r=n.length,o=[],s=i.round;for(e=0;e<r;e++)t=n[e],o.push(s(100*t.offset)+"% "+t.color);return o.join(",")}}),V=N.extend({init:function(t){N.fn.init.call(this,t),this.template=V.template,this.template||(this.template=V.template=f("<kvml:fill type='gradient' angle='#= 270 - d.options.rotation #' colors='#= d.renderColors() #' opacity='#= d.options.opacity #' />"))},options:{rotation:0}}),F=N.extend({init:function(t){N.fn.init.call(this,t),this.template=F.template,this.template||(this.template=F.template=f("<kvml:fill type='gradienttitle' focus='100%' focusposition='#= d.focusPosition() #'colors='#= d.renderColors() #' color='#= d.firstColor() #' color2='#= d.lastColor() #' opacity='#= d.options.opacity #' />"))},focusPosition:function(){var t=this.options,e=t.bbox,i=t.cx,n=t.cy,r=Math.max(0,Math.min(1,(i-e.x1)/e.width())),o=Math.max(0,Math.min(1,(n-e.y1)/e.height()));return v(r,w)+" "+v(o,w)},firstColor:function(){return this.options.stops[0].color},lastColor:function(){var t=this.options.stops;return t[t.length-1].color}});function H(t){this.view=t}function U(t){this.view=t}function $(t){this.view=t}H.prototype={decorate:function(t){var e,i,n=t.options,r=this.view;return n.overlay&&(i=n.overlay.bbox,e=r.buildGradient(o({},n.overlay,{_overlayFill:n.fill,_bboxHash:p(i)?i.getHash():""}))),e?(delete n.overlay,n.fill=o(q(n.fill,e),{opacity:n.fillOpacity}),t):t}},U.prototype={decorate:function(t){var e=this.view,i=t.options.fill;return i&&!1!==i.supportVML&&(i.gradient&&(i=e.buildGradient(i)),"object"==typeof i&&(t.fill=e.createGradient(i))),t}},$.prototype={decorate:function(t){var e=this.view.definitions[t.options.clipPathId];return e?((e=e.clone()).options.id=g(),e.children.push(t),e):t}};var j=r.extend({init:function(t){this.view=t},decorate:function(t){var e,i=this.view,n=i.options,r=t.options.animation;return r&&r.type===b&&n.transitions?(e=new O(new l(0,0,n.width,n.height),{id:g(),inline:n.inline}),i.animations.push(new c(e,{size:n.width})),e.children.push(t),e):t}});function G(t,e,i){var n=new a(t),r=new a(e),o=W(n.r,r.r,i),s=W(n.g,r.g,i),l=W(n.b,r.b,i);return new a(o,s,l).toHex()}function W(t,e,n){return i.round(n*e+(1-n)*t)}function q(t,e){var i,n,r,s=e.stops,a=s.length,l=o({},e);for(l.stops=[],i=0;i<a;i++)n=s[i],(r=l.stops[i]=o({},s[i])).color=G(t,n.color,n.opacity),r.opacity=0;return l}n.support.browser.msie&&s.ViewFactory.current.register("vml",C,20),o(s,{VMLCircle:B,VMLClipAnimationDecorator:j,VMLClipDecorator:$,VMLClipRect:O,VMLFill:A,VMLGroup:R,VMLLine:E,VMLMultiLine:M,VMLLinearGradient:V,VMLOverlayDecorator:H,VMLPath:D,VMLRadialGradient:F,VMLRing:L,VMLRotatedText:T,VMLSector:I,VMLStroke:P,VMLText:S,VMLView:C,blendColors:G,blendGradient:q})}(window.kendo.jQuery),function(){var t=Math,e=window.kendo,i=e.deepExtend,n=e.dataviz,r=t.PI/180,o="undefined";function s(t){return typeof t!==o}function a(t,e){return s(e)?" "+t+"='"+e+"' ":""}i(n,{util:{mixins:{geometryChange:function(){this.observer&&this.observer.geometryChange()}},alignToPixel:function(e){return t.round(e)+.5},defined:s,deg:function(t){return t/r},isNumber:function(t){return"number"==typeof t&&!isNaN(t)},limitValue:function(e,i,n){return t.max(t.min(e,n),i)},round:function(e,i){var n=t.pow(10,i||0);return t.round(e*n)/n},rad:function(t){return t*r},renderAttr:a,renderAllAttr:function(t){for(var e="",i=0;i<t.length;i++)e+=a(t[i][0],t[i][1]);return e},renderPos:function(t){var i=[];if(t)for(var n=e.toHyphens(t).split("-"),r=0;r<n.length;r++)i.push("k-pos-"+n[r]);return i.join(" ")},renderSize:function(t){return"string"!=typeof t&&(t+="px"),t},sqr:function(t){return t*t},valueOrDefault:function(t,e){return s(t)?t:e}}})}(window.kendo.jQuery),function(){var t=Math,e=window.kendo,i=e.Class,n=e.deepExtend,r=e.dataviz,o=r.util,s=o.defined,a=o.rad,l=o.round,h=i.extend({init:function(t,e){this.x=t||0,this.y=e||0,this.observer=null},geometryChange:o.mixins.geometryChange,set:function(t,e){return"x"===t?this.x!==e&&(this.x=e,this.geometryChange()):"y"===t&&this.y!==e&&(this.y=e,this.geometryChange()),this},get:function(t){return"x"===t?this.x:"y"===t?this.y:void 0},equals:function(t){return t&&t.x===this.x&&t.y===this.y},clone:function(){return new h(this.x,this.y)},rotate:function(e,i){var n=a(i),r=t.cos(n),o=t.sin(n),s=e.x,l=e.y,h=this.x,c=this.y;return this.x=s+(h-s)*r+(c-l)*o,this.y=l+(c-l)*r-(h-s)*o,this.geometryChange(),this},multiply:function(t){return this.x*=t,this.y*=t,this.geometryChange(),this},transform:function(t){return this.x=t.a*this.x+t.c*this.y+t.e,this.y=t.b*this.x+t.d*this.y+t.f,this.geometryChange(),this},add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},distanceTo:function(e){var i=this.x-e.x,n=this.y-e.y;return t.sqrt(i*i+n*n)},round:function(t){return this.x=l(this.x,t),this.y=l(this.y,t),this}});h.fn.toString=function(t,e){var i=this.x,n=this.y;return s(t)&&(i=l(i,t),n=l(n,t)),i+(e=e||" ")+n},h.create=function(t,e){if(s(t))return t instanceof h?t.clone():1===arguments.length&&2===t.length?new h(t[0],t[1]):new h(t,e)};var c=i.extend({init:function(t,e){this.p0=t||new h,this.p1=e||new h,this.observer=null,this.p0.observer=this,this.p1.observer=this},geometryChange:o.mixins.geometryChange,width:function(){return this.p1.x-this.p0.x},height:function(){return this.p1.y-this.p0.y}}),d=i.extend({init:function(t,e){this.center=t||new h,this.radius=e||0,this.observer=null,this.center.observer=this},geometryChange:o.mixins.geometryChange,equals:function(t){return t&&t.center.equals(this.center)&&t.radius===this.radius},clone:function(){return new d(this.center.clone(),this.radius)},set:function(t,e){"radius"===t&&this.radius!==e&&(this.radius=e,this.geometryChange())},get:function(){return this.radius},pointAt:function(e){var i=this.center,n=this.radius,r=a(e);return new h(i.x-n*t.cos(r),i.y-n*t.sin(r))}}),u=i.extend({init:function(t,e,i,n,r,o){this.a=t||0,this.b=e||0,this.c=i||0,this.d=n||0,this.e=r||0,this.f=o||0},times:function(t){return new u(this.a*t.a+this.c*t.b,this.b*t.a+this.d*t.b,this.a*t.c+this.c*t.d,this.b*t.c+this.d*t.d,this.a*t.e+this.c*t.f+this.e,this.b*t.e+this.d*t.f+this.f)}});n(u,{translate:function(t,e){var i=new u;return i.a=1,i.b=0,i.c=0,i.d=1,i.e=t,i.f=e,i},unit:function(){return new u(1,0,0,1,0,0)},rotate:function(e,i,n){var r=new u;return r.a=t.cos(a(e)),r.b=t.sin(a(e)),r.c=-r.b,r.d=r.a,r.e=i-i*r.a+n*r.b||0,r.f=n-n*r.a-i*r.b||0,r},scale:function(t,e){var i=new u;return i.a=t,i.b=0,i.c=0,i.d=e,i.e=0,i.f=0,i}}),n(r,{geometry:{Circle:d,Matrix:u,Point:h,Rect:c}})}(window.kendo.jQuery),function(t){var e=document,i=t.noop,n=Object.prototype.toString,r=window.kendo,o=r.Class,s=r.deepExtend,a=r.dataviz,l=r.Observable.extend({clear:i,destroy:function(){this.clear(),t(this.element).kendoDestroy()},resize:function(t){var e=this.getSize(),i=this._size;!t&&i&&e.width===i.width&&e.height===i.height||(this._size=e,this._resize(e))},getSize:function(){return{width:t(this.element).width(),height:t(this.element).height()}},setSize:function(e){t(this.element).css({width:e.width,height:e.height}),this.resize()},_resize:i,_handler:function(t){var e=this;return function(i){var n=i.target._kendoNode;n&&e.trigger(t,{shape:n.srcElement,originalEvent:i})}}});l.create=function(t,e,i){return d.current.create(t,e,i)};var h=o.extend({init:function(t){this.childNodes=[],this.parent=null,t&&(this.srcElement=t,t.observer=this)},load:i,append:function(t){this.childNodes.push(t),t.parent=this},remove:function(t,e){for(var i=t;i<e;i++)this.childNodes[i].clear();this.childNodes.splice(t,e),this.parent=null},clear:function(){this.remove(0,this.childNodes.length)},invalidate:function(){this.parent&&this.parent.invalidate()},geometryChange:function(){this.invalidate()},optionsChange:function(){this.invalidate()},childrenChange:function(t){"add"===t.action?this.load(t.items):"remove"===t.action&&this.remove(t.index,t.items.length),this.invalidate()}}),c=o.extend({init:function(t,e){var i,n;for(i in this.observer=null,this.prefix=e||"",t)n=t[i],n=this.wrap(n,i),this[i]=n},optionsChange:function(t){this.observer&&this.observer.optionsChange(t)},get:function(t){return r.getter(t,!0)(this)},set:function(t,e){if(r.getter(t,!0)(this)!==e){var i=this._set(t,this.wrap(e,t));this.observer&&!i&&this.observer.optionsChange({field:this.prefix+t,value:e})}},_set:function(t,e){var i=t.indexOf(".")>=0;if(i)for(var n,o=t.split("."),s="";o.length>1;){if(s+=o.shift(),(n=r.getter(s,!0)(this))||((n=new c({},s+".")).observer=this,this[s]=n),n instanceof c)return n.set(o.join("."),e),i;s+="."}return r.setter(t)(this,e),i},wrap:function(t,e){var i=n.call(t);return null!==t&&"[object Object]"===i&&(t instanceof c||(t=new c(t,this.prefix+e+".")),t.observer=this),t}}),d=function(){this._views=[]};d.prototype={register:function(t,e,i){var n=this._views,r=n[0],o={name:t,type:e,order:i};!r||i<r.order?n.unshift(o):n.push(o)},create:function(t,e,i){var n=this._views,o=n[0];if(i){i=i.toLowerCase();for(var s=0;s<n.length;s++)if(n[s].name===i){o=n[s];break}}if(o)return new o.type(t,e);r.logToConsole("Warning: KendoUI DataViz cannot render. Possible causes:\n- The browser does not support SVG, VML and Canvas. User agent: "+navigator.userAgent+"\n- The kendo.dataviz.(svg|vml|canvas).js scripts are not loaded")}},d.current=new d,r.support.svg=e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),r.support.canvas=!!e.createElement("canvas").getContext,s(a,{drawing:{BaseNode:h,OptionsStore:c,Surface:l,SurfaceFactory:d}})}(window.kendo.jQuery),function(){var t=window.kendo,e=t.Class,i=t.deepExtend,n=t.dataviz,r=n.append,o=n.geometry,s=o.Point,a=n.drawing,l=a.OptionsStore,h=n.util,c=h.defined,d=e.extend({init:function(t){this.observer=null,this.options=new l(t||{}),this.options.observer=this},optionsChange:function(t){this.observer&&this.observer.optionsChange(t)},visible:function(t){return this.options.set("visible",t),this}}),u=d.extend({init:function(t){this.children=[],d.fn.init.call(this,t)},childrenChange:function(t,e,i){this.observer&&this.observer.childrenChange({action:t,items:e,index:i})},traverse:function(t){for(var e=this.children,i=0;i<e.length;i++){var n=e[i];t(n),n.traverse&&n.traverse(t)}},append:function(){r(this.children,arguments),this.childrenChange("add",arguments)},clear:function(){var t=this.children;this.children=[],this.childrenChange("remove",t,0)}}),p=d.extend({geometryChange:h.mixins.geometryChange,fill:function(t,e){return this.options.set("fill.color",t),c(e)&&this.options.set("fill.opacity",e),this},stroke:function(t,e,i){return this.options.set("stroke.color",t),c(e)&&this.options.set("stroke.width",e),c(i)&&this.options.set("stroke.opacity",i),this}}),f=p.extend({init:function(t,e){this.content=t,p.fn.init.call(this,e)}}),g=p.extend({init:function(t,e){p.fn.init.call(this,e),this.geometry=t||new o.Circle,this.geometry.observer=this}}),m=e.extend({init:function(t,e,i){this.anchor=t||new s,this.anchor.observer=this,this.observer=null,e&&(this.controlIn=e,this.controlIn.observer=this),i&&(this.controlOut=i,this.controlOut.observer=this)},geometryChange:h.mixins.geometryChange}),v=p.extend({init:function(t){this.segments=[],this.observer=null,p.fn.init.call(this,t)},moveTo:function(t,e){return this.segments=[],this.lineTo(t,e),this},lineTo:function(t,e){var i=c(e)?new s(t,e):t,n=new m(i);return n.observer=this,this.segments.push(n),this.geometryChange(),this},close:function(){return this.options.closed=!0,this.geometryChange(),this}}),y=p.extend({init:function(t){this.paths=[],p.fn.init.call(this,t)},moveTo:function(t,e){var i=new v;return i.observer=this,this.paths.push(i),i.moveTo(t,e),this},lineTo:function(t,e){return this.paths.length>0&&n.last(this.paths).lineTo(t,e),this},close:function(){return this.paths.length>0&&n.last(this.paths).close(),this}});i(a,{Group:u,Shape:p,Circle:g,Path:v,MultiPath:y,Segment:m,Text:f})}(window.kendo.jQuery),function(t){var e,i,n=document,r=window.kendo,o=r.deepExtend,s=r.dataviz,a=s.defined,l=s.renderTemplate,h=s.drawing,c=h.BaseNode,d=s.util,u=d.renderAttr,p=d.renderAllAttr,f=d.renderSize,g=s.DASH_ARRAYS,m="http://www.w3.org/2000/svg",v=h.Surface.extend({init:function(t,e){h.Surface.fn.init.call(this),this.options=o({},this.options,e),this.bind(this.events,this.options),this._root=new b,this._click=this._handler("click"),this._mouseenter=this._handler("mouseenter"),this._mouseleave=this._handler("mouseleave"),this._appendTo(t)},options:{width:"100%",height:"100%"},events:["click","mouseenter","mouseleave"],translate:function(t){var e=r.format("{0} {1} {2} {3}",t.x,t.y,this._size.width,this._size.height);this._offset=t,this.element.setAttribute("viewBox",e)},draw:function(t){this._root.load([t])},clear:function(){this._root.clear()},svg:function(){return this._template(this)},setSize:function(t){this.element.setAttribute("width",f(t.width)),this.element.setAttribute("height",f(t.height)),this.resize()},_resize:function(){this._offset&&this.translate(this._offset)},_template:l("<?xml version='1.0' ?><svg xmlns='"+m+"' version='1.1' width='#= kendo.dataviz.util.renderSize(d.options.width) #' height='#= kendo.dataviz.util.renderSize(d.options.height) #' style='position: absolute;'>#= d._root.render() #</svg>"),_appendTo:function(e){C(e,this._template(this)),this.element=e.firstElementChild,function(t){var e;try{e=t.getScreenCTM?t.getScreenCTM():null}catch(t){}if(e){var i=-e.e%1,n=-e.f%1,r=t.style;0===i&&0===n||(r.left=i+"px",r.top=n+"px")}}(this.element),this._root.attachTo(this.element);var i=t(this.element);i.on("click",this._click),i.on("mouseover",this._mouseenter),i.on("mouseout",this._mouseleave),this.resize()}}),y=c.extend({load:function(t){var e,i,n,r,o=this.element;for(r=0;r<t.length;r++)n=(i=t[r]).children,i instanceof h.Group?e=new w(i):i instanceof h.Path?e=new x(i):i instanceof h.MultiPath?e=new _(i):i instanceof h.Circle&&(e=new k(i)),n&&n.length>0&&e.load(n),this.append(e),o&&e.attachTo(o)},attachTo:function(t){var e=n.createElement("div");C(e,"<svg xmlns='"+m+"' version='1.1'>"+this.render()+"</svg>");var i=e.firstChild.firstChild;i&&(t.appendChild(i),this.setElement(i))},setElement:function(t){var e,i,n=this.childNodes;for(this.element&&(this.element._kendoNode=null),this.element=t,t._kendoNode=this,i=0;i<n.length;i++)e=t.childNodes[i],n[i].setElement(e)},template:l("#= d.renderChildren() #"),render:function(){return this.template(this)},renderChildren:function(){var t,e=this.childNodes,i="";for(t=0;t<e.length;t++)i+=e[t].render();return i},clear:function(){var t=this.element;t&&(t.parentNode.removeChild(t),this.element=null),c.fn.clear.call(this)}}),b=y.extend({attachTo:function(t){this.element=t},clear:c.fn.clear}),w=y.extend({template:l("<g>#= d.renderChildren() #</g>")}),x=y.extend({geometryChange:function(){this.attr("d",this.renderData()),this.invalidate()},optionsChange:function(t){switch(t.field){case"fill":this.allAttr(this.mapFill(t.value));break;case"fill.color":this.allAttr(this.mapFill({color:t.value}));break;case"stroke":this.allAttr(this.mapStroke(t.value));break;case"visible":this.attr("visibility",t.value?"visible":"hidden");break;default:var e=this.attributeMap[t.field];e&&this.attr(e,t.value)}this.invalidate()},attributeMap:{"fill.opacity":"fill-opacity","stroke.color":"stroke","stroke.width":"stroke-width","stroke.opacity":"stroke-opacity"},attr:function(t,e){this.element&&this.element.setAttribute(t,e)},allAttr:function(t){for(var e=0;e<t.length;e++)this.attr(t[e][0],t[e][1])},renderData:function(){return this.printPath(this.srcElement)},printPath:function(t){var e=t.segments;if(e.length>0){var i,n,r=[];for(n=0;n<e.length;n++)r.push(e[n].anchor.toString(1));return i="M"+r.join(" "),t.options.closed&&(i+="Z"),i}},mapStroke:function(t){var e=[];return t&&(e.push(["stroke",t.color]),e.push(["stroke-width",t.width]),e.push(["stroke-linecap",this.renderLinecap(t)]),a(t.opacity)&&e.push(["stroke-opacity",t.opacity]),a(t.dashType)&&e.push(["stroke-dasharray",this.renderDashType(t)])),e},renderStroke:function(){return p(this.mapStroke(this.srcElement.options.stroke))},renderDashType:function(t){var e=t.width||1,i=t.dashType;if(i&&"solid"!=i){var n,r=g[i.toLowerCase()],o=[];for(n=0;n<r.length;n++)o.push(r[n]*e);return o.join(" ")}},renderLinecap:function(t){var e=t.dashType,i=t.lineCap||"square";return e&&"solid"!=e?"butt":i},mapFill:function(t){var e=[];return t&&"transparent"!==t.color?(e.push(["fill",t.color]),a(t.opacity)&&e.push(["fill-opacity",t.opacity])):e.push(["fill","none"]),e},renderFill:function(){return p(this.mapFill(this.srcElement.options.fill))},renderCursor:function(){var t=this.srcElement.options.cursor;if(t)return"cursor:"+t+";"},renderVisibility:function(){return!1===this.srcElement.options.visible?u("visibility","hidden"):""},template:l("<path #= kendo.dataviz.util.renderAttr('style', d.renderCursor()) # #= d.renderVisibility() # #= kendo.dataviz.util.renderAttr('d', d.renderData()) # #= d.renderStroke() # #= d.renderFill() # stroke-linejoin='round'></path>")}),_=x.extend({renderData:function(){var t=this.srcElement.paths;if(t.length>0){var e,i=[];for(e=0;e<t.length;e++)i.push(this.printPath(t[e]));return i.join(" ")}}}),k=x.extend({geometryChange:function(){var t=this.srcElement.geometry;this.attr("cx",t.center.x),this.attr("cy",t.center.y),this.attr("r",t.radius),this.invalidate()},template:l("<circle #= kendo.dataviz.util.renderAttr('style', d.renderCursor()) # cx='#= this.srcElement.geometry.center.x #' cy='#= this.srcElement.geometry.center.y #' r='#= this.srcElement.geometry.radius #' #= d.renderVisibility() # #= d.renderStroke() # #= d.renderFill() #></circle>")}),C=function(t,e){t.innerHTML=e};e=n.createElement("div"),i="undefined"!=typeof DOMParser,e.innerHTML="<svg xmlns='http://www.w3.org/2000/svg'></svg>",i&&e.firstChild.namespaceURI!=m&&(C=function(t,e){var i=(new DOMParser).parseFromString(e,"text/xml"),r=n.adoptNode(i.documentElement);t.innerHTML="",t.appendChild(r)}),r.support.svg&&h.SurfaceFactory.current.register("svg",v,10),o(h,{svg:{CircleNode:k,GroupNode:w,MultiPathNode:_,Node:y,PathNode:x,RootNode:b,Surface:v}})}(window.kendo.jQuery),function(t){var e=document,i=window.kendo,n=i.deepExtend,r=i.dataviz,o=r.defined,s=r.renderTemplate,a=r.drawing,l=a.BaseNode,h=r.util.renderAllAttr,c="transparent",d=a.Surface.extend({init:function(t,e){a.Surface.fn.init.call(this),this.options=n({},this.options,e),this.bind(this.events,this.options),this._root=new p,this._click=this._handler("click"),this._mouseenter=this._handler("mouseenter"),this._mouseleave=this._handler("mouseleave"),this._appendTo(t)},events:["click","mouseenter","mouseleave"],draw:function(t){var e=this;e._root.load([t]),i.support.browser.version<8&&setTimeout(function(){e.element.style.display="block"},0)},clear:function(){this._root.clear(),i.support.browser.version<8&&(this.element.style.display="none")},_template:s("<div style='width:#= kendo.dataviz.util.renderSize(d.options.width) #; height:#= kendo.dataviz.util.renderSize(d.options.height) #; position: absolute;'><#= d._root.render() #/div>"),_appendTo:function(i){e.namespaces&&e.namespaces.add("kvml","urn:schemas-microsoft-com:vml","#default#VML"),i.innerHTML=this._template(this),this.element=i.firstChild,this._root.attachTo(this.element);var n=t(this.element);n.on("click",this._click),n.on("mouseover",this._mouseenter),n.on("mouseout",this._mouseleave)}}),u=l.extend({load:function(t){var e,i,n,r,o=this.element;for(r=0;r<t.length;r++)n=(i=t[r]).children,i instanceof a.Group?e=new f(i):i instanceof a.Path?e=new v(i):i instanceof a.MultiPath?e=new y(i):i instanceof a.Circle&&(e=new b(i)),n&&n.length>0&&e.load(n),this.append(e),o&&e.attachTo(o)},attachTo:function(t){var i=e.createElement("div");i.style.display="none",e.body.appendChild(i),i.innerHTML=this.render();var n=i.firstChild;n&&(t.appendChild(n),this.setElement(n)),e.body.removeChild(i)},setElement:function(t){var e,i,n=this.childNodes;for(this.element&&(this.element._kendoNode=null),this.element=t,t._kendoNode=this,i=0;i<n.length;i++)e=t.childNodes[i],n[i].setElement(e)},template:s("#= d.renderChildren() #"),render:function(){return this.template(this)},renderChildren:function(){var t,e=this.childNodes,i="";for(t=0;t<e.length;t++)i+=e[t].render();return i},clear:function(){var t=this.element;t&&(t.parentNode.removeChild(t),this.element=null),l.fn.clear.call(this)},attr:function(t,e){this.element&&(this.element[t]=e)},allAttr:function(t){for(var e=0;e<t.length;e++)this.attr(t[e][0],t[e][1])},css:function(t,e){this.element&&(this.element.style[t]=e)}}),p=u.extend({attachTo:function(t){this.element=t},clear:l.fn.clear}),f=u.extend({template:s("<div>#= d.renderChildren() #</div>")}),g=u.extend({optionsChange:function(t){if("stroke"===t.field)this.allAttr(this.mapStroke(t.value));else{var e=this.attributeMap[t.field];e&&this.attr(e,t.value)}this.invalidate()},attributeMap:{"stroke.color":"color","stroke.width":"weight","stroke.opacity":"opacity","stroke.dashType":"dashstyle"},mapStroke:function(t){var e=[];return t?(e.push(["on","true"]),e.push(["color",t.color]),e.push(["weight",t.width+"px"]),o(t.opacity)&&e.push(["opacity",t.opacity]),o(t.dashType)&&e.push(["dashstyle",t.dashType])):e.push(["on","false"]),e},renderStroke:function(){return h(this.mapStroke(this.srcElement.options.stroke))},template:s("<kvml:stroke #= d.renderStroke() #></kvml:stroke>")}),m=u.extend({optionsChange:function(t){switch(t.field){case"fill":this.allAttr(this.mapFill(t.value));break;case"fill.color":this.allAttr(this.mapFill({color:t.value}));break;default:var e=this.attributeMap[t.field];e&&this.attr(e,t.value)}this.invalidate()},attributeMap:{"fill.opacity":"opacity"},mapFill:function(t){var e=[];return t&&t.color!==c?(e.push(["on","true"]),e.push(["color",t.color]),o(t.opacity)&&e.push(["opacity",t.opacity])):e.push(["on","false"]),e},renderFill:function(){return h(this.mapFill(this.srcElement.options.fill))},template:s("<kvml:fill #= d.renderFill() #></kvml:fill>")}),v=u.extend({init:function(t){this.fill=new m(t),this.stroke=new g(t),u.fn.init.call(this,t),this.append(this.fill),this.append(this.stroke)},geometryChange:function(){this.attr("v",this.renderData()),this.invalidate()},optionsChange:function(t){"visible"===t.field?this.css("display",t.value?"block":"none"):0===t.field.indexOf("fill")?this.fill.optionsChange(t):0===t.field.indexOf("stroke")&&this.stroke.optionsChange(t),this.invalidate()},renderData:function(){return this.printPath(this.srcElement)},printPath:function(t,e){var i=t.segments;if(i.length>0){var n,r,o=[];for(r=0;r<i.length;r++)o.push(i[r].anchor.toString(0,","));return n="m "+o.shift()+" l "+o.join(" "),t.options.closed&&(n+=" x"),!0!==e&&(n+=" e"),n}},mapFill:function(t){var e=[];return t&&t.color!==c?(e.push(["fill",t.color]),o(t.opacity)&&e.push(["fill-opacity",t.opacity])):e.push(["fill","none"]),e},renderCursor:function(){var t=this.srcElement.options.cursor;return t?"cursor:"+t+";":""},renderVisibility:function(){return!1===this.srcElement.options.visible?"display:none;":""},renderCoordsize:function(){var t=!1===this.srcElement.options.align?1e4:1;return"coordsize='"+t+" "+t+"'"},renderSize:function(){var t=!1===this.srcElement.options.align?100:1;return"width:"+t+"px;height:"+t+"px;"},template:s("<kvml:shape style='position:absolute;#= d.renderSize() # #= d.renderVisibility() # #= d.renderCursor() #' coordorigin='0 0' #= d.renderCoordsize() #>#= d.renderChildren() #<kvml:path #= kendo.dataviz.util.renderAttr('v', d.renderData()) # /></kvml:shape>")}),y=v.extend({renderData:function(){var t=this.srcElement.paths;if(t.length>0){var e,i,n=[];for(e=0;e<t.length;e++)i=e<t.length-1,n.push(this.printPath(t[e],i));return n.join(" ")}}}),b=v.extend({geometryChange:function(){var t=this.radius(),e=this.center(),i=2*t;this.css("left",e.x-t+"px"),this.css("top",e.y-t+"px"),this.css("width",i+"px"),this.css("height",i+"px"),this.invalidate()},center:function(){return this.srcElement.geometry.center},radius:function(){return this.srcElement.geometry.radius},template:s("<kvml:oval style='position:absolute;#= d.renderVisibility() ##= d.renderCursor() #width:#= d.radius() * 2 #px;height:#= d.radius() * 2 #px;top:#= d.center().y - d.radius() #px;left:#= d.center().x - d.radius() #px;'>#= d.renderChildren() #</kvml:oval>")});i.support.browser.msie&&a.SurfaceFactory.current.register("vml",d,20),n(a,{vml:{CircleNode:b,FillNode:m,GroupNode:f,MultiPathNode:y,Node:u,PathNode:v,RootNode:p,StrokeNode:g,Surface:d}})}(window.kendo.jQuery),function(t,e){var i=Math,n=i.abs,r=i.atan,o=i.atan2,s=i.cos,a=i.max,l=i.min,h=i.sin,c=i.tan,d=window.kendo,u=d.Class,p=d.dataviz,f=d.deepExtend,g=p.util,m=g.defined,v=g.rad,y=g.round,b=g.sqr,w=g.valueOrDefault,x=u.extend({init:function(t,e){1===arguments.length?(this.lat=t[0],this.lng=t[1]):(this.lat=t,this.lng=e)},DISTANCE_ITERATIONS:100,DISTANCE_CONVERGENCE:1e-12,DISTANCE_PRECISION:2,FORMAT:"{0:N6},{1:N6}",toArray:function(){return[this.lat,this.lng]},equals:function(t){return t&&t.lat===this.lat&&t.lng===this.lng},clone:function(){return new x(this.lat,this.lng)},round:function(t){return this.lng=y(this.lng,t),this.lat=y(this.lat,t),this},wrap:function(){return this.lng=this.lng%180,this.lat=this.lat%90,this},distanceTo:function(t,e){return this.greatCircleTo(t,e).distance},greatCircleTo:function(t,e){if(t=x.create(t),e=e||p.map.datums.WGS84,!t||this.clone().round(8).equals(t.clone().round(8)))return{distance:0,azimuthFrom:0,azimuthTo:0};for(var a,l,d,u,f,m,w,_,k=e.a,C=e.b,S=e.f,T=v(t.lng-this.lng),P=r((1-S)*c(v(this.lat))),A=h(P),D=s(P),z=r((1-S)*c(v(t.lat))),E=h(z),M=s(z),L=T,I=this.DISTANCE_ITERATIONS,B=!1;!B&&I-- >0;){l=h(L),d=s(L),u=i.sqrt(b(M*l)+b(D*E-A*M*d)),_=o(u,m=A*E+D*M*d);var R=D*M*l/u;w=0,0!==(f=1-b(R))&&(w=m-2*A*E/f),a=L;var O=S/16*f*(4+S*(4-3*f));L=T+(1-O)*S*R*(_+O*u*(w+O*m*(2*b(w)-1))),B=n(L-a)<=this.DISTANCE_CONVERGENCE}var N=f*(b(k)-b(C))/b(C),V=1+N/16384*(4096+N*(N*(320-175*N)-768)),F=N/1024*(256+N*(N*(74-47*N)-128)),H=F*u*(w+F/4*(m*(2*b(w)-1)-F/6*w*(4*b(u)-3)*(4*b(w)-3))),U=o(M*l,D*E-A*M*d),$=o(D*l,-A*M+D*E*d);return{distance:y(C*V*(_-H),this.DISTANCE_PRECISION),azimuthFrom:g.deg(U),azimuthTo:g.deg($)}}});x.fn.toString=function(){return d.format(this.FORMAT,this.lng,this.lat)},x.fromLngLat=function(t){return new x(t[1],t[0])},x.fromLatLng=function(t){return new x(t[0],t[1])},x.create=function(t,e){if(m(t))return t instanceof x?t.clone():1===arguments.length&&2===t.length?x.fromLatLng(t):new x(t,e)};var _=u.extend({init:function(t,e){t=x.create(t),e=x.create(e),t.lng+180>e.lng+180&&t.lat+90<e.lat+90?(this.se=t,this.nw=e):(this.se=e,this.nw=t)},contains:function(t){var e=this.nw,i=this.se,n=w(t.lng,t[1]),r=w(t.lat,t[0]);return t&&n+180>=e.lng+180&&n+180<=i.lng+180&&r+90>=i.lat+90&&r+90<=e.lat+90},center:function(){var t=this.nw,e=this.se,i=t.lng+(e.lng-t.lng)/2,n=t.lat+(e.lat-t.lat)/2;return new x(n,i)},containsAny:function(t){for(var e=!1,i=0;i<t.length;i++)e=e||this.contains(t[i]);return e},include:function(t){var e=this.nw,i=this.se,n=w(t.lng,t[1]),r=w(t.lat,t[0]);e.lng=l(e.lng,n),e.lat=a(e.lat,r),i.lng=a(i.lng,n),i.lat=l(i.lat,r)},includeAll:function(t){for(var e=0;e<t.length;e++)this.include(t[e])},edges:function(){var t=this.nw,e=this.se;return{nw:this.nw,ne:new x(t.lat,e.lng),se:this.se,sw:new x(t.lng,e.lat)}},toArray:function(){var t=this.nw,e=this.se;return[t,new x(t.lat,e.lng),e,new x(t.lng,e.lat)]},overlaps:function(t){return this.containsAny(t.toArray())||t.containsAny(this.toArray())}});_.World=new _([90,-180],[-90,180]),_.create=function(t,e){return t instanceof _?t:t&&e?new _(t,e):t&&4===t.length&&!e?new _([t[0],t[1]],[t[2],t[3]]):void 0},f(p,{map:{Extent:_,Location:x}})}(window.kendo.jQuery),function(){var t=window.kendo,e=t.ui.Widget,i=t.template,n=t.dataviz.util.valueOrDefault,r=e.extend({init:function(t,i){e.fn.init.call(this,t,i),this._initOptions(i),this.items=[],this.element.addClass("k-widget k-attribution")},options:{name:"Attribution",separator:"&nbsp;|&nbsp;",itemTemplate:"#= text #"},filter:function(t,e){this._extent=t,this._zoom=e,this._render()},add:function(t){t&&("string"==typeof t&&(t={text:t}),this.items.push(t),this._render())},remove:function(t){for(var e=[],i=0;i<this.items.length;i++){var n=this.items[i];n.text!==t&&e.push(n)}this.items=e,this._render()},clear:function(){this.items=[],this.element.empty()},_render:function(){var t=[];this.element.empty();for(var e=i(this.options.itemTemplate),n=0;n<this.items.length;n++){var r=this.items[n],o=this._itemText(r);""!==o&&t.push(e({text:o}))}this.element.append(t.join(this.options.separator))},_itemText:function(t){var e="",i=this._inZoomLevel(t.minZoom,t.maxZoom),n=this._inArea(t.extent);return i&&n&&(e+=t.text),e},_inZoomLevel:function(t,e){return t=n(t,-Number.MAX_VALUE),e=n(e,Number.MAX_VALUE),this._zoom>t&&this._zoom<e},_inArea:function(t){var e=!0;return t&&(e=t.contains(this._extent)),e}});t.dataviz.ui.plugin(r)}(jQuery),function(t){var e=window.kendo,i=e.ui.Widget,n=e.keys,r=t.proxy,o=a("n")+a("e")+a("s")+a("w"),s=i.extend({init:function(t,n){i.fn.init.call(this,t,n),this._initOptions(n),this.element.addClass("k-widget k-header k-shadow k-navigator").append(o).on("click.kendoNavigator",".k-button",r(this,"_click"));var s=this.element.parent().closest("["+e.attr("role")+"]");this._keyroot=s.length>0?s:this.element,this._tabindex(this._keyroot),this._keydown=r(this._keydown,this),this._keyroot.on("keydown",this._keydown)},options:{name:"Navigator",panStep:1},events:["pan"],dispose:function(){this._keyroot.off("keydown",this._keydown)},_pan:function(t,e){var i=this.options.panStep;this.trigger("pan",{x:t*i,y:e*i})},_click:function(e){var i=0,n=0,r=t(e.currentTarget);r.is(".k-navigator-n")?n=1:r.is(".k-navigator-s")?n=-1:r.is(".k-navigator-e")?i=1:r.is(".k-navigator-w")&&(i=-1),this._pan(i,n)},_keydown:function(t){switch(t.which){case n.UP:this._pan(0,1),t.preventDefault();break;case n.DOWN:this._pan(0,-1),t.preventDefault();break;case n.RIGHT:this._pan(1,0),t.preventDefault();break;case n.LEFT:this._pan(-1,0),t.preventDefault()}}});function a(t){return e.format('<button class="k-button k-navigator-{0}"><span class="k-icon k-i-arrow-{0}"/></button>',t)}e.dataviz.ui.plugin(s)}(jQuery),function(t){var e=window.kendo,i=e.ui.Widget,n=e.keys,r=t.proxy,o=a("in","+")+a("out","-"),s=i.extend({init:function(t,n){i.fn.init.call(this,t,n),this._initOptions(n),this.element.addClass("k-widget k-zoom-control k-button-wrap k-buttons-horizontal").append(o).on("click.kendoZoomControl",".k-button",r(this,"_click"));var s=this.element.parent().closest("["+e.attr("role")+"]");this._keyroot=s.length>0?s:this.element,this._tabindex(this._keyroot),this._keydown=r(this._keydown,this),this._keyroot.on("keydown",this._keydown)},options:{name:"ZoomControl",zoomStep:1},events:["change"],_change:function(t){var e=this.options.zoomStep;this.trigger("change",{delta:t*e})},_click:function(e){var i=1;t(e.currentTarget).is(".k-zoom-out")&&(i=-1),this._change(i)},_keydown:function(t){switch(t.which){case n.NUMPAD_PLUS:case 187:case 61:this._change(1);break;case n.NUMPAD_MINUS:case 189:case 173:this._change(-1)}}});function a(t,i){return e.format('<button class="k-button k-zoom-{0}" title="zoom-{0}">{1}</button>',t,i)}e.dataviz.ui.plugin(s)}(jQuery),function(t,e){var i=Math,n=i.atan,r=i.exp,o=i.pow,s=i.sin,a=i.log,l=i.tan,h=window.kendo,c=h.Class,d=h.dataviz,u=d.Matrix,p=h.deepExtend,f=d.geometry.Point,g=d.map.Location,m=d.util,v=m.rad,y=m.deg,b=m.limitValue,w=i.PI,x=w/2,_=w/4,k=w/180,C={a:6378137,b:6356752.314245179,f:.0033528106647474805,e:.08181919084262149},S=c.extend({init:function(t){this._initOptions(t)},MAX_LNG:180,MAX_LAT:85.0840590501,INVERSE_ITERATIONS:15,INVERSE_CONVERGENCE:1e-12,options:{centralMeridian:0,datum:C},forward:function(t,e){var i=this.options,n=i.datum.a,r=i.centralMeridian,o=b(t.lat,-this.MAX_LAT,this.MAX_LAT),s=e?b(t.lng,-this.MAX_LNG,this.MAX_LNG):t.lng,a=v(s-r)*n,l=this._projectLat(o);return new f(a,l)},_projectLat:function(t){var e=this.options.datum,i=e.e,n=e.a,r=v(t),h=l(_+r/2),c=i*s(r),d=o((1-c)/(1+c),i/2);return n*a(h*d)},inverse:function(t,e){var i=this.options,n=i.datum.a,r=i.centralMeridian,o=t.x/(k*n)+r,s=b(this._inverseY(t.y),-this.MAX_LAT,this.MAX_LAT);return e&&(o=b(o,-this.MAX_LNG,this.MAX_LNG)),new g(s,o)},_inverseY:function(t){var e,a=this.options.datum,l=a.a,h=a.e,c=h/2,d=r(-t/l),u=x-2*n(d);for(e=0;e<=this.INVERSE_ITERATIONS;e++){var p=h*s(u),f=o((1-p)/(1+p),c),g=x-2*n(d*f)-u;if(u+=g,i.abs(g)<=this.INVERSE_CONVERGENCE)break}return y(u)}}),T=S.extend({MAX_LAT:85.0511287798,_projectLat:function(t){var e=this.options.datum.a,i=v(t),n=l(_+i/2);return e*a(n)},_inverseY:function(t){var e=this.options.datum.a,i=r(-t/e);return y(x-2*n(i))}}),P=c.extend({forward:function(t){return new f(t.lng,t.lat)},inverse:function(t){return new g(t.y,t.x)}}),A=c.extend({init:function(){var t=this._proj=new T,e=this.c=2*w*t.options.datum.a;this._tm=u.translate(.5,.5).times(u.scale(1/e,-1/e)),this._itm=u.scale(e,-e).times(u.translate(-.5,-.5))},toPoint:function(t,e,i){return this._proj.forward(t,i).transform(this._tm).multiply(e||1)},toLocation:function(t,e,i){return t=t.clone().multiply(1/(e||1)).transform(this._itm),this._proj.inverse(t,i)}});p(d,{map:{crs:{EPSG3395:c.extend({init:function(){this._proj=new S},toPoint:function(t){return this._proj.forward(t)},toLocation:function(t){return this._proj.inverse(t)}}),EPSG3857:A,EPSG4326:c.extend({init:function(){this._proj=new P},toPoint:function(t){return this._proj.forward(t)},toLocation:function(t){return this._proj.inverse(t)}})},datums:{WGS84:C},projections:{Equirectangular:P,Mercator:S,SphericalMercator:T}}})}(window.kendo.jQuery),function(t,e){var i=t.proxy,n=(t.noop,window.kendo),r=n.Class,o=n.dataviz,s=n.deepExtend,a=o.defined,l=o.map.Extent;o.util.valueOrDefault;s(o,{map:{layers:{Layer:r.extend({init:function(e,n){this._initOptions(n),this.map=e,this.element=t("<div class='k-layer'></div>").css({zIndex:this.options.zIndex,opacity:this.options.opacity}).appendTo(e.scrollElement),this._beforeReset=i(this._beforeReset,this),this._reset=i(this.reset,this),this._resize=i(this._resize,this),this._panEnd=i(this._panEnd,this),this._activate(),this._updateAttribution()},destroy:function(){this._deactivate()},show:function(){this.reset(),this._activate(),this._applyExtent(!0)},hide:function(){this._deactivate(),this._setVisibility(!1)},reset:function(){this._applyExtent()},_beforeReset:t.noop,_resize:t.noop,_panEnd:function(){this._applyExtent()},_applyExtent:function(){var t=this.options,e=this.map.zoom(),i=!a(t.minZoom)||e>=t.minZoom,n=!a(t.maxZoom)||e<=t.maxZoom,r=l.create(t.extent),o=!r||r.overlaps(this.map.extent());this._setVisibility(i&&n&&o)},_setVisibility:function(t){this.element.css("display",t?"":"none")},_activate:function(){var t=this.map;t.bind("beforeReset",this._beforeReset),t.bind("reset",this._reset),t.bind("resize",this._resize),t.bind("panEnd",this._panEnd)},_deactivate:function(){var t=this.map;t.unbind("beforeReset",this._beforeReset),t.unbind("reset",this._reset),t.unbind("resize",this._resize),t.unbind("panEnd",this._panEnd)},_updateAttribution:function(){var t=this.map.attribution;t&&t.add(this.options.attribution)}})}}})}(window.kendo.jQuery),function(t,e){var i=window.kendo.jQuery.proxy,n=window.kendo,r=n.Class,o=n.data.DataSource,s=n.dataviz,a=n.deepExtend,l=s.last,h=s.util.defined,c=s.geometry,d=s.drawing,u=d.Group,p=s.map,f=p.Location,g=p.layers.Layer,m=g.extend({init:function(t,e){g.fn.init.call(this,t,e),this.surface=d.Surface.create(this.element[0],{width:t.scrollElement.width(),height:t.scrollElement.height()}),this.movable=new n.ui.Movable(this.surface.element),this._markers=[],this._click=this._handler("shapeClick"),this.surface.bind("click",this._click),this._mouseenter=this._handler("shapeMouseEnter"),this.surface.bind("mouseenter",this._mouseenter),this._mouseleave=this._handler("shapeMouseLeave"),this.surface.bind("mouseleave",this._mouseleave),this._loader=new v(this.map,this.options.style,this),this._initDataSource()},options:{autoBind:!0},destroy:function(){g.fn.destroy.call(this),this.surface.destroy(),this.dataSource.unbind("change",this._dataChange)},reset:function(){g.fn.reset.call(this),this._translateSurface(),this._data&&this._load(this._data)},_beforeReset:function(){this.surface.clear()},_resize:function(){this.surface.setSize(this.map.getSize())},_initDataSource:function(){var t=this.options.dataSource;this._dataChange=i(this._dataChange,this),this.dataSource=o.create(t).bind("change",this._dataChange),t&&this.options.autoBind&&this.dataSource.fetch()},_dataChange:function(t){this._load(t.items)},_load:function(t){this._data=t,this._clearMarkers();for(var e=0;e<t.length;e++){var i=this._loader.parse(t[e]);i&&this.surface.draw(i)}},shapeCreated:function(t){var e=!1;if(t instanceof d.Circle&&(e=h(this._createMarker(t))),!e){var i={layer:this,shape:t};e=this.map.trigger("shapeCreated",i)}return e},_createMarker:function(t){var e=this.map.markers.bind({location:t.location},t.dataItem);return e&&this._markers.push(e),e},_clearMarkers:function(){for(var t=0;t<this._markers.length;t++)this.map.markers.remove(this._markers[t]);this._markers=[]},_panEnd:function(t){g.fn._panEnd.call(this,t),this._translateSurface()},_translateSurface:function(){var t=this.map,e=t.locationToView(t.extent().nw);this.surface.translate&&(this.surface.translate(e),this.movable.moveTo(e))},_handler:function(t){var e=this;return function(i){if(i.shape){var n={layer:e,shape:i.shape,originalEvent:i.originalEvent};e.map.trigger(t,n)}}}}),v=r.extend({init:function(t,e,i){this.observer=i,this.locator=t,this.style=e},parse:function(t){var e=new u;return"Feature"===t.type?this._loadGeometryTo(e,t.geometry,t):this._loadGeometryTo(e,t,t),e.children.length<2&&(e=e.children[0]),e},_shapeCreated:function(t){var e=!1;return this.observer&&this.observer.shapeCreated&&(e=this.observer.shapeCreated(t)),e},_loadGeometryTo:function(t,e,i){var n,r,o=e.coordinates;switch(e.type){case"LineString":r=this._loadPolygon(t,[o],i),this._setLineFill(r);break;case"MultiLineString":for(n=0;n<o.length;n++)r=this._loadPolygon(t,[o[n]],i),this._setLineFill(r);break;case"Polygon":this._loadPolygon(t,o,i);break;case"MultiPolygon":for(n=0;n<o.length;n++)this._loadPolygon(t,o[n],i);break;case"Point":this._loadPoint(t,o,i);break;case"MultiPoint":for(n=0;n<o.length;n++)this._loadPoint(t,o[n],i)}},_setLineFill:function(t){var e=t.segments;(e.length<4||!e[0].anchor.equals(l(e).anchor))&&(t.options.fill=null)},_loadShape:function(t,e){return this._shapeCreated(e)||t.append(e),e},_loadPolygon:function(t,e,i){var n=this._buildPolygon(e);return n.dataItem=i,this._loadShape(t,n)},_buildPolygon:function(t){for(var e=new(t.length>1?d.MultiPath:d.Path)(this.style),i=0;i<t.length;i++)for(var n=0;n<t[i].length;n++){var r=this.locator.locationToView(f.fromLngLat(t[i][n]));0===n?e.moveTo(r.x,r.y):e.lineTo(r.x,r.y)}return e},_loadPoint:function(t,e,i){var n=f.fromLngLat(e),r=this.locator.locationToView(n),o=new c.Circle(r,10),s=new d.Circle(o,this.style);return s.dataItem=i,s.location=n,this._loadShape(t,s)}});a(n.data,{schemas:{geojson:{type:"json",data:function(t){return"FeatureCollection"===t.type?t.features:"GeometryCollection"===t.type?t.geometries:t}}},transports:{geojson:{read:{dataType:"json"}}}}),a(s,{map:{layers:{shape:m,ShapeLayer:m},GeoJSONLoader:v}})}(),function(t,e){var i=Math,n=t.proxy,r=window.kendo,o=r.Class,s=r.template,a=r.dataviz,l=a.round,h=r.deepExtend,c=a.geometry.Point,d=a.map.layers.Layer,u=a.util,p=u.renderSize,f=u.limitValue,g=d.extend({init:function(t,e){d.fn.init.call(this,t,e),"string"==typeof this.options.subdomains&&(this.options.subdomains=this.options.subdomains.split(""));var i=this._viewType();this._view=new i(this.element,this.options)},destroy:function(){d.fn.destroy.call(this),this._view.destroy(),this._view=null},reset:function(){d.fn.reset.call(this),this._updateView(),this._view.clear(),this._view.reset()},_viewType:function(){return m},_activate:function(){d.fn._activate.call(this),r.support.mobileOS||(this._pan||(this._pan=n(this._throttleRender,this)),this.map.bind("pan",this._pan))},_deactivate:function(){d.fn._deactivate.call(this),this._pan&&this.map.unbind("pan",this._pan)},_updateView:function(){var t=this._view,e=this.map,i=e.extent(),n={nw:e.locationToLayer(i.nw).round(),se:e.locationToLayer(i.se).round()};t.center(e.locationToLayer(e.center())),t.extent(n),t.zoom(e.zoom())},_resize:function(){this._render()},_throttleRender:function(){var t=new Date,e=this._renderTimestamp;(!e||t-e>100)&&(this._render(),this._renderTimestamp=t)},_panEnd:function(t){d.fn._panEnd.call(this,t),this._render()},_render:function(){this._updateView(),this._view.render()}}),m=o.extend({init:function(t,e){this.element=t,this._initOptions(e),this.pool=new y},options:{tileSize:256,subdomains:["a","b","c"],urlTemplate:""},center:function(t){this._center=t},extent:function(t){this._extent=t},zoom:function(t){this._zoom=t},pointToTileIndex:function(t){return new c(i.floor(t.x/this.options.tileSize),i.floor(t.y/this.options.tileSize))},clear:function(){this.pool.empty()},tileCount:function(){var t=this.size(),e=this.pointToTileIndex(this._extent.nw),n=this.indexToPoint(e).subtract(this._extent.nw);return{x:i.ceil((i.abs(n.x)+t.width)/this.options.tileSize),y:i.ceil((i.abs(n.y)+t.height)/this.options.tileSize)}},size:function(){var t=this._extent.nw,e=this._extent.se.clone().subtract(t);return{width:e.x,height:e.y}},indexToPoint:function(t){var e=t.x,i=t.y;return new c(e*this.options.tileSize,i*this.options.tileSize)},subdomainText:function(){var t=this.options.subdomains;return t[this.subdomainIndex++%t.length]},destroy:function(){this.element.empty(),this.pool.empty()},reset:function(){this.subdomainIndex=0,this.basePoint=this._extent.nw,this.render()},render:function(){var t,e,i,n=this.tileCount(),r=this.pointToTileIndex(this._extent.nw);for(e=0;e<n.x;e++)for(i=0;i<n.y;i++)(t=this.createTile({x:r.x+e,y:r.y+i})).options.visible||(this.element.append(t.element),t.options.visible=!0)},createTile:function(t){var e=this.tileOptions(t);return this.pool.get(this._center,e)},tileOptions:function(t){var e,i=this.wrapIndex(t),n=this.indexToPoint(t),r=n.clone().subtract(this.basePoint);return{index:i,currentIndex:t,point:n,offset:(e=r,new c(l(e.x),l(e.y))),zoom:this._zoom,subdomain:this.subdomainText(),urlTemplate:this.options.urlTemplate,errorUrlTemplate:this.options.errorUrlTemplate}},wrapIndex:function(t){var e=i.pow(2,this._zoom);return{x:this.wrapValue(t.x,e),y:f(t.y,0,e-1)}},wrapValue:function(t,e){var n=i.abs(t)%e;return t=t>=0?n:e-(0===n?e:n)}}),v=o.extend({init:function(t){this._initOptions(t),this.createElement(),this.load(),this.options.visible=!1},options:{urlTemplate:"",errorUrlTemplate:"",visible:!1},createElement:function(){this.element=t("<img style='position: absolute; display: block; visibility: visible;' />").error(n(function(t){t.target.setAttribute("src",this.errorUrl())},this))},load:function(t){this.options=h({},this.options,t);var e=this.element[0];e.style.visibility="visible",e.style.display="block",e.style.top=p(this.options.offset.y),e.style.left=p(this.options.offset.x),e.setAttribute("src",this.url()),this.options.id=b(this.options.currentIndex,this.options.zoom),this.options.visible=!0},url:function(){return s(this.options.urlTemplate)(this.urlOptions())},errorUrl:function(){return s(this.options.errorUrlTemplate)(this.urlOptions())},urlOptions:function(){var t=this.options;return{zoom:t.zoom,subdomain:t.subdomain,z:t.zoom,x:t.index.x,y:t.index.y,s:t.subdomain,quadkey:t.quadkey,q:t.quadkey,culture:t.culture,c:t.culture}},destroy:function(){this.element&&(this.element.remove(),this.element=null)}}),y=o.extend({init:function(){this._items=[]},options:{maxSize:100},get:function(t,e){return this._items.length>=this.options.maxSize?this._update(t,e):this._create(e)},empty:function(){var t,e=this._items;for(t=0;t<e.length;t++)e[t].destroy();this._items=[]},_create:function(t){var e,i,n,r,o=this._items,s=b(t.currentIndex,t.zoom);for(i=0;i<o.length;i++)(n=o[i]).options.id===s&&(r=e=n);return e?e.load(t):(r=new v(t),this._items.push(r)),r},_update:function(t,e){var i,n,r,o,s=this._items,a=-Number.MAX_VALUE,l=b(e.currentIndex,e.zoom);for(r=0;r<s.length;r++){if(i=(o=s[r]).options.point.clone().distanceTo(t),o.options.id===l)return s[r];a<i&&(n=r,a=i)}return s[n].load(e),s[n]}});function b(t,e){return"x:"+t.x+"y:"+t.y+"zoom:"+e}h(a,{map:{layers:{tile:g,TileLayer:g,ImageTile:v,TilePool:y,TileView:m}}})}(window.kendo.jQuery),function(t,e){Math;var i=t.proxy,n=window.kendo,r=(n.Class,n.template),o=n.dataviz,s=n.deepExtend,a=o.map.Extent,l=o.map.Location,h=(o.map.layers.Layer,o.map.layers.TileLayer),c=o.map.layers.TileView,d=h.extend({init:function(e,n){this._initOptions(n);var o=r(this.options.settingsUrl)({key:this.options.key,imagerySet:this.options.imagerySet});this.map=e,t.ajax({url:o,type:"get",dataType:"jsonp",jsonpCallback:"bingTileParams",success:i(this._success,this)})},options:{settingsUrl:"http://dev.virtualearth.net/REST/v1/Imagery/Metadata/#= imagerySet #?output=json&jsonp=bingTileParams&include=ImageryProviders&key=#= key #",imagerySet:"road"},_success:function(t){if(t&&t.resourceSets.length){var e=this.resource=t.resourceSets[0].resources[0];h.fn.init.call(this,this.map,{urlTemplate:e.imageUrl.replace("{subdomain}","#= subdomain #").replace("{quadkey}","#= quadkey #").replace("{culture}","#= culture #"),subdomains:e.imageUrlSubdomains,maxZoom:e.zoomMax,minZoom:e.zoomMin}),this._addAttribution(),this.reset()}},_viewType:function(){return u},_addAttribution:function(){var t=this.map.attribution;if(t){var e=this.resource.imageryProviders;if(e)for(var i=0;i<e.length;i++)for(var n=e[i],r=0;r<n.coverageAreas.length;r++){var o=n.coverageAreas[r];t.add({text:n.attribution,minZoom:o.zoomMin,maxZoom:o.zoomMax,extent:new a(new l(o.bbox[2],o.bbox[1]),new l(o.bbox[0],o.bbox[3]))})}}}}),u=c.extend({options:{culture:"en-Us"},tileOptions:function(t){var e=c.fn.tileOptions.call(this,t);return e.culture=this.options.culture,e.quadkey=this.tileQuadKey(this.wrapIndex(t)),e},tileQuadKey:function(t){var e,i,n,r="";for(n=this._zoom;n>0;n--)e=0,i=1<<n-1,0!=(t.x&i)&&e++,0!=(t.y&i)&&(e+=2),r+=e;return r}});s(o,{map:{layers:{bing:d,BingLayer:d,BingView:u}}})}(window.kendo.jQuery),function(t,e){var i=document,n=Math,r=t.inArray,o=t.proxy,s=window.kendo,a=s.Class,l=s.data.DataSource,h=s.ui.Tooltip,c=s.dataviz,d=s.deepExtend,u=c.map,p=u.Location,f=u.layers.Layer,g=f.extend({init:function(t,e){f.fn.init.call(this,t,e),this.items=[],this._initDataSource()},destroy:function(){f.fn.destroy.call(this),this.dataSource.unbind("change",this._dataChange),this.clear()},options:{zIndex:1e3,autoBind:!0,dataSource:{},locationField:"location",titleField:"title"},add:function(e){if(!t.isArray(e))return this._addOne(e);for(var i=0;i<e.length;i++)this._addOne(e[i])},remove:function(t){t.destroy();var e=r(t,this.items);e>-1&&this.items.splice(e,1)},clear:function(){for(var t=0;t<this.items.length;t++)this.items[t].destroy();this.items=[]},update:function(t){var e=t.location();e&&t.showAt(this.map.locationToView(e))},reset:function(){f.fn.reset.call(this);for(var t=this.items,e=0;e<t.length;e++)this.update(t[e])},bind:function(t,e){var i=u.Marker.create(t,this.options);i.dataItem=e;var n={marker:i};if(!this.map.trigger("markerCreated",n))return this.add(i),i},_addOne:function(t){var e=m.create(t,this.options);return e.addTo(this),e},_initDataSource:function(){var t=this.options.dataSource;this._dataChange=o(this._dataChange,this),this.dataSource=l.create(t).bind("change",this._dataChange),t&&this.options.autoBind&&this.dataSource.fetch()},_dataChange:function(t){this._load(t.items)},_load:function(t){this._data=t,this.clear();for(var e=s.getter(this.options.locationField),i=s.getter(this.options.titleField),n=0;n<t.length;n++){var r=t[n];this.bind({location:e(r),title:i(r)},r)}}}),m=a.extend({init:function(t){this.options=t||{}},addTo:function(t){this.layer=t.markers||t,this.layer.items.push(this),this.layer.update(this)},location:function(t){return t?(this.options.location=p.create(t).toArray(),this.layer&&this.layer.update(this),this):p.create(this.options.location)},showAt:function(t){this.render(),this.element.css({left:n.round(t.x),top:n.round(t.y)}),this.tooltip&&this.tooltip.popup&&this.tooltip.popup._position()},hide:function(){this.element&&(this.element.remove(),this.element=null),this.tooltip&&(this.tooltip.destroy(),this.tooltip=null)},destroy:function(){this.layer=null,this.hide()},render:function(){if(!this.element){var e=this.options,n=this.layer;this.element=t(i.createElement("span")).addClass("k-marker k-marker-"+s.toHyphens(e.shape||"pin")).attr("title",e.title).css("zIndex",e.zIndex),n&&n.element.append(this.element),this.renderTooltip()}},renderTooltip:function(){var t=this,e=t.options.title,i=t.options.tooltip||{};if(i&&h){var n=i.template;if(n){var r=s.template(n);i.content=function(e){return e.location=t.location(),e.marker=t,r(e)}}(e||i.content||i.contentUrl)&&(this.tooltip=new h(this.element,i),this.tooltip.marker=this)}}});m.create=function(t,e){return t instanceof m?t:new m(d({},e,t))},d(c,{map:{layers:{marker:g,MarkerLayer:g},Marker:m}})}(window.kendo.jQuery),function(t,e){var i=document,n=Math,r=n.min,o=n.pow,s=t.proxy,a=window.kendo,l=a.ui.Widget,h=a.deepExtend,c=a.dataviz,d=c.ui,u=c.defined,p=c.geometry,f=p.Point,g=c.map,m=g.Extent,v=g.Location,y=g.crs.EPSG3857,b=c.util,w=b.limitValue,x=b.renderPos,_=b.valueOrDefault,k=l.extend({init:function(t,e){a.destroy(t),l.fn.init.call(this,t),this._initOptions(e),this.bind(this.events,e),this.crs=new y,this.element.addClass("k-"+this.options.name.toLowerCase()).css("position","relative").empty().append(i.createElement("div")),this._viewOrigin=this._getOrigin(),this._initScroller(),this._initMarkers(),this._initControls(),this._initLayers(),this._reset(),this._mousewheel=s(this._mousewheel,this),this.element.bind("click",s(this._click,this)),this.element.bind("DOMMouseScroll mousewheel",this._mousewheel)},options:{name:"Map",controls:{attribution:!0,navigator:{panStep:100},zoom:!0},layers:[],layerDefaults:{shape:{style:{fill:{color:"#fff"},stroke:{color:"#aaa",width:.5}}},marker:{shape:"pinTarget",tooltip:{position:"top"}}},center:[0,0],zoom:3,minSize:256,minZoom:1,maxZoom:19,markers:[],markerDefaults:{shape:"pinTarget",tooltip:{position:"top"}},wraparound:!0},events:["beforeReset","click","reset","pan","panEnd","markerCreated","shapeClick","shapeCreated","shapeMouseEnter","shapeMouseLeave","zoomStart","zoomEnd"],destroy:function(){this.scroller.destroy(),this.navigator&&this.navigator.destroy(),this.attribution&&this.attribution.destroy(),this.zoomControl&&this.zoomControl.destroy(),this.markers.destroy();for(var t=0;t<this.layers.length;t++)this.layers[t].destroy();l.fn.destroy.call(this)},zoom:function(t){var e=this.options;return u(t)?(t=w(t,e.minZoom,e.maxZoom),e.zoom!==t&&(e.zoom=t,this._reset()),this):e.zoom},center:function(t){return t?(this.options.center=v.create(t).toArray(),this._reset(),this):v.create(this.options.center)},extent:function(t){return t?(this._setExtent(t),this):this._getExtent()},setOptions:function(t){l.fn.setOptions.call(this,t),this._reset()},locationToLayer:function(t,e){var i=!this.options.wraparound;return t=v.create(t),this.crs.toPoint(t,this._layerSize(e),i)},layerToLocation:function(t,e){var i=!this.options.wraparound;return t=f.create(t),this.crs.toLocation(t,this._layerSize(e),i)},locationToView:function(t){t=v.create(t);var e=this.locationToLayer(this._viewOrigin);return this.locationToLayer(t).subtract(e)},viewToLocation:function(t,e){var i=this.locationToLayer(this._getOrigin(),e);return t=(t=f.create(t)).clone().add(i),this.layerToLocation(t,e)},eventOffset:function(t){var e=this.element.offset(),i=t.originalEvent||t,n=_(i.pageX,i.clientX)-e.left,r=_(i.pageY,i.clientY)-e.top;return new p.Point(n,r)},eventToView:function(t){var e=this.eventOffset(t);return this.locationToView(this.viewToLocation(e))},eventToLayer:function(t){return this.locationToLayer(this.eventToLocation(t))},eventToLocation:function(t){var e=this.eventOffset(t);return this.viewToLocation(e)},viewSize:function(){var t=this.element,e=this._layerSize(),i=t.width();return this.options.wraparound||(i=r(e,i)),{width:i,height:r(e,t.height())}},_setOrigin:function(t,e){var i,n=this.viewSize();return t=this._origin=v.create(t),(i=this.locationToLayer(t,e)).x+=n.width/2,i.y+=n.height/2,this.options.center=this.layerToLocation(i,e).toArray(),this},_getOrigin:function(t){var e,i=this.viewSize();return!t&&this._origin||((e=this.locationToLayer(this.center())).x-=i.width/2,e.y-=i.height/2,this._origin=this.layerToLocation(e)),this._origin},_setExtent:function(t){t=m.create(t),this.center(t.center());for(var e=this.element.width(),i=this.element.height(),r=this.options.maxZoom;r>=this.options.minZoom;r--){var o=this.locationToLayer(t.nw,r),s=this.locationToLayer(t.se,r),a=n.abs(s.x-o.x),l=n.abs(s.y-o.y);if(a<=e&&l<=i)break}this.zoom(r)},_getExtent:function(){var t=this._getOrigin(),e=this.locationToLayer(t),i=this.viewSize();e.x+=i.width,e.y+=i.height;var n=this.layerToLocation(e);return new m(t,n)},_zoomAround:function(t,e){this._setOrigin(this.layerToLocation(t,e),e),this.zoom(e)},_initControls:function(){var t=this.options.controls;d.Attribution&&t.attribution&&this._createAttribution(t.attribution),a.support.mobileOS||(d.Navigator&&t.navigator&&this._createNavigator(t.navigator),d.ZoomControl&&t.zoom&&this._createZoomControl(t.zoom))},_createControlElement:function(e,i){var n=e.position||i,r="."+x(n).replace(" ","."),o=t(".k-map-controls"+r,this.element);return 0===o.length&&(o=t("<div>").addClass("k-map-controls "+x(n)).appendTo(this.element)),t("<div>").appendTo(o)},_createAttribution:function(t){var e=this._createControlElement(t,"bottomRight");this.attribution=new d.Attribution(e,t)},_createNavigator:function(t){var e=this._createControlElement(t,"topLeft"),i=this.navigator=new d.Navigator(e,t);this._navigatorPan=s(this._navigatorPan,this),i.bind("pan",this._navigatorPan),this._navigatorCenter=s(this._navigatorCenter,this),i.bind("center",this._navigatorCenter)},_navigatorPan:function(t){var e=this,i=e.scroller,n=i.scrollLeft+t.x,r=i.scrollTop-t.y,o=this._virtualSize,s=this.element.height(),a=this.element.width();n=w(n,o.x.min,o.x.max-a),r=w(r,o.y.min,o.y.max-s),e.scroller.one("scroll",function(t){e._scrollEnd(t)}),e.scroller.scrollTo(-n,-r)},_navigatorCenter:function(){this.center(this.options.center)},_createZoomControl:function(t){var e=this._createControlElement(t,"topLeft"),i=this.zoomControl=new d.ZoomControl(e,t);this._zoomControlChange=s(this._zoomControlChange,this),i.bind("change",this._zoomControlChange)},_zoomControlChange:function(t){this.trigger("zoomStart",{originalEvent:t})||(this.zoom(this.zoom()+t.delta),this.trigger("zoomEnd",{originalEvent:t}))},_initScroller:function(){var t=a.support.mobileOS?.93:.9,e=!1!==this.options.zoomable,i=this.scroller=new a.mobile.ui.Scroller(this.element.children(0),{friction:t,velocityMultiplier:5,zoom:e,mousewheelScrolling:!1});i.bind("scroll",s(this._scroll,this)),i.bind("scrollEnd",s(this._scrollEnd,this)),i.userEvents.bind("gesturestart",s(this._scaleStart,this)),i.userEvents.bind("gestureend",s(this._scale,this)),this.scrollElement=i.scrollElement},_initLayers:function(){for(var t=this.options.layers,e=this.layers=[],i=0;i<t.length;i++){var n=t[i],r=n.type||"shape",o=this.options.layerDefaults[r],s=c.map.layers[r];e.push(new s(this,h({},o,n)))}},_initMarkers:function(){this.markers=new g.layers.MarkerLayer(this,this.options.markerDefaults),this.markers.add(this.options.markers)},_scroll:function(t){var e=this.locationToLayer(this._viewOrigin).round(),i=t.sender.movable,n=new p.Point(i.x,i.y).multiply(-1).multiply(1/i.scale);e.x+=n.x,e.y+=n.y,this._setOrigin(this.layerToLocation(e)),this.trigger("pan",{originalEvent:t,origin:this._getOrigin(),center:this.center()})},_scrollEnd:function(t){this.trigger("panEnd",{originalEvent:t,origin:this._getOrigin(),center:this.center()})},_scaleStart:function(t){if(this.trigger("zoomStart",{originalEvent:t})){var e=t.touches[1];e&&e.cancel()}},_scale:function(t){var e=this.scroller.movable.scale,i=this._scaleToZoom(e),n=new p.Point(t.center.x,t.center.y),r=this.viewToLocation(n,i),o=this.locationToLayer(r,i).subtract(n);this._zoomAround(o,i),this.trigger("zoomEnd",{originalEvent:t})},_scaleToZoom:function(t){var e=this._layerSize()*t/this.options.minSize,i=n.log(e)/n.log(2);return n.round(i)},_reset:function(){this.attribution&&this.attribution.filter(this.center(),this.zoom()),this._viewOrigin=this._getOrigin(!0),this._resetScroller(),this.trigger("beforeReset"),this.trigger("reset")},_resetScroller:function(){var t=this.scroller,e=t.dimensions.x,i=t.dimensions.y,n=this._layerSize(),r=20*n,s=this.extent().nw,a=this.locationToLayer(s).round();t.reset(),t.userEvents.cancel();var l=this.options.maxZoom-this.zoom();t.dimensions.maxScale=o(2,l),t.movable.round=!0;var h={min:-a.x,max:n-a.x},c={min:-a.y,max:n-a.y};if(this.options.wraparound&&(h.min=-r,h.max=r),!1===this.options.pannable){var d=this.viewSize();h.min=c.min=0,h.max=d.width,c.max=d.height}e.makeVirtual(),i.makeVirtual(),e.virtualSize(h.min,h.max),i.virtualSize(c.min,c.max),this._virtualSize={x:h,y:c}},_renderLayers:function(){var t=this.options.layers,e=this.layers=[];this.scrollWrap.empty();for(var i=0;i<t.length;i++){var n=t[i],r=n.type||"shape",o=this.options.layerDefaults[r],s=c.map.layers[r];e.push(new s(this,h({},o,n)))}},_layerSize:function(t){return t=_(t,this.options.zoom),this.options.minSize*o(2,t)},_click:function(t){var e=this.eventOffset(t);this.trigger("click",{originalEvent:t,location:this.viewToLocation(e)})},_mousewheel:function(t){t.preventDefault();var e=c.mwDelta(t)>0?-1:1,i=this.options,n=this.zoom(),r=w(n+e,i.minZoom,i.maxZoom);if(!1!==i.zoomable&&r!==n&&!this.trigger("zoomStart",{originalEvent:t})){var o=this.eventOffset(t),s=this.viewToLocation(o),a=this.locationToLayer(s,r).subtract(o);this._zoomAround(a,r),this.trigger("zoomEnd",{originalEvent:t})}}});c.ui.plugin(k)}(window.kendo.jQuery),function(t,e){var i=t.extend,n=Math;i(t.fn,{mousewheel:function(t,e){var r=i({ns:""},e||{}),o="DOMMouseScroll"+r.ns+" mousewheel"+r.ns;return this.on(o,function(e){var i,r,o;e.data={delta:(i=e,r=i.originalEvent,o=0,r.wheelDelta?o=(o=-r.wheelDelta/40)>0?n.ceil(o):n.floor(o):r.detail&&(o=r.detail),o)},t(e)}),this}})}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=i.dataviz.diagram={},r=(i.Class,i.deepExtend),o=t.isArray,s={};r(s,{isNearZero:function(t){return Math.abs(t)<1e-6},isDefined:function(t){return void 0!==t},isUndefined:function(t){return null==t},isObject:function(t){return t===Object(t)},has:function(t,e){return Object.hasOwnProperty.call(t,e)},isString:function(t){return"[object String]"==Object.prototype.toString.call(t)},isBoolean:function(t){return"[object Boolean]"==Object.prototype.toString.call(t)},isType:function(t,e){return Object.prototype.toString.call(t)=="[object "+e+"]"},isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},isEmpty:function(t){if(null===t)return!0;if(o(t)||s.isString(t))return 0===t.length;for(var e in t)if(s.has(t,e))return!1;return!0},simpleExtend:function(t,e){if(s.isObject(e))for(var i in e)t[i]=e[i]},initArray:function(t,e){for(var i=[],n=0;n<t;++n)i[n]=e;return i},serializePoints:function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];e.push(n.x+";"+n.y)}return e.join(";")},deserializePoints:function(t){var e=t.split(";"),i=[];if(e.length%2!=0)throw"Not an array of points.";for(var r=0;r<e.length;r+=2)i.push(new n.Point(parseInt(e[r],10),parseInt(e[r+1],10)));return i},randomInteger:function(t,e){return parseInt(Math.floor(Math.random()*e)+t,10)},DFT:function(t,e){if(e(t),t.childNodes)for(var i=0;i<t.childNodes.length;i++){var n=t.childNodes[i];this.DFT(n,e)}},getMatrixAngle:function(t){return null===t||0===t.d?0:180*Math.atan2(t.b,t.d)/Math.PI},getMatrixScaling:function(t){return[Math.sqrt(t.a*t.a+t.c*t.c),Math.sqrt(t.b*t.b+t.d*t.d)]}}),s.sign=function(t){return t?t<0?-1:1:0},s.findAngle=function(t,e){return 180*function(t,e){if(t==e)return 0;var i=e.x-t.x,n=t.y-e.y,r=Math.atan(i/n);return n>=0?i<0?r+2*Math.PI:r:r+Math.PI}(t,e)/Math.PI},s.forEach=function(t,e,i){for(var n=0;n<t.length;n++)e.call(i,t[n],n,t)},s.any=function(t,e){for(var i=0;i<t.length;++i)if(e(t[i]))return t[i];return null},s.remove=function(t,e){for(var i;-1!==(i=s.indexOf(t,e));)t.splice(i,1);return t},s.contains=function(t,e){return-1!==s.indexOf(t,e)},s.indexOf=function(e,i){return t.inArray(i,e)},s.fold=function(t,e,i,n){for(var r=arguments.length>2,o=0;o<t.length;o++){var s=t[o];r?i=e.call(n,i,s,o,t):(i=s,r=!0)}if(!r)throw"Reduce of empty array with no initial value";return i},s.find=function(t,e,i){var n;return s.any(t,function(t,r,o){return!!e.call(i,t,r,o)&&(n=t,!0)}),n},s.first=function(t,e,i){return 0===t.length?null:s.isUndefined(e)?t[0]:s.find(t,e,i)},s.insert=function(t,e,i){return t.splice(i,0,e),t},s.all=function(t,e,i){for(var n,r=!0,o=0;o<t.length&&(n=t[o],r=r&&e.call(i,n,o,t));o++);return r},s.clear=function(t){t.splice(0,t.length)},s.bisort=function(t,e,i){if(s.isUndefined(t))throw"First array is not specified.";if(s.isUndefined(e))throw"Second array is not specified.";if(t.length!=e.length)throw"The two arrays should have equal length";var n,r=[];for(n=0;n<t.length;n++)r.push({x:t[n],y:e[n]});for(s.isUndefined(i)?r.sort(function(t,e){return t.x-e.x}):r.sort(function(t,e){return i(t.x,e.x)}),s.clear(t),s.clear(e),n=0;n<r.length;n++)t.push(r[n].x),e.push(r[n].y)},s.addRange=function(t,e){t.push.apply(t,e)};var a=function(t){return-Math.cos(t*Math.PI)/2+.5},l=i.Class.extend({init:function(){this.adapters=[],this.target=0,this.tick=0,this.interval=20,this.duration=800,this.lastTime=null,this.handlers=[];var t=this;this.transition=a,this.timerDelegate=function(){t.onTimerEvent()}},addAdapter:function(t){this.adapters.push(t)},onComplete:function(t){this.handlers.push(t)},removeHandler:function(e){this.handlers=t.grep(this.handlers,function(t){return t!==e})},trigger:function(){var t=this;this.handlers&&s.forEach(this.handlers,function(e){return e.call(null!==t.caller?t.caller:t)})},onStep:function(){},seekTo:function(t){this.seekFromTo(this.tick,t)},seekFromTo:function(t,e){this.target=Math.max(0,Math.min(1,e)),this.tick=Math.max(0,Math.min(1,t)),this.lastTime=(new Date).getTime(),this.intervalId||(this.intervalId=window.setInterval(this.timerDelegate,this.interval))},stop:function(){this.intervalId&&(window.clearInterval(this.intervalId),this.intervalId=null,this.trigger())},play:function(t){0!==this.adapters.length&&(null!==t&&(this.caller=t),this.initState(),this.seekFromTo(0,1))},reverse:function(){this.seekFromTo(1,0)},initState:function(){if(0!==this.adapters.length)for(var t=0;t<this.adapters.length;t++)this.adapters[t].initState()},propagate:function(){for(var t=this.transition(this.tick),e=0;e<this.adapters.length;e++)this.adapters[e].update(t)},onTimerEvent:function(){var t=(new Date).getTime(),e=t-this.lastTime;this.lastTime=t;var i=e/this.duration*(this.tick<this.target?1:-1);Math.abs(i)>=Math.abs(this.tick-this.target)?this.tick=this.target:this.tick+=i;try{this.propagate()}finally{this.onStep.call(this),this.target==this.tick&&this.stop()}}});i.deepExtend(n,{init:function(t){i.init(t,n.ui)},Utils:s,Range:function(t,e,i){if(void 0===t||void 0===e)return[];if(i&&s.sign(e-t)!=s.sign(i))throw"The sign of the increment should allow to reach the stop-value.";if(t=t||0,((e=e||t)-t)/(i=i||1)==1/0)throw"Infinite range defined.";var n,r=[],o=-1,a=function(t){for(var e=1;t*e%1;)e*=10;return e}(Math.abs(i));if(i*=a,(t*=a)>(e*=a)&&i>0&&(i=-i),i<0)for(;(n=t+i*++o)>=e;)r.push(n/a);else for(;(n=t+i*++o)<=e;)r.push(n/a);return r},Ticker:l})}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=i.dataviz.diagram,r=i.Class,o=i.deepExtend,s=i.dataviz,a=n.Utils,l=s.Point2D,h=i.isFunction,c=a.contains,d=t.map,u=1e-6;o(l.fn,{plus:function(t){return new l(this.x+t.x,this.y+t.y)},minus:function(t){return new l(this.x-t.x,this.y-t.y)},offset:function(t){return new l(this.x-t,this.y-t)},times:function(t){return new l(this.x*t,this.y*t)},normalize:function(){return 0===this.length()?new l:this.times(1/this.length())},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},toString:function(){return"("+this.x+","+this.y+")"},lengthSquared:function(){return this.x*this.x+this.y*this.y},middleOf:function(t,e){return new l(e.x-t.x,e.y-t.y).times(.5).plus(t)},toPolar:function(t){var e=1;t&&(e=180/Math.PI);var i=Math.atan2(Math.abs(this.y),Math.abs(this.x)),n=Math.PI/2,r=this.length();if(0===this.x){if(0===this.y)return new b(0,0);if(this.y>0)return new b(r,e*n);if(this.y<0)return new b(r,3*e*n)}else if(this.x>0){if(0===this.y)return new b(r,0);if(this.y>0)return new b(r,e*i);if(this.y<0)return new b(r,e*(4*n-i))}else{if(0===this.y)return new b(r,2*n);if(this.y>0)return new b(r,e*(2*n-i));if(this.y<0)return new b(r,e*(2*n+i))}},isOnLine:function(t,e){if(t.x>e.x){var i=e;e=t,t=i}var n,r,o=new f(t.x,t.y).inflate(3,3),s=new f(e.x,e.y).inflate(3,3);return!!o.union(s).contains(this)&&(t.x===e.x||t.y===e.y||(t.y<e.y?(n=o.x+(s.x-o.x)*(this.y-(o.y+o.height))/(s.y+s.height-(o.y+o.height)),r=o.x+o.width+(s.x+s.width-(o.x+o.width))*(this.y-o.y)/(s.y-o.y)):(n=o.x+(s.x-o.x)*(this.y-o.y)/(s.y-o.y),r=o.x+o.width+(s.x+s.width-(o.x+o.width))*(this.y-(o.y+o.height))/(s.y+s.height-(o.y+o.height))),this.x>n&&this.x<r))}}),o(l,{parse:function(t){var e=t.slice(1,t.length-1).split(","),i=parseInt(e[0],10),n=parseInt(e[1],10);if(!isNaN(i)&&!isNaN(n))return new l(i,n)}});var p=r.extend({init:function(t,e,i){this.point=t,this.left=e,this.right=i}}),f=r.extend({init:function(t,e,i,n){this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0},contains:function(t){return t.x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height},inflate:function(t,e){return void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t+1,this.height+=2*e+1,this},offset:function(t,e){var i=t,n=e;return t instanceof l&&(i=t.x,n=t.y),this.x+=i,this.y+=n,this},union:function(t){var e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x+t.width),r=Math.max(this.y+this.height,t.y+t.height);return new f(e,i,n-e,r-i)},center:function(){return new l(this.x+this.width/2,this.y+this.height/2)},top:function(){return new l(this.x+this.width/2,this.y)},right:function(){return new l(this.x+this.width,this.y+this.height/2)},bottom:function(){return new l(this.x+this.width/2,this.y+this.height)},left:function(){return new l(this.x,this.y+this.height/2)},topLeft:function(){return new l(this.x,this.y)},topRight:function(){return new l(this.x+this.width,this.y)},bottomLeft:function(){return new l(this.x,this.y+this.height)},bottomRight:function(){return new l(this.x+this.width,this.y+this.height)},clone:function(){return new f(this.x,this.y,this.width,this.height)},isEmpty:function(){return!this.width&&!this.height},equals:function(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},rotatedBounds:function(t){var e=this.clone(),i=this.rotatedPoints(t),n=i[0],r=i[1],o=i[2],s=i[3];return e.x=Math.min(o.x,n.x,r.x,s.x),e.y=Math.min(o.y,n.y,r.y,s.y),e.width=Math.max(o.x,n.x,r.x,s.x)-e.x,e.height=Math.max(o.y,n.y,r.y,s.y)-e.y,e},rotatedPoints:function(t){var e=this.center(),i=this.bottomRight().rotate(e,360-t);return[this.topLeft().rotate(e,360-t),this.topRight().rotate(e,360-t),i,this.bottomLeft().rotate(e,360-t)]},toString:function(t){return t=t||" ",this.x+t+this.y+t+this.width+t+this.height},scale:function(t,e,i,n,r){var o=this.topLeft(),s=this.center();o.rotate(s,360-r).rotate(n,r);var a=i.minus(o),h=new l(a.x*t,a.y*e),c=a.minus(h);(o=o.plus(c)).rotate(n,360-r).rotate(s,r),this.x=o.x,this.y=o.y,this.width*=t,this.height*=e}}),g=r.extend({init:function(t,e){this.width=t,this.height=e}});function m(t,e,i,n,r){var o=(e.x-t.x)*(n.y-i.y)-(e.y-t.y)*(n.x-i.x);if(s=o,!(Math.abs(s)<u)){var s,a=((t.y-i.y)*(n.x-i.x)-(t.x-i.x)*(n.y-i.y))/o,h=((t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y))/o;if(!r||!(a<0||a>1||h<0||h>1))return new l(t.x+a*(e.x-t.x),t.y+a*(e.y-t.y))}}g.prototype.Empty=new g(0,0),f.toRect=function(t){return t instanceof f||(t=new f(t.x,t.y,t.width,t.height)),t},f.empty=function(){return new f(0,0,0,0)},f.fromPoints=function(t,e){if(isNaN(t.x)||isNaN(t.y)||isNaN(e.x)||isNaN(e.y))throw"Some values are NaN.";return new f(Math.min(t.x,e.x),Math.min(t.y,e.y),Math.abs(t.x-e.x),Math.abs(t.y-e.y))};var v={lines:function(t,e,i,n){return m(t,e,i,n)},segments:function(t,e,i,n){return m(t,e,i,n,!0)},rectWithLine:function(t,e,i){return v.segments(e,i,t.topLeft(),t.topRight())||v.segments(e,i,t.topRight(),t.bottomRight())||v.segments(e,i,t.bottomLeft(),t.bottomRight())||v.segments(e,i,t.topLeft(),t.bottomLeft())},rects:function(t,e,i){var n=e.topLeft(),r=e.topRight(),o=e.bottomLeft(),s=e.bottomRight(),a=e.center();i&&(n=n.rotate(a,i),r=r.rotate(a,i),o=o.rotate(a,i),s=s.rotate(a,i));var l=t.contains(n)||t.contains(r)||t.contains(o)||t.contains(s)||v.rectWithLine(t,n,r)||v.rectWithLine(t,n,o)||v.rectWithLine(t,r,s)||v.rectWithLine(t,o,s);if(!l){if(n=t.topLeft(),r=t.topRight(),o=t.bottomLeft(),s=t.bottomRight(),i){var h=360-i;n=n.rotate(a,h),r=r.rotate(a,h),o=o.rotate(a,h),s=s.rotate(a,h)}l=e.contains(n)||e.contains(r)||e.contains(o)||e.contains(s)}return l}},y=r.extend({init:function(t){this.container=f.toRect(t)},align:function(t,e){for(var i=e.toLowerCase().split(" "),n=0;n<i.length;n++)t=this._singleAlign(t,i[n]);return t},_singleAlign:function(t,e){return h(this[e])?this[e](t):t},left:function(t){return this._align(t,this._left)},center:function(t){return this._align(t,this._center)},right:function(t){return this._align(t,this._right)},stretch:function(t){return this._align(t,this._stretch)},top:function(t){return this._align(t,this._top)},middle:function(t){return this._align(t,this._middle)},bottom:function(t){return this._align(t,this._bottom)},_left:function(t,e){e.x=t.x},_center:function(t,e){e.x=(t.width-e.width)/2||0},_right:function(t,e){e.x=t.width-e.width},_top:function(t,e){e.y=t.y},_middle:function(t,e){e.y=(t.height-e.height)/2||0},_bottom:function(t,e){e.y=t.height-e.height},_stretch:function(t,e){e.x=0,e.y=0,e.height=t.height,e.width=t.width},_align:function(t,e){return t=f.toRect(t),e(this.container,t),t}}),b=r.extend({init:function(t,e){this.r=t,this.angle=e}}),w=r.extend({init:function(t,e,i,n,r,o){this.a=t||0,this.b=e||0,this.c=i||0,this.d=n||0,this.e=r||0,this.f=o||0},plus:function(t){this.a+=t.a,this.b+=t.b,this.c+=t.c,this.d+=t.d,this.e+=t.e,this.f+=t.f},minus:function(t){this.a-=t.a,this.b-=t.b,this.c-=t.c,this.d-=t.d,this.e-=t.e,this.f-=t.f},times:function(t){return new w(this.a*t.a+this.c*t.b,this.b*t.a+this.d*t.b,this.a*t.c+this.c*t.d,this.b*t.c+this.d*t.d,this.a*t.e+this.c*t.f+this.e,this.b*t.e+this.d*t.f+this.f)},apply:function(t){return new l(this.a*t.x+this.c*t.y+this.e,this.b*t.x+this.d*t.y+this.f)},applyRect:function(t){return f.fromPoints(this.apply(t.topLeft()),this.apply(t.bottomRight()))},toString:function(){return"matrix("+this.a+" "+this.b+" "+this.c+" "+this.d+" "+this.e+" "+this.f+")"}});o(w,{fromSVGMatrix:function(t){var e=new w;return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.e=t.e,e.f=t.f,e},fromMatrixVector:function(t){var e=new w;return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.e=t.e,e.f=t.f,e},fromList:function(t){if(6!==t.length)throw"The given list should consist of six elements.";var e=new w;return e.a=t[0],e.b=t[1],e.c=t[2],e.d=t[3],e.e=t[4],e.f=t[5],e},translation:function(t,e){var i=new w;return i.a=1,i.b=0,i.c=0,i.d=1,i.e=t,i.f=e,i},unit:function(){return new w(1,0,0,1,0,0)},rotation:function(t,e,i){var n=new w;return n.a=Math.cos(t*Math.PI/180),n.b=Math.sin(t*Math.PI/180),n.c=-n.b,n.d=n.a,n.e=e-e*n.a+i*n.b||0,n.f=i-i*n.a-e*n.b||0,n},scaling:function(t,e){var i=new w;return i.a=t,i.b=0,i.c=0,i.d=e,i.e=0,i.f=0,i},parse:function(t){var e,i;if(t){if("matrix"===(t=t.trim()).slice(0,6).toLowerCase()){if(6===(e=(i=t.slice(7,t.length-1).trim()).split(",")).length)return w.fromList(d(e,function(t){return parseFloat(t)}));if(6===(e=i.split(" ")).length)return w.fromList(d(e,function(t){return parseFloat(t)}))}if("("===t.slice(0,1)&&")"===t.slice(t.length-1)&&(t=t.substr(1,t.length-1)),t.indexOf(",")>0&&6===(e=t.split(",")).length)return w.fromList(d(e,function(t){return parseFloat(t)}));if(t.indexOf(" ")>0&&6===(e=t.split(" ")).length)return w.fromList(d(e,function(t){return parseFloat(t)}))}return e}});var x=r.extend({init:function(t,e,i,n,r,o){this.a=t||0,this.b=e||0,this.c=i||0,this.d=n||0,this.e=r||0,this.f=o||0},fromMatrix:function(t){var e=new x;return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.e=t.e,e.f=t.f,e}});function _(t){a.isUndefined(t)&&(t=10);for(var e="",i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=t;n>0;--n)e+=i[Math.round(Math.random()*(i.length-1))];return e}var k={_distanceToLineSquared:function(t,e,i){function n(t,e){return(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)}if(e===i)return n(t,e);var r=i.x-e.x,o=i.y-e.y,s=(t.x-e.x)*r+(t.y-e.y)*o;return s<0?n(e,t):(s=(i.x-t.x)*r+(i.y-t.y)*o)<0?n(i,t):(s=(i.x-t.x)*o-(i.y-t.y)*r)*s/(r*r+o*o)},distanceToLine:function(t,e,i){return Math.sqrt(this._distanceToLineSquared(t,e,i))},distanceToPolyline:function(t,e){var i=Number.MAX_VALUE;if(a.isUndefined(e)||0===e.length)return Number.MAX_VALUE;for(var n=0;n<e.length-1;n++){var r=e[n],o=e[n+1],s=this._distanceToLineSquared(t,r,o);s<i&&(i=s)}return Math.sqrt(i)}},C=i.Class.extend({init:function(){this._buckets=[],this.length=0},add:function(t,e){var i=this._createGetBucket(t);return a.isDefined(e)&&(i.value=e),i},get:function(t){return this._bucketExists(t)?this._createGetBucket(t):null},set:function(t,e){this.add(t,e)},containsKey:function(t){return this._bucketExists(t)},remove:function(t){if(this._bucketExists(t)){var e=this._hash(t);return delete this._buckets[e],this.length--,t}},forEach:function(t){for(var e=this._hashes(),i=0,n=e.length;i<n;i++){var r=e[i],o=this._buckets[r];a.isUndefined(o)||t(o)}},clone:function(){for(var t=new C,e=this._hashes(),i=0,n=e.length;i<n;i++){var r=e[i],o=this._buckets[r];a.isUndefined(o)||t.add(o.key,o.value)}return t},_hashes:function(){var t=[];for(var e in this._buckets)this._buckets.hasOwnProperty(e)&&t.push(e);return t},_bucketExists:function(t){var e=this._hash(t);return a.isDefined(this._buckets[e])},_createGetBucket:function(t){var e=this._hash(t),i=this._buckets[e];return a.isUndefined(i)&&(i={key:t},this._buckets[e]=i,this.length++),i},_hash:function(t){if(a.isNumber(t))return t;if(a.isString(t))return this._hashString(t);if(a.isObject(t))return this._objectHashId(t);throw"Unsupported key type."},_hashString:function(t){var e=0;if(0===t.length)return e;for(var i=0;i<t.length;i++){e=32*e-e+t.charCodeAt(i)}return e},_objectHashId:function(t){var e=t._hashId;return a.isUndefined(e)&&(e=_(),t._hashId=e),e}}),S=i.Observable.extend({init:function(e){if(i.Observable.fn.init.call(this),this._hashTable=new C,this.length=0,a.isDefined(e))if(t.isArray(e))for(var n=0;n<e.length;n++)this.add(e[n]);else e.forEach(function(t,e){this.add(t,e)},this)},add:function(t,e){var i=this._hashTable.get(t);i||(i=this._hashTable.add(t),this.length++,this.trigger("changed")),i.value=e},set:function(t,e){this.add(t,e)},get:function(t){var e=this._hashTable.get(t);if(e)return e.value;throw new Error("Cannot find key "+t)},containsKey:function(t){return this._hashTable.containsKey(t)},remove:function(t){if(this.containsKey(t))return this.trigger("changed"),this.length--,this._hashTable.remove(t)},forEach:function(t,e){this._hashTable.forEach(function(i){t.call(e,i.key,i.value)})},forEachValue:function(t,e){this._hashTable.forEach(function(i){t.call(e,i.value)})},forEachKey:function(t,e){this._hashTable.forEach(function(i){t.call(e,i.key)})},keys:function(){var t=[];return this.forEachKey(function(e){t.push(e)}),t}}),T=i.Class.extend({init:function(){this._tail=null,this._head=null,this.length=0},enqueue:function(t){var e={value:t,next:null};this._head?(this._tail.next=e,this._tail=this._tail.next):(this._head=e,this._tail=this._head),this.length++},dequeue:function(){if(this.length<1)throw new Error("The queue is empty.");var t=this._head.value;return this._head=this._head.next,this.length--,t},contains:function(t){for(var e=this._head;e;){if(e.value===t)return!0;e=e.next}return!1}}),P=i.Observable.extend({init:function(t){i.Observable.fn.init.call(this),this._hashTable=new C,this.length=0,a.isDefined(t)&&(t instanceof C?t.forEach(function(t){this.add(t)}):t instanceof S&&t.forEach(function(t,e){this.add({key:t,value:e})},this))},contains:function(t){return this._hashTable.containsKey(t)},add:function(t){this._hashTable.get(t)||(this._hashTable.add(t,t),this.length++,this.trigger("changed"))},get:function(t){return this.contains(t)?this._hashTable.get(t).value:null},hash:function(t){return this._hashTable._hash(t)},remove:function(t){this.contains(t)&&(this._hashTable.remove(t),this.length--,this.trigger("changed"))},forEach:function(t,e){this._hashTable.forEach(function(e){t(e.value)},e)},toArray:function(){var t=[];return this.forEach(function(e){t.push(e)}),t}}),A=i.Class.extend({init:function(t,e){if(this.links=[],this.outgoing=[],this.incoming=[],this.weight=1,a.isDefined(t)?this.id=t:this.id=_(),a.isDefined(e)){this.associatedShape=e;var i=e.bounds();this.width=i.width,this.height=i.height,this.x=i.x,this.y=i.y}else this.associatedShape=null;this.data=null,this.type="Node",this.shortForm="Node '"+this.id+"'",this.isVirtual=!1},isIsolated:function(){return a.isEmpty(this.links)},bounds:function(t){if(!a.isDefined(t))return new n.Rect(this.x,this.y,this.width,this.height);this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},isLinkedTo:function(t){var e=this;return a.any(e.links,function(i){return i.getComplement(e)===t})},getChildren:function(){if(0===this.outgoing.length)return[];for(var t=[],e=0,i=this.outgoing.length;e<i;e++){var n=this.outgoing[e];t.push(n.getComplement(this))}return t},getParents:function(){if(0===this.incoming.length)return[];for(var t=[],e=0,i=this.incoming.length;e<i;e++){var n=this.incoming[e];t.push(n.getComplement(this))}return t},clone:function(){var t=new A;return a.isDefined(this.weight)&&(t.weight=this.weight),a.isDefined(this.balance)&&(t.balance=this.balance),a.isDefined(this.owner)&&(t.owner=this.owner),t.associatedShape=this.associatedShape,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},adjacentTo:function(t){return null!==this.isLinkedTo(t)},removeLink:function(t){t.source===this&&(a.remove(this.links,t),a.remove(this.outgoing,t),t.source=null),t.target===this&&(a.remove(this.links,t),a.remove(this.incoming,t),t.target=null)},hasLinkTo:function(t){return a.any(this.outgoing,function(e){return e.target===t})},degree:function(){return this.links.length},incidentWith:function(t){return c(this.links,t)},getLinksWith:function(t){return a.all(this.links,function(e){return e.getComplement(this)===t},this)},getNeighbors:function(){var t=[];return a.forEach(this.incoming,function(e){t.push(e.getComplement(this))},this),a.forEach(this.outgoing,function(e){t.push(e.getComplement(this))},this),t}}),D=i.Class.extend({init:function(t,e,i,n){if(a.isUndefined(t))throw"The source of the new link is not set.";if(a.isUndefined(e))throw"The target of the new link is not set.";var r,o;r=a.isString(t)?new A(t):t,o=a.isString(e)?new A(e):e,this.source=r,this.target=o,this.source.links.push(this),this.target.links.push(this),this.source.outgoing.push(this),this.target.incoming.push(this),a.isDefined(i)?this.id=i:this.id=_(),a.isDefined(n)?this.associatedConnection=n:this.associatedConnection=null,this.type="Link",this.shortForm="Link '"+this.source.id+"->"+this.target.id+"'"},getComplement:function(t){if(this.source!==t&&this.target!==t)throw"The given node is not incident with this link.";return this.source===t?this.target:this.source},getCommonNode:function(t){return this.source===t.source||this.source===t.target?this.source:this.target===t.source||this.target===t.target?this.target:null},isBridging:function(t,e){return this.source===t&&this.target===e||this.source===e&&this.target===t},getNodes:function(){return[this.source,this.target]},incidentWith:function(t){return this.source===t||this.target===t},adjacentTo:function(t){return c(this.source.links,t)||c(this.target.links,t)},changeSource:function(t){a.remove(this.source.links,this),a.remove(this.source.outgoing,this),t.links.push(this),t.outgoing.push(this),this.source=t},changeTarget:function(t){a.remove(this.target.links,this),a.remove(this.target.incoming,this),t.links.push(this),t.incoming.push(this),this.target=t},changesNodes:function(t,e){this.source===t?this.changeSource(e):this.target===t&&this.changeTarget(e)},reverse:function(){var t=this.source,e=this.target;return this.source=e,a.remove(t.outgoing,this),this.source.outgoing.push(this),this.target=t,a.remove(e.incoming,this),this.target.incoming.push(this),this},directTo:function(t){if(this.source!==t&&this.target!==t)throw"The given node is not incident with this link.";this.target!==t&&this.reverse()},createReverseEdge:function(){var t=this.clone();return t.reverse(),t.reversed=!0,t},clone:function(){return new D(this.source,this.target)}}),z=i.Class.extend({init:function(t){this.links=[],this.nodes=[],this.diagram=null,this._root=null,a.isDefined(t)?a.isString(t)?this.id=t:(this.diagram=t,this.id=t.id):this.id=_(),this.bounds=new f,this._hasCachedRelationships=!1,this.type="Graph"},cacheRelationships:function(t){if(a.isUndefined(t)&&(t=!1),!this._hasCachedRelationships||t){for(var e=0,i=this.nodes.length;e<i;e++){var n=this.nodes[e];n.children=this.getChildren(n),n.parents=this.getParents(n)}this._hasCachedRelationships=!0}},assignLevels:function(t,e,i){if(!t)throw"Start node not specified.";a.isUndefined(e)&&(e=0),this.cacheRelationships(),a.isUndefined(i)&&(i=new S,a.forEach(this.nodes,function(t){i.add(t,!1)})),i.set(t,!0),t.level=e;for(var n=t.children,r=0,o=n.length;r<o;r++){var s=n[r];s&&!i.get(s)&&this.assignLevels(s,e+1,i)}},root:function(t){if(a.isUndefined(t)){if(this._root)return this._root;var e=a.first(this.nodes,function(t){return 0===t.incoming.length});return e||a.first(this.nodes)}this._root=t},getConnectedComponents:function(){this.componentIndex=0,this.setItemIndices();for(var t=a.initArray(this.nodes.length,-1),e=0;e<this.nodes.length;e++)-1===t[e]&&(this._collectConnectedNodes(t,e),this.componentIndex++);var i,n=[];for(i=0;i<this.componentIndex;++i)n[i]=new z;for(i=0;i<t.length;++i){n[t[i]].addNodeAndOutgoings(this.nodes[i])}return n.sort(function(t,e){return e.nodes.length-t.nodes.length}),n},_collectConnectedNodes:function(t,e){t[e]=this.componentIndex;var i=this.nodes[e];a.forEach(i.links,function(e){var n=e.getComplement(i).index;-1===t[n]&&this._collectConnectedNodes(t,n)},this)},calcBounds:function(){if(this.isEmpty())return this.bounds=new f,this.bounds;for(var t=null,e=0,i=this.nodes.length;e<i;e++){var n=this.nodes[e];t=t?t.union(n.bounds()):n.bounds()}return this.bounds=t,this.bounds},getSpanningTree:function(t){var e,i,n=new z,r=new S;n.root=t.clone(),n.root.level=0,n.root.id=t.id,r.add(t,n.root),t.level=0;var o=[],s=[];n.nodes.push(n.root),o.push(t),s.push(t);for(var l=1;s.length>0;)for(var h=s.pop(),d=0;d<h.links.length;d++){var u=h.links[d].getComplement(h);if(!c(o,u)){u.level=h.level+1,l<u.level+1&&(l=u.level+1),c(s,u)||s.push(u),c(o,u)||o.push(u),r.containsKey(h)?e=r.get(h):((e=h.clone()).level=h.level,e.id=h.id,r.add(h,e)),r.containsKey(u)?i=r.get(u):((i=u.clone()).level=u.level,i.id=u.id,r.add(u,i));var p=new D(e,i);n.addLink(p)}}for(var f=[],g=0;g<l;g++)f.push([]);return a.forEach(n.nodes,function(t){f[t.level].push(t)}),n.treeLevels=f,n.cacheRelationships(),n},takeRandomNode:function(e,i){if(a.isUndefined(e)&&(e=[]),a.isUndefined(i)&&(i=4),0===this.nodes.length)return null;if(1===this.nodes.length)return c(e,this.nodes[0])?null:this.nodes[0];var n=t.grep(this.nodes,function(t){return!c(e,t)&&t.degree()<=i});return a.isEmpty(n)?null:n[a.randomInteger(0,n.length)]},isEmpty:function(){return a.isEmpty(this.nodes)},isHealthy:function(){return a.all(this.links,function(t){return c(this.nodes,t.source)&&c(this.nodes,t.target)},this)},getParents:function(t){if(!this.hasNode(t))throw"The given node is not part of this graph.";return t.getParents()},getChildren:function(t){if(!this.hasNode(t))throw"The given node is not part of this graph.";return t.getChildren()},addLink:function(t,e,i){if(a.isUndefined(t))throw"The source of the link is not defined.";if(a.isUndefined(e)){if(a.isDefined(t.type)&&"Link"===t.type)return void this.addExistingLink(t);throw"The target of the link is not defined."}var n=this.getNode(t);a.isUndefined(n)&&(n=this.addNode(t));var r=this.getNode(e);a.isUndefined(r)&&(r=this.addNode(e));var o=new D(n,r);return a.isDefined(i)&&(o.owner=i),this.links.push(o),o},removeAllLinks:function(){for(;this.links.length>0;){var t=this.links[0];this.removeLink(t)}},addExistingLink:function(t){if(!this.hasLink(t)){if(this.links.push(t),this.hasNode(t.source.id)){var e=this.getNode(t.source.id);t.changeSource(e)}else this.addNode(t.source);if(this.hasNode(t.target.id)){var i=this.getNode(t.target.id);t.changeTarget(i)}else this.addNode(t.target)}},hasLink:function(t){if(a.isString(t))return a.any(this.links,function(e){return e.id===t});if("Link"===t.type)return c(this.links,t);throw"The given object is neither an identifier nor a Link."},getNode:function(t){if(a.isUndefined(t))throw"No identifier or Node specified.";return a.isString(t)?a.find(this.nodes,function(e){return e.id==t}):this.hasNode(t)?t:null},hasNode:function(t){if(a.isString(t))return a.any(this.nodes,function(e){return e.id===t});if(a.isObject(t))return a.any(this.nodes,function(e){return e===t});throw"The identifier should be a Node or the Id (string) of a node."},removeNode:function(t){var e=t;if(a.isString(t)&&(e=this.getNode(t)),!a.isDefined(e))throw"The identifier should be a Node or the Id (string) of a node.";var i=e.links;e.links=[];for(var n=0,r=i.length;n<r;n++){var o=i[n];this.removeLink(o)}a.remove(this.nodes,e)},areConnected:function(t,e){return a.any(this.links,function(i){return i.source==t&&i.target==e||i.source==e&&i.target==t})},removeLink:function(t){a.remove(this.links,t),a.remove(t.source.outgoing,t),a.remove(t.source.links,t),a.remove(t.target.incoming,t),a.remove(t.target.links,t)},addNode:function(t,e,i){var n=null;if(!a.isDefined(t))throw"No Node or identifier for a new Node is given.";if(a.isString(t)){if(this.hasNode(t))return this.getNode(t);n=new A(t)}else{if(this.hasNode(t))return this.getNode(t);n=t}return a.isDefined(e)&&n.bounds(e),a.isDefined(i)&&(n.owner=i),this.nodes.push(n),n},addNodeAndOutgoings:function(t){c(this.nodes,t)||this.nodes.push(t);var e=t.outgoing;t.outgoing=[],a.forEach(e,function(t){this.addExistingLink(t)},this)},setItemIndices:function(){var t;for(t=0;t<this.nodes.length;++t)this.nodes[t].index=t;for(t=0;t<this.links.length;++t)this.links[t].index=t},clone:function(t){var e=new z,i=a.isDefined(t)&&!0===t;i&&(e.nodeMap=new S,e.linkMap=new S);var n=new S;return a.forEach(this.nodes,function(t){var r=t.clone();n.set(t,r),e.nodes.push(r),i&&e.nodeMap.set(r,t)}),a.forEach(this.links,function(t){if(n.containsKey(t.source)&&n.containsKey(t.target)){var r=e.addLink(n.get(t.source),n.get(t.target));i&&e.linkMap.set(r,t)}}),e},linearize:function(t){return z.Utils.linearize(this,t)},depthFirstTraversal:function(t,e){if(a.isUndefined(t))throw"You need to supply a starting node.";if(a.isUndefined(e))throw"You need to supply an action.";if(!this.hasNode(t))throw"The given start-node is not part of this graph";var i=this.getNode(t);this._dftIterator(i,e,[])},_dftIterator:function(t,e,i){e(t),i.push(t);for(var n=t.getChildren(),r=0,o=n.length;r<o;r++){var s=n[r];c(i,s)||this._dftIterator(s,e,i)}},breadthFirstTraversal:function(t,e){if(a.isUndefined(t))throw"You need to supply a starting node.";if(a.isUndefined(e))throw"You need to supply an action.";if(!this.hasNode(t))throw"The given start-node is not part of this graph";var i=this.getNode(t),n=new T,r=[];for(n.enqueue(i);n.length>0;){var o=n.dequeue();e(o),r.push(o);for(var s=o.getChildren(),l=0,h=s.length;l<h;l++){var d=s[l];c(r,d)||c(n,d)||n.enqueue(d)}}},_stronglyConnectedComponents:function(t,e,i,n,r,o,s){i.add(e,s),n.add(e,s),s++,o.push(e);for(var a,l=e.getChildren(),h=0,d=l.length;h<d;h++)a=l[h],i.containsKey(a)?c(o,a)&&n.add(e,Math.min(n.get(e),i.get(a))):(this._stronglyConnectedComponents(t,a,i,n,r,o,s),n.add(e,Math.min(n.get(e),n.get(a))));if(n.get(e)===i.get(e)){var u=[];do{a=o.pop(),u.push(a)}while(a!==e);(!t||u.length>1)&&r.push(u)}},findCycles:function(t){a.isUndefined(t)&&(t=!0);for(var e=new S,i=new S,n=[],r=[],o=0,s=this.nodes.length;o<s;o++){var l=this.nodes[o];e.containsKey(l)||this._stronglyConnectedComponents(t,l,e,i,n,r,0)}return n},isAcyclic:function(){return a.isEmpty(this.findCycles())},isSubGraph:function(t){var e=t.linearize(),i=this.linearize();return a.all(e,function(t){return c(i,t)})},makeAcyclic:function(){if(this.isEmpty()||this.nodes.length<=1||this.links.length<=1)return[];if(2==this.nodes.length){var t=[];if(this.links.length>1)for(var e=this.links[0].source,i=0,n=this.links.length;i<n;i++){var r=this.links[i];if(r.source!=e){var o=r.reverse();t.push(o)}}return t}var s=this.clone(!0),l=this.nodes.length,h=new S,c=function(t){return 0===t.outgoing.length?2-l:0===t.incoming.length?l-2:t.outgoing.length-t.incoming.length},d=function(t,e){var i=c(t);e.containsKey(i)||e.set(i,[]),e.get(i).push(t)};a.forEach(s.nodes,function(t){d(t,h)});for(var u=[],p=[];s.nodes.length>0;){var f,g,m;if(h.containsKey(2-l))for(var v=h.get(2-l);v.length>0;){g=v.pop();for(var y=0;y<g.links.length;y++){var b=g.links[y];f=b.getComplement(g),m=c(f),a.remove(h.get(m),f),f.removeLink(b),d(f,h)}a.remove(s.nodes,g),p.unshift(g)}if(h.containsKey(l-2))for(var w=h.get(l-2);w.length>0;){f=w.pop();for(var x=0;x<f.links.length;x++){var _=f.links[x];g=_.getComplement(f),m=c(g),a.remove(h.get(m),g),g.removeLink(_),d(g,h)}u.push(f),a.remove(s.nodes,f)}if(s.nodes.length>0)for(var k=l-3;k>2-l;k--)if(h.containsKey(k)&&h.get(k).length>0){for(var C=h.get(k).pop(),T=0;T<C.links.length;T++){var P=C.links[T],A=P.getComplement(C);m=c(A),a.remove(h.get(m),A),A.removeLink(P),d(A,h)}u.push(C),a.remove(s.nodes,C);break}}u=u.concat(p);for(var D=new S,z=0;z<this.nodes.length;z++)D.set(s.nodeMap.get(u[z]),z);var E=[];return a.forEach(this.links,function(t){D.get(t.source)>D.get(t.target)&&(t.reverse(),E.push(t))}),E}});z.Predefined={EightGraph:function(){return z.Utils.parse(["1->2","2->3","3->4","4->1","3->5","5->6","6->7","7->3"])},Mindmap:function(){return z.Utils.parse(["0->1","0->2","0->3","0->4","0->5","1->6","1->7","7->8","2->9","9->10","9->11","3->12","12->13","13->14","4->15","4->16","15->17","15->18","18->19","18->20","14->21","14->22","5->23","23->24","23->25","6->26"])},ThreeGraph:function(){return z.Utils.parse(["1->2","2->3","3->1"])},BinaryTree:function(t){return a.isUndefined(t)&&(t=5),z.Utils.createBalancedTree(t,2)},Linear:function(t){return a.isUndefined(t)&&(t=10),z.Utils.createBalancedTree(t,1)},Tree:function(t,e){return z.Utils.createBalancedTree(t,e)},Forest:function(t,e,i){return z.Utils.createBalancedForest(t,e,i)},Workflow:function(){return z.Utils.parse(["0->1","1->2","2->3","1->4","4->3","3->5","5->6","6->3","6->7","5->4"])},Grid:function(t,e){var i=new n.Graph;if(t<=0&&e<=0)return i;for(var r=0;r<t+1;r++)for(var o=null,s=0;s<e+1;s++){var a=new A(r.toString()+"."+s.toString());if(i.addNode(a),o&&i.addLink(o,a),r>0){var l=i.getNode((r-1).toString()+"."+s.toString());i.addLink(l,a)}o=a}return i}},z.Utils={parse:function(t){for(var e,r=new n.Graph,o=t.slice(),s=0,l=o.length;s<l;s++){var h=o[s];if(a.isString(h)){if(h.indexOf("->")<0)throw"The link should be specified as 'a->b'.";var c=h.split("->");if(2!=c.length)throw"The link should be specified as 'a->b'.";e=new D(c[0],c[1]),r.addLink(e)}if(a.isObject(h)){if(!e)throw"Specification found before Link definition.";i.deepExtend(e,h)}}return r},linearize:function(t,e){if(a.isUndefined(t))throw"Expected an instance of a Graph object in slot one.";a.isUndefined(e)&&(e=!1);for(var i=[],n=0,r=t.links.length;n<r;n++){var o=t.links[n];i.push(o.source.id+"->"+o.target.id),e&&i.push({id:o.id})}return i},_addShape:function(t,e,r,o){return a.isUndefined(e)&&(e=new n.Point(0,0)),a.isUndefined(r)&&(r=_()),o=i.deepExtend({width:20,height:20,id:r,radius:10,background:"#778899",data:"circle",undoable:!1,x:e.x,y:e.y},o),t.addShape(o)},_addConnection:function(t,e,i,n){return t.connect(e,i,n)},createDiagramFromGraph:function(t,e,n,r){if(a.isUndefined(t))throw"The diagram surface is undefined.";if(a.isUndefined(e))throw"No graph specification defined.";a.isUndefined(n)&&(n=!0),a.isUndefined(r)&&(r=!1);for(var o,s,h=t.element.clientWidth||200,c=t.element.clientHeight||200,d=[],u=0,p=e.nodes.length;u<p;u++){var g=(o=e.nodes[u]).position;a.isUndefined(g)&&(g=a.isDefined(o.x)&&a.isDefined(o.y)?new l(o.x,o.y):new l(a.randomInteger(10,h-20),a.randomInteger(10,c-20)));var m={};"0"===o.id||r&&i.deepExtend(m,{width:150*Math.random()+20,height:80*Math.random()+50,data:"rectangle",background:"#778899"});var v=(s=this._addShape(t,g,o.id,m)).bounds();a.isDefined(v)&&(o.x=v.x,o.y=v.y,o.width=v.width,o.height=v.height),d[o.id]=s}for(var y=0;y<e.links.length;y++){var b=e.links[y],w=d[b.source.id];if(!a.isUndefined(w)){var x=d[b.target.id];a.isUndefined(x)||this._addConnection(t,w,x,{id:b.id})}}if(n){new t.SpringLayout(t).layoutGraph(e,{limitToView:!1});for(var _=0;_<e.nodes.length;_++)(s=d[(o=e.nodes[_]).id]).bounds(new f(o.x,o.y,o.width,o.height))}},createBalancedTree:function(t,e){a.isUndefined(t)&&(t=3),a.isUndefined(e)&&(e=3);var i,r=new n.Graph,o=-1,s=[];if(t<=0||e<=0)return r;var l=new A((++o).toString());r.addNode(l),r.root=l,s.push(l);for(var h=0;h<t;h++){i=[];for(var c=0;c<s.length;c++)for(var d=s[c],u=0;u<e;u++){var p=new A((++o).toString());r.addLink(d,p),i.push(p)}s=i}return r},createBalancedForest:function(t,e,i){a.isUndefined(t)&&(t=3),a.isUndefined(e)&&(e=3),a.isUndefined(i)&&(i=5);var r,o=new n.Graph,s=-1,l=[];if(t<=0||e<=0||i<=0)return o;for(var h=0;h<i;h++){var c=new A((++s).toString());o.addNode(c),l=[c];for(var d=0;d<t;d++){r=[];for(var u=0;u<l.length;u++)for(var p=l[u],f=0;f<e;f++){var g=new A((++s).toString());o.addLink(p,g),r.push(g)}l=r}}return o},createRandomConnectedGraph:function(t,e,i){a.isUndefined(t)&&(t=40),a.isUndefined(e)&&(e=4),a.isUndefined(i)&&(i=!1);var r=new n.Graph,o=-1;if(t<=0)return r;var s=new A((++o).toString());if(r.addNode(s),1===t)return r;if(t>1){for(var l=1;l<t;l++){var h=r.takeRandomNode([],e);if(!h)break;var c=r.addNode(l.toString());r.addLink(h,c)}if(!i&&t>1)for(var d=a.randomInteger(1,t),u=0;u<d;u++){var p=r.takeRandomNode([],e),f=r.takeRandomNode([],e);p&&f&&!r.areConnected(p,f)&&r.addLink(p,f)}return r}},randomDiagram:function(t,e,i,n,r){var o=t.Graph.Utils.createRandomConnectedGraph(e,i,n);z.Utils.createDiagramFromGraph(t,o,!1,r)}},i.deepExtend(n,{init:function(t){i.init(t,n.ui)},Point:l,Intersect:v,Geometry:k,Rect:f,Size:g,RectAlign:y,Matrix:w,MatrixVector:x,normalVariable:function(t,e){var i,n,r;do{r=(i=2*Math.random()-1)*i+(n=2*Math.random()-1)*n}while(!r||r>1);return t+e*i*Math.sqrt(-2*Math.log(r)/r)},randomId:_,Dictionary:S,HashTable:C,Queue:T,Set:P,Node:A,Link:D,Graph:z,PathDefiner:p})}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=i.Observable,r=i.dataviz.diagram,o=i.Class,s=i.deepExtend,a=i.dataviz,l=r.Point,h=r.Rect,c=r.RectAlign,d=r.Matrix,u=r.Utils,p=u.isUndefined,f=r.MatrixVector,g="http://www.w3.org/2000/svg",m="http://www.w3.org/1999/xlink",v={none:"none",arrowStart:"ArrowStart",filledCircle:"FilledCircle",arrowEnd:"ArrowEnd"};r.Markers=v;var y=o.extend({init:function(t,e){this.x=t,this.y=e},toMatrix:function(){return d.scaling(this.x,this.y)},toString:function(){return i.format("scale({0},{1})",this.x,this.y)},invert:function(){return new y(1/this.x,1/this.y)}}),b=o.extend({init:function(t,e){this.x=t,this.y=e},toMatrixVector:function(){return new f(0,0,0,0,this.x,this.y)},toMatrix:function(){return d.translation(this.x,this.y)},toString:function(){return i.format("translate({0},{1})",this.x,this.y)},plus:function(t){this.x+=t.x,this.y+=t.y},times:function(t){this.x*=t,this.y*=t},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){0!==this.Length&&this.times(1/this.length())},invert:function(){return new b(-this.x,-this.y)}}),w=o.extend({init:function(t,e,i){this.x=e||0,this.y=i||0,this.angle=t},toString:function(){return this.x&&this.y?i.format("rotate({0},{1},{2})",this.angle,this.x,this.y):i.format("rotate({0})",this.angle)},toMatrix:function(){return d.rotation(this.angle,this.x,this.y)},center:function(){return new l(this.x,this.y)},invert:function(){return new w(360-this.angle,this.x,this.y)}});w.create=function(t){return new w(t.angle,t.x,t.y)},w.parse=function(t){var e=t.slice(1,t.length-1).split(","),i=e[0],n=e[1],r=e[2];return new w(i,n,r)};var x=o.extend({init:function(t,i,n,r,o,s){this.translate=new b(t,i),n!==e&&r!==e&&(this.scale=new y(n,r)),o!==e&&(this.rotate=s?new w(o,s.x,s.y):new w(o))},toString:function(){var t=function(t){return t?t.toString():""};return t(this.translate)+t(this.rotate)+t(this.scale)},render:function(t){t.setAttribute("transform",this.toString())},toMatrix:function(){var t=d.unit();return this.translate&&(t=t.times(this.translate.toMatrix())),this.rotate&&(t=t.times(this.rotate.toMatrix())),this.scale&&(t=t.times(this.scale.toMatrix())),t},invert:function(){var t=this.rotate?this.rotate.invert():e,i=t?t.toMatrix():d.unit(),n=this.scale?this.scale.invert():e,r=n?n.toMatrix():d.unit(),o=new l(-this.translate.x,-this.translate.y);o=i.times(r).apply(o);var s=new b(o.x,o.y),a=new x;return a.translate=s,a.rotate=t,a.scale=n,a}});function _(t){var e=t._originWidth?t.options.width/t._originWidth:1,i=t._originHeight?t.options.height/t._originHeight:1,n=t.options.x||0,r=t.options.y||0;t._transform.translate=new b(n,r),t._transform.scale=new y(e,i),t._renderTransform()}var k=o.extend({init:function(t,e){this._originSize=h.empty(),this._visible=!0,this._transform=new x,this.domElement=t,this.options=s({},this.options,e),this.redraw()},visible:function(t){if(p(t))return this._visible;this._visible=t,this.domElement.setAttribute("visibility",t?"visible":"hidden")},setAtr:function(t,i){p(i)||p(this.options[i])||this.options[i]!==e&&this.domElement.setAttribute(t,this.options[i])},redraw:function(t){t&&s(this.options,t),this.setAtr("id","id")},position:function(t,i){return i!==e?(this.options.x=t,this.options.y=i,this._pos=new l(t,i)):t instanceof l&&(this._pos=t,this.options.x=this._pos.x,this.options.y=this._pos.y),this._transform.translate=new b(this.options.x,this.options.y),this._renderTransform(),this._pos},rotate:function(t,i){return t!==e&&(this._transform.rotate=new w(t,i.x,i.y),this._renderTransform()),this._transform.rotate||new w(0)},_renderTransform:function(){this._transform.render(this.domElement)},_hover:function(){},_measure:function(t){var e,i=this.domElement;if(!this._measured||t)try{if((e=i.getBBox()).width&&e.height)return this._originSize=new h(e.left,e.right,e.width,e.height),this._originWidth=e.width,this._originHeight=e.height,this._measured=!0,this._originSize}catch(t){}}}),C=k.extend({init:function(t,e){k.fn.init.call(this,t,e),t._kendoElement=this},options:{stroke:{color:"gray",width:1,dashType:"none"}},background:function(t){t!==e&&(this.options.background=t),this._background(this.options.background)},redraw:function(t){k.fn.redraw.call(this,t),this._setStroke(),this.setAtr("fill-opacity","fillOpacity"),this.background()},_setStroke:function(){var t=this.options.stroke||{};this.domElement.setAttribute("stroke",t.color),this.domElement.setAttribute("stroke-dasharray",this._renderDashType()),this.domElement.setAttribute("stroke-width",t.width)},_renderDashType:function(){var t=this.options.stroke||{},e=t.width||1,i=t.dashType;if(i&&"solid"!=i){var n,r=a.DASH_ARRAYS[i.toLowerCase()]||[],o=[];for(n=0;n<r.length;n++)o.push(r[n]*e);return o.join(" ")}},_hover:function(t){var e=this.options.background;t&&u.isDefined(this.options.hover.background)&&(e=this.options.hover.background),this._background(e)},_background:function(t){this.domElement.setAttribute("fill",this._getColor(t))},_getColor:function(t){var e;"none"!=t?e=new a.Color(t).toHex():e=t;return e}}),S=C.extend({init:function(t,e){C.fn.init.call(this,t,e)},redraw:function(t){C.fn.redraw.call(this,t),this.options.x!==e&&this.options.y!==e&&this.position(this.options.x,this.options.y),this.size()},size:function(t){return t!==e&&(this.options.width=t.width,this.options.height=t.height),this._sz={width:this.options.width,height:this.options.height},this.setAtr("width","width"),this.setAtr("height","height"),this.setAtr("background","background"),this._sz}}),T=C.extend({init:function(t){S.fn.init.call(this,document.createElementNS(g,"text"),t),this.domElement.setAttribute("dominant-baseline","hanging")},options:{stroke:{color:"none",width:0,dashType:"none"},fontSize:15,fontVariant:"normal",fontWeight:"normal",anchor:"middle",background:"black",align:""},content:function(t){return t!==e&&(this.domElement.textContent=this.options.text=t,this._align()),this.options.text},redraw:function(t){S.fn.redraw.call(this,t),this.setAtr("font-family","fontFamily"),this.setAtr("font-variant","fontVariant"),this.setAtr("font-size","fontSize"),this.setAtr("font-weight","fontWeight"),this.setAtr("font-style","fontStyle"),this.setAtr("text-decoration","textDecoration"),this.setAtr("fill","color"),this.content(this.options.text)},size:function(){_(this)},bounds:function(){var t=this.options;return new h(0,0,t.width,t.height)},align:function(t){this.options.align=t,this._align(t)},_align:function(){if(this.options.align){this._measure(!0);var t=this.options,e=this.bounds(),i=new c(e).align(this._originSize,t.align);this.position(i.topLeft()),t.width=i.width,t.height=i.height,this.size()}}}),P=n.extend({init:function(t,e){n.fn.init.call(this);this.domElement=t||this._createEditor(),this.options=s({},this.options,e),this.redraw()},visible:function(t){return t!==e&&(this._isVisible=t,this.domElement.style.visibility=t?"visible":"hidden"),this._isVisible},position:function(i,n){return n!==e?(this.options.x=i,this.options.y=n,this._pos=new l(i,n)):i instanceof l&&(this._pos=i,this.options.x=this._pos.x,this.options.y=this._pos.y),t(this.domElement).css({left:this._pos.x+"px",top:this._pos.y+"px"}),this._pos},size:function(i,n){var r=!1;return n!==e?(this._size={width:i,height:n},r=!0):i===Object(i)&&(this._size={width:i.width,height:i.height},r=!0),r&&(s(this.options,this._size),t(this.domElement).css({width:this._size.width+"px",height:this._size.height+"px"})),this._size},focus:function(){t(this.domElement).focus()},content:function(t){return p(t)||(this.domElement.value=this.options.text=t),this.domElement.value},redraw:function(t){this.options=s(this.options,t),this.content(this.options.text)},_createEditor:function(){var e=this;return t("<input type='text' class='textEditable' />").css({position:"absolute",zIndex:100,fontSize:"16px"}).on("mousedown mouseup click dblclick",function(t){t.stopPropagation()}).on("keydown",function(t){t.stopPropagation()}).on("keypress",function(t){t.keyCode==i.keys.ENTER&&e.trigger("finishEdit",t),t.stopPropagation()}).on("focusout",function(t){e.trigger("finishEdit",t),t.stopPropagation()})[0]}}),A=S.extend({init:function(t){S.fn.init.call(this,document.createElementNS(g,"rect"),t)},options:{stroke:{},background:"none"},redraw:function(t){S.fn.redraw.call(this,t),this.setAtr("rx","cornerRadius"),this.setAtr("ry","cornerRadius"),this._setStroke()}}),D=C.extend({init:function(t){C.fn.init.call(this,document.createElementNS(g,"path"),t)},options:{autoSize:!0},data:function(t){if(!t)return this.options.data;this.options.data=t},size:function(){_(this)},redraw:function(t){C.fn.redraw.call(this,t),this.size(),this.setAtr("d","data"),this.options.startCap&&this.options.startCap!==v.none?this.domElement.setAttribute("marker-start","url(#"+this.options.startCap+")"):this.domElement.removeAttribute("marker-start"),this.options.endCap&&this.options.endCap!==v.none?this.domElement.setAttribute("marker-end","url(#"+this.options.endCap+")"):this.domElement.removeAttribute("marker-end"),this.domElement.parentNode&&-1!=navigator.appVersion.indexOf("MSIE 10")&&this.domElement.parentNode.insertBefore(this.domElement,this.domElement)}}),z=k.extend({init:function(t){var e;k.fn.init.call(this,document.createElementNS(g,"marker"),t);var i=this.options;i.path?e=new D(i.path):i.circle&&(e=new R(i.circle)),e&&this.domElement.appendChild(e.domElement)},redraw:function(t){k.fn.redraw.call(this,t);var e=this.options;e.ref&&(this.domElement.refX.baseVal.value=e.ref.x,this.domElement.refY.baseVal.value=e.ref.y),e.width&&(this.domElement.markerWidth.baseVal.value=e.width),e.height&&(this.domElement.markerHeight.baseVal.value=e.height),this.setAtr("orient","orientation"),this.setAtr("viewBox","viewBox")}}),E=k.extend({init:function(t){var e;k.fn.init.call(this,document.createElementNS(g,"mask"),t);var i=this.options;i.path?e=new D(i.path):i.circle?e=new R(i.circle):i.rectangle&&(e=new A(i.rectangle)),e&&this.domElement.appendChild(e.domElement),this.setAtr("id","id")},redraw:function(t){k.fn.redraw.call(this,t);var e=this.options;e.width&&(this.domElement.width.baseVal.value=e.width),e.height&&(this.domElement.height.baseVal.value=e.height)}}),M=C.extend({init:function(t){C.fn.init.call(this,document.createElementNS(g,"line"),t),this.options.from=this.options.from||new l,this.options.to=this.options.to||new l},redraw:function(t){C.fn.redraw.call(this,t),this.options.from&&(this.domElement.setAttribute("x1",this.options.from.x.toString()),this.domElement.setAttribute("y1",this.options.from.y.toString())),this.options.to&&(this.domElement.setAttribute("x2",this.options.to.x.toString()),this.domElement.setAttribute("y2",this.options.to.y.toString())),this.options.startCap&&this.options.startCap!==v.none?this.domElement.setAttribute("marker-start","url(#"+this.options.startCap+")"):this.domElement.removeAttribute("marker-start"),this.options.endCap&&this.options.endCap!==v.none?this.domElement.setAttribute("marker-end","url(#"+this.options.endCap+")"):this.domElement.removeAttribute("marker-end"),this.domElement.parentNode&&-1!=navigator.appVersion.indexOf("MSIE 10")&&this.domElement.parentNode.insertBefore(this.domElement,this.domElement)}}),L=C.extend({init:function(t){C.fn.init.call(this,document.createElementNS(g,"polyline"),t),u.isDefined(t)&&null!==t.points&&this.points(this.options.points),this.background("none")},refresh:function(){if(null!==this._points&&0!==this._points.length){var t,e="";for(t=0;t<this._points.length;t++)e+=" "+this._points[t].x+","+this._points[t].y;this.domElement.setAttribute("points",e.trim()),this.domElement.setAttribute("stroke","Orange"),this.domElement.setAttribute("stroke-width","5")}},points:function(t){if(p(t))return this._points;this._points=t,this.refresh()},redraw:function(){this.refresh()},options:{stroke:{color:"gray",width:1},backgrounds:"none",points:[]}}),I=k.extend({init:function(t){k.fn.init.call(this,document.createElementNS(g,"image"),t)},options:{autoSize:!0},redraw:function(t){k.fn.redraw.call(this,t),this.domElement.setAttributeNS(m,"href",this.options.source),this.setAtr("width","width"),this.setAtr("height","height"),this.setAtr("x","x"),this.setAtr("y","x")}}),B=k.extend({init:function(t){k.fn.init.call(this,document.createElementNS(g,"g"),t),this.width=this.options.width,this.height=this.options.height},options:{autoSize:!0},append:function(t){this.domElement.appendChild(t.domElement),t.canvas=this.canvas},remove:function(t){t.domElement?this.domElement.removeChild(t.domElement):this.domElement.removeChild(t)},clear:function(){for(;this.domElement.lastChild;)this.domElement.removeChild(this.domElement.lastChild)},toFront:function(t){var e,i,n=this.domElement;for(i=0;i<t.length;i++)e=t[i],n.appendChild(e.domElement)},toBack:function(t){var e,i;for(i=0;i<t.length;i++)e=t[i],this.domElement.insertBefore(e.domElement,this.domElement.firstChild)},toIndex:function(t,e){var i,n,r;for(n=0;n<t.length;n++)i=t[n],r=e[n],this.domElement.insertBefore(i.domElement,this.domElement.children[r])},size:function(){_(this)},redraw:function(t){k.fn.redraw.call(this,t),this.size()}}),R=C.extend({init:function(t){t&&t.radius&&(t.width=2*t.radius,t.height=2*t.radius),C.fn.init.call(this,document.createElementNS(g,"ellipse"),t)},redraw:function(t){t&&u.isNumber(t.width)&&u.isNumber(t.height)&&(t.center=new l(t.width/2,t.height/2)),C.fn.redraw.call(this,t);var e=this.domElement,i=this.options,n=i.width/2||i.rx,r=i.height/2||i.rx;n&&r&&(e.rx.baseVal.value=n,e.ry.baseVal.value=r),i.center?(e.cx.baseVal.value=i.center.x,e.cy.baseVal.value=i.center.y):u.isDefined(i.x)&&u.isDefined(i.y)?(e.cx.baseVal.value=i.x+n,e.cy.baseVal.value=i.y+r):(e.cx.baseVal.value=n,e.cy.baseVal.value=r)}}),O=S.extend({init:function(e,i){S.fn.init.call(this,document.createElementNS(g,"svg"),i),this.markers=[],this.gradients=[],this.visuals=[],this.defsNode=document.createElementNS(g,"defs"),this.domElement.appendChild(this.defsNode),e.context?this.element=e.context:this.element=e,t(this.domElement).css({width:this.options.width,height:this.options.height}),this.element.appendChild(this.domElement),this.domElement.style.background=this.options.background,this.domElement.setAttribute("xmlns",g),this.domElement.setAttribute("xmlns:xlink",m),this.element.setAttribute("tabindex","0"),this._markers(),this.masks=[]},options:{width:"100%",height:"100%",background:"none",id:"SVGRoot"},bounds:function(){var t=this.domElement.getBBox();return new h(0,0,t.width,t.height)},focus:function(){this.element.focus()},size:function(){var t=S.fn.size.apply(this,arguments),e=this.viewBox();return this._styledSize(this.domElement),e.width=t.width,e.height=t.height,this.viewBox(e),t},_styledSize:function(e){var i=this._sz;t(e).css(i)},viewBox:function(t){if(p(t))return this.domElement.viewBox.baseVal?h.toRect(this.domElement.viewBox.baseVal):h.empty();t=h.toRect(t),isNaN(t.width)||isNaN(t.height)||this.domElement.setAttribute("viewBox",t.toString(","))},append:function(t){return this.domElement.appendChild(t.domElement),t.canvas=this,this.visuals.push(t),this},remove:function(t){if(u.indexOf(this.visuals,t)>=0)return this.domElement.removeChild(t.domElement),t.canvas=e,u.remove(this.visuals,t),this},insertBefore:function(t,e){return this.domElement.insertBefore(t.domElement,e.domElement),t.canvas=this,this.visuals.push(t),this},addMarker:function(t){this.defsNode.appendChild(t.domElement),this.markers.push(t)},removeMarker:function(t){t&&u.contains.contains(this.markers,t)&&(this.defsNode.removeChild(t.domElement),u.remove(this.markers,t))},addMask:function(t){this.defsNode.appendChild(t.domElement),this.masks.push(t)},removeMask:function(t){t&&u.contains(this.masks,t)&&(this.defsNode.removeChild(t.domElement),u.remove(this.masks,t))},removeGradient:function(t){t&&u.contains(this.gradients,t)&&(this.defsNode.removeChild(t.domElement),u.remove(this.gradients,t))},addGradient:function(t){this.defsNode.appendChild(t.domElement),this.gradients.push(t)},clearMarkers:function(){var t;if(0!==this.markers.length){for(t=0;t<this.markers.length;t++)this.defsNode.removeChild(this.markers[t].domElement);this.markers=[]}},clear:function(){for(;this.visuals.length;)this.remove(this.visuals[0])},mask:function(t){null===t?this.domElement.removeAttribute("mask"):this.domElement.setAttribute("mask","url(#"+t.domElement.id+")")},_markers:function(){this.addMarker(new z({path:{data:"M 0 0 L 10 5 L 0 10 L 3 5 z",background:"Black"},id:v.arrowEnd,orientation:"auto",width:10,height:10,ref:new l(10,5)})),this.addMarker(new z({path:{data:"M 0 5 L 10 0 L 7 5 L 10 10 z",background:"Black"},id:v.arrowStart,orientation:"auto",width:10,height:10,ref:new l(0,5)})),this.addMarker(new z({circle:{width:6,height:6,center:new l(5,5),stroke:{width:1},background:"black"},width:10,height:10,id:v.filledCircle,ref:new l(5,5),orientation:"auto"}))},destroy:function(e){e&&t(this.element).remove()}});i.deepExtend(r,{init:function(t){i.init(t,r.ui)},Scale:y,Translation:b,Rotation:w,Circle:R,Group:B,Rectangle:A,Canvas:O,Path:D,Line:M,Marker:z,Polyline:L,CompositeTransform:x,TextBlock:T,TextBlockEditor:P,Image:I,Mask:E,Visual:S,VisualBase:C})}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=i.dataviz.diagram,r=i.Class,o=n.Group,s=n.TextBlock,a=n.Rect,l=n.Rectangle,h=n.Utils,c=h.isUndefined,d=n.Point,u=n.Circle,p=n.Path,f=n.Ticker,g=i.deepExtend,m=i.ui.Movable,v={arrow:"default",grip:"pointer",cross:"pointer",add:"pointer",move:"move",select:"pointer",south:"s-resize",east:"e-resize",west:"w-resize",north:"n-resize",rowresize:"row-resize",colresize:"col-resize"},y="Top",b="Right",w="Left",x="Bottom",_=[y,b,x,w,"Auto"],k="itemBoundsChange";function C(t,e){t.isSelected?e.ctrlKey&&t.select(!1):t.diagram.select(t,{addToSelection:e.ctrlKey})}n.Cursors=v;var S=i.Class.extend({init:function(t){this.layoutState=t,this.diagram=t.diagram},initState:function(){this.froms=[],this.tos=[],this.subjects=[],this.layoutState.nodeMap.forEach(function(t,e){var i=this.diagram.getShapeById(t);i&&(this.subjects.push(i),this.froms.push(i.bounds().topLeft()),this.tos.push(e.topLeft()))},this)},update:function(t){if(!(this.subjects.length<=0))for(var e=0;e<this.subjects.length;e++)this.subjects[e].position(new d(this.froms[e].x+(this.tos[e].x-this.froms[e].x)*t,this.froms[e].y+(this.tos[e].y-this.froms[e].y)*t))}}),T=r.extend({init:function(t,e,i){c(i)?this.animate=!1:this.animate=i,this._initialState=t,this._finalState=e,this.title="Diagram layout"},undo:function(){this.setState(this._initialState)},redo:function(){this.setState(this._finalState)},setState:function(t){var e=t.diagram;if(this.animate){t.linkMap.forEach(function(t,i){var n=e.getShapeById(t);n.visible(!1),n&&n.points(i)});var i=new f;i.addAdapter(new S(t)),i.onComplete(function(){t.linkMap.forEach(function(t){e.getShapeById(t).visible(!0)})}),i.play()}else t.nodeMap.forEach(function(t,i){var n=e.getShapeById(t);n&&n.position(i.topLeft())}),t.linkMap.forEach(function(t,i){var n=e.getShapeById(t);n&&n.points(i)})}}),P=r.extend({init:function(t){this.units=[],this.title="Composite unit",t!==e&&this.units.push(t)},add:function(t){this.units.push(t)},undo:function(){for(var t=0;t<this.units.length;t++)this.units[t].undo()},redo:function(){for(var t=0;t<this.units.length;t++)this.units[t].redo()}}),A=r.extend({init:function(t,e,i){this.item=t,this._undoContent=e,this._redoContent=i,this.title="Content Editing",this.rebuild=this.item.options.hasOwnProperty("rebuild")?this.item.options.rebuild:null},undo:function(){this.item.content(this._undoContent),this.rebuild&&this.rebuild.call(this.item,this.item)},redo:function(){this.item.content(this._redoContent),this.rebuild&&this.rebuild.call(this.item,this.item)}}),D=r.extend({init:function(t,e,i){this.item=t,this._redoSource=e,this._redoTarget=i,this._undoSource=t.source(),this._undoTarget=t.target(),this.title="Connection Editing"},undo:function(){this._undoSource!==e&&this.item.source(this._undoSource,!1),this._undoTarget!==e&&this.item.target(this._undoTarget,!1)},redo:function(){this._redoSource!==e&&this.item.source(this._redoSource,!1),this._redoTarget!==e&&this.item.target(this._redoTarget,!1)}}),z=r.extend({init:function(t,e,i){this.item=t,this._undoSource=e,this._undoTarget=i,this._redoSource=t.source(),this._redoTarget=t.target(),this.title="Connection Editing"},undo:function(){this.item.source(this._undoSource,!1),this.item.target(this._undoTarget,!1)},redo:function(){this.item.source(this._redoSource,!1),this.item.target(this._redoTarget,!1)}}),E=r.extend({init:function(t){this.connection=t,this.diagram=t.diagram,this.targetConnector=t.targetConnector,this.title="Delete connection"},undo:function(){this.diagram.addConnection(this.connection,!1)},redo:function(){this.diagram.remove(this.connection,!1)}}),M=r.extend({init:function(t){this.shape=t,this.diagram=t.diagram,this.title="Deletion"},undo:function(){this.diagram.addShape(this.shape,{undoable:!1}),this.shape.select(!1)},redo:function(){this.shape.select(!1),this.diagram.remove(this.shape,!1)}}),L=r.extend({init:function(t,e,i){this.shapes=t,this.undoStates=e,this.title="Transformation",this.redoStates=[],this.adorner=i;for(var n=0;n<this.shapes.length;n++){var r=this.shapes[n];this.redoStates.push(r.bounds())}},undo:function(){for(var t=0;t<this.shapes.length;t++){var e=this.shapes[t];e.bounds(this.undoStates[t]),e.hasOwnProperty("layout")&&e.layout(e,this.redoStates[t],this.undoStates[t])}this.adorner&&(this.adorner.refreshBounds(),this.adorner.refresh())},redo:function(){for(var t=0;t<this.shapes.length;t++){var e=this.shapes[t];e.bounds(this.redoStates[t]),e.hasOwnProperty("layout")&&e.layout(e,this.undoStates[t],this.redoStates[t])}this.adorner&&(this.adorner.refreshBounds(),this.adorner.refresh())}}),I=r.extend({init:function(t,e){this.connection=t,this.diagram=e,this.title="New connection"},undo:function(){this.diagram.remove(this.connection,!1)},redo:function(){this.diagram.addConnection(this.connection,!1)}}),B=r.extend({init:function(t,e){this.shape=t,this.diagram=e,this.title="New shape"},undo:function(){this.diagram.remove(this.shape,!1)},redo:function(){this.diagram.addShape(this.shape,{undoable:!1})}}),R=r.extend({init:function(t,e,i){this.initial=t,this.finalPos=e,this.diagram=i,this.title="Pan Unit"},undo:function(){this.diagram.pan(this.initial)},redo:function(){this.diagram.pan(this.finalPos)}}),O=r.extend({init:function(t,e,i){this.shapes=e,this.undoRotates=i,this.title="Rotation",this.redoRotates=[],this.redoAngle=t._angle,this.adorner=t,this.center=t._innerBounds.center();for(var n=0;n<this.shapes.length;n++){var r=this.shapes[n];this.redoRotates.push(r.rotate().angle)}},undo:function(){var t,e;for(t=0;t<this.shapes.length;t++)(e=this.shapes[t]).rotate(this.undoRotates[t],this.center),e.hasOwnProperty("layout")&&e.layout(e);this.adorner&&(this.adorner._initialize(),this.adorner.refresh())},redo:function(){var t,e;for(t=0;t<this.shapes.length;t++)(e=this.shapes[t]).rotate(this.redoRotates[t],this.center),e.hasOwnProperty("layout")&&e.layout(e);this.adorner&&(this.adorner._initialize(),this.adorner.refresh())}}),N=r.extend({init:function(t,e,i){this.diagram=t,this.indices=i,this.items=e,this.title="Rotate Unit"},undo:function(){this.diagram._toIndex(this.items,this.indices)},redo:function(){this.diagram.toFront(this.items,!1)}}),V=r.extend({init:function(t,e,i){this.diagram=t,this.indices=i,this.items=e,this.title="Rotate Unit"},undo:function(){this.diagram._toIndex(this.items,this.indices)},redo:function(){this.diagram.toBack(this.items,!1)}}),F=r.extend({init:function(){this.stack=[],this.index=0,this.capacity=100},begin:function(){this.composite=new P},cancel:function(){this.composite=e},commit:function(){this.composite.units.length>0&&this._restart(this.composite),this.composite=e},addCompositeItem:function(t){this.composite?this.composite.add(t):this.add(t)},add:function(t,e){this._restart(t,e)},count:function(){return this.stack.length},undo:function(){this.index>0&&(this.index--,this.stack[this.index].undo())},redo:function(){this.stack.length>0&&this.index<this.stack.length&&(this.stack[this.index].redo(),this.index++)},_restart:function(t,e){this.stack.splice(this.index,this.stack.length-this.index),this.stack.push(t),c(e)||e&&!0===e?this.redo():this.index++,this.stack.length>this.capacity&&(this.stack.splice(0,this.stack.length-this.capacity),this.index=this.capacity)},clear:function(){this.stack=[],this.index=0}}),H=r.extend({init:function(t){this.toolService=t},start:function(){},move:function(){},end:function(){},doubleClick:function(){},tryActivate:function(t,e){return!1},getCursor:function(){return v.arrow}}),U=H.extend({init:function(t){H.fn.init.call(this,t)},tryActivate:function(t,i){return this.toolService.hoveredItem===e&&i.ctrlKey},start:function(t){this.toolService.isPanning=!0,this.panStart=this.toolService.diagram._pan,this.panOffset=t,this.panDelta=new d},move:function(t){var e=this.toolService.diagram;this.panDelta=t.plus(this.panDelta).minus(this.panOffset),e.pan(this.panStart.plus(this.panDelta),{delta:t.minus(this.panOffset).times(1/this.toolService.diagram.zoom())})},end:function(){var t=this.toolService.diagram;t.undoRedoService.begin(),t.undoRedoService.add(new R(this.panStart,t._pan,t)),t.undoRedoService.commit(),this.toolService.isPanning=!1},getCursor:function(){return v.move}}),$=H.extend({init:function(e){H.fn.init.call(this,e);var i=this.toolService.diagram,n=i.canvas,r=i.scroller=this.scroller=t(i.scrollable).kendoMobileScroller({scroll:t.proxy(this._move,this)}).data("kendoMobileScroller");this.movableCanvas=new m(n.element);var o=function(t,e,i){t.makeVirtual(),t.virtualSize(e||-2e4,i||2e4)};o(r.dimensions.x),o(r.dimensions.y),r.disable()},tryActivate:function(t,i){return this.toolService.hoveredItem===e&&i.ctrlKey},start:function(){var t=this.toolService.diagram.canvas.size();this.scroller.enable(),this.currentCanvasSize=t},move:function(){},_move:function(t){var e=this.toolService.diagram,i=e.canvas,n=this.currentCanvasSize||i.size(),r=new d(t.scrollLeft,t.scrollTop),o=new a(r.x,r.y,parseInt(n.width,10),parseInt(n.height,10));e._storePan(r.times(-1)),this.movableCanvas.moveTo(r),i.viewBox(o)},end:function(){this.currentCanvasSize=e,this.scroller.disable()},getCursor:function(){return v.move}}),j=r.extend({init:function(t){this.toolService=t},tryActivate:function(t,e){return!0},start:function(t,e){var i=this.toolService.diagram,n=this.toolService.hoveredItem;n&&(C(n,e),n.adorner&&(this.adorner=n.adorner,this.handle=this.adorner._hitTest(t))),this.handle||(this.handle=i._resizingAdorner._hitTest(t),this.handle&&(this.adorner=i._resizingAdorner)),this.adorner&&this.adorner.start(t)},move:function(t){this.adorner&&this.adorner.move(this.handle,t)},end:function(t,i){var n,r=this.toolService.diagram,o=this.toolService;this.adorner&&(n=this.adorner.stop())&&r.undoRedoService.add(n,!1),o.hoveredItem&&this.toolService.triggerClick({item:o.hoveredItem,point:t,meta:i}),this.adorner=e,this.handle=e},getCursor:function(t){return this.toolService.hoveredItem?this.toolService.hoveredItem._getCursor(t):v.arrow}}),G=r.extend({init:function(t){this.toolService=t},tryActivate:function(t,i){return this.toolService.diagram._canRectSelect()&&this.toolService.hoveredItem===e&&this.toolService.hoveredAdorner===e},start:function(t){var e=this.toolService.diagram;e.select(!1),e.selector.start(t)},move:function(t){this.toolService.diagram.selector.move(t)},end:function(t,e){var i=this.toolService.diagram,n=this.toolService.hoveredItem,r=i.selector.bounds();n&&n.isSelected||e.ctrlKey||i.select(!1),r.isEmpty()||i.select(r),i.selector.end()},getCursor:function(){return v.arrow}}),W=r.extend({init:function(t){this.toolService=t,this.type="ConnectionTool"},tryActivate:function(t,e){return this.toolService._hoveredConnector&&!e.ctrlKey},start:function(t,e){var i=this.toolService.diagram,n=this.toolService._hoveredConnector,r=i.connect(n._c,t);this.toolService._connectionManipulation(r,n._c.shape,!0),this.toolService._removeHover(),C(this.toolService.activeConnection,e)},move:function(t){return this.toolService.activeConnection.target(t),!0},end:function(){var t=this.toolService.activeConnection,e=this.toolService.hoveredItem,i=this.toolService._hoveredConnector;i&&i._c!=t.sourceConnector?t.target(i._c):e&&t.target(e),this.toolService._connectionManipulation()},getCursor:function(){return v.arrow}}),q=r.extend({init:function(t){this.toolService=t,this.type="ConnectionTool"},tryActivate:function(t,e){var i=this.toolService.hoveredItem,n=i&&i.path;return n&&(this._c=i),n},start:function(t,e){C(this._c,e),this.handle=this._c.adorner._hitTest(t),this._c.adorner.start(t)},move:function(t){return this._c.adorner.move(this.handle,t),!0},end:function(t,e){this.toolService.triggerClick({item:this._c,point:t,meta:e});var i=this._c.adorner.stop(t);this.toolService.diagram.undoRedoService.add(i,!1)},getCursor:function(){return v.move}}),Y=H.extend({init:function(t){H.fn.init.call(this,t)},doubleClick:function(){this.toolService.diagram.editor(this.toolService.hoveredItem)},tryActivate:function(t,e){return e.doubleClick&&this.toolService.hoveredItem}});function Q(t,e){return e.charCodeAt(0)==t||e.toUpperCase().charCodeAt(0)==t}var X=r.extend({init:function(t){this.diagram=t,this.tools=[new Y(this),t.options.useScroller?new $(this):new U(this),new q(this),new W(this),new G(this),new j(this)],this.activeTool=e},start:function(t,e){return e=g({},e),this._updateHoveredItem(t),this._activateTool(t,e),this.activeTool.start(t,e),this._updateCursor(t),this.diagram.focus(),this.startPoint=t,!0},move:function(t,e){e=g({},e);var i=!0;return this.activeTool&&(i=this.activeTool.move(t,e)),i&&this._updateHoveredItem(t),this._updateCursor(t),!0},end:function(t,i){return i=g({},i),this.activeTool&&this.activeTool.end(t,i),this.activeTool=e,this._updateCursor(t),!0},doubleClick:function(t,e){this._activateTool(t,g(e,{doubleClick:!0})),this.activeTool.doubleClick&&this.activeTool.doubleClick(t,e),this._updateCursor(t)},keyDown:function(t,e){var i=this.diagram;if(!(e=g({ctrlKey:!1,metaKey:!1,altKey:!1},e)).ctrlKey&&!e.metaKey||e.altKey){if(46===t||8===t)return i.remove(i.select(),!0),!0;if(27===t)return this._discardNewConnection(),i.select(!1),!0}else{if(Q(t,"a"))return i.select("All"),!0;if(Q(t,"z"))return i.undo(),!0;if(Q(t,"y"))return i.redo(),!0;Q(t,"c")?i.copy():Q(t,"x")?i.cut():Q(t,"v")?i.paste():Q(t,"l")?i.layout():Q(t,"d")&&(i.copy(),i.paste())}},wheel:function(t,e){var i=this.diagram,n=e.delta,r=i.zoom(),o=i.options.zoomRate,s={location:t,meta:e,zoom:r};return i.trigger("zoomStart",s),n<0?r*=o:r/=o,r=Math.round(10*Math.max(.7,Math.min(2,r)))/10,s.zoom=r,i.zoom(r,s),i.trigger("zoomEnd",s),!0},setTool:function(t,e){t.toolService=this,this.tools[e]=t},triggerClick:function(t){this.startPoint.equals(t.point)&&this.diagram.trigger("click",t)},_discardNewConnection:function(){this.newConnection&&(this.diagram.remove(this.newConnection),this.newConnection=e)},_activateTool:function(t,e){for(var i=0;i<this.tools.length;i++){var n=this.tools[i];if(n.tryActivate(t,e)){this.activeTool=n;break}}},_updateCursor:function(e){var i=this.activeTool?this.activeTool.getCursor(e):this.hoveredAdorner?this.hoveredAdorner._getCursor(e):this.hoveredItem?this.hoveredItem._getCursor(e):v.arrow;t(this.diagram.canvas.domElement).css({cursor:i})},_connectionManipulation:function(t,i,n){this.activeConnection=t,this.disabledShape=i,this.newConnection=n?this.activeConnection:e},_updateHoveredItem:function(t){var i=this._hitTest(t);i==this.hoveredItem||this.disabledShape&&i==this.disabledShape||(this.hoveredItem&&this.hoveredItem._hover(!1),i&&i.options.enable?(this.hoveredItem=i,this.hoveredItem._hover(!0)):this.hoveredItem=e)},_removeHover:function(){this.hoveredItem&&(this.hoveredItem._hover(!1),this.hoveredItem=e)},_hitTest:function(t){var i,r,o,s=this.diagram;if(this._hoveredConnector&&(this._hoveredConnector._hover(!1),this._hoveredConnector=e),s._connectorsAdorner._visible&&(i=s._connectorsAdorner._hitTest(t)))return i;if(i=this.diagram._resizingAdorner._hitTest(t)){if(this.hoveredAdorner=s._resizingAdorner,0!==i.x&&0!==i.y)return;i=e}else this.hoveredAdorner=e;if(!this.activeTool||"ConnectionTool"!==this.activeTool.type){var a=[];for(o=0;o<s._selectedItems.length;o++)(r=s._selectedItems[o])instanceof n.Connection&&a.push(r);i=this._hitTestItems(a,t)}return i||this._hitTestItems(s.shapes,t)||this._hitTestItems(s.connections,t)},_hitTestItems:function(t,e){var i,n;for(i=t.length-1;i>=0;i--)if(n=t[i]._hitTest(e))return n}}),Z=i.Class.extend({init:function(){}}),K=Z.extend({init:function(t){Z.fn.init.call(this),this.connection=t},hitTest:function(t){return!!this.getBounds().inflate(10).contains(t)&&n.Geometry.distanceToPolyline(t,this.connection.allPoints())<10},getBounds:function(){for(var t=this.connection.allPoints(),e=t[0],i=t[t.length-1],n=Math.max(e.x,i.x),r=Math.min(e.x,i.x),o=Math.min(e.y,i.y),s=Math.max(e.y,i.y),l=1;l<t.length-1;++l)n=Math.max(n,t[l].x),r=Math.min(r,t[l].x),o=Math.min(o,t[l].y),s=Math.max(s,t[l].y);return new a(r,o,n-r,s-o)}}),J=K.extend({init:function(t){K.fn.init.call(this),this.connection=t},route:function(){}}),tt=K.extend({init:function(t){K.fn.init.call(this),this.connection=t},route:function(){var t,e,i=this.connection,n=this.connection.sourcePoint(),r=this.connection.targetPoint(),o=[n,n,r,r],s=r.x-n.x,a=r.y-n.y,l=o.length,c=null,u=null;if(h.isDefined(i._resolvedSourceConnector)&&(c=i._resolvedSourceConnector.options.name),h.isDefined(i._resolvedTargetConnector)&&(u=i._resolvedTargetConnector.options.name),null!==c&&null!==u&&h.contains(_,c)&&h.contains(_,u))c===y||c==x?u==y||u==x?this.connection.points([new d(n.x,n.y+a/2),new d(r.x,n.y+a/2)]):this.connection.points([new d(n.x,n.y+a)]):u==w||u==b?this.connection.points([new d(n.x+s/2,n.y),new d(n.x+s/2,n.y+a)]):this.connection.points([new d(r.x,n.y)]);else{this.connection.cascadeStartHorizontal=function(){if(null!==c){if(c===b||c===w)return!0;if(c===y||c===x)return!1}return Math.abs(n.x-r.x)>Math.abs(n.y-r.y)}(this.connection);for(var p=1;p<l-1;++p)i.cascadeStartHorizontal?p%2!=0?(t=s/(l/2),e=0):(t=0,e=a/((l-1)/2)):p%2!=0?(t=0,e=a/(l/2)):(t=s/((l-1)/2),e=0),o[p]=new d(o[p-1].x+t,o[p-1].y+e);p--,i.cascadeStartHorizontal&&p%2!=0||!i.cascadeStartHorizontal&&p%2==0?o[l-2]=new d(o[l-1].x,o[l-2].y):o[l-2]=new d(o[l-2].x,o[l-1].y),this.connection.points([o[1],o[2]])}}}),et=r.extend({init:function(t,e){this.diagram=t,this.options=g({},this.options,e),this.visual=new o,this.diagram._adorners.push(this)},refresh:function(){}}),it=et.extend({init:function(t,e){var i,n=this;n.connection=t,i=n.connection.diagram,n._ts=i.toolService,et.fn.init.call(n,i,e);var r=n.connection.sourcePoint(),o=n.connection.targetPoint();n.spVisual=new u(g(n.options.handles,{center:r})),n.epVisual=new u(g(n.options.handles,{center:o})),n.visual.append(n.spVisual),n.visual.append(n.epVisual)},options:{handles:{}},_getCursor:function(){return v.move},start:function(t){switch(this.handle=this._hitTest(t),this.startPoint=t,this._initialSource=this.connection.source(),this._initialTarget=this.connection.target(),this.handle){case-1:this.connection.targetConnector&&this._ts._connectionManipulation(this.connection,this.connection.targetConnector.shape);break;case 1:this.connection.sourceConnector&&this._ts._connectionManipulation(this.connection,this.connection.sourceConnector.shape)}},move:function(t,e){switch(t){case-1:this.connection.source(e);break;case 1:this.connection.target(e);break;default:var i=e.minus(this.startPoint);this.startPoint=e,this.connection.sourceConnector||this.connection.source(this.connection.sourcePoint().plus(i)),this.connection.targetConnector||this.connection.target(this.connection.targetPoint().plus(i))}return this.refresh(),!0},stop:function(t){var i,n=this.diagram.toolService,r=n.hoveredItem;if(i=n._hoveredConnector?n._hoveredConnector._c:r&&!r.line?r:t,this.handle!==e)switch(this.handle){case-1:this.connection.source(i);break;case 1:this.connection.target(i)}return this.handle=e,this._ts._connectionManipulation(),new z(this.connection,this._initialSource,this._initialTarget)},_hitTest:function(t){var e=this.connection.sourcePoint(),i=this.connection.targetPoint(),n=this.options.handles.width/2,r=this.options.handles.height/2,o=new a(e.x,e.y).inflate(n,r),s=new a(i.x,i.y).inflate(n,r);return o.contains(t)?-1:s.contains(t)?1:0},refresh:function(){this.spVisual.redraw({center:this.diagram.modelToLayer(this.connection.sourcePoint())}),this.epVisual.redraw({center:this.diagram.modelToLayer(this.connection.targetPoint())})}}),nt=et.extend({init:function(t,e){var i=this;et.fn.init.call(i,t,e),i._refreshHandler=function(t){t.item==i.shape&&i.refresh()}},show:function(t){var e,i,n,r=this;for(r._visible=!0,r.shape=t,r.diagram.bind(k,r._refreshHandler),e=t.connectors.length,r.connectors=[],r.visual.clear(),i=0;i<e;i++)n=new st(t.connectors[i]),r.connectors.push(n),r.visual.append(n.visual);r.visual.visible(!0),r.refresh()},destroy:function(){this.diagram.unbind(k,this._refreshHandler),this.shape=e,this._visible=e,this.visual.visible(!1)},_hitTest:function(t){var e,i;for(i=0;i<this.connectors.length;i++)if((e=this.connectors[i])._hitTest(t)){e._hover(!0),this.diagram.toolService._hoveredConnector=e;break}},refresh:function(){if(this.shape){var e=this.shape.bounds();e=this.diagram.modelToLayer(e),this.visual.position(e.topLeft()),t.each(this.connectors,function(){this.refresh()})}}});var rt=et.extend({init:function(t,e){var i=this;et.fn.init.call(i,t,e),i._manipulating=!1,i.map=[],i.shapes=[],i.rect=new l(e.editable.select),i.visual.append(i.rect),i._createHandles(),i.text=new s,i.visual.append(i.text),i._createThumb(),i.redraw(),i.diagram.bind("select",function(t){i._initialize(t.selected)}),i._refreshHandler=function(){i._internalChange||(i.refreshBounds(),i.refresh())},i._rotatedHandler=function(){1==i.shapes.length&&(i._angle=i.shapes[0].rotate().angle),i._refreshHandler()},i.diagram.bind(k,i._refreshHandler).bind("itemRotate",i._rotatedHandler),i.refreshBounds(),i.refresh()},options:{editable:{rotate:{thumb:{data:"M7.115,16C3.186,16,0,12.814,0,8.885C0,5.3,2.65,2.336,6.099,1.843V0l4.85,2.801l-4.85,2.8V3.758 c-2.399,0.473-4.21,2.588-4.21,5.126c0,2.886,2.34,5.226,5.226,5.226s5.226-2.34,5.226-5.226c0-1.351-0.513-2.582-1.354-3.51 l1.664-0.961c0.988,1.222,1.581,2.777,1.581,4.472C14.23,12.814,11.045,16,7.115,16L7.115,16z",y:-30}}},offset:10},_createThumb:function(){var t=this.options.editable,e=t.rotate;t&&e&&(this.rotationThumb=new p(e.thumb),this.visual.append(this.rotationThumb))},_createHandles:function(){var e,i,n,r,o=this.options.editable;if(o&&o.resize)for(e=o.resize.handles,r=-1;r<=1;r++)for(n=-1;n<=1;n++)0===r&&0===n||((i=new l(e)).domElement._hover=t.proxy(this._hover,this),this.map.push({x:r,y:n,visual:i}),this.visual.append(i))},bounds:function(t){if(!t)return this._bounds;this._innerBounds=t.clone(),this._bounds=this.diagram.modelToLayer(t).inflate(this.options.offset,this.options.offset)},_hitTest:function(t){var e,i,n,r,o=this.diagram.modelToLayer(t),s=this.options.editable,a=this.map.length;if(this._angle&&(o=o.clone().rotate(this._bounds.center(),this._angle)),s&&s.rotate&&this._rotationThumbBounds&&this._rotationThumbBounds.contains(o))return new d(-1,-2);if(s&&s.resize)for(e=0;e<a;e++)if(r=this.map[e],i=new d(r.x,r.y),(n=this._getHandleBounds(i)).offset(this._bounds.x,this._bounds.y),n.contains(o))return i;return this._bounds.contains(o)?new d(0,0):void 0},_getHandleBounds:function(t){var e=this.options.editable;if(e&&e.resize){var i=e.resize.handles||{},n=i.width,r=i.height,o=new a(0,0,n,r);return t.x<0?o.x=-n/2:0===t.x?o.x=Math.floor(this._bounds.width/2)-n/2:t.x>0&&(o.x=this._bounds.width+1-n/2),t.y<0?o.y=-r/2:0===t.y?o.y=Math.floor(this._bounds.height/2)-r/2:t.y>0&&(o.y=this._bounds.height+1-r/2),o}},_getCursor:function(t){var e=this._hitTest(t);if(e&&e.x>=-1&&e.x<=1&&e.y>=-1&&e.y<=1&&this.options.editable&&this.options.editable.resize){var i=this._angle;if(i&&(i=360-i,e.rotate(new d(0,0),i),e=new d(Math.round(e.x),Math.round(e.y))),-1==e.x&&-1==e.y)return"nw-resize";if(1==e.x&&1==e.y)return"se-resize";if(-1==e.x&&1==e.y)return"sw-resize";if(1==e.x&&-1==e.y)return"ne-resize";if(0===e.x&&-1==e.y)return"n-resize";if(0===e.x&&1==e.y)return"s-resize";if(1==e.x&&0===e.y)return"e-resize";if(-1==e.x&&0===e.y)return"w-resize"}return this._manipulating?v.move:v.select},_initialize:function(){var t,e,i=this,r=i.diagram.select();for(i.shapes=[],t=0;t<r.length;t++)(e=r[t])instanceof n.Shape&&(i.shapes.push(e),e._rotationOffset=new d);i._angle=1==i.shapes.length?i.shapes[0].rotate().angle:0,i._startAngle=i._angle,i._rotates(),i._positions(),i.refreshBounds(),i.refresh(),i.redraw()},_rotates:function(){var t,e;for(this.initialRotates=[],t=0;t<this.shapes.length;t++)e=this.shapes[t],this.initialRotates.push(e.rotate().angle)},_positions:function(){var t,e;for(this.initialStates=[],t=0;t<this.shapes.length;t++)e=this.shapes[t],this.initialStates.push(e.bounds())},_hover:function(t,e){var i=this.options.editable;if(i&&i.resize){var n=i.resize.handles,r=n.hover,o=n.stroke,s=n.background;t&&h.isDefined(r.stroke)&&(o=g({},o,r.stroke)),t&&h.isDefined(r.background)&&(s=r.background),e.redraw({stroke:o,background:s})}},start:function(t){this._sp=t,this._cp=t,this._lp=t,this._manipulating=!0,this._internalChange=!0,this.shapeStates=[];for(var e=0;e<this.shapes.length;e++){var i=this.shapes[e];this.shapeStates.push(i.bounds())}},redraw:function(){var e,i,n=this.options.editable,r=n.resize,o=n.rotate,s=n&&r?"inline":"none",a=n&&o?"inline":"none";for(e=0;e<this.map.length;e++)i=this.map[e],t(i.visual.domElement).css("display",s);this.rotationThumb&&t(this.rotationThumb.domElement).css("display",a)},move:function(t,e){var i,n,r,o,s,l,c,u,p,f,g,m,v,y,b=new d,w=new d,x=0;if(-2===t.y&&-1===t.x){for(o=this._innerBounds.center(),this._angle=this._truncateAngle(h.findAngle(o,e)),l=0;l<this.shapes.length;l++)s=this.shapes[l],c=(this._angle+this.initialRotates[l]-this._startAngle)%360,s.rotate(c,o),s.hasOwnProperty("layout")&&s.layout(s),this._rotating=!0;this.refresh()}else{if(!0===this.diagram.options.snap.enabled){var _=this._truncateDistance(e.minus(this._lp));if(0===_.x&&0===_.y)return void(this._cp=e);i=_,this._lp=new d(this._lp.x+_.x,this._lp.y+_.y)}else i=e.minus(this._cp);for(0===t.x&&0===t.y?(w=b=i,n=!0):(this._angle&&i.rotate(new d(0,0),this._angle),-1==t.x?b.x=i.x:1==t.x&&(w.x=i.x),-1==t.y?b.y=i.y:1==t.y&&(w.y=i.y)),n||(m=t,v=this._innerBounds,-1==m.x&&-1==m.y?y=v.bottomRight():1==m.x&&1==m.y?y=v.topLeft():-1==m.x&&1==m.y?y=v.topRight():1==m.x&&-1==m.y?y=v.bottomLeft():0===m.x&&-1==m.y?y=v.bottom():0===m.x&&1==m.y?y=v.top():1==m.x&&0===m.y?y=v.left():-1==m.x&&0===m.y&&(y=v.right()),p=y,f=(this._innerBounds.width+i.x*t.x)/this._innerBounds.width,g=(this._innerBounds.height+i.y*t.y)/this._innerBounds.height),l=0;l<this.shapes.length;l++){if(r=(s=this.shapes[l]).bounds(),n)u=this._displaceBounds(r,b,w,n);else{(u=r.clone()).scale(f,g,p,this._innerBounds.center(),s.rotate().angle);var k=u.center();k.rotate(r.center(),-this._angle),u=new a(k.x-u.width/2,k.y-u.height/2,u.width,u.height)}if(u.width>=s.options.minWidth&&u.height>=s.options.minHeight){var C=r;s.bounds(u),s.hasOwnProperty("layout")&&s.layout(s,C,u),s.rotate(s.rotate().angle),x+=1}}x==l&&(u=this._displaceBounds(this._innerBounds,b,w,n),this.bounds(u),this.refresh()),this._positions()}this._cp=e},_truncatePositionToGuides:function(t){return this.diagram.ruler?this.diagram.ruler.truncatePositionToGuides(t):t},_truncateSizeToGuides:function(t){return this.diagram.ruler?this.diagram.ruler.truncateSizeToGuides(t):t},_truncateAngle:function(t){var e=Math.max(this.diagram.options.snap.angle,5);return!0===this.diagram.options.snap.enabled?Math.floor(t%360/e)*e:t%360},_truncateDistance:function(t){if(t instanceof n.Point)return new n.Point(this._truncateDistance(t.x),this._truncateDistance(t.y));var e=Math.max(this.diagram.options.snap.size,5);return!0===this.diagram.options.snap.enabled?Math.floor(t/e)*e:t},_displaceBounds:function(t,e,i,n){var r,o=t.topLeft().plus(e),s=t.bottomRight().plus(i),l=a.fromPoints(o,s);return n||((r=l.center()).rotate(t.center(),-this._angle),l=new a(r.x-l.width/2,r.y-l.height/2,l.width,l.height)),l},stop:function(){var t;if(this._cp!=this._sp)if(this._rotating)t=new O(this,this.shapes,this.initialRotates),this._rotating=!1;else{if(this.diagram.ruler)for(var i=0;i<this.shapes.length;i++){var n=this.shapes[i],r=n.bounds();r=this._truncateSizeToGuides(this._truncatePositionToGuides(r)),n.bounds(r),this.refreshBounds(),this.refresh()}t=new L(this.shapes,this.shapeStates,this)}return this._manipulating=e,this._internalChange=e,this._rotating=e,t},refreshBounds:function(){var t=1==this.shapes.length?this.shapes[0].bounds().clone():this.diagram.boundingBox(this.shapes,!0);this.bounds(t)},refresh:function(){var e,i,n=this;if(this.shapes.length>0){i=this.bounds(),this.visual.visible(!0),this.visual.position(i.topLeft()),t.each(this.map,function(){e=n._getHandleBounds(new d(this.x,this.y)),this.visual.position(e.topLeft())}),this.visual.position(i.topLeft());var r=new d(i.width/2,i.height/2);if(this.visual.rotate(this._angle,r),this.rect.redraw({width:i.width,height:i.height}),this.rotationThumb){var o=this.options.editable.rotate.thumb;this._rotationThumbBounds=new a(i.center().x,i.y+o.y,0,0).inflate(o.width),this.rotationThumb.redraw({x:i.width/2-o.width/2})}}else this.visual.visible(!1)}}),ot=r.extend({init:function(t){this.visual=new l(this.options),this.diagram=t},options:{stroke:{color:"#778899",width:1,dashType:"dash"},background:"none"},start:function(t){this._sp=this._ep=t,this.refresh(),this.diagram._adorn(this,!0)},end:function(){this._sp=this._ep=e,this.diagram._adorn(this,!1)},bounds:function(t){return t&&(this._bounds=t),this._bounds},move:function(t){this._ep=t,this.refresh()},refresh:function(){if(this._sp){var t=a.fromPoints(this.diagram.modelToLayer(this._sp),this.diagram.modelToLayer(this._ep));this.bounds(a.fromPoints(this._sp,this._ep)),this.visual.position(t.topLeft()),this.visual.redraw({height:t.height+1,width:t.width+1})}}}),st=r.extend({init:function(t){this.options=g({},t.options),this._c=t,this.visual=new u(this.options),this.refresh()},_hover:function(t){var e=this.options,i=e.hover,n=e.stroke,r=e.background;t&&h.isDefined(i.stroke)&&(n=g({},n,i.stroke)),t&&h.isDefined(i.background)&&(r=i.background),this.visual.redraw({stroke:n,background:r})},refresh:function(){var t=this._c.shape.diagram.modelToView(this._c.position()),e=t.minus(this._c.shape.bounds("transformed").topLeft()),i=new a(t.x,t.y,0,0);i.inflate(this.options.width/2,this.options.height/2),this._visualBounds=i,this.visual.redraw({center:new d(e.x,e.y)})},_hitTest:function(t){var e=this._c.shape.diagram.modelToView(t);return this._visualBounds.contains(e)}});g(n,{CompositeUnit:P,TransformUnit:L,PanUndoUnit:R,AddShapeUnit:B,AddConnectionUnit:I,DeleteShapeUnit:M,DeleteConnectionUnit:E,ContentChangedUndoUnit:A,ConnectionEditAdorner:it,UndoRedoService:F,ResizingAdorner:rt,Selector:ot,ToolService:X,ConnectorsAdorner:nt,LayoutUndoUnit:T,ConnectionEditUnit:D,ToFrontUnit:N,ToBackUnit:V,ConnectionRouterBase:Z,PolylineRouter:J,CascadingRouter:tt,SelectionTool:G})}(window.kendo.jQuery),function(t,e){var i=window.kendo,n=i.dataviz.diagram,r=n.Graph,o=n.Node,s=n.Link,a=i.deepExtend,l=n.Size,h=n.Rect,c=n.Dictionary,d=n.Set,u=n.Graph,p=n.Utils,f=n.Point,g=Math.PI/180,m=p.contains,v=t.grep,y=i.Class.extend({defaultOptions:{type:"Tree",subtype:"Down",roots:null,animate:!1,limitToView:!1,friction:.9,nodeDistance:50,iterations:300,horizontalSeparation:90,verticalSeparation:50,underneathVerticalTopOffset:15,underneathHorizontalOffset:15,underneathVerticalSeparation:15,grid:{width:1500,offsetX:50,offsetY:50,componentSpacingX:20,componentSpacingY:20},layerSeparation:50,layeredIterations:2,startRadialAngle:0,endRadialAngle:360,radialSeparation:150,radialFirstLevelSeparation:200,keepComponentsInOneRadialLayout:!1,ignoreContainers:!0,layoutContainerChildren:!1,ignoreInvisible:!0,animateTransitions:!1},init:function(){},gridLayoutComponents:function(t){if(!t)throw"No components supplied.";p.forEach(t,function(t){t.calcBounds()}),t.sort(function(t,e){return e.bounds.width-t.bounds.width});for(var e,i=this.options.grid.width,n=this.options.grid.componentSpacingX,r=this.options.grid.componentSpacingY,o=0,s=this.options.grid.offsetX,a=s,l=this.options.grid.offsetY,h=[],c=[];t.length>0;){a>=i&&(a=s,l+=o+r,o=0);var d=t.pop();for(this.moveToOffset(d,new f(a,l)),e=0;e<d.nodes.length;e++)c.push(d.nodes[e]);for(e=0;e<d.links.length;e++)h.push(d.links[e]);var u=d.bounds,g=u.height;(g<=0||isNaN(g))&&(g=0);var m=u.width;(m<=0||isNaN(m))&&(m=0),g>=o&&(o=g),a+=m+n}return{nodes:c,links:h}},moveToOffset:function(t,e){var i,n,r=t.bounds,o=e.x-r.x,s=e.y-r.y;for(i=0;i<t.nodes.length;i++){var a=t.nodes[i],l=a.bounds();0===l.width&&0===l.height&&0===l.x&&0===l.y&&(l=new h(0,0,0,0)),l.x+=o,l.y+=s,a.bounds(l)}for(i=0;i<t.links.length;i++){var c=t.links[i];if(c.points){var d=[],u=c.points;for(n=0;n<u.length;n++){var p=u[n];p.x+=o,p.y+=s,d.push(p)}c.points=d}}return this.currentHorizontalOffset+=r.width+this.options.grid.offsetX,new f(o,s)},transferOptions:function(t){this.options=i.deepExtend({},this.defaultOptions),p.isUndefined(t)||(this.options=i.deepExtend(this.options,t||{}))}}),b=i.Class.extend({init:function(t){this.nodeMap=new c,this.shapeMap=new c,this.nodes=[],this.edges=[],this.edgeMap=new c,this.finalNodes=[],this.finalLinks=[],this.ignoredConnections=[],this.ignoredShapes=[],this.hyperMap=new c,this.hyperTree=new r,this.finalGraph=null,this.diagram=t},convert:function(t){if(p.isUndefined(this.diagram))throw"No diagram to convert.";return this.options=i.deepExtend({ignoreInvisible:!0,ignoreContainers:!0,layoutContainerChildren:!1},t||{}),this.clear(),this._renormalizeShapes(),this._renormalizeConnections(),this.finalNodes=new c(this.nodes),this.finalLinks=new c(this.edges),this.finalGraph=new r,this.finalNodes.forEach(function(t){this.finalGraph.addNode(t)},this),this.finalLinks.forEach(function(t){this.finalGraph.addExistingLink(t)},this),this.finalGraph},mapConnection:function(t){return this.edgeMap.first(function(e){return m(this.edgeMap.get(e),t)})},mapShape:function(t){for(var e=this.nodeMap.keys(),i=0,n=e.length;i<n;i++){var r=e[i];if(m(this.nodeMap.get(r),t))return r}},getEdge:function(t,e){return p.first(t.links,function(i){return i.getComplement(t)===e})},clear:function(){this.finalGraph=null,this.hyperTree=!this.options.ignoreContainers&&this.options.layoutContainerChildren?new u:null,this.hyperMap=!this.options.ignoreContainers&&this.options.layoutContainerChildren?new c:null,this.nodeMap=new c,this.shapeMap=new c,this.nodes=[],this.edges=[],this.edgeMap=new c,this.ignoredConnections=[],this.ignoredShapes=[],this.finalNodes=[],this.finalLinks=[]},listToRoot:function(t){var e=[],i=t.container;if(!i)return e;for(e.push(i);i.parentContainer;)i=i.parentContainer,e.push(i);return e.reverse(),e},firstNonIgnorableContainer:function(t){return t.isContainer&&!this._isIgnorableItem(t)?t:t.parentContainer?this.firstNonIgnorableContainer(t.parentContainer):null},isContainerConnection:function(t,e){return!(!t.isContainer||!this.isDescendantOf(t,e))||e.isContainer&&this.isDescendantOf(e,t)},isDescendantOf:function(t,e){if(!t.isContainer)throw"Expecting a container.";if(t===e)return!1;if(m(t.children,e))return!0;for(var i=[],n=0,r=t.children.length;n<r;n++){var o=t.children[n];o.isContainer&&this.isDescendantOf(o,e)&&i.push(o)}return i.length>0},isIgnorableItem:function(t){return this.options.ignoreInvisible?(!t.isCollapsed||!this._isVisible(t))&&!(!t.isCollapsed&&this._isVisible(t)):t.isCollapsed&&!this._isTop(t)},isShapeMapped:function(t){return t.isCollapsed&&!this._isVisible(t)&&!this._isTop(t)},leastCommonAncestor:function(t,e){if(!t)throw"Parameter should not be null.";if(!e)throw"Parameter should not be null.";if(!this.hyperTree)throw"No hypertree available.";var i=this.listToRoot(t),n=this.listToRoot(e),r=null;if(p.isEmpty(i)||p.isEmpty(n))return this.hyperTree.root.data;for(var o=i[0],s=n[0],a=0;o===s&&(r=i[a],!(++a>=i.length||a>=n.length));)o=i[a],s=n[a];return r?v(this.hyperTree.nodes,function(t){return t.data.container===r}):this.hyperTree.root.data},_isTop:function(t){return!t.parentContainer},_isVisible:function(t){return!!t.visible()&&(t.parentContainer?this._isVisible(t.parentContainer):t.visible())},_isCollapsed:function(t){return!(!t.isContainer||!t.isCollapsed)||t.parentContainer&&this._isCollapsed(t.parentContainer)},_renormalizeShapes:function(){if(!this.options.ignoreContainers)throw"Containers are not supported yet, but stay tuned.";for(var t=0,e=this.diagram.shapes.length;t<e;t++){var i=this.diagram.shapes[t];if(this.options.ignoreInvisible&&!this._isVisible(i)||i.isContainer)this.ignoredShapes.push(i);else{var n=new o(i.id,i);n.isVirtual=!1,this.nodeMap.add(n,[i]),this.nodes.push(n)}}},_renormalizeConnections:function(){if(0!==this.diagram.connections.length)for(var t=0,e=this.diagram.connections.length;t<e;t++){var i=this.diagram.connections[t];if(this.isIgnorableItem(i))this.ignoredConnections.push(i);else{var n=i.sourceConnector?i.sourceConnector.shape:null,r=i.targetConnector?i.targetConnector.shape:null;if(n&&r)if(!m(this.ignoredShapes,n)||this.shapeMap.containsKey(n))if(!m(this.ignoredShapes,r)||this.shapeMap.containsKey(r)){this.shapeMap.containsKey(n)&&(n=this.shapeMap[n]),this.shapeMap.containsKey(r)&&(r=this.shapeMap[r]);var o=this.mapShape(n),a=this.mapShape(r);if(o===a||this.areConnectedAlready(o,a))this.ignoredConnections.push(i);else{if(null===o||null===a)throw"A shape was not mapped to a node.";if(!this.options.ignoreContainers)throw"Containers are not supported yet, but stay tuned.";if(o.isVirtual||a.isVirtual)this.ignoredConnections.push(i);else{var l=new s(o,a,i.id,i);this.edgeMap.add(l,[i]),this.edges.push(l)}}}else this.ignoredConnections.push(i);else this.ignoredConnections.push(i);else this.ignoredConnections.push(i)}}},areConnectedAlready:function(t,e){return p.any(this.edges,function(i){return i.source===t&&i.target===e||i.source===e&&i.target===t})}}),w=y.extend({init:function(t){if(y.fn.init.call(this),p.isUndefined(t))throw"Diagram is not specified.";this.diagram=t},layout:function(t){this.transferOptions(t);var e=new b(this.diagram).convert(t);if(!e.isEmpty()){var i=e.getConnectedComponents();if(!p.isEmpty(i)){for(var r=0;r<i.length;r++){var o=i[r];this.layoutGraph(o,t)}var s=this.gridLayoutComponents(i);return new n.LayoutState(this.diagram,s)}}},layoutGraph:function(t,e){p.isDefined(e)&&this.transferOptions(e),this.graph=t;var i=9*this.options.nodeDistance;this.temperature=i;var n=this._expectedBounds();this.width=n.width,this.height=n.height;for(var r=0;r<this.options.iterations;r++)this.refineStage=r>=5*this.options.iterations/6,this.tick(),this.temperature=this.refineStage?i/30:i*(1-r/(2*this.options.iterations))},tick:function(){var t;for(t=0;t<this.graph.nodes.length;t++)this._repulsion(this.graph.nodes[t]);for(t=0;t<this.graph.links.length;t++)this._attraction(this.graph.links[t]);for(t=0;t<this.graph.nodes.length;t++){var e=this.graph.nodes[t],i=Math.sqrt(e.dx*e.dx+e.dy*e.dy);if(0===i)return;e.x+=Math.min(i,this.temperature)*e.dx/i,e.y+=Math.min(i,this.temperature)*e.dy/i,this.options.limitToView&&(e.x=Math.min(this.width,Math.max(e.width/2,e.x)),e.y=Math.min(this.height,Math.max(e.height/2,e.y)))}},_shake:function(t){var e=Math.random()*this.options.nodeDistance/4,i=2*Math.random()*Math.PI;t.x+=e*Math.cos(i),t.y-=e*Math.sin(i)},_InverseSquareForce:function(t,e,i){var n;if(this.refineStage){var r=e.x-i.x,o=e.y-i.y,s=e.width/2,a=e.height/2,l=i.width/2,h=i.height/2;n=Math.pow(r,2)/Math.pow(s+l+this.options.nodeDistance,2)+Math.pow(o,2)/Math.pow(a+h+this.options.nodeDistance,2)}else n=Math.pow(t,2)/Math.pow(this.options.nodeDistance,2);return 4*n/3},_SquareForce:function(t,e,i){return 1/this._InverseSquareForce(t,e,i)},_repulsion:function(t){t.dx=0,t.dy=0,p.forEach(this.graph.nodes,function(e){if(e!==t){for(;t.x===e.x&&t.y===e.y;)this._shake(e);var i=t.x-e.x,n=t.y-e.y,r=Math.sqrt(i*i+n*n),o=2*this._SquareForce(r,t,e);t.dx+=i/r*o,t.dy+=n/r*o}},this)},_attraction:function(t){var e=t.target,i=t.source;if(i!==e){for(;i.x===e.x&&i.y===e.y;)this._shake(e);var n=i.x-e.x,r=i.y-e.y,o=Math.sqrt(n*n+r*r),s=5*this._InverseSquareForce(o,i,e),a=n/o*s,l=r/o*s;e.dx+=a,e.dy+=l,i.dx-=a,i.dy-=l}},_expectedBounds:function(){var t,e=this.graph.nodes.length;if(0===e)return t;var i=(t=p.fold(this.graph.nodes,function(t,e){var i=e.width*e.height;return i>0?t+=Math.sqrt(i):0},0,this))/e*Math.ceil(Math.sqrt(e));return{width:4*(i*Math.sqrt(1.5)),height:4*(i/Math.sqrt(1.5))}}}),x=i.Class.extend({init:function(t){this.center=null,this.options=t},layout:function(t,e){if(this.graph=t,this.graph.nodes&&0!==this.graph.nodes.length){if(!m(this.graph.nodes,e))throw"The given root is not in the graph.";this.center=e,this.graph.cacheRelationships(),this.layoutSwitch()}},layoutLeft:function(t){this.setChildrenDirection(this.center,"Left",!1),this.setChildrenLayout(this.center,"Default",!1);var e,i,n,r=0,o=0;for(i=0;i<t.length;i++){(n=t[i]).TreeDirection="Left";var s=this.measure(n,l.Empty);o=Math.max(o,s.Width),r+=s.height+this.options.verticalSeparation}r-=this.options.verticalSeparation;var a=this.center.x-this.options.horizontalSeparation;for(e=this.center.y+(this.center.height-r)/2,i=0;i<t.length;i++){n=t[i];var h=new f(a-n.Size.width,e);this.arrange(n,h),e+=n.Size.height+this.options.verticalSeparation}},layoutRight:function(t){this.setChildrenDirection(this.center,"Right",!1),this.setChildrenLayout(this.center,"Default",!1);var e,i,n,r=0,o=0;for(i=0;i<t.length;i++){(n=t[i]).TreeDirection="Right";var s=this.measure(n,l.Empty);o=Math.max(o,s.Width),r+=s.height+this.options.verticalSeparation}r-=this.options.verticalSeparation;var a=this.center.x+this.options.horizontalSeparation+this.center.width;for(e=this.center.y+(this.center.height-r)/2,i=0;i<t.length;i++){n=t[i];var h=new f(a,e);this.arrange(n,h),e+=n.Size.height+this.options.verticalSeparation}},layoutUp:function(t){this.setChildrenDirection(this.center,"Up",!1),this.setChildrenLayout(this.center,"Default",!1);var e,i,n,r=0;for(n=0;n<t.length;n++){(i=t[n]).TreeDirection="Up",r+=this.measure(i,l.Empty).width+this.options.horizontalSeparation}r-=this.options.horizontalSeparation;var o=this.center.x+this.center.width/2-r/2;for(n=0;n<t.length;n++){i=t[n],e=this.center.y-this.options.verticalSeparation-i.Size.height;var s=new f(o,e);this.arrange(i,s),o+=i.Size.width+this.options.horizontalSeparation}},layoutDown:function(t){var e,i;this.setChildrenDirection(this.center,"Down",!1),this.setChildrenLayout(this.center,"Default",!1);var n,r=0;for(i=0;i<t.length;i++){(e=t[i]).treeDirection="Down",r+=this.measure(e,l.Empty).width+this.options.horizontalSeparation}r-=this.options.horizontalSeparation;var o=this.center.x+this.center.width/2-r/2;for(n=this.center.y+this.options.verticalSeparation+this.center.height,i=0;i<t.length;i++){e=t[i];var s=new f(o,n);this.arrange(e,s),o+=e.Size.width+this.options.horizontalSeparation}},layoutRadialTree:function(){this.setChildrenDirection(this.center,"Radial",!1),this.setChildrenLayout(this.center,"Default",!1),this.previousRoot=null;var t=this.options.startRadialAngle*g,e=this.options.endRadialAngle*g;if(e<=t)throw"Final angle should not be less than the start angle.";this.maxDepth=0,this.origin=new f(this.center.x,this.center.y),this.calculateAngularWidth(this.center,0),this.maxDepth>0&&this.radialLayout(this.center,this.options.radialFirstLevelSeparation,t,e),this.center.Angle=e-t},tipOverTree:function(t,e){p.isUndefined(e)&&(e=0),this.setChildrenDirection(this.center,"Down",!1),this.setChildrenLayout(this.center,"Default",!1),this.setChildrenLayout(this.center,"Underneath",!1,e);var i,n,r,o=0;for(r=0;r<t.length;r++){(n=t[r]).TreeDirection="Down",o+=this.measure(n,l.Empty).width+this.options.horizontalSeparation}o-=this.options.horizontalSeparation,o-=t[t.length-1].width,o+=t[t.length-1].associatedShape.bounds().width;var s=this.center.x+this.center.width/2-o/2;for(i=this.center.y+this.options.verticalSeparation+this.center.height,r=0;r<t.length;r++){n=t[r];var a=new f(s,i);this.arrange(n,a),s+=n.Size.width+this.options.horizontalSeparation}},calculateAngularWidth:function(t,e){e>this.maxDepth&&(this.maxDepth=e);var i=0,n=0===e?0:Math.sqrt(2e6)/e;if(t.children.length>0){for(var r=0,o=t.children.length;r<o;r++){var s=t.children[r];i+=this.calculateAngularWidth(s,e+1)}i=Math.max(n,i)}else i=n;return t.sectorAngle=i,i},sortChildren:function(t){var e,i=0;if(t.parents.length>1)throw"Node is not part of a tree.";var n=t.parents[0];if(n){var r=new f(n.x,n.y),o=new f(t.x,t.y);i=this.normalizeAngle(Math.atan2(r.y-o.y,r.x-o.x))}var s=t.children.length;if(0===s)return null;var a=[],l=[];for(e=0;e<s;++e){var h=t.children[e],c=new f(h.x,h.y);l[e]=e,a[e]=this.normalizeAngle(-i+Math.atan2(c.y-c.y,c.x-c.x))}p.bisort(a,l);var d=[],u=t.children;for(e=0;e<s;++e)d.push(u[l[e]]);return d},normalizeAngle:function(t){for(;t>2*Math.PI;)t-=2*Math.PI;for(;t<0;)t+=2*Math.PI;return t},radialLayout:function(t,e,i,n){for(var r=n-i,o=r/2,s=t.sectorAngle,a=0,l=this.sortChildren(t),h=0,c=l.length;h<c;h++){var d=l[h],u=d,p=u.sectorAngle/s;d.children.length>0&&this.radialLayout(d,e+this.options.radialSeparation,i+a*r,i+(a+p)*r),this.setPolarLocation(d,e,i+a*r+p*o),u.angle=p*r,a+=p}},setPolarLocation:function(t,e,i){t.x=this.origin.x+e*Math.cos(i),t.y=this.origin.y+e*Math.sin(i),t.BoundingRectangle=new h(t.x,t.y,t.width,t.height)},setChildrenDirection:function(t,e,i){var n=t.treeDirection;this.graph.depthFirstTraversal(t,function(t){t.treeDirection=e}),i||(t.treeDirection=n)},setChildrenLayout:function(t,e,i,n){p.isUndefined(n)&&(n=0);var r=t.childrenLayout;n>0?(this.graph.assignLevels(t),this.graph.depthFirstTraversal(t,function(t){t.level>=n+1&&(t.childrenLayout=e)})):(this.graph.depthFirstTraversal(t,function(t){t.childrenLayout=e}),i||(t.childrenLayout=r))},measure:function(t,e){var i,n=0,r=0,o=new l(0,0);if(!t)throw"";var s=t.associatedShape.bounds(),a=s.width,h=s.height;if(1!==t.parents.length)throw"Node not in a spanning tree.";var c=t.parents[0];if("Undefined"===t.treeDirection&&(t.treeDirection=c.treeDirection),p.isEmpty(t.children))o=new l(Math.abs(a)<1e-6?50:a,Math.abs(h)<1e-6?25:h);else if(1===t.children.length){switch(t.treeDirection){case"Radial":i=this.measure(t.children[0],e),n=a+this.options.radialSeparation*Math.cos(t.AngleToParent)+i.width,r=h+Math.abs(this.options.radialSeparation*Math.sin(t.AngleToParent))+i.height;break;case"Left":case"Right":switch(t.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":n=a+(i=this.measure(t.children[0],e)).width+this.options.underneathHorizontalOffset,r=h+this.options.underneathVerticalTopOffset+i.height;break;case"Default":i=this.measure(t.children[0],e),n=a+this.options.horizontalSeparation+i.width,r=Math.max(h,i.height);break;default:throw"Unhandled TreeDirection in the Radial layout measuring."}break;case"Up":case"Down":switch(t.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":i=this.measure(t.children[0],e),n=Math.max(a,i.width+this.options.underneathHorizontalOffset),r=h+this.options.underneathVerticalTopOffset+i.height;break;case"Default":i=this.measure(t.children[0],e),r=h+this.options.verticalSeparation+i.height,n=Math.max(a,i.width);break;default:throw"Unhandled TreeDirection in the Down layout measuring."}break;default:throw"Unhandled TreeDirection in the layout measuring."}o=new l(n,r)}else{var d,u;switch(t.treeDirection){case"Left":case"Right":switch(t.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":for(n=a,r=h+this.options.underneathVerticalTopOffset,d=0;d<t.children.length;d++)u=t.children[d],i=this.measure(u,e),n=Math.max(n,i.width+this.options.underneathHorizontalOffset),r+=i.height+this.options.underneathVerticalSeparation;r-=this.options.underneathVerticalSeparation;break;case"Default":for(n=a,r=0,d=0;d<t.children.length;d++)u=t.children[d],i=this.measure(u,e),n=Math.max(n,a+this.options.horizontalSeparation+i.width),r+=i.height+this.options.verticalSeparation;r-=this.options.verticalSeparation;break;default:throw"Unhandled TreeDirection in the Right layout measuring."}break;case"Up":case"Down":switch(t.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":for(n=a,r=h+this.options.underneathVerticalTopOffset,d=0;d<t.children.length;d++)u=t.children[d],i=this.measure(u,e),n=Math.max(n,i.width+this.options.underneathHorizontalOffset),r+=i.height+this.options.underneathVerticalSeparation;r-=this.options.underneathVerticalSeparation;break;case"Default":for(n=0,r=0,d=0;d<t.children.length;d++)u=t.children[d],n+=(i=this.measure(u,e)).width+this.options.horizontalSeparation,r=Math.max(r,i.height+this.options.verticalSeparation+h);n-=this.options.horizontalSeparation;break;default:throw"Unhandled TreeDirection in the Down layout measuring."}break;default:throw"Unhandled TreeDirection in the layout measuring."}o=new l(n,r)}return t.SectorAngle=Math.sqrt(n*n/4+r*r/4),t.Size=o,o},arrange:function(t,e){var i,n,r,o,s,a,l,c=t.associatedShape.bounds(),d=c.width,u=c.height;if(p.isEmpty(t.children))t.x=e.x,t.y=e.y,t.BoundingRectangle=new h(e.x,e.y,d,u);else switch(t.treeDirection){case"Left":switch(t.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":for(l=e,t.x=l.x,t.y=l.y,t.BoundingRectangle=new h(t.x,t.y,t.width,t.height),a=e.y+u+this.options.underneathVerticalTopOffset,i=0;i<r.children.length;i++)r=r.children[i],s=l.x-r.associatedShape.width-this.options.underneathHorizontalOffset,n=new f(s,a),this.arrange(r,n),a+=r.Size.height+this.options.underneathVerticalSeparation;break;case"Default":for(l=new f(e.x+t.Size.width-d,e.y+(t.Size.height-u)/2),t.x=l.x,t.y=l.y,t.BoundingRectangle=new h(t.x,t.y,t.width,t.height),s=l.x-this.options.horizontalSeparation,a=e.y,i=0;i<t.children.length;i++)r=t.children[i],n=new f(s-r.Size.width,a),this.arrange(r,n),a+=r.Size.height+this.options.verticalSeparation;break;default:throw"Unsupported TreeDirection"}break;case"Right":switch(t.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":for(l=e,t.x=l.x,t.y=l.y,t.BoundingRectangle=new h(t.x,t.y,t.width,t.height),s=e.x+d+this.options.underneathHorizontalOffset,a=e.y+u+this.options.underneathVerticalTopOffset,i=0;i<t.children.length;i++)r=t.children[i],n=new f(s,a),this.arrange(r,n),a+=r.Size.height+this.options.underneathVerticalSeparation;break;case"Default":for(l=new f(e.x,e.y+(t.Size.height-u)/2),t.x=l.x,t.y=l.y,t.BoundingRectangle=new h(t.x,t.y,t.width,t.height),s=e.x+d+this.options.horizontalSeparation,a=e.y,i=0;i<t.children.length;i++)r=t.children[i],n=new f(s,a),this.arrange(r,n),a+=r.Size.height+this.options.verticalSeparation;break;default:throw"Unsupported TreeDirection"}break;case"Up":if(l=new f(e.x+(t.Size.width-d)/2,e.y+t.Size.height-u),t.x=l.x,t.y=l.y,t.BoundingRectangle=new h(t.x,t.y,t.width,t.height),Math.abs(l.x-e.x)<1e-6){for(o=0,i=0;i<t.children.length;i++)o+=t.children[i].Size.width+this.options.horizontalSeparation;o-=this.options.horizontalSeparation,s=e.x+(d-o)/2}else s=e.x;for(i=0;i<t.children.length;i++)r=t.children[i],a=l.y-this.options.verticalSeparation-r.Size.height,n=new f(s,a),this.arrange(r,n),s+=r.Size.width+this.options.horizontalSeparation;break;case"Down":switch(t.childrenLayout){case"TopAlignedWithParent":case"BottomAlignedWithParent":break;case"Underneath":for(l=e,t.x=l.x,t.y=l.y,t.BoundingRectangle=new h(t.x,t.y,t.width,t.height),s=e.x+this.options.underneathHorizontalOffset,a=e.y+u+this.options.underneathVerticalTopOffset,i=0;i<t.children.length;i++)r=t.children[i],n=new f(s,a),this.arrange(r,n),a+=r.Size.height+this.options.underneathVerticalSeparation;break;case"Default":if(l=new f(e.x+(t.Size.width-d)/2,e.y),t.x=l.x,t.y=l.y,t.BoundingRectangle=new h(t.x,t.y,t.width,t.height),Math.abs(l.x-e.x)<1e-6){for(o=0,i=0;i<t.children.length;i++)o+=t.children[i].Size.width+this.options.horizontalSeparation;o-=this.options.horizontalSeparation,s=e.x+(d-o)/2}else s=e.x;for(i=0;i<t.children.length;i++)r=t.children[i],a=l.y+this.options.verticalSeparation+u,n=new f(s,a),this.arrange(r,n),s+=r.Size.width+this.options.horizontalSeparation;break;default:throw"Unsupported TreeDirection"}break;case"None":break;default:throw"Unsupported TreeDirection"}},layoutSwitch:function(){if(this.center&&!p.isEmpty(this.center.children)){var t,e,i,n,r=this.options.subtype;p.isUndefined(r)&&(r="Down");var o=this.center.children;switch(r.toLowerCase()){case"radial":case"radialtree":this.layoutRadialTree();break;case"mindmaphorizontal":case"mindmap":t=this.center.children,1===this.center.children.length?this.layoutRight(t):(n=o.length/2,e=v(this.center.children,function(t){return p.indexOf(o,t)<n}),i=v(this.center.children,function(t){return p.indexOf(o,t)>=n}),this.layoutLeft(e),this.layoutRight(i));break;case"mindmapvertical":t=this.center.children,1===this.center.children.length?this.layoutDown(t):(n=o.length/2,e=v(this.center.children,function(t){return p.indexOf(o,t)<n}),i=v(this.center.children,function(t){return p.indexOf(o,t)>=n}),this.layoutUp(e),this.layoutDown(i));break;case"right":this.layoutRight(this.center.children);break;case"left":this.layoutLeft(this.center.children);break;case"up":case"bottom":this.layoutUp(this.center.children);break;case"down":case"top":this.layoutDown(this.center.children);break;case"tipover":case"tipovertree":if(this.options.tipOverTreeStartLevel<0)throw"The tip-over level should be a positive integer.";this.tipOverTree(this.center.children,this.options.tipOverTreeStartLevel)}}}}),_=y.extend({init:function(t){if(y.fn.init.call(this),p.isUndefined(t))throw"No diagram specified.";this.diagram=t},layout:function(t){this.transferOptions(t);var e=new b(this.diagram);this.graph=e.convert();var i=this.layoutComponents();return new n.LayoutState(this.diagram,i)},layoutComponents:function(){if(!this.graph.isEmpty()){var t=this.graph.getConnectedComponents();if(!p.isEmpty(t)){for(var e=new x(this.options),i=[],n=0;n<t.length;n++){var r=t[n],o=this.getTree(r);if(!o)throw"Failed to find a spanning tree for the component.";var s=o.root,a=o.tree;e.layout(a,s),i.push(a)}return this.gridLayoutComponents(i)}}},getTree:function(t){var e=null;if(this.options.roots&&this.options.roots.length>0)for(var i=0,n=t.nodes.length;i<n;i++)for(var r=t.nodes[i],o=0;o<this.options.roots.length;o++){if(this.options.roots[o]===r.associatedShape){e=r;break}}if(!e&&!(e=t.root()))throw"Unable to find a root for the tree.";return this.getTreeForRoot(t,e)},getTreeForRoot:function(t,e){var i=t.getSpanningTree(e);return p.isUndefined(i)||i.isEmpty()?null:{tree:i,root:i.root}}}),k=y.extend({init:function(t){if(y.fn.init.call(this),p.isUndefined(t))throw"Diagram is not specified.";this.diagram=t},layout:function(t){this.transferOptions(t);var e=new b(this.diagram).convert(t);if(!e.isEmpty()){var i=e.getConnectedComponents();if(!p.isEmpty(i)){for(var r=0;r<i.length;r++){var o=i[r];this.layoutGraph(o,t)}var s=this.gridLayoutComponents(i);return new n.LayoutState(this.diagram,s)}}},_initRuntimeProperties:function(){for(var t=0;t<this.graph.nodes.length;t++){var e=this.graph.nodes[t];e.layer=-1,e.downstreamLinkCount=0,e.upstreamLinkCount=0,e.isVirtual=!1,e.uBaryCenter=0,e.dBaryCenter=0,e.upstreamPriority=0,e.downstreamPriority=0,e.gridPosition=0}},_prepare:function(t){var e,i,n,r=[];for(i=0;i<t.links.length;i++)t.links[i].depthOfDumminess=0;var o=new c;for(p.forEach(t.nodes,function(t){0===t.incoming.length&&(o.set(t,0),r.push(t))});r.length>0;){var s=r.shift();for(e=0;e<s.outgoing.length;e++){var a=(n=s.outgoing[e]).target;o.containsKey(a)?o.set(a,Math.max(o.get(s)+1,o.get(a))):o.set(a,o.get(s)+1),m(r,a)||r.push(a)}}var l=0;o.forEachValue(function(t){l=Math.max(l,t)});var h=[];p.addRange(h,o.keys()),h.sort(function(t,e){var i=o.get(t),n=o.get(e);return p.sign(n-i)});for(var d=0;d<h.length;++d){var u=h[d],f=Number.MAX_VALUE;if(0!==u.outgoing.length){for(i=0;i<u.outgoing.length;++i)n=u.outgoing[i],f=Math.min(f,o.get(n.target));f>1&&o.set(u,f-1)}}for(this.layers=[],e=0;e<l+1;e++)this.layers.push([]);for(o.forEach(function(t,e){t.layer=e,this.layers[e].push(t)},this),i=0;i<this.layers.length;i++){var g=this.layers[i];for(e=0;e<g.length;e++)g[e].gridPosition=e}},layoutGraph:function(t,e){if(p.isUndefined(t))throw"No graph given or graph analysis of the diagram failed.";p.isDefined(e)&&this.transferOptions(e),this.graph=t,t.setItemIndices();var i=t.makeAcyclic();this._initRuntimeProperties(),this._prepare(t,e),this._dummify(),this._optimizeCrossings(),this._swapPairs(),this.arrangeNodes(),this._moveThingsAround(),this._dedummify(),p.forEach(i,function(t){t.points&&t.points.reverse()})},setMinDist:function(t,e,i){var n=t.layer,r=t.layerIndex;this.minDistances[n][r]=i},getMinDist:function(t,e){for(var i=0,n=t.layerIndex,r=e.layerIndex,o=t.layer,s=Math.min(n,r),a=Math.max(n,r),l=s;l<a;++l)i+=this.minDistances[o][l];return i},placeLeftToRight:function(t){for(var e,i,n=new c,r=0;r<this.layers.length;++r){var o=t[r];if(o){for(e=0;e<o.length;e++)i=o[e],n.containsKey(i)||this.placeLeft(i,n,r);var s=Number.POSITIVE_INFINITY;for(e=0;e<o.length;e++){i=o[e];var a=this.rightSibling(i);a&&this.nodeLeftClass.get(a)!==r&&(s=Math.min(s,n.get(a)-n.get(i)-this.getMinDist(i,a)))}if(s===Number.POSITIVE_INFINITY){var l=[];for(e=0;e<o.length;e++){i=o[e];var h=[];p.addRange(h,this.upNodes.get(i)),p.addRange(h,this.downNodes.get(i));for(var d=0;d<h.length;d++){var u=h[d];this.nodeLeftClass.get(u)<r&&l.push(n.get(u)-n.get(i))}}l.sort(),s=0===l.length?0:l.length%2==1?l[this.intDiv(l.length,2)]:(l[this.intDiv(l.length,2)-1]+l[this.intDiv(l.length,2)])/2}for(e=0;e<o.length;e++)i=o[e],n.set(i,n.get(i)+s)}}return n},placeRightToLeft:function(t){for(var e,i,n=new c,r=0;r<this.layers.length;++r){var o=t[r];if(o){for(e=0;e<o.length;e++)i=o[e],n.containsKey(i)||this.placeRight(i,n,r);var s=Number.NEGATIVE_INFINITY;for(e=0;e<o.length;e++){i=o[e];var a=this.leftSibling(i);a&&this.nodeRightClass.get(a)!==r&&(s=Math.max(s,n.get(a)-n.get(i)+this.getMinDist(a,i)))}if(s===Number.NEGATIVE_INFINITY){var l=[];for(e=0;e<o.length;e++){i=o[e];var h=[];p.addRange(h,this.upNodes.get(i)),p.addRange(h,this.downNodes.get(i));for(var d=0;d<h.length;d++){var u=h[d];this.nodeRightClass.get(u)<r&&l.push(n.get(i)-n.get(u))}}l.sort(),s=0===l.length?0:l.length%2==1?l[this.intDiv(l.length,2)]:(l[this.intDiv(l.length,2)-1]+l[this.intDiv(l.length,2)])/2}for(e=0;e<o.length;e++)i=o[e],n.set(i,n.get(i)+s)}}return n},_getLeftWing:function(){var t={value:null},e=this.computeClasses(t,1);return this.nodeLeftClass=t.value,e},_getRightWing:function(){var t={value:null},e=this.computeClasses(t,-1);return this.nodeRightClass=t.value,e},computeClasses:function(t,e){for(var i=0,n=t.value=new c,r=0;r<this.layers.length;++r){i=r;for(var o=this.layers[r],s=1===e?0:o.length-1;0<=s&&s<o.length;s+=e){var a=o[s];if(n.containsKey(a))i=n.get(a);else if(n.set(a,i),a.isVirtual)for(var l=this._nodesInLink(a),h=0;h<l.length;h++){var d=l[h];n.set(d,i)}}}for(var u=[],p=0;p<this.layers.length;p++)u.push(null);return n.forEach(function(t,e){null===u[e]&&(u[e]=[]),u[e].push(t)}),u},_isVerticalLayout:function(){return"up"===this.options.subtype.toLowerCase()||"down"===this.options.subtype.toLowerCase()||"vertical"===this.options.subtype.toLowerCase()},_isHorizontalLayout:function(){return"right"===this.options.subtype.toLowerCase()||"left"===this.options.subtype.toLowerCase()||"horizontal"===this.options.subtype.toLowerCase()},_isIncreasingLayout:function(){return"right"===this.options.subtype.toLowerCase()||"down"===this.options.subtype.toLowerCase()},_moveThingsAround:function(){var t,e,i,n,r,o;for(e=0;e<this.layers.length;++e)(n=this.layers[e]).sort(this._gridPositionComparer);for(this.minDistances=[],e=0;e<this.layers.length;++e)for(n=this.layers[e],this.minDistances[e]=[],r=0;r<n.length;++r)(i=n[r]).layerIndex=r,this.minDistances[e][r]=this.options.nodeDistance,r<n.length-1&&(this._isVerticalLayout()?this.minDistances[e][r]+=(i.width+n[r+1].width)/2:this.minDistances[e][r]+=(i.height+n[r+1].height)/2);for(this.downNodes=new c,this.upNodes=new c,p.forEach(this.graph.nodes,function(t){this.downNodes.set(t,[]),this.upNodes.set(t,[])},this),p.forEach(this.graph.links,function(t){var e=t.source,i=t.target,n=null,r=null;e.layer>i.layer?(n=t.source,r=t.target):(r=t.source,n=t.target),this.downNodes.get(r).push(n),this.upNodes.get(n).push(r)},this),this.downNodes.forEachValue(function(t){t.sort(this._gridPositionComparer)}),this.upNodes.forEachValue(function(t){t.sort(this._gridPositionComparer)}),e=0;e<this.layers.length-1;++e)for(n=this.layers[e],o=0;o<n.length-1;o++){var s=n[o];if(s.isVirtual){var a=this.downNodes.get(s)[0];if(a.isVirtual)for(r=o+1;r<n.length;++r)if((i=n[r]).isVirtual){var l=this.downNodes.get(i)[0];if(l.isVirtual&&a.gridPosition>l.gridPosition){var h=a.gridPosition;a.gridPosition=l.gridPosition,l.gridPosition=h;var d=a.layerIndex,u=l.layerIndex;this.layers[e+1][d]=l,this.layers[e+1][u]=a,a.layerIndex=u,l.layerIndex=d}}}}var f=this._getLeftWing(),g=this._getRightWing(),m=this.placeLeftToRight(f),v=this.placeRightToLeft(g),y=new c;p.forEach(this.graph.nodes,function(t){y.set(t,(m.get(t)+v.get(t))/2)});var b=new c,w=new c;for(e=0;e<this.layers.length;++e){n=this.layers[e];var x=-1;for(r=0;r<n.length;++r)i=n[r],b.set(i,0),w.set(i,!1),i.isVirtual&&(-1===x?x=r:x===r-1?x=r:(r,b.set(n[x],0),y.get(i)-y.get(n[x])===this.getMinDist(n[x],i)?w.set(n[x],!0):w.set(n[x],!1),x=r))}p.forEach([1,-1],function(e){for(var i=1===e?0:this.layers.length-1;0<=i&&i<this.layers.length;i+=e){var n=this.layers[i],r=this._firstVirtualNode(n),o=null,s=null;if(-1!==r)for(o=n[r],s=[],t=0;t<r;t++)s.push(n[t]);else o=null,s=n;if(s.length>0){for(this._sequencer(y,null,o,e,s),t=0;t<s.length-1;++t)this.setMinDist(s[t],s[t+1],y.get(s[t+1])-y.get(s[t]));o&&this.setMinDist(s[s.length-1],o,y.get(o)-y.get(s[s.length-1]))}for(;o;){var a=this.nextVirtualNode(n,o);if(a){if(b.get(o)===e){r=o.layerIndex;var l=a.layerIndex;for(s=[],t=r+1;t<l;t++)s.push(n[t]);s.length>0&&this._sequencer(y,o,a,e,s),w.set(o,!0)}}else{for(r=o.layerIndex,s=[],t=r+1;t<n.length;t++)s.push(n[t]);if(s.length>0){for(this._sequencer(y,o,null,e,s),t=0;t<s.length-1;++t)this.setMinDist(s[t],s[t+1],y.get(s[t+1])-y.get(s[t]));this.setMinDist(o,s[0],y.get(s[0])-y.get(o))}}o=a}this.adjustDirections(i,e,b,w)}},this);var _,k,C=this._isIncreasingLayout()?0:this.layers.length-1,S=this._isIncreasingLayout()?1:-1,T=0;function P(t,e){for(var i=Number.MIN_VALUE,n=0;n<t.length;++n){var r=t[n];i=e._isVerticalLayout()?Math.max(i,r.height):Math.max(i,r.width)}return i}for(t=C;_=t,(k=this)._isIncreasingLayout()?_<k.layers.length:_>=0;t+=S){var A=P(n=this.layers[t],this);for(r=0;r<n.length;++r)i=n[r],this._isVerticalLayout()?(i.x=y.get(i),i.y=T+A/2):(i.x=T+A/2,i.y=y.get(i));T+=this.options.layerSeparation+A}},adjustDirections:function(t,e,i,n){if(!(t+e<0||t+e>=this.layers.length))for(var r=null,o=null,s=this.layers[t+e],a=0;a<s.length;++a){var l=s[a];if(l.isVirtual){var h=this.getNeighborOnLayer(l,t);if(h.isVirtual){if(r){for(var c=n.get(o),d=this.layers[t],u=o.layerIndex,p=h.layerIndex,f=u+1;f<p;++f)d[f].isVirtual&&(c=c&&n.get(d[f]));if(c){i.set(r,e);for(var g=r.layerIndex,m=l.layerIndex,v=g+1;v<m;++v)s[v].isVirtual&&i.set(s[v],e)}}r=l,o=h}}}},getNeighborOnLayer:function(t,e){var i=this.upNodes.get(t)[0];return i.layer===e?i:(i=this.downNodes.get(t)[0]).layer===e?i:null},_sequencer:function(t,e,i,n,r){if(1===r.length&&this._sequenceSingle(t,e,i,n,r[0]),r.length>1){var o=r.length,s=this.intDiv(o,2);this._sequencer(t,e,i,n,r.slice(0,s)),this._sequencer(t,e,i,n,r.slice(s)),this.combineSequences(t,e,i,n,r)}},_sequenceSingle:function(t,e,i,n,r){var o=-1===n?this.downNodes.get(r):this.upNodes.get(r),s=o.length;0!==s&&(s%2==1?t.set(r,t.get(o[this.intDiv(s,2)])):t.set(r,(t.get(o[this.intDiv(s,2)-1])+t.get(o[this.intDiv(s,2)]))/2),e&&t.set(r,Math.max(t.get(r),t.get(e)+this.getMinDist(e,r))),i&&t.set(r,Math.min(t.get(r),t.get(i)-this.getMinDist(r,i))))},combineSequences:function(t,e,i,n,r){var o,s,a,l,h,c,d=r.length,u=this.intDiv(d,2),p=[];for(o=0;o<u;++o){for(s=0,l=-1===n?this.downNodes.get(r[o]):this.upNodes.get(r[o]),a=0;a<l.length;++a)h=l[a],t.get(h)>=t.get(r[o])?s++:(s--,p.push({k:t.get(h)+this.getMinDist(r[o],r[u-1]),v:2}));p.push({k:t.get(r[o])+this.getMinDist(r[o],r[u-1]),v:s})}e&&p.push({k:t.get(e)+this.getMinDist(e,r[u-1]),v:Number.MAX_VALUE}),p.sort(this._positionDescendingComparer);var f=[];for(o=u;o<d;++o){for(s=0,l=-1===n?this.downNodes.get(r[o]):this.upNodes.get(r[o]),a=0;a<l.length;++a)h=l[a],t.get(h)<=t.get(r[o])?s++:(s--,f.push({k:t.get(h)-this.getMinDist(r[o],r[u]),v:2}));f.push({k:t.get(r[o])-this.getMinDist(r[o],r[u]),v:s})}i&&f.push({k:t.get(i)-this.getMinDist(i,r[u]),v:Number.MAX_VALUE}),f.sort(this._positionAscendingComparer);for(var g=0,m=0,v=this.getMinDist(r[u-1],r[u]);t.get(r[u])-t.get(r[u-1])<v;)if(g<m){if(0===p.length){t.set(r[u-1],t.get(r[u])-v);break}g+=(c=p.shift()).v,t.set(r[u-1],c.k),t.set(r[u-1],Math.max(t.get(r[u-1]),t.get(r[u])-v))}else{if(0===f.length){t.set(r[u],t.get(r[u-1])+v);break}m+=(c=f.shift()).v,t.set(r[u],c.k),t.set(r[u],Math.min(t.get(r[u]),t.get(r[u-1])+v))}for(o=u-2;o>=0;o--)t.set(r[o],Math.min(t.get(r[o]),t.get(r[u-1])-this.getMinDist(r[o],r[u-1])));for(o=u+1;o<d;o++)t.set(r[o],Math.max(t.get(r[o]),t.get(r[u])+this.getMinDist(r[o],r[u])))},placeLeft:function(t,e,i){var n=Number.NEGATIVE_INFINITY;p.forEach(this._getComposite(t),function(t){var r=this.leftSibling(t);r&&this.nodeLeftClass.get(r)===this.nodeLeftClass.get(t)&&(e.containsKey(r)||this.placeLeft(r,e,i),n=Math.max(n,e.get(r)+this.getMinDist(r,t)))},this),n===Number.NEGATIVE_INFINITY&&(n=0),p.forEach(this._getComposite(t),function(t){e.set(t,n)})},placeRight:function(t,e,i){var n=Number.POSITIVE_INFINITY;p.forEach(this._getComposite(t),function(t){var r=this.rightSibling(t);r&&this.nodeRightClass.get(r)===this.nodeRightClass.get(t)&&(e.containsKey(r)||this.placeRight(r,e,i),n=Math.min(n,e.get(r)-this.getMinDist(t,r)))},this),n===Number.POSITIVE_INFINITY&&(n=0),p.forEach(this._getComposite(t),function(t){e.set(t,n)})},leftSibling:function(t){var e=this.layers[t.layer],i=t.layerIndex;return 0===i?null:e[i-1]},rightSibling:function(t){var e=this.layers[t.layer],i=t.layerIndex;return i===e.length-1?null:e[i+1]},_getComposite:function(t){return t.isVirtual?this._nodesInLink(t):[t]},arrangeNodes:function(){var t,e,i,n,r;for(e=0;e<this.layers.length;e++)for(n=this.layers[e],i=0;i<n.length;i++)(r=n[i]).upstreamPriority=r.upstreamLinkCount,r.downstreamPriority=r.downstreamLinkCount;for(var o=0;o<2;o++){for(t=this.layers.length-1;t>=1;t--)this.layoutLayer(!1,t);for(t=0;t<this.layers.length-1;t++)this.layoutLayer(!0,t)}var s=Number.MAX_VALUE;for(e=0;e<this.layers.length;e++)for(n=this.layers[e],i=0;i<n.length;i++)r=n[i],s=Math.min(s,r.gridPosition);if(s<0)for(e=0;e<this.layers.length;e++)for(n=this.layers[e],i=0;i<n.length;i++)(r=n[i]).gridPosition=r.gridPosition-s},layoutLayer:function(t,e){var i,n;n=t?this.layers[i=e+1]:this.layers[i=e-1];for(var r=[],o=0;o<n.length;o++)r.push(n[o]);r.sort(function(t,e){var i=(t.upstreamPriority+t.downstreamPriority)/2,n=(e.upstreamPriority+e.downstreamPriority)/2;return Math.abs(i-n)<1e-4?0:i<n?1:-1}),p.forEach(r,function(t){var e=t.gridPosition,i=this.calcBaryCenter(t),r=(t.upstreamPriority+t.downstreamPriority)/2;if(!(Math.abs(e-i)<1e-4||Math.abs(e-i)<.2501))if(e<i)for(;e<i&&this.moveRight(t,n,r);)e=t.gridPosition;else for(;e>i&&this.moveLeft(t,n,r);)e=t.gridPosition},this),i>0&&this.calcDownData(i-1),i<this.layers.length-1&&this.calcUpData(i+1)},moveRight:function(t,e,i){var n=p.indexOf(e,t);if(n===e.length-1)return t.gridPosition=t.gridPosition+.5,!0;var r=e[n+1],o=(r.upstreamPriority+r.downstreamPriority)/2;return r.gridPosition>t.gridPosition+1?(t.gridPosition=t.gridPosition+.5,!0):!(o>i||Math.abs(o-i)<1e-4)&&(!!this.moveRight(r,e,i)&&(t.gridPosition=t.gridPosition+.5,!0))},moveLeft:function(t,e,i){var n=p.indexOf(e,t);if(0===n)return t.gridPosition=t.gridPosition-.5,!0;var r=e[n-1],o=(r.upstreamPriority+r.downstreamPriority)/2;return r.gridPosition<t.gridPosition-1?(t.gridPosition=t.gridPosition-.5,!0):!(o>i||Math.abs(o-i)<1e-4)&&(!!this.moveLeft(r,e,i)&&(t.gridPosition=t.gridPosition-.5,!0))},mapVirtualNode:function(t,e){this.nodeToLinkMap.set(t,e),this.linkToNodeMap.containsKey(e)||this.linkToNodeMap.set(e,[]),this.linkToNodeMap.get(e).push(t)},_nodesInLink:function(t){return this.linkToNodeMap.get(this.nodeToLinkMap.get(t))},_dummify:function(){this.linkToNodeMap=new c,this.nodeToLinkMap=new c;var t,e,i,n,r,a,l,h,d=this.graph.links.slice(0);for(h=0;h<d.length;h++){var u=d[h],f=u.source,g=u.target,m=f.layer,v=g.layer,y=f.gridPosition,b=g.gridPosition,w=(b-y)/Math.abs(v-m),x=f;if(m-v>1){for(l=m-1;l>v;l--){for((i=new o).x=f.x,i.y=f.y,i.width=f.width/100,i.height=f.height/100,(e=(l-v)*w+y)>(t=this.layers[l]).length&&(e=t.length),y>=this.layers[m].length-1&&b>=this.layers[v].length-1?e=t.length:0===y&&0===b&&(e=0),i.layer=l,i.uBaryCenter=0,i.dBaryCenter=0,i.upstreamLinkCount=0,i.downstreamLinkCount=0,i.gridPosition=e,i.isVirtual=!0,p.insert(t,i,e),r=e+1;r<t.length;r++)(n=t[r]).gridPosition=n.gridPosition+1;(a=new s(x,i)).depthOfDumminess=0,x=i,this.graph.nodes.push(i),this.graph.addLink(a),i.index=this.graph.nodes.length-1,this.mapVirtualNode(i,u)}u.changeSource(x),u.depthOfDumminess=m-v-1}if(m-v<-1){for(l=m+1;l<v;l++){for((i=new o).x=f.x,i.y=f.y,i.width=f.width/100,i.height=f.height/100,(e=(l-m)*w+y)>(t=this.layers[l]).length&&(e=t.length),y>=this.layers[m].length-1&&b>=this.layers[v].length-1?e=t.length:0===y&&0===b&&(e=0),i.layer=l,i.uBaryCenter=0,i.dBaryCenter=0,i.upstreamLinkCount=0,i.downstreamLinkCount=0,i.gridPosition=e,i.isVirtual=!0,e&=e,p.insert(t,i,e),r=e+1;r<t.length;r++)(n=t[r]).gridPosition=n.gridPosition+1;(a=new s(x,i)).depthOfDumminess=0,x=i,this.graph.nodes.push(i),this.graph.addLink(a),i.index=this.graph.nodes.length-1,this.mapVirtualNode(i,u)}u.changeSource(x),u.depthOfDumminess=v-m-1}}},_dedummify:function(){for(var t=!0;t;){t=!1;for(var e=0;e<this.graph.links.length;e++){var i=this.graph.links[e];if(0!==i.depthOfDumminess){var n=[];n.unshift({x:i.target.x,y:i.target.y}),n.unshift({x:i.source.x,y:i.source.y});for(var r=i,o=i.depthOfDumminess,s=0;s<o;s++){var a=r.source.incoming[0];n.unshift({x:a.source.x,y:a.source.y}),r=a}i.changeSource(r.source),i.depthOfDumminess=0,n.length>2?(n.splice(0,1),n.splice(n.length-1),i.points=n):i.points=[],t=!0;break}}}},_optimizeCrossings:function(){for(var t,e=-1,i=0;0!==e&&!(i++>3);){for(e=0,t=this.layers.length-1;t>=1;t--)e+=this.optimizeLayerCrossings(!1,t);for(t=0;t<this.layers.length-1;t++)e+=this.optimizeLayerCrossings(!0,t)}},calcUpData:function(t){if(0!==t){var e,i,n,r=this.layers[t],o=new d,s=this.layers[t-1];for(e=0;e<s.length;e++)o.add(s[e]);for(e=0;e<r.length;e++){var a=r[e],l=0,h=0;for(i=0;i<a.incoming.length;i++)n=a.incoming[i],o.contains(n.source)&&(h++,l+=n.source.gridPosition);for(i=0;i<a.outgoing.length;i++)n=a.outgoing[i],o.contains(n.target)&&(h++,l+=n.target.gridPosition);h>0?(a.uBaryCenter=l/h,a.upstreamLinkCount=h):(a.uBaryCenter=e,a.upstreamLinkCount=0)}}},calcDownData:function(t){if(t!==this.layers.length-1){var e,i,n,r=this.layers[t],o=new d,s=this.layers[t+1];for(e=0;e<s.length;e++)o.add(s[e]);for(e=0;e<r.length;e++){var a=r[e],l=0,h=0;for(i=0;i<a.incoming.length;i++)n=a.incoming[i],o.contains(n.source)&&(h++,l+=n.source.gridPosition);for(i=0;i<a.outgoing.length;i++)n=a.outgoing[i],o.contains(n.target)&&(h++,l+=n.target.gridPosition);h>0?(a.dBaryCenter=l/h,a.downstreamLinkCount=h):(a.dBaryCenter=e,a.downstreamLinkCount=0)}}},optimizeLayerCrossings:function(t,e){var i,n,r=(n=t?this.layers[i=e+1]:this.layers[i=e-1]).slice(0);t?this.calcUpData(i):this.calcDownData(i);var o=this;n.sort(function(t,e){var i=o.calcBaryCenter(t),n=o.calcBaryCenter(e);if(Math.abs(i-n)<1e-4)return t.degree()===e.degree()?o.compareByIndex(t,e):t.degree()<e.degree()?1:-1;var r=1e3*(n-i);return r>0?-1:r<0?1:o.compareByIndex(t,e)});var s,a=0;for(s=0;s<n.length;s++)n[s]!==r[s]&&a++;if(a>0){var l=0;for(s=0;s<n.length;s++){n[s].gridPosition=l++}}return a},_swapPairs:function(){for(var t=this.options.layeredIterations,e=0;!(e++>t);)for(var i=e%4<=1,n=e%4==1,r=i?0:this.layers.length-1;i?r<=this.layers.length-1:r>=0;r+=i?1:-1){for(var o=this.layers[r],s=!1,a=!0,l=0,h=0;h<o.length-1;h++){var c=0,d=0,u=0;if(a?(0!==r&&(c=this.countLinksCrossingBetweenTwoLayers(r-1,r)),r!==this.layers.length-1&&(d=this.countLinksCrossingBetweenTwoLayers(r,r+1)),i?c*=2:d*=2,u=c+d):u=l,0!==u){var p=o[h],f=o[h+1],g=p.gridPosition,m=f.gridPosition;o[h]=f,o[h+1]=p,p.gridPosition=m,f.gridPosition=g,c=0,0!==r&&(c=this.countLinksCrossingBetweenTwoLayers(r-1,r)),d=0,r!==this.layers.length-1&&(d=this.countLinksCrossingBetweenTwoLayers(r,r+1)),i?c*=2:d*=2;var v=c+d;(n?v>=u:v>u)?(p=o[h],f=o[h+1],g=p.gridPosition,m=f.gridPosition,o[h]=f,o[h+1]=p,p.gridPosition=m,f.gridPosition=g,l=u,a=!1):(s=!0,a=!0)}}s&&(r!==this.layers.length-1&&this.calcUpData(r+1),0!==r&&this.calcDownData(r-1))}},countLinksCrossingBetweenTwoLayers:function(t,e){var i,n=0,r=new d,o=this.layers[t];for(i=0;i<o.length;i++)r.add(o[i]);var s=new d,a=this.layers[e];for(i=0;i<a.length;i++)s.add(a[i]);var l=new d,h=[],c=[];r.forEach(function(t){p.addRange(c,t.incoming),p.addRange(c,t.outgoing)});for(var u=0;u<c.length;u++){var f=c[u];r.contains(f.source)&&s.contains(f.target)?(l.add(f),h.push(f)):s.contains(f.source)&&r.contains(f.target)&&h.push(f)}for(var g=0;g<h.length;g++)for(var m=h[g],v=0;v<h.length;v++)if(g!==v){var y,b,w,x,_=h[v];l.contains(m)?(y=m.source,b=m.target):(y=m.target,b=m.source),l.contains(_)?(w=_.source,x=_.target):(w=_.target,x=_.source);var k=y.gridPosition,C=b.gridPosition;(k-w.gridPosition)*(C-x.gridPosition)<0&&n++}return n/2},calcBaryCenter:function(t){var e=t.upstreamLinkCount,i=t.downstreamLinkCount,n=t.uBaryCenter,r=t.dBaryCenter;return e>0&&i>0?(n+r)/2:e>0?n:i>0?r:0},_gridPositionComparer:function(t,e){return t.gridPosition<e.gridPosition?-1:t.gridPosition>e.gridPosition?1:0},_positionAscendingComparer:function(t,e){return t.k<e.k?-1:t.k>e.k?1:0},_positionDescendingComparer:function(t,e){return t.k<e.k?1:t.k>e.k?-1:0},_firstVirtualNode:function(t){for(var e=0;e<t.length;e++)if(t[e].isVirtual)return e;return-1},compareByIndex:function(t,e){var i=t.index,n=e.index;return i<n?1:i>n?-1:0},intDiv:function(t,e){return(t-t%e)/e},nextVirtualNode:function(t,e){for(var i=e.layerIndex+1;i<t.length;++i)if(t[i].isVirtual)return t[i];return null}}),C=i.Class.extend({init:function(t,e){if(p.isUndefined(t))throw"No diagram given";this.diagram=t,this.nodeMap=new c,this.linkMap=new c,this.capture(e||t)},capture:function(t){var e,i,r,o,s,a,l;if(t instanceof n.Graph){for(o=0;o<t.nodes.length;o++)r=(e=t.nodes[o]).associatedShape,this.nodeMap.set(r.visual.domElement.id,new h(e.x,e.y,e.width,e.height));for(o=0;o<t.links.length;o++)s=(a=t.links[o]).associatedConnection,this.linkMap.set(s.visual.domElement.id,a.points())}else if(t instanceof Array)for(i=t,o=0;o<i.length;o++)(r=(e=i[o]).associatedShape)&&this.nodeMap.set(r.visual.domElement.id,new h(e.x,e.y,e.width,e.height));else if(t.hasOwnProperty("links")&&t.hasOwnProperty("nodes")){for(i=t.nodes,l=t.links,o=0;o<i.length;o++)(r=(e=i[o]).associatedShape)&&this.nodeMap.set(r.visual.domElement.id,new h(e.x,e.y,e.width,e.height));for(o=0;o<l.length;o++)(s=(a=l[o]).associatedConnection)&&this.linkMap.set(s.visual.domElement.id,a.points)}else{var c=this.diagram.shapes,d=this.diagram.connections;for(o=0;o<c.length;o++)r=c[o],this.nodeMap.set(r.visual.domElement.id,r.bounds());for(o=0;o<d.length;o++)s=d[o],this.linkMap.set(s.visual.domElement.id,s.points())}}});a(n,{init:function(t){i.init(t,n.ui)},SpringLayout:w,TreeLayout:_,GraphAdapter:b,LayeredLayout:k,LayoutBase:y,LayoutState:C})}(window.kendo.jQuery),function(t,e){var i=kendo.dataviz,n=i.diagram,r=kendo.ui.Widget,o=kendo.Class,s=t.proxy,a=kendo.deepExtend,l=kendo.data.HierarchicalDataSource,h=n.Canvas,c=n.Group,d=n.Visual,u=n.Rectangle,p=n.Circle,f=n.CompositeTransform,g=n.Rect,m=n.Path,v=n.DeleteShapeUnit,y=n.DeleteConnectionUnit,b=n.TextBlock,w=n.Image,x=n.Point,_=n.Intersect,k=n.ConnectionEditAdorner,C=n.UndoRedoService,S=n.ToolService,T=n.Selector,P=n.ResizingAdorner,A=n.ConnectorsAdorner,D=n.Cursors,z=n.Utils,E=kendo.Observable,M=n.Ticker,L=n.ToBackUnit,I=n.ToFrontUnit,B=n.Dictionary,R=n.PolylineRouter,O=n.CascadingRouter,N=z.isUndefined,V=z.isDefined,F=t.isArray,H=kendo.isFunction,U=z.isString,$=".kendoDiagram",j="Cascading",G="itemBoundsChange",W="change",q="Auto",Y=9007199254740992,Q="itemRotate",X="none",Z=Number.MAX_VALUE,K=-Number.MAX_VALUE,J="transformed",tt="rotated";n.DefaultConnectors=[{name:"Top",description:"Top Connector"},{name:"Right",description:"Right Connector"},{name:"Bottom",description:"Bottom Connector"},{name:"Left",Description:"Left Connector"},{name:q,Description:"Auto Connector",position:function(t){return t.getPosition("center")}}],n.shapeDefaults=function(t){var e={type:"rectangle",path:"",visual:null,x:0,y:0,minWidth:20,minHeight:20,width:100,height:100,hover:{},connectors:n.DefaultConnectors,rotation:{angle:0}};return z.simpleExtend(e,t),e};var et=kendo.Class.extend({init:function(t){this.pan=t.pan,this.diagram=t.diagram},initState:function(){this.from=this.diagram.pan(),this.to=this.pan},update:function(t){var e=this.diagram;e._storePan(new x(this.from.x+(this.to.x-this.from.x)*t,this.from.y+(this.to.y-this.from.y)*t)),e._transformMainLayer()}});function it(t){return t.options.name.toLowerCase()===q.toLowerCase()}function nt(t,e){for(var i,n=Y,r=e.connectors,o=0;o<r.length;o++){var s=r[o];if(!it(s)){var a=t.distanceTo(s.position());a<n&&(n=a,i=s)}}return i}function rt(t,e){var i,n,r=[];for(i=0;i<e.length;i++){n=e[i];for(var o=0;o<t.children.length;o++){if(t.children[o]==n.domElement){r.push(o);break}}}return r}var ot=E.extend({init:function(t,e){E.fn.init.call(this),this.options=a({id:n.randomId()},this.options,t),this.isSelected=!1,this.model=e,this.visual=new c({id:this.options.id}),this._template()},options:{background:"Green",hover:{},cursor:D.grip,content:{align:"center middle",text:""},selectable:!0,serializable:!0,enable:!0},_getCursor:function(t){return this.adorner?this.adorner._getCursor(t):this.options.cursor},visible:function(t){if(N(t))return this.visual.visible();this.visual.visible(t)},bounds:function(){},refresh:function(){this.visual.redraw()},position:function(t){this.options.x=t.x,this.options.y=t.y,this.visual.position(t)},toString:function(){return this.options.id},serialize:function(){var t=a({},{options:this.options});return this.model&&(t.model=this.model.toString()),t},content:function(t){if(t!==e){var i=this.bounds(),r=a({text:"",width:i.width,height:i.height},this.options.content);n.Utils.isString(t)?(this.options.content.text=t,r.text=t):this.options.content=r,this.shapeVisual instanceof b&&(this._contentVisual=this.shapeVisual),!this._contentVisual&&this.options.content.text&&(this._contentVisual=new b,this.visual.append(this._contentVisual)),this._contentVisual&&this._contentVisual.redraw(r)}return this.options.content.text},_hitTest:function(t){var e=this.bounds();return this.visible()&&e.contains(t)&&this.options.enable},_template:function(){if(this.options.content.template){var t=this.model||{},e=kendo.template(this.options.content.template,{paramName:"item"});this.options.content.text=e(t)}},_canSelect:function(){return this.options.selectable&&this.diagram.options.selectable.type!==X}}),st=o.extend({init:function(t,e){this.options=a({},this.options,e),this.connections=[],this.shape=t},options:{width:7,height:7,background:"Yellow",hover:{}},position:function(){return this.options.position?this.options.position(this.shape):this.shape.getPosition(this.options.name)},toString:function(){return{shapeId:this.shape.toString(),connector:this.options.name}}});st.parse=function(t,e){for(var i=e.split(":"),n=i[0],r=i[1]||q,o=0;o<t.shapes.length;o++){var s=t.shapes[o];if(s.options.id==n)return s.getConnector(r.trim())}};var at=ot.extend({init:function(t,i){var n=this,r=t.diagram;delete t.diagram,ot.fn.init.call(n,t,i),n.options.diagram=r,t=n.options,n.connectors=[],n.type=t.type,n.shapeVisual=at.createShapeVisual(n.options),n.visual.append(this.shapeVisual),n.bounds(new g(t.x,t.y,Math.floor(t.width),Math.floor(t.height))),n._createConnectors(),n.parentContainer=null,n.isContainer=!1,n.isCollapsed=!1,n.id=n.visual.domElement.id,n.content(n.content()),n._rotate(),t.hasOwnProperty("layout")&&t.layout!==e&&(n.layout=t.layout.bind(t))},options:n.shapeDefaults(),_createConnectors:function(){var t,e,i=this.options,n=i.connectors.length,r=i.connectorDefaults;for(e=0;e<n;e++)t=new st(this,a({},r,i.connectors[e])),this.connectors.push(t)},bounds:function(t){var e,i,n,r;if(r=this.options,t)if(U(t))switch(t){case J:n=this._transformedBounds();break;case"absolute":n=this._transformedBounds();var o=this.diagram._pan;n.x+=o.x,n.y+=o.y;break;case tt:n=this._rotatedBounds();break;default:n=this._bounds}else e=t.topLeft(),r.x=e.x,r.y=e.y,r.width=Math.max(t.width,r.minWidth),r.height=Math.max(t.height,r.minHeight),this._bounds=new g(r.x,r.y,r.width,r.height),this.visual.position(e),this.redraw({width:r.width,height:r.height}),this.refreshConnections(),this._triggerBoundsChange();else n=this._bounds;return this.shapeVisual._measured||(i=this.shapeVisual._measure())&&(this.shapeVisual.options.autoSize?this.bounds(new g(r.x,r.y,i.width,i.height)):this.shapeVisual.redraw()),n},position:function(t){if(!t)return this._bounds.topLeft();this.bounds(new g(t.x,t.y,this._bounds.width,this._bounds.height))},clone:function(){var t=this.serialize();t.options.id=n.randomId();var e=new at(t.options);return e.diagram=this.diagram,e},select:function(t){var e,i,n,r=this.diagram;if(N(t)&&(t=!0),this._canSelect()&&this.isSelected!=t)return n=this.diagram.options.selectable.type,e=[],i=[],this.isSelected=t,this.isSelected?("single"===n&&this.diagram.select(!1),r._selectedItems.push(this),e.push(this)):(z.remove(r._selectedItems,this),i.push(this)),r._internalSelection||r._selectionChanged(e,i),!0},rotate:function(t,i){var n=this.visual.rotate();if(t!==e){var r,o,s=this.bounds(),a=new x(s.width/2,s.height/2);i&&(r=t-n.angle,o=s.center().rotate(i,360-r).minus(a),this._rotationOffset=this._rotationOffset.plus(o.minus(s.topLeft())),this.position(o)),this.visual.rotate(t,a),this.options.rotation.angle=t,this.diagram&&this.diagram._connectorsAdorner&&this.diagram._connectorsAdorner.refresh(),this.refreshConnections(),this.diagram&&this.diagram.trigger(Q,{item:this})}return n},connections:function(t){var e,i,n,r,o=[];for(e=0;e<this.connectors.length;e++)for(r=this.connectors[e].connections,i=0;i<r.length;i++)if(n=r[i],"out"==t){var s=n.source();s.shape&&s.shape==this&&o.push(n)}else if("in"==t){var a=n.target();a.shape&&a.shape==this&&o.push(n)}else o.push(n);return o},refreshConnections:function(){t.each(this.connections(),function(){this.refresh()})},getConnector:function(t){var e,i;if(!U(t))return t instanceof x?nt(t,this):this.connectors.length?this.connectors[0]:null;for(t=t.toLocaleLowerCase(),e=0;e<this.connectors.length;e++)if((i=this.connectors[e]).options.name.toLocaleLowerCase()==t)return i},getPosition:function(t){var e=this.bounds(),i=t[0].toLowerCase()+t.slice(1);return H(e[i])?this._transformPoint(e[i]()):e.center()},redraw:function(t){t&&(this.options=a({},this.options,t)),this._contentVisual&&this._contentVisual.redraw({width:this.options.width,height:this.options.height}),this.shapeVisual.redraw(t),t&&t.content&&this.content(t.content)},_triggerBoundsChange:function(){this.diagram&&this.diagram.trigger(G,{item:this,bounds:this._bounds.clone()})},_transformPoint:function(t){var e=this.rotate(),i=this.bounds().topLeft();return e.angle&&t.rotate(e.center().plus(i),360-e.angle),t},_transformedBounds:function(){var t=this.bounds(),e=t.topLeft(),i=t.bottomRight();return g.fromPoints(this.diagram.modelToView(e),this.diagram.modelToView(i))},_rotatedBounds:function(){var t=this.bounds().rotatedBounds(this.rotate().angle),e=t.topLeft(),i=t.bottomRight();return g.fromPoints(e,i)},_rotate:function(){var t=this.options.rotation;t&&t.angle&&this.rotate(t.angle),this._rotationOffset=new x},_hover:function(t){var e=this.options,i=e.hover,n=e.stroke,r=e.background;t&&V(i.stroke)&&(n=a({},n,i.stroke)),t&&V(i.background)&&(r=i.background),this.shapeVisual.redraw({stroke:n,background:r}),this.diagram._showConnectors(this,t)},_hitTest:function(t){if(this.visible()){var e,i=this.bounds(),n=this.rotate().angle;if(t.isEmpty&&!t.isEmpty())return _.rects(t,i,n||0);if(e=t.clone().rotate(i.center(),n),i.contains(e))return this}}});at.createShapeVisual=function(t){var e=t.diagram;delete t.diagram;var i,n,r,o,s,l=a({},t,{x:0,y:0}),h=l.visual,f=l.type;if(void 0!==window.DOMParser)i=function(t){return(new window.DOMParser).parseFromString(t,"image/svg+xml")};else{if(void 0===window.ActiveXObject||!new window.ActiveXObject("Microsoft.XMLDOM"))throw new Error("No XML parser found");i=function(t){var e=new window.ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e}}return kendo.isFunction(h)||"external"!==l.serializationSource?l.path?(o=l.path,(s=l).data=o,new m(s)):H(h)?(n=this,r=l,h.call(n,r)):U(f)?function(t,e){switch(t.toLocaleLowerCase()){case"rectangle":return new u(e);case"circle":return new p(e);case"text":return new b(e);case"image":return new w(e);case"svg":return n=e.definition,r=i('<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg">'+n+"</svg>"),o=document.importNode(r.childNodes[0].childNodes[0],!0),(s=new c).append(new d(o)),s;default:return new m(e)}var n,r,o,s}(l.type.toLocaleLowerCase(),l):new u(l):function(t,i,n){if(e.libraries&&e.libraries.length>0)for(var r=0;r<e.libraries.length;r++)for(var o=e.libraries[r],s=0;s<o.length;s++){var a=o[s];if(a.options.name===t&&"external"===a.options.serializationSource)return i.layout=a.options.layout,i.visual=a.options.visual,i.rebuild=a.options.rebuild,a.options.visual(n)}}(l.name,t,l)};var lt=ot.extend({init:function(t,e,i,n){var r=this;ot.fn.init.call(r,i,n),r._router=new R(this),r.path=new m(r.options),r.path.background(X),r.visual.append(r.path),r._sourcePoint=r._targetPoint=new x,r.source(t),r.target(e),r.content(r.options.content.text),r.definers=[],V(i)&&i.points&&r.points(i.points),r.refresh()},options:{hover:{stroke:{}},startCap:X,endCap:X,points:[],selectable:!0},sourcePoint:function(){return this._resolvedSourceConnector?this._resolvedSourceConnector.position():this._sourcePoint},source:function(t,i){return V(t)&&(i&&this.diagram?this.diagram.undoRedoService.addCompositeItem(new n.ConnectionEditUnit(this,t)):(t!==e&&(this.from=t),null===t?this.sourceConnector&&(this._sourcePoint=this._resolvedSourceConnector.position(),this._clearSourceConnector()):t instanceof st?(this.sourceConnector=t,this.sourceConnector.connections.push(this),this.refresh()):t instanceof x?(this._sourcePoint=t,this.sourceConnector&&this._clearSourceConnector(),this.refresh()):t instanceof at&&(this.sourceConnector=t.getConnector(q),this.sourceConnector.connections.push(this),this.refresh()))),this.sourceConnector?this.sourceConnector:this._sourcePoint},sourceDefiner:function(t){if(!t)return this._sourceDefiner||(this._sourceDefiner=new n.PathDefiner(this.sourcePoint(),null,null)),this._sourceDefiner;if(!(t instanceof n.PathDefiner))throw"The sourceDefiner needs to be a PathDefiner.";t.left=null,this._sourceDefiner=t,this.source(t.point)},targetPoint:function(){return this._resolvedTargetConnector?this._resolvedTargetConnector.position():this._targetPoint},target:function(t,i){return V(t)&&(i&&this.diagram?this.diagram.undoRedoService.addCompositeItem(new n.ConnectionEditUnit(this,t)):(t!==e&&(this.to=t),null===t?this.targetConnector&&(this._targetPoint=this._resolvedTargetConnector.position(),this._clearTargetConnector()):t instanceof st?(this.targetConnector=t,this.targetConnector.connections.push(this),this.refresh()):t instanceof x?(this._targetPoint=t,this.targetConnector&&this._clearTargetConnector(),this.refresh()):t instanceof at&&(this.targetConnector=t.getConnector(q),this.targetConnector&&(this.targetConnector.connections.push(this),this.refresh())))),this.targetConnector?this.targetConnector:this._targetPoint},targetDefiner:function(t){if(!t)return this._targetDefiner||(this._targetDefiner=new n.PathDefiner(this.targetPoint(),null,null)),this._targetDefiner;if(!(t instanceof n.PathDefiner))throw"The sourceDefiner needs to be a PathDefiner.";t.right=null,this._targetDefiner=t,this.target(t.point)},content:function(t){var e=ot.fn.content.call(this,t);return this.refresh(),e},select:function(t){var i,n,r,o=this.diagram;if(this._canSelect()&&this.isSelected!==t)return this.isSelected=t,i=[],n=[],r=this.diagram.options.selectable.type,this.isSelected?("single"===r&&this.diagram.select(!1),this.adorner=new k(this,this.options.select),o._adorn(this.adorner,!0),o._selectedItems.push(this),i.push(this)):this.adorner&&(o._adorn(this.adorner,!1),z.remove(o._selectedItems,this),this.adorner=e,n.push(this)),this.refresh(),o._internalSelection||o._selectionChanged(i,n),!0},bounds:function(t){if(!t||U(t))return this._bounds;this._bounds=t},type:function(t){if(!t)return this._type;if(t!==this._type){switch(this._type=t,t.toLowerCase()){case j.toLowerCase():this._router=new O(this);break;case"Polyline".toLowerCase():this._router=new R(this);break;default:throw"Unsupported connection type."}this.refresh()}},points:function(t){if(!t){var e=[];if(V(this.definers))for(var i=0;i<this.definers.length;i++)e.push(this.definers[i].point);return e}this.definers=[];for(var r=0;r<t.length;r++){var o=t[r];if(o instanceof n.Point)this.definers.push(new n.PathDefiner(o));else{if(!o.hasOwnProperty("x")||!o.hasOwnProperty("y"))throw"A Connection point needs to be a Point or an object with x and y properties.";this.definers.push(new n.PathDefiner(new x(o.x,o.y)))}}},allPoints:function(){var t=[this.sourcePoint()];if(this.definers)for(var e=0;e<this.definers.length;e++)t.push(this.definers[e].point);return t.push(this.targetPoint()),t},refresh:function(){!function(t){var e,i,n,r,o,s,a=Y,l=t.source(),h=t.target(),c=[0,2,3,1,4];if(l instanceof x?e=l:l instanceof st&&(it(l)?n=l.shape:(t._resolvedSourceConnector=l,e=l.position())),h instanceof x?i=h:h instanceof st&&(it(h)?r=h.shape:(t._resolvedTargetConnector=h,i=h.position())),e)r&&(t._resolvedTargetConnector=nt(e,r));else if(n)if(i)t._resolvedSourceConnector=nt(i,n);else if(r)for(var d=0;d<n.connectors.length;d++)if(s=5==n.connectors.length?c[d]:d,!it(o=n.connectors[s])){var u=o.position(),p=nt(u,r),f=Math.round(p.position().distanceTo(u));f<a&&(a=f,t._resolvedSourceConnector=o,t._resolvedTargetConnector=p)}}(this);var t,e,i,n,r=this.sourcePoint(),o=this.targetPoint();this._refreshPath(),t=this._bounds.topLeft(),e=r.minus(t),i=o.minus(t),this._contentVisual&&(n=x.fn.middleOf(e,i),this._contentVisual.position(new x(n.x+t.x,n.y+t.y))),this.adorner&&this.adorner.refresh()},redraw:function(t){this.options=a({},this.options,t),this.content(this.options.content.text),V(this.options.points)&&this.options.points.length>0&&(this.points(this.options.points),this._refreshPath()),this.path.redraw(t)},clone:function(){var t=this.serialize(),e=new lt(this.from,this.to,t.options);return e.diagram=this.diagram,e},serialize:function(){var t=a({},{options:this.options,from:this.from.toString(),to:this.to.toString()});return this.model&&(t.model=this.model.toString()),t.options.points=this.points(),t},_hitTest:function(t){if(this.visible()){var e=new x(t.x,t.y),i=this.sourcePoint(),n=this.targetPoint();if(t.isEmpty&&!t.isEmpty()&&t.contains(i)&&t.contains(n))return this;if(this._router.hitTest(e))return this}},_hover:function(t){var e=(this.options.stroke||{}).color;t&&V(this.options.hover.stroke.color)&&(e=this.options.hover.stroke.color),this.path.redraw({stroke:{color:e}})},_calcPathData:function(){function t(t){return t.x+" "+t.y}this._router&&this._router.route();for(var e=this.sourcePoint(),i=this.targetPoint(),n="M"+t(e),r=this.points(),o=0;o<r.length;o++){n+=" L"+t(r[o])}return n+" L"+t(i)},_refreshPath:function(){N(this.path)||(this._drawPath(this._calcPathData()),this.bounds(this._router.getBounds()))},_drawPath:function(t){this.path.redraw({data:t})},_clearSourceConnector:function(){z.remove(this.sourceConnector.connections,this),this.sourceConnector=e,this._resolvedSourceConnector=e},_clearTargetConnector:function(){z.remove(this.targetConnector.connections,this),this.targetConnector=e,this._resolvedTargetConnector=e}}),ht=r.extend({init:function(e,i){var n=this;kendo.destroy(e),r.fn.init.call(n,e,i),(e=n.element).empty(),n._initTheme(),n._extendLayoutOptions(n.options),n.element.addClass("k-widget k-diagram").attr("role","diagram");var o=t("<div class='k-canvas-container'></div>").appendTo(e)[0];n.canvas=new h(o),n.options.useScroller&&(n.scrollable=t("<div />").appendTo(n.element).append(n.canvas.element)),this.mainLayer=new c({id:"main-layer"}),this.canvas.append(this.mainLayer),this.adornerLayer=new c({id:"adorner-layer"}),this.canvas.append(this.adornerLayer),this.libraries=[],this.toolService=new S(this),this._attachEvents(),n._initialize(),n._fetchFreshData(),this._resizingAdorner=new P(this,{editable:this.options.editable}),this._connectorsAdorner=new A(this),this._adorn(this._resizingAdorner,!0),this._adorn(this._connectorsAdorner,!0),n.element.on("mousemove"+$,s(n._mouseMove,n)).on("mouseup"+$,s(n._mouseUp,n)).on("dblclick"+$,s(n._doubleClick,n)).on("mousedown"+$,s(n._mouseDown,n)).mousewheel(s(n._wheel,n),{ns:$}).on("keydown"+$,s(n._keydown,n)).on("mouseover"+$,s(n._mouseover,n)).on("mouseout"+$,s(n._mouseout,n)),n.selector=new T(n),n._clipboard=[],n._drop(),n._initEditor(),n._autosizeCanvas(),n.options.layout&&n.layout(n.options.layout),this.pauseMouseHandlers=!1,n._createShapes(),n._createConnections()},options:{name:"Diagram",zoomRate:1.1,dataSource:{},draggable:!0,template:"",autoBind:!0,editable:{rotate:{},resize:{},text:!0},useScroller:!0,tooltip:{enabled:!0,format:"{0}"},copy:{enabled:!0,offsetX:20,offsetY:20},editor:{height:20,margin:10,fontSize:15},selectable:{type:"multiple",inclusive:!0},snap:{enabled:!0,size:10,angle:10},shapeDefaults:n.shapeDefaults({undoable:!0}),connectionDefaults:{},shapes:[],connections:[]},events:["zoomEnd","zoomStart","pan","select",Q,G,W,"click"],_mouseover:function(t){t.target._hover&&t.target._hover(!0,t.target._kendoElement)},_mouseout:function(t){t.target._hover&&t.target._hover(!1,t.target._kendoElement)},_initTheme:function(){var t=((i.ui.themes||{})[((this.options||{}).theme||"").toLowerCase()]||{}).diagram;this.options=a({},t,this.options)},_createShapes:function(){var t,e,i=this.options.shapes;for(e=0;e<i.length;e++)t=i[e],this.addShape(t)},_createConnections:function(){var t,e,i,n,r=this.options,o=r.connectionDefaults,s=r.connections;for(n=0;n<s.length;n++)t=s[n],e=this._findConnectionShape(t.from),i=this._findConnectionShape(t.to),this.connect(e,i,a({},o,t))},_findConnectionShape:function(t){return this.getShapeById(t.shapeId).getConnector(t.connector||q)},destroy:function(){r.fn.destroy.call(this),this.clear(),this.element.off($),this.canvas.destroy(!0),this.canvas=e,this.destroyScroller(),this.options.draggable&&kendo.ui.DropTarget&&this.element.kendoDropTarget("destroy")},destroyScroller:function(){var t=this.scroller;t&&(t.destroy(),t.element.remove(),this.scroller=null)},save:function(){var t,e={};for(e.shapes=[],e.connections=[],t=0;t<this.shapes.length;t++){var i=this.shapes[t];i.options.serializable&&e.shapes.push(i.options)}for(t=0;t<this.connections.length;t++){var n=this.connections[t],r=a({},{from:n.from.toString(),to:n.to.toString()},n.options);e.connections.push(r)}return e},focus:function(){var t=window.scrollX,e=window.scrollY;this.canvas.focus(),window.scrollTo(t,e)},load:function(t){this.clear(),this.setOptions(t),this._createShapes(),this._createConnections()},clear:function(){this.dataSource&&this._unbindDataSource(),this.select(!1),this.mainLayer.clear(),this._initialize()},connect:function(t,e,i){var n=a({},this.options.connectionDefaults,i),r=new lt(t,e,n);return this.addConnection(r)},connected:function(t,e){for(var i=0;i<this.connections.length;i++){var n=this.connections[i];if(n.from==t&&n.to==e)return!0}return!1},addConnection:function(t,i){if(i===e&&(i=!0),i){var r=new n.AddConnectionUnit(t,this);this.undoRedoService.add(r)}else t.diagram=this,this.mainLayer.append(t.visual),this.connections.push(t);return t},addShape:function(t,e){var i,r=this.options.shapeDefaults;return t instanceof at?(r=a({},r,e),t.redraw(e),i=t):(r=a({},r,t),i=new at(r)),r.undoable?this.undoRedoService.add(new n.AddShapeUnit(i,this)):(this.shapes.push(i),i.diagram=this,this.mainLayer.append(i.visual)),this.trigger(W,{added:[i],removed:[]}),i.redraw(),i.hasOwnProperty("layout")&&i.layout(i),i},remove:function(t,e){var i=F(t);if(N(e)&&(e=!0),e&&this.undoRedoService.begin(),i){t=t.slice(0);for(var n=0;n<t.length;n++)this._removeItem(t[n],e)}else(t instanceof at||t instanceof lt)&&this._removeItem(t,e);e&&this.undoRedoService.commit(),this.trigger(W,{added:[],removed:i?t:[t]})},undo:function(){this.undoRedoService.undo()},redo:function(){this.undoRedoService.redo()},select:function(t,i){var n,r,o,s,l,h,c,d=(i=a({addToSelection:!1},i)).addToSelection;if(t===e)return this._selectedItems;if(this._internalSelection=!0,h=[],l=[],!d)for(;this._selectedItems.length>0;)(r=this._selectedItems[0]).select(!1)&&h.push(r);if(z.isBoolean(t))!1!==t&&this.select("all");else if(t instanceof g)for(s=t,o=this.shapes.concat(this.connections),n=0;n<o.length;n++)r=o[n],s&&!r._hitTest(s)||!r.options.enable||r.select(!0)&&l.push(r);else if(t instanceof Array)for(n=0;n<t.length;n++)(r=t[n])instanceof ot&&r.select(!0)&&l.push(r);else if(t instanceof ot)t.select(!0)&&l.push(t);else if((c=t.toString().toLowerCase())===X)this.select(!1);else if("all"===c)for(o=this.shapes.concat(this.connections),n=0;n<o.length;n++)(r=o[n]).select(!0)&&l.push(r);(l.length>0||h.length>0)&&this._selectionChanged(l,h),this._internalSelection=!1},toFront:function(t,e){t||(t=this._selectedItems.slice());var i,n=this._getDiagramItems(t);if(N(e)||e){i=rt(this.mainLayer.domElement,n.visuals);var r=new I(this,t,i);this.undoRedoService.add(r)}else this.mainLayer.toFront(n.visuals),this._fixOrdering(n,!0)},toBack:function(t,e){t||(t=this._selectedItems.slice());var i,n=this._getDiagramItems(t);if(N(e)||e){i=rt(this.mainLayer.domElement,n.visuals);var r=new L(this,t,i);this.undoRedoService.add(r)}else this.mainLayer.toBack(n.visuals),this._fixOrdering(n,!1)},bringIntoView:function(t,e){var i,r=this.viewport();if(e=a({animate:!1,align:"center middle"},e),t instanceof ot?i=t.bounds(J):F(t)?i=this.boundingBox(t):t instanceof g&&(i=t.clone()),"none"!==e.align||!r.contains(i.center())){"none"===e.align&&(e.align="center middle");var o=i.clone();new n.RectAlign(r).align(i,e.align);var s=i.topLeft().minus(o.topLeft());this.options.useScroller||(s=this.pan().plus(s)),this.pan(s,e.animate)}},alignShapes:function(t){N(t)&&(t="Left");var e,i,r,o=this.select();if(0!==o.length){switch(t.toLowerCase()){case"left":case"top":e=Z;break;case"right":case"bottom":e=K}for(r=0;r<o.length;r++)if((i=o[r])instanceof at)switch(t.toLowerCase()){case"left":e=Math.min(e,i.options.x);break;case"top":e=Math.min(e,i.options.y);break;case"right":e=Math.max(e,i.options.x);break;case"bottom":e=Math.max(e,i.options.y)}var s=[],a=[];for(r=0;r<o.length;r++)if((i=o[r])instanceof at)switch(a.push(i),s.push(i.bounds()),t.toLowerCase()){case"left":case"right":i.position(new x(e,i.options.y));break;case"top":case"bottom":i.position(new x(i.options.x,e))}var l=new n.TransformUnit(a,s);this.undoRedoService.add(l,!1)}},zoom:function(t,e){if(t){var i=e?e.location:new n.Point(0,0);if(t=this._zoom=this._getValidZoom(t),!N(i)){var r=(i=new n.Point(Math.round(i.x),Math.round(i.y))).times(t),o=this.modelToView(i).minus(r);this._storePan(new n.Point(Math.round(o.x),Math.round(o.y)))}e&&(e.zoom=t),this._panTransform(),this._autosizeCanvas(),this._updateAdorners()}return this._zoom},pan:function(t,e){var i=(e=e||{animated:!1}).animated;return t instanceof x&&!t.equals(this._pan)&&(this._animatePan(t,!i),this._storePan(t),this.trigger("pan",{total:t,delta:e.delta}),this._autosizeCanvas(),this._updateAdorners()),this._pan},viewport:function(){var t=this.element;return new g(0,0,t.width(),t.height())},copy:function(){if(this.options.copy.enabled){this._clipboard=[],this._copyOffset=1;for(var t=0;t<this._selectedItems.length;t++){var e=this._selectedItems[t];this._clipboard.push(e)}}},cut:function(){if(this.options.copy.enabled){this._clipboard=[],this._copyOffset=0;for(var t=0;t<this._selectedItems.length;t++){var e=this._selectedItems[t];this._clipboard.push(e)}this.remove(this._clipboard)}},paste:function(){var t,e,i,n,r,o,s;if(this._clipboard.length>0){var a=new B;for(t=this._copyOffset*this.options.copy.offsetX,e=this._copyOffset*this.options.copy.offsetY,this.select(!1),s=0;s<this._clipboard.length;s++)(i=this._clipboard[s])instanceof lt||(n=i.clone(),a.set(i.id,n.id),this._addItem(n),n.position(new x(i.options.x+t,i.options.y+e)),n.select(!0));for(s=0;s<this._clipboard.length;s++)(i=this._clipboard[s])instanceof at||(n=i.clone(),i.source()instanceof st&&(r=i.source(),a.containsKey(r.shape.id)?(o=this.getShapeById(a.get(r.shape.id)),n.source(o.getConnector(r.options.name))):n.source(new x(i.sourcePoint().x+t,i.sourcePoint().y+e))),i.target()instanceof st&&(r=i.target(),a.containsKey(r.shape.id)?(o=this.getShapeById(a.get(r.shape.id)),n.target(o.getConnector(r.options.name))):n.target(new x(i.targetPoint().x+t,i.targetPoint().y+e))),this._addItem(n),n.position(new x(i.options.x+t,i.options.y+e)),n.select(!0));this._copyOffset+=1}},boundingBox:function(t,e){var i,n=g.empty(),r=V(t)?this._getDiagramItems(t):{shapes:this.shapes};if(r.shapes.length>0){var o=r.shapes[0];!0===e&&(n.x-=o._rotationOffset.x,n.y-=o._rotationOffset.y),n=o.bounds(tt);for(var s=1;s<r.shapes.length;s++)i=(o=r.shapes[s]).bounds(tt),!0===e&&(i.x-=o._rotationOffset.x,i.y-=o._rotationOffset.y),n=n.union(i)}return n},documentToView:function(e){var i=t(this.canvas.element).offset();return new x(e.x-i.left,e.y-i.top)},viewToDocument:function(e){var i=t(this.canvas.element).offset();return new x(e.x+i.left,e.y+i.top)},viewToModel:function(t){return this._transformWithMatrix(t,this._matrixInvert)},modelToView:function(t){return this._transformWithMatrix(t,this._matrix)},modelToLayer:function(t){return this._transformWithMatrix(t,this._layerMatrix)},layerToModel:function(t){return this._transformWithMatrix(t,this._layerMatrixInvert)},documentToModel:function(t){return this.viewToModel(this.documentToView(t))},modelToDocument:function(t){return this.viewToDocument(this.modelToView(t))},_transformWithMatrix:function(t,e){var i=t;if(t instanceof x)e&&(i=e.apply(t));else{var n=this._transformWithMatrix(t.topLeft(),e),r=this._transformWithMatrix(t.bottomRight(),e);i=g.fromPoints(n,r)}return i},setDataSource:function(t){this.options.dataSource=t,this._dataSource(),this.options.autoBind&&this.dataSource.fetch()},layout:function(t){var e,i;switch(this.isLayouting=!0,N(t)&&(t=this.options.layout),(e=N(t)||N(t.type)?"Tree":t.type).toLowerCase()){case"tree":i=new n.TreeLayout(this);break;case"layered":i=new n.LayeredLayout(this);break;case"forcedirected":case"force":case"spring":case"springembedder":i=new n.SpringLayout(this);break;default:throw"Layout algorithm '"+e+"' is not supported."}var r=new n.LayoutState(this),o=i.layout(t);if(o){var s=new n.LayoutUndoUnit(r,o,t?t.animate:null);this.undoRedoService.add(s)}this.isLayouting=!1},getShapeById:function(t){var e;return(e=z.first(this.shapes,function(e){return e.visual.domElement.id===t}))?e:e=z.first(this.connections,function(e){return e.visual.domElement.id===t})},editor:function(t,e){var i=this._editor;if(N(t.options.editable)||t.options.editable.text){i.options=a(this.options.editor,e),this._editItem=t,this._showEditor();var n=t.content();i._originalContent=n,i.content(n),i.focus()}return i},_initEditor:function(){this._editor=new n.TextBlockEditor,this._editor.bind("finishEdit",t.proxy(this._finishEditShape,this))},_showEditor:function(){var t=this._editor;t.visible(!0),this.element.context.appendChild(t.domElement),this._positionEditor()},_positionEditor:function(){var e=this._editor,i=e.options,n=t(e.domElement),r=this.modelToView(this._editItem.bounds()),o=function(t){return parseInt(n.css(t),10)},s=new x(o("borderLeftWidth")+o("paddingLeft"),o("borderTopWidth")+o("paddingTop")),a=new x(i.margin,r.height/2-i.height/2).minus(s);e.size(r.width-2*i.margin,i.height),e.position(r.topLeft().plus(a)),n.css({fontSize:i.fontSize})},_extendLayoutOptions:function(t){t.layout&&(t.layout=a(n.LayoutBase.fn.defaultOptions||{},t.layout))},_finishEditShape:function(){var t=this._editor,e=this._editItem;if(e){var i=new n.ContentChangedUndoUnit(e,t._originalContent,t.content());this.undoRedoService.add(i),t.visible(!1)}},_selectionChanged:function(t,e){this.trigger("select",{selected:t,deselected:e})},_getValidZoom:function(t){return Math.min(Math.max(t,.55),2)},_panTransform:function(t){var e=t||this._pan;this.scroller?(this.scroller.scrollTo(e.x,e.y),this._zoomMainLayer()):(this._pan=e,this._transformMainLayer())},_animatePan:function(t,e){var i=this;if(e)this._panTransform(t);else if(i.scroller)i.scroller.animatedScrollTo(t.x,t.y),i._zoomMainLayer();else{var n=new M;n.addAdapter(new et({pan:t,diagram:this})),n.onStep=function(){i._finishPan()},n.play()}},_finishPan:function(){this.trigger("pan",{total:this._pan,delta:Number.NaN})},_storePan:function(t){this._pan=t,this._storeViewMatrix()},_zoomMainLayer:function(){var t=this._zoom,e=new f(0,0,t,t);e.render(this.mainLayer.domElement),this._storeLayerMatrix(e),this._storeViewMatrix()},_transformMainLayer:function(){var t=this._pan,e=this._zoom,i=new f(t.x,t.y,e,e);i.render(this.mainLayer.domElement),this._storeLayerMatrix(i),this._storeViewMatrix()},_storeLayerMatrix:function(t){this._layerMatrix=t.toMatrix(),this._layerMatrixInvert=t.invert().toMatrix()},_storeViewMatrix:function(){var t=this._pan,e=this._zoom,i=new f(t.x,t.y,e,e);this._matrix=i.toMatrix(),this._matrixInvert=i.invert().toMatrix()},_toIndex:function(t,e){var i=this._getDiagramItems(t);this.mainLayer.toIndex(i.visuals,e),this._fixOrdering(i,!1)},_drop:function(){var t=this;t.options.draggable&&kendo.ui.DropTarget&&this.element.kendoDropTarget({drop:function(e){var i,n;if(e.draggable&&e.draggable.hint){i=e.draggable.hint.data("data"),n=e.draggable.hintOffset,n=new x(n.left,n.top);var r=t.documentToModel(n);i.x=r.x,i.y=r.y,t.addShape(i)}}})},_fixOrdering:function(t,e){var i,n,r=e?this.shapes.length-1:0,o=e?this.connections.length-1:0;for(i=0;i<t.shapes.length;i++)n=t.shapes[i],z.remove(this.shapes,n),z.insert(this.shapes,n,r);for(i=0;i<t.cons.length;i++)n=t.cons[i],z.remove(this.connections,n),z.insert(this.connections,n,o)},_getDiagramItems:function(t){var e,i={},n=t;for(i.visuals=[],i.shapes=[],i.cons=[],t?F(t)||(n=[t]):n=this._selectedItems.slice(),e=0;e<n.length;e++){var r=n[e];r instanceof at?(i.shapes.push(r),i.visuals.push(r.visual)):r instanceof lt&&(i.cons.push(r),i.visuals.push(r.visual))}return i},_removeItem:function(t,e){t.select(!1),t instanceof at?this._removeShape(t,e):t instanceof lt&&this._removeConnection(t,e),e||this.mainLayer.remove(t.visual)},_removeShape:function(t,e){var i,n,r,o=[],s=[];for(this.toolService._removeHover(),e?this.undoRedoService.addCompositeItem(new v(t)):z.remove(this.shapes,t),i=0;i<t.connectors.length;i++){r=t.connectors[i];for(var a=0;a<r.connections.length;a++)(n=r.connections[a]).sourceConnector==r?o.push(n):n.targetConnector==r&&s.push(n)}for(i=0;i<o.length;i++)o[i].source(null,e);for(i=0;i<s.length;i++)s[i].target(null,e)},_removeConnection:function(t,e){t.sourceConnector&&z.remove(t.sourceConnector.connections,t),t.targetConnector&&z.remove(t.targetConnector.connections,t),e?this.undoRedoService.addCompositeItem(new y(t)):z.remove(this.connections,t)},_canRectSelect:function(){return"multiple"===this.options.selectable.type},_refreshSource:function(t){var e,i=this,n=t.node,r=t.action,o=t.items;i.options;function s(t){if(!N(t)){var e=z.first(i._dataMap,function(e){return e.uid===t.uid});if(e)return e.shape;var n=a({},i.options.shapeDefaults,{dataItem:t});return e=new at(n,t),i.addShape(e),i._dataMap.push({uid:t.uid,shape:e}),e}}function l(t,e){for(var n=0;n<e.length;n++){var r=s(e[n]),o=s(t);if(o&&!i.connected(o,r))i.connect(o,r).type(j)}}if(!t.field){if(r&&"add"!==r){if("remove"===r);else if("itemchange"===r)if(n)o.length&&l(n,o);else for(e=0;e<o.length;e++)s(o[e])}else l(n,o);for(e=0;e<o.length;e++)o[e].load()}i.options.layout&&i.layout(i.options.layout)},_mouseDown:function(t){if(!this.pauseMouseHandlers){var e=this._calculatePosition(t);0===t.button&&this.toolService.start(e,this._meta(t))&&t.preventDefault()}},_addItem:function(t){t instanceof at?this.addShape(t):t instanceof lt&&this.addConnection(t)},_mouseUp:function(t){if(!this.pauseMouseHandlers){var e=this._calculatePosition(t);0===t.button&&this.toolService.end(e,this._meta(t))&&t.preventDefault()}},_mouseMove:function(t){if(!this.pauseMouseHandlers){var e=this._calculatePosition(t);0===t.button&&this.toolService.move(e,this._meta(t))&&t.preventDefault()}},_doubleClick:function(t){var e=this._calculatePosition(t);0===t.button&&this.toolService.doubleClick(e,this._meta(t))&&t.preventDefault()},_keydown:function(t){this.toolService.keyDown(t.keyCode,this._meta(t))&&t.preventDefault()},_wheel:function(t){var e=this._calculatePosition(t),i=a(this._meta(t),{delta:t.data.delta});this.toolService.wheel(e,i)&&t.preventDefault()},_meta:function(t){return{ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey}},_calculatePosition:function(t){var i=t.pageX===e?t.originalEvent:t,n=new x(i.pageX,i.pageY);return this.documentToModel(n)},_normalizePointZoom:function(t){return t.times(1/this.zoom())},_initialize:function(){this._zoom=1,this._pan=new x,this.shapes=[],this._selectedItems=[],this.connections=[],this._adorners=[],this._dataMap=[],this.undoRedoService=new C,this.id=n.randomId()},_attachEvents:function(){this.scroller&&(this.bind(G,t.proxy(this._autosizeCanvas,this)),this.bind(W,t.proxy(this._autosizeCanvas,this)),this.bind("zoomEnd",t.proxy(this._autosizeCanvas,this)))},_fetchFreshData:function(){this._dataSource(),this.options.autoBind&&this.dataSource.fetch()},_dataSource:function(){var t=this,e=t.options.dataSource;(e=F(e)?{data:e}:e).fields||(e.fields=[{field:"text"},{field:"url"},{field:"spriteCssClass"},{field:"imageUrl"}]),t.dataSource&&t._refreshHandler&&t._unbindDataSource(),t._refreshHandler=s(t._refreshSource,t),t._errorHandler=s(t._error,t),t.dataSource=l.create(e).bind(W,t._refreshHandler).bind("error",t._errorHandler)},_unbindDataSource:function(){this.dataSource.unbind(W,this._refreshHandler).unbind("error",this._errorHandler)},_error:function(){},_adorn:function(t,i){i!==e&&t&&(i?(this._adorners.push(t),this.adornerLayer.append(t.visual)):(z.remove(this._adorners,t),this.adornerLayer.remove(t.visual)))},_showConnectors:function(t,e){e?this._connectorsAdorner.show(t):this._connectorsAdorner.destroy()},_autosizeCanvas:function(t){if(this.scroller){var e=(t||{}).sender||this,i=this._editor,n=e.zoom(),r=e.element,o=new g(0,0,r.width(),r.height()),s=e.boundingBox(e.shapes);s.width=(s.width+s.x)*n,s.height=(s.height+s.y)*n,s=s.union(o),e.canvas.size(s),i&&i.visible()&&this._positionEditor()}},_updateAdorners:function(){for(var t=this._adorners,e=0;e<t.length;e++){var i=t[e];i.refreshBounds&&i.refreshBounds(),i.refresh()}},_refresh:function(){var t;for(t=0;t<this.connections.length;t++)this.connections[t].refresh()}});i.ui.plugin(ht),kendo.deepExtend(n,{Shape:at,Connection:lt,Connector:st})}(window.kendo.jQuery);
//# sourceMappingURL=../../../../Maps/desktop/reporting.desktop.production.js.map
